"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4981],{1814:(ue,Ct,f)=>{f.d(Ct,{In:()=>ot,MA:()=>x,Mo:()=>M,NV:()=>E,S3:()=>L,dt:()=>U,h8:()=>h,k0:()=>y});const L={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},ot={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},M={fill:"transparent",stroke:"transparent",strokeWidth:1},U={fill:"none",stroke:"#5F6CE1",strokeWidth:1},h={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},x={fill:"transparent"},y={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(ue,Ct,f)=>{f.d(Ct,{w:()=>X,I:()=>K});var L=f(4981),E=f(9054),ot=f(5811),M=/^#[a-fA-F0-9]+$/i,U=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,h=/^rgb\((\d+),(\d+),(\d+)\)$/i;const x=T=>{let G=null,lt=null;if(T)if("transparent"==T)G="#000000",lt=0;else if(T.match(M))G=T;else{let W=(T=T.replace(/\s+/g,"")).match(U);if(W)G="#"+(256|W[1]).toString(16).slice(1)+(256|W[2]).toString(16).slice(1)+(256|W[3]).toString(16).slice(1),lt=(0,ot.q)(parseFloat(W[4]),100);else{let tt=T.match(h);tt&&(G="#"+(256|tt[1]).toString(16).slice(1)+(256|tt[2]).toString(16).slice(1)+(256|tt[3]).toString(16).slice(1))}}return{hex:G,alpha:lt}},K=T=>S(null==T?void 0:T.url,null==T?void 0:T.path,null==T?void 0:T.src);var S=(T,G,lt)=>{var W,tt;let ft,pt,ht,nt;var R,Pt;return T&&(ft=T.replace(/\\/g,"/")),G&&(pt=G.replace(/\\/g,"/")),lt&&(ht=lt.replace(/\\/g,"/")),pt&&!ft&&(ft=(null===(R=L.icdt.config)||void 0===R?void 0:R.readfileuploadurl)+pt),!ht||pt||ft||(pt=ht.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),ft=(null===(Pt=L.icdt.config)||void 0===Pt?void 0:Pt.readfileuploadurl)+pt),nt=(null!==(W=ft)&&void 0!==W?W:"").split("/").pop()||(null!==(tt=pt)&&void 0!==tt?tt:"").split("/").pop()||"",{url:ft,path:pt,name:nt}};const X=T=>{let G={x:0,y:0,width:T.screen.w,height:T.screen.h},lt=[];return T.data.forEach((W,tt)=>{var ft,pt;let ht={id:"number"==typeof W.id?W.id:L.icdt.data.newSlideId,code:null===(ft=W.id)||void 0===ft?void 0:ft.toString(),name:"string"==typeof W.id?W.id:`Trang ${tt+1}`,svg:{viewBox:G,nodes:[]},test:(nt=W.test2,nt?(nt.audiotrue&&(nt.audiotrue=K({path:nt.audiotrue.path})),nt.audiofalse&&(nt.audiofalse=K({path:nt.audiofalse.path})),nt.effecttrue&&(nt.effecttrue=K({path:nt.effecttrue.path})),nt.effectfalse&&(nt.effectfalse=K({path:nt.effectfalse.path})),nt.icontrue&&(nt.icontrue=K({path:nt.icontrue.path})),nt.iconfalse&&(nt.iconfalse=K({path:nt.iconfalse.path})),nt):{})};var nt;W.background&&ht.svg&&(ht.svg.background=function(T){return T&&(null!==T.match(/#([a-zA-Z0-9]+)/)||null!==T.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==T.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(W.background)?{color:W.background}:function(T){return T&&null!==T.match(/data:[^;]+;base64,/)}(W.background)?{base64:W.background}:function(T){return T&&null!==T.match(/http(s)?:\/\//)}(W.background)?S(W.background):S(void 0,W.background)),jQuery(null!==(pt=W.svg)&&void 0!==pt?pt:"").find(".svg-node").each((nt,R)=>{var Pt,Qt;let Dt=jQuery(R).parents(".indexs"),xt=Dt.attr("data-index"),Vt=Dt.attr("data-time"),zt=null!==(Pt=R.getAttribute("id"))&&void 0!==Pt?Pt:"0",dt={id:parseInt(zt),code:`${R.nodeName}-${R.getAttribute("id")}`,name:R.nodeName,idx:xt?parseInt(xt):0,time:Vt?parseFloat(Vt):0,type:(()=>{switch(R.nodeName){case"polygon":return E.$.POLYGON;case"circle":return E.$.CIRCLE;case"ellipse":return E.$.ELLIPSE;case"line":return E.$.LINE;case"rect":return E.$.RECT;case"foreignObject":return E.$.FOREIGNOBJECT}return 0})(),size:(et=>{let _t=0,bt=0,Zt=0,gt=0,z=null,F=null,d=parseFloat((null===(et=R.getAttribute("transform"))||void 0===et?void 0:et.replace("rotate(","").replace(")",""))||"0")||null;switch(R.nodeName){case"polygon":{var J,ut;let ct=[],St=[],Nt=999999999,Lt=999999999,Bt=0,Et=0;z=JSON.parse(R.getAttribute("ratios")||"[]"),F=null!==(J=null===(ut=R.getAttribute("points"))||void 0===ut?void 0:ut.split(",").map(function(mt){return mt.split(" ").map(function(Xt){return parseFloat(Xt)})}))&&void 0!==J?J:[],F.forEach(function(mt){ct.push(mt[0]),St.push(mt[1])}),Nt=Math.min.apply(null,ct),Lt=Math.min.apply(null,St),Bt=Math.max.apply(null,ct),Et=Math.max.apply(null,St),_t=Nt,bt=Lt,Zt=Bt-_t,gt=Et-bt;break}case"circle":{let ct=parseFloat(R.getAttribute("cx")||"0"),St=parseFloat(R.getAttribute("cy")||"0"),Nt=parseFloat(R.getAttribute("r")||"0");_t=ct-Nt,bt=St-Nt,Zt=2*Nt,gt=2*Nt;break}case"ellipse":{let ct=parseFloat(R.getAttribute("cx")||"0"),St=parseFloat(R.getAttribute("cy")||"0"),Nt=parseFloat(R.getAttribute("rx")||"0"),Lt=parseFloat(R.getAttribute("ry")||"0");_t=ct-Nt,bt=St-Lt,Zt=2*Nt,gt=2*Lt;break}case"line":{let ct=parseFloat(R.getAttribute("x1")||"0"),St=parseFloat(R.getAttribute("y1")||"0"),Nt=parseFloat(R.getAttribute("x2")||"0"),Lt=parseFloat(R.getAttribute("y2")||"0"),Bt=999999999,Et=999999999,mt=0,Xt=0;Bt=Math.min(ct,Nt),Et=Math.min(St,Lt),mt=Math.max(ct,Nt),Xt=Math.max(St,Lt),_t=Bt,bt=Et,Zt=mt-_t,gt=Xt-bt,z=[[(ct-_t)/(Zt||1),(St-bt)/(gt||1)],[(Nt-_t)/(Zt||1),(Lt-bt)/(gt||1)]];break}case"rect":case"foreignObject":_t=parseFloat(R.getAttribute("x")||"0"),bt=parseFloat(R.getAttribute("y")||"0"),Zt=parseFloat(R.getAttribute("width")||"0"),gt=parseFloat(R.getAttribute("height")||"0")}return Object.assign({},{x:_t,y:bt,width:Zt,height:gt,ratios:z,points:F,rotate:d})})(),attribute:(()=>{let et={};switch(R.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var _t,bt,Zt,gt,z,F;let d=null!==(_t=R.getAttribute("fill"))&&void 0!==_t?_t:null,J=null!==(bt=R.getAttribute("stroke"))&&void 0!==bt?bt:null,ut=null!==(Zt=parseFloat(R.getAttribute("stroke-width")||"0"))&&void 0!==Zt?Zt:null,ct=null!==(gt=R.getAttribute("stroke-linecap"))&&void 0!==gt?gt:null,St=null!==(z=R.getAttribute("stroke-linejoin"))&&void 0!==z?z:null,Nt=null!==(F=parseFloat(R.getAttribute("stroke-dasharray")||"0"))&&void 0!==F?F:null;Object.assign(et,{fill:d,stroke:J,strokeWidth:ut,strokeLinecap:ct,strokeLinejoin:St,strokeDasharray:Nt});break}}return et})(),style:(()=>{let et={};switch(R.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let z=jQuery(R).find(".svg-container");if(z.length){var _t,bt;let d=null!==(_t=parseFloat(z.css("border-width")||"0"))&&void 0!==_t?_t:null,J=null!==(bt=z.css("border-style"))&&void 0!==bt?bt:null,ut=z.css("border-color")||null,ct=null,St=z.css("background-color")||null,Nt=null;(()=>{let{hex:Lt,alpha:Bt}=x(ut);ut=Lt,ct=Bt})(),(()=>{let{hex:Lt,alpha:Bt}=x(St);St=Lt,Nt=Bt})(),Object.assign(et,{borderWidth:d,borderStyle:J,borderColor:ut,borderOpacity:ct,backgroundColor:St,backgroundOpacity:Nt})}let F=jQuery(R).find(".svg-editor-content");if(F.length){var Zt,gt;let d=JSON.parse((F.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:J,alpha:ut}=x(d.TextColor);Object.assign(et,{fontFamily:null!==(Zt=d.FontFamily)&&void 0!==Zt?Zt:null,fontSize:null!==(gt=d.FontSize)&&void 0!==gt?gt:null,color:J,opacity:ut})}break}}return et})(),source:(()=>{let et={};switch(R.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Dt.hasClass("editors")){let Et=jQuery(R).find(".svg-editor-content");if(Et.length){var _t;let mt=Et.html(),Xt=null!==(_t=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==_t?_t:[];Object.assign(et,{type:"html",html:{htmlContent:mt,variableKeywords:Xt}})}}else if(Dt.hasClass("inputs")||Dt.hasClass("textareas"))Object.assign(et,{type:"input",input:{input:!!jQuery(R).find("input").length,textarea:!!jQuery(R).find("textarea").length}});else if(Dt.hasClass("tests")){let Et=jQuery(R).find(".svg-test");if(Dt.hasClass("tests-truefalse")){var bt,Zt;let mt=Et.find(".svg-editor-content").html(),Xt=null!==(bt=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==bt?bt:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(Zt=W.test2.truefalse)||void 0===Zt?void 0:Zt.includes(zt)}},html:{htmlContent:mt,variableKeywords:Xt}})}else if(Dt.hasClass("tests-singlechoice")){var gt,z;let mt=Et.find(".svg-editor-content").html(),Xt=null!==(gt=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==gt?gt:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(z=W.test2.singlechoice)||void 0===z?void 0:z.includes(zt)}},html:{htmlContent:mt,variableKeywords:Xt}})}else if(Dt.hasClass("tests-multichoice")){var F,d;let mt=Et.find(".svg-editor-content").html(),Xt=null!==(F=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==F?F:[];Object.assign(et,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(d=W.test2.multichoice)||void 0===d?void 0:d.includes(zt)}},html:{htmlContent:mt,variableKeywords:Xt}})}else if(Dt.hasClass("tests-fill")){var J,ut;let mt=Et.find(".svg-editor-content").html(),Xt=null!==(J=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==J?J:[],Rt=null!==(ut=(null!=mt?mt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==ut?ut:[];Rt=Rt.filter((fe,H,c)=>c.indexOf(fe)==H),Object.assign(et,{type:"test",test:{type:"fill",fill:Rt.map(fe=>{var H;return{key:fe,value:null===(H=W.test2.fill)||void 0===H||null===(H=H.find(c=>c.id==zt))||void 0===H||null===(H=H.vals)||void 0===H?void 0:H.map(c=>c.text).filter(c=>!["",null,void 0,NaN].includes(c))}})},html:{htmlContent:mt,variableKeywords:Xt,fillKeywords:Rt}})}else if(Dt.hasClass("tests-matching")){if(Et.hasClass("svg-test-empty"))Object.assign(et,{type:"test",test:{type:"matching-empty",matching:{key:Et.attr("data-name")||null}}});else if(Et.hasClass("svg-test-content")){var ct;let mt=Et.find(".svg-editor-content").html(),Xt=null!==(ct=(null!=mt?mt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ct?ct:[];Object.assign(et,{type:"test",test:{type:"matching-content",matching:{key:Et.attr("data-name")||null}},html:{htmlContent:mt,variableKeywords:Xt}})}}else if(Dt.hasClass("tests-speech")){var St;Object.assign(et,{type:"speech",speech:{value:null===(St=W.test2.speech)||void 0===St||null===(St=St.find(mt=>mt.id==zt))||void 0===St||null===(St=St.vals)||void 0===St?void 0:St.map(mt=>mt.text).filter(mt=>!["",null,void 0,NaN].includes(mt))}})}else if(Dt.hasClass("tests-submit")){let mt=jQuery(R).find(".svg-container img");Object.assign(et,{type:"test",test:{type:"submit"},image:S(mt.attr("url"),mt.attr("path"),mt.attr("src"))})}}else if(Dt.hasClass("images")){let Et=jQuery(R).find(".svg-editor-content img");if(Et.length)Object.assign(et,{type:"image",image:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))});else{let mt=jQuery(R).find("iframe");Object.assign(et,{type:"iframe",iframe:S(mt.attr("url"),mt.attr("path"),mt.attr("src"))})}}else if(Dt.hasClass("sounds")){let Et=jQuery(R).find(".svg-editor-content img");Et.length&&Object.assign(et,{type:"image",image:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))})}else if(Dt.hasClass("htmls")){let Et=jQuery(R).find("iframe");Et.length&&Object.assign(et,{type:"iframe",iframe:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))})}else if(Dt.hasClass("svgs")){let Et=jQuery(R).find("svg");var Nt,Lt;Et.length&&Object.assign(et,{type:"svg",svg:Object.assign(S(Et.attr("url"),Et.attr("path"),Et.attr("src")),{svgContent:null!==(Nt=null===(Lt=Et.get(0))||void 0===Lt?void 0:Lt.outerHTML)&&void 0!==Nt?Nt:null})})}else if(Dt.hasClass("medias")){let Et=jQuery(R).find(".media-item");if(Et.length)switch(Et.attr("type")){case"audio":Object.assign(et,{type:"audio",audio:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;case"video":Object.assign(et,{type:"video",video:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;case"file":Object.assign(et,{type:"file",file:S(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;default:var Bt;Object.assign(et,{type:"link",link:{url:null!==(Bt=Et.attr("url"))&&void 0!==Bt?Bt:null}})}let mt=jQuery(R).find("img");mt.length&&(Object.assign(et,{image:S(mt.attr("url"),mt.attr("path"),mt.attr("src"))}),et.type||Object.assign(et,{type:"image"}))}}return et})(),animate:(et=>{let _t={},bt=null===(et=W.animates)||void 0===et?void 0:et.find(Zt=>Zt.elementId==zt);return bt&&Object.assign(_t,{value:bt.value}),_t})(),interactive:(()=>{let et={},_t=W.actions.show.filter(Zt=>Zt.elementId==zt&&Zt.active);_t.length&&(et.show={},_t.forEach(Zt=>{let{source:gt}=Zt;switch(null==gt?void 0:gt.type){case"work":var z,F,d,J,ut;et.show.action={},Object.assign(et.show.action,{value:null!==(z=gt.value)&&void 0!==z?z:null,iteration:null!==(F=gt.iteration)&&void 0!==F?F:null,finish:null!==(d=gt.end)&&void 0!==d?d:null,time:null!==(J=gt.time)&&void 0!==J?J:null,points:null!==(ut=gt.points)&&void 0!==ut?ut:null});break;case"audio":var ct,St,Nt;et.show.audio={},Object.assign(et.show.audio,{source:S(null,null,gt.url),iteration:null!==(ct=gt.iteration)&&void 0!==ct?ct:null,finish:null!==(St=gt.end)&&void 0!==St?St:null,time:null!==(Nt=gt.time)&&void 0!==Nt?Nt:null,async:-1==gt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Lt,Bt,Et,mt,Xt,Rt,fe,H,c,V,at,O,j,D,q;gt.options.includes("show")&&(et.show.triggershow={},Object.assign(et.show.triggershow,{id:null!==(Lt=parseInt(null!==(Bt=gt.id)&&void 0!==Bt?Bt:"0"))&&void 0!==Lt?Lt:null,ids:null===(Et=gt.ids)||void 0===Et?void 0:Et.map(st=>parseInt(st)),async:null!==(mt=gt.async)&&void 0!==mt?mt:null,time:null!==(Xt=gt.time)&&void 0!==Xt?Xt:null})),gt.options.includes("run")&&(et.show.triggerrun={},Object.assign(et.show.triggerrun,{id:null!==(Rt=parseInt(null!==(fe=gt.id)&&void 0!==fe?fe:"0"))&&void 0!==Rt?Rt:null,ids:null===(H=gt.ids)||void 0===H?void 0:H.map(st=>parseInt(st)),async:null!==(c=gt.async)&&void 0!==c?c:null,time:null!==(V=gt.time)&&void 0!==V?V:null})),gt.options.includes("hide")&&(et.show.triggerhide={},Object.assign(et.show.triggerhide,{id:null!==(at=parseInt(null!==(O=gt.id)&&void 0!==O?O:"0"))&&void 0!==at?at:null,ids:null===(j=gt.ids)||void 0===j?void 0:j.map(st=>parseInt(st)),async:null!==(D=gt.async)&&void 0!==D?D:null,time:null!==(q=gt.time)&&void 0!==q?q:null}))}}));let bt=W.actions.click.filter(Zt=>Zt.elementId==zt&&Zt.active);return bt&&(et.click={},bt.forEach(Zt=>{let{source:gt}=Zt;switch(null==gt?void 0:gt.type){case"work":var z,F,d,J,ut;et.click.action={},Object.assign(et.click.action,{value:null!==(z=gt.value)&&void 0!==z?z:null,iteration:null!==(F=gt.iteration)&&void 0!==F?F:null,finish:null!==(d=gt.end)&&void 0!==d?d:null,time:null!==(J=gt.time)&&void 0!==J?J:null,points:null!==(ut=gt.points)&&void 0!==ut?ut:null});break;case"audio":var ct,St,Nt;et.click.audio={},Object.assign(et.click.audio,{source:S(null,null,gt.url),iteration:null!==(ct=gt.iteration)&&void 0!==ct?ct:null,finish:null!==(St=gt.end)&&void 0!==St?St:null,time:null!==(Nt=gt.time)&&void 0!==Nt?Nt:null,async:-1==gt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Lt,Bt,Et,mt,Xt,Rt,fe,H,c,V,at,O,j,D,q;gt.options.includes("show")&&(et.click.triggershow={},Object.assign(et.click.triggershow,{id:null!==(Lt=parseInt(null!==(Bt=gt.id)&&void 0!==Bt?Bt:"0"))&&void 0!==Lt?Lt:null,ids:null===(Et=gt.ids)||void 0===Et?void 0:Et.map(wt=>parseInt(wt)),async:null!==(mt=gt.async)&&void 0!==mt?mt:null,time:null!==(Xt=gt.time)&&void 0!==Xt?Xt:null})),gt.options.includes("run")&&(et.click.triggerrun={},Object.assign(et.click.triggerrun,{id:null!==(Rt=parseInt(null!==(fe=gt.id)&&void 0!==fe?fe:"0"))&&void 0!==Rt?Rt:null,ids:null===(H=gt.ids)||void 0===H?void 0:H.map(wt=>parseInt(wt)),async:null!==(c=gt.async)&&void 0!==c?c:null,time:null!==(V=gt.time)&&void 0!==V?V:null})),gt.options.includes("hide")&&(et.click.triggerhide={},Object.assign(et.click.triggerhide,{id:null!==(at=parseInt(null!==(O=gt.id)&&void 0!==O?O:"0"))&&void 0!==at?at:null,ids:null===(j=gt.ids)||void 0===j?void 0:j.map(wt=>parseInt(wt)),async:null!==(D=gt.async)&&void 0!==D?D:null,time:null!==(q=gt.time)&&void 0!==q?q:null}));break;case"slide":var st;et.click.slide={},Object.assign(et.click.slide,{id:parseInt(null!==(st=gt.id)&&void 0!==st?st:"0")||gt.num||null,code:gt.id})}})),et})(),variable:(et=>{let _t={};var bt;R.getAttribute("data-variable")&&(_t.input={},Object.assign(_t.input,{variable:null!==(bt=R.getAttribute("data-variable"))&&void 0!==bt?bt:null}));let Zt=null===(et=W.nodes)||void 0===et||null===(et=et.find(J=>J.id==zt))||void 0===et?void 0:et.variable;var gt,z,F,d;return Zt&&(_t.click={},Object.assign(_t.click,{variable:null!==(gt=Zt.variable)&&void 0!==gt?gt:null,operator:null!==(z=Zt.operator)&&void 0!==z?z:null,valuetype:null!==(F=Zt.valuetype)&&void 0!==F?F:null,value:null!==(d=Zt.value)&&void 0!==d?d:null})),_t})()};null===(Qt=ht.svg)||void 0===Qt||Qt.nodes.push(dt)}),lt.push(ht)}),console.log(lt),{screen:{width:T.screen.w,height:T.screen.h},data:{slides:lt},variable:T.variable}}},644:(ue,Ct,f)=>{f.d(Ct,{Dx:()=>h,aY:()=>P,qp:()=>y,qz:()=>U,sV:()=>x,yR:()=>b});var L=f(5861),E=f(9422),ot=f.n(E);ot().config({driver:[ot().INDEXEDDB,ot().LOCALSTORAGE,ot().WEBSQL],name:"_localDataDB",version:1});const M={create:(K=(0,L.Z)(function*(){return ot()}),function(){return K.apply(this,arguments)}),get:function(){var K=(0,L.Z)(function*(S){return ot().getItem(S)});return function(X){return K.apply(this,arguments)}}(),set:function(){var K=(0,L.Z)(function*(S,X){return ot().setItem(S,X)});return function(X,T){return K.apply(this,arguments)}}()},U=function(){var K=(0,L.Z)(function*(S){yield M.create();var X=(yield M.get("icdt-data"))||[];"function"==typeof S.callback&&S.callback(X)});return function(X){return K.apply(this,arguments)}}(),h=function(){var K=(0,L.Z)(function*(S){yield M.create(),S.params=S.params||{};try{yield M.set("icdt-data",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(X){"function"==typeof S.callback&&S.callback(null),console.error(X)}});return function(X){return K.apply(this,arguments)}}(),x=function(){var K=(0,L.Z)(function*(S){yield M.create();try{var X=(yield M.get("icdt-config"))||{};"function"==typeof S.callback&&S.callback(X)}catch(T){"function"==typeof S.callback&&S.callback(null),console.error(T)}});return function(X){return K.apply(this,arguments)}}(),y=function(){var K=(0,L.Z)(function*(S){yield M.create(),S.params=S.params||{};try{yield M.set("icdt-config",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(X){"function"==typeof S.callback&&S.callback(null),console.error(X)}});return function(X){return K.apply(this,arguments)}}(),P=function(){var K=(0,L.Z)(function*(S){yield M.create();try{var X=(yield M.get("icdt-clipboard"))||{};"function"==typeof S.callback&&S.callback(X)}catch(T){"function"==typeof S.callback&&S.callback(null),console.error(T)}});return function(X){return K.apply(this,arguments)}}(),b=function(){var K=(0,L.Z)(function*(S){yield M.create(),S.params=S.params||{};try{yield M.set("icdt-clipboard",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(X){"function"==typeof S.callback&&S.callback(null),console.error(X)}});return function(X){return K.apply(this,arguments)}}();var K},1687:(ue,Ct,f)=>{f.d(Ct,{O:()=>L});const L={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(ue,Ct,f)=>{f.d(Ct,{D:()=>L});const L={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(ue,Ct,f)=>{f.d(Ct,{_:()=>L});const L={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(ue,Ct,f)=>{f.d(Ct,{D:()=>L});const L={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(ue,Ct,f)=>{f.d(Ct,{$:()=>L});const L={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(ue,Ct,f)=>{f.d(Ct,{icdt:()=>yt});var L=f(968),E=f(4080),ot=f(1687),M=f(9054),U=f(4318),h=f(6816),x=f(666),y=f(2966);const K=k=>{var i,n,r,a,s;let v=(null===(i=k.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=k.touchEvent)||void 0===n?void 0:n.target),p=(null==v?void 0:v.getAttribute("id"))||"",w=null==v?void 0:v.nodeName,B=(null==v||null===(r=v.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var m,N;if([ot.O.RESIZE_GROUP,ot.O.SELECT_GROUP].includes(B))return null===(m=k.mouseEvent)||void 0===m||m.stopPropagation(),void(null===(N=k.mouseEvent)||void 0===N||N.preventDefault());if(null!==(a=k.mouseEvent)&&void 0!==a&&a.altKey||null!==(s=k.touchEvent)&&void 0!==s&&s.altKey||!p||p.match(/[^0-9]/)||!yt.dataSelect.nodeName.includes(w)){var A;yt.dataSelect.ids.length&&(yt.dataSelect.ids=[]),(0==(null===(A=k.mouseEvent)||void 0===A?void 0:A.button)||k.touchEvent)&&(k=>{let s=(0,E.g1)(ot.O.SCAN_GROUP,"g"),v=(0,U.bH)(0,0,1,1);(0,E.vl)(s,v),((k,i,n)=>{(0,h.A)(k,{start:s=>{},move:(s,v)=>{((s,v,p,w)=>{i=(0,U.bH)(s,v,p,w),(0,E.vl)(n,i)})(v[0][0],v[0][1],s.x,s.y)},end:(s,v)=>{null==n||n.remove(),yt.dataSelect.ids=yt.data.getNodeInArea(Math.min(v[0][0],s.x),Math.min(v[0][1],s.y),Math.max(v[0][0],s.x),Math.max(v[0][1],s.y));let p=yt.dataSelect.nodes;1==p.length?(0,x.y)(p[0]):p.length>1&&(0,y.Q)(p)}})})(k,v,s)})(k)}else{var Q,$;let Z=parseFloat(p||"0");yt.dataSelect.ids=null!==(Q=k.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==($=k.touchEvent)&&void 0!==$&&$.shiftKey?[Z].concat(yt.dataSelect.ids).filter((ae,ce,ge)=>ge.indexOf(ae)==ce):[Z];let Wt=yt.dataSelect.nodes;Wt.length>1||1==Wt.length&&Wt[0].type==M.$.PATH?(0,y.Q)(Wt):1==Wt.length&&(0,x.y)(Wt[0])}};class X{constructor(){let{x:i,y:n}=yt.screen.dislocation;var r=(a,s,v,p)=>{yt.screen.move({x:i,y:n},{x:v-a,y:p-s})};return{start:a=>{},move:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)},end:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)}}}}var T=f(4714);const G=[{name:"tam gi\xe1c vu\xf4ng",type:T.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:T.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:T.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:T.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:T.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:T.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:T.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:T.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:T.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:T.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:T.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:T.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:T.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var lt=f(8619),W=f(5811);class tt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,lt._)(Math.ceil(1e9*Math.random())),v=(p,w,B,m)=>{s=(0,U.bH)(p,w,B,m,{ratio:1}),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,U.sg)(M.$.CIRCLE,s)),(0,E.__)(r,a),(0,E.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("r","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),yt.data.node=Object.assign({id:n,type:M.$.CIRCLE,name:"Circle"},{size:s,attribute:a}),null==i||i.remove()}}}}var ft=f(8785);class pt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ft.r)(Math.ceil(1e9*Math.random()));var v=(p,w,B,m)=>{s=(0,U.bH)(p,w,B,m),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,U.sg)(M.$.ELLIPSE,s)),(0,E.__)(r,a),(0,E.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),yt.data.node=Object.assign({id:n,type:M.$.ELLIPSE,name:"Ellipse"},{size:s,attribute:a}),null==i||i.remove()}}}}var ht=f(8054);class nt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ht.f)(Math.ceil(1e9*Math.random()));var v=(p,w,B,m)=>{s=(0,U.bH)(p,w,B,m),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,U.sg)(M.$.RECT,s)),(0,E.__)(r,a),(0,E.g$)(i,s)};return{start:p=>{v(p.x,p.y,p.x+s.width,p.y+s.height)},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{s.width>=10&&s.height>=10?yt.data.node=Object.assign({id:n,type:M.$.RECT,name:"Rect"},{size:s,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var R=f(2282);class Pt{constructor(i){let n=(0,E.g1)(ot.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:s,attribute:v,size:p}=(0,R.l)(Math.ceil(1e9*Math.random()));p.ratios=r;var w=(B,m,N,A)=>{p=(0,U.bH)(B,m,N,A,{ratios:r}),p.x=(0,W.q)(p.x),p.y=(0,W.q)(p.y),p.width=(0,W.q)(p.width),p.height=(0,W.q)(p.height),Object.assign(v,(0,U.sg)(M.$.POLYGON,p)),(0,E.__)(s,v),(0,E.g$)(n,p)};return{start:B=>{},move:(B,m)=>{w(m[0][0],m[0][1],B.x,B.y)},end:(B,m)=>{w(m[0][0],m[0][1],B.x,B.y),yt.data.node=Object.assign({id:a,type:M.$.POLYGON,name:"Polygon"},{size:p,attribute:v}),null==n||n.remove()}}}}var Qt=f(4921);class Dt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,Qt.W)(Math.ceil(1e9*Math.random()));var v=(p,w,B,m)=>{s=(0,U.bH)(p,w,B,m),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,U.sg)(M.$.LINE,s)),(0,E.__)(r,a),(0,E.g$)(i,s)};return{start:p=>{},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),yt.data.node=Object.assign({id:n,type:M.$.LINE,name:"Line"},{size:s,attribute:a}),null==i||i.remove()}}}}var xt=f(8419);class Vt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,xt.G)(Math.ceil(1e9*Math.random())),v="";var p=(w,B)=>{v+=` ${w} ${B}`,n.setAttribute("d",v)};return{start:w=>{v=`M ${w.x} ${w.y} L ${w.x} ${w.y}`},move:(w,B)=>{p(w.x,w.y)},end:(w,B)=>{p(w.x,w.y),(w=>{let B=9999,m=9999,N=-9999,A=-9999;w.forEach(Q=>{B=Math.min(B,Q[0]),m=Math.min(m,Q[1]),N=Math.max(N,Q[0]),A=Math.max(A,Q[1])}),a=(0,U.bH)(B,m,N,A,{points:w}),Object.assign(r,(0,U.sg)(M.$.PATH,a)),(0,E.__)(n,r)})(B),yt.data.node=Object.assign({id:i,type:M.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var zt=f(2875);class dt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()));var w=(B,m,N,A)=>{a=(0,U.bH)(B,m,N,A),a.x=(0,W.q)(a.x),a.y=(0,W.q)(a.y),a.width=(0,W.q)(a.width),a.height=(0,W.q)(a.height),Object.assign(s,(0,U.sg)(M.$.FOREIGNOBJECT,a)),(0,E.__)(r,s),(0,E.g$)(i,a)};return{start:B=>{w(B.x,B.y,B.x+a.width,B.y+a.height)},move:(B,m)=>{w(m[0][0],m[0][1],B.x,B.y)},end:(B,m)=>{a.width>=10&&a.height>=10?yt.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p}):null==r||r.remove(),null==i||i.remove()}}}}var et=f(7210);class _t{constructor(){var i,n;let r=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,et.G)(Math.ceil(1e9*Math.random())),B=1;(N=>{if(!N)return;let A=new Image;A.onload=()=>{B=(0,W.q)(A.naturalWidth/A.naturalHeight,100)},A.onerror=Q=>{console.error(`ImgSrc load failed -> ${N}`,Q)},A.src=N})(null!==(i=null===(n=w.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var m=(N,A,Q,$)=>{v=(0,U.bH)(N,A,Q,$,{ratio:B}),v.x=(0,W.q)(v.x),v.y=(0,W.q)(v.y),v.width=(0,W.q)(v.width),v.height=(0,W.q)(v.height),Object.assign(p,(0,U.sg)(M.$.IMAGE,v)),(0,E.__)(s,p),(0,E.g$)(r,v)};return{start:N=>{m(N.x,N.y,N.x+v.width,N.y+v.height)},move:(N,A)=>{m(A[0][0],A[0][1],N.x,N.y)},end:(N,A)=>{v.width>=10&&v.height>=10?yt.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w}):null==s||s.remove(),null==r||r.remove()}}}}var Zt=f(4578),gt=f(9623);function d(k,i,n,r){return Math.sqrt(Math.pow(n-k,2)+Math.pow(r-i,2))}function J(k,i,n,r,a){return d(k,i,n,r)<a?1:0}function ct(k,i,n,r,a,s,v){var p=[];return p.push(J(k,i,n,r,v)),p.push(J(k,i,a,s,v)),p.push(function ut(k,i,n,r,a,s,v){var p=[a-n,s-r],w=[k-n,i-r],B=[-p[1],p[0]],m=Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2)),N=[B[0]/m,B[1]/m],A=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),Q=[p[0]/A,p[1]/A],$=w[0]*Q[0]+w[1]*Q[1];if($<=0||$>=A)return 0;var Z=w[0]*N[0]+w[1]*N[1];return Z>=v||Z<=-v?0:1}(k,i,n,r,a,s,v)),p}function St(k,i,n,r,a){var s=[n-k,r-i],v=[-s[1],s[0]],p=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),w=[v[0]/p,v[1]/p];return[[k+a*w[0],i+a*w[1]],[k-a*w[0],i-a*w[1]],[n-a*w[0],r-a*w[1]],[n+a*w[0],r+a*w[1]]]}function Nt(k,i,n,r,a,s,v){var $,p=[a-k,s-i],w=[n-k,r-i],B=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),m=[w[0]/B,w[1]/B],N=p[0]*m[0]+p[1]*m[1],A=[k+N*m[0],i+N*m[1]],Q=Math.sqrt(Math.pow(a-A[0],2)+Math.pow(s-A[1],2));$=0===Q?v:Math.sqrt(Math.pow(v,2)-Math.pow(Q,2));var Z=[k+N*m[0]+$*m[0],i+N*m[1]+$*m[1]];return Z[0]===k&&Z[1]===i?null:Z}function Lt(k,i,n,r,a,s,v){var p=[a-k,s-i],w=[n-k,r-i],B=[-w[1],w[0]],m=Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2)),N=[B[0]/m,B[1]/m],A=p[0]*N[0]+p[1]*N[1],Q=fe([k,i],[n,r],[a,s]);if(Xt([Q[0]-a,Q[1]-s])>=v)return null;var Z=Math.sqrt(Math.pow(v,2)-Math.pow(A,2)),Wt=[a-A*N[0],s-A*N[1]],ae=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),ce=[w[0]/ae,w[1]/ae],ge=[[Wt[0]-ce[0]*Z,Wt[1]-ce[1]*Z],[Wt[0]+ce[0]*Z,Wt[1]+ce[1]*Z]];return ge[0][0]===k&&ge[0][1]===i?null:ge}function Bt(k,i,n,r,a,s,v,p){var w,B,m,N,A,Q;return-(m=v-a)*(B=r-i)+(w=n-k)*(N=p-s)==0?null:(Q=(m*(i-s)-N*(k-a))/(-m*B+w*N),(A=(-B*(k-a)+w*(i-s))/(-m*B+w*N))>=0&&A<=1&&Q>=0&&Q<=1?[k+Q*w,i+Q*B]:null)}function Et(k,i,n,r,a,s,v,p,w,B){var m=St(s,v,p,w,B),N=[];if(n[0]&&!n[1])N.push(Nt(k,i,r,a,s,v,B)),N.push(Bt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),(A=Lt(k,i,r,a,p,w,B))&&N.push(A[0],A[1]);else if(!n[0]&&n[1])N.push(Nt(k,i,r,a,p,w,B)),N.push(Bt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),(A=Lt(k,i,r,a,s,v,B))&&N.push(A[0],A[1]);else if(n[0]&&n[1])N.push(Nt(k,i,r,a,s,v,B)),N.push(Bt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),N.push(Nt(k,i,r,a,p,w,B));else{var A=Lt(k,i,r,a,p,w,B),Q=Lt(k,i,r,a,s,v,B);A&&N.push(A[0],A[1]),Q&&N.push(Q[0],Q[1]),N.push(Bt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1]))}for(var $=[k,i],Z=0;Z<N.length;Z++)N[Z]&&d(N[Z][0],N[Z][1],r,a)<d($[0],$[1],r,a)&&($=N[Z]);return $[0]===k&&$[1]===i?null:$}function mt(k,i,n,r,a,s,v,p,w){var B=St(a,s,v,p,w),m=[],N=Lt(k,i,n,r,a,s,w);N&&m.push(N[0],N[1]),(N=Lt(k,i,n,r,v,p,w))&&m.push(N[0],N[1]),m.push(Bt(k,i,n,r,B[0][0],B[0][1],B[3][0],B[3][1])),m.push(Bt(k,i,n,r,B[1][0],B[1][1],B[2][0],B[2][1]));for(var A=[n,r],Q=[k,i],$=0;$<m.length;$++)m[$]&&d(m[$][0],m[$][1],k,i)<d(A[0],A[1],k,i)&&(A=m[$]);for(var Z=0;Z<m.length;Z++)m[Z]&&d(m[Z][0],m[Z][1],n,r)<d(Q[0],Q[1],n,r)&&(Q=m[Z]);return A[0]===n&&A[1]===r||Q[0]===k&&Q[1]===i?null:[A,Q]}var Xt=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},fe=function(k,i,n){var r=[i[0]-k[0],i[1]-k[1]],a=Xt(r);if(a<1e-6)return k;var s=[n[0]-k[0],n[1]-k[1]],v=(r[0]*s[0]+r[1]*s[1])/a;return v<0?k:v>a?i:[k[0]+r[0]*v/a,k[1]+r[1]*v/a]};class H{constructor(){let{element:r,size:s}=(0,xt.G)(Math.ceil(1e9*Math.random()));(0,E.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:B=>{v=`M ${B.x} ${B.y} L ${B.x} ${B.y}`},move:(B,m)=>{((B,m)=>{v+=` ${B} ${m}`,r.setAttribute("d",v)})(B.x,B.y)},end:(B,m)=>{r.remove(),(B=>{let m=9999,N=9999,A=-9999,Q=-9999;B.forEach(Z=>{m=Math.min(m,Z[0]),N=Math.min(N,Z[1]),A=Math.max(A,Z[0]),Q=Math.max(Q,Z[1])}),s=(0,U.bH)(m,N,A,Q,{points:B}),yt.data.getNodeInArea(0,0,1920,1920,M.$.PATH).forEach(Z=>{let ae=((k,i,n)=>{n=n||20;var r=[],a=function(m){var N=i[0][0],A=i[0][1],Q=0,$=0;if(1!==m.length||J(m[0][0],m[0][1],N,A,n)){for(var Z;Q<m.length-1;){var Wt=m[Q],ae=m[Q+1],ce=J(Wt[0],Wt[1],N,A,n),ge=J(ae[0],ae[1],N,A,n);if(ce&&ge)$=++Q;else if(ce&&!ge)(we=Nt(Wt[0],Wt[1],ae[0],ae[1],N,A,n))?(m[Q]=we,$=Q):Q++;else if(!ce&&ge){var we;(we=Nt(ae[0],ae[1],Wt[0],Wt[1],N,A,n))&&((Z=m.slice($,Q+1)).push(we),r.push(Z)),$=++Q}else{var ye=Lt(Wt[0],Wt[1],ae[0],ae[1],N,A,n);ye?(((Z=m.slice($,Q+1))[Z.length-1][0]!==ye[0][0]||Z[Z.length-1][1]!==ye[0][1])&&Z.push(ye[0]),Z.length>1&&r.push(Z),m[Q]=ye[1],m[Q+1]&&m[Q+1][0]==ye[1][0]&&m[Q+1][1]==ye[1][1]&&Q++,$=Q):Q++}}$!==Q&&(Z=m.slice($,m.length))&&r.push(Z)}else r.push(m)},s=function(m,N){var ae,A=i[N],Q=i[N+1],$=0,Z=0;if(1!==m.length||-1!==(Wt=ct(m[0][0],m[0][1],A[0],A[1],Q[0],Q[1],n)).indexOf(1)){for(;$<m.length-1;){var ce=m[$],ge=m[$+1],Wt=ct(ce[0],ce[1],A[0],A[1],Q[0],Q[1],n),we=ct(ge[0],ge[1],A[0],A[1],Q[0],Q[1],n);if(-1!==Wt.indexOf(1)&&-1!==we.indexOf(1))Z=++$;else if(-1!==Wt.indexOf(1)&&-1===we.indexOf(1))(ye=Et(ce[0],ce[1],Wt,ge[0],ge[1],A[0],A[1],Q[0],Q[1],n))?(m[$]=ye,Z=$):$++;else if(-1===Wt.indexOf(1)&&-1!==we.indexOf(1)){var ye;(ye=Et(ge[0],ge[1],we,ce[0],ce[1],A[0],A[1],Q[0],Q[1],n))?((ae=m.slice(Z,$+1)).push(ye),r.push(ae),Z=++$):$++}else{var Ee=mt(ce[0],ce[1],ge[0],ge[1],A[0],A[1],Q[0],Q[1],n);Ee?(((ae=m.slice(Z,$+1))[ae.length-1][0]!==Ee[0][0]||ae[ae.length-1][1]!==Ee[0][1])&&ae.push(Ee[0]),ae.length>1&&r.push(ae),m[$]=Ee[1],m[$+1]&&m[$+1][0]==Ee[1][0]&&m[$+1][1]==Ee[1][1]&&$++,Z=$):$++}}Z!==$&&(ae=m.slice(Z,m.length))&&r.push(ae)}else r.push(m)};if(i=function F(k){var i=[];if(1===k.length)i=k;else{for(var n=0;n<k.length-1;)(k[n][0]!==k[n+1][0]||k[n][1]!==k[n+1][1])&&i.push(k[n]),n++;0!==k.length&&0===i.length&&i.push(k[0]),(k[k.length-1][0]!==k[i.length-1][0]||k[k.length-1][1]!==k[i.length-1][1])&&i.push(k[n])}return i}(i),1===i.length){for(var v=0;v<k.length;v++)a(k[v]);k=r}else for(var p=0;p<i.length-1;p++){for(v=0;v<k.length;v++)s(k[v],p);k=r,r=[]}for(var w=0;w<k.length;w++)for(var B=0;B<k[w].length;B++)k[w][B][0]=Math.round(k[w][B][0]),k[w][B][1]=Math.round(k[w][B][1]);return k})(yt.data.getNode(Z).size.points,B,2);console.log(ae)})})(m)}}}}var V=f(1105);class at{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s,source:v}=(0,V.$)(Math.ceil(1e9*Math.random())),p=(w,B,m,N)=>{s=(0,U.bH)(w,B,m,N),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,U.sg)(M.$.TEXT,s)),(0,E.__)(r,a),(0,E.g$)(i,s)};return{start:w=>{p(w.x,w.y,w.x+s.width,w.y+s.height)},move:(w,B)=>{p(B[0][0],B[0][1],w.x,w.y)},end:(w,B)=>{s.width>=10&&s.height>=10?yt.data.node=Object.assign({id:n,type:M.$.TEXT,name:"Text"},{size:s,attribute:a,source:v}):null==r||r.remove(),null==i||i.remove()}}}}var q=f(4113),st=f(9125),wt=f(7797);var kt=f(6358);class Kt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>yt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,s,v;null===(n=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(ot.O.SCAN_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(ot.O.CREATE_GROUP))||void 0===s||s.remove(),null===(v=window.document.getElementById(ot.O.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=yt.data.deleteNode(i);yt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}yt.dataSelect.ids=[]}groupNode(){let i=[];if(yt.dataSelect.ids.length>=2){let n=yt.data.getNode(yt.dataSelect.ids[0]),{nodeId:r,attribute:a,size:s}=(0,kt.m)(Math.ceil(1e9*Math.random()),void 0,n.pid);yt.data.node=Object.assign({id:r,type:M.$.GROUP,name:"G"},{size:s,attribute:a});for(let v of yt.dataSelect.ids)i.push(yt.data.addGroup(v,r))}if(i.length){yt.dataSelect.ids=i;let n=yt.dataSelect.nodes;1==n.length?(0,x.y)(n[0]):n.length>1&&(0,y.Q)(n)}}ungroupNode(){let i=[];for(let n of yt.dataSelect.ids)i.push(yt.data.unGroup(n));if(i.length){yt.dataSelect.ids=i;let n=yt.dataSelect.nodes;1==n.length?(0,x.y)(n[0]):n.length>1&&(0,y.Q)(n)}}}var ee=f(9942);class Ut{createNodeImage(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,et.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,ee.I)(i)}}),B=1;(A=>{if(!A)return;let Q=new Image;Q.onload=()=>{var $;B=(0,W.q)(Q.naturalHeight/Q.naturalWidth,100);let Z=(null===($=yt.data.slide)||void 0===$||null===($=$.svg)||void 0===$?void 0:$.viewBox)||{x:0,y:0,width:100,height:100};((A,Q,$,Z)=>{v=(0,U.bH)(A,Q,$,Z,{ratio:B}),Object.assign(p,(0,U.sg)(M.$.IMAGE,v)),(0,E.__)(s,p)})(Z.width/2-Q.naturalWidth/2,Z.height/2-Q.naturalHeight/2,Z.width/2+Q.naturalWidth/2,Z.height/2+Q.naturalHeight/2),yt.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w})},Q.onerror=$=>{console.error(`ImgSrc load failed -> ${A}`,$)},Q.src=A})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}createNodeIframe(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{style:{},source:{type:"iframe",iframe:(0,ee.I)(i)}});(m=>{let N=(null===(m=yt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,N,A,Q)=>{a=(0,U.bH)(m,N,A,Q),Object.assign(s,(0,U.sg)(M.$.IMAGE,a)),(0,E.__)(r,s)})(N.width/2-a.width/2,N.height/2-a.height/2,N.width/2+a.width/2,N.height/2+a.height/2),yt.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeEmbed(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:0,y:0,width:640,height:360},style:{},source:{type:"embed",embed:Object.assign(i,(0,ee.I)(i))}});(m=>{let N=(null===(m=yt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,N,A,Q)=>{a=(0,U.bH)(m,N,A,Q),Object.assign(s,(0,U.sg)(M.$.IMAGE,a)),(0,E.__)(r,s)})(N.width/2-a.width/2,N.height/2-a.height/2,N.width/2+a.width/2,N.height/2+a.height/2),yt.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeMedia(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,et.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,ee.I)(i.cover)}}),B={click:{media:i.media}},m=1;(Q=>{if(!Q)return;let $=new Image;$.onload=()=>{var Z;m=(0,W.q)($.naturalHeight/$.naturalWidth,100);let Wt=(null===(Z=yt.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.viewBox)||{x:0,y:0,width:100,height:100};((Q,$,Z,Wt)=>{v=(0,U.bH)(Q,$,Z,Wt,{ratio:m}),Object.assign(p,(0,U.sg)(M.$.IMAGE,v)),(0,E.__)(s,p)})(Wt.width/2-$.naturalWidth/2,Wt.height/2-$.naturalHeight/2,Wt.width/2+$.naturalWidth/2,Wt.height/2+$.naturalHeight/2),yt.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w,interactive:B})},$.onerror=Z=>{console.error(`ImgSrc load failed -> ${Q}`,Z)},$.src=Q})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}insert(i){var n;if(yt.data.insertSlide(yt.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});yt.data.node=Object.assign({id:r,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}if(i.description){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});yt.data.node=Object.assign({id:r,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:s}=(0,ht.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});yt.data.node=Object.assign({id:r,type:M.$.RECT,name:"Rect"},{size:a,attribute:s})})(),(r=>{let{nodeId:a,size:s,attribute:v,style:p,source:w}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});yt.data.node=Object.assign({id:a,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:s,attribute:v,style:p,source:w})})())}}var Ft=f(5226);class $t{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:yt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((s,v)=>v==this._slideIdx),r=null==n?void 0:n.svg,a=s=>{let v=[];return s.filter(p=>!p.isdeleted).forEach(p=>{p.type==M.$.GROUP?v=v.concat(a(p.nodes||[])):v.push(p.id)}),v};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==M.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=M.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,s,v,p,w,B,m,N;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(s=r.svg)||void 0===s||s.nodes.forEach(A=>{var Q,$,Z,Wt,ae,ce,ge,we,ye,Ee;n.push(null===(Q=A.source)||void 0===Q||null===(Q=Q.image)||void 0===Q?void 0:Q.path),n.push(null===($=A.source)||void 0===$||null===($=$.audio)||void 0===$?void 0:$.path),n.push(null===(Z=A.source)||void 0===Z||null===(Z=Z.video)||void 0===Z?void 0:Z.path),n.push(null===(Wt=A.source)||void 0===Wt||null===(Wt=Wt.file)||void 0===Wt?void 0:Wt.path),n.push(null===(ae=A.source)||void 0===ae||null===(ae=ae.iframe)||void 0===ae?void 0:ae.path),n.push(null===(ce=A.source)||void 0===ce||null===(ce=ce.track)||void 0===ce?void 0:ce.path),n.push(null===(ge=A.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),n.push(null===(we=A.interactive)||void 0===we||null===(we=we.click)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),n.push(null===(ye=A.interactive)||void 0===ye||null===(ye=ye.click)||void 0===ye||null===(ye=ye.image)||void 0===ye||null===(ye=ye.source)||void 0===ye?void 0:ye.path),n.push(null===(Ee=A.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.video)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path)}),n.push(null===(v=r.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(w=r.test)||void 0===w||null===(w=w.effecttrue)||void 0===w?void 0:w.path),n.push(null===(B=r.test)||void 0===B||null===(B=B.effectfalse)||void 0===B?void 0:B.path),n.push(null===(m=r.test)||void 0===m||null===(m=m.icontrue)||void 0===m?void 0:m.path),n.push(null===(N=r.test)||void 0===N||null===(N=N.iconfalse)||void 0===N?void 0:N.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,s)=>s.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==M.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=M.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}openSlide(i,n){var r,a,s,v;if(i)for(let N=0,A=null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0;N<A;N++){var p,w,B;if((null!==(B=this._dataSource.slides)&&void 0!==B?B:[])[N].id==i){this._slideIdx=N;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var m;this._slideIdx=0,null!==(m=this._dataSource.slides)&&void 0!==m&&m.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.wM)(),(0,Ft.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==s?s:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,s,v,p,w;let B=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.find(A=>A.id==i))&&void 0!==a?a:this._defaultSlide,m=(null!==(v=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(B))&&void 0!==v?v:0)+n;var N;r?(r.id=this.newSlideId,r.code=void 0,r.name="Trang m\u1edbi",null!==(N=r.svg)&&void 0!==N&&N.viewBox||r.svg&&(r.svg.viewBox=yt.screen.frameSize)):r=this._defaultSlide,null===(w=this._dataSource.slides)||void 0===w||w.splice(m,0,r),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,s,v,p,w;let B=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(A=>A.id==i))&&void 0!==n?n:this._defaultSlide,m=(null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(B))&&void 0!==a?a:0)+1,N=Object.assign(JSON.parse(JSON.stringify(B)),{id:this.newSlideId,code:void 0,name:`${B.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(m,0,N),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var r,a,s,v,p,w;let B=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(N=>N.id==i))&&void 0!==r?r:this._defaultSlide,m=null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(B))&&void 0!==s?s:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(m+n,0,null===(w=this._dataSource.slides)||void 0===w?void 0:w.splice(m,1)[0])}deleteSlide(i){var n,r,a,s,v,p;let w=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(A=>A.id==i))&&void 0!==n?n:this._defaultSlide,B=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(w))&&void 0!==a?a:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(B,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(B<this._slideIdx){var m,N;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(N=this._dataSource.slides)||void 0===N?void 0:N.length)&&void 0!==m?m:0,this.slide)}else B==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,s,v;let p=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(B=>B.id==i))&&void 0!==n?n:this._defaultSlide,w=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(p))&&void 0!==a?a:0;if(p.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(B=>!B.isdeleted))&&void 0!==v&&v.length){let B=!0;for(;p.isdeleted;)B?w++:w--,this._dataSource.slides[w]?p=this._dataSource.slides[w]:B=!B;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(s=>s(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((v,p)=>p==this._slideIdx),s=null==a?void 0:a.svg;null!=s&&s.nodes&&(null==s||s.nodes.push(i)),yt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Ft.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((A,Q)=>Q==this._slideIdx),a=null==r?void 0:r.svg,s=(A,Q)=>{let $=null==A?void 0:A.find(ae=>ae.id==i);if($)return $.pid=Q,$;let Z=0,Wt=A.length||0;for(;Z<Wt&&!$&&($=s(A[Z].nodes||[],A[Z].id),!$);)Z++;return $},v=s((null==a?void 0:a.nodes)||[]);var p,w,B,m,N;return v?(v.style=null!==(p=v.style)&&void 0!==p?p:{},v.source=null!==(w=v.source)&&void 0!==w?w:{},v.animate=null!==(B=v.animate)&&void 0!==B?B:{},v.interactive=null!==(m=v.interactive)&&void 0!==m?m:{},v.variable=null!==(N=v.variable)&&void 0!==N?N:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,w)=>w==this._slideIdx),a=null==r?void 0:r.svg,v=p=>{let w=(null==p?void 0:p.find($=>$.id==i))||(p=>{let w=null,B=0,m=p.length||0;for(;B<m&&!w;){if(w=v(p[B].nodes),w){w.pid=p[B].id;break}B++}var N,A,Q,$,Z;return w&&(w.style=null!==(N=w.style)&&void 0!==N?N:{},w.source=null!==(A=w.source)&&void 0!==A?A:{},w.animate=null!==(Q=w.animate)&&void 0!==Q?Q:{},w.interactive=null!==($=w.interactive)&&void 0!==$?$:{},w.variable=null!==(Z=w.variable)&&void 0!==Z?Z:{}),w})((null==p?void 0:p.filter($=>$.type==M.$.GROUP))||[]);var B,m,N,A,Q;return w&&(w.style=null!==(B=w.style)&&void 0!==B?B:{},w.source=null!==(m=w.source)&&void 0!==m?m:{},w.animate=null!==(N=w.animate)&&void 0!==N?N:{},w.interactive=null!==(A=w.interactive)&&void 0!==A?A:{},w.variable=null!==(Q=w.variable)&&void 0!==Q?Q:{}),w};return v((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,N)=>N==this._slideIdx),w=null==p?void 0:p.svg,B=m=>{let N=[];return m.filter(A=>!A.isdeleted).forEach(A=>{A.type==M.$.GROUP?N=N.concat(B(A.nodes||[])):i>A.size.x||n>A.size.y||r<A.size.x+A.size.width||a<A.size.y+A.size.height||(s?A.type==s&&N.push(A.id):N.push(A.id))}),N};return B((null==w?void 0:w.nodes)||[])}getNodeOnArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,N)=>N==this._slideIdx),w=null==p?void 0:p.svg,B=m=>{let N=[];return m.filter(A=>!A.isdeleted).forEach(A=>{A.type==M.$.GROUP?N=N.concat(B(A.nodes||[])):A.size.x+A.size.width<i||A.size.y+A.size.height<n||A.size.x>r||A.size.y>a||(s?A.type==s&&N.push(A.id):N.push(A.id))}),N};return B((null==w?void 0:w.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,Ft.E)(this.slide),(0,Ft.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),s=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:s})),Object.assign(a,{isdeleted:!0}),(0,Ft.E)(this.slide),(0,Ft.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),s}addGroup(i,n){var r;let a=this.getNode(i),s=this.getNode(n);s.nodes=s.nodes||[];let v=Math.ceil(1e9*Math.random());return s.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:v})),Object.assign(a,{isdeleted:!0}),(0,Ft.E)(this.slide),(0,Ft.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),v}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(s=>s.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let s=i.map(Q=>yt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:w,y2:B}=he(s),m=this.getNodeOnArea(v,p,w,B);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,$)=>{Q.idx=$+1});let N=m.map(Q=>{var $,Z;return null!==($=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Wt=>Wt.id==Q))||void 0===Z?void 0:Z.idx)&&void 0!==$?$:0}),A=Math.max.apply(null,N);i.forEach((Q,$)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Wt=>Wt.id==Q).forEach(Wt=>{Wt.idx=A+($+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,$)=>{var Z,Wt;return(null!==(Z=Q.idx)&&void 0!==Z?Z:0)-(null!==(Wt=$.idx)&&void 0!==Wt?Wt:0)}),(0,Ft.T)(this.slide),null===(a=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}sendToBack(i){var n,r,a;let s=i.map(Q=>yt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:w,y2:B}=he(s),m=this.getNodeOnArea(v,p,w,B);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,$)=>{Q.idx=$+1});let N=m.map(Q=>{var $,Z;return null!==($=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Wt=>Wt.id==Q))||void 0===Z?void 0:Z.idx)&&void 0!==$?$:0}),A=Math.min.apply(null,N)-1;i.forEach((Q,$)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Wt=>Wt.id==Q).forEach(Wt=>{Wt.idx=A+($+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,$)=>{var Z,Wt;return(null!==(Z=Q.idx)&&void 0!==Z?Z:0)-(null!==(Wt=$.idx)&&void 0!==Wt?Wt:0)}),(0,Ft.T)(this.slide),null===(a=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}}const he=k=>{let i=999999,n=999999,r=-999999,a=-999999;return k.forEach(s=>{i=Math.min(i,s.size.x),n=Math.min(n,s.size.y),r=Math.max(r,s.size.x+s.size.width),a=Math.max(a,s.size.y+s.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class re{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":yt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":yt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:s,attribute:v}=yt.data.getNode(n.from.id);Object.assign(s,n.from.size),Object.assign(v,(0,U.sg)(a,s)),(0,E.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=yt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,E.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=yt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,E.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=yt.data.getNode(n.from.id);Object.assign(null!=s?s:{},n.from.source),(0,E.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=yt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=yt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=yt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),yt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":yt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":yt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:s,attribute:v}=yt.data.getNode(n.to.id);Object.assign(s,n.to.size),Object.assign(v,(0,U.sg)(a,s)),(0,E.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=yt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,E.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=yt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,E.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=yt.data.getNode(n.to.id);Object.assign(null!=s?s:{},n.to.source),(0,E.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=yt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=yt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=yt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),yt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class le{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var s={x:Math.max(0,Math.min((0,W.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,W.q)(n.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*s.x,y:(this._height/i-this._height/this._scale)*s.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var pe=f(644);class Ye{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=null,this._fontSize=20,this._textLength=null,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,pe.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,pe.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Ke=f(1690),ii=f(5973),ni=f(4787),Me=function(k){return k&&JSON.parse(JSON.stringify(k))},We=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Je=[],li={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},ai={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class qe{constructor(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),We.forEach(r=>{var a=this._data_variables.filter(s=>s.key==r.key);a.length?a.forEach(function(s,v,p){s.type=r.type,s.readonly=r.readonly,s.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Me(li)}getConditionTemp(){return Me(ai)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Me((k=this._data_variables,i="key",function(n){for(var r of k.map(function(a){return a[i]}).sort())k.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),k=k.filter(function(a){return a[i]!=r});return n}([]))):Me(We).concat(Me(Je));var k,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),We.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,s,v)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(s=>s.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(s=>s.key==i);a.length?a.forEach(function(s,v,p){s.value=n,s.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(v){return v.key==i});if(r.length){var s,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?s=!1:"boolean"==typeof a.value?s=a.value:(s=(a.value+"").toLowerCase(),s="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),s}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(v){return v.key==i});if(a.length){var s=a[0];this.OnSetActionExecuting(s),s&&(s.value=n),this.OnSetActionExecuted(s)}}}getConditionAll(){return Me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,s){return a+s});case"sub":return n.reduce(function(a,s){return a-s});case"pro":return n.reduce(function(a,s){return a*s});case"div":return n.reduce(function(a,s){return a/s});case"avg":var r=n.reduce(function(a,s){return a+s})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,s){return a&&s});case"or":return n.reduce(function(a,s){return a||s});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Me(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Me(n),{variable:r})));break;case"slide":Ke.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ni.L5)({id:n.node,nodeStatus:Ke.$.nodeStatus,slideStatus:Ke.$.slideStatus});let s=Ke.$.findNode(n.node);null!=s&&null!==(a=s.interactive)&&void 0!==a&&a.click&&(0,ii.F)(s,Ke.$.nodeStatus,Ke.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ve{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case L._.PEN:this._pen_type=n;break;case L._.SHAPE:this._shape_type=n,r&&n===M.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const yt=new class oi{constructor(){this._container="",this._svg="",this._screen=le.prototype,this._data=$t.prototype,this._dataSelect=Kt.prototype,this._slide=Ut.prototype,this._history=re.prototype,this._attribute=Ye.prototype,this._pointer=Ve.prototype,this._variable=qe.prototype,this._data=new $t,this._dataSelect=new Kt,this._slide=new Ut,this._history=new re,this._attribute=new Ye,this._pointer=new Ve,this._variable=new qe,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,s;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(s=null==i?void 0:i.top)&&void 0!==s?s:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new le,(k=>{new E.Mh(k.container,k.target),yt.pointer.onchange=(r,a,s)=>{switch(r){case L._.POINTER:jQuery(k.target).css({cursor:"auto"});break;case L._.HAND:jQuery(k.target).css({cursor:"grab"});break;case L._.PEN:switch(a){case st.D.DRAW:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case st.D.HIGHTLIGH:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case L._.ERASER:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case L._.SHAPE:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case L._.TEXT:case L._.FOREIGNOBJECT:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(k.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{yt.pointer.pointer_type==L._.HAND&&jQuery(k.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{yt.pointer.pointer_type==L._.HAND&&jQuery(k.target).css({cursor:"grab"})}),jQuery(k.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var s=yt.screen.scale,v=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;yt.screen.scaleTo(s-.04*s*v,(0,wt.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},yt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{yt.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(k.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{yt.screen.actived=!0}),jQuery(k.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{yt.screen.actived=!1}),jQuery(k.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(k.container.includes("#")&&k.container.includes(r.target.getAttribute("id"))||k.container.includes(".")&&k.container.includes(r.target.getAttribute("class"))||k.container.includes(r.target.nodeName))&&(yt.pointer.pointer_type_temp||yt.pointer.pointer_type)===L._.POINTER&&(yt.dataSelect.ids=[])}),jQuery(k.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(yt.pointer.pointer_type_temp||yt.pointer.pointer_type){case L._.POINTER:K(r);break;case L._.HAND:(k=>{(0,h.A)(k,new X,1,{x:0,y:0})})(r);break;case L._.PEN:(0,gt.i)(r);break;case L._.SHAPE:(k=>{var i=null;switch(yt.pointer.shape_type){case M.$.CIRCLE:i=new tt;break;case M.$.ELLIPSE:i=new pt;break;case M.$.LINE:i=new Dt;break;case M.$.RECT:i=new nt;break;case M.$.POLYGON:var n;i=new Pt(null===(n=G.find(r=>r.type==yt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case M.$.FOREIGNOBJECT:i=new dt;break;case M.$.IMAGE:i=new _t;break;case M.$.TEXT:case M.$.PATH:i=new Vt}i&&(0,h.A)(k,i)})(r);break;case L._.FOREIGNOBJECT:(k=>{(0,h.A)(k,new dt)})(r);break;case L._.IMAGE:(k=>{(0,h.A)(k,new _t)})(r);break;case L._.TEXT:(k=>{(0,h.A)(k,new at)})(r);break;case L._.ERASER:(k=>{(0,h.A)(k,new H)})(r);break;case L._.INDEX:(0,q.s)(r)}};let n=!1;jQuery(k.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(k.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),k.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{yt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Zt.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{yt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Zt.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(ue,Ct,f)=>{f.d(Ct,{s:()=>y,Q:()=>b});var L=f(1687),E=f(4981),ot=f(4318),M=f(6816),U=f(4080);const y=K=>{var S,X;let T=(null===(S=K.mouseEvent)||void 0===S?void 0:S.target)||(null===(X=K.touchEvent)||void 0===X?void 0:X.target),G=(null==T?void 0:T.getAttribute("id"))||"",lt=null==T?void 0:T.nodeName,W=jQuery(T).parents("g[id]").attr("id")||"";if(![L.O.INDEX_GROUP].includes(W))if(G&&!G.match(/[^0-9]/)&&E.icdt.dataSelect.nodeName.includes(lt)){var ft,pt;let ht=parseFloat(G||"0");E.icdt.dataSelect.ids=null!==(ft=K.mouseEvent)&&void 0!==ft&&ft.shiftKey||null!==(pt=K.touchEvent)&&void 0!==pt&&pt.shiftKey?[ht].concat(E.icdt.dataSelect.ids).filter((R,Pt,Qt)=>Qt.indexOf(R)==Pt):[ht],P(E.icdt.dataSelect.nodes)}else{var tt;E.icdt.dataSelect.ids.length&&(E.icdt.dataSelect.ids=[]),(0==(null===(tt=K.mouseEvent)||void 0===tt?void 0:tt.button)||K.touchEvent)&&((K,S)=>{let W=(0,U.g1)(L.O.SCAN_GROUP,"g"),tt=(0,ot.bH)(0,0,1,1);(0,U.vl)(W,tt),((K,S,X,T)=>{(0,M.A)(K,{start:W=>{},move:(W,tt)=>{((W,tt,ft,pt)=>{S=(0,ot.bH)(W,tt,ft,pt),(0,U.vl)(X,S)})(tt[0][0],tt[0][1],W.x,W.y)},end:(W,tt)=>{null==X||X.remove(),E.icdt.dataSelect.ids=E.icdt.data.getNodeInArea(Math.min(tt[0][0],W.x),Math.min(tt[0][1],W.y),Math.max(tt[0][0],W.x),Math.max(tt[0][1],W.y)),T(E.icdt.dataSelect.nodes)}})})(K,tt,W,S)})(K,P)}},P=K=>{var S,X;let T=1;var G,lt;if(K.length&&(T=Math.max.apply(null,null!==(G=null===(lt=E.icdt.data.slide)||void 0===lt||null===(lt=lt.svg)||void 0===lt?void 0:lt.nodes.map(tt=>{var ft;return null!==(ft=tt.idx)&&void 0!==ft?ft:0}))&&void 0!==G?G:[0])+1),1==K.length)K[0].idx||(K[0].idx=T,K[0].time=0);else if(K.length>=0){let tt=K.map(pt=>{var ht;return null!==(ht=pt.idx)&&void 0!==ht?ht:0}).filter(pt=>pt>0),ft=tt.length?Math.min.apply(null,tt):T;K.forEach(pt=>{var ht;pt.idx=ft,pt.time=null!==(ht=pt.time)&&void 0!==ht?ht:0})}let W=(0,U.g1)(L.O.INDEX_GROUP,"g");(0,U.mo)(W,null!==(S=null===(X=E.icdt.data.slide)||void 0===X||null===(X=X.svg)||void 0===X?void 0:X.nodes)&&void 0!==S?S:[])},b=K=>{var S,X,T;null!=K&&null!==(S=K.svg)&&void 0!==S&&S.nodes&&K.svg.nodes.forEach(lt=>{lt.idx=0});let G=(0,U.g1)(L.O.INDEX_GROUP,"g");(0,U.mo)(G,null!==(X=null===(T=E.icdt.data.slide)||void 0===T||null===(T=T.svg)||void 0===T?void 0:T.nodes)&&void 0!==X?X:[])}},4578:(ue,Ct,f)=>{f.d(Ct,{h:()=>S,t:()=>X});var L=f(644),E=f(7308),ot=f(968),M=f(4981),U=f(666),h=f(2966),x=f(5226),y=f(3423),P=f(5811),b=f(3385);const S=new class K{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.s.Escape,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.s.Delete,fn:()=>{M.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.s.Space,fn:()=>{M.icdt.pointer.pointer_type_temp=ot._.HAND}},this.onchange={type:"keyup",key:E.s.Space,fn:()=>{M.icdt.pointer.pointer_type_temp=ot._.POINTER}},this.onchange={type:"keydown",key:E.s.ArrowLeft,fn:()=>{M.icdt.dataSelect.ids.length||M.icdt.data.backSlide()}},this.onchange={type:"keydown",key:E.s.ArrowRight,fn:()=>{M.icdt.dataSelect.ids.length||M.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:E.s.ArrowLeft,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(G=>{(0,b.k6)(G,(0,P.q)(G.size.x-(0,y.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,U.y)(M.icdt.dataSelect.nodes[0]):(0,h.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowRight,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(G=>{(0,b.k6)(G,(0,P.q)(G.size.x+(0,y.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,U.y)(M.icdt.dataSelect.nodes[0]):(0,h.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowUp,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(G=>{(0,b.co)(G,(0,P.q)(G.size.y-(0,y.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,U.y)(M.icdt.dataSelect.nodes[0]):(0,h.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowDown,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(G=>{(0,b.co)(G,(0,P.q)(G.size.y+(0,y.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,U.y)(M.icdt.dataSelect.nodes[0]):(0,h.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.Digit1,fn:G=>{G.shiftKey&&(M.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.s.KeyA,fn:G=>{if(G.ctrlKey){M.icdt.dataSelect.ids=M.icdt.data.getNodeAll();let lt=M.icdt.dataSelect.nodes;1==lt.length?(0,U.y)(lt[0]):lt.length>1&&(0,h.Q)(lt)}}},this.onchange={type:"keydown",key:E.s.KeyC,fn:G=>{if(G.ctrlKey){let lt=M.icdt.dataSelect.nodes;lt&&(0,L.yR)({params:{type:"nodes",nodes:lt}})}}},this.onchange={type:"keydown",key:E.s.KeyV,fn:G=>{G.ctrlKey&&(0,L.aY)({callback:lt=>{var W,tt;"nodes"==(null==lt?void 0:lt.type)&&null!=lt&&null!==(W=lt.nodes)&&void 0!==W&&W.length&&(null==lt||null===(tt=lt.nodes)||void 0===tt||tt.forEach(ft=>{ft.id=Math.ceil(1e9*Math.random()),M.icdt.data.node=ft}),(0,x.E)(M.icdt.data.slide))}})}},this.onchange={type:"keydown",key:E.s.KeyZ,fn:G=>{G.ctrlKey&&G.shiftKey?M.icdt.history.redo():G.ctrlKey&&M.icdt.history.undo()}}}set onchange(G){let lt=this._fnChanges.find(W=>W.eventType==G.type&&W.eventKey==G.key);lt?lt.fns.push(G.fn):this._fnChanges.push({eventType:G.type,eventKey:G.key,fns:[G.fn]})}change(G,lt,W){var tt;null===(tt=this._fnChanges.find(ft=>ft.eventType==G&&ft.eventKey==lt))||void 0===tt||tt.fns.forEach(ft=>ft(W))}},X=T=>{S.change(T.type,T.keyCode||T.which||T.charCode||0,T)}},410:(ue,Ct,f)=>{f.d(Ct,{a:()=>y});var L=f(4318),E=f(8419),ot=f(9054),M=f(4080),U=f(511),h=f(3423),x=f(1687);class y{constructor(b){var K;let S={stroke:"#FF0000",strokeWidth:(0,h.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,h.v)(8)},{element:T,attribute:G,size:lt}=(0,E.G)(Math.ceil(1e9*Math.random()),{size:b});window.document.getElementById(x.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ht=>null==ht?void 0:ht.remove()),null===(K=window.document.getElementById(x.O.INTERACTIVE_GROUP))||void 0===K||K.appendChild(T),(0,M.__)(T,S);let tt="";return{start:ht=>{tt=`M ${ht.x} ${ht.y} L ${ht.x} ${ht.y}`},move:(ht,nt)=>{((ht,nt)=>{tt+=` ${ht} ${nt}`,T.setAttribute("d",tt)})(ht.x,ht.y)},end:(ht,nt)=>{(ht=>{let R=U.jvg().x(Pt=>Pt[0]).y(Pt=>Pt[1]).curve(U.$0Z)(ht);T.setAttribute("d",R),ht.length>=2&&(window.interactivePoints=ht)})(nt),(ht=>{let nt=9999,R=9999,Pt=-9999,Qt=-9999;ht.forEach(Dt=>{nt=Math.min(nt,Dt[0]),R=Math.min(R,Dt[1]),Pt=Math.max(Pt,Dt[0]),Qt=Math.max(Qt,Dt[1])}),lt=(0,L.bH)(nt,R,Pt,Qt,{points:ht}),Object.assign(G,(0,L.sg)(ot.$.PATH,lt),S)})(nt)}}}}},9623:(ue,Ct,f)=>{f.d(Ct,{U:()=>T,i:()=>X});var L=f(1687),E=f(9125),ot=f(4981),M=f(6816),U=f(4080),h=f(4318),x=f(8419),y=f(9054),P=f(511);class b{constructor(){let lt={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:W,element:tt,attribute:ft,size:pt}=(0,x.G)(Math.ceil(1e9*Math.random()));(0,U.__)(tt,ft);let nt="";return{start:Qt=>{nt=`M ${Qt.x} ${Qt.y} L ${Qt.x} ${Qt.y}`},move:(Qt,Dt)=>{((Qt,Dt)=>{nt+=` ${Qt} ${Dt}`,tt.setAttribute("d",nt)})(Qt.x,Qt.y)},end:(Qt,Dt)=>{(Qt=>{let xt=P.jvg().x(Vt=>Vt[0]).y(Vt=>Vt[1]).curve(P.$0Z)(Qt);tt.setAttribute("d",xt)})(Dt),(Qt=>{let Dt=9999,xt=9999,Vt=-9999,zt=-9999;Qt.forEach(dt=>{Dt=Math.min(Dt,dt[0]),xt=Math.min(xt,dt[1]),Vt=Math.max(Vt,dt[0]),zt=Math.max(zt,dt[1])}),pt=(0,h.bH)(Dt,xt,Vt,zt,{points:Qt}),Object.assign(ft,(0,h.sg)(y.$.PATH,pt),lt)})(Dt),ot.icdt.data.node=Object.assign({id:W,type:y.$.PATH,name:"Path"},{size:pt,attribute:ft})}}}}class K{constructor(){let lt={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:W,element:tt,attribute:ft,size:pt}=(0,x.G)(Math.ceil(1e9*Math.random()));(0,U.__)(tt,ft);let nt="";var R=(Pt,Qt)=>{nt+=` ${Pt} ${Qt}`,tt.setAttribute("d",nt)};return{start:Pt=>{nt=`M ${Pt.x} ${Pt.y} L ${Pt.x} ${Pt.y}`},move:(Pt,Qt)=>{R(Pt.x,Pt.y)},end:(Pt,Qt)=>{R(Pt.x,Pt.y),(Pt=>{let Qt=9999,Dt=9999,xt=-9999,Vt=-9999;Pt.forEach(zt=>{Qt=Math.min(Qt,zt[0]),Dt=Math.min(Dt,zt[1]),xt=Math.max(xt,zt[0]),Vt=Math.max(Vt,zt[1])}),pt=(0,h.bH)(Qt,Dt,xt,Vt,{points:Pt}),Object.assign(ft,(0,h.sg)(y.$.PATH,pt),lt)})(Qt),ot.icdt.data.node=Object.assign({id:W,type:y.$.PATH,name:"Path"},{size:pt,attribute:ft})}}}}var S=f(410);const X=G=>{switch(ot.icdt.pointer.pen_type){case E.D.DRAW:(0,M.A)(G,new b);break;case E.D.HIGHTLIGH:(0,M.A)(G,new K);break;case E.D.INTERACTIVE:T(G)}},T=G=>{var lt,W;let tt=(0,U.g1)(L.O.INTERACTIVE_GROUP,"g"),ft=null!==(lt=null===(W=ot.icdt.data.slide)||void 0===W||null===(W=W.svg)||void 0===W?void 0:W.viewBox)&&void 0!==lt?lt:(()=>{let{width:pt,height:ht}=ot.icdt.screen.get;return{x:0,y:0,width:pt,height:ht}})();(0,U.XH)(tt,ft),G&&(0,M.A)(G,new S.a)}},666:(ue,Ct,f)=>{f.d(Ct,{y:()=>x});var L=f(1687),E=f(4981),ot=f(4318),M=f(6816),U=f(4080),h=f(5811);const x=b=>{let K=(0,U.g1)(L.O.RESIZE_GROUP,"g");(0,U.hJ)(K,b).forEach(S=>{y(S.element,S.posType,b,K)})},y=(b,K,S,X)=>{let T=!1;null==b||b.addEventListener("touchstart",G=>{T=!0,P({touchEvent:G},K,S,X)}),null==b||b.addEventListener("mousedown",G=>{if(0==G.button){if(T)return void(T=!1);P({mouseEvent:G},K,S,X)}})},P=(b,K,S,X)=>{let R,{id:T,type:G,size:lt,attribute:W}=S,{x:tt,y:ft,width:pt,height:ht}=lt,nt=(pt||1)/(ht||1),Qt=null,Vt=!1;(0,M.A)(b,{start:dt=>{Qt=JSON.parse(JSON.stringify({id:T,size:lt,attribute:W}))},move:(dt,et)=>{((dt,et,_t,bt)=>{switch(K){case"rect-center":var Zt,gt;R=null!==(Zt=b.mouseEvent)&&void 0!==Zt&&Zt.shiftKey||null!==(gt=b.touchEvent)&&void 0!==gt&&gt.shiftKey?Math.abs(_t-dt)>=Math.abs(bt-et)?{x:tt+_t-dt,y:ft,width:pt,height:ht}:{x:tt,y:ft+bt-et,width:pt,height:ht}:{x:tt+_t-dt,y:ft+bt-et,width:pt,height:ht};break;case"rect-top-left":var z,F,d,J,ut,ct,St,Nt;R=(null!==(z=b.mouseEvent)&&void 0!==z&&z.shiftKey||null!==(F=b.touchEvent)&&void 0!==F&&F.shiftKey)&&(null!==(d=b.mouseEvent)&&void 0!==d&&d.altKey||null!==(J=b.touchEvent)&&void 0!==J&&J.altKey)?nt>=1?{x:tt+(_t-dt),y:ft+(_t-dt)/nt,width:pt-2*(_t-dt),height:ht-2*(_t-dt)/nt}:{x:tt+(bt-et)*nt,y:ft+(bt-et),width:pt-2*(bt-et)*nt,height:ht-2*(bt-et)}:null!==(ut=b.mouseEvent)&&void 0!==ut&&ut.shiftKey||null!==(ct=b.touchEvent)&&void 0!==ct&&ct.shiftKey?nt>=1?{x:tt+(_t-dt),y:ft+(_t-dt)/nt,width:pt-(_t-dt),height:ht-(_t-dt)/nt}:{x:tt+(bt-et)*nt,y:ft+(bt-et),width:pt-(bt-et)*nt,height:ht-(bt-et)}:null!==(St=b.mouseEvent)&&void 0!==St&&St.altKey||null!==(Nt=b.touchEvent)&&void 0!==Nt&&Nt.altKey?{x:tt+(_t-dt),y:ft+(bt-et),width:pt-2*(_t-dt),height:ht-2*(bt-et)}:{x:tt+(_t-dt),y:ft+(bt-et),width:pt-(_t-dt),height:ht-(bt-et)};break;case"rect-top-right":var Lt,Bt,Et,mt,Xt,Rt,fe,H;R=(null!==(Lt=b.mouseEvent)&&void 0!==Lt&&Lt.shiftKey||null!==(Bt=b.touchEvent)&&void 0!==Bt&&Bt.shiftKey)&&(null!==(Et=b.mouseEvent)&&void 0!==Et&&Et.altKey||null!==(mt=b.touchEvent)&&void 0!==mt&&mt.altKey)?nt>=1?{x:tt-(_t-dt),y:ft-(_t-dt)/nt,width:pt+2*(_t-dt),height:ht+2*(_t-dt)/nt}:{x:tt+(bt-et)*nt,y:ft+(bt-et),width:pt-2*(bt-et)*nt,height:ht-2*(bt-et)}:null!==(Xt=b.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(Rt=b.touchEvent)&&void 0!==Rt&&Rt.shiftKey?nt>=1?{x:tt,y:ft-(_t-dt)/nt,width:pt+(_t-dt),height:ht+(_t-dt)/nt}:{x:tt,y:ft+(bt-et),width:pt-(bt-et)*nt,height:ht-(bt-et)}:null!==(fe=b.mouseEvent)&&void 0!==fe&&fe.altKey||null!==(H=b.touchEvent)&&void 0!==H&&H.altKey?{x:tt-(_t-dt),y:ft+(bt-et),width:pt+2*(_t-dt),height:ht-2*(bt-et)}:{x:tt,y:ft+(bt-et),width:pt+(_t-dt),height:ht-(bt-et)};break;case"rect-bottom-left":var c,V,at,O,j,D,q,st;R=(null!==(c=b.mouseEvent)&&void 0!==c&&c.shiftKey||null!==(V=b.touchEvent)&&void 0!==V&&V.shiftKey)&&(null!==(at=b.mouseEvent)&&void 0!==at&&at.altKey||null!==(O=b.touchEvent)&&void 0!==O&&O.altKey)?nt>=1?{x:tt+(_t-dt),y:ft+(_t-dt)/nt,width:pt-2*(_t-dt),height:ht-2*(_t-dt)/nt}:{x:tt-(bt-et)*nt,y:ft-(bt-et),width:pt+2*(bt-et)*nt,height:ht+2*(bt-et)}:null!==(j=b.mouseEvent)&&void 0!==j&&j.shiftKey||null!==(D=b.touchEvent)&&void 0!==D&&D.shiftKey?nt>=1?{x:tt+(_t-dt),y:ft,width:pt-(_t-dt),height:ht-(_t-dt)/nt}:{x:tt-(bt-et)*nt,y:ft,width:pt+(bt-et)*nt,height:ht+(bt-et)}:null!==(q=b.mouseEvent)&&void 0!==q&&q.altKey||null!==(st=b.touchEvent)&&void 0!==st&&st.altKey?{x:tt+(_t-dt),y:ft-(bt-et),width:pt-2*(_t-dt),height:ht+2*(bt-et)}:{x:tt+(_t-dt),y:ft,width:pt-(_t-dt),height:ht+(bt-et)};break;case"rect-bottom-right":var wt,Mt,kt,Kt,ee,Ut,Ft,$t;R=(null!==(wt=b.mouseEvent)&&void 0!==wt&&wt.shiftKey||null!==(Mt=b.touchEvent)&&void 0!==Mt&&Mt.shiftKey)&&(null!==(kt=b.mouseEvent)&&void 0!==kt&&kt.altKey||null!==(Kt=b.touchEvent)&&void 0!==Kt&&Kt.altKey)?nt>=1?{x:tt-(_t-dt),y:ft-(_t-dt)/nt,width:pt+2*(_t-dt),height:ht+2*(_t-dt)/nt}:{x:tt-(bt-et)*nt,y:ft-(bt-et),width:pt+2*(bt-et)*nt,height:ht+2*(bt-et)}:null!==(ee=b.mouseEvent)&&void 0!==ee&&ee.shiftKey||null!==(Ut=b.touchEvent)&&void 0!==Ut&&Ut.shiftKey?nt>=1?{x:tt,y:ft,width:pt+(_t-dt),height:ht+(_t-dt)/nt}:{x:tt,y:ft,width:pt+(bt-et)*nt,height:ht+(bt-et)}:null!==(Ft=b.mouseEvent)&&void 0!==Ft&&Ft.altKey||null!==($t=b.touchEvent)&&void 0!==$t&&$t.altKey?{x:tt-(_t-dt),y:ft-(bt-et),width:pt+2*(_t-dt),height:ht+2*(bt-et)}:{x:tt,y:ft,width:pt+(_t-dt),height:ht+(bt-et)};break;default:R={x:tt+_t-dt,y:ft+bt-et,width:pt,height:ht}}R.width<0&&(R.width=0),R.height<0&&(R.height=0),R.x=(0,h.q)(R.x),R.y=(0,h.q)(R.y),R.width=(0,h.q)(R.width),R.height=(0,h.q)(R.height),Object.assign(lt,R),Object.assign(W,(0,ot.sg)(G,lt)),(0,U.__)(window.document.getElementById(T),W),(0,U.hJ)(X,S)})(et[0][0],et[0][1],dt.x,dt.y),Vt=!0},end:(dt,et)=>{Vt&&Qt&&E.icdt.history.push([{type:"size",from:Qt,to:JSON.parse(JSON.stringify({id:T,size:lt,attribute:W}))}])}})}},2966:(ue,Ct,f)=>{f.d(Ct,{Q:()=>y});var L=f(1687),E=f(4981),ot=f(4318),M=f(6816),U=f(4080),h=f(3423),x=f(5811);const y=K=>{let S=999999,X=999999,T=-999999,G=-999999;null==K||K.forEach(tt=>{S=Math.min(S,tt.size.x),X=Math.min(X,tt.size.y),T=Math.max(T,tt.size.x+tt.size.width),G=Math.max(G,tt.size.y+tt.size.height)});let lt=(0,U.g1)(L.O.SELECT_GROUP,"g"),W=(0,ot.bH)(S,X,T,G);(0,U.yD)(lt,K,W).forEach(tt=>{P(tt.element,tt.posType,W,K,lt)})},P=(K,S,X,T,G)=>{let lt=!1;null==K||K.addEventListener("touchstart",W=>{lt=!0,b({touchEvent:W},S,X,T,G)}),null==K||K.addEventListener("mousedown",W=>{if(0==W.button){if(lt)return void(lt=!1);b({mouseEvent:W},S,X,T,G)}})},b=(K,S,X,T,G)=>{let{x:lt,y:W,width:tt,height:ft}=X,pt=T.map(Dt=>Object.assign({},Dt.size)),nt=[];(0,M.A)(K,{start:Dt=>{T.forEach((Dt,xt)=>{let{id:Vt,size:dt,attribute:et}=Dt;nt.push(JSON.parse(JSON.stringify({id:Vt,size:dt,attribute:et})))})},move:(Dt,xt)=>{((Dt,xt,Vt,zt)=>{(()=>{let dt;dt="rect-center"===S?{x:lt+Vt-Dt,y:W+zt-xt,width:tt,height:ft}:{x:lt,y:W,width:tt,height:ft},(0,h.v)(E.icdt.screen.width),(0,h.v)(E.icdt.screen.height),dt.width<0&&(dt.width=0),dt.height<0&&(dt.height=0),Object.assign(X,dt),(0,U.yD)(G,T,X)})(),T.forEach((dt,et)=>{let ut,{x:_t,y:bt,width:Zt,height:gt}=pt[et],{id:z,type:F,size:d,attribute:J}=dt;ut="rect-center"===S?{x:_t+Vt-Dt,y:bt+zt-xt,width:Zt,height:gt}:{x:_t,y:bt,width:Zt,height:gt},(0,h.v)(E.icdt.screen.width),(0,h.v)(E.icdt.screen.height),ut.width<0&&(ut.width=0),ut.height<0&&(ut.height=0),ut.x=(0,x.q)(ut.x),ut.y=(0,x.q)(ut.y),ut.width=(0,x.q)(ut.width),ut.height=(0,x.q)(ut.height),Object.assign(d,ut),Object.assign(J,(0,ot.sg)(F,d)),(0,U.__)(window.document.getElementById(z),J)})})(xt[0][0],xt[0][1],Dt.x,Dt.y)},end:(Dt,xt)=>{nt.length&&E.icdt.history.push(T.map((Dt,xt)=>{let{id:Vt,size:dt,attribute:et}=Dt;return{type:"size",from:nt[xt],to:JSON.parse(JSON.stringify({id:Vt,size:dt,attribute:et}))}}))}})}},5226:(ue,Ct,f)=>{f.d(Ct,{E:()=>G,T:()=>lt});var L=f(1687),E=f(8619),ot=f(8785),M=f(2282),U=f(8054),h=f(4921),x=f(6358),y=f(9054),P=f(8419),b=f(1105),K=f(2875),S=f(7210),X=f(4981),T=f(4080);const G=(W,tt)=>{var ft;if(tt&&!window.document.getElementById(tt))return;if(tt){let ht=window.document.getElementById(tt);jQuery(ht).find("#"+L.O.BACKGROUND_GROUP).empty();let nt=(0,T.g1)(L.O.BACKGROUND_GROUP,"g",void 0,ht);(0,T.x0)(nt,W)}else{jQuery(X.icdt.target).find("#"+L.O.BACKGROUND_GROUP).empty();let ht=(0,T.g1)(L.O.BACKGROUND_GROUP,"g",void 0,X.icdt.target);(0,T.x0)(ht,W)}let pt=(ht,nt)=>{nt=nt?parseFloat(`${tt}0${nt}`):tt,null==ht||ht.forEach(R=>{let Pt=tt?parseFloat(`${tt}0${R.id}`):R.id;var Qt;if(R.isdeleted)null===(Qt=window.document.getElementById(Pt))||void 0===Qt||Qt.remove();else switch(R.type){case y.$.GROUP:(0,x.m)(Pt,{},nt),pt(R.nodes,R.id);break;case y.$.CIRCLE:(0,E._)(Pt,{size:R.size,attribute:R.attribute},nt?window.document.getElementById(nt):null);break;case y.$.ELLIPSE:(0,ot.r)(Pt,{size:R.size,attribute:R.attribute},nt);break;case y.$.LINE:(0,h.W)(Pt,{size:R.size,attribute:R.attribute},nt);break;case y.$.RECT:(0,U.f)(Pt,{size:R.size,attribute:R.attribute},nt?window.document.getElementById(nt):null);break;case y.$.POLYGON:(0,M.l)(Pt,{size:R.size,attribute:R.attribute},nt);break;case y.$.FOREIGNOBJECT:(0,K.e)(Pt,{size:R.size,attribute:R.attribute,style:R.style,source:R.source},nt?window.document.getElementById(nt):null);break;case y.$.IMAGE:(0,S.G)(Pt,{size:R.size,attribute:R.attribute,source:R.source},nt?window.document.getElementById(nt):null);break;case y.$.TEXT:(0,b.$)(Pt,{size:R.size,attribute:R.attribute,source:R.source},nt);break;case y.$.PATH:(0,P.G)(Pt,{size:R.size,attribute:R.attribute},nt)}})};pt(null==W||null===(ft=W.svg)||void 0===ft?void 0:ft.nodes)},lt=(W,tt)=>{var ft;if(tt&&!window.document.getElementById(tt))return;let pt=(ht,nt)=>{nt=nt?parseFloat(`${tt}0${nt}`):tt,null==ht||ht.forEach(R=>{let Pt=tt?parseFloat(`${tt}0${R.id}`):R.id;jQuery("#"+Pt).appendTo(nt?window.document.getElementById(nt):X.icdt.target),R.type==y.$.GROUP&&pt(R.nodes,R.id)})};pt(null==W||null===(ft=W.svg)||void 0===ft?void 0:ft.nodes)}},8619:(ue,Ct,f)=>{f.d(Ct,{_:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(b,(0,ot.sg)(L.$.CIRCLE,P)),{nodeId:h,element:(0,M.it)(h,L.$.CIRCLE,"circle",{size:P,attribute:b},y),size:P,attribute:b}}},8785:(ue,Ct,f)=>{f.d(Ct,{r:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(b,(0,ot.sg)(L.$.ELLIPSE,P)),{nodeId:h,element:(0,M.it)(h,L.$.ELLIPSE,"ellipse",{size:P,attribute:b},y?window.document.getElementById(y):null),size:P,attribute:b}}},2875:(ue,Ct,f)=>{f.d(Ct,{e:()=>M});var L=f(9054),E=f(4318),ot=f(4080);const M=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:180,height:180},P=(null==h?void 0:h.attribute)||{};Object.assign(P,(0,E.sg)(L.$.FOREIGNOBJECT,y));let b=(null==h?void 0:h.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},K=(null==h?void 0:h.style)||{};return{nodeId:U,element:(0,ot.it)(U,L.$.FOREIGNOBJECT,"foreignObject",{size:y,attribute:P,style:K,source:b},x),size:y,attribute:P,style:K,source:b}}},6358:(ue,Ct,f)=>{f.d(Ct,{m:()=>M});var L=f(9054),E=f(4318),ot=f(4080);const M=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},P=(null==h?void 0:h.attribute)||{};return Object.assign(P,(0,E.sg)(L.$.GROUP,y)),{nodeId:U,element:(0,ot.it)(U,L.$.GROUP,"g",{size:y,attribute:P},x?window.document.getElementById(x):null),size:y,attribute:P}}},7210:(ue,Ct,f)=>{f.d(Ct,{G:()=>M});var L=f(9054),E=f(4318),ot=f(4080);const M=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:200,height:100},P=(null==h?void 0:h.attribute)||{preserveAspectRatio:"none"};Object.assign(P,(0,E.sg)(L.$.IMAGE,y));let b=(null==h?void 0:h.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:U,element:(0,ot.it)(U,L.$.IMAGE,"image",{size:y,attribute:P,source:b},x),size:y,attribute:P,source:b}}},4921:(ue,Ct,f)=>{f.d(Ct,{W:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth,strokeLinecap:E.icdt.attribute.strokeLinecap};return Object.assign(b,(0,ot.sg)(L.$.LINE,P)),{nodeId:h,element:(0,M.it)(h,L.$.LINE,"line",{size:P,attribute:b},y?window.document.getElementById(y):null),size:P,attribute:b}}},8419:(ue,Ct,f)=>{f.d(Ct,{G:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(b,(0,ot.sg)(L.$.PATH,P)),{nodeId:h,element:(0,M.it)(h,L.$.PATH,"path",{size:P,attribute:b},y?window.document.getElementById(y):null),size:P,attribute:b}}},2282:(ue,Ct,f)=>{f.d(Ct,{l:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(b,(0,ot.sg)(L.$.POLYGON,P)),{nodeId:h,element:(0,M.it)(h,L.$.POLYGON,"polygon",{size:P,attribute:b},y?window.document.getElementById(y):null),size:P,attribute:b}}},8054:(ue,Ct,f)=>{f.d(Ct,{f:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},b=(null==x?void 0:x.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(b,(0,ot.sg)(L.$.RECT,P)),{nodeId:h,element:(0,M.it)(h,L.$.RECT,"rect",{size:P,attribute:b},y),size:P,attribute:b}}},1105:(ue,Ct,f)=>{f.d(Ct,{$:()=>U});var L=f(9054),E=f(4981),ot=f(4318),M=f(4080);const U=(h,x,y)=>{let P=(null==x?void 0:x.size)||{x:0,y:0,width:100,height:50},b=(null==x?void 0:x.attribute)||{fill:E.icdt.attribute.stroke,fontFamily:E.icdt.attribute.fontFamily,fontSize:E.icdt.attribute.fontSize,textLength:E.icdt.attribute.textLength};Object.assign(b,(0,ot.sg)(L.$.TEXT,P));let K=(null==x?void 0:x.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:h,element:(0,M.it)(h,L.$.TEXT,"text",{size:P,attribute:b,source:K},y?window.document.getElementById(y):null),size:P,attribute:b,source:K}}},4318:(ue,Ct,f)=>{f.d(Ct,{bH:()=>E,sg:()=>ot});var L=f(9054);const E=(U,h,x,y,P)=>{let b={x:Math.min(U,x),y:Math.min(h,y),width:Math.abs(x-U)||1,height:Math.abs(y-h)||1};return null!=P&&P.ratio&&(b.width<=b.height?b.height=b.width*(null==P?void 0:P.ratio):b.width=b.height/(null==P?void 0:P.ratio)),Object.assign(b,{ratios:(null==P?void 0:P.ratios)||[[(U-b.x)/(b.width||1),(h-b.y)/(b.height||1)],[(x-b.x)/(b.width||1),(y-b.y)/(b.height||1)]]}),null!=P&&P.points&&(b.points=null==P?void 0:P.points),b},ot=(U,h,x)=>{var y=(()=>{switch(U){case L.$.CIRCLE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,r:Math.min(h.width/2,h.height/2)};case L.$.ELLIPSE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2};case L.$.LINE:{var P;let X={};return null===(P=h.ratios)||void 0===P||P.forEach((T,G)=>{X[`x${G+1}`]=h.x+h.width*T[0],X[`y${G+1}`]=h.y+h.height*T[1]}),X}case L.$.RECT:return{x:h.x,y:h.y,width:h.width,height:h.height};case L.$.POLYGON:var b;return{points:((null===(b=h.ratios)||void 0===b?void 0:b.map(X=>[h.x+h.width*X[0],h.y+h.height*X[1]]))||[]).map(X=>X.join(" ")).join(",")};case L.$.FOREIGNOBJECT:case L.$.IMAGE:return{x:h.x,y:h.y,width:h.width,height:h.height};case L.$.TEXT:var K;return{x:h.x,y:h.y+(null!==(K=null==x?void 0:x.fontSize)&&void 0!==K?K:20)-4};case L.$.PATH:{var S;let X=null!==(S=h.points)&&void 0!==S?S:[];return X.length?{d:`M ${X[0][0]} ${X[0][1]} L `+(X.map(T=>[T[0],T[1]])||[]).map(T=>T.join(" ")).join(" ")}:{d:""}}}return{}})();return h.rotate?(y.transform=`rotate(${h.rotate})`,y.transformOrigin=`${h.x+h.width/2} ${h.y+h.height/2}`):(y.transform=null,y.transformOrigin=null),y}},5811:(ue,Ct,f)=>{f.d(Ct,{q:()=>L});const L=(E,ot)=>{var M;return ot=null!==(M=ot)&&void 0!==M?M:100,Math.round((E+Number.EPSILON)*ot)/ot}},3423:(ue,Ct,f)=>{f.d(Ct,{v:()=>ot});var L=f(4981),E=f(5811);const ot=M=>(0,E.q)(M/L.icdt.screen.scale)},3385:(ue,Ct,f)=>{f.d(Ct,{Vs:()=>y,co:()=>h,k6:()=>U,lO:()=>x,mr:()=>P});var L=f(4981),E=f(4080),ot=f(4318),M=f(5811);const U=(b,K)=>{let{id:S,type:X,size:T,attribute:G}=b,lt=JSON.parse(JSON.stringify({id:S,size:T,attribute:G}));T.x=(0,M.q)(K),Object.assign(G,(0,ot.sg)(X,T)),(0,E.__)(window.document.getElementById(S),G),L.icdt.history.push([{type:"size",from:lt,to:JSON.parse(JSON.stringify({id:S,size:T,attribute:G}))}])},h=(b,K)=>{let{id:S,type:X,size:T,attribute:G}=b,lt=JSON.parse(JSON.stringify({id:S,size:T,attribute:G}));T.y=(0,M.q)(K),Object.assign(G,(0,ot.sg)(X,T)),(0,E.__)(window.document.getElementById(S),G),L.icdt.history.push([{type:"size",from:lt,to:JSON.parse(JSON.stringify({id:S,size:T,attribute:G}))}])},x=(b,K,S)=>{let{id:X,type:T,size:G,attribute:lt}=b,W=JSON.parse(JSON.stringify({id:X,size:G,attribute:lt}));S&&(G.height=(0,M.q)(K*G.height/G.width)),G.width=(0,M.q)(K),Object.assign(lt,(0,ot.sg)(T,G)),(0,E.__)(window.document.getElementById(X),lt),L.icdt.history.push([{type:"size",from:W,to:JSON.parse(JSON.stringify({id:X,size:G,attribute:lt}))}])},y=(b,K,S)=>{let{id:X,type:T,size:G,attribute:lt}=b,W=JSON.parse(JSON.stringify({id:X,size:G,attribute:lt}));S&&(G.width=(0,M.q)(K*G.width/G.height)),G.height=(0,M.q)(K),Object.assign(lt,(0,ot.sg)(T,G)),(0,E.__)(window.document.getElementById(X),lt),L.icdt.history.push([{type:"size",from:W,to:JSON.parse(JSON.stringify({id:X,size:G,attribute:lt}))}])},P=(b,K)=>{let{id:S,type:X,size:T,attribute:G}=b,lt=JSON.parse(JSON.stringify({id:S,size:T,attribute:G}));T.rotate=(0,M.q)(K),Object.assign(G,(0,ot.sg)(X,T)),(0,E.__)(window.document.getElementById(S),G),L.icdt.history.push([{type:"size",from:lt,to:JSON.parse(JSON.stringify({id:S,size:T,attribute:G}))}])}},6816:(ue,Ct,f)=>{f.d(Ct,{A:()=>h});var L=f(968),E=f(4981);class ot{constructor(y){this._points=[],this._options=y}start(y){this._points.length=0,this._points.push([y.x,y.y]),this._options.start(y)}move(y){this._points.push([y.x,y.y]),this._options.move(y,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(y=this._points[0])[0],y:y[1]}:{x:0,y:0};var y}get offsetLast(){return this._points.length>=1?{x:(y=this._points[this._points.length-1])[0],y:y[1]}:{x:0,y:0};var y}}var M=f(7797);const h=(x,y,P,b,K)=>{var S,X,T;let G=null,lt=0,W=0;x.mouseEvent?(G=x.mouseEvent.target,lt=x.mouseEvent.offsetX,W=x.mouseEvent.offsetY):x.touchEvent&&(G=x.touchEvent.target,x.touchEvent.touches.length&&(lt=x.touchEvent.touches[0].clientX,W=x.touchEvent.touches[0].clientY));let tt=null!=P?P:E.icdt.screen.scale,ft=null!=b?b:E.icdt.screen.dislocation,pt=null!=K?K:E.icdt.screen.offset,ht=()=>{};var nt=new ot({start:null!==(S=null==y?void 0:y.start)&&void 0!==S?S:ht,move:null!==(X=null==y?void 0:y.move)&&void 0!==X?X:ht,end:null!==(T=null==y?void 0:y.end)&&void 0!==T?T:ht});x.mouseEvent?nt.start((0,M.p)({x:lt,y:W},tt,ft,{x:0,y:0})):x.touchEvent&&nt.start((0,M.p)({x:lt,y:W},tt,ft,pt));let R=dt=>{nt.move((0,M.p)({x:dt.clientX,y:dt.clientY},tt,ft,pt))},Pt=dt=>{nt.end(),[L._.SHAPE,L._.FOREIGNOBJECT,L._.IMAGE,L._.TEXT].includes(E.icdt.pointer.pointer_type)&&(dt.shiftKey||(E.icdt.pointer.pointer_type=L._.POINTER))},Qt=dt=>{dt.touches.length&&R({clientX:dt.touches[0].clientX,clientY:dt.touches[0].clientY})},Dt=dt=>{Pt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("touchmove",Qt,!1),window.removeEventListener("touchend",Dt,!1)},xt=dt=>{0==dt.button&&R({clientX:dt.clientX,clientY:dt.clientY})},Vt=dt=>{0==dt.button&&(Pt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("mousemove",xt,!1),window.removeEventListener("mouseup",Vt,!1))};if(x.mouseEvent)window.addEventListener("mousemove",xt,!1),window.addEventListener("mouseup",Vt,!1);else if(x.touchEvent){var zt;window.addEventListener("touchmove",Qt,!1),window.addEventListener("touchend",Dt,!1),null===(zt=G)||void 0===zt||zt.addEventListener("touchmove",function(dt){dt.preventDefault()})}}},7797:(ue,Ct,f)=>{f.d(Ct,{p:()=>E});var L=f(5811);const E=(ot,M,U,h)=>(ot.x-=h.x,ot.y-=h.y,ot.x/=M,ot.y/=M,ot.x-=U.x,ot.y-=U.y,ot.x=(0,L.q)(ot.x),ot.y=(0,L.q)(ot.y),ot)},1690:(ue,Ct,f)=>{f.d(Ct,{$:()=>Rt});var L=f(4981),E=f(9054),ot=f(5973),M=f(2336),U=f(861),h=f(157),x=f(4787),P=f(1105),b=f(6358);const W=function(H){var c,V,at=jQuery("#"+H),O=null===(c=at.attr("class"))||void 0===c?void 0:c.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),j=null===(V=at.attr("class"))||void 0===V?void 0:V.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);O&&O.forEach(function(q){jQuery(at).removeClass(q)}),j&&j.forEach(function(q){jQuery(at).removeClass(q)});let D=at.attr("data-class");D&&(at.attr("class",D),at.removeAttr("data-class")),jQuery(at).data("animation-running",!1)};var tt=f(7210),ft=f(5811);const pt=(H,c,V)=>{var at,O,j,D;let q=1,st=new Image;st.onload=()=>{var wt,Mt,kt,Kt;q=(0,ft.q)(st.naturalWidth/st.naturalHeight,100);let ee=0,Ut=0,Ft=0,$t=0;var he,re,le,pe;q>=1?(Ft=Math.min(st.naturalWidth,null!==(he=null===(re=Rt.slide.svg)||void 0===re||null===(re=re.viewBox)||void 0===re?void 0:re.width)&&void 0!==he?he:0),$t=Ft/q):($t=Math.min(st.naturalHeight,null!==(le=null===(pe=Rt.slide.svg)||void 0===pe||null===(pe=pe.viewBox)||void 0===pe?void 0:pe.height)&&void 0!==le?le:0),Ft=$t/q),ee=((null!==(wt=null===(Mt=Rt.slide.svg)||void 0===Mt||null===(Mt=Mt.viewBox)||void 0===Mt?void 0:Mt.width)&&void 0!==wt?wt:0)-Ft)/2,Ut=((null!==(kt=null===(Kt=Rt.slide.svg)||void 0===Kt||null===(Kt=Kt.viewBox)||void 0===Kt?void 0:Kt.height)&&void 0!==kt?kt:0)-$t)/2,c.size={x:ee,y:Ut,width:Ft,height:$t},ht(c,V)},st.onerror=wt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,wt)},st.src=null!==(at=null!==(O=null===(j=c.source)||void 0===j?void 0:j.url)&&void 0!==O?O:null===(D=c.source)||void 0===D?void 0:D.path)&&void 0!==at?at:""},ht=(H,c)=>{if(H.slideStatus!=Rt.slideStatus)return void c();let{element:V}=(0,tt.G)(Math.ceil(1e9*Math.random()),{size:H.size,source:{type:"image",image:null==H?void 0:H.source}});setTimeout(()=>{null==V||V.remove(),c()},3e3)},nt=(H,c,V)=>{var at,O,j,D;let q=new Image;q.onload=()=>{R(H,{width:q.naturalWidth,height:q.naturalHeight},c,V)},q.onerror=st=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,st),V()},q.src=null!==(at=null!==(O=null===(j=c.source)||void 0===j?void 0:j.url)&&void 0!==O?O:null===(D=c.source)||void 0===D?void 0:D.path)&&void 0!==at?at:""},R=(H,c,V,at)=>{if(V.slideStatus!=Rt.slideStatus)return void at();let O=(0,ft.q)(c.width/c.height,100),j=0,D=0,q=0,st=0;O>=1?(q=c.width,q=Math.max(q,40),q=Math.min(q,100),st=q/O):(st=c.height,st=Math.max(st,40),st=Math.min(st,100),q=st/O);let{size:wt}=H;j=wt.x+wt.width/2-q/2,D=wt.y+wt.height/2-st/2;let{element:Mt}=(0,tt.G)(Math.ceil(1e9*Math.random()),{size:{x:j,y:D,width:q,height:st},source:{type:"image",image:null==V?void 0:V.source}});setTimeout(()=>{null==Mt||Mt.remove(),at()},3e3)};var Pt=f(4080);const Qt=(H,c,V)=>{var at,O,j;if(c.slideStatus!=Rt.slideStatus)return void V();if(null===(at=c.source)||void 0===at||!at.url)return console.warn(`${H.id} -> audio no source!`),void V();var D=jQuery("#"+H.id);let q=null!==(O=c.iteration)&&void 0!==O?O:0;if(q<0&&(V(),V=function(){}),!(D.data("audio-running")&&q<0)){D.data("audio-running",!0);var st=new Audio;return st.autoplay=!0,st.loop=0!=q,st.preload="auto",st.controls=!0,st.setAttributeNode(document.createAttribute("playsinline")),st.addEventListener("canplay",function(){var wt=st.play();wt&&wt.then(function(Mt){D.data("audio-running",!0)}).catch(function(Mt){D.data("audio-running",!1),c.slideStatus===Rt.slideStatus&&V()})}),st.addEventListener("timeupdate",function(){var Mt;c.slideStatus!==Rt.slideStatus&&((Mt=this).pause(),Mt.remove(),D.data("audio-running",!1))}),st.addEventListener("canplaythrough",function(){this.loop&&(q>0?q--:0==q&&(this.loop=!1))}),st.addEventListener("play",function(){}),st.addEventListener("pause",function(){}),st.addEventListener("ended",function(){this.remove(),D.data("audio-running",!1),c.slideStatus===Rt.slideStatus&&V()}),st.onerror=function(){this.remove(),D.data("audio-running",!1),c.slideStatus===Rt.slideStatus&&V()},st.src=(null===(j=c.source)||void 0===j?void 0:j.url)||"",st}};var Dt=f(1687),xt=f(9942);const bt=(H,c,V)=>{var at;null===(at=c.test)||void 0===at||null===(at=at.answer)||void 0===at||null===(at=at.matching)||void 0===at||at.filter(O=>O.value==V.key).forEach(O=>O.value="")},gt=(H,c,V,at,O,j)=>{var D,q,st,wt,Mt,kt,Kt,ee,Ut,Ft,$t,he;O.iscorrect?(null!==(D=c.test)&&void 0!==D&&null!==(D=D.audiotrue)&&void 0!==D&&D.path&&Qt(H,{source:(0,xt.I)(null===(wt=c.test)||void 0===wt?void 0:wt.audiotrue),iteration:0,nodeStatus:V,slideStatus:at},j),null!==(q=c.test)&&void 0!==q&&null!==(q=q.icontrue)&&void 0!==q&&q.path&&nt(H,{source:(0,xt.I)(null===(Mt=c.test)||void 0===Mt?void 0:Mt.icontrue),iteration:0,nodeStatus:V,slideStatus:at},j),null!==(st=c.test)&&void 0!==st&&null!==(st=st.effecttrue)&&void 0!==st&&st.path&&pt(0,{source:(0,xt.I)(null===(kt=c.test)||void 0===kt?void 0:kt.effecttrue),iteration:0,nodeStatus:V,slideStatus:at},j)):(null!==(Kt=c.test)&&void 0!==Kt&&null!==(Kt=Kt.audiofalse)&&void 0!==Kt&&Kt.path&&Qt(H,{source:(0,xt.I)(null===(Ft=c.test)||void 0===Ft?void 0:Ft.audiofalse),iteration:0,nodeStatus:V,slideStatus:at},j),null!==(ee=c.test)&&void 0!==ee&&null!==(ee=ee.iconfalse)&&void 0!==ee&&ee.path&&nt(H,{source:(0,xt.I)(null===($t=c.test)||void 0===$t?void 0:$t.iconfalse),iteration:0,nodeStatus:V,slideStatus:at},j),null!==(Ut=c.test)&&void 0!==Ut&&null!==(Ut=Ut.effectfalse)&&void 0!==Ut&&Ut.path&&pt(0,{source:(0,xt.I)(null===(he=c.test)||void 0===he?void 0:he.effectfalse),iteration:0,nodeStatus:V,slideStatus:at},j))},z=(H,c,V,at)=>{var O,j,D,q,st,wt;null!==(O=c.animate)&&void 0!==O&&O.value&&((H,c,V)=>{var at;let{value:j}=null!==(at=H.animate)&&void 0!==at?at:{};((H,c,V)=>{var at;let O=jQuery("#"+H),j="",D=null!==(at=c.iteration)&&void 0!==at?at:0,q=[];(c.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?q.push(c.value):c.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(c.value)?(q.push("animation"),q.push(`animation-${c.value}`)):(q.push("animate__animated"),q.push(`animate__${c.value}`)):(q.push("animation"),q.push("animation-fadein")),D<0?(q.push("animation-iteration-infinite"),V(),V=function(){}):D>0&&q.push("animation-iteration-"+(D+1)),j=q.join(" "),function(wt){let Mt=function(){O.data("animate-running")?O.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){O.data("animate-running",!1),setTimeout(function(){wt()},100)}):wt()};O.hasClass("animation")?setTimeout(function(){Mt()}):Mt()}(function(){var wt;W(H),(D>0||D<0)&&O.one("animationiteration",function(){c.slideStatus===Rt.slideStatus||(O.data("animate-running",!1),W(H),c.slideStatus===Rt.slideStatus&&V())}),O.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(O.data("animate-running",!1),W(H),c.finish){default:case 0:case 1:break;case 2:O.addClass("hide")}c.slideStatus===Rt.slideStatus&&V()}),O.attr("data-class",null!==(wt=O.attr("class"))&&void 0!==wt?wt:""),O.addClass(j),O.data("animate-running",!0)})})(H.id,{value:j,nodeStatus:c,slideStatus:V},()=>{})})(c,V.nodeStatus,V.slideStatus),null!==(j=c.interactive)&&void 0!==j&&j.show?((H,c,V,at)=>{var O,j,D;console.log("icdt_Run_Interactive_NodeShow",H,c,V);let q={total:0,counter:0},{triggershow:st,triggerrun:wt,triggerhide:Mt,action:kt,audio:Kt}=null!==(O=null===(j=H.interactive)||void 0===j?void 0:j.show)&&void 0!==O?O:{};if(st){let{id:Ut,ids:Ft,time:$t,async:he}=st;"asynctrue"==he?(0,x.L5)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V}):"time"==he&&setTimeout(()=>{(0,x.L5)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})},1e3*(null!=$t?$t:0))}if(wt){let{id:Ut,ids:Ft,time:$t,async:he}=wt;"asynctrue"==he?(0,x.Ar)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V}):"time"==he&&setTimeout(()=>{(0,x.Ar)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})},1e3*(null!=$t?$t:0))}if(Mt){let{id:Ut,ids:Ft,time:$t,async:he}=Mt;"asynctrue"==he?(0,x.WT)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V}):"time"==he&&setTimeout(()=>{(0,x.WT)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})},1e3*(null!=$t?$t:0))}let ee=()=>{setTimeout(()=>{if(q.counter>=q.total){if(at&&at(),st){let{id:Ut,ids:Ft,async:$t}=st;"asyncfalse"==$t&&(0,x.L5)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})}if(wt){let{id:Ut,ids:Ft,async:$t}=wt;"asyncfalse"==$t&&(0,x.Ar)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})}if(Mt){let{id:Ut,ids:Ft,async:$t}=Mt;"asyncfalse"==$t&&(0,x.WT)({id:Ut,ids:Ft,nodeStatus:c,slideStatus:V})}}})};if(null!=kt&&kt.value){q.total+=1;let Ut=()=>{q.counter+=1,ee()};switch(null==kt?void 0:kt.value){case"hide":jQuery("#"+H.id).addClass("hide"),Ut();break;case"points":{let{points:Ft,time:$t,iteration:he,finish:re}=kt;(0,U.G)(H.id,{points:Ft,time:$t,iteration:he,finish:re,nodeStatus:c,slideStatus:V},Ut);break}default:{let{value:Ft,time:$t,iteration:he,finish:re}=kt;(0,M.Q)(H.id,{value:Ft,time:$t,iteration:he,finish:re,nodeStatus:c,slideStatus:V},Ut);break}}}if(null!=Kt&&null!==(D=Kt.source)&&void 0!==D&&D.path){q.total+=1;let Ut=()=>{q.counter+=1,ee()};(0,h.R)(H.id,Kt,q,{nodeStatus:c,slideStatus:V},Ut)}q.total||ee()})(c,V.nodeStatus,V.slideStatus,at):at&&at(),null!==(D=c.interactive)&&void 0!==D&&D.click&&jQuery("#"+c.id).click(Mt=>{var kt;Mt.preventDefault(),null!==(kt=c.interactive)&&void 0!==kt&&null!==(kt=kt.click)&&void 0!==kt&&kt.action&&jQuery("#"+c.id).addClass("interactive-click"),V.nodeStatus=Rt.refreshNodeStatus(),(0,ot.F)(c,V.nodeStatus,V.slideStatus)}),null!==(q=c.variable)&&void 0!==q&&q.input&&jQuery("#"+c.id).on("change","input,textarea",Mt=>{Mt.preventDefault(),((H,c,V)=>{var at,O;L.icdt.variable.setValue(null!==(at=null===(O=c.variable)||void 0===O||null===(O=O.input)||void 0===O?void 0:O.variable)&&void 0!==at?at:"",H),(H=>{var c;let V=(at,O)=>{null==at||at.forEach(j=>{switch(j.type){case E.$.GROUP:(0,b.m)(j.id,{},O),V(j.nodes,j.id);break;case E.$.POLYGON:break;case E.$.TEXT:(0,P.$)(j.id,{size:j.size,attribute:j.attribute,source:j.source},O)}})};V(null===(c=H.svg)||void 0===c?void 0:c.nodes)})(V)})(Mt.target.value,c,H)}),null!==(st=c.variable)&&void 0!==st&&st.click&&jQuery("#"+c.id).click(Mt=>{var kt;Mt.preventDefault(),null!==(kt=c.variable)&&void 0!==kt&&null!==(kt=kt.click)&&void 0!==kt&&kt.variable&&jQuery("#"+c.id).addClass("variable-click"),((H,c)=>{var V;L.icdt.variable.setValueOperator(null===(V=H.variable)||void 0===V?void 0:V.click),(H=>{var c;let V=(at,O)=>{null==at||at.forEach(j=>{switch(j.type){case E.$.GROUP:(0,b.m)(j.id,{},O),V(j.nodes,j.id);break;case E.$.POLYGON:break;case E.$.TEXT:(0,P.$)(j.id,{size:j.size,attribute:j.attribute,source:j.source},O)}})};V(null===(c=H.svg)||void 0===c?void 0:c.nodes)})(c)})(c,H)}),"test"==(null===(wt=c.source)||void 0===wt?void 0:wt.type)&&((H,c)=>{var V;let at=()=>{};switch(null===(V=H.source)||void 0===V||null===(V=V.test)||void 0===V?void 0:V.type){case"singlechoice":jQuery("#"+H.id).click(O=>{O.preventDefault(),((H,c,V,at,O)=>{var j,D;let q=null===(j=H.source)||void 0===j||null===(j=j.test)||void 0===j||null===(j=j.singlechoice)||void 0===j?void 0:j.iscorrect;null!==(D=c.svg)&&void 0!==D&&D.nodes.find(wt=>{var Mt;return"submit"==(null===(Mt=wt.source)||void 0===Mt||null===(Mt=Mt.test)||void 0===Mt?void 0:Mt.type)})||gt(H,c,V,at,{iscorrect:q},O),c.test?c.test.answer?c.test.answer.singlechoice={value:H.id,iscorrect:q}:c.test.answer={singlechoice:{value:H.id,iscorrect:q}}:c.test={answer:{singlechoice:{value:H.id,iscorrect:q}}};let st=(0,Pt.g1)(Dt.O.TEST_GROUP,"g",void 0,L.icdt.target);(0,Pt.Yw)(st,c),console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Rt.nodeStatus,Rt.slideStatus,at)});break;case"multichoice":jQuery("#"+H.id).click(O=>{O.preventDefault(),((H,c,V,at,O)=>{var j,D;let st,q=null===(j=H.source)||void 0===j||null===(j=j.test)||void 0===j||null===(j=j.multichoice)||void 0===j?void 0:j.iscorrect;null!==(D=c.svg)&&void 0!==D&&D.nodes.find(Mt=>{var kt;return"submit"==(null===(kt=Mt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||gt(H,c,V,at,{iscorrect:q},O),c.test?c.test.answer?c.test.answer.multichoice?c.test.answer.multichoice.find(Mt=>Mt.value==H.id)?(c.test.answer.multichoice=c.test.answer.multichoice.filter(Mt=>Mt.value!=H.id),st=!0):c.test.answer.multichoice.push({value:H.id,iscorrect:q}):c.test.answer.multichoice=[{value:H.id,iscorrect:q}]:c.test.answer={multichoice:[{value:H.id,iscorrect:q}]}:c.test={answer:{multichoice:[{value:H.id,iscorrect:q}]}};let wt=(0,Pt.g1)(Dt.O.TEST_GROUP,"g",void 0,L.icdt.target);(0,Pt.Yw)(wt,c),console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Rt.nodeStatus,Rt.slideStatus,at)});break;case"fill":jQuery("#"+H.id).on("keyup",'input[type="text"]',O=>{var j;let D=jQuery("<div/>").css({"font-size":jQuery(O.target).css("font-size"),visibility:"hidden",float:"left"}).text(O.target.value).appendTo(window.document.body);jQuery(O.target).css({width:(null!==(j=D.width())&&void 0!==j?j:0)+30})}).on("keypress",'input[type="text"]',O=>{13===(O.keyCode||O.charCode||O.which)&&(O.preventDefault(),O.stopPropagation(),jQuery(O.target).blur())}).on("change",'input[type="text"]',O=>{var j,D;let q=Rt.nodeStatus,st=Rt.slideStatus,wt=null===(j=O.target)||void 0===j?void 0:j.getAttribute("data-key"),Mt=null===(D=O.target)||void 0===D||null===(D=D.value)||void 0===D||null===(D=D.toLowerCase())||void 0===D?void 0:D.trim();((H,c,V,at,O,j)=>{var D,q,st;let{value:wt}=null!==(D=null===(q=H.source)||void 0===q||null===(q=q.test)||void 0===q||null===(q=q.fill)||void 0===q?void 0:q.find(kt=>kt.key==`[[${O.key}]]`))&&void 0!==D?D:{},Mt=wt&&wt.includes(O.value);null!==(st=c.svg)&&void 0!==st&&st.nodes.find(kt=>{var Kt;return"submit"==(null===(Kt=kt.source)||void 0===Kt||null===(Kt=Kt.test)||void 0===Kt?void 0:Kt.type)})||gt(H,c,V,at,{iscorrect:Mt},j),O.iscorrect=Mt,c.test?c.test.answer?c.test.answer.fill?c.test.answer.fill.find(kt=>kt.key==O.key)?c.test.answer.fill.filter(kt=>kt.key==O.key).forEach(kt=>{kt.value=O.value,kt.iscorrect=O.iscorrect}):c.test.answer.fill.push(O):c.test.answer.fill=[O]:c.test.answer={fill:[O]}:c.test={answer:{fill:[O]}},console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,q,st,{key:wt,value:Mt},at),jQuery("#"+H.id).find(`input[type="text"][data-key="${wt}"]`).val(Mt)});break;case"matching-empty":jQuery("#"+H.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div style="width:64px;height:${H.size.height/H.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.4);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){jQuery('svg foreignObject .ondrop-here[data-type="matching"]:empty').addClass("actived")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${H.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let D=O.draggable.currentTarget;D.appendTo(O.dropTarget),((H,c,V,at,O,j)=>{var D,q,st;let{key:wt}=null!==(D=null===(q=H.source)||void 0===q||null===(q=q.test)||void 0===q?void 0:q.matching)&&void 0!==D?D:{key:"KIEN"},Mt=O.key==wt;null!==(st=c.svg)&&void 0!==st&&st.nodes.find(Kt=>{var ee;return"submit"==(null===(ee=Kt.source)||void 0===ee||null===(ee=ee.test)||void 0===ee?void 0:ee.type)})||gt(H,c,V,at,{iscorrect:Mt},j),bt(H,c,O);let kt={key:null!=wt?wt:"",value:O.key};c.test?c.test.answer?c.test.answer.matching?c.test.answer.matching.find(Kt=>Kt.key==wt)?c.test.answer.matching.filter(Kt=>Kt.key==wt).forEach(Kt=>Kt.value=kt.value):c.test.answer.matching.push(kt):c.test.answer.matching=[kt]:c.test.answer={matching:[kt]}:c.test={answer:{matching:[kt]}},console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Rt.nodeStatus,Rt.slideStatus,{key:D.data("key")},at)}});break;case"matching-content":jQuery("#"+H.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div style="width:64px;height:${H.size.height/H.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.4);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){jQuery('svg foreignObject .ondrop-here[data-type="matching"]:empty').addClass("actived")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${H.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let D=O.draggable.currentTarget;D.appendTo(O.dropTarget),bt(H,c,{key:D.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+H.id).click(O=>{O.preventDefault(),((H,c,V,at,O)=>{var j,D,q,st;let wt;var Mt;if(null!=c&&null!==(j=c.test)&&void 0!==j&&null!==(j=j.answer)&&void 0!==j&&j.singlechoice)wt=null==c||null===(Mt=c.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||null===(Mt=Mt.singlechoice)||void 0===Mt?void 0:Mt.iscorrect;else if(null!=c&&null!==(D=c.test)&&void 0!==D&&null!==(D=D.answer)&&void 0!==D&&D.multichoice){var kt,Kt,ee;wt=1==[null==c||null===(kt=c.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt?void 0:kt.length,null==c||null===(Kt=c.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||null===(Kt=Kt.multichoice)||void 0===Kt||null===(Kt=Kt.map(re=>re.iscorrect?1:0))||void 0===Kt?void 0:Kt.reduce((re,le)=>re+le),null==c||null===(ee=c.svg)||void 0===ee||null===(ee=ee.nodes)||void 0===ee||null===(ee=ee.filter(re=>{var le,pe;return"multichoice"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)&&(null===(pe=re.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===ee?void 0:ee.length].filter((re,le,pe)=>pe.indexOf(re)==le).length}else if(null!=c&&null!==(q=c.test)&&void 0!==q&&null!==(q=q.answer)&&void 0!==q&&q.fill){var Ut,Ft;wt=(null==c||null===(Ut=c.test)||void 0===Ut||null===(Ut=Ut.answer)||void 0===Ut||null===(Ut=Ut.fill)||void 0===Ut||null===(Ut=Ut.map(re=>re.iscorrect?1:0))||void 0===Ut?void 0:Ut.reduce((re,le)=>re+le))==(null===(Ft=c.svg)||void 0===Ft||null===(Ft=Ft.nodes)||void 0===Ft||null===(Ft=Ft.filter(re=>{var le;return"fill"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)}))||void 0===Ft?void 0:Ft.length)}else if(null!=c&&null!==(st=c.test)&&void 0!==st&&null!==(st=st.answer)&&void 0!==st&&st.matching){var $t,he;wt=(null===($t=c.svg)||void 0===$t||null===($t=$t.nodes)||void 0===$t||null===($t=$t.filter(re=>{var le;return"matching-empty"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)}))||void 0===$t?void 0:$t.length)==((null==c||null===(he=c.test)||void 0===he||null===(he=he.answer)||void 0===he?void 0:he.matching)||[]).map(re=>re.key==re.value?1:0).reduce((re,le)=>re+le)}gt(H,c,V,at,{iscorrect:wt},O),console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Rt.nodeStatus,Rt.slideStatus,at)})}})(c,H)};var F=f(8619),d=f(8785),J=f(4921),ut=f(8054),ct=f(2282),St=f(2875),Nt=f(8419);const Et=(H,c,V)=>{if(V.slideStatus!=Rt.slideStatus||!c.length)return;let at=c.shift(),O=H.filter(st=>st.idx==at);if(!O.length)return;let j=Math.max.apply(null,O.map(st=>{var wt;return null!==(wt=st.time)&&void 0!==wt?wt:0})),D=!1,q=j<.5?0:setTimeout(()=>{D||(D=!0,Et(H,c,V))},1e3*j);mt(H,c,O,0,V,{idx:at,total:O.length,counter:0,isRecursive:D,timeoutRecursive:q,maxTimeCoundown:j,uid:Math.floor(1e9*Math.random())})},mt=(H,c,V,at,O,j)=>{if(O.slideStatus!=Rt.slideStatus)return;let D=V[at];if(D){switch(D.type){case E.$.GROUP:break;case E.$.CIRCLE:(0,F._)(D.id,{size:D.size,attribute:D.attribute},O.pId?window.document.getElementById(O.pId):null);break;case E.$.ELLIPSE:(0,d.r)(D.id,{size:D.size,attribute:D.attribute},O.pId);break;case E.$.LINE:(0,J.W)(D.id,{size:D.size,attribute:D.attribute},O.pId);break;case E.$.RECT:(0,ut.f)(D.id,{size:D.size,attribute:D.attribute},O.pId?window.document.getElementById(O.pId):null);break;case E.$.POLYGON:(0,ct.l)(D.id,{size:D.size,attribute:D.attribute},O.pId);break;case E.$.FOREIGNOBJECT:(0,St.e)(D.id,{size:D.size,attribute:D.attribute,style:D.style,source:D.source},O.pId?window.document.getElementById(O.pId):null);break;case E.$.IMAGE:(0,tt.G)(D.id,{size:D.size,attribute:D.attribute,source:D.source},O.pId?window.document.getElementById(O.pId):null);break;case E.$.TEXT:(0,P.$)(D.id,{size:D.size,attribute:D.attribute,source:D.source},O.pId);break;case E.$.PATH:(0,Nt.G)(D.id,{size:D.size,attribute:D.attribute},O.pId)}z(O.slide,D,O,()=>{j.counter+=1,j.maxTimeCoundown<.5&&j.counter>=j.total&&(j.total=j.counter=0,j.isRecursive||(clearTimeout(j.timeoutRecursive),j.isRecursive=!0,setTimeout(()=>{Et(H,c,O)},250)))}),mt(H,c,V,++at,O,j)}},Rt=new class Xt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(c){this._dataSource=c.data||{},L.icdt.variable.set=c.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var c,V;return null!==(c=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.length)&&void 0!==c?c:0}get slides(){var c;return(null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[]}get slide(){var c;return((null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[])[this._slideIdx]||{}}findNode(c){var V;let at=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.find((Kt,ee)=>ee==this._slideIdx),O=null==at?void 0:at.svg,j=(Kt,ee)=>{let Ut=null==Kt?void 0:Kt.find(he=>he.id==c);if(Ut)return Ut.pid=ee,Ut;let Ft=0,$t=Kt.length||0;for(;Ft<$t&&!Ut&&(Ut=j(Kt[Ft].nodes||[],Kt[Ft].id),!Ut);)Ft++;return Ut},D=j((null==O?void 0:O.nodes)||[]);var q,st,wt,Mt,kt;return D?(D.style=null!==(q=D.style)&&void 0!==q?q:{},D.source=null!==(st=D.source)&&void 0!==st?st:{},D.animate=null!==(wt=D.animate)&&void 0!==wt?wt:{},D.interactive=null!==(Mt=D.interactive)&&void 0!==Mt?Mt:{},D.variable=null!==(kt=D.variable)&&void 0!==kt?kt:{},D):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(c,V,at){var O;let j;var D,q;if(this.refreshNodeStatus(),this.refreshSlideStatus(),at)j=null===(D=this._dataSource)||void 0===D||null===(D=D.slides)||void 0===D?void 0:D.find(kt=>kt.code==at||kt.id==at),j&&(this._slideIdx=(null===(q=this._dataSource)||void 0===q||null===(q=q.slides)||void 0===q?void 0:q.indexOf(j))||0);else if(V){var st,wt;j=null===(st=this._dataSource)||void 0===st||null===(st=st.slides)||void 0===st?void 0:st.find(kt=>kt.id==V),j&&(this._slideIdx=(null===(wt=this._dataSource)||void 0===wt||null===(wt=wt.slides)||void 0===wt?void 0:wt.indexOf(j))||0)}else this._slideIdx=Math.min(Math.max(c||0,0),this.slideTotal-1),j=this.slide;if(j){var Mt;fe(L.icdt.container,L.icdt.svg,j),null===(Mt=jQuery(L.icdt.svg).find("#"+Dt.O.BACKGROUND_GROUP))||void 0===Mt||Mt.empty();let kt=(0,Pt.g1)(Dt.O.BACKGROUND_GROUP,"g",void 0,L.icdt.svg);(0,Pt.x0)(kt,j),(H=>{var c,V,at;let O=Rt.nodeStatus,j=Rt.slideStatus,D=null===(c=H.svg)||void 0===c||null===(c=c.nodes)||void 0===c?void 0:c.map(q=>q.idx).filter((q,st,wt)=>wt.indexOf(q)==st).sort((q,st)=>(null!=q?q:0)-(null!=st?st:0));Et(null!==(V=null===(at=H.svg)||void 0===at?void 0:at.nodes)&&void 0!==V?V:[],null!=D?D:[],{slide:H,nodeStatus:O,slideStatus:j})})(j)}this.changeSlide(this.slides,null===(O=this.slide)||void 0===O?void 0:O.id,this.slideIdx,this.slides.length)}set onChangeSlide(c){this._fnChangeSlides.push(c)}changeSlide(c,V,at,O){this._fnChangeSlides.forEach(j=>j(c,V,at,O))}},fe=(H,c,V)=>{var at,O;let j=window.document.querySelector(c);var D;j||(j=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(D=window.document.querySelector(H))||void 0===D||D.appendChild(j)),j.textContent=null;let{x:q,y:st,width:wt,height:Mt}=null!==(at=null==V||null===(O=V.svg)||void 0===O?void 0:O.viewBox)&&void 0!==at?at:L.icdt.screen.frameSize;j.setAttributeNS(null,"viewBox",q+" "+st+" "+wt+" "+Mt),j.setAttribute("id",c.replace("#",""))}},2336:(ue,Ct,f)=>{f.d(Ct,{Q:()=>E});var L=f(1690);const E=(M,U,h)=>{var x;if(!U.value)return void h();let y=jQuery("#"+M),P="",b=null!==(x=U.iteration)&&void 0!==x?x:0,K=[];(U.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?K.push(U.value):(K.push("animation"),K.push(U.value?"animation-"+U.value:"animation-fadein")),b<0?(K.push("animation-iteration-infinite"),h(),h=function(){}):b>0&&K.push("animation-iteration-"+(b+1)),P=K.join(" "),function(X){let T=function(){y.data("animate-running")?y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){y.data("animate-running",!1),setTimeout(function(){X()},100)}):X()};y.hasClass("animation")?setTimeout(function(){T()}):T()}(function(){var X;ot(M),(b>0||b<0)&&y.one("animationiteration",function(){U.slideStatus===L.$.slideStatus||(y.data("animate-running",!1),ot(M),U.slideStatus===L.$.slideStatus&&h())}),y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(y.data("animate-running",!1),ot(M),U.finish){default:case 0:case 1:break;case 2:y.addClass("hide")}U.slideStatus===L.$.slideStatus&&h()}),y.attr("data-class",null!==(X=y.attr("class"))&&void 0!==X?X:""),y.addClass(P),y.data("animate-running",!0)})},ot=function(M){var U,h=jQuery("#"+M),x=null===(U=h.attr("class"))||void 0===U?void 0:U.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);x&&x.forEach(function(P){jQuery(h).removeClass(P)});let y=h.attr("data-class");y&&(h.attr("class",y),h.removeAttr("data-class")),jQuery(h).data("animation-running",!1)}},861:(ue,Ct,f)=>{f.d(Ct,{G:()=>M});var L=f(4318),E=f(1690),ot=f(4080);const M=(h,x,y)=>{var P;if(!x.points||!x.points.length)return void y();let b=jQuery("#"+h),K=function U(h){let x=[];2===h.length&&h.splice(1,0,[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);let S,X,T,y=1,P=h.length;for(;y<P;){if(S=h[y-1],X=h[y],T=h[y+1],(Math.abs(S[0]-X[0])>=15||Math.abs(S[1]-X[1])>=15)&&Math.pow(S[0]-X[0],2)+Math.pow(S[1]-X[1],2)>=Math.pow(15,2)&&T&&(Math.abs(S[0]-T[0])<=20||Math.abs(S[1]-T[1])<=20)&&Math.pow(S[0]-T[0],2)+Math.pow(S[1]-T[1],2)<=Math.pow(20,2))x.push(X);else{let lt=X[0]-S[0],W=X[1]-S[1],tt=Math.max(Math.abs(lt),Math.abs(W));for(var G=0;G<tt;G+=15)x.push([S[0]+lt*G/tt,S[1]+W*G/tt])}y++}return P>0&&(x.splice(0,0,h[0]),x.push(h[P-1])),x}(x.points||[]),S=null!==(P=x.iteration)&&void 0!==P?P:0;if(S<0&&(y(),y=function(){}),b.data("work-running")&&S<0)return;b.data("work-running",!0);let ft,X=K.length,T=Math.max(20,1e3*(x.time||3)/X),{id:G,type:lt,size:W,attribute:tt}=E.$.findNode(h),pt=function(ht){if(x.slideStatus!==E.$.slideStatus)return b.data("work-running",!1),void(x.slideStatus===E.$.slideStatus&&y());if(ht<X){let nt=K[ht];nt&&(ft=Object.assign({},W,{x:nt[0]-W.width/2,y:nt[1]-W.height/2}),Object.assign(tt,(0,L.sg)(lt,ft)),(0,ot.__)(window.document.getElementById(G),tt),setTimeout(function(){pt(++ht)},T))}else if(S>0)S--,pt(1);else if(S<0)pt(1);else switch(b.data("work-running",!1),x.slideStatus===E.$.slideStatus&&y(),x.finish){default:case 0:break;case 1:Object.assign(tt,(0,L.sg)(lt,W)),(0,ot.__)(window.document.getElementById(G),tt);break;case 2:b.addClass("hide")}};pt(1)}},157:(ue,Ct,f)=>{f.d(Ct,{R:()=>E});var L=f(1690);const E=(M,U,h,x,y)=>{var P,b,K;if(x.slideStatus!=L.$.slideStatus)return U.async&&"change-slide"!=U.async?void 0:void y();if(x.nodeStatus!=L.$.nodeStatus&&(!U.async||"change-node"==U.async))return void y();if(null===(P=U.source)||void 0===P||!P.url)return console.warn(`${M} -> audio no source!`),y(),void(y=()=>{});var S=jQuery("#"+M);let X=null!==(b=U.iteration)&&void 0!==b?b:0;if(X<0&&(y(),y=function(){}),!(S.data("audio-running")&&X<0)){S.data("audio-running",!0);var T=function(lt){lt.pause(),lt.remove(),S.data("audio-running",!1)},G=new Audio;return G.autoplay=!0,G.loop=0!=X,G.preload="auto",G.controls=!0,G.setAttributeNode(document.createAttribute("playsinline")),G.addEventListener("canplay",function(){var lt=G.play();lt&&lt.then(function(W){var tt;S.data("audio-running",!0),"time"==U.async?setTimeout(()=>{T(G),y(),y=()=>{}},1e3*(null!==(tt=U.time)&&void 0!==tt?tt:1)):"non-stop"==U.async&&(y(),y=()=>{})}).catch(function(W){S.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})})}),G.addEventListener("timeupdate",function(){switch(U.async){case"time":case"non-stop":break;case"finish-action":h.total>=2&&h.total-h.counter==1&&(T(this),y(),y=()=>{});break;default:case"change-node":x.nodeStatus!==L.$.nodeStatus&&(T(this),y(),y=()=>{});break;case"change-slide":x.slideStatus!==L.$.slideStatus&&(T(this),y(),y=()=>{})}}),G.addEventListener("canplaythrough",function(){this.loop&&(X>0?X--:0==X&&(this.loop=!1))}),G.addEventListener("play",function(){}),G.addEventListener("pause",function(){}),G.addEventListener("ended",function(){this.remove(),S.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})}),G.onerror=function(){this.remove(),S.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})},G.src=(null===(K=U.source)||void 0===K?void 0:K.url)||"",G}}},5973:(ue,Ct,f)=>{f.d(Ct,{F:()=>y});var L=f(4981),E=f(1690),ot=f(2336),M=f(861),U=f(157),h=f(4787),x=f(370);const y=(P,b,K,S)=>{var X,T,G;let lt={total:0,counter:0},{triggershow:W,triggerrun:tt,triggerhide:ft,action:pt,audio:ht,slide:nt,media:R}=null!==(X=null===(T=P.interactive)||void 0===T?void 0:T.click)&&void 0!==X?X:{};if(W){let{id:xt,ids:Vt,time:zt,async:dt}=W;"asynctrue"==dt?(0,h.L5)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K}):"time"==dt&&setTimeout(()=>{(0,h.L5)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})},1e3*(null!=zt?zt:0))}if(tt){let{id:xt,ids:Vt,time:zt,async:dt}=tt;"asynctrue"==dt?(0,h.Ar)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K}):"time"==dt&&setTimeout(()=>{(0,h.Ar)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})},1e3*(null!=zt?zt:0))}if(ft){let{id:xt,ids:Vt,time:zt,async:dt}=ft;"asynctrue"==dt?(0,h.WT)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K}):"time"==dt&&setTimeout(()=>{(0,h.WT)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})},1e3*(null!=zt?zt:0))}let Pt=()=>{setTimeout(()=>{if(lt.counter>=lt.total){if(S&&S(),W){let{id:xt,ids:Vt,async:zt}=W;"asyncfalse"==zt&&(0,h.L5)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})}if(tt){let{id:xt,ids:Vt,async:zt}=tt;"asyncfalse"==zt&&(0,h.Ar)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})}if(ft){let{id:xt,ids:Vt,async:zt}=ft;"asyncfalse"==zt&&(0,h.WT)({id:xt,ids:Vt,nodeStatus:b,slideStatus:K})}}})};if(null!=pt&&pt.value){lt.total+=1;let xt=()=>{lt.counter+=1,Pt()};switch(pt.value){case"hide":jQuery("#"+P.id).addClass("hide"),xt();break;case"points":{let{points:Vt,time:zt,iteration:dt,finish:et}=pt;Vt&&(0,M.G)(P.id,{points:Vt,time:zt,iteration:dt,finish:et,nodeStatus:b,slideStatus:K},xt);break}default:{let{value:Vt,time:zt,iteration:dt,finish:et}=pt;(0,ot.Q)(P.id,{value:Vt,time:zt,iteration:dt,finish:et,nodeStatus:b,slideStatus:K},xt);break}}}if(null!=ht&&null!==(G=ht.source)&&void 0!==G&&G.path){lt.total+=1;let xt=()=>{lt.counter+=1,Pt()};(0,U.R)(P.id,ht,lt,{nodeStatus:b,slideStatus:K},xt)}if(lt.total||Pt(),null!=nt&&nt.id)switch(console.log(`InteractiveNode #${P.id} slide(undefined,${nt.id},${nt.code}) success!`),nt.id){case-1:E.$.runSlide(E.$.slideIdx-1);break;case-2:E.$.runSlide(E.$.slideIdx+1);break;default:var Qt;E.$.runSlide(void 0,nt.id,null===(Qt=nt.code)||void 0===Qt?void 0:Qt.toString())}if(null!=R&&R.type){var Dt;let Vt=`<div class="popup-media-viewer"><iframe src="${(0,x.e)({readfileuploadurl:null===(Dt=L.icdt.config)||void 0===Dt?void 0:Dt.readfileuploadurl,type:null==R?void 0:R.type,oss:null==R?void 0:R.oss,path:null==R?void 0:R.path,pathExtract:null==R?void 0:R.pathExtract,url:null==R?void 0:R.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,zt=jQuery(Vt).appendTo(window.document.body);zt.find(".btn-close").click(function(dt){dt.preventDefault(),zt.remove()})}}},4787:(ue,Ct,f)=>{f.d(Ct,{Ar:()=>M,L5:()=>ot,WT:()=>U});var L=f(1690),E=f(5973);const ot=h=>{console.log("icdt_Run_Interactive_TriggerShow",h),h.id?jQuery("#"+h.id).removeClass("hide"):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).removeClass("hide")})},M=h=>{console.log("icdt_Run_Interactive_TriggerRun",h),h.id?(jQuery("#"+h.id).removeClass("hide"),(0,E.F)(L.$.findNode(h.id),h.nodeStatus,h.slideStatus)):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).removeClass("hide"),(0,E.F)(L.$.findNode(x),h.nodeStatus,h.slideStatus)})},U=h=>{console.log("icdt_Run_Interactive_TriggerHide",h),h.id?jQuery("#"+h.id).addClass("hide"):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).addClass("hide")})}},4080:(ue,Ct,f)=>{f.d(Ct,{Mh:()=>tt,wM:()=>ht,x_:()=>ft,it:()=>nt,g1:()=>xt,__:()=>R,QI:()=>Qt,DB:()=>Pt,eb:()=>pt,x0:()=>Zt,g$:()=>Vt,mo:()=>bt,XH:()=>_t,hJ:()=>zt,vl:()=>et,yD:()=>dt,Yw:()=>gt});var L=f(9054),M=/^#?[a-fA-F0-9]+$/;const x=(z,F)=>{var d;if("none"==(z=null!==(d=z)&&void 0!==d?d:""))return"none";if("transparent"==z)return"rgba(0,0,0,0)";if(z.includes("rgba("))return z;if(z.includes("rgb(")&&(z=((z,F)=>{if(!z)return"";let d=z.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),J=(d&&d[4]||"").trim(),ut=d?(256|d[1]).toString(16).slice(1)+(256|d[2]).toString(16).slice(1)+(256|d[3]).toString(16).slice(1):z;return"0"==J?"transparent":`#${ut}`})(z)),!(z=z.replace(/[^0-9a-fA-F]/g,"")))return"";if(!M.test(z))return console.error(`hex2rgba -> ${z}: first argument has invalid hexadecimal characters`),"";if("#"===z[0]&&(z=z.slice(1)),3===z.length){let ut=z.split("");ut.splice(2,0,z[2]),ut.splice(1,0,z[1]),ut.splice(0,0,z[0]),z=ut.join("")}if(6!==z.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var J=[parseInt(z.slice(0,2),16),parseInt(z.slice(2,4),16),parseInt(z.slice(4,6),16)];return F="number"==typeof F?F:parseFloat(F),J.push(F>=0&&F<=1?F:1),"rgba("+J.join(",")+")"};var y=f(1814),P=f(4981),b=f(3423),K=f(8054),S=f(7210),X=f(8619),T=f(1690),G=f(2875),lt=f(1687),W=f(370);class tt{constructor(F,d){let J=window.document.querySelector(d);var ut;J||(J=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(ut=window.document.querySelector(F))||void 0===ut||ut.appendChild(J));let{svgViewBox:ct,svgSize:St}=P.icdt.screen.init();J.setAttributeNS(null,"viewBox",`${ct.x} ${ct.y} ${ct.width} ${ct.height}`),J.setAttribute("id",d.replace("#","")),J.style.display="block",J.style.position="absolute",J.style.left=`${St.x}px`,J.style.top=`${St.y}px`,J.style.width=`${St.width}px`,J.style.height=`${St.height}px`,J.style.backgroundColor="#fafafa",J.style.cursor="default"}}const ft=z=>{var F,d,J,ut,ct,St;P.icdt.target.setAttributeNS(null,"viewBox",`${null!==(F=null==z||null===(d=z.svg)||void 0===d?void 0:d.viewBox.x)&&void 0!==F?F:0} ${null!==(J=null==z||null===(ut=z.svg)||void 0===ut?void 0:ut.viewBox.y)&&void 0!==J?J:0} ${null==z||null===(ct=z.svg)||void 0===ct?void 0:ct.viewBox.width} ${null==z||null===(St=z.svg)||void 0===St?void 0:St.viewBox.height}`),jQuery(P.icdt.target).find("#"+lt.O.BACKGROUND_GROUP).empty();let Nt=xt(lt.O.BACKGROUND_GROUP,"g",void 0,P.icdt.target);Zt(Nt,z),(()=>{let Lt=window.document.getElementById(null==z?void 0:z.id);jQuery(Lt).find("#"+lt.O.BACKGROUND_GROUP).empty();let Bt=xt(lt.O.BACKGROUND_GROUP,"g",void 0,Lt);Zt(Bt,z)})()},pt=()=>{let z=P.icdt.screen.svgViewBox,F=P.icdt.screen.svgSize;P.icdt.target&&(P.icdt.target.setAttributeNS(null,"viewBox",`${z.x} ${z.y} ${z.width} ${z.height}`),P.icdt.target.style.left=`${F.x}px`,P.icdt.target.style.top=`${F.y}px`,P.icdt.target.style.width=`${F.width}px`,P.icdt.target.style.height=`${F.height}px`)},ht=()=>{jQuery(P.icdt.target).find(">*:not(defs)").remove()},nt=(z,F,d,J,ut)=>{let ct;return z?(ct=jQuery(ut||P.icdt.target).find("#"+z).get(0),ct||(ct=window.document.createElementNS("http://www.w3.org/2000/svg",d),ct.setAttribute("id",z),jQuery(ct).appendTo(ut||P.icdt.target))):(ct=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(ct).appendTo(ut||P.icdt.target)),null!=J&&J.attribute&&R(ct,null==J?void 0:J.attribute),null!=J&&J.style&&Pt(ct,null==J?void 0:J.style),null!=J&&J.source&&Qt(ct,F,null==J?void 0:J.source),ct},R=(z,F)=>{return jQuery(z).attr((d=Object.assign({},F||{}),null===(J=Object.keys(d))||void 0===J||J.forEach(St=>{switch(St){case"fill":break;case"stroke":var Nt;Object.assign(d,{"stroke-width":null!==(Nt=d.strokeWidth)&&void 0!==Nt?Nt:null,strokeWidth:null});break;case"strokeLinecap":var Lt;Object.assign(d,{"stroke-linecap":null!==(Lt=d.strokeLinecap)&&void 0!==Lt?Lt:null,strokeLinecap:null});break;case"strokeLinejoin":var Bt;Object.assign(d,{"stroke-linejoin":null!==(Bt=d.strokeLinejoin)&&void 0!==Bt?Bt:null,strokeLinejoin:null});break;case"strokeDasharray":var Et;Object.assign(d,{"stroke-dasharray":null!==(Et=d.strokeDasharray)&&void 0!==Et?Et:null,strokeDasharray:null});break;case"strokeDasharrays":var mt,Xt;Object.assign(d,{"stroke-dasharray":null!==(mt=null===(Xt=d.strokeDasharrays)||void 0===Xt?void 0:Xt.join(" "))&&void 0!==mt?mt:null,strokeDasharrays:null});break;case"fontFamily":var Rt;Object.assign(d,{"font-family":null!==(Rt=d.fontFamily)&&void 0!==Rt?Rt:null,fontFamily:null});break;case"fontSize":var fe;Object.assign(d,{"font-size":null!==(fe=d.fontSize)&&void 0!==fe?fe:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"transformOrigin":var H;Object.assign(d,{"transform-origin":null!==(H=d.transformOrigin)&&void 0!==H?H:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?x(d.fill,null!==(ut=null==d?void 0:d.fillOpacity)&&void 0!==ut?ut:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?x(d.stroke,null!==(ct=null==d?void 0:d.strokeOpacity)&&void 0!==ct?ct:1):"rgba(0,0,0,0)",strokeOpacity:null}))),z;var d,J,ut,ct},Pt=(z,F)=>{return jQuery(z).css((d=Object.assign({},F||{}),null===(J=Object.keys(d))||void 0===J||J.forEach(ut=>{switch(ut){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var ct;Object.assign(d,d.borderWidth&&d.borderStyle&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle,"border-color":x(d.borderColor,null!==(ct=d.borderOpacity)&&void 0!==ct?ct:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var St;d.backgroundColor&&Object.assign(d,{"background-color":x(d.backgroundColor,null!==(St=d.backgroundOpacity)&&void 0!==St?St:1)}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),z;var d,J},Qt=(z,F,d)=>{switch(F){case L.$.TEXT:var J,ut;jQuery(z).text(null!==(J=null==d||null===(ut=d.text)||void 0===ut?void 0:ut.textContent)&&void 0!==J?J:"");break;case L.$.IMAGE:var ct,St,Nt,Lt,Bt,Et,mt;jQuery(z).attr("href",(null==d||null===(ct=d.image)||void 0===ct?void 0:ct.base64)||(null!=d&&null!==(St=d.image)&&void 0!==St&&St.path?`${null!==(Nt=null===(Lt=P.icdt.config)||void 0===Lt?void 0:Lt.readfileuploadurl)&&void 0!==Nt?Nt:""}${null!==(Bt=null==d||null===(Et=d.image)||void 0===Et?void 0:Et.path)&&void 0!==Bt?Bt:""}`:"")||(null==d||null===(mt=d.image)||void 0===mt?void 0:mt.url)||"");break;case L.$.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var Xt,Rt;if(null!==(Xt=d.text)&&void 0!==Xt&&Xt.variableKeywords&&null!==(Rt=d.text)&&void 0!==Rt&&Rt.variableKeywords.length){var fe;let m=P.icdt.variable.getKeys(),N=(null===(fe=d.text)||void 0===fe?void 0:fe.textContent)||"";d.text.variableKeywords.forEach(A=>{var Q=A.replace(/[^a-zA-Z0-9_]/gm,"");if(m.indexOf(Q)>=0){var $=P.icdt.variable.getValue(Q);N=N.replace(A,$)}}),jQuery(z).text(N)}else{var H;jQuery(z).text((null===(H=d.text)||void 0===H?void 0:H.textContent)||"")}break;case"html":{var c,V,at;let m=(null==d||null===(c=d.html)||void 0===c?void 0:c.htmlContent)||"";if(null!==(V=d.html)&&void 0!==V&&V.variableKeywords&&null!==(at=d.html)&&void 0!==at&&at.variableKeywords.length){let N=P.icdt.variable.getKeys();d.html.variableKeywords.forEach(A=>{var Q=A.replace(/[^a-zA-Z0-9_]/gm,"");if(N.indexOf(Q)>=0){var $=P.icdt.variable.getValue(Q);m=m.replace(A,$)}})}jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${m}</div>`).find("img[path],video[path],iframe[path]").each((N,A)=>{var Q,$,Z;A.setAttribute("src",(null!==(Q=null===($=P.icdt.config)||void 0===$?void 0:$.readfileuploadurl)&&void 0!==Q?Q:"")+(null!==(Z=A.getAttribute("path"))&&void 0!==Z?Z:"")),A.removeAttribute("path")});break}case"input":var O,j,D,q;if(null!==(O=d.input)&&void 0!==O&&O.input)jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(D=null===(q=d.input)||void 0===q?void 0:q.placeholder)&&void 0!==D?D:""}" maxlength="100" /></div>`);else if(null!==(j=d.input)&&void 0!==j&&j.textarea){var st,wt;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(st=null===(wt=d.input)||void 0===wt?void 0:wt.placeholder)&&void 0!==st?st:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Mt,kt,Kt,ee,Ut,Ft,$t;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Mt=d.image)||void 0===Mt?void 0:Mt.base64)||(null!==(kt=d.image)&&void 0!==kt&&kt.path?`${null!==(Kt=null===(ee=P.icdt.config)||void 0===ee?void 0:ee.readfileuploadurl)&&void 0!==Kt?Kt:""}${null!==(Ut=null===(Ft=d.image)||void 0===Ft?void 0:Ft.path)&&void 0!==Ut?Ut:""}`:"")||(null===($t=d.image)||void 0===$t?void 0:$t.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var he,re,le,pe,Ye,Ke,ii;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${null!==(he=d.iframe)&&void 0!==he&&he.path?`${null!==(re=null===(le=P.icdt.config)||void 0===le?void 0:le.readfileuploadurl)&&void 0!==re?re:""}${null!==(pe=null===(Ye=d.iframe)||void 0===Ye?void 0:Ye.path)&&void 0!==pe?pe:""}`:null!==(Ke=null===(ii=d.iframe)||void 0===ii?void 0:ii.url)&&void 0!==Ke?Ke:""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ni,fi,Me,ri,We,Je;let m=(0,W.e)({readfileuploadurl:null===(ni=P.icdt.config)||void 0===ni?void 0:ni.readfileuploadurl,type:null===(fi=d.embed)||void 0===fi?void 0:fi.type,oss:null===(Me=d.embed)||void 0===Me?void 0:Me.oss,path:null===(ri=d.embed)||void 0===ri?void 0:ri.path,pathExtract:null===(We=d.embed)||void 0===We?void 0:We.pathExtract,url:null===(Je=d.embed)||void 0===Je?void 0:Je.url});jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${m}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var li,ai;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(li=null===(ai=d.svg)||void 0===ai?void 0:ai.svgContent)&&void 0!==li?li:""}</div>`);break;case"test":{var qe,Ve,oi,yt;let m=(null==d||null===(qe=d.html)||void 0===qe?void 0:qe.htmlContent)||"";if(null!==(Ve=d.html)&&void 0!==Ve&&Ve.variableKeywords&&null!==(oi=d.html)&&void 0!==oi&&oi.variableKeywords.length){let N=P.icdt.variable.getKeys();d.html.variableKeywords.forEach(A=>{var Q=A.replace(/[^a-zA-Z0-9_]/gm,"");if(N.indexOf(Q)>=0){var $=P.icdt.variable.getValue(Q);m=m.replace(A,$)}})}switch(null==d||null===(yt=d.test)||void 0===yt?void 0:yt.type){case"matching-empty":jQuery(z).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching"></div>');break;case"matching-content":var k,i;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching"><div class="ondrag-item" data-key="${null!==(k=null==d||null===(i=d.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==k?k:"KIEN"}" style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"singlechoice":case"multichoice":jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"fill":var n;((null===(n=d.html)||void 0===n?void 0:n.fillKeywords)||[]).forEach(N=>{var A=`<input type="text" maxlength="128" style="display:inline-block;width:80px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:content-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:left;" data-key="${N.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;m=m.replace(new RegExp(N.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),A)}),jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:start;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"speech":jQuery(z).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var r,a,s,v,p,w,B;jQuery(z).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(r=null!==(a=null===(s=d.image)||void 0===s?void 0:s.url)&&void 0!==a?a:`${null!==(v=null===(p=P.icdt.config)||void 0===p?void 0:p.readfileuploadurl)&&void 0!==v?v:""}${null!==(w=null===(B=d.image)||void 0===B?void 0:B.path)&&void 0!==w?w:""}`)&&void 0!==r?r:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(z).find("img[path],video[path],iframe[path]").each((N,A)=>{var Q,$,Z;A.setAttribute("src",(null!==(Q=null===($=P.icdt.config)||void 0===$?void 0:$.readfileuploadurl)&&void 0!==Q?Q:"")+(null!==(Z=A.getAttribute("path"))&&void 0!==Z?Z:"")),A.removeAttribute("path")})}}}},xt=(z,F,d,J)=>{let ut=jQuery(J||P.icdt.target).find("#"+z).get(0);return ut||(ut=window.document.createElementNS("http://www.w3.org/2000/svg",F),ut.setAttribute("id",z),jQuery(ut).appendTo(J||P.icdt.target)),jQuery(ut).attr((null==d?void 0:d.attribute)||{}),jQuery(ut).css((null==d?void 0:d.style)||{}),ut},Vt=(z,F)=>{let d=(0,b.v)(2),J={fill:y.S3.fill,stroke:y.S3.stroke,"stroke-width":(0,b.v)(y.S3.strokeWidth)};return[{element:xt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:F.x-d,y:F.y-d,width:F.width+2*d,height:F.height+2*d},J)},z),posType:"rect-center"}]},zt=(z,F)=>{let{size:d}=F,J=(0,b.v)(1),ut=(0,b.v)(2),ct=(0,b.v)(5),St={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Nt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},Lt={fill:y.In.fill,stroke:y.In.stroke,"stroke-width":(0,b.v)(y.In.strokeWidth),width:(0,b.v)(y.In.width),height:(0,b.v)(y.In.height)};return xt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-J,y1:d.y,x2:d.x-J,y2:d.y+d.height},St)},z),xt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-J,x2:d.x+d.width,y2:d.y-J},St)},z),xt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+J,y1:d.y,x2:d.x+d.width+J,y2:d.y+d.height},St)},z),xt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+J,x2:d.x+d.width,y2:d.y+d.height+J},St)},z),[{element:xt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Nt),style:{cursor:"move"}},z),posType:"rect-center"},{element:xt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-ct,y:d.y-ct},Lt),style:{cursor:"nw-resize"}},z),posType:"rect-top-left"},{element:xt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-ut,y:d.y-ct},Lt),style:{cursor:"ne-resize"}},z),posType:"rect-top-right"},{element:xt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-ct,y:d.y+d.height-ut},Lt),style:{cursor:"sw-resize"}},z),posType:"rect-bottom-left"},{element:xt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-ut,y:d.y+d.height-ut},Lt),style:{cursor:"se-resize"}},z),posType:"rect-bottom-right"}]},dt=(z,F,d)=>{let J=(0,b.v)(1),ut={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ct={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},St={fill:y.dt.fill,stroke:y.dt.stroke,"stroke-width":(0,b.v)(y.dt.strokeWidth)},mt=(xt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:d.x-J,y1:d.y,x2:d.x-J,y2:d.y+d.height},ut)},z),xt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-J,x2:d.x+d.width,y2:d.y-J},ut)},z),xt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:d.x+d.width+J,y1:d.y,x2:d.x+d.width+J,y2:d.y+d.height},ut)},z),xt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+J,x2:d.x+d.width,y2:d.y+d.height+J},ut)},z),xt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},ct)},z));return F.forEach(Xt=>{let{size:Rt}=Xt;xt("icdt-temp-select-rect-node-"+Xt.id,"rect",{attribute:Object.assign({x:Rt.x,y:Rt.y,width:Rt.width,height:Rt.height},St)},z)}),[{element:mt,posType:"rect-center"}]},et=(z,F)=>{let d=(0,b.v)(1),J={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ut={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)};return xt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:F.x-d,y1:F.y,x2:F.x-d,y2:F.y+F.height},J)},z),xt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-d,x2:F.x+F.width,y2:F.y-d},J)},z),xt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:F.x+F.width+d,y1:F.y,x2:F.x+F.width+d,y2:F.y+F.height},J)},z),xt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+d,x2:F.x+F.width,y2:F.y+F.height+d},J)},z),[{element:xt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},ut)},z),posType:"rect-center"}]},_t=(z,F)=>{let d=(0,b.v)(-1),J={stroke:y.h8.stroke,"stroke-width":(0,b.v)(y.h8.strokeWidth),"stroke-linecap":y.h8.strokeLinecap,"stroke-dasharray":(0,b.v)(y.h8.strokeDasharray)},ut={fill:y.MA.fill};return xt("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:F.x-d,y1:F.y,x2:F.x-d,y2:F.y+F.height},J)},z),xt("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-d,x2:F.x+F.width,y2:F.y-d},J)},z),xt("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:F.x+F.width+d,y1:F.y,x2:F.x+F.width+d,y2:F.y+F.height},J)},z),xt("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+d,x2:F.x+F.width,y2:F.y+F.height+d},J)},z),xt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},ut)},z),[]},bt=(z,F)=>{let d={fill:y.k0.fill,stroke:y.k0.stroke,"stroke-width":(0,b.v)(y.k0.strokeWidth),"stroke-dasharray":(0,b.v)(y.k0.strokeDasharray)};jQuery(z).empty(),F.forEach(J=>{var ut,ct;let{size:St}=J;if(!J.idx)return;xt("icdt-temp-index-rect-node-"+J.id,"rect",{attribute:Object.assign({x:St.x-5,y:St.y-5,width:St.width+10,height:St.height+10},d)},z);let{element:Nt}=(0,G.e)(Math.ceil(1e9*Math.random()),{size:{x:St.x-76,y:St.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(ut=J.idx)&&void 0!==ut?ut:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(ct=J.time)&&void 0!==ct?ct:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},z);Nt.classList.add("node-input"),jQuery(Nt).on("change",'input[name="idx"]',Lt=>{var Bt;J.idx=parseInt(null!==(Bt=Lt.target.value)&&void 0!==Bt?Bt:"0")}).on("change",'input[name="time"]',Lt=>{var Bt;J.time=parseFloat(null!==(Bt=Lt.target.value)&&void 0!==Bt?Bt:"0")}).on("click",'button[name="remove"]',Lt=>{J.idx=0,J.time=null,bt(z,F)})})},Zt=(z,F)=>{var d,J,ut,ct;let{color:St,opacity:Nt,path:Lt,url:Bt,base64:Et}=null!==(d=null==F||null===(J=F.svg)||void 0===J?void 0:J.background)&&void 0!==d?d:{},{x:mt,y:Xt,width:Rt,height:fe}=null!==(ut=null==F||null===(ct=F.svg)||void 0===ct?void 0:ct.viewBox)&&void 0!==ut?ut:{x:0,y:0,width:0,height:0};(0,K.f)(void 0,{size:{x:mt,y:Xt,width:Rt,height:fe},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},z),St&&(0,K.f)(void 0,{size:{x:mt,y:Xt,width:Rt,height:fe},attribute:{fill:St,fillOpacity:Nt}},z),Lt&&(0,S.G)(void 0,{size:{x:mt,y:Xt,width:Rt,height:fe},source:{type:"image",image:{path:Lt,url:Bt,base64:Et}}},z)},gt=(z,F)=>{var d,J,Nt;if(jQuery(z).empty(),null!=F&&null!==(d=F.test)&&void 0!==d&&null!==(d=d.answer)&&void 0!==d&&d.singlechoice){var ct,St;let Lt=T.$.findNode(null==F||null===(ct=F.test)||void 0===ct||null===(ct=ct.answer)||void 0===ct||null===(ct=ct.singlechoice)||void 0===ct?void 0:ct.value),{x:Bt,y:Et,width:mt,height:Xt}=null!==(St=null==Lt?void 0:Lt.size)&&void 0!==St?St:{x:0,y:0,width:0,height:0};(0,X._)(Math.ceil(1e9*Math.random()),{size:{x:Bt-2,y:Et-2,width:mt+4,height:Xt+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},z)}null!=F&&null!==(J=F.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.multichoice&&(null==F||null===(Nt=F.test)||void 0===Nt||null===(Nt=Nt.answer)||void 0===Nt||Nt.multichoice.forEach(Lt=>{var Bt;let Et=T.$.findNode(Lt.value),{x:mt,y:Xt,width:Rt,height:fe}=null!==(Bt=null==Et?void 0:Et.size)&&void 0!==Bt?Bt:{x:0,y:0,width:0,height:0};(0,K.f)(Math.ceil(1e9*Math.random()),{size:{x:mt-2,y:Xt-2,width:Rt+4,height:fe+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},z)}))}},370:(ue,Ct,f)=>{f.d(Ct,{e:()=>ot});const ot=h=>{switch(null==h?void 0:h.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+h.readfileuploadurl+h.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+h.readfileuploadurl+h.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+h.readfileuploadurl+h.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+h.readfileuploadurl+h.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+h.readfileuploadurl+h.path;case 906:case 911:case 910:return""+h.readfileuploadurl+h.path;case 905:var x;return"imsmanifest.xml"==(null===(x=h.pathExtract)||void 0===x||null===(x=x.split("/"))||void 0===x?void 0:x.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+h.readfileuploadurl+h.pathExtract:""+h.readfileuploadurl+h.path;case 907:case 900:return""+h.readfileuploadurl+h.path;case 904:switch(h.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+h.url;case 1002:var y;return null!==(y=M(h.url))&&void 0!==y?y:"";case 1005:var P;return null!==(P=h.url)&&void 0!==P?P:"";default:var b;return null!==(b=h.url)&&void 0!==b?b:""}default:return""+h.readfileuploadurl+h.path}},M=h=>{let x=U(h);return x?"https://www.youtube.com/embed/"+x+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},U=h=>{let x=null==h?void 0:h.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return x&&x.length>=2?x[1]:null}},511:(ue,Ct,f)=>{function L(){}function E(t){return null==t?L:function(){return this.querySelector(t)}}function U(){return[]}function h(t){return null==t?U:function(){return this.querySelectorAll(t)}}function P(t){return function(){return this.matches(t)}}function b(t){return function(e){return e.matches(t)}}f.d(Ct,{$0Z:()=>la,jvg:()=>ra});var K=Array.prototype.find;function X(){return this.firstElementChild}var G=Array.prototype.filter;function lt(){return Array.from(this.children)}function pt(t){return new Array(t.length)}function nt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Pt(t,e,l,o,u,g){for(var C,_=0,I=e.length,it=g.length;_<it;++_)(C=e[_])?(C.__data__=g[_],o[_]=C):l[_]=new nt(t,g[_]);for(;_<I;++_)(C=e[_])&&(u[_]=C)}function Qt(t,e,l,o,u,g,_){var C,I,Ht,it=new Map,rt=e.length,At=g.length,It=new Array(rt);for(C=0;C<rt;++C)(I=e[C])&&(It[C]=Ht=_.call(I,I.__data__,C,e)+"",it.has(Ht)?u[C]=I:it.set(Ht,I));for(C=0;C<At;++C)Ht=_.call(t,g[C],C,g)+"",(I=it.get(Ht))?(o[C]=I,I.__data__=g[C],it.delete(Ht)):l[C]=new nt(t,g[C]);for(C=0;C<rt;++C)(I=e[C])&&it.get(It[C])===I&&(u[C]=I)}function Dt(t){return t.__data__}function Vt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Zt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}nt.prototype={constructor:nt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ct="http://www.w3.org/1999/xhtml";const St={svg:"http://www.w3.org/2000/svg",xhtml:ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nt(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),St.hasOwnProperty(e)?{space:St[e],local:t}:t}function Lt(t){return function(){this.removeAttribute(t)}}function Bt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Et(t,e){return function(){this.setAttribute(t,e)}}function mt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Rt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function H(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function c(t){return function(){this.style.removeProperty(t)}}function V(t,e,l){return function(){this.style.setProperty(t,e,l)}}function at(t,e,l){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,l)}}function j(t,e){return t.style.getPropertyValue(e)||H(t).getComputedStyle(t,null).getPropertyValue(e)}function D(t){return function(){delete this[t]}}function q(t,e){return function(){this[t]=e}}function st(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function Mt(t){return t.trim().split(/^|\s+/)}function kt(t){return t.classList||new Kt(t)}function Kt(t){this._node=t,this._names=Mt(t.getAttribute("class")||"")}function ee(t,e){for(var l=kt(t),o=-1,u=e.length;++o<u;)l.add(e[o])}function Ut(t,e){for(var l=kt(t),o=-1,u=e.length;++o<u;)l.remove(e[o])}function Ft(t){return function(){ee(this,t)}}function $t(t){return function(){Ut(this,t)}}function he(t,e){return function(){(e.apply(this,arguments)?ee:Ut)(this,t)}}function le(){this.textContent=""}function pe(t){return function(){this.textContent=t}}function Ye(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ii(){this.innerHTML=""}function ni(t){return function(){this.innerHTML=t}}function fi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ri(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ai(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===ct&&e.documentElement.namespaceURI===ct?e.createElement(t):e.createElementNS(l,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Nt(t);return(e.local?qe:ai)(e)}function yt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function B(t){return function(){var e=this.__on;if(e){for(var g,l=0,o=-1,u=e.length;l<u;++l)g=e[l],t.type&&g.type!==t.type||g.name!==t.name?e[++o]=g:this.removeEventListener(g.type,g.listener,g.options);++o?e.length=o:delete this.__on}}}function m(t,e,l){return function(){var u,o=this.__on,g=function p(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var _=0,C=o.length;_<C;++_)if((u=o[_]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=g,u.options=l),void(u.value=e);this.addEventListener(t.type,g,l),u={type:t.type,name:t.name,value:e,listener:g,options:l},o?o.push(u):this.__on=[u]}}function A(t,e,l){var o=H(t),u=o.CustomEvent;"function"==typeof u?u=new u(e,l):(u=o.document.createEvent("Event"),l?(u.initEvent(e,l.bubbles,l.cancelable),u.detail=l.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function Q(t,e){return function(){return A(this,t,e)}}function $(t,e){return function(){return A(this,t,e.apply(this,arguments))}}Kt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ae=[null];function ce(t,e){this._groups=t,this._parents=e}function ge(){return new ce([[document.documentElement]],ae)}ce.prototype=ge.prototype={constructor:ce,select:function ot(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var I,it,g=e[u],_=g.length,C=o[u]=new Array(_),rt=0;rt<_;++rt)(I=g[rt])&&(it=t.call(I,I.__data__,rt,g))&&("__data__"in I&&(it.__data__=I.__data__),C[rt]=it);return new ce(o,this._parents)},selectAll:function y(t){t="function"==typeof t?function x(t){return function(){return function M(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,l=e.length,o=[],u=[],g=0;g<l;++g)for(var I,_=e[g],C=_.length,it=0;it<C;++it)(I=_[it])&&(o.push(t.call(I,I.__data__,it,_)),u.push(I));return new ce(o,u)},selectChild:function T(t){return this.select(null==t?X:function S(t){return function(){return K.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function tt(t){return this.selectAll(null==t?lt:function W(t){return function(){return G.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function ft(t){"function"!=typeof t&&(t=P(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var I,g=e[u],_=g.length,C=o[u]=[],it=0;it<_;++it)(I=g[it])&&t.call(I,I.__data__,it,g)&&C.push(I);return new ce(o,this._parents)},data:function xt(t,e){if(!arguments.length)return Array.from(this,Dt);var l=e?Qt:Pt,o=this._parents,u=this._groups;"function"!=typeof t&&(t=function R(t){return function(){return t}}(t));for(var g=u.length,_=new Array(g),C=new Array(g),I=new Array(g),it=0;it<g;++it){var rt=o[it],At=u[it],It=At.length,Ht=Vt(t.call(rt,rt&&rt.__data__,it,o)),me=Ht.length,xe=C[it]=new Array(me),Tt=_[it]=new Array(me);l(rt,At,xe,Tt,I[it]=new Array(It),Ht,e);for(var oe,ve,te=0,Jt=0;te<me;++te)if(oe=xe[te]){for(te>=Jt&&(Jt=te+1);!(ve=Tt[Jt])&&++Jt<me;);oe._next=ve||null}}return(_=new ce(_,o))._enter=C,_._exit=I,_},enter:function ht(){return new ce(this._enter||this._groups.map(pt),this._parents)},exit:function zt(){return new ce(this._exit||this._groups.map(pt),this._parents)},join:function dt(t,e,l){var o=this.enter(),u=this,g=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(u=e(u))&&(u=u.selection()),null==l?g.remove():l(g),o&&u?o.merge(u).order():u},merge:function et(t){for(var e=t.selection?t.selection():t,l=this._groups,o=e._groups,u=l.length,_=Math.min(u,o.length),C=new Array(u),I=0;I<_;++I)for(var Ht,it=l[I],rt=o[I],At=it.length,It=C[I]=new Array(At),me=0;me<At;++me)(Ht=it[me]||rt[me])&&(It[me]=Ht);for(;I<u;++I)C[I]=l[I];return new ce(C,this._parents)},selection:function we(){return this},order:function _t(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var _,o=t[e],u=o.length-1,g=o[u];--u>=0;)(_=o[u])&&(g&&4^_.compareDocumentPosition(g)&&g.parentNode.insertBefore(_,g),g=_);return this},sort:function bt(t){function e(At,It){return At&&It?t(At.__data__,It.__data__):!At-!It}t||(t=Zt);for(var l=this._groups,o=l.length,u=new Array(o),g=0;g<o;++g){for(var it,_=l[g],C=_.length,I=u[g]=new Array(C),rt=0;rt<C;++rt)(it=_[rt])&&(I[rt]=it);I.sort(e)}return new ce(u,this._parents).order()},call:function gt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function z(){return Array.from(this)},node:function F(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var o=t[e],u=0,g=o.length;u<g;++u){var _=o[u];if(_)return _}return null},size:function d(){let t=0;for(const e of this)++t;return t},empty:function J(){return!this.node()},each:function ut(t){for(var e=this._groups,l=0,o=e.length;l<o;++l)for(var C,u=e[l],g=0,_=u.length;g<_;++g)(C=u[g])&&t.call(C,C.__data__,g,u);return this},attr:function fe(t,e){var l=Nt(t);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((null==e?l.local?Bt:Lt:"function"==typeof e?l.local?Rt:Xt:l.local?mt:Et)(l,e))},style:function O(t,e,l){return arguments.length>1?this.each((null==e?c:"function"==typeof e?at:V)(t,e,null==l?"":l)):j(this.node(),t)},property:function wt(t,e){return arguments.length>1?this.each((null==e?D:"function"==typeof e?st:q)(t,e)):this.node()[t]},classed:function re(t,e){var l=Mt(t+"");if(arguments.length<2){for(var o=kt(this.node()),u=-1,g=l.length;++u<g;)if(!o.contains(l[u]))return!1;return!0}return this.each(("function"==typeof e?he:e?Ft:$t)(l,e))},text:function Ke(t){return arguments.length?this.each(null==t?le:("function"==typeof t?Ye:pe)(t)):this.node().textContent},html:function Me(t){return arguments.length?this.each(null==t?ii:("function"==typeof t?fi:ni)(t)):this.node().innerHTML},raise:function We(){return this.each(ri)},lower:function li(){return this.each(Je)},append:function oi(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function k(t,e){var l="function"==typeof t?t:Ve(t),o=null==e?yt:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function s(t){return this.select(t?a:r)},datum:function v(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function N(t,e,l){var u,_,o=function w(t){return t.trim().split(/^|\s+/).map(function(e){var l="",o=e.indexOf(".");return o>=0&&(l=e.slice(o+1),e=e.slice(0,o)),{type:e,name:l}})}(t+""),g=o.length;if(!(arguments.length<2)){for(C=e?m:B,u=0;u<g;++u)this.each(C(o[u],e,l));return this}var C=this.node().__on;if(C)for(var rt,I=0,it=C.length;I<it;++I)for(u=0,rt=C[I];u<g;++u)if((_=o[u]).type===rt.type&&_.name===rt.name)return rt.value},dispatch:function Z(t,e){return this.each(("function"==typeof e?$:Q)(t,e))},[Symbol.iterator]:function*Wt(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var _,o=t[e],u=0,g=o.length;u<g;++u)(_=o[u])&&(yield _)}};const ye=ge;var Ee={value:()=>{}};function fn(){for(var o,t=0,e=arguments.length,l={};t<e;++t){if(!(o=arguments[t]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new Ni(l)}function Ni(t){this._=t}function lr(t,e){for(var u,l=0,o=t.length;l<o;++l)if((u=t[l]).name===e)return u.value}function vn(t,e,l){for(var o=0,u=t.length;o<u;++o)if(t[o].name===e){t[o]=Ee,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=l&&t.push({name:e,value:l}),t}Ni.prototype=fn.prototype={constructor:Ni,on:function(t,e){var u,l=this._,o=function rr(t,e){return t.trim().split(/^|\s+/).map(function(l){var o="",u=l.indexOf(".");if(u>=0&&(o=l.slice(u+1),l=l.slice(0,u)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}(t+"",l),g=-1,_=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++g<_;)if(u=(t=o[g]).type)l[u]=vn(l[u],t.name,e);else if(null==e)for(u in l)l[u]=vn(l[u],t.name,null);return this}for(;++g<_;)if((u=(t=o[g]).type)&&(u=lr(l[u],t.name)))return u},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Ni(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var u,g,l=new Array(u),o=0;o<u;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,u=(g=this._[t]).length;o<u;++o)g[o].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],u=0,g=o.length;u<g;++u)o[u].value.apply(e,l)}};const ar=fn;var Pi,Ei,vi=0,bi=0,xi=0,gn=1e3,Ri=0,si=0,Li=0,Oi="object"==typeof performance&&performance.now?performance:Date,yn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zi(){return si||(yn(or),si=Oi.now()+Li)}function or(){si=0}function Di(){this._call=this._time=this._next=null}function pn(t,e,l){var o=new Di;return o.restart(t,e,l),o}function mn(){si=(Ri=Oi.now())+Li,vi=bi=0;try{!function sr(){Zi(),++vi;for(var e,t=Pi;t;)(e=si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vi}()}finally{vi=0,function ur(){for(var t,l,e=Pi,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Pi=l);Ei=t,Xi(o)}(),si=0}}function dr(){var t=Oi.now(),e=t-Ri;e>gn&&(Li-=e,Ri=t)}function Xi(t){vi||(bi&&(bi=clearTimeout(bi)),t-si>24?(t<1/0&&(bi=setTimeout(mn,t-Oi.now()-Li)),xi&&(xi=clearInterval(xi))):(xi||(Ri=Oi.now(),xi=setInterval(dr,gn)),vi=1,yn(mn)))}function _n(t,e,l){var o=new Di;return o.restart(u=>{o.stop(),t(u+e)},e=null==e?0:+e,l),o}Di.prototype=pn.prototype={constructor:Di,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Zi():+l)+(null==e?0:+e),!this._next&&Ei!==this&&(Ei?Ei._next=this:Pi=this,Ei=this),this._call=t,this._time=l,Xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xi())}};var hr=ar("start","end","cancel","interrupt"),cr=[],wn=0,ji=3;function zi(t,e,l,o,u,g){var _=t.__transition;if(_){if(l in _)return}else t.__transition={};!function fr(t,e,l){var u,o=t.__transition;function _(it){var rt,At,It,Ht;if(1!==l.state)return I();for(rt in o)if((Ht=o[rt]).name===l.name){if(Ht.state===ji)return _n(_);4===Ht.state?(Ht.state=6,Ht.timer.stop(),Ht.on.call("interrupt",t,t.__data__,Ht.index,Ht.group),delete o[rt]):+rt<e&&(Ht.state=6,Ht.timer.stop(),Ht.on.call("cancel",t,t.__data__,Ht.index,Ht.group),delete o[rt])}if(_n(function(){l.state===ji&&(l.state=4,l.timer.restart(C,l.delay,l.time),C(it))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=ji,u=new Array(It=l.tween.length),rt=0,At=-1;rt<It;++rt)(Ht=l.tween[rt].value.call(t,t.__data__,l.index,l.group))&&(u[++At]=Ht);u.length=At+1}}function C(it){for(var rt=it<l.duration?l.ease.call(null,it/l.duration):(l.timer.restart(I),l.state=5,1),At=-1,It=u.length;++At<It;)u[At].call(t,rt);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),I())}function I(){for(var it in l.state=6,l.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=l,l.timer=pn(function g(it){l.state=1,l.timer.restart(_,l.delay,l.time),l.delay<=it&&_(it-l.delay)},0,l.time)}(t,l,{name:e,index:o,group:u,on:hr,tween:cr,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:wn})}function qi(t,e){var l=Ue(t,e);if(l.state>wn)throw new Error("too late; already scheduled");return l}function Fe(t,e){var l=Ue(t,e);if(l.state>ji)throw new Error("too late; already running");return l}function Ue(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ti(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Ki,En=180/Math.PI,tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function On(t,e,l,o,u,g){var _,C,I;return(_=Math.sqrt(t*t+e*e))&&(t/=_,e/=_),(I=t*l+e*o)&&(l-=t*I,o-=e*I),(C=Math.sqrt(l*l+o*o))&&(l/=C,o/=C,I/=C),t*o<e*l&&(t=-t,e=-e,I=-I,_=-_),{translateX:u,translateY:g,rotate:Math.atan2(e,t)*En,skewX:Math.atan(I)*En,scaleX:_,scaleY:C}}function Sn(t,e,l,o){function u(it){return it.length?it.pop()+" ":""}return function(it,rt){var At=[],It=[];return it=t(it),rt=t(rt),function g(it,rt,At,It,Ht,me){if(it!==At||rt!==It){var xe=Ht.push("translate(",null,e,null,l);me.push({i:xe-4,x:ti(it,At)},{i:xe-2,x:ti(rt,It)})}else(At||It)&&Ht.push("translate("+At+e+It+l)}(it.translateX,it.translateY,rt.translateX,rt.translateY,At,It),function _(it,rt,At,It){it!==rt?(it-rt>180?rt+=360:rt-it>180&&(it+=360),It.push({i:At.push(u(At)+"rotate(",null,o)-2,x:ti(it,rt)})):rt&&At.push(u(At)+"rotate("+rt+o)}(it.rotate,rt.rotate,At,It),function C(it,rt,At,It){it!==rt?It.push({i:At.push(u(At)+"skewX(",null,o)-2,x:ti(it,rt)}):rt&&At.push(u(At)+"skewX("+rt+o)}(it.skewX,rt.skewX,At,It),function I(it,rt,At,It,Ht,me){if(it!==At||rt!==It){var xe=Ht.push(u(Ht)+"scale(",null,",",null,")");me.push({i:xe-4,x:ti(it,At)},{i:xe-2,x:ti(rt,It)})}else(1!==At||1!==It)&&Ht.push(u(Ht)+"scale("+At+","+It+")")}(it.scaleX,it.scaleY,rt.scaleX,rt.scaleY,At,It),it=rt=null,function(Ht){for(var Tt,me=-1,xe=It.length;++me<xe;)At[(Tt=It[me]).i]=Tt.x(Ht);return At.join("")}}}var mr=Sn(function yr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tn:On(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),_r=Sn(function pr(t){return null!=t&&(Ki||(Ki=document.createElementNS("http://www.w3.org/2000/svg","g")),Ki.setAttribute("transform",t),t=Ki.transform.baseVal.consolidate())?On((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):tn},", ",")",")");function wr(t,e){var l,o;return function(){var u=Fe(this,t),g=u.tween;if(g!==l)for(var _=0,C=(o=l=g).length;_<C;++_)if(o[_].name===e){(o=o.slice()).splice(_,1);break}u.tween=o}}function br(t,e,l){var o,u;if("function"!=typeof l)throw new Error;return function(){var g=Fe(this,t),_=g.tween;if(_!==o){u=(o=_).slice();for(var C={name:e,value:l},I=0,it=u.length;I<it;++I)if(u[I].name===e){u[I]=C;break}I===it&&u.push(C)}g.tween=u}}function en(t,e,l){var o=t._id;return t.each(function(){var u=Fe(this,o);(u.value||(u.value={}))[e]=l.apply(this,arguments)}),function(u){return Ue(u,o).value[e]}}function nn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function kn(t,e){var l=Object.create(t.prototype);for(var o in e)l[o]=e[o];return l}function Si(){}var Wi=1/.7,gi="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Er=/^#([0-9a-f]{3,8})$/,Or=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),Sr=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),kr=new RegExp(`^rgba\\(${gi},${gi},${gi},${Mi}\\)$`),Mr=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${Mi}\\)$`),Tr=new RegExp(`^hsl\\(${Mi},${Qe},${Qe}\\)$`),Cr=new RegExp(`^hsla\\(${Mi},${Qe},${Qe},${Mi}\\)$`),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Tn(){return this.rgb().formatHex()}function Cn(){return this.rgb().formatRgb()}function Ti(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Er.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?An(e):3===l?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Ui(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Ui(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Or.exec(t))?new Le(e[1],e[2],e[3],1):(e=Sr.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=kr.exec(t))?Ui(e[1],e[2],e[3],e[4]):(e=Mr.exec(t))?Ui(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Tr.exec(t))?Pn(e[1],e[2]/100,e[3]/100,1):(e=Cr.exec(t))?Pn(e[1],e[2]/100,e[3]/100,e[4]):Mn.hasOwnProperty(t)?An(Mn[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function An(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Ui(t,e,l,o){return o<=0&&(t=e=l=NaN),new Le(t,e,l,o)}function Gi(t,e,l,o){return 1===arguments.length?function Nr(t){return t instanceof Si||(t=Ti(t)),t?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}(t):new Le(t,e,l,null==o?1:o)}function Le(t,e,l,o){this.r=+t,this.g=+e,this.b=+l,this.opacity=+o}function In(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function Nn(){const t=Fi(this.opacity);return`${1===t?"rgb(":"rgba("}${di(this.r)}, ${di(this.g)}, ${di(this.b)}${1===t?")":`, ${t})`}`}function Fi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function di(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ui(t){return((t=di(t))<16?"0":"")+t.toString(16)}function Pn(t,e,l,o){return o<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,l,o)}function Rn(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof Si||(t=Ti(t)),!t)return new Ge;if(t instanceof Ge)return t;var e=(t=t.rgb()).r/255,l=t.g/255,o=t.b/255,u=Math.min(e,l,o),g=Math.max(e,l,o),_=NaN,C=g-u,I=(g+u)/2;return C?(_=e===g?(l-o)/C+6*(l<o):l===g?(o-e)/C+2:(e-l)/C+4,C/=I<.5?g+u:2-g-u,_*=60):C=I>0&&I<1?0:_,new Ge(_,C,I,t.opacity)}function Ge(t,e,l,o){this.h=+t,this.s=+e,this.l=+l,this.opacity=+o}function Ln(t){return(t=(t||0)%360)<0?t+360:t}function Qi(t){return Math.max(0,Math.min(1,t||0))}function rn(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function Dn(t,e,l,o,u){var g=t*t,_=g*t;return((1-3*t+3*g-_)*e+(4-6*g+3*_)*l+(1+3*t+3*g-3*_)*o+_*u)/6}nn(Si,Ti,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tn,formatHex:Tn,formatHex8:function Ar(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Rn(this).formatHsl()},formatRgb:Cn,toString:Cn}),nn(Le,Gi,kn(Si,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(di(this.r),di(this.g),di(this.b),Fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Pr(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Nn,toString:Nn})),nn(Ge,function Rr(t,e,l,o){return 1===arguments.length?Rn(t):new Ge(t,e,l,null==o?1:o)},kn(Si,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,o=l+(l<.5?l:1-l)*e,u=2*l-o;return new Le(rn(t>=240?t-240:t+120,u,o),rn(t,u,o),rn(t<120?t+240:t-120,u,o),this.opacity)},clamp(){return new Ge(Ln(this.h),Qi(this.s),Qi(this.l),Fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fi(this.opacity);return`${1===t?"hsl(":"hsla("}${Ln(this.h)}, ${100*Qi(this.s)}%, ${100*Qi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function zn(t,e){var l=e-t;return l?function Bn(t,e){return function(l){return t+l*e}}(t,l):jn(isNaN(t)?e:t)}const Kn=function t(e){var l=function Br(t){return 1==(t=+t)?zn:function(e,l){return l-e?function jr(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(o){return Math.pow(t+o*e,l)}}(e,l,t):jn(isNaN(e)?l:e)}}(e);function o(u,g){var _=l((u=Gi(u)).r,(g=Gi(g)).r),C=l(u.g,g.g),I=l(u.b,g.b),it=zn(u.opacity,g.opacity);return function(rt){return u.r=_(rt),u.g=C(rt),u.b=I(rt),u.opacity=it(rt),u+""}}return o.gamma=t,o}(1);function Wn(t){return function(e){var _,C,l=e.length,o=new Array(l),u=new Array(l),g=new Array(l);for(_=0;_<l;++_)C=Gi(e[_]),o[_]=C.r||0,u[_]=C.g||0,g[_]=C.b||0;return o=t(o),u=t(u),g=t(g),C.opacity=1,function(I){return C.r=o(I),C.g=u(I),C.b=g(I),C+""}}}Wn(function Lr(t){var e=t.length-1;return function(l){var o=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),u=t[o],g=t[o+1];return Dn((l-o/e)*e,o>0?t[o-1]:2*u-g,u,g,o<e-1?t[o+2]:2*g-u)}}),Wn(function Dr(t){var e=t.length;return function(l){var o=Math.floor(((l%=1)<0?++l:l)*e);return Dn((l-o/e)*e,t[(o+e-1)%e],t[o%e],t[(o+1)%e],t[(o+2)%e])}});var ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,an=new RegExp(ln.source,"g");function Wr(t,e){var o,u,g,l=ln.lastIndex=an.lastIndex=0,_=-1,C=[],I=[];for(t+="",e+="";(o=ln.exec(t))&&(u=an.exec(e));)(g=u.index)>l&&(g=e.slice(l,g),C[_]?C[_]+=g:C[++_]=g),(o=o[0])===(u=u[0])?C[_]?C[_]+=u:C[++_]=u:(C[++_]=null,I.push({i:_,x:ti(o,u)})),l=an.lastIndex;return l<e.length&&(g=e.slice(l),C[_]?C[_]+=g:C[++_]=g),C.length<2?I[0]?function Kr(t){return function(e){return t(e)+""}}(I[0].x):function zr(t){return function(){return t}}(e):(e=I.length,function(it){for(var At,rt=0;rt<e;++rt)C[(At=I[rt]).i]=At.x(it);return C.join("")})}function Un(t,e){var l;return("number"==typeof e?ti:e instanceof Ti?Kn:(l=Ti(e))?(e=l,Kn):Wr)(t,e)}function Ur(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fr(t,e,l){var o,g,u=l+"";return function(){var _=this.getAttribute(t);return _===u?null:_===o?g:g=e(o=_,l)}}function Qr(t,e,l){var o,g,u=l+"";return function(){var _=this.getAttributeNS(t.space,t.local);return _===u?null:_===o?g:g=e(o=_,l)}}function Hr(t,e,l){var o,u,g;return function(){var _,I,C=l(this);return null==C?void this.removeAttribute(t):(_=this.getAttribute(t))===(I=C+"")?null:_===o&&I===u?g:(u=I,g=e(o=_,C))}}function Jr(t,e,l){var o,u,g;return function(){var _,I,C=l(this);return null==C?void this.removeAttributeNS(t.space,t.local):(_=this.getAttributeNS(t.space,t.local))===(I=C+"")?null:_===o&&I===u?g:(u=I,g=e(o=_,C))}}function $r(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Xr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,g)),l}return u._value=e,u}function Yr(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Zr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,g)),l}return u._value=e,u}function tl(t,e){return function(){qi(this,t).delay=+e.apply(this,arguments)}}function el(t,e){return e=+e,function(){qi(this,t).delay=e}}function nl(t,e){return function(){Fe(this,t).duration=+e.apply(this,arguments)}}function rl(t,e){return e=+e,function(){Fe(this,t).duration=e}}var _l=ye.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function Ze(t,e,l,o){this._groups=t,this._parents=e,this._name=l,this._id=o}function Fn(){return++jl}var Xe=ye.prototype;Ze.prototype=function Bl(t){return ye().transition(t)}.prototype={constructor:Ze,select:function pl(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=E(t));for(var o=this._groups,u=o.length,g=new Array(u),_=0;_<u;++_)for(var rt,At,C=o[_],I=C.length,it=g[_]=new Array(I),It=0;It<I;++It)(rt=C[It])&&(At=t.call(rt,rt.__data__,It,C))&&("__data__"in rt&&(At.__data__=rt.__data__),it[It]=At,zi(it[It],e,l,It,it,Ue(rt,l)));return new Ze(g,this._parents,e,l)},selectAll:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=h(t));for(var o=this._groups,u=o.length,g=[],_=[],C=0;C<u;++C)for(var rt,I=o[C],it=I.length,At=0;At<it;++At)if(rt=I[At]){for(var Ht,It=t.call(rt,rt.__data__,At,I),me=Ue(rt,l),xe=0,Tt=It.length;xe<Tt;++xe)(Ht=It[xe])&&zi(Ht,e,l,xe,It,me);g.push(It),_.push(rt)}return new Ze(g,_,e,l)},selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:function ul(t){"function"!=typeof t&&(t=P(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var I,g=e[u],_=g.length,C=o[u]=[],it=0;it<_;++it)(I=g[it])&&t.call(I,I.__data__,it,g)&&C.push(I);return new Ze(o,this._parents,this._name,this._id)},merge:function hl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,o=e.length,g=Math.min(o,l.length),_=new Array(o),C=0;C<g;++C)for(var It,I=e[C],it=l[C],rt=I.length,At=_[C]=new Array(rt),Ht=0;Ht<rt;++Ht)(It=I[Ht]||it[Ht])&&(At[Ht]=It);for(;C<o;++C)_[C]=e[C];return new Ze(_,this._parents,this._name,this._id)},selection:function wl(){return new _l(this._groups,this._parents)},transition:function Ll(){for(var t=this._name,e=this._id,l=Fn(),o=this._groups,u=o.length,g=0;g<u;++g)for(var I,_=o[g],C=_.length,it=0;it<C;++it)if(I=_[it]){var rt=Ue(I,e);zi(I,t,l,it,_,{time:rt.time+rt.delay+rt.duration,delay:0,duration:rt.duration,ease:rt.ease})}return new Ze(o,this._parents,t,l)},call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:function vl(t,e){var l=this._id;return arguments.length<2?Ue(this.node(),l).on.on(t):this.each(function fl(t,e,l){var o,u,g=function cl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?qi:Fe;return function(){var _=g(this,t),C=_.on;C!==o&&(u=(o=C).copy()).on(e,l),_.on=u}}(l,t,e))},attr:function Vr(t,e){var l=Nt(t),o="transform"===l?_r:Un;return this.attrTween(t,"function"==typeof e?(l.local?Jr:Hr)(l,o,en(this,"attr."+t,e)):null==e?(l.local?Gr:Ur)(l):(l.local?Qr:Fr)(l,o,e))},attrTween:function qr(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var o=Nt(t);return this.tween(l,(o.local?$r:Yr)(o,e))},style:function Sl(t,e,l){var o="transform"==(t+="")?mr:Un;return null==e?this.styleTween(t,function bl(t,e){var l,o,u;return function(){var g=j(this,t),_=(this.style.removeProperty(t),j(this,t));return g===_?null:g===l&&_===o?u:u=e(l=g,o=_)}}(t,o)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function El(t,e,l){var o,u,g;return function(){var _=j(this,t),C=l(this),I=C+"";return null==C&&(this.style.removeProperty(t),I=C=j(this,t)),_===I?null:_===o&&I===u?g:(u=I,g=e(o=_,C))}}(t,o,en(this,"style."+t,e))).each(function Ol(t,e){var l,o,u,C,g="style."+e,_="end."+g;return function(){var I=Fe(this,t),it=I.on,rt=null==I.value[g]?C||(C=Gn(e)):void 0;(it!==l||u!==rt)&&(o=(l=it).copy()).on(_,u=rt),I.on=o}}(this._id,t)):this.styleTween(t,function xl(t,e,l){var o,g,u=l+"";return function(){var _=j(this,t);return _===u?null:_===o?g:g=e(o=_,l)}}(t,o,e),l).on("end.style."+t,null)},styleTween:function Tl(t,e,l){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function Ml(t,e,l){var o,u;function g(){var _=e.apply(this,arguments);return _!==u&&(o=(u=_)&&function kl(t,e,l){return function(o){this.style.setProperty(t,e.call(this,o),l)}}(t,_,l)),o}return g._value=e,g}(t,e,null==l?"":l))},text:function Il(t){return this.tween("text","function"==typeof t?function Al(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(en(this,"text",t)):function Cl(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Rl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Pl(t){var e,l;function o(){var u=t.apply(this,arguments);return u!==l&&(e=(l=u)&&function Nl(t){return function(e){this.textContent=t.call(this,e)}}(u)),e}return o._value=t,o}(t))},remove:function yl(){return this.on("end.remove",function gl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function xr(t,e){var l=this._id;if(t+="",arguments.length<2){for(var _,o=Ue(this.node(),l).tween,u=0,g=o.length;u<g;++u)if((_=o[u]).name===t)return _.value;return null}return this.each((null==e?wr:br)(l,t,e))},delay:function il(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?tl:el)(e,t)):Ue(this.node(),e).delay},duration:function ll(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?nl:rl)(e,t)):Ue(this.node(),e).duration},ease:function ol(t){var e=this._id;return arguments.length?this.each(function al(t,e){if("function"!=typeof e)throw new Error;return function(){Fe(this,t).ease=e}}(e,t)):Ue(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function sl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;Fe(this,t).ease=l}}(this._id,t))},end:function Dl(){var t,e,l=this,o=l._id,u=l.size();return new Promise(function(g,_){var C={value:_},I={value:function(){0==--u&&g()}};l.each(function(){var it=Fe(this,o),rt=it.on;rt!==t&&((e=(t=rt).copy())._.cancel.push(C),e._.interrupt.push(C),e._.end.push(I)),it.on=e}),0===u&&g()})},[Symbol.iterator]:Xe[Symbol.iterator]};var Kl={time:null,delay:0,duration:250,ease:function zl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Wl(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}ye.prototype.interrupt=function gr(t){return this.each(function(){!function vr(t,e){var o,u,_,l=t.__transition,g=!0;if(l){for(_ in e=null==e?null:e+"",l)(o=l[_]).name===e?(u=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(u?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete l[_]):g=!1;g&&delete t.__transition}}(this,t)})},ye.prototype.transition=function Ul(t){var e,l;t instanceof Ze?(e=t._id,t=t._name):(e=Fn(),(l=Kl).time=Zi(),t=null==t?null:t+"");for(var o=this._groups,u=o.length,g=0;g<u;++g)for(var I,_=o[g],C=_.length,it=0;it<C;++it)(I=_[it])&&zi(I,t,e,it,_,l||Wl(I,e));return new Ze(o,this._parents,t,e)};Math;function Ci(t){return{type:t}}function mi(t){return function(){return t}}function Xn(t){this._context=t}function $l(t){return new Xn(t)}["w","e"].map(Ci),["n","s"].map(Ci),["n","w","e","s","nw","ne","sw","se"].map(Ci),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const hn=Math.PI,cn=2*hn,hi=1e-6,Yl=cn-hi;function $n(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Vi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function ql(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const l=10**e;return function(o){this._+=o[0];for(let u=1,g=o.length;u<g;++u)this._+=Math.round(arguments[u]*l)/l+o[u]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,o,u){this._append`Q${+e},${+l},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(e,l,o,u,g,_){this._append`C${+e},${+l},${+o},${+u},${this._x1=+g},${this._y1=+_}`}arcTo(e,l,o,u,g){if(e=+e,l=+l,o=+o,u=+u,(g=+g)<0)throw new Error(`negative radius: ${g}`);let _=this._x1,C=this._y1,I=o-e,it=u-l,rt=_-e,At=C-l,It=rt*rt+At*At;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(It>hi)if(Math.abs(At*I-it*rt)>hi&&g){let Ht=o-_,me=u-C,xe=I*I+it*it,Tt=Ht*Ht+me*me,Ot=Math.sqrt(xe),te=Math.sqrt(It),Jt=g*Math.tan((hn-Math.acos((xe+It-Tt)/(2*Ot*te)))/2),oe=Jt/te,ve=Jt/Ot;Math.abs(oe-1)>hi&&this._append`L${e+oe*rt},${l+oe*At}`,this._append`A${g},${g},0,0,${+(At*Ht>rt*me)},${this._x1=e+ve*I},${this._y1=l+ve*it}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,o,u,g,_){if(e=+e,l=+l,_=!!_,(o=+o)<0)throw new Error(`negative radius: ${o}`);let C=o*Math.cos(u),I=o*Math.sin(u),it=e+C,rt=l+I,At=1^_,It=_?u-g:g-u;null===this._x1?this._append`M${it},${rt}`:(Math.abs(this._x1-it)>hi||Math.abs(this._y1-rt)>hi)&&this._append`L${it},${rt}`,o&&(It<0&&(It=It%cn+cn),It>Yl?this._append`A${o},${o},0,1,${At},${e-C},${l-I}A${o},${o},0,1,${At},${this._x1=it},${this._y1=rt}`:It>hi&&this._append`A${o},${o},0,${+(It>=hn)},${At},${this._x1=e+o*Math.cos(g)},${this._y1=l+o*Math.sin(g)}`)}rect(e,l,o,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}}function ia(t){return t[0]}function na(t){return t[1]}function ra(t,e){var l=mi(!0),o=null,u=$l,g=null,_=function ea(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const o=Math.floor(l);if(!(o>=0))throw new RangeError(`invalid digits: ${l}`);e=o}return t},()=>new Vi(e)}(C);function C(I){var it,At,Ht,rt=(I=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(I)).length,It=!1;for(null==o&&(g=u(Ht=_())),it=0;it<=rt;++it)!(it<rt&&l(At=I[it],it,I))===It&&((It=!It)?g.lineStart():g.lineEnd()),It&&g.point(+t(At,it,I),+e(At,it,I));if(Ht)return g=null,Ht+""||null}return t="function"==typeof t?t:void 0===t?ia:mi(t),e="function"==typeof e?e:void 0===e?na:mi(e),C.x=function(I){return arguments.length?(t="function"==typeof I?I:mi(+I),C):t},C.y=function(I){return arguments.length?(e="function"==typeof I?I:mi(+I),C):e},C.defined=function(I){return arguments.length?(l="function"==typeof I?I:mi(!!I),C):l},C.curve=function(I){return arguments.length?(u=I,null!=o&&(g=u(o)),C):u},C.context=function(I){return arguments.length?(null==I?o=g=null:g=u(o=I),C):o},C}function Yn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function qn(t){this._context=t}function la(t){return new qn(t)}function _i(t,e,l){this.k=t,this.x=e,this.y=l}qn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);