"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5453],{1814:(ce,At,f)=>{f.d(At,{In:()=>ut,MA:()=>O,Mo:()=>A,NV:()=>x,S3:()=>B,dt:()=>Z,h8:()=>c,k0:()=>S});const B={fill:"transparent",stroke:"#129bff",strokeWidth:1},x={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},ut={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},A={fill:"transparent",stroke:"transparent",strokeWidth:1},Z={fill:"none",stroke:"#5F6CE1",strokeWidth:1},c={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},O={fill:"transparent"},S={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(ce,At,f)=>{f.d(At,{w:()=>it,I:()=>M});var B=f(4981),x=f(9054),ut=f(5811),A=/^#[a-fA-F0-9]+$/i,Z=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,c=/^rgb\((\d+),(\d+),(\d+)\)$/i;const O=W=>{let H=null,at=null;if(W)if("transparent"==W)H="#000000",at=0;else if(W.match(A))H=W;else{let N=(W=W.replace(/\s+/g,"")).match(Z);if(N)H="#"+(256|N[1]).toString(16).slice(1)+(256|N[2]).toString(16).slice(1)+(256|N[3]).toString(16).slice(1),at=(0,ut.q)(parseFloat(N[4]),100);else{let nt=W.match(c);nt&&(H="#"+(256|nt[1]).toString(16).slice(1)+(256|nt[2]).toString(16).slice(1)+(256|nt[3]).toString(16).slice(1))}}return{hex:H,alpha:at}},M=W=>b(null==W?void 0:W.url,null==W?void 0:W.path,null==W?void 0:W.src);var b=(W,H,at)=>{var N,nt;let gt,mt,ct,tt;var D,Wt;return W&&(gt=W.replace(/\\/g,"/")),H&&(mt=H.replace(/\\/g,"/")),at&&(ct=at.replace(/\\/g,"/")),mt&&!gt&&(gt=(null===(D=B.icdt.config)||void 0===D?void 0:D.readfileuploadurl)+mt),!ct||mt||gt||(mt=ct.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Wt=B.icdt.config)||void 0===Wt?void 0:Wt.readfileuploadurl)+mt),tt=(null!==(N=gt)&&void 0!==N?N:"").split("/").pop()||(null!==(nt=mt)&&void 0!==nt?nt:"").split("/").pop()||"",{url:gt,path:mt,name:tt}};const it=W=>{let H={x:0,y:0,width:W.screen.w,height:W.screen.h},at=[];return W.data.forEach((N,nt)=>{var gt,mt;let ct={id:"number"==typeof N.id?N.id:B.icdt.data.newSlideId,code:null===(gt=N.id)||void 0===gt?void 0:gt.toString(),name:"string"==typeof N.id?N.id:`Trang ${nt+1}`,svg:{viewBox:H,nodes:[]},test:(tt=N.test2,tt?(tt.audiotrue&&(tt.audiotrue=M({path:tt.audiotrue.path})),tt.audiofalse&&(tt.audiofalse=M({path:tt.audiofalse.path})),tt.effecttrue&&(tt.effecttrue=M({path:tt.effecttrue.path})),tt.effectfalse&&(tt.effectfalse=M({path:tt.effectfalse.path})),tt.icontrue&&(tt.icontrue=M({path:tt.icontrue.path})),tt.iconfalse&&(tt.iconfalse=M({path:tt.iconfalse.path})),tt):{})};var tt;N.background&&ct.svg&&(ct.svg.background=function(W){return W&&(null!==W.match(/#([a-zA-Z0-9]+)/)||null!==W.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==W.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(N.background)?{color:N.background}:function(W){return W&&null!==W.match(/data:[^;]+;base64,/)}(N.background)?{base64:N.background}:function(W){return W&&null!==W.match(/http(s)?:\/\//)}(N.background)?b(N.background):b(void 0,N.background)),jQuery(null!==(mt=N.svg)&&void 0!==mt?mt:"").find(".svg-node").each((tt,D)=>{var Wt,Lt;let Dt=jQuery(D).parents(".indexs"),le=Dt.attr("data-index"),Mt=Dt.attr("data-time"),Gt=null!==(Wt=D.getAttribute("id"))&&void 0!==Wt?Wt:"0",dt={id:parseInt(Gt),code:`${D.nodeName}-${D.getAttribute("id")}`,name:D.nodeName,idx:le?parseInt(le):0,time:Mt?parseFloat(Mt):0,type:(()=>{switch(D.nodeName){case"polygon":return x.$.POLYGON;case"circle":return x.$.CIRCLE;case"ellipse":return x.$.ELLIPSE;case"line":return x.$.LINE;case"rect":return x.$.RECT;case"foreignObject":return x.$.FOREIGNOBJECT}return 0})(),size:(Y=>{let xt=0,St=0,Zt=0,pt=0,ne=null,G=null,R=parseFloat((null===(Y=D.getAttribute("transform"))||void 0===Y?void 0:Y.replace("rotate(","").replace(")",""))||"0")||null;switch(D.nodeName){case"polygon":{var u,J;let yt=[],ft=[],Ot=999999999,Ft=999999999,zt=0,Et=0;ne=JSON.parse(D.getAttribute("ratios")||"[]"),G=null!==(u=null===(J=D.getAttribute("points"))||void 0===J?void 0:J.split(",").map(function(_t){return _t.split(" ").map(function(qt){return parseFloat(qt)})}))&&void 0!==u?u:[],G.forEach(function(_t){yt.push(_t[0]),ft.push(_t[1])}),Ot=Math.min.apply(null,yt),Ft=Math.min.apply(null,ft),zt=Math.max.apply(null,yt),Et=Math.max.apply(null,ft),xt=Ot,St=Ft,Zt=zt-xt,pt=Et-St;break}case"circle":{let yt=parseFloat(D.getAttribute("cx")||"0"),ft=parseFloat(D.getAttribute("cy")||"0"),Ot=parseFloat(D.getAttribute("r")||"0");xt=yt-Ot,St=ft-Ot,Zt=2*Ot,pt=2*Ot;break}case"ellipse":{let yt=parseFloat(D.getAttribute("cx")||"0"),ft=parseFloat(D.getAttribute("cy")||"0"),Ot=parseFloat(D.getAttribute("rx")||"0"),Ft=parseFloat(D.getAttribute("ry")||"0");xt=yt-Ot,St=ft-Ft,Zt=2*Ot,pt=2*Ft;break}case"line":{let yt=parseFloat(D.getAttribute("x1")||"0"),ft=parseFloat(D.getAttribute("y1")||"0"),Ot=parseFloat(D.getAttribute("x2")||"0"),Ft=parseFloat(D.getAttribute("y2")||"0"),zt=999999999,Et=999999999,_t=0,qt=0;zt=Math.min(yt,Ot),Et=Math.min(ft,Ft),_t=Math.max(yt,Ot),qt=Math.max(ft,Ft),xt=zt,St=Et,Zt=_t-xt,pt=qt-St,ne=[[(yt-xt)/(Zt||1),(ft-St)/(pt||1)],[(Ot-xt)/(Zt||1),(Ft-St)/(pt||1)]];break}case"rect":case"foreignObject":xt=parseFloat(D.getAttribute("x")||"0"),St=parseFloat(D.getAttribute("y")||"0"),Zt=parseFloat(D.getAttribute("width")||"0"),pt=parseFloat(D.getAttribute("height")||"0")}return Object.assign({},{x:xt,y:St,width:Zt,height:pt,ratios:ne,points:G,rotate:R})})(),attribute:(()=>{let Y={};switch(D.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var xt,St,Zt,pt,ne,G;let R=null!==(xt=D.getAttribute("fill"))&&void 0!==xt?xt:null,u=null!==(St=D.getAttribute("stroke"))&&void 0!==St?St:null,J=null!==(Zt=parseFloat(D.getAttribute("stroke-width")||"0"))&&void 0!==Zt?Zt:null,yt=null!==(pt=D.getAttribute("stroke-linecap"))&&void 0!==pt?pt:null,ft=null!==(ne=D.getAttribute("stroke-linejoin"))&&void 0!==ne?ne:null,Ot=null!==(G=parseFloat(D.getAttribute("stroke-dasharray")||"0"))&&void 0!==G?G:null;Object.assign(Y,{fill:R,stroke:u,strokeWidth:J,strokeLinecap:yt,strokeLinejoin:ft,strokeDasharray:Ot});break}}return Y})(),style:(()=>{let Y={};switch(D.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ne=jQuery(D).find(".svg-container");if(ne.length){var xt,St;let R=null!==(xt=parseFloat(ne.css("border-width")||"0"))&&void 0!==xt?xt:null,u=null!==(St=ne.css("border-style"))&&void 0!==St?St:null,J=ne.css("border-color")||null,yt=null,ft=ne.css("background-color")||null,Ot=null;(()=>{let{hex:Ft,alpha:zt}=O(J);J=Ft,yt=zt})(),(()=>{let{hex:Ft,alpha:zt}=O(ft);ft=Ft,Ot=zt})(),Object.assign(Y,{borderWidth:R,borderStyle:u,borderColor:J,borderOpacity:yt,backgroundColor:ft,backgroundOpacity:Ot})}let G=jQuery(D).find(".svg-editor-content");if(G.length){var Zt,pt;let R=JSON.parse((G.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:u,alpha:J}=O(R.TextColor);Object.assign(Y,{fontFamily:null!==(Zt=R.FontFamily)&&void 0!==Zt?Zt:null,fontSize:null!==(pt=R.FontSize)&&void 0!==pt?pt:null,color:u,opacity:J})}break}}return Y})(),source:(()=>{let Y={};switch(D.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Dt.hasClass("editors")){let Et=jQuery(D).find(".svg-editor-content");if(Et.length){var xt;let _t=Et.html(),qt=null!==(xt=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==xt?xt:[];Object.assign(Y,{type:"html",html:{htmlContent:_t,variableKeywords:qt}})}}else if(Dt.hasClass("inputs")||Dt.hasClass("textareas"))Object.assign(Y,{type:"input",input:{input:!!jQuery(D).find("input").length,textarea:!!jQuery(D).find("textarea").length}});else if(Dt.hasClass("tests")){let Et=jQuery(D).find(".svg-test");if(Dt.hasClass("tests-truefalse")){var St,Zt;let _t=Et.find(".svg-editor-content").html(),qt=null!==(St=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==St?St:[];Object.assign(Y,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(Zt=N.test2.truefalse)||void 0===Zt?void 0:Zt.includes(Gt)}},html:{htmlContent:_t,variableKeywords:qt}})}else if(Dt.hasClass("tests-singlechoice")){var pt,ne;let _t=Et.find(".svg-editor-content").html(),qt=null!==(pt=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==pt?pt:[];Object.assign(Y,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(ne=N.test2.singlechoice)||void 0===ne?void 0:ne.includes(Gt)}},html:{htmlContent:_t,variableKeywords:qt}})}else if(Dt.hasClass("tests-multichoice")){var G,R;let _t=Et.find(".svg-editor-content").html(),qt=null!==(G=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==G?G:[];Object.assign(Y,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(R=N.test2.multichoice)||void 0===R?void 0:R.includes(Gt)}},html:{htmlContent:_t,variableKeywords:qt}})}else if(Dt.hasClass("tests-fill")){var u,J;let _t=Et.find(".svg-editor-content").html(),qt=null!==(u=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==u?u:[],Pt=null!==(J=(null!=_t?_t:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==J?J:[];Pt=Pt.filter((re,j,d)=>d.indexOf(re)==j),Object.assign(Y,{type:"test",test:{type:"fill",fill:Pt.map(re=>{var j;return{key:re,value:null===(j=N.test2.fill)||void 0===j||null===(j=j.find(d=>d.id==Gt))||void 0===j||null===(j=j.vals)||void 0===j?void 0:j.map(d=>d.text).filter(d=>!["",null,void 0,NaN].includes(d))}})},html:{htmlContent:_t,variableKeywords:qt,fillKeywords:Pt}})}else if(Dt.hasClass("tests-matching")){if(Et.hasClass("svg-test-empty"))Object.assign(Y,{type:"test",test:{type:"matching-empty",matching:{key:Et.attr("data-name")||null}}});else if(Et.hasClass("svg-test-content")){var yt;let _t=Et.find(".svg-editor-content").html(),qt=null!==(yt=(null!=_t?_t:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==yt?yt:[];Object.assign(Y,{type:"test",test:{type:"matching-content",matching:{key:Et.attr("data-name")||null}},html:{htmlContent:_t,variableKeywords:qt}})}}else if(Dt.hasClass("tests-speech")){var ft;Object.assign(Y,{type:"speech",speech:{value:null===(ft=N.test2.speech)||void 0===ft||null===(ft=ft.find(_t=>_t.id==Gt))||void 0===ft||null===(ft=ft.vals)||void 0===ft?void 0:ft.map(_t=>_t.text).filter(_t=>!["",null,void 0,NaN].includes(_t))}})}else if(Dt.hasClass("tests-submit")){let _t=jQuery(D).find(".svg-container img");Object.assign(Y,{type:"test",test:{type:"submit"},image:b(_t.attr("url"),_t.attr("path"),_t.attr("src"))})}}else if(Dt.hasClass("images")){let Et=jQuery(D).find(".svg-editor-content img");if(Et.length)Object.assign(Y,{type:"image",image:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))});else{let _t=jQuery(D).find("iframe");Object.assign(Y,{type:"iframe",iframe:b(_t.attr("url"),_t.attr("path"),_t.attr("src"))})}}else if(Dt.hasClass("sounds")){let Et=jQuery(D).find(".svg-editor-content img");Et.length&&Object.assign(Y,{type:"image",image:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))})}else if(Dt.hasClass("htmls")){let Et=jQuery(D).find("iframe");Et.length&&Object.assign(Y,{type:"iframe",iframe:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))})}else if(Dt.hasClass("svgs")){let Et=jQuery(D).find("svg");var Ot,Ft;Et.length&&Object.assign(Y,{type:"svg",svg:Object.assign(b(Et.attr("url"),Et.attr("path"),Et.attr("src")),{svgContent:null!==(Ot=null===(Ft=Et.get(0))||void 0===Ft?void 0:Ft.outerHTML)&&void 0!==Ot?Ot:null})})}else if(Dt.hasClass("medias")){let Et=jQuery(D).find(".media-item");if(Et.length)switch(Et.attr("type")){case"audio":Object.assign(Y,{type:"audio",audio:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;case"video":Object.assign(Y,{type:"video",video:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;case"file":Object.assign(Y,{type:"file",file:b(Et.attr("url"),Et.attr("path"),Et.attr("src"))});break;default:var zt;Object.assign(Y,{type:"link",link:{url:null!==(zt=Et.attr("url"))&&void 0!==zt?zt:null}})}let _t=jQuery(D).find("img");_t.length&&(Object.assign(Y,{image:b(_t.attr("url"),_t.attr("path"),_t.attr("src"))}),Y.type||Object.assign(Y,{type:"image"}))}}return Y})(),animate:(Y=>{let xt={},St=null===(Y=N.animates)||void 0===Y?void 0:Y.find(Zt=>Zt.elementId==Gt);return St&&Object.assign(xt,{value:St.value}),xt})(),interactive:(()=>{let Y={},xt=N.actions.show.filter(Zt=>Zt.elementId==Gt&&Zt.active);xt.length&&(Y.show={},xt.forEach(Zt=>{let{source:pt}=Zt;switch(null==pt?void 0:pt.type){case"work":var ne,G,R,u,J;Y.show.action={},Object.assign(Y.show.action,{value:null!==(ne=pt.value)&&void 0!==ne?ne:null,iteration:null!==(G=pt.iteration)&&void 0!==G?G:null,finish:null!==(R=pt.end)&&void 0!==R?R:null,time:null!==(u=pt.time)&&void 0!==u?u:null,points:null!==(J=pt.points)&&void 0!==J?J:null});break;case"audio":var yt,ft,Ot;Y.show.audio={},Object.assign(Y.show.audio,{source:b(null,null,pt.url),iteration:null!==(yt=pt.iteration)&&void 0!==yt?yt:null,finish:null!==(ft=pt.end)&&void 0!==ft?ft:null,time:null!==(Ot=pt.time)&&void 0!==Ot?Ot:null,async:-1==pt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Ft,zt,Et,_t,qt,Pt,re,j,d,k,F,Q,K,I,V;pt.options.includes("show")&&(Y.show.triggershow={},Object.assign(Y.show.triggershow,{id:null!==(Ft=parseInt(null!==(zt=pt.id)&&void 0!==zt?zt:"0"))&&void 0!==Ft?Ft:null,ids:null===(Et=pt.ids)||void 0===Et?void 0:Et.map(T=>parseInt(T)),async:null!==(_t=pt.async)&&void 0!==_t?_t:null,time:null!==(qt=pt.time)&&void 0!==qt?qt:null})),pt.options.includes("run")&&(Y.show.triggerrun={},Object.assign(Y.show.triggerrun,{id:null!==(Pt=parseInt(null!==(re=pt.id)&&void 0!==re?re:"0"))&&void 0!==Pt?Pt:null,ids:null===(j=pt.ids)||void 0===j?void 0:j.map(T=>parseInt(T)),async:null!==(d=pt.async)&&void 0!==d?d:null,time:null!==(k=pt.time)&&void 0!==k?k:null})),pt.options.includes("hide")&&(Y.show.triggerhide={},Object.assign(Y.show.triggerhide,{id:null!==(F=parseInt(null!==(Q=pt.id)&&void 0!==Q?Q:"0"))&&void 0!==F?F:null,ids:null===(K=pt.ids)||void 0===K?void 0:K.map(T=>parseInt(T)),async:null!==(I=pt.async)&&void 0!==I?I:null,time:null!==(V=pt.time)&&void 0!==V?V:null}))}}));let St=N.actions.click.filter(Zt=>Zt.elementId==Gt&&Zt.active);return St&&(Y.click={},St.forEach(Zt=>{let{source:pt}=Zt;switch(null==pt?void 0:pt.type){case"work":var ne,G,R,u,J;Y.click.action={},Object.assign(Y.click.action,{value:null!==(ne=pt.value)&&void 0!==ne?ne:null,iteration:null!==(G=pt.iteration)&&void 0!==G?G:null,finish:null!==(R=pt.end)&&void 0!==R?R:null,time:null!==(u=pt.time)&&void 0!==u?u:null,points:null!==(J=pt.points)&&void 0!==J?J:null});break;case"audio":var yt,ft,Ot;Y.click.audio={},Object.assign(Y.click.audio,{source:b(null,null,pt.url),iteration:null!==(yt=pt.iteration)&&void 0!==yt?yt:null,finish:null!==(ft=pt.end)&&void 0!==ft?ft:null,time:null!==(Ot=pt.time)&&void 0!==Ot?Ot:null,async:-1==pt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Ft,zt,Et,_t,qt,Pt,re,j,d,k,F,Q,K,I,V;pt.options.includes("show")&&(Y.click.triggershow={},Object.assign(Y.click.triggershow,{id:null!==(Ft=parseInt(null!==(zt=pt.id)&&void 0!==zt?zt:"0"))&&void 0!==Ft?Ft:null,ids:null===(Et=pt.ids)||void 0===Et?void 0:Et.map(X=>parseInt(X)),async:null!==(_t=pt.async)&&void 0!==_t?_t:null,time:null!==(qt=pt.time)&&void 0!==qt?qt:null})),pt.options.includes("run")&&(Y.click.triggerrun={},Object.assign(Y.click.triggerrun,{id:null!==(Pt=parseInt(null!==(re=pt.id)&&void 0!==re?re:"0"))&&void 0!==Pt?Pt:null,ids:null===(j=pt.ids)||void 0===j?void 0:j.map(X=>parseInt(X)),async:null!==(d=pt.async)&&void 0!==d?d:null,time:null!==(k=pt.time)&&void 0!==k?k:null})),pt.options.includes("hide")&&(Y.click.triggerhide={},Object.assign(Y.click.triggerhide,{id:null!==(F=parseInt(null!==(Q=pt.id)&&void 0!==Q?Q:"0"))&&void 0!==F?F:null,ids:null===(K=pt.ids)||void 0===K?void 0:K.map(X=>parseInt(X)),async:null!==(I=pt.async)&&void 0!==I?I:null,time:null!==(V=pt.time)&&void 0!==V?V:null}));break;case"slide":var T;Y.click.slide={},Object.assign(Y.click.slide,{id:parseInt(null!==(T=pt.id)&&void 0!==T?T:"0")||pt.num||null,code:pt.id})}})),Y})(),variable:(Y=>{let xt={};var St;D.getAttribute("data-variable")&&(xt.input={},Object.assign(xt.input,{variable:null!==(St=D.getAttribute("data-variable"))&&void 0!==St?St:null}));let Zt=null===(Y=N.nodes)||void 0===Y||null===(Y=Y.find(u=>u.id==Gt))||void 0===Y?void 0:Y.variable;var pt,ne,G,R;return Zt&&(xt.click={},Object.assign(xt.click,{variable:null!==(pt=Zt.variable)&&void 0!==pt?pt:null,operator:null!==(ne=Zt.operator)&&void 0!==ne?ne:null,valuetype:null!==(G=Zt.valuetype)&&void 0!==G?G:null,value:null!==(R=Zt.value)&&void 0!==R?R:null})),xt})()};null===(Lt=ct.svg)||void 0===Lt||Lt.nodes.push(dt)}),at.push(ct)}),console.log(at),{screen:{width:W.screen.w,height:W.screen.h},data:{slides:at},variable:W.variable}}},644:(ce,At,f)=>{f.d(At,{Dx:()=>c,aY:()=>q,qp:()=>S,qz:()=>Z,sV:()=>O,yR:()=>_});var B=f(5861),x=f(9422);x.config({driver:[x.INDEXEDDB,x.LOCALSTORAGE,x.WEBSQL],name:"_localDataDB",version:1});const A={create:(M=(0,B.Z)(function*(){return x}),function(){return M.apply(this,arguments)}),get:function(){var M=(0,B.Z)(function*(b){return x.getItem(b)});return function(it){return M.apply(this,arguments)}}(),set:function(){var M=(0,B.Z)(function*(b,it){return x.setItem(b,it)});return function(it,W){return M.apply(this,arguments)}}()},Z=function(){var M=(0,B.Z)(function*(b){yield A.create();var it=(yield A.get("icdt-data"))||[];"function"==typeof b.callback&&b.callback(it)});return function(it){return M.apply(this,arguments)}}(),c=function(){var M=(0,B.Z)(function*(b){yield A.create(),b.params=b.params||{};try{yield A.set("icdt-data",b.params),"function"==typeof b.callback&&b.callback(b.params)}catch(it){"function"==typeof b.callback&&b.callback(null),console.error(it)}});return function(it){return M.apply(this,arguments)}}(),O=function(){var M=(0,B.Z)(function*(b){yield A.create();try{var it=(yield A.get("icdt-config"))||{};"function"==typeof b.callback&&b.callback(it)}catch(W){"function"==typeof b.callback&&b.callback(null),console.error(W)}});return function(it){return M.apply(this,arguments)}}(),S=function(){var M=(0,B.Z)(function*(b){yield A.create(),b.params=b.params||{};try{yield A.set("icdt-config",b.params),"function"==typeof b.callback&&b.callback(b.params)}catch(it){"function"==typeof b.callback&&b.callback(null),console.error(it)}});return function(it){return M.apply(this,arguments)}}(),q=function(){var M=(0,B.Z)(function*(b){yield A.create();try{var it=(yield A.get("icdt-clipboard"))||{};"function"==typeof b.callback&&b.callback(it)}catch(W){"function"==typeof b.callback&&b.callback(null),console.error(W)}});return function(it){return M.apply(this,arguments)}}(),_=function(){var M=(0,B.Z)(function*(b){yield A.create(),b.params=b.params||{};try{yield A.set("icdt-clipboard",b.params),"function"==typeof b.callback&&b.callback(b.params)}catch(it){"function"==typeof b.callback&&b.callback(null),console.error(it)}});return function(it){return M.apply(this,arguments)}}();var M},1687:(ce,At,f)=>{f.d(At,{O:()=>B});const B={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(ce,At,f)=>{f.d(At,{D:()=>B});const B={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(ce,At,f)=>{f.d(At,{_:()=>B});const B={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(ce,At,f)=>{f.d(At,{D:()=>B});const B={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(ce,At,f)=>{f.d(At,{$:()=>B});const B={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(ce,At,f)=>{f.d(At,{icdt:()=>wt});var B=f(968),x=f(4080),ut=f(1687),A=f(9054),Z=f(4318),c=f(6816),O=f(666),S=f(2966);const M=C=>{var i,n,r,a,o;let y=(null===(i=C.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=C.touchEvent)||void 0===n?void 0:n.target),g=(null==y?void 0:y.getAttribute("id"))||"",v=null==y?void 0:y.nodeName,E=(null==y||null===(r=y.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var p,z;if([ut.O.RESIZE_GROUP,ut.O.SELECT_GROUP].includes(E))return null===(p=C.mouseEvent)||void 0===p||p.stopPropagation(),void(null===(z=C.mouseEvent)||void 0===z||z.preventDefault());if(null!==(a=C.mouseEvent)&&void 0!==a&&a.altKey||null!==(o=C.touchEvent)&&void 0!==o&&o.altKey||!g||g.match(/[^0-9]/)||!wt.dataSelect.nodeName.includes(v)){var U;wt.dataSelect.ids.length&&(wt.dataSelect.ids=[]),(0==(null===(U=C.mouseEvent)||void 0===U?void 0:U.button)||C.touchEvent)&&(C=>{let o=(0,x.g1)(ut.O.SCAN_GROUP,"g"),y=(0,Z.bH)(0,0,1,1);(0,x.vl)(o,y),((C,i,n)=>{(0,c.A)(C,{start:o=>{},move:(o,y)=>{((o,y,g,v)=>{i=(0,Z.bH)(o,y,g,v),(0,x.vl)(n,i)})(y[0][0],y[0][1],o.x,o.y)},end:(o,y)=>{null==n||n.remove(),wt.dataSelect.ids=wt.data.getNodeInArea(Math.min(y[0][0],o.x),Math.min(y[0][1],o.y),Math.max(y[0][0],o.x),Math.max(y[0][1],o.y));let g=wt.dataSelect.nodes;1==g.length?(0,O.y)(g[0]):g.length>1&&(0,S.Q)(g)}})})(C,y,o)})(C)}else{var lt,ht;let ot=parseFloat(g||"0");wt.dataSelect.ids=null!==(lt=C.mouseEvent)&&void 0!==lt&&lt.shiftKey||null!==(ht=C.touchEvent)&&void 0!==ht&&ht.shiftKey?[ot].concat(wt.dataSelect.ids).filter((se,fe,pe)=>pe.indexOf(se)==fe):[ot];let Ut=wt.dataSelect.nodes;Ut.length>1||1==Ut.length&&Ut[0].type==A.$.PATH?(0,S.Q)(Ut):1==Ut.length&&(0,O.y)(Ut[0])}};class it{constructor(){let{x:i,y:n}=wt.screen.dislocation;var r=(a,o,y,g)=>{wt.screen.move({x:i,y:n},{x:y-a,y:g-o})};return{start:a=>{},move:(a,o)=>{r(o[0][0],o[0][1],a.x,a.y)},end:(a,o)=>{r(o[0][0],o[0][1],a.x,a.y)}}}}var W=f(4714);const H=[{name:"tam gi\xe1c vu\xf4ng",type:W.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:W.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:W.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:W.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:W.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:W.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:W.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:W.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:W.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:W.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:W.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:W.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:W.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var at=f(8619),N=f(5811);class nt{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,at._)(Math.ceil(1e9*Math.random())),y=(g,v,E,p)=>{o=(0,Z.bH)(g,v,E,p,{ratio:1}),o.x=(0,N.q)(o.x),o.y=(0,N.q)(o.y),o.width=(0,N.q)(o.width),o.height=(0,N.q)(o.height),Object.assign(a,(0,Z.sg)(A.$.CIRCLE,o)),(0,x.__)(r,a),(0,x.g$)(i,o)};return{start:g=>{r.setAttribute("cx",g.x.toString()),r.setAttribute("cy",g.y.toString()),r.setAttribute("r","1")},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),wt.data.node=Object.assign({id:n,type:A.$.CIRCLE,name:"Circle"},{size:o,attribute:a}),null==i||i.remove()}}}}var gt=f(8785);class mt{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,gt.r)(Math.ceil(1e9*Math.random()));var y=(g,v,E,p)=>{o=(0,Z.bH)(g,v,E,p),o.x=(0,N.q)(o.x),o.y=(0,N.q)(o.y),o.width=(0,N.q)(o.width),o.height=(0,N.q)(o.height),Object.assign(a,(0,Z.sg)(A.$.ELLIPSE,o)),(0,x.__)(r,a),(0,x.g$)(i,o)};return{start:g=>{r.setAttribute("cx",g.x.toString()),r.setAttribute("cy",g.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),wt.data.node=Object.assign({id:n,type:A.$.ELLIPSE,name:"Ellipse"},{size:o,attribute:a}),null==i||i.remove()}}}}var ct=f(8054);class tt{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,ct.f)(Math.ceil(1e9*Math.random()));var y=(g,v,E,p)=>{o=(0,Z.bH)(g,v,E,p),o.x=(0,N.q)(o.x),o.y=(0,N.q)(o.y),o.width=(0,N.q)(o.width),o.height=(0,N.q)(o.height),Object.assign(a,(0,Z.sg)(A.$.RECT,o)),(0,x.__)(r,a),(0,x.g$)(i,o)};return{start:g=>{y(g.x,g.y,g.x+o.width,g.y+o.height)},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{o.width>=10&&o.height>=10?wt.data.node=Object.assign({id:n,type:A.$.RECT,name:"Rect"},{size:o,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var D=f(2282);class Wt{constructor(i){let n=(0,x.g1)(ut.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:o,attribute:y,size:g}=(0,D.l)(Math.ceil(1e9*Math.random()));g.ratios=r;var v=(E,p,z,U)=>{g=(0,Z.bH)(E,p,z,U,{ratios:r}),g.x=(0,N.q)(g.x),g.y=(0,N.q)(g.y),g.width=(0,N.q)(g.width),g.height=(0,N.q)(g.height),Object.assign(y,(0,Z.sg)(A.$.POLYGON,g)),(0,x.__)(o,y),(0,x.g$)(n,g)};return{start:E=>{},move:(E,p)=>{v(p[0][0],p[0][1],E.x,E.y)},end:(E,p)=>{v(p[0][0],p[0][1],E.x,E.y),wt.data.node=Object.assign({id:a,type:A.$.POLYGON,name:"Polygon"},{size:g,attribute:y}),null==n||n.remove()}}}}var Lt=f(4921);class Dt{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,Lt.W)(Math.ceil(1e9*Math.random()));var y=(g,v,E,p)=>{o=(0,Z.bH)(g,v,E,p),o.x=(0,N.q)(o.x),o.y=(0,N.q)(o.y),o.width=(0,N.q)(o.width),o.height=(0,N.q)(o.height),Object.assign(a,(0,Z.sg)(A.$.LINE,o)),(0,x.__)(r,a),(0,x.g$)(i,o)};return{start:g=>{},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),wt.data.node=Object.assign({id:n,type:A.$.LINE,name:"Line"},{size:o,attribute:a}),null==i||i.remove()}}}}var le=f(8419);class Mt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,le.G)(Math.ceil(1e9*Math.random())),y="";var g=(v,E)=>{y+=` ${v} ${E}`,n.setAttribute("d",y)};return{start:v=>{y=`M ${v.x} ${v.y} L ${v.x} ${v.y}`},move:(v,E)=>{g(v.x,v.y)},end:(v,E)=>{g(v.x,v.y),(v=>{let E=9999,p=9999,z=-9999,U=-9999;v.forEach(lt=>{E=Math.min(E,lt[0]),p=Math.min(p,lt[1]),z=Math.max(z,lt[0]),U=Math.max(U,lt[1])}),a=(0,Z.bH)(E,p,z,U,{points:v}),Object.assign(r,(0,Z.sg)(A.$.PATH,a)),(0,x.__)(n,r)})(E),wt.data.node=Object.assign({id:i,type:A.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var Gt=f(2875);class dt{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()));var v=(E,p,z,U)=>{a=(0,Z.bH)(E,p,z,U),a.x=(0,N.q)(a.x),a.y=(0,N.q)(a.y),a.width=(0,N.q)(a.width),a.height=(0,N.q)(a.height),Object.assign(o,(0,Z.sg)(A.$.FOREIGNOBJECT,a)),(0,x.__)(r,o),(0,x.g$)(i,a)};return{start:E=>{v(E.x,E.y,E.x+a.width,E.y+a.height)},move:(E,p)=>{v(p[0][0],p[0][1],E.x,E.y)},end:(E,p)=>{a.width>=10&&a.height>=10?wt.data.node=Object.assign({id:n,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g}):null==r||r.remove(),null==i||i.remove()}}}}var Y=f(7210);class xt{constructor(){var i,n;let r=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:a,element:o,size:y,attribute:g,source:v}=(0,Y.G)(Math.ceil(1e9*Math.random())),E=1;(z=>{if(!z)return;let U=new Image;U.onload=()=>{E=(0,N.q)(U.naturalWidth/U.naturalHeight,100)},U.onerror=lt=>{console.error(`ImgSrc load failed -> ${z}`,lt)},U.src=z})(null!==(i=null===(n=v.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var p=(z,U,lt,ht)=>{y=(0,Z.bH)(z,U,lt,ht,{ratio:E}),y.x=(0,N.q)(y.x),y.y=(0,N.q)(y.y),y.width=(0,N.q)(y.width),y.height=(0,N.q)(y.height),Object.assign(g,(0,Z.sg)(A.$.IMAGE,y)),(0,x.__)(o,g),(0,x.g$)(r,y)};return{start:z=>{p(z.x,z.y,z.x+y.width,z.y+y.height)},move:(z,U)=>{p(U[0][0],U[0][1],z.x,z.y)},end:(z,U)=>{y.width>=10&&y.height>=10?wt.data.node=Object.assign({id:a,type:A.$.IMAGE,name:"Image"},{size:y,attribute:g,source:v}):null==o||o.remove(),null==r||r.remove()}}}}var Zt=f(4578),pt=f(9623);function R(C,i,n,r){return Math.sqrt(Math.pow(n-C,2)+Math.pow(r-i,2))}function u(C,i,n,r,a){return R(C,i,n,r)<a?1:0}function yt(C,i,n,r,a,o,y){var g=[];return g.push(u(C,i,n,r,y)),g.push(u(C,i,a,o,y)),g.push(function J(C,i,n,r,a,o,y){var g=[a-n,o-r],v=[C-n,i-r],E=[-g[1],g[0]],p=Math.sqrt(Math.pow(E[0],2)+Math.pow(E[1],2)),z=[E[0]/p,E[1]/p],U=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),lt=[g[0]/U,g[1]/U],ht=v[0]*lt[0]+v[1]*lt[1];if(ht<=0||ht>=U)return 0;var ot=v[0]*z[0]+v[1]*z[1];return ot>=y||ot<=-y?0:1}(C,i,n,r,a,o,y)),g}function ft(C,i,n,r,a){var o=[n-C,r-i],y=[-o[1],o[0]],g=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),v=[y[0]/g,y[1]/g];return[[C+a*v[0],i+a*v[1]],[C-a*v[0],i-a*v[1]],[n-a*v[0],r-a*v[1]],[n+a*v[0],r+a*v[1]]]}function Ot(C,i,n,r,a,o,y){var ht,g=[a-C,o-i],v=[n-C,r-i],E=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),p=[v[0]/E,v[1]/E],z=g[0]*p[0]+g[1]*p[1],U=[C+z*p[0],i+z*p[1]],lt=Math.sqrt(Math.pow(a-U[0],2)+Math.pow(o-U[1],2));ht=0===lt?y:Math.sqrt(Math.pow(y,2)-Math.pow(lt,2));var ot=[C+z*p[0]+ht*p[0],i+z*p[1]+ht*p[1]];return ot[0]===C&&ot[1]===i?null:ot}function Ft(C,i,n,r,a,o,y){var g=[a-C,o-i],v=[n-C,r-i],E=[-v[1],v[0]],p=Math.sqrt(Math.pow(E[0],2)+Math.pow(E[1],2)),z=[E[0]/p,E[1]/p],U=g[0]*z[0]+g[1]*z[1],lt=re([C,i],[n,r],[a,o]);if(qt([lt[0]-a,lt[1]-o])>=y)return null;var ot=Math.sqrt(Math.pow(y,2)-Math.pow(U,2)),Ut=[a-U*z[0],o-U*z[1]],se=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),fe=[v[0]/se,v[1]/se],pe=[[Ut[0]-fe[0]*ot,Ut[1]-fe[1]*ot],[Ut[0]+fe[0]*ot,Ut[1]+fe[1]*ot]];return pe[0][0]===C&&pe[0][1]===i?null:pe}function zt(C,i,n,r,a,o,y,g){var v,E,p,z,U,lt;return-(p=y-a)*(E=r-i)+(v=n-C)*(z=g-o)==0?null:(lt=(p*(i-o)-z*(C-a))/(-p*E+v*z),(U=(-E*(C-a)+v*(i-o))/(-p*E+v*z))>=0&&U<=1&&lt>=0&&lt<=1?[C+lt*v,i+lt*E]:null)}function Et(C,i,n,r,a,o,y,g,v,E){var p=ft(o,y,g,v,E),z=[];if(n[0]&&!n[1])z.push(Ot(C,i,r,a,o,y,E)),z.push(zt(C,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(zt(C,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),(U=Ft(C,i,r,a,g,v,E))&&z.push(U[0],U[1]);else if(!n[0]&&n[1])z.push(Ot(C,i,r,a,g,v,E)),z.push(zt(C,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(zt(C,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),(U=Ft(C,i,r,a,o,y,E))&&z.push(U[0],U[1]);else if(n[0]&&n[1])z.push(Ot(C,i,r,a,o,y,E)),z.push(zt(C,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(zt(C,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),z.push(Ot(C,i,r,a,g,v,E));else{var U=Ft(C,i,r,a,g,v,E),lt=Ft(C,i,r,a,o,y,E);U&&z.push(U[0],U[1]),lt&&z.push(lt[0],lt[1]),z.push(zt(C,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(zt(C,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1]))}for(var ht=[C,i],ot=0;ot<z.length;ot++)z[ot]&&R(z[ot][0],z[ot][1],r,a)<R(ht[0],ht[1],r,a)&&(ht=z[ot]);return ht[0]===C&&ht[1]===i?null:ht}function _t(C,i,n,r,a,o,y,g,v){var E=ft(a,o,y,g,v),p=[],z=Ft(C,i,n,r,a,o,v);z&&p.push(z[0],z[1]),(z=Ft(C,i,n,r,y,g,v))&&p.push(z[0],z[1]),p.push(zt(C,i,n,r,E[0][0],E[0][1],E[3][0],E[3][1])),p.push(zt(C,i,n,r,E[1][0],E[1][1],E[2][0],E[2][1]));for(var U=[n,r],lt=[C,i],ht=0;ht<p.length;ht++)p[ht]&&R(p[ht][0],p[ht][1],C,i)<R(U[0],U[1],C,i)&&(U=p[ht]);for(var ot=0;ot<p.length;ot++)p[ot]&&R(p[ot][0],p[ot][1],n,r)<R(lt[0],lt[1],n,r)&&(lt=p[ot]);return U[0]===n&&U[1]===r||lt[0]===C&&lt[1]===i?null:[U,lt]}var qt=function(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])},re=function(C,i,n){var r=[i[0]-C[0],i[1]-C[1]],a=qt(r);if(a<1e-6)return C;var o=[n[0]-C[0],n[1]-C[1]],y=(r[0]*o[0]+r[1]*o[1])/a;return y<0?C:y>a?i:[C[0]+r[0]*y/a,C[1]+r[1]*y/a]};class j{constructor(){let{element:r,size:o}=(0,le.G)(Math.ceil(1e9*Math.random()));(0,x.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:E=>{y=`M ${E.x} ${E.y} L ${E.x} ${E.y}`},move:(E,p)=>{((E,p)=>{y+=` ${E} ${p}`,r.setAttribute("d",y)})(E.x,E.y)},end:(E,p)=>{r.remove(),(E=>{let p=9999,z=9999,U=-9999,lt=-9999;E.forEach(ot=>{p=Math.min(p,ot[0]),z=Math.min(z,ot[1]),U=Math.max(U,ot[0]),lt=Math.max(lt,ot[1])}),o=(0,Z.bH)(p,z,U,lt,{points:E}),wt.data.getNodeInArea(0,0,1920,1920,A.$.PATH).forEach(ot=>{let se=((C,i,n)=>{n=n||20;var r=[],a=function(p){var z=i[0][0],U=i[0][1],lt=0,ht=0;if(1!==p.length||u(p[0][0],p[0][1],z,U,n)){for(var ot;lt<p.length-1;){var Ut=p[lt],se=p[lt+1],fe=u(Ut[0],Ut[1],z,U,n),pe=u(se[0],se[1],z,U,n);if(fe&&pe)ht=++lt;else if(fe&&!pe)(xe=Ot(Ut[0],Ut[1],se[0],se[1],z,U,n))?(p[lt]=xe,ht=lt):lt++;else if(!fe&&pe){var xe;(xe=Ot(se[0],se[1],Ut[0],Ut[1],z,U,n))&&((ot=p.slice(ht,lt+1)).push(xe),r.push(ot)),ht=++lt}else{var me=Ft(Ut[0],Ut[1],se[0],se[1],z,U,n);me?(((ot=p.slice(ht,lt+1))[ot.length-1][0]!==me[0][0]||ot[ot.length-1][1]!==me[0][1])&&ot.push(me[0]),ot.length>1&&r.push(ot),p[lt]=me[1],p[lt+1]&&p[lt+1][0]==me[1][0]&&p[lt+1][1]==me[1][1]&&lt++,ht=lt):lt++}}ht!==lt&&(ot=p.slice(ht,p.length))&&r.push(ot)}else r.push(p)},o=function(p,z){var se,U=i[z],lt=i[z+1],ht=0,ot=0;if(1!==p.length||-1!==(Ut=yt(p[0][0],p[0][1],U[0],U[1],lt[0],lt[1],n)).indexOf(1)){for(;ht<p.length-1;){var fe=p[ht],pe=p[ht+1],Ut=yt(fe[0],fe[1],U[0],U[1],lt[0],lt[1],n),xe=yt(pe[0],pe[1],U[0],U[1],lt[0],lt[1],n);if(-1!==Ut.indexOf(1)&&-1!==xe.indexOf(1))ot=++ht;else if(-1!==Ut.indexOf(1)&&-1===xe.indexOf(1))(me=Et(fe[0],fe[1],Ut,pe[0],pe[1],U[0],U[1],lt[0],lt[1],n))?(p[ht]=me,ot=ht):ht++;else if(-1===Ut.indexOf(1)&&-1!==xe.indexOf(1)){var me;(me=Et(pe[0],pe[1],xe,fe[0],fe[1],U[0],U[1],lt[0],lt[1],n))?((se=p.slice(ot,ht+1)).push(me),r.push(se),ot=++ht):ht++}else{var ke=_t(fe[0],fe[1],pe[0],pe[1],U[0],U[1],lt[0],lt[1],n);ke?(((se=p.slice(ot,ht+1))[se.length-1][0]!==ke[0][0]||se[se.length-1][1]!==ke[0][1])&&se.push(ke[0]),se.length>1&&r.push(se),p[ht]=ke[1],p[ht+1]&&p[ht+1][0]==ke[1][0]&&p[ht+1][1]==ke[1][1]&&ht++,ot=ht):ht++}}ot!==ht&&(se=p.slice(ot,p.length))&&r.push(se)}else r.push(p)};if(i=function G(C){var i=[];if(1===C.length)i=C;else{for(var n=0;n<C.length-1;)(C[n][0]!==C[n+1][0]||C[n][1]!==C[n+1][1])&&i.push(C[n]),n++;0!==C.length&&0===i.length&&i.push(C[0]),(C[C.length-1][0]!==C[i.length-1][0]||C[C.length-1][1]!==C[i.length-1][1])&&i.push(C[n])}return i}(i),1===i.length){for(var y=0;y<C.length;y++)a(C[y]);C=r}else for(var g=0;g<i.length-1;g++){for(y=0;y<C.length;y++)o(C[y],g);C=r,r=[]}for(var v=0;v<C.length;v++)for(var E=0;E<C[v].length;E++)C[v][E][0]=Math.round(C[v][E][0]),C[v][E][1]=Math.round(C[v][E][1]);return C})(wt.data.getNode(ot).size.points,E,2);console.log(se)})})(p)}}}}var k=f(1105);class F{constructor(){let i=(0,x.g1)(ut.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o,source:y}=(0,k.$)(Math.ceil(1e9*Math.random())),g=(v,E,p,z)=>{o=(0,Z.bH)(v,E,p,z),o.x=(0,N.q)(o.x),o.y=(0,N.q)(o.y),o.width=(0,N.q)(o.width),o.height=(0,N.q)(o.height),Object.assign(a,(0,Z.sg)(A.$.TEXT,o)),(0,x.__)(r,a),(0,x.g$)(i,o)};return{start:v=>{g(v.x,v.y,v.x+o.width,v.y+o.height)},move:(v,E)=>{g(E[0][0],E[0][1],v.x,v.y)},end:(v,E)=>{o.width>=10&&o.height>=10?wt.data.node=Object.assign({id:n,type:A.$.TEXT,name:"Text"},{size:o,attribute:a,source:y}):null==r||r.remove(),null==i||i.remove()}}}}var V=f(4113),T=f(9125),X=f(7797);var Kt=f(6358);class Tt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>wt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,o,y;null===(n=window.document.getElementById(ut.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(ut.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(ut.O.SCAN_GROUP))||void 0===a||a.remove(),null===(o=window.document.getElementById(ut.O.CREATE_GROUP))||void 0===o||o.remove(),null===(y=window.document.getElementById(ut.O.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(g=>g(i))}deleteNode(){for(let i of this._selected_Ids){let n=wt.data.deleteNode(i);wt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}wt.dataSelect.ids=[]}groupNode(){let i=[];if(wt.dataSelect.ids.length>=2){let n=wt.data.getNode(wt.dataSelect.ids[0]),{nodeId:r,attribute:a,size:o}=(0,Kt.m)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);wt.data.node=Object.assign({id:r,type:A.$.GROUP,name:"G"},{size:o,attribute:a});for(let y of wt.dataSelect.ids)i.push(wt.data.addGroup(y,r))}if(i.length){wt.dataSelect.ids=i;let n=wt.dataSelect.nodes;1==n.length?(0,O.y)(n[0]):n.length>1&&(0,S.Q)(n)}}ungroupNode(){let i=[];for(let n of wt.dataSelect.ids)i.push(wt.data.unGroup(n));if(i.length){wt.dataSelect.ids=i;let n=wt.dataSelect.nodes;1==n.length?(0,O.y)(n[0]):n.length>1&&(0,S.Q)(n)}}}var Rt=f(9942);class Xt{createNodeImage(i,n){var r,a,o,y;let{nodeId:v,element:E,size:p,attribute:z,source:U}=(0,Y.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},source:{type:"image",image:(0,Rt.I)(i)}});(lt=>{if(!lt)return;let ht=new Image;ht.onload=()=>{let ot=(0,N.q)(ht.naturalWidth/ht.naturalHeight,100);ot>=1?(p.width=Math.min(ht.naturalWidth,512),p.height=(0,N.q)(p.width/ot,100)):(p.height=Math.min(ht.naturalHeight,512),p.width=(0,N.q)(p.height*ot,100)),p.x=(0,N.q)(p.x+50-p.width/2,100),p.y=(0,N.q)(p.y+50-p.height/2,100),Object.assign(z,(0,Z.sg)(A.$.IMAGE,p)),(0,x.__)(E,z),wt.data.node=Object.assign({id:v,type:A.$.IMAGE,name:"Image"},{size:p,attribute:z,source:U})},ht.onerror=ot=>{console.error(`ImgSrc load failed -> ${lt}`,ot),null==E||E.remove()},ht.src=lt})(null!==(o=null===(y=U.image)||void 0===y?void 0:y.url)&&void 0!==o?o:"")}createNodeIframe(i,n){var r,a;let{nodeId:y,element:g,size:v,attribute:E,style:p,source:z}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Rt.I)(i)}});(U=>{let lt=(null===(U=wt.data.slide)||void 0===U||null===(U=U.svg)||void 0===U?void 0:U.viewBox)||{x:0,y:0,width:100,height:100},ht=(0,N.q)(lt.width/lt.height,100);ht>=1?(v.width=Math.min(lt.width,512),v.height=(0,N.q)(v.width/ht,100)):(v.height=Math.min(lt.height,512),v.width=(0,N.q)(v.height*ht,100)),v.x=(0,N.q)(v.x+50-v.width/2,100),v.y=(0,N.q)(v.y+50-v.height/2,100),Object.assign(E,(0,Z.sg)(A.$.IMAGE,v)),(0,x.__)(g,E),wt.data.node=Object.assign({id:y,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:v,attribute:E,style:p,source:z})})()}createNodeEmbed(i,n){var r,a;let{nodeId:y,element:g,size:v,attribute:E,style:p,source:z}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},style:{},source:{type:"embed",embed:Object.assign(i,(0,Rt.I)(i))}});(U=>{let lt=(null===(U=wt.data.slide)||void 0===U||null===(U=U.svg)||void 0===U?void 0:U.viewBox)||{x:0,y:0,width:100,height:100},ht=(0,N.q)(lt.width/lt.height,100);ht>=1?(v.width=Math.min(lt.width,512),v.height=(0,N.q)(v.width/ht,100)):(v.height=Math.min(lt.height,512),v.width=(0,N.q)(v.height*ht,100)),v.x=(0,N.q)(v.x+50-v.width/2,100),v.y=(0,N.q)(v.y+50-v.height/2,100),Object.assign(E,(0,Z.sg)(A.$.IMAGE,v)),(0,x.__)(g,E),wt.data.node=Object.assign({id:y,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:v,attribute:E,style:p,source:z})})()}createNodeMedia(i,n){var r,a,o,y;let{nodeId:v,element:E,size:p,attribute:z,source:U}=(0,Y.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},source:{type:"image",image:(0,Rt.I)(i.cover)}}),lt={click:{media:i.media}};(ht=>{if(!ht)return;let ot=new Image;ot.onload=()=>{let Ut=(0,N.q)(ot.naturalWidth/ot.naturalHeight,100);Ut>=1?(p.width=Math.min(ot.naturalWidth,512),p.height=(0,N.q)(p.width/Ut,100)):(p.height=Math.min(ot.naturalHeight,512),p.width=(0,N.q)(p.height*Ut,100)),p.x=(0,N.q)(p.x+50-p.width/2,100),p.y=(0,N.q)(p.y+50-p.height/2,100),Object.assign(z,(0,Z.sg)(A.$.IMAGE,p)),(0,x.__)(E,z),wt.data.node=Object.assign({id:v,type:A.$.IMAGE,name:"Image"},{size:p,attribute:z,source:U,interactive:lt})},ot.onerror=Ut=>{console.error(`ImgSrc load failed -> ${ht}`,Ut),null==E||E.remove()},ot.src=ht})(null!==(o=null===(y=U.image)||void 0===y?void 0:y.url)&&void 0!==o?o:"")}insert(i){var n;if(wt.data.insertSlide(wt.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});wt.data.node=Object.assign({id:r,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g})}if(i.description){let{nodeId:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});wt.data.node=Object.assign({id:r,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:o}=(0,ct.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});wt.data.node=Object.assign({id:r,type:A.$.RECT,name:"Rect"},{size:a,attribute:o})})(),(r=>{let{nodeId:a,size:o,attribute:y,style:g,source:v}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});wt.data.node=Object.assign({id:a,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:o,attribute:y,style:g,source:v})})())}}var jt=f(5226);class Jt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:wt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((o,y)=>y==this._slideIdx),r=null==n?void 0:n.svg,a=o=>{let y=[];return o.filter(g=>!g.isdeleted).forEach(g=>{g.type==A.$.GROUP?y=y.concat(a(g.nodes||[])):y.push(g.id)}),y};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,o;return null===(a=r)||void 0===a||a.filter(y=>y.type==A.$.GROUP).forEach(y=>{var g;y.nodes=n(null===(g=y.nodes)||void 0===g?void 0:g.filter(v=>!v.isdeleted))}),(r=null===(o=r)||void 0===o?void 0:o.filter(y=>{var g,v;return y.type!=A.$.GROUP||(null!==(g=null===(v=y.nodes)||void 0===v?void 0:v.length)&&void 0!==g?g:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(o=>!o.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,o,y,g,v,E,p,z;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(o=r.svg)||void 0===o||o.nodes.forEach(U=>{var lt,ht,ot,Ut,se,fe,pe,xe,me,ke;n.push(null===(lt=U.source)||void 0===lt||null===(lt=lt.image)||void 0===lt?void 0:lt.path),n.push(null===(ht=U.source)||void 0===ht||null===(ht=ht.audio)||void 0===ht?void 0:ht.path),n.push(null===(ot=U.source)||void 0===ot||null===(ot=ot.video)||void 0===ot?void 0:ot.path),n.push(null===(Ut=U.source)||void 0===Ut||null===(Ut=Ut.file)||void 0===Ut?void 0:Ut.path),n.push(null===(se=U.source)||void 0===se||null===(se=se.iframe)||void 0===se?void 0:se.path),n.push(null===(fe=U.source)||void 0===fe||null===(fe=fe.track)||void 0===fe?void 0:fe.path),n.push(null===(pe=U.interactive)||void 0===pe||null===(pe=pe.show)||void 0===pe||null===(pe=pe.audio)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),n.push(null===(xe=U.interactive)||void 0===xe||null===(xe=xe.click)||void 0===xe||null===(xe=xe.audio)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),n.push(null===(me=U.interactive)||void 0===me||null===(me=me.click)||void 0===me||null===(me=me.image)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),n.push(null===(ke=U.interactive)||void 0===ke||null===(ke=ke.click)||void 0===ke||null===(ke=ke.video)||void 0===ke||null===(ke=ke.source)||void 0===ke?void 0:ke.path)}),n.push(null===(y=r.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),n.push(null===(g=r.test)||void 0===g||null===(g=g.audiofalse)||void 0===g?void 0:g.path),n.push(null===(v=r.test)||void 0===v||null===(v=v.effecttrue)||void 0===v?void 0:v.path),n.push(null===(E=r.test)||void 0===E||null===(E=E.effectfalse)||void 0===E?void 0:E.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.icontrue)||void 0===p?void 0:p.path),n.push(null===(z=r.test)||void 0===z||null===(z=z.iconfalse)||void 0===z?void 0:z.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,o)=>o.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,x.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,o;return null===(a=r)||void 0===a||a.filter(y=>y.type==A.$.GROUP).forEach(y=>{var g;y.nodes=n(null===(g=y.nodes)||void 0===g?void 0:g.filter(v=>!v.isdeleted))}),(r=null===(o=r)||void 0===o?void 0:o.filter(y=>{var g,v;return y.type!=A.$.GROUP||(null!==(g=null===(v=y.nodes)||void 0===v?void 0:v.length)&&void 0!==g?g:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(o=>!o.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,x.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,x.wM)(),(0,jt.E)(this.slide)}openSlide(i,n){var r,a,o,y;if(i)for(let z=0,U=null!==(g=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==g?g:0;z<U;z++){var g,v,E;if((null!==(E=this._dataSource.slides)&&void 0!==E?E:[])[z].id==i){this._slideIdx=z;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var p;this._slideIdx=0,null!==(p=this._dataSource.slides)&&void 0!==p&&p.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,x.wM)(),(0,jt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(o=null===(y=this._dataSource.slides)||void 0===y?void 0:y.length)&&void 0!==o?o:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,n,r){var a,o,y,g,v;let E=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(z=>z.id==i);if(!r||!E||null!=E&&null!==(o=E.svg)&&void 0!==o&&o.nodes.filter(z=>!z.isdeleted).length)return this.insertSlide(i,n,r);let p=null!==(y=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(E))&&void 0!==y?y:0;null===(v=this._dataSource.slides)||void 0===v||v.splice(p,1,r),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,o,y,g,v;let E=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(U=>U.id==i))&&void 0!==a?a:this._defaultSlide,p=(null!==(y=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(E))&&void 0!==y?y:0)+n;var z;r?(r.id=this.newSlideId,r.code=void 0,r.name||(r.name="Trang m\u1edbi"),null!==(z=r.svg)&&void 0!==z&&z.viewBox||r.svg&&(r.svg.viewBox=wt.screen.frameSize)):r=this._defaultSlide,null===(v=this._dataSource.slides)||void 0===v||v.splice(p,0,r),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,o,y,g,v;let E=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(U=>U.id==i))&&void 0!==n?n:this._defaultSlide,p=(null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(E))&&void 0!==a?a:0)+1,z=Object.assign(JSON.parse(JSON.stringify(E)),{id:this.newSlideId,code:void 0,name:`${E.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(p,0,z),this.changeSlide(this.slides,this.slideIdx,null!==(g=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==g?g:0,this.slide)}moveSlide(i,n){var r,a,o,y,g,v;let E=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,p=null!==(o=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(E))&&void 0!==o?o:0;null===(g=this._dataSource.slides)||void 0===g||g.splice(p+n,0,null===(v=this._dataSource.slides)||void 0===v?void 0:v.splice(p,1)[0])}deleteSlide(i){var n,r,a,o,y,g;let v=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(U=>U.id==i))&&void 0!==n?n:this._defaultSlide,E=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(v))&&void 0!==a?a:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(E,1),null!==(g=this._dataSource.slides)&&void 0!==g&&g.length)if(E<this._slideIdx){var p,z;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(z=this._dataSource.slides)||void 0===z?void 0:z.length)&&void 0!==p?p:0,this.slide)}else E==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,o,y;let g=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(E=>E.id==i))&&void 0!==n?n:this._defaultSlide,v=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(g))&&void 0!==a?a:0;if(g.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(E=>!E.isdeleted))&&void 0!==y&&y.length){let E=!0;for(;g.isdeleted;)E?v++:v--,this._dataSource.slides[v]?g=this._dataSource.slides[v]:E=!E;this.openSlide(g.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(o=>o(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((y,g)=>g==this._slideIdx),o=null==a?void 0:a.svg;null!=o&&o.nodes&&(null==o||o.nodes.push(i)),wt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((U,lt)=>lt==this._slideIdx),a=null==r?void 0:r.svg,o=(U,lt)=>{let ht=null==U?void 0:U.find(se=>se.id==i);if(ht)return ht.pid=lt,ht;let ot=0,Ut=U.length||0;for(;ot<Ut&&!ht&&(ht=o(U[ot].nodes||[],U[ot].id),!ht);)ot++;return ht},y=o((null==a?void 0:a.nodes)||[]);var g,v,E,p,z;return y?(y.style=null!==(g=y.style)&&void 0!==g?g:{},y.source=null!==(v=y.source)&&void 0!==v?v:{},y.animate=null!==(E=y.animate)&&void 0!==E?E:{},y.interactive=null!==(p=y.interactive)&&void 0!==p?p:{},y.variable=null!==(z=y.variable)&&void 0!==z?z:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((g,v)=>v==this._slideIdx),a=null==r?void 0:r.svg,y=g=>{let v=(null==g?void 0:g.find(ht=>ht.id==i))||(g=>{let v=null,E=0,p=g.length||0;for(;E<p&&!v;){if(v=y(g[E].nodes),v){v.pid=g[E].id;break}E++}var z,U,lt,ht,ot;return v&&(v.style=null!==(z=v.style)&&void 0!==z?z:{},v.source=null!==(U=v.source)&&void 0!==U?U:{},v.animate=null!==(lt=v.animate)&&void 0!==lt?lt:{},v.interactive=null!==(ht=v.interactive)&&void 0!==ht?ht:{},v.variable=null!==(ot=v.variable)&&void 0!==ot?ot:{}),v})((null==g?void 0:g.filter(ht=>ht.type==A.$.GROUP))||[]);var E,p,z,U,lt;return v&&(v.style=null!==(E=v.style)&&void 0!==E?E:{},v.source=null!==(p=v.source)&&void 0!==p?p:{},v.animate=null!==(z=v.animate)&&void 0!==z?z:{},v.interactive=null!==(U=v.interactive)&&void 0!==U?U:{},v.variable=null!==(lt=v.variable)&&void 0!==lt?lt:{}),v};return y((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,o){var y;let g=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,z)=>z==this._slideIdx),v=null==g?void 0:g.svg,E=p=>{let z=[];return p.filter(U=>!U.isdeleted).forEach(U=>{U.type==A.$.GROUP?z=z.concat(E(U.nodes||[])):i>U.size.x||n>U.size.y||r<U.size.x+U.size.width||a<U.size.y+U.size.height||(o?U.type==o&&z.push(U.id):z.push(U.id))}),z};return E((null==v?void 0:v.nodes)||[])}getNodeOnArea(i,n,r,a,o){var y;let g=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,z)=>z==this._slideIdx),v=null==g?void 0:g.svg,E=p=>{let z=[];return p.filter(U=>!U.isdeleted).forEach(U=>{U.type==A.$.GROUP?z=z.concat(E(U.nodes||[])):U.size.x+U.size.width<i||U.size.y+U.size.height<n||U.size.x>r||U.size.y>a||(o?U.type==o&&z.push(U.id):z.push(U.id))}),z};return E((null==v?void 0:v.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,jt.E)(this.slide),(0,jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),o=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:o})),Object.assign(a,{isdeleted:!0}),(0,jt.E)(this.slide),(0,jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),o}addGroup(i,n){var r;let a=this.getNode(i),o=this.getNode(n);o.nodes=o.nodes||[];let y=Math.ceil(1e9*Math.random());return o.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:y})),Object.assign(a,{isdeleted:!0}),(0,jt.E)(this.slide),(0,jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),y}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(o=>o.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let o=i.map(lt=>wt.data.getNode(lt)).filter(lt=>!lt.isfake),{x1:y,y1:g,x2:v,y2:E}=Yt(o),p=this.getNodeOnArea(y,g,v,E);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((lt,ht)=>{lt.index=ht+1});let z=p.map(lt=>{var ht,ot;return null!==(ht=null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||null===(ot=ot.nodes.find(Ut=>Ut.id==lt))||void 0===ot?void 0:ot.index)&&void 0!==ht?ht:0}),U=Math.max.apply(null,z);i.forEach((lt,ht)=>{var ot;null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||ot.nodes.filter(Ut=>Ut.id==lt).forEach(Ut=>{Ut.index=U+(ht+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((lt,ht)=>{var ot,Ut;return(null!==(ot=lt.index)&&void 0!==ot?ot:0)-(null!==(Ut=ht.index)&&void 0!==Ut?Ut:0)}),(0,jt.T)(this.slide),null===(a=window.document.getElementById(ut.O.SELECT_GROUP))||void 0===a||a.remove(),(0,S.Q)(o)}sendToBack(i){var n,r,a;let o=i.map(lt=>wt.data.getNode(lt)).filter(lt=>!lt.isfake),{x1:y,y1:g,x2:v,y2:E}=Yt(o),p=this.getNodeOnArea(y,g,v,E);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((lt,ht)=>{lt.index=ht+1});let z=p.map(lt=>{var ht,ot;return null!==(ht=null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||null===(ot=ot.nodes.find(Ut=>Ut.id==lt))||void 0===ot?void 0:ot.index)&&void 0!==ht?ht:0}),U=Math.min.apply(null,z)-1;i.forEach((lt,ht)=>{var ot;null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||ot.nodes.filter(Ut=>Ut.id==lt).forEach(Ut=>{Ut.index=U+(ht+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((lt,ht)=>{var ot,Ut;return(null!==(ot=lt.index)&&void 0!==ot?ot:0)-(null!==(Ut=ht.index)&&void 0!==Ut?Ut:0)}),(0,jt.T)(this.slide),null===(a=window.document.getElementById(ut.O.SELECT_GROUP))||void 0===a||a.remove(),(0,S.Q)(o)}}const Yt=C=>{let i=999999,n=999999,r=-999999,a=-999999;return C.forEach(o=>{i=Math.min(i,o.size.x),n=Math.min(n,o.size.y),r=Math.max(r,o.size.x+o.size.width),a=Math.max(a,o.size.y+o.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class oe{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":wt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":wt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:o,attribute:y}=wt.data.getNode(n.from.id);Object.assign(o,n.from.size),Object.assign(y,(0,Z.sg)(a,o)),(0,x.__)(window.document.getElementById(r),y);break}case"attribute":{let{id:r,attribute:a}=wt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,x.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=wt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,x.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:o}=wt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.source),(0,x.QI)(window.document.getElementById(r),a,null!=o?o:{});break}case"animate":{let{animate:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),wt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":wt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":wt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:o,attribute:y}=wt.data.getNode(n.to.id);Object.assign(o,n.to.size),Object.assign(y,(0,Z.sg)(a,o)),(0,x.__)(window.document.getElementById(r),y);break}case"attribute":{let{id:r,attribute:a}=wt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,x.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=wt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,x.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:o}=wt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.source),(0,x.QI)(window.document.getElementById(r),a,null!=o?o:{});break}case"animate":{let{animate:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),wt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class _e{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var o={x:Math.max(0,Math.min((0,N.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,N.q)(n.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*o.x,y:(this._height/i-this._height/this._scale)*o.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,x.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var ve=f(644);class ge{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,ve.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,ve.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Oe=f(1690),ni=f(5973),ri=f(4787),Ae=function(C){return C&&JSON.parse(JSON.stringify(C))},Ge=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ze=[],ai={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},oi={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ti{constructor(){this._data_variables=Ae(Ge).concat(Ae(Ze)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Ae(Ge).concat(Ae(Ze)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),Ge.forEach(r=>{var a=this._data_variables.filter(o=>o.key==r.key);a.length?a.forEach(function(o,y,g){o.type=r.type,o.readonly=r.readonly,o.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Ae(ai)}getConditionTemp(){return Ae(oi)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Ae((C=this._data_variables,i="key",function(n){for(var r of C.map(function(a){return a[i]}).sort())C.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),C=C.filter(function(a){return a[i]!=r});return n}([]))):Ae(Ge).concat(Ae(Ze));var C,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ge.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,o,y)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Ae(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(o=>o.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(o=>o.key==i);a.length?a.forEach(function(o,y,g){o.value=n,o.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(y){return y.key==i});if(r.length){var o,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?o=!1:"boolean"==typeof a.value?o=a.value:(o=(a.value+"").toLowerCase(),o="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),o}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(y){return y.key==i});if(a.length){var o=a[0];this.OnSetActionExecuting(o),o&&(o.value=n),this.OnSetActionExecuted(o)}}}getConditionAll(){return Ae(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Ae(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,o){return a+o})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,o){return a+o})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,o){return a+o})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,o){return a+o});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,o){return a+o});case"sub":return n.reduce(function(a,o){return a-o});case"pro":return n.reduce(function(a,o){return a*o});case"div":return n.reduce(function(a,o){return a/o});case"avg":var r=n.reduce(function(a,o){return a+o})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,o){return a&&o});case"or":return n.reduce(function(a,o){return a||o});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Ae(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Ae(n),{variable:r})));break;case"slide":Oe.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ri.L5)({id:n.node,nodeStatus:Oe.$.nodeStatus,slideStatus:Oe.$.slideStatus});let o=Oe.$.findNode(n.node);null!=o&&null!==(a=o.interactive)&&void 0!==a&&a.click&&(0,ni.F)(o,Oe.$.nodeStatus,Oe.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Xe{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case B._.PEN:this._pen_type=n;break;case B._.SHAPE:this._shape_type=n,r&&n===A.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const wt=new class si{constructor(){this._container="",this._svg="",this._screen=_e.prototype,this._data=Jt.prototype,this._dataSelect=Tt.prototype,this._slide=Xt.prototype,this._history=oe.prototype,this._attribute=ge.prototype,this._pointer=Xe.prototype,this._variable=ti.prototype,this._data=new Jt,this._dataSelect=new Tt,this._slide=new Xt,this._history=new oe,this._attribute=new ge,this._pointer=new Xe,this._variable=new ti,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,o;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(o=null==i?void 0:i.top)&&void 0!==o?o:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new _e,(C=>{new x.Mh(C.container,C.target),wt.pointer.onchange=(r,a,o)=>{switch(r){case B._.POINTER:jQuery(C.target).css({cursor:"auto"});break;case B._.HAND:jQuery(C.target).css({cursor:"grab"});break;case B._.PEN:switch(a){case T.D.DRAW:jQuery(C.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case T.D.HIGHTLIGH:jQuery(C.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case B._.ERASER:jQuery(C.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case B._.SHAPE:jQuery(C.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case B._.TEXT:case B._.FOREIGNOBJECT:jQuery(C.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(C.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{wt.pointer.pointer_type==B._.HAND&&jQuery(C.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{wt.pointer.pointer_type==B._.HAND&&jQuery(C.target).css({cursor:"grab"})}),jQuery(C.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var o=wt.screen.scale,y=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;wt.screen.scaleTo(o-.04*o*y,(0,X.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},wt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{wt.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(C.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{wt.screen.actived=!0}),jQuery(C.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{wt.screen.actived=!1}),jQuery(C.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(C.container.includes("#")&&C.container.includes(r.target.getAttribute("id"))||C.container.includes(".")&&C.container.includes(r.target.getAttribute("class"))||C.container.includes(r.target.nodeName))&&(wt.pointer.pointer_type_temp||wt.pointer.pointer_type)===B._.POINTER&&(wt.dataSelect.ids=[])}),jQuery(C.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(wt.pointer.pointer_type_temp||wt.pointer.pointer_type){case B._.POINTER:M(r);break;case B._.HAND:(C=>{(0,c.A)(C,new it,1,{x:0,y:0})})(r);break;case B._.PEN:(0,pt.i)(r);break;case B._.SHAPE:(C=>{var i=null;switch(wt.pointer.shape_type){case A.$.CIRCLE:i=new nt;break;case A.$.ELLIPSE:i=new mt;break;case A.$.LINE:i=new Dt;break;case A.$.RECT:i=new tt;break;case A.$.POLYGON:var n;i=new Wt(null===(n=H.find(r=>r.type==wt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case A.$.FOREIGNOBJECT:i=new dt;break;case A.$.IMAGE:i=new xt;break;case A.$.TEXT:case A.$.PATH:i=new Mt}i&&(0,c.A)(C,i)})(r);break;case B._.FOREIGNOBJECT:(C=>{(0,c.A)(C,new dt)})(r);break;case B._.IMAGE:(C=>{(0,c.A)(C,new xt)})(r);break;case B._.TEXT:(C=>{(0,c.A)(C,new F)})(r);break;case B._.ERASER:(C=>{(0,c.A)(C,new j)})(r);break;case B._.INDEX:(0,V.s)(r)}};let n=!1;jQuery(C.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(C.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),C.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{wt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Zt.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{wt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Zt.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(ce,At,f)=>{f.d(At,{s:()=>S,Q:()=>_});var B=f(1687),x=f(4981),ut=f(4318),A=f(6816),Z=f(4080);const S=M=>{var b,it,W,H;let at=(null===(b=M.mouseEvent)||void 0===b?void 0:b.target)||(null===(it=M.touchEvent)||void 0===it?void 0:it.target),N=(null==at?void 0:at.getAttribute("id"))||"",nt=null==at?void 0:at.nodeName,gt=jQuery(at).parents("g[id]").attr("id")||"";if(![B.O.INDEX_GROUP].includes(gt))if(null!==(W=M.mouseEvent)&&void 0!==W&&W.altKey||null!==(H=M.touchEvent)&&void 0!==H&&H.altKey||!N||N.match(/[^0-9]/)||!x.icdt.dataSelect.nodeName.includes(nt)){var mt;x.icdt.dataSelect.ids.length&&(x.icdt.dataSelect.ids=[]),(0==(null===(mt=M.mouseEvent)||void 0===mt?void 0:mt.button)||M.touchEvent)&&((M,b)=>{let N=(0,Z.g1)(B.O.SCAN_GROUP,"g"),nt=(0,ut.bH)(0,0,1,1);(0,Z.vl)(N,nt),((M,b,it,W)=>{(0,A.A)(M,{start:N=>{},move:(N,nt)=>{((N,nt,gt,mt)=>{b=(0,ut.bH)(N,nt,gt,mt),(0,Z.vl)(it,b)})(nt[0][0],nt[0][1],N.x,N.y)},end:(N,nt)=>{null==it||it.remove(),x.icdt.dataSelect.ids=x.icdt.data.getNodeInArea(Math.min(nt[0][0],N.x),Math.min(nt[0][1],N.y),Math.max(nt[0][0],N.x),Math.max(nt[0][1],N.y)),W(x.icdt.dataSelect.nodes)}})})(M,nt,N,b)})(M,q)}else{var ct,tt;let D=parseFloat(N||"0");x.icdt.dataSelect.ids=null!==(ct=M.mouseEvent)&&void 0!==ct&&ct.shiftKey||null!==(tt=M.touchEvent)&&void 0!==tt&&tt.shiftKey?[D].concat(x.icdt.dataSelect.ids).filter((Lt,Dt,le)=>le.indexOf(Lt)==Dt):[D],q(x.icdt.dataSelect.nodes)}},q=M=>{var b,it;let W=1;var H,at;if(M.length&&(W=Math.max.apply(null,null!==(H=null===(at=x.icdt.data.slide)||void 0===at||null===(at=at.svg)||void 0===at?void 0:at.nodes.map(nt=>{var gt;return null!==(gt=nt.idx)&&void 0!==gt?gt:0}))&&void 0!==H?H:[0])+1),1==M.length)M[0].idx||(M[0].idx=W,M[0].time=0);else if(M.length>=0){let nt=M.map(mt=>{var ct;return null!==(ct=mt.idx)&&void 0!==ct?ct:0}).filter(mt=>mt>0),gt=nt.length?Math.min.apply(null,nt):W;M.forEach(mt=>{var ct;mt.idx=gt,mt.time=null!==(ct=mt.time)&&void 0!==ct?ct:0})}let N=(0,Z.g1)(B.O.INDEX_GROUP,"g");(0,Z.mo)(N,null!==(b=null===(it=x.icdt.data.slide)||void 0===it||null===(it=it.svg)||void 0===it?void 0:it.nodes)&&void 0!==b?b:[])},_=M=>{var b,it,W;null!=M&&null!==(b=M.svg)&&void 0!==b&&b.nodes&&M.svg.nodes.forEach(at=>{at.idx=0,at.time=null});let H=(0,Z.g1)(B.O.INDEX_GROUP,"g");(0,Z.mo)(H,null!==(it=null===(W=x.icdt.data.slide)||void 0===W||null===(W=W.svg)||void 0===W?void 0:W.nodes)&&void 0!==it?it:[])}},4578:(ce,At,f)=>{f.d(At,{h:()=>b,t:()=>it});var B=f(644),x=f(7308),ut=f(968),A=f(4981),Z=f(666),c=f(2966),O=f(5226),S=f(3423),q=f(5811),_=f(3385);const b=new class M{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:x.s.Escape,fn:()=>{A.icdt.dataSelect.ids.length&&(A.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:x.s.Delete,fn:()=>{A.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:x.s.Space,fn:()=>{A.icdt.pointer.pointer_type_temp=ut._.HAND}},this.onchange={type:"keyup",key:x.s.Space,fn:()=>{A.icdt.pointer.pointer_type_temp=ut._.POINTER}},this.onchange={type:"keydown",key:x.s.ArrowLeft,fn:()=>{A.icdt.dataSelect.ids.length||A.icdt.data.backSlide()}},this.onchange={type:"keydown",key:x.s.ArrowRight,fn:()=>{A.icdt.dataSelect.ids.length||A.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:x.s.ArrowLeft,fn:()=>{A.icdt.dataSelect.ids.length&&(A.icdt.dataSelect.nodes.forEach(H=>{(0,_.k6)(H,(0,q.q)(H.size.x-(0,S.v)(1)))}),1==A.icdt.dataSelect.ids.length?(0,Z.y)(A.icdt.dataSelect.nodes[0]):(0,c.Q)(A.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowRight,fn:()=>{A.icdt.dataSelect.ids.length&&(A.icdt.dataSelect.nodes.forEach(H=>{(0,_.k6)(H,(0,q.q)(H.size.x+(0,S.v)(1)))}),1==A.icdt.dataSelect.ids.length?(0,Z.y)(A.icdt.dataSelect.nodes[0]):(0,c.Q)(A.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowUp,fn:()=>{A.icdt.dataSelect.ids.length&&(A.icdt.dataSelect.nodes.forEach(H=>{(0,_.co)(H,(0,q.q)(H.size.y-(0,S.v)(1)))}),1==A.icdt.dataSelect.ids.length?(0,Z.y)(A.icdt.dataSelect.nodes[0]):(0,c.Q)(A.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowDown,fn:()=>{A.icdt.dataSelect.ids.length&&(A.icdt.dataSelect.nodes.forEach(H=>{(0,_.co)(H,(0,q.q)(H.size.y+(0,S.v)(1)))}),1==A.icdt.dataSelect.ids.length?(0,Z.y)(A.icdt.dataSelect.nodes[0]):(0,c.Q)(A.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.Digit1,fn:H=>{H.shiftKey&&(A.icdt.reloadView(),A.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:x.s.KeyA,fn:H=>{if(H.ctrlKey){A.icdt.dataSelect.ids=A.icdt.data.getNodeAll();let at=A.icdt.dataSelect.nodes;1==at.length?(0,Z.y)(at[0]):at.length>1&&(0,c.Q)(at)}}},this.onchange={type:"keydown",key:x.s.KeyC,fn:H=>{if(H.ctrlKey){let at=A.icdt.dataSelect.nodes;at&&(0,B.yR)({params:{type:"nodes",nodes:at}})}}},this.onchange={type:"keydown",key:x.s.KeyV,fn:H=>{H.ctrlKey&&(0,B.aY)({callback:at=>{var N,nt;"nodes"==(null==at?void 0:at.type)&&null!=at&&null!==(N=at.nodes)&&void 0!==N&&N.length&&(null==at||null===(nt=at.nodes)||void 0===nt||nt.forEach(gt=>{gt.id=Math.ceil(1e9*Math.random()),A.icdt.data.node=gt}),(0,O.E)(A.icdt.data.slide))}})}},this.onchange={type:"keydown",key:x.s.KeyZ,fn:H=>{H.ctrlKey&&H.shiftKey?A.icdt.history.redo():H.ctrlKey&&A.icdt.history.undo()}}}set onchange(H){let at=this._fnChanges.find(N=>N.eventType==H.type&&N.eventKey==H.key);at?at.fns.push(H.fn):this._fnChanges.push({eventType:H.type,eventKey:H.key,fns:[H.fn]})}change(H,at,N){var nt;null===(nt=this._fnChanges.find(gt=>gt.eventType==H&&gt.eventKey==at))||void 0===nt||nt.fns.forEach(gt=>gt(N))}},it=W=>{b.change(W.type,W.keyCode||W.which||W.charCode||0,W)}},410:(ce,At,f)=>{f.d(At,{a:()=>S});var B=f(4318),x=f(8419),ut=f(9054),A=f(4080),Z=f(511),c=f(3423),O=f(1687);class S{constructor(_){var M;let b={stroke:"#FF0000",strokeWidth:(0,c.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,c.v)(8)},{element:W,attribute:H,size:at}=(0,x.G)(Math.ceil(1e9*Math.random()),{size:_});window.document.getElementById(O.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ct=>null==ct?void 0:ct.remove()),null===(M=window.document.getElementById(O.O.INTERACTIVE_GROUP))||void 0===M||M.appendChild(W),(0,A.__)(W,b);let nt="";return{start:ct=>{nt=`M ${ct.x} ${ct.y} L ${ct.x} ${ct.y}`},move:(ct,tt)=>{((ct,tt)=>{nt+=` ${ct} ${tt}`,W.setAttribute("d",nt)})(ct.x,ct.y)},end:(ct,tt)=>{(ct=>{let D=Z.jvg().x(Wt=>Wt[0]).y(Wt=>Wt[1]).curve(Z.$0Z)(ct);W.setAttribute("d",D),ct.length>=2&&(window.interactivePoints=ct)})(tt),(ct=>{let tt=9999,D=9999,Wt=-9999,Lt=-9999;ct.forEach(Dt=>{tt=Math.min(tt,Dt[0]),D=Math.min(D,Dt[1]),Wt=Math.max(Wt,Dt[0]),Lt=Math.max(Lt,Dt[1])}),at=(0,B.bH)(tt,D,Wt,Lt,{points:ct}),Object.assign(H,(0,B.sg)(ut.$.PATH,at),b)})(tt)}}}}},9623:(ce,At,f)=>{f.d(At,{U:()=>W,i:()=>it});var B=f(1687),x=f(9125),ut=f(4981),A=f(6816),Z=f(4080),c=f(4318),O=f(8419),S=f(9054),q=f(511);class _{constructor(){let at={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:N,element:nt,attribute:gt,size:mt}=(0,O.G)(Math.ceil(1e9*Math.random()));(0,Z.__)(nt,gt);let tt="";return{start:Lt=>{tt=`M ${Lt.x} ${Lt.y} L ${Lt.x} ${Lt.y}`},move:(Lt,Dt)=>{((Lt,Dt)=>{tt+=` ${Lt} ${Dt}`,nt.setAttribute("d",tt)})(Lt.x,Lt.y)},end:(Lt,Dt)=>{(Lt=>{let le=q.jvg().x(Mt=>Mt[0]).y(Mt=>Mt[1]).curve(q.$0Z)(Lt);nt.setAttribute("d",le)})(Dt),(Lt=>{let Dt=9999,le=9999,Mt=-9999,Gt=-9999;Lt.forEach(dt=>{Dt=Math.min(Dt,dt[0]),le=Math.min(le,dt[1]),Mt=Math.max(Mt,dt[0]),Gt=Math.max(Gt,dt[1])}),mt=(0,c.bH)(Dt,le,Mt,Gt,{points:Lt}),Object.assign(gt,(0,c.sg)(S.$.PATH,mt),at)})(Dt),ut.icdt.data.node=Object.assign({id:N,type:S.$.PATH,name:"Path"},{size:mt,attribute:gt})}}}}class M{constructor(){let at={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:N,element:nt,attribute:gt,size:mt}=(0,O.G)(Math.ceil(1e9*Math.random()));(0,Z.__)(nt,gt);let tt="";var D=(Wt,Lt)=>{tt+=` ${Wt} ${Lt}`,nt.setAttribute("d",tt)};return{start:Wt=>{tt=`M ${Wt.x} ${Wt.y} L ${Wt.x} ${Wt.y}`},move:(Wt,Lt)=>{D(Wt.x,Wt.y)},end:(Wt,Lt)=>{D(Wt.x,Wt.y),(Wt=>{let Lt=9999,Dt=9999,le=-9999,Mt=-9999;Wt.forEach(Gt=>{Lt=Math.min(Lt,Gt[0]),Dt=Math.min(Dt,Gt[1]),le=Math.max(le,Gt[0]),Mt=Math.max(Mt,Gt[1])}),mt=(0,c.bH)(Lt,Dt,le,Mt,{points:Wt}),Object.assign(gt,(0,c.sg)(S.$.PATH,mt),at)})(Lt),ut.icdt.data.node=Object.assign({id:N,type:S.$.PATH,name:"Path"},{size:mt,attribute:gt})}}}}var b=f(410);const it=H=>{switch(ut.icdt.pointer.pen_type){case x.D.DRAW:(0,A.A)(H,new _);break;case x.D.HIGHTLIGH:(0,A.A)(H,new M);break;case x.D.INTERACTIVE:W(H)}},W=H=>{var at,N;let nt=(0,Z.g1)(B.O.INTERACTIVE_GROUP,"g"),gt=null!==(at=null===(N=ut.icdt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.viewBox)&&void 0!==at?at:(()=>{let{width:mt,height:ct}=ut.icdt.screen.get;return{x:0,y:0,width:mt,height:ct}})();(0,Z.XH)(nt,gt),H&&(0,A.A)(H,new b.a)}},666:(ce,At,f)=>{f.d(At,{y:()=>O});var B=f(1687),x=f(4981),ut=f(4318),A=f(6816),Z=f(4080),c=f(5811);const O=_=>{let M=(0,Z.g1)(B.O.RESIZE_GROUP,"g");(0,Z.hJ)(M,_).forEach(b=>{S(b.element,b.posType,_,M)})},S=(_,M,b,it)=>{let W=!1;null==_||_.addEventListener("touchstart",H=>{W=!0,q({touchEvent:H},M,b,it)}),null==_||_.addEventListener("mousedown",H=>{if(0==H.button){if(W)return void(W=!1);q({mouseEvent:H},M,b,it)}})},q=(_,M,b,it)=>{let D,{id:W,type:H,size:at,attribute:N}=b,{x:nt,y:gt,width:mt,height:ct}=at,tt=(mt||1)/(ct||1),Lt=null,Mt=!1;(0,A.A)(_,{start:dt=>{Lt=JSON.parse(JSON.stringify({id:W,size:at,attribute:N}))},move:(dt,Y)=>{((dt,Y,xt,St)=>{switch(M){case"rect-center":var Zt,pt;D=null!==(Zt=_.mouseEvent)&&void 0!==Zt&&Zt.shiftKey||null!==(pt=_.touchEvent)&&void 0!==pt&&pt.shiftKey?Math.abs(xt-dt)>=Math.abs(St-Y)?{x:nt+xt-dt,y:gt,width:mt,height:ct}:{x:nt,y:gt+St-Y,width:mt,height:ct}:{x:nt+xt-dt,y:gt+St-Y,width:mt,height:ct};break;case"rect-top-left":var ne,G,R,u,J,yt,ft,Ot;D=(null!==(ne=_.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(G=_.touchEvent)&&void 0!==G&&G.shiftKey)&&(null!==(R=_.mouseEvent)&&void 0!==R&&R.altKey||null!==(u=_.touchEvent)&&void 0!==u&&u.altKey)?tt>=1?{x:nt+(xt-dt),y:gt+(xt-dt)/tt,width:mt-2*(xt-dt),height:ct-2*(xt-dt)/tt}:{x:nt+(St-Y)*tt,y:gt+(St-Y),width:mt-2*(St-Y)*tt,height:ct-2*(St-Y)}:null!==(J=_.mouseEvent)&&void 0!==J&&J.shiftKey||null!==(yt=_.touchEvent)&&void 0!==yt&&yt.shiftKey?tt>=1?{x:nt+(xt-dt),y:gt+(xt-dt)/tt,width:mt-(xt-dt),height:ct-(xt-dt)/tt}:{x:nt+(St-Y)*tt,y:gt+(St-Y),width:mt-(St-Y)*tt,height:ct-(St-Y)}:null!==(ft=_.mouseEvent)&&void 0!==ft&&ft.altKey||null!==(Ot=_.touchEvent)&&void 0!==Ot&&Ot.altKey?{x:nt+(xt-dt),y:gt+(St-Y),width:mt-2*(xt-dt),height:ct-2*(St-Y)}:{x:nt+(xt-dt),y:gt+(St-Y),width:mt-(xt-dt),height:ct-(St-Y)};break;case"rect-top-right":var Ft,zt,Et,_t,qt,Pt,re,j;D=(null!==(Ft=_.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(zt=_.touchEvent)&&void 0!==zt&&zt.shiftKey)&&(null!==(Et=_.mouseEvent)&&void 0!==Et&&Et.altKey||null!==(_t=_.touchEvent)&&void 0!==_t&&_t.altKey)?tt>=1?{x:nt-(xt-dt),y:gt-(xt-dt)/tt,width:mt+2*(xt-dt),height:ct+2*(xt-dt)/tt}:{x:nt+(St-Y)*tt,y:gt+(St-Y),width:mt-2*(St-Y)*tt,height:ct-2*(St-Y)}:null!==(qt=_.mouseEvent)&&void 0!==qt&&qt.shiftKey||null!==(Pt=_.touchEvent)&&void 0!==Pt&&Pt.shiftKey?tt>=1?{x:nt,y:gt-(xt-dt)/tt,width:mt+(xt-dt),height:ct+(xt-dt)/tt}:{x:nt,y:gt+(St-Y),width:mt-(St-Y)*tt,height:ct-(St-Y)}:null!==(re=_.mouseEvent)&&void 0!==re&&re.altKey||null!==(j=_.touchEvent)&&void 0!==j&&j.altKey?{x:nt-(xt-dt),y:gt+(St-Y),width:mt+2*(xt-dt),height:ct-2*(St-Y)}:{x:nt,y:gt+(St-Y),width:mt+(xt-dt),height:ct-(St-Y)};break;case"rect-bottom-left":var d,k,F,Q,K,I,V,T;D=(null!==(d=_.mouseEvent)&&void 0!==d&&d.shiftKey||null!==(k=_.touchEvent)&&void 0!==k&&k.shiftKey)&&(null!==(F=_.mouseEvent)&&void 0!==F&&F.altKey||null!==(Q=_.touchEvent)&&void 0!==Q&&Q.altKey)?tt>=1?{x:nt+(xt-dt),y:gt+(xt-dt)/tt,width:mt-2*(xt-dt),height:ct-2*(xt-dt)/tt}:{x:nt-(St-Y)*tt,y:gt-(St-Y),width:mt+2*(St-Y)*tt,height:ct+2*(St-Y)}:null!==(K=_.mouseEvent)&&void 0!==K&&K.shiftKey||null!==(I=_.touchEvent)&&void 0!==I&&I.shiftKey?tt>=1?{x:nt+(xt-dt),y:gt,width:mt-(xt-dt),height:ct-(xt-dt)/tt}:{x:nt-(St-Y)*tt,y:gt,width:mt+(St-Y)*tt,height:ct+(St-Y)}:null!==(V=_.mouseEvent)&&void 0!==V&&V.altKey||null!==(T=_.touchEvent)&&void 0!==T&&T.altKey?{x:nt+(xt-dt),y:gt-(St-Y),width:mt-2*(xt-dt),height:ct+2*(St-Y)}:{x:nt+(xt-dt),y:gt,width:mt-(xt-dt),height:ct+(St-Y)};break;case"rect-bottom-right":var X,bt,Kt,Tt,Rt,Xt,jt,Jt;D=(null!==(X=_.mouseEvent)&&void 0!==X&&X.shiftKey||null!==(bt=_.touchEvent)&&void 0!==bt&&bt.shiftKey)&&(null!==(Kt=_.mouseEvent)&&void 0!==Kt&&Kt.altKey||null!==(Tt=_.touchEvent)&&void 0!==Tt&&Tt.altKey)?tt>=1?{x:nt-(xt-dt),y:gt-(xt-dt)/tt,width:mt+2*(xt-dt),height:ct+2*(xt-dt)/tt}:{x:nt-(St-Y)*tt,y:gt-(St-Y),width:mt+2*(St-Y)*tt,height:ct+2*(St-Y)}:null!==(Rt=_.mouseEvent)&&void 0!==Rt&&Rt.shiftKey||null!==(Xt=_.touchEvent)&&void 0!==Xt&&Xt.shiftKey?tt>=1?{x:nt,y:gt,width:mt+(xt-dt),height:ct+(xt-dt)/tt}:{x:nt,y:gt,width:mt+(St-Y)*tt,height:ct+(St-Y)}:null!==(jt=_.mouseEvent)&&void 0!==jt&&jt.altKey||null!==(Jt=_.touchEvent)&&void 0!==Jt&&Jt.altKey?{x:nt-(xt-dt),y:gt-(St-Y),width:mt+2*(xt-dt),height:ct+2*(St-Y)}:{x:nt,y:gt,width:mt+(xt-dt),height:ct+(St-Y)};break;default:D={x:nt+xt-dt,y:gt+St-Y,width:mt,height:ct}}D.width<0&&(D.width=0),D.height<0&&(D.height=0),D.x=(0,c.q)(D.x),D.y=(0,c.q)(D.y),D.width=(0,c.q)(D.width),D.height=(0,c.q)(D.height),Object.assign(at,D),Object.assign(N,(0,ut.sg)(H,at)),(0,Z.__)(window.document.getElementById(W),N),(0,Z.hJ)(it,b)})(Y[0][0],Y[0][1],dt.x,dt.y),Mt=!0},end:(dt,Y)=>{Mt&&Lt&&x.icdt.history.push([{type:"size",from:Lt,to:JSON.parse(JSON.stringify({id:W,size:at,attribute:N}))}])}})}},2966:(ce,At,f)=>{f.d(At,{Q:()=>S});var B=f(1687),x=f(4981),ut=f(4318),A=f(6816),Z=f(4080),c=f(3423),O=f(5811);const S=M=>{let b=999999,it=999999,W=-999999,H=-999999;null==M||M.forEach(nt=>{b=Math.min(b,nt.size.x),it=Math.min(it,nt.size.y),W=Math.max(W,nt.size.x+nt.size.width),H=Math.max(H,nt.size.y+nt.size.height)});let at=(0,Z.g1)(B.O.SELECT_GROUP,"g"),N=(0,ut.bH)(b,it,W,H);(0,Z.yD)(at,M,N).forEach(nt=>{q(nt.element,nt.posType,N,M,at)})},q=(M,b,it,W,H)=>{let at=!1;null==M||M.addEventListener("touchstart",N=>{at=!0,_({touchEvent:N},b,it,W,H)}),null==M||M.addEventListener("mousedown",N=>{if(0==N.button){if(at)return void(at=!1);_({mouseEvent:N},b,it,W,H)}})},_=(M,b,it,W,H)=>{let{x:at,y:N,width:nt,height:gt}=it,mt=W.map(Dt=>Object.assign({},Dt.size)),tt=[];(0,A.A)(M,{start:Dt=>{W.forEach((Dt,le)=>{let{id:Mt,size:dt,attribute:Y}=Dt;tt.push(JSON.parse(JSON.stringify({id:Mt,size:dt,attribute:Y})))})},move:(Dt,le)=>{((Dt,le,Mt,Gt)=>{(()=>{let dt;dt="rect-center"===b?{x:at+Mt-Dt,y:N+Gt-le,width:nt,height:gt}:{x:at,y:N,width:nt,height:gt},(0,c.v)(x.icdt.screen.width),(0,c.v)(x.icdt.screen.height),dt.width<0&&(dt.width=0),dt.height<0&&(dt.height=0),Object.assign(it,dt),(0,Z.yD)(H,W,it)})(),W.forEach((dt,Y)=>{let J,{x:xt,y:St,width:Zt,height:pt}=mt[Y],{id:ne,type:G,size:R,attribute:u}=dt;J="rect-center"===b?{x:xt+Mt-Dt,y:St+Gt-le,width:Zt,height:pt}:{x:xt,y:St,width:Zt,height:pt},(0,c.v)(x.icdt.screen.width),(0,c.v)(x.icdt.screen.height),J.width<0&&(J.width=0),J.height<0&&(J.height=0),J.x=(0,O.q)(J.x),J.y=(0,O.q)(J.y),J.width=(0,O.q)(J.width),J.height=(0,O.q)(J.height),Object.assign(R,J),Object.assign(u,(0,ut.sg)(G,R)),(0,Z.__)(window.document.getElementById(ne),u)})})(le[0][0],le[0][1],Dt.x,Dt.y)},end:(Dt,le)=>{tt.length&&x.icdt.history.push(W.map((Dt,le)=>{let{id:Mt,size:dt,attribute:Y}=Dt;return{type:"size",from:tt[le],to:JSON.parse(JSON.stringify({id:Mt,size:dt,attribute:Y}))}}))}})}},5226:(ce,At,f)=>{f.d(At,{E:()=>H,T:()=>at});var B=f(1687),x=f(8619),ut=f(8785),A=f(2282),Z=f(8054),c=f(4921),O=f(6358),S=f(9054),q=f(8419),_=f(1105),M=f(2875),b=f(7210),it=f(4981),W=f(4080);const H=(N,nt)=>{var gt;if(nt&&!window.document.getElementById(nt))return;if("localhost"==location.hostname&&console.log("aaaaaaaaaaaaaaa s\u1ee3 qu\xe1 \u0111iiiiiiiiiiiiiiiiiiiiiiiiiii!",nt),nt){let ct=window.document.getElementById(nt);jQuery(ct).find("#"+B.O.BACKGROUND_GROUP).empty();let tt=(0,W.g1)(B.O.BACKGROUND_GROUP,"g",void 0,ct);(0,W.x0)(tt,N)}else{jQuery(it.icdt.target).find("#"+B.O.BACKGROUND_GROUP).empty();let ct=(0,W.g1)(B.O.BACKGROUND_GROUP,"g",void 0,it.icdt.target);(0,W.x0)(ct,N)}let mt=(ct,tt)=>{tt=tt?parseFloat(`${nt}0${tt}`):nt,null==ct||ct.forEach(D=>{let Wt=nt?parseFloat(`${nt}0${D.id}`):D.id;var Lt;if(D.isdeleted)null===(Lt=window.document.getElementById(Wt))||void 0===Lt||Lt.remove();else switch(D.type){case S.$.GROUP:(0,O.m)(Wt,{},tt?window.document.getElementById(tt):null),mt(D.nodes,D.id);break;case S.$.CIRCLE:(0,x._)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null);break;case S.$.ELLIPSE:(0,ut.r)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null);break;case S.$.LINE:(0,c.W)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null);break;case S.$.RECT:(0,Z.f)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null);break;case S.$.POLYGON:(0,A.l)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null);break;case S.$.FOREIGNOBJECT:(0,M.e)(Wt,{size:D.size,attribute:D.attribute,style:D.style,source:D.source},tt?window.document.getElementById(tt):null);break;case S.$.IMAGE:(0,b.G)(Wt,{size:D.size,attribute:D.attribute,source:D.source},tt?window.document.getElementById(tt):null);break;case S.$.TEXT:(0,_.$)(Wt,{size:D.size,attribute:D.attribute,source:D.source},tt?window.document.getElementById(tt):null);break;case S.$.PATH:(0,q.G)(Wt,{size:D.size,attribute:D.attribute},tt?window.document.getElementById(tt):null)}})};mt(null==N||null===(gt=N.svg)||void 0===gt?void 0:gt.nodes)},at=(N,nt)=>{var gt;if(nt&&!window.document.getElementById(nt))return;let mt=(ct,tt)=>{tt=tt?parseFloat(`${nt}0${tt}`):nt,null==ct||ct.forEach(D=>{let Wt=nt?parseFloat(`${nt}0${D.id}`):D.id;jQuery("#"+Wt).appendTo(tt?window.document.getElementById(tt):it.icdt.target),D.type==S.$.GROUP&&mt(D.nodes,D.id)})};mt(null==N||null===(gt=N.svg)||void 0===gt?void 0:gt.nodes)}},8619:(ce,At,f)=>{f.d(At,{_:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(_,(0,ut.sg)(B.$.CIRCLE,q)),{nodeId:c,element:(0,A.it)(c,B.$.CIRCLE,"circle",{size:q,attribute:_},S),size:q,attribute:_}}},8785:(ce,At,f)=>{f.d(At,{r:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(_,(0,ut.sg)(B.$.ELLIPSE,q)),{nodeId:c,element:(0,A.it)(c,B.$.ELLIPSE,"ellipse",{size:q,attribute:_},S),size:q,attribute:_}}},2875:(ce,At,f)=>{f.d(At,{e:()=>A});var B=f(9054),x=f(4318),ut=f(4080);const A=(Z,c,O)=>{let S=(null==c?void 0:c.size)||{x:0,y:0,width:180,height:180},q=(null==c?void 0:c.attribute)||{};Object.assign(q,(0,x.sg)(B.$.FOREIGNOBJECT,S));let _=(null==c?void 0:c.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},M=(null==c?void 0:c.style)||{};return{nodeId:Z,element:(0,ut.it)(Z,B.$.FOREIGNOBJECT,"foreignObject",{size:S,attribute:q,style:M,source:_},O),size:S,attribute:q,style:M,source:_}}},6358:(ce,At,f)=>{f.d(At,{m:()=>A});var B=f(9054),x=f(4318),ut=f(4080);const A=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{};return Object.assign(_,(0,x.sg)(B.$.GROUP,q)),{nodeId:c,element:(0,ut.it)(c,B.$.GROUP,"g",{size:q,attribute:_},S),size:q,attribute:_}}},7210:(ce,At,f)=>{f.d(At,{G:()=>A});var B=f(9054),x=f(4318),ut=f(4080);const A=(Z,c,O)=>{let S=(null==c?void 0:c.size)||{x:0,y:0,width:100,height:100},q=(null==c?void 0:c.attribute)||{preserveAspectRatio:"none"};Object.assign(q,(0,x.sg)(B.$.IMAGE,S));let _=(null==c?void 0:c.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:Z,element:(0,ut.it)(Z,B.$.IMAGE,"image",{size:S,attribute:q,source:_},O),size:S,attribute:q,source:_}}},4921:(ce,At,f)=>{f.d(At,{W:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth,strokeLinecap:x.icdt.attribute.strokeLinecap};return Object.assign(_,(0,ut.sg)(B.$.LINE,q)),{nodeId:c,element:(0,A.it)(c,B.$.LINE,"line",{size:q,attribute:_},S),size:q,attribute:_}}},8419:(ce,At,f)=>{f.d(At,{G:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(_,(0,ut.sg)(B.$.PATH,q)),{nodeId:c,element:(0,A.it)(c,B.$.PATH,"path",{size:q,attribute:_},S),size:q,attribute:_}}},2282:(ce,At,f)=>{f.d(At,{l:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(_,(0,ut.sg)(B.$.POLYGON,q)),{nodeId:c,element:(0,A.it)(c,B.$.POLYGON,"polygon",{size:q,attribute:_},S),size:q,attribute:_}}},8054:(ce,At,f)=>{f.d(At,{f:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:10,height:10},_=(null==O?void 0:O.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(_,(0,ut.sg)(B.$.RECT,q)),{nodeId:c,element:(0,A.it)(c,B.$.RECT,"rect",{size:q,attribute:_},S),size:q,attribute:_}}},1105:(ce,At,f)=>{f.d(At,{$:()=>Z});var B=f(9054),x=f(4981),ut=f(4318),A=f(4080);const Z=(c,O,S)=>{let q=(null==O?void 0:O.size)||{x:0,y:0,width:100,height:50},_=(null==O?void 0:O.attribute)||{fill:x.icdt.attribute.stroke,fontFamily:x.icdt.attribute.fontFamily,fontSize:x.icdt.attribute.fontSize,textLength:x.icdt.attribute.textLength};Object.assign(_,(0,ut.sg)(B.$.TEXT,q));let M=(null==O?void 0:O.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:c,element:(0,A.it)(c,B.$.TEXT,"text",{size:q,attribute:_,source:M},S),size:q,attribute:_,source:M}}},4318:(ce,At,f)=>{f.d(At,{bH:()=>x,sg:()=>ut});var B=f(9054);const x=(Z,c,O,S,q)=>{let _={x:Math.min(Z,O),y:Math.min(c,S),width:Math.abs(O-Z)||1,height:Math.abs(S-c)||1};return null!=q&&q.ratio&&(_.width<=_.height?_.height=_.width*(null==q?void 0:q.ratio):_.width=_.height/(null==q?void 0:q.ratio)),Object.assign(_,{ratios:(null==q?void 0:q.ratios)||[[(Z-_.x)/(_.width||1),(c-_.y)/(_.height||1)],[(O-_.x)/(_.width||1),(S-_.y)/(_.height||1)]]}),null!=q&&q.points&&(_.points=null==q?void 0:q.points),_},ut=(Z,c,O)=>{var S=(()=>{switch(Z){case B.$.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case B.$.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case B.$.LINE:{var q;let b={};return null===(q=c.ratios)||void 0===q||q.forEach((it,W)=>{b[`x${W+1}`]=c.x+c.width*it[0],b[`y${W+1}`]=c.y+c.height*it[1]}),b}case B.$.RECT:return{x:c.x,y:c.y,width:c.width,height:c.height};case B.$.POLYGON:var _;return{points:((null===(_=c.ratios)||void 0===_?void 0:_.map(b=>[c.x+c.width*b[0],c.y+c.height*b[1]]))||[]).map(b=>b.join(" ")).join(",")};case B.$.FOREIGNOBJECT:case B.$.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case B.$.TEXT:return{x:c.x,y:c.y};case B.$.PATH:{var M;let b=null!==(M=c.points)&&void 0!==M?M:[];return b.length?{d:`M ${b[0][0]} ${b[0][1]} L `+(b.map(it=>[it[0],it[1]])||[]).map(it=>it.join(" ")).join(" ")}:{d:""}}}return{}})();return c.rotate?(S.transform=`rotate(${c.rotate})`,S.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):(S.transform=null,S.transformOrigin=null),S}},5811:(ce,At,f)=>{f.d(At,{q:()=>B});const B=(x,ut)=>{var A;return ut=null!==(A=ut)&&void 0!==A?A:100,Math.round((x+Number.EPSILON)*ut)/ut}},3423:(ce,At,f)=>{f.d(At,{v:()=>ut});var B=f(4981),x=f(5811);const ut=A=>(0,x.q)(A/B.icdt.screen.scale)},3385:(ce,At,f)=>{f.d(At,{Vs:()=>S,co:()=>c,k6:()=>Z,lO:()=>O,mr:()=>q});var B=f(4981),x=f(4080),ut=f(4318),A=f(5811);const Z=(_,M)=>{let{id:b,type:it,size:W,attribute:H}=_,at=JSON.parse(JSON.stringify({id:b,size:W,attribute:H}));W.x=(0,A.q)(M),Object.assign(H,(0,ut.sg)(it,W)),(0,x.__)(window.document.getElementById(b),H),B.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:b,size:W,attribute:H}))}])},c=(_,M)=>{let{id:b,type:it,size:W,attribute:H}=_,at=JSON.parse(JSON.stringify({id:b,size:W,attribute:H}));W.y=(0,A.q)(M),Object.assign(H,(0,ut.sg)(it,W)),(0,x.__)(window.document.getElementById(b),H),B.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:b,size:W,attribute:H}))}])},O=(_,M,b)=>{let{id:it,type:W,size:H,attribute:at}=_,N=JSON.parse(JSON.stringify({id:it,size:H,attribute:at}));b&&(H.height=(0,A.q)(M*H.height/H.width)),H.width=(0,A.q)(M),Object.assign(at,(0,ut.sg)(W,H)),(0,x.__)(window.document.getElementById(it),at),B.icdt.history.push([{type:"size",from:N,to:JSON.parse(JSON.stringify({id:it,size:H,attribute:at}))}])},S=(_,M,b)=>{let{id:it,type:W,size:H,attribute:at}=_,N=JSON.parse(JSON.stringify({id:it,size:H,attribute:at}));b&&(H.width=(0,A.q)(M*H.width/H.height)),H.height=(0,A.q)(M),Object.assign(at,(0,ut.sg)(W,H)),(0,x.__)(window.document.getElementById(it),at),B.icdt.history.push([{type:"size",from:N,to:JSON.parse(JSON.stringify({id:it,size:H,attribute:at}))}])},q=(_,M)=>{let{id:b,type:it,size:W,attribute:H}=_,at=JSON.parse(JSON.stringify({id:b,size:W,attribute:H}));W.rotate=(0,A.q)(M),Object.assign(H,(0,ut.sg)(it,W)),(0,x.__)(window.document.getElementById(b),H),B.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:b,size:W,attribute:H}))}])}},6816:(ce,At,f)=>{f.d(At,{A:()=>c});var B=f(968),x=f(4981);class ut{constructor(S){this._points=[],this._options=S}start(S){this._points.length=0,this._points.push([S.x,S.y]),this._options.start(S)}move(S){this._points.push([S.x,S.y]),this._options.move(S,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(S=this._points[0])[0],y:S[1]}:{x:0,y:0};var S}get offsetLast(){return this._points.length>=1?{x:(S=this._points[this._points.length-1])[0],y:S[1]}:{x:0,y:0};var S}}var A=f(7797);const c=(O,S,q,_,M)=>{var b,it,W;let H=null,at=0,N=0;O.mouseEvent?(H=O.mouseEvent.target,at=O.mouseEvent.offsetX,N=O.mouseEvent.offsetY):O.touchEvent&&(H=O.touchEvent.target,O.touchEvent.touches.length&&(at=O.touchEvent.touches[0].clientX,N=O.touchEvent.touches[0].clientY));let nt=null!=q?q:x.icdt.screen.scale,gt=null!=_?_:x.icdt.screen.dislocation,mt=null!=M?M:x.icdt.screen.offset,ct=()=>{};var tt=new ut({start:null!==(b=null==S?void 0:S.start)&&void 0!==b?b:ct,move:null!==(it=null==S?void 0:S.move)&&void 0!==it?it:ct,end:null!==(W=null==S?void 0:S.end)&&void 0!==W?W:ct});O.mouseEvent?tt.start((0,A.p)({x:at,y:N},nt,gt,{x:0,y:0})):O.touchEvent&&tt.start((0,A.p)({x:at,y:N},nt,gt,mt));let D=dt=>{tt.move((0,A.p)({x:dt.clientX,y:dt.clientY},nt,gt,mt))},Wt=dt=>{tt.end(),[B._.SHAPE,B._.FOREIGNOBJECT,B._.IMAGE,B._.TEXT].includes(x.icdt.pointer.pointer_type)&&(dt.shiftKey||(x.icdt.pointer.pointer_type=B._.POINTER))},Lt=dt=>{dt.touches.length&&D({clientX:dt.touches[0].clientX,clientY:dt.touches[0].clientY})},Dt=dt=>{Wt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("touchmove",Lt,!1),window.removeEventListener("touchend",Dt,!1)},le=dt=>{0==dt.button&&D({clientX:dt.clientX,clientY:dt.clientY})},Mt=dt=>{0==dt.button&&(Wt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("mousemove",le,!1),window.removeEventListener("mouseup",Mt,!1))};if(O.mouseEvent)window.addEventListener("mousemove",le,!1),window.addEventListener("mouseup",Mt,!1);else if(O.touchEvent){var Gt;window.addEventListener("touchmove",Lt,!1),window.addEventListener("touchend",Dt,!1),null===(Gt=H)||void 0===Gt||Gt.addEventListener("touchmove",function(dt){dt.preventDefault()})}}},7797:(ce,At,f)=>{f.d(At,{p:()=>x});var B=f(5811);const x=(ut,A,Z,c)=>(ut.x-=c.x,ut.y-=c.y,ut.x/=A,ut.y/=A,ut.x-=Z.x,ut.y-=Z.y,ut.x=(0,B.q)(ut.x),ut.y=(0,B.q)(ut.y),ut)},1690:(ce,At,f)=>{f.d(At,{$:()=>Pt,U:()=>re});var B=f(1687),x=f(4981),ut=f(9054),A=f(5973),Z=f(2336),c=f(861),O=f(157),S=f(4787),_=f(1105),M=f(6358);const nt=function(j){var d,k,F=jQuery("#"+j),Q=null===(d=F.attr("class"))||void 0===d?void 0:d.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),K=null===(k=F.attr("class"))||void 0===k?void 0:k.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);Q&&Q.forEach(function(V){jQuery(F).removeClass(V)}),K&&K.forEach(function(V){jQuery(F).removeClass(V)});let I=F.attr("data-class");I&&(F.attr("class",I),F.removeAttr("data-class")),jQuery(F).data("animation-running",!1)};var gt=f(7210),mt=f(5811);const ct=(j,d,k)=>{var F,Q,K,I;let V=1,T=new Image;T.onload=()=>{var X,bt,Kt,Tt;V=(0,mt.q)(T.naturalWidth/T.naturalHeight,100);let Rt=0,Xt=0,jt=0,Jt=0;var Yt,oe,_e,ve;V>=1?(jt=Math.min(T.naturalWidth,null!==(Yt=null===(oe=Pt.slide.svg)||void 0===oe||null===(oe=oe.viewBox)||void 0===oe?void 0:oe.width)&&void 0!==Yt?Yt:0),Jt=jt/V):(Jt=Math.min(T.naturalHeight,null!==(_e=null===(ve=Pt.slide.svg)||void 0===ve||null===(ve=ve.viewBox)||void 0===ve?void 0:ve.height)&&void 0!==_e?_e:0),jt=Jt/V),Rt=((null!==(X=null===(bt=Pt.slide.svg)||void 0===bt||null===(bt=bt.viewBox)||void 0===bt?void 0:bt.width)&&void 0!==X?X:0)-jt)/2,Xt=((null!==(Kt=null===(Tt=Pt.slide.svg)||void 0===Tt||null===(Tt=Tt.viewBox)||void 0===Tt?void 0:Tt.height)&&void 0!==Kt?Kt:0)-Jt)/2,d.size={x:Rt,y:Xt,width:jt,height:Jt},tt(d,k)},T.onerror=X=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,X)},T.src=null!==(F=null!==(Q=null===(K=d.source)||void 0===K?void 0:K.url)&&void 0!==Q?Q:null===(I=d.source)||void 0===I?void 0:I.path)&&void 0!==F?F:""},tt=(j,d)=>{if(j.slideStatus!=Pt.slideStatus)return void d();let{element:k}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:j.size,source:{type:"image",image:null==j?void 0:j.source}});setTimeout(()=>{null==k||k.remove(),d()},3e3)},D=(j,d,k)=>{var F,Q,K,I;let V=new Image;V.onload=()=>{Wt(j,{width:V.naturalWidth,height:V.naturalHeight},d,k)},V.onerror=T=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,T),k()},V.src=null!==(F=null!==(Q=null===(K=d.source)||void 0===K?void 0:K.url)&&void 0!==Q?Q:null===(I=d.source)||void 0===I?void 0:I.path)&&void 0!==F?F:""},Wt=(j,d,k,F)=>{if(k.slideStatus!=Pt.slideStatus)return void F();let Q=(0,mt.q)(d.width/d.height,100),K=0,I=0,V=0,T=0;Q>=1?(V=d.width,V=Math.max(V,40),V=Math.min(V,100),T=V/Q):(T=d.height,T=Math.max(T,40),T=Math.min(T,100),V=T/Q);let{size:X}=j;K=X.x+X.width/2-V/2,I=X.y+X.height/2-T/2;let{element:bt}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:{x:K,y:I,width:V,height:T},source:{type:"image",image:null==k?void 0:k.source}});setTimeout(()=>{null==bt||bt.remove(),F()},3e3)};var Lt=f(4080);const Dt=(j,d,k)=>{var F,Q,K;if(d.slideStatus!=Pt.slideStatus)return void k();if(null===(F=d.source)||void 0===F||!F.url)return console.warn(`${j.id} -> audio no source!`),void k();var I=jQuery("#"+j.id);let V=null!==(Q=d.iteration)&&void 0!==Q?Q:0;if(V<0&&(k(),k=function(){}),!(I.data("audio-running")&&V<0)){I.data("audio-running",!0);var T=new Audio;return T.autoplay=!0,T.loop=0!=V,T.preload="auto",T.controls=!0,T.setAttributeNode(document.createAttribute("playsinline")),T.addEventListener("canplay",function(){var X=T.play();X&&X.then(function(bt){I.data("audio-running",!0)}).catch(function(bt){I.data("audio-running",!1),d.slideStatus===Pt.slideStatus&&k()})}),T.addEventListener("timeupdate",function(){var bt;d.slideStatus!==Pt.slideStatus&&((bt=this).pause(),bt.remove(),I.data("audio-running",!1))}),T.addEventListener("canplaythrough",function(){this.loop&&(V>0?V--:0==V&&(this.loop=!1))}),T.addEventListener("play",function(){}),T.addEventListener("pause",function(){}),T.addEventListener("ended",function(){this.remove(),I.data("audio-running",!1),d.slideStatus===Pt.slideStatus&&k()}),T.onerror=function(){this.remove(),I.data("audio-running",!1),d.slideStatus===Pt.slideStatus&&k()},T.src=(null===(K=d.source)||void 0===K?void 0:K.url)||"",T}};var le=f(9942);const Zt=(j,d,k)=>{var F;null===(F=d.test)||void 0===F||null===(F=F.answer)||void 0===F||null===(F=F.matching)||void 0===F||F.filter(Q=>Q.value==k.key).forEach(Q=>Q.value="")},ne=(j,d,k,F,Q,K)=>{var I,V,T,X,bt,Kt,Tt,Rt,Xt,jt,Jt,Yt;Q.iscorrect?(null!==(I=d.test)&&void 0!==I&&null!==(I=I.audiotrue)&&void 0!==I&&I.path&&Dt(j,{source:(0,le.I)(null===(X=d.test)||void 0===X?void 0:X.audiotrue),iteration:0,nodeStatus:k,slideStatus:F},K),null!==(V=d.test)&&void 0!==V&&null!==(V=V.icontrue)&&void 0!==V&&V.path&&D(j,{source:(0,le.I)(null===(bt=d.test)||void 0===bt?void 0:bt.icontrue),iteration:0,nodeStatus:k,slideStatus:F},K),null!==(T=d.test)&&void 0!==T&&null!==(T=T.effecttrue)&&void 0!==T&&T.path&&ct(0,{source:(0,le.I)(null===(Kt=d.test)||void 0===Kt?void 0:Kt.effecttrue),iteration:0,nodeStatus:k,slideStatus:F},K)):(null!==(Tt=d.test)&&void 0!==Tt&&null!==(Tt=Tt.audiofalse)&&void 0!==Tt&&Tt.path&&Dt(j,{source:(0,le.I)(null===(jt=d.test)||void 0===jt?void 0:jt.audiofalse),iteration:0,nodeStatus:k,slideStatus:F},K),null!==(Rt=d.test)&&void 0!==Rt&&null!==(Rt=Rt.iconfalse)&&void 0!==Rt&&Rt.path&&D(j,{source:(0,le.I)(null===(Jt=d.test)||void 0===Jt?void 0:Jt.iconfalse),iteration:0,nodeStatus:k,slideStatus:F},K),null!==(Xt=d.test)&&void 0!==Xt&&null!==(Xt=Xt.effectfalse)&&void 0!==Xt&&Xt.path&&ct(0,{source:(0,le.I)(null===(Yt=d.test)||void 0===Yt?void 0:Yt.effectfalse),iteration:0,nodeStatus:k,slideStatus:F},K))},G=(j,d,k,F)=>{var Q,K,I,V,T,X,Kt,Rt,Tt;null!==(Q=d.animate)&&void 0!==Q&&Q.value&&((j,d,k)=>{var F,Q;let{value:I}=null!==(F=j.animate)&&void 0!==F?F:{};((j,d,k)=>{var F;let Q=jQuery("#"+j),K="",I=null!==(F=d.iteration)&&void 0!==F?F:0,V=[];(d.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?V.push(d.value):d.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(d.value)?(V.push("animation"),V.push(`animation-${d.value}`)):(V.push("animate__animated"),V.push(`animate__${d.value}`)):(V.push("animation"),V.push("animation-fadein")),I<0?(V.push("animation-iteration-infinite"),k(),k=function(){}):I>0&&V.push("animation-iteration-"+(I+1)),K=V.join(" "),function(X){let bt=function(){Q.data("animate-running")?Q.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){Q.data("animate-running",!1),setTimeout(function(){X()},100)}):X()};Q.hasClass("animation")?setTimeout(function(){bt()}):bt()}(function(){var X;nt(j),(I>0||I<0)&&Q.one("animationiteration",function(){d.slideStatus===Pt.slideStatus||(Q.data("animate-running",!1),nt(j),d.slideStatus===Pt.slideStatus&&k())}),Q.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(Q.data("animate-running",!1),nt(j),d.finish){default:case 0:case 1:break;case 2:Q.addClass("hide")}d.slideStatus===Pt.slideStatus&&k()}),Q.attr("data-class",null!==(X=Q.attr("class"))&&void 0!==X?X:""),Q.addClass(K),Q.data("animate-running",!0)})})(null!==(Q=j.pid)&&void 0!==Q?Q:0,{value:I,nodeStatus:d,slideStatus:k},()=>{})})(d,k.nodeStatus,k.slideStatus),null!==(K=d.interactive)&&void 0!==K&&K.show?((j,d,k,F)=>{var Q,K,I;console.log("icdt_Run_Interactive_NodeShow",j,d,k);let V={total:0,counter:0},{triggershow:T,triggerrun:X,triggerhide:bt,action:Kt,audio:Tt}=null!==(Q=null===(K=j.interactive)||void 0===K?void 0:K.show)&&void 0!==Q?Q:{};if(T){let{id:jt,ids:Jt,time:Yt,async:oe}=T;"asynctrue"==oe?setTimeout(()=>{(0,S.L5)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,S.L5)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}if(X){let{id:jt,ids:Jt,time:Yt,async:oe}=X;"asynctrue"==oe?setTimeout(()=>{(0,S.Ar)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,S.Ar)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}if(bt){let{id:jt,ids:Jt,time:Yt,async:oe}=bt;"asynctrue"==oe?setTimeout(()=>{(0,S.WT)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,S.WT)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}let Rt=()=>{setTimeout(()=>{if(V.counter>=V.total){if(F&&F(),T){let{id:jt,ids:Jt,async:Yt}=T;"asyncfalse"==Yt&&(0,S.L5)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}if(X){let{id:jt,ids:Jt,async:Yt}=X;"asyncfalse"==Yt&&(0,S.Ar)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}if(bt){let{id:jt,ids:Jt,async:Yt}=bt;"asyncfalse"==Yt&&(0,S.WT)({id:jt,ids:Jt,nodeStatus:d,slideStatus:k})}}})};if(null!=Kt&&Kt.value){V.total+=1;let jt=()=>{V.counter+=1,Rt()};switch(null==Kt?void 0:Kt.value){case"hide":jQuery("#"+j.id).addClass("hide"),jt();break;case"points":{let{points:Jt,time:Yt,iteration:oe,finish:_e}=Kt;(0,c.G)(j.id,{points:Jt,time:Yt,iteration:oe,finish:_e,nodeStatus:d,slideStatus:k},jt);break}default:{var Xt;let{value:Jt,time:Yt,iteration:oe,finish:_e}=Kt;(0,Z.Q)(null!==(Xt=j.pid)&&void 0!==Xt?Xt:0,{value:Jt,time:Yt,iteration:oe,finish:_e,nodeStatus:d,slideStatus:k},jt);break}}}if(null!=Tt&&null!==(I=Tt.source)&&void 0!==I&&I.path){V.total+=1;let jt=()=>{V.counter+=1,Rt()};(0,O.R)(j.id,Tt,V,{nodeStatus:d,slideStatus:k},jt)}V.total||Rt()})(d,k.nodeStatus,k.slideStatus,F):F&&F(),null!==(I=d.interactive)&&void 0!==I&&I.click&&(Rt=null===(Kt=d.interactive)||void 0===Kt?void 0:Kt.click,Object.keys(null!=Rt?Rt:{}).map(jt=>Rt[jt]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(Rt=>{Rt.preventDefault(),k.nodeStatus=Pt.refreshNodeStatus(),(0,A.F)(d,k.nodeStatus,k.slideStatus)})),null!==(V=d.variable)&&void 0!==V&&V.input&&jQuery("#"+d.id).on("change","input,textarea",Rt=>{Rt.preventDefault(),((j,d,k)=>{var F,Q;x.icdt.variable.setValue(null!==(F=null===(Q=d.variable)||void 0===Q||null===(Q=Q.input)||void 0===Q?void 0:Q.variable)&&void 0!==F?F:"",j),(j=>{var d;let k=(F,Q)=>{null==F||F.forEach(K=>{switch(K.type){case ut.$.GROUP:(0,M.m)(K.id,{},Q?window.document.getElementById(Q):null),k(K.nodes,K.id);break;case ut.$.POLYGON:break;case ut.$.TEXT:(0,_.$)(K.id,{size:K.size,attribute:K.attribute,source:K.source},Q?window.document.getElementById(Q):null)}})};k(null===(d=j.svg)||void 0===d?void 0:d.nodes)})(k)})(Rt.target.value,d,j)}),null!==(T=d.variable)&&void 0!==T&&T.click&&(null!==(Tt=d.variable)&&void 0!==Tt&&null!==(Tt=Tt.click)&&void 0!==Tt&&Tt.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(Rt=>{Rt.preventDefault(),((j,d)=>{var k;x.icdt.variable.setValueOperator(null===(k=j.variable)||void 0===k?void 0:k.click),(j=>{var d;let k=(F,Q)=>{null==F||F.forEach(K=>{switch(K.type){case ut.$.GROUP:(0,M.m)(K.id,{},Q?window.document.getElementById(Q):null),k(K.nodes,K.id);break;case ut.$.POLYGON:break;case ut.$.TEXT:(0,_.$)(K.id,{size:K.size,attribute:K.attribute,source:K.source},Q?window.document.getElementById(Q):null)}})};k(null===(d=j.svg)||void 0===d?void 0:d.nodes)})(d)})(d,j)})),"test"==(null===(X=d.source)||void 0===X?void 0:X.type)&&((j,d)=>{var k;let F=()=>{};switch(null===(k=j.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type){case"truefalse":var Q;if(jQuery("#"+j.id).click(T=>{T.preventDefault(),((j,d,k,F,Q)=>{var K,I;let V=null===(K=j.source)||void 0===K||null===(K=K.test)||void 0===K||null===(K=K.truefalse)||void 0===K?void 0:K.iscorrect;if(null!==(I=d.svg)&&void 0!==I&&I.nodes.find(T=>{var X;return"submit"==(null===(X=T.source)||void 0===X||null===(X=X.test)||void 0===X?void 0:X.type)})||ne(j,d,k,F,{iscorrect:V},Q),d.test?d.test.answer?d.test.answer.truefalse={value:j.id,iscorrect:V}:d.test.answer={truefalse:{value:j.id,iscorrect:V}}:d.test={answer:{truefalse:{value:j.id,iscorrect:V}}},d.test.showselection){let T=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(T,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt.nodeStatus,Pt.slideStatus,F)}),null!==(Q=d.test)&&void 0!==Q&&Q.showselection){let T=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(T,d)}break;case"singlechoice":var K;if(jQuery("#"+j.id).click(T=>{T.preventDefault(),((j,d,k,F,Q)=>{var K,I;let V=null===(K=j.source)||void 0===K||null===(K=K.test)||void 0===K||null===(K=K.singlechoice)||void 0===K?void 0:K.iscorrect;if(null!==(I=d.svg)&&void 0!==I&&I.nodes.find(T=>{var X;return"submit"==(null===(X=T.source)||void 0===X||null===(X=X.test)||void 0===X?void 0:X.type)})||ne(j,d,k,F,{iscorrect:V},Q),d.test?d.test.answer?d.test.answer.singlechoice={value:j.id,iscorrect:V}:d.test.answer={singlechoice:{value:j.id,iscorrect:V}}:d.test={answer:{singlechoice:{value:j.id,iscorrect:V}}},d.test.showselection){let T=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(T,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt.nodeStatus,Pt.slideStatus,F)}),null!==(K=d.test)&&void 0!==K&&K.showselection){let T=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(T,d)}break;case"multichoice":var I;if(jQuery("#"+j.id).click(T=>{T.preventDefault(),((j,d,k,F,Q)=>{var K,I;let T,V=null===(K=j.source)||void 0===K||null===(K=K.test)||void 0===K||null===(K=K.multichoice)||void 0===K?void 0:K.iscorrect;if(null!==(I=d.svg)&&void 0!==I&&I.nodes.find(X=>{var bt;return"submit"==(null===(bt=X.source)||void 0===bt||null===(bt=bt.test)||void 0===bt?void 0:bt.type)})||ne(j,d,k,F,{iscorrect:V},Q),d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(X=>X.value==j.id)?(d.test.answer.multichoice=d.test.answer.multichoice.filter(X=>X.value!=j.id),T=!0):d.test.answer.multichoice.push({value:j.id,iscorrect:V}):d.test.answer.multichoice=[{value:j.id,iscorrect:V}]:d.test.answer={multichoice:[{value:j.id,iscorrect:V}]}:d.test={answer:{multichoice:[{value:j.id,iscorrect:V}]}},d.test.showselection){let X=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(X,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt.nodeStatus,Pt.slideStatus,F)}),null!==(I=d.test)&&void 0!==I&&I.showselection){let T=(0,Lt.g1)(B.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Lt.Yw)(T,d)}break;case"fill":var V;jQuery("#"+j.id).on("keyup",'input[type="text"]',T=>{var X;let bt=jQuery("<div/>").css({"font-size":jQuery(T.target).css("font-size"),visibility:"hidden",float:"left"}).text(T.target.value).appendTo(window.document.body);jQuery(T.target).css({width:(null!==(X=bt.width())&&void 0!==X?X:0)+30})}).on("keypress",'input[type="text"]',T=>{13===(T.keyCode||T.charCode||T.which)&&(T.preventDefault(),T.stopPropagation(),jQuery(T.target).blur())}).on("change",'input[type="text"]',T=>{var X,bt;let Kt=Pt.nodeStatus,Tt=Pt.slideStatus,Rt=null===(X=T.target)||void 0===X?void 0:X.getAttribute("data-key"),Xt=null===(bt=T.target)||void 0===bt||null===(bt=bt.value)||void 0===bt?void 0:bt.trim();((j,d,k,F,Q,K)=>{var I,V,T,X;let{value:bt}=null!==(I=null===(V=j.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.fill)||void 0===V?void 0:V.find(Tt=>Tt.key==`[[${Q.key}]]`))&&void 0!==I?I:{},Kt=bt&&bt.map(Tt=>null==Tt?void 0:Tt.toLocaleLowerCase()).includes(null===(T=Q.value)||void 0===T?void 0:T.toLocaleLowerCase());null!==(X=d.svg)&&void 0!==X&&X.nodes.find(Tt=>{var Rt;return"submit"==(null===(Rt=Tt.source)||void 0===Rt||null===(Rt=Rt.test)||void 0===Rt?void 0:Rt.type)})||ne(j,d,k,F,{iscorrect:Kt},K),Q.iscorrect=Kt,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(Tt=>Tt.key==Q.key)?d.test.answer.fill.filter(Tt=>Tt.key==Q.key).forEach(Tt=>{Tt.value=Q.value,Tt.iscorrect=Q.iscorrect}):d.test.answer.fill.push(Q):d.test.answer.fill=[Q]:d.test.answer={fill:[Q]}:d.test={answer:{fill:[Q]}},console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Kt,Tt,{key:Rt,value:Xt},F),jQuery("#"+j.id).find(`input[type="text"][data-key="${Rt}"]`).val(Xt)}),null!==(V=d.test)&&void 0!==V&&V.showselection||jQuery("#"+j.id).addClass("hide-selection");break;case"matching-empty":jQuery("#"+j.id).on("touchmove",".ondrag-item",function(T){T.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(T){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${T.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(T){var X;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(X=d.test)&&void 0!==X&&X.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(T){},dragend:function(T){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(T){T.dropTarget.hasClass("actived")&&T.dropTarget.addClass("focused")},dragleave:function(T){T.dropTarget.hasClass("actived")&&T.dropTarget.removeClass("focused")},drop:function(T){if(!T.dropTarget.hasClass("actived"))return;T.dropTarget.removeClass("focused");let X=T.dropTarget,bt=T.draggable.currentTarget;X.is(":empty")||X.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),bt.appendTo(X),((j,d,k,F,Q,K)=>{var I,V,T;let{key:X}=null!==(I=null===(V=j.source)||void 0===V||null===(V=V.test)||void 0===V?void 0:V.matching)&&void 0!==I?I:{key:"KIEN"},bt=Q.key==X;null!==(T=d.svg)&&void 0!==T&&T.nodes.find(Tt=>{var Rt;return"submit"==(null===(Rt=Tt.source)||void 0===Rt||null===(Rt=Rt.test)||void 0===Rt?void 0:Rt.type)})||ne(j,d,k,F,{iscorrect:bt},K),Zt(j,d,Q);let Kt={key:null!=X?X:"",value:Q.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(Tt=>Tt.key==X)?d.test.answer.matching.filter(Tt=>Tt.key==X).forEach(Tt=>Tt.value=Kt.value):d.test.answer.matching.push(Kt):d.test.answer.matching=[Kt]:d.test.answer={matching:[Kt]}:d.test={answer:{matching:[Kt]}},console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt.nodeStatus,Pt.slideStatus,{key:bt.data("key")},F)}});break;case"matching-content":jQuery("#"+j.id).on("touchmove",".ondrag-item",function(T){T.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(T){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${T.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(T){var X;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(X=d.test)&&void 0!==X&&X.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(T){},dragend:function(T){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(T){T.dropTarget.hasClass("actived")&&T.dropTarget.addClass("focused")},dragleave:function(T){T.dropTarget.hasClass("actived")&&T.dropTarget.removeClass("focused")},drop:function(T){if(!T.dropTarget.hasClass("actived"))return;T.dropTarget.removeClass("focused");let bt=T.draggable.currentTarget;bt.appendTo(T.dropTarget),Zt(j,d,{key:bt.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+j.id).click(T=>{T.preventDefault(),((j,d,k,F,Q)=>{var K,I,V,T,X;let bt;var Kt;if(null!=d&&null!==(K=d.test)&&void 0!==K&&null!==(K=K.answer)&&void 0!==K&&K.truefalse)bt=null==d||null===(Kt=d.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||null===(Kt=Kt.truefalse)||void 0===Kt?void 0:Kt.iscorrect;else if(null!=d&&null!==(I=d.test)&&void 0!==I&&null!==(I=I.answer)&&void 0!==I&&I.singlechoice){var Tt;bt=null==d||null===(Tt=d.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||null===(Tt=Tt.singlechoice)||void 0===Tt?void 0:Tt.iscorrect}else if(null!=d&&null!==(V=d.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.multichoice){var Rt,Xt,jt;bt=1==[null==d||null===(Rt=d.test)||void 0===Rt||null===(Rt=Rt.answer)||void 0===Rt||null===(Rt=Rt.multichoice)||void 0===Rt?void 0:Rt.length,null==d||null===(Xt=d.test)||void 0===Xt||null===(Xt=Xt.answer)||void 0===Xt||null===(Xt=Xt.multichoice)||void 0===Xt||null===(Xt=Xt.map(ve=>ve.iscorrect?1:0))||void 0===Xt?void 0:Xt.reduce((ve,ge)=>ve+ge),null==d||null===(jt=d.svg)||void 0===jt||null===(jt=jt.nodes)||void 0===jt||null===(jt=jt.filter(ve=>{var ge,Oe;return"multichoice"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)&&(null===(Oe=ve.source)||void 0===Oe||null===(Oe=Oe.test)||void 0===Oe||null===(Oe=Oe.multichoice)||void 0===Oe?void 0:Oe.iscorrect)}))||void 0===jt?void 0:jt.length].filter((ve,ge,Oe)=>Oe.indexOf(ve)==ge).length}else if(null!=d&&null!==(T=d.test)&&void 0!==T&&null!==(T=T.answer)&&void 0!==T&&T.fill){var Jt,Yt;bt=(null==d||null===(Jt=d.test)||void 0===Jt||null===(Jt=Jt.answer)||void 0===Jt||null===(Jt=Jt.fill)||void 0===Jt||null===(Jt=Jt.map(ve=>ve.iscorrect?1:0))||void 0===Jt?void 0:Jt.reduce((ve,ge)=>ve+ge))==(null===(Yt=d.svg)||void 0===Yt||null===(Yt=Yt.nodes)||void 0===Yt||null===(Yt=Yt.filter(ve=>{var ge;return"fill"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)}))||void 0===Yt?void 0:Yt.length)}else if(null!=d&&null!==(X=d.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.matching){var oe,_e;bt=(null===(oe=d.svg)||void 0===oe||null===(oe=oe.nodes)||void 0===oe||null===(oe=oe.filter(ve=>{var ge;return"matching-empty"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)}))||void 0===oe?void 0:oe.length)==((null==d||null===(_e=d.test)||void 0===_e||null===(_e=_e.answer)||void 0===_e?void 0:_e.matching)||[]).map(ve=>ve.key==ve.value?1:0).reduce((ve,ge)=>ve+ge)}ne(j,d,k,F,{iscorrect:bt},Q),console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt.nodeStatus,Pt.slideStatus,F)})}})(d,j)};var R=f(8619),u=f(8785),J=f(4921),yt=f(8054),ft=f(2282),Ot=f(2875),Ft=f(8419);const Et=(j,d,k)=>{if(k.slideStatus!=Pt.slideStatus||!d.length)return;let F=d.shift(),Q=j.filter(T=>T.idx==F);if(!Q.length)return;let K=Math.max.apply(null,Q.map(T=>{var X;return null!==(X=T.time)&&void 0!==X?X:0})),I=!1,V=K<.5?0:setTimeout(()=>{I||(I=!0,Et(j,d,k))},1e3*K);_t(j,d,Q,0,k,{idx:F,total:Q.length,counter:0,isRecursive:I,timeoutRecursive:V,maxTimeCoundown:K,uid:Math.floor(1e9*Math.random())})},_t=(j,d,k,F,Q,K)=>{if(Q.slideStatus!=Pt.slideStatus)return;let I=k[F];if(I){switch(I.type){case ut.$.GROUP:break;case ut.$.CIRCLE:(0,R._)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.ELLIPSE:(0,u.r)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.LINE:(0,J.W)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.RECT:(0,yt.f)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.POLYGON:(0,ft.l)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.FOREIGNOBJECT:(0,Ot.e)(I.id,{size:I.size,attribute:I.attribute,style:I.style,source:I.source},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.IMAGE:(0,gt.G)(I.id,{size:I.size,attribute:I.attribute,source:I.source},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.TEXT:(0,_.$)(I.id,{size:I.size,attribute:I.attribute,source:I.source},I.pid?window.document.getElementById(I.pid):null);break;case ut.$.PATH:(0,Ft.G)(I.id,{size:I.size,attribute:I.attribute},I.pid?window.document.getElementById(I.pid):null)}G(Q.slide,I,Q,()=>{K.counter+=1,K.maxTimeCoundown<.5&&K.counter>=K.total&&(K.total=K.counter=0,K.isRecursive||(clearTimeout(K.timeoutRecursive),K.isRecursive=!0,setTimeout(()=>{Et(j,d,Q)},250)))}),_t(j,d,k,++F,Q,K)}},Pt=new class qt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},x.icdt.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,k;return null!==(d=null===(k=this._dataSource)||void 0===k||null===(k=k.slides)||void 0===k?void 0:k.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var k;let F=null===(k=this._dataSource)||void 0===k||null===(k=k.slides)||void 0===k?void 0:k.find((Tt,Rt)=>Rt==this._slideIdx),Q=null==F?void 0:F.svg,K=(Tt,Rt)=>{let Xt=null==Tt?void 0:Tt.find(Yt=>Yt.id==d);if(Xt)return Xt.pid=Rt,Xt;let jt=0,Jt=Tt.length||0;for(;jt<Jt&&!Xt&&(Xt=K(Tt[jt].nodes||[],Tt[jt].id),!Xt);)jt++;return Xt},I=K((null==Q?void 0:Q.nodes)||[]);var V,T,X,bt,Kt;return I?(I.style=null!==(V=I.style)&&void 0!==V?V:{},I.source=null!==(T=I.source)&&void 0!==T?T:{},I.animate=null!==(X=I.animate)&&void 0!==X?X:{},I.interactive=null!==(bt=I.interactive)&&void 0!==bt?bt:{},I.variable=null!==(Kt=I.variable)&&void 0!==Kt?Kt:{},I):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,k,F){var Q;let K;var I,V;if(this.refreshNodeStatus(),this.refreshSlideStatus(),F)K=null===(I=this._dataSource)||void 0===I||null===(I=I.slides)||void 0===I?void 0:I.find(Kt=>Kt.code==F||Kt.id==F),K&&(this._slideIdx=(null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.indexOf(K))||0);else if(k){var T,X;K=null===(T=this._dataSource)||void 0===T||null===(T=T.slides)||void 0===T?void 0:T.find(Kt=>Kt.id==k),K&&(this._slideIdx=(null===(X=this._dataSource)||void 0===X||null===(X=X.slides)||void 0===X?void 0:X.indexOf(K))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),K=this.slide;if(K){var bt;re(x.icdt.container,x.icdt.svg,K,!0),null===(bt=jQuery(x.icdt.svg).find("#"+B.O.BACKGROUND_GROUP))||void 0===bt||bt.empty();let Kt=(0,Lt.g1)(B.O.BACKGROUND_GROUP,"g",void 0,x.icdt.svg);(0,Lt.x0)(Kt,K),(j=>{var d,k,F,Q;let K=Pt.nodeStatus,I=Pt.slideStatus;null===(d=j.svg)||void 0===d||d.nodes.forEach(T=>{T.pid=Math.ceil(1e9*Math.random()),(0,M.m)(T.pid)});let V=null===(k=j.svg)||void 0===k||null===(k=k.nodes)||void 0===k?void 0:k.map(T=>T.idx).filter((T,X,bt)=>bt.indexOf(T)==X).sort((T,X)=>(null!=T?T:0)-(null!=X?X:0));Et(null!==(F=null===(Q=j.svg)||void 0===Q?void 0:Q.nodes)&&void 0!==F?F:[],null!=V?V:[],{slide:j,nodeStatus:K,slideStatus:I})})(K)}this.changeSlide(this.slides,null===(Q=this.slide)||void 0===Q?void 0:Q.id,this.slideIdx,this.slides.length,K)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,k,F,Q,K){this._fnChangeSlides.forEach(I=>I(d,k,F,Q,K))}},re=(j,d,k,F)=>{var Q,K,I,V;let T=window.document.querySelector(d);var X;T||(T=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(X=window.document.querySelector(j))||void 0===X||X.appendChild(T)),F&&(T.textContent=null);let{x:bt,y:Kt,width:Tt,height:Rt}=null!==(Q=null==k||null===(K=k.svg)||void 0===K?void 0:K.viewBox)&&void 0!==Q?Q:x.icdt.screen.frameSize;T.setAttributeNS(null,"viewBox",bt+" "+Kt+" "+Tt+" "+Rt),T.setAttribute("id",d.replace("#",""));var oe,_e,Xt=null!==(I=jQuery(j).width())&&void 0!==I?I:1080,jt=null!==(V=jQuery(j).height())&&void 0!==V?V:1080,Yt=Tt/Rt;Yt>=Xt/jt?_e=(oe=Xt)/Yt:oe=(_e=jt)*Yt,T.setAttributeNS(null,"width",oe.toString()),T.setAttributeNS(null,"height",_e.toString())}},2336:(ce,At,f)=>{f.d(At,{Q:()=>x});var B=f(1690);const x=(A,Z,c)=>{var O;if(!Z.value)return void c();let S=jQuery("#"+A),q="",_=null!==(O=Z.iteration)&&void 0!==O?O:0,M=[];(Z.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?M.push(Z.value):(M.push("animation"),M.push(Z.value?"animation-"+Z.value:"animation-fadein")),_<0?(M.push("animation-iteration-infinite"),c(),c=function(){}):_>0&&M.push("animation-iteration-"+(_+1)),q=M.join(" "),function(it){let W=function(){S.data("animate-running")?S.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){S.data("animate-running",!1),setTimeout(function(){it()},100)}):it()};S.hasClass("animation")?setTimeout(function(){W()}):W()}(function(){var it;ut(A),(_>0||_<0)&&S.one("animationiteration",function(){Z.slideStatus===B.$.slideStatus||(S.data("animate-running",!1),ut(A),Z.slideStatus===B.$.slideStatus&&c())}),S.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(S.data("animate-running",!1),ut(A),Z.finish){default:case 0:case 1:break;case 2:S.addClass("hide")}Z.slideStatus===B.$.slideStatus&&c()}),S.attr("data-class",null!==(it=S.attr("class"))&&void 0!==it?it:""),S.addClass(q),S.data("animate-running",!0)})},ut=function(A){var Z,c=jQuery("#"+A),O=null===(Z=c.attr("class"))||void 0===Z?void 0:Z.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);O&&O.forEach(function(q){jQuery(c).removeClass(q)});let S=c.attr("data-class");S&&(c.attr("class",S),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},861:(ce,At,f)=>{f.d(At,{G:()=>A});var B=f(4318),x=f(1690),ut=f(4080);const A=(c,O,S)=>{var q;if(!O.points||!O.points.length)return void S();let _=jQuery("#"+c),M=function Z(c){let O=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let b,it,W,S=1,q=c.length;for(;S<q;){if(b=c[S-1],it=c[S],W=c[S+1],(Math.abs(b[0]-it[0])>=15||Math.abs(b[1]-it[1])>=15)&&Math.pow(b[0]-it[0],2)+Math.pow(b[1]-it[1],2)>=Math.pow(15,2)&&W&&(Math.abs(b[0]-W[0])<=20||Math.abs(b[1]-W[1])<=20)&&Math.pow(b[0]-W[0],2)+Math.pow(b[1]-W[1],2)<=Math.pow(20,2))O.push(it);else{let at=it[0]-b[0],N=it[1]-b[1],nt=Math.max(Math.abs(at),Math.abs(N));for(var H=0;H<nt;H+=15)O.push([b[0]+at*H/nt,b[1]+N*H/nt])}S++}return q>0&&(O.splice(0,0,c[0]),O.push(c[q-1])),O}(O.points||[]),b=null!==(q=O.iteration)&&void 0!==q?q:0;if(b<0&&(S(),S=function(){}),_.data("work-running")&&b<0)return;_.data("work-running",!0);let gt,it=M.length,W=Math.max(20,1e3*(O.time||3)/it),{id:H,type:at,size:N,attribute:nt}=x.$.findNode(c),mt=function(ct){if(O.slideStatus!==x.$.slideStatus)return _.data("work-running",!1),void(O.slideStatus===x.$.slideStatus&&S());if(ct<it){let tt=M[ct];tt&&(gt=Object.assign({},N,{x:tt[0]-N.width/2,y:tt[1]-N.height/2}),Object.assign(nt,(0,B.sg)(at,gt)),(0,ut.__)(window.document.getElementById(H),nt),setTimeout(function(){mt(++ct)},W))}else if(b>0)b--,mt(1);else if(b<0)mt(1);else switch(_.data("work-running",!1),O.slideStatus===x.$.slideStatus&&S(),O.finish){default:case 0:break;case 1:Object.assign(nt,(0,B.sg)(at,N)),(0,ut.__)(window.document.getElementById(H),nt);break;case 2:_.addClass("hide")}};mt(1)}},157:(ce,At,f)=>{f.d(At,{R:()=>x});var B=f(1690);const x=(A,Z,c,O,S)=>{var q,_,M;if(O.slideStatus!=B.$.slideStatus)return Z.async&&"change-slide"!=Z.async?void 0:void S();if(O.nodeStatus!=B.$.nodeStatus&&(!Z.async||"change-node"==Z.async))return void S();if(null===(q=Z.source)||void 0===q||!q.url)return console.warn(`${A} -> audio no source!`),S(),void(S=()=>{});var b=jQuery("#"+A);let it=null!==(_=Z.iteration)&&void 0!==_?_:0;if(it<0&&(S(),S=function(){}),!(b.data("audio-running")&&it<0)){b.data("audio-running",!0);var W=function(at){at.pause(),at.remove(),b.data("audio-running",!1)},H=new Audio;return H.autoplay=!0,H.loop=0!=it,H.preload="auto",H.controls=!0,H.setAttributeNode(document.createAttribute("playsinline")),H.addEventListener("canplay",function(){var at=H.play();at&&at.then(function(N){var nt;b.data("audio-running",!0),"time"==Z.async?setTimeout(()=>{W(H),S(),S=()=>{}},1e3*(null!==(nt=Z.time)&&void 0!==nt?nt:1)):"non-stop"==Z.async&&(S(),S=()=>{})}).catch(function(N){b.data("audio-running",!1),O.slideStatus===B.$.slideStatus&&(S(),S=()=>{})})}),H.addEventListener("timeupdate",function(){switch(Z.async){case"time":case"non-stop":break;case"finish-action":c.total>=2&&c.total-c.counter==1&&(W(this),S(),S=()=>{});break;default:case"change-node":O.nodeStatus!==B.$.nodeStatus&&(W(this),S(),S=()=>{});break;case"change-slide":O.slideStatus!==B.$.slideStatus&&(W(this),S(),S=()=>{})}}),H.addEventListener("canplaythrough",function(){this.loop&&(it>0?it--:0==it&&(this.loop=!1))}),H.addEventListener("play",function(){}),H.addEventListener("pause",function(){}),H.addEventListener("ended",function(){this.remove(),b.data("audio-running",!1),O.slideStatus===B.$.slideStatus&&(S(),S=()=>{})}),H.onerror=function(){this.remove(),b.data("audio-running",!1),O.slideStatus===B.$.slideStatus&&(S(),S=()=>{})},H.src=(null===(M=Z.source)||void 0===M?void 0:M.url)||"",H}}},5973:(ce,At,f)=>{f.d(At,{F:()=>S});var B=f(4981),x=f(1690),ut=f(2336),A=f(861),Z=f(157),c=f(4787),O=f(370);const S=(q,_,M,b)=>{var it,W,H;let at={total:0,counter:0},{triggershow:N,triggerrun:nt,triggerhide:gt,action:mt,audio:ct,slide:tt,media:D}=null!==(it=null===(W=q.interactive)||void 0===W?void 0:W.click)&&void 0!==it?it:{};if(N){let{id:Mt,ids:Gt,time:dt,async:Y}=N;"asynctrue"==Y?(0,c.L5)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M}):"time"==Y&&setTimeout(()=>{(0,c.L5)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})},1e3*(null!=dt?dt:0))}if(nt){let{id:Mt,ids:Gt,time:dt,async:Y}=nt;"asynctrue"==Y?(0,c.Ar)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M}):"time"==Y&&setTimeout(()=>{(0,c.Ar)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})},1e3*(null!=dt?dt:0))}if(gt){let{id:Mt,ids:Gt,time:dt,async:Y}=gt;"asynctrue"==Y?(0,c.WT)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M}):"time"==Y&&setTimeout(()=>{(0,c.WT)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})},1e3*(null!=dt?dt:0))}let Wt=()=>{setTimeout(()=>{if(at.counter>=at.total){if(b&&b(),N){let{id:Mt,ids:Gt,async:dt}=N;"asyncfalse"==dt&&(0,c.L5)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})}if(nt){let{id:Mt,ids:Gt,async:dt}=nt;"asyncfalse"==dt&&(0,c.Ar)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})}if(gt){let{id:Mt,ids:Gt,async:dt}=gt;"asyncfalse"==dt&&(0,c.WT)({id:Mt,ids:Gt,nodeStatus:_,slideStatus:M})}}})};if(null!=mt&&mt.value){at.total+=1;let Mt=()=>{at.counter+=1,Wt()};switch(mt.value){case"hide":jQuery("#"+q.id).addClass("hide"),Mt();break;case"points":{let{points:Gt,time:dt,iteration:Y,finish:xt}=mt;Gt&&(0,A.G)(q.id,{points:Gt,time:dt,iteration:Y,finish:xt,nodeStatus:_,slideStatus:M},Mt);break}default:{var Lt;let{value:Gt,time:dt,iteration:Y,finish:xt}=mt;(0,ut.Q)(null!==(Lt=q.pid)&&void 0!==Lt?Lt:0,{value:Gt,time:dt,iteration:Y,finish:xt,nodeStatus:_,slideStatus:M},Mt);break}}}if(null!=ct&&null!==(H=ct.source)&&void 0!==H&&H.path){at.total+=1;let Mt=()=>{at.counter+=1,Wt()};(0,Z.R)(q.id,ct,at,{nodeStatus:_,slideStatus:M},Mt)}if(at.total||Wt(),null!=tt&&tt.id)switch(console.log(`InteractiveNode #${q.id} slide(undefined,${tt.id},${tt.code}) success!`),tt.id){case-1:x.$.runSlide(x.$.slideIdx-1);break;case-2:x.$.runSlide(x.$.slideIdx+1);break;default:var Dt;x.$.runSlide(void 0,tt.id,null===(Dt=tt.code)||void 0===Dt?void 0:Dt.toString())}if(null!=D&&D.type){var le;let Gt=`<div class="popup-media-viewer"><iframe src="${(0,O.e)({readfileuploadurl:null===(le=B.icdt.config)||void 0===le?void 0:le.readfileuploadurl,type:null==D?void 0:D.type,oss:null==D?void 0:D.oss,path:null==D?void 0:D.path,pathExtract:null==D?void 0:D.pathExtract,url:null==D?void 0:D.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,dt=jQuery(Gt).appendTo(window.document.body);dt.find(".btn-close").click(function(Y){Y.preventDefault(),dt.remove()})}}},4787:(ce,At,f)=>{f.d(At,{Ar:()=>A,L5:()=>ut,WT:()=>Z});var B=f(1690),x=f(5973);const ut=c=>{console.log("icdt_Run_Interactive_TriggerShow",c),c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(O=>{jQuery("#"+O).removeClass("hide")})},A=c=>{console.log("icdt_Run_Interactive_TriggerRun",c),c.id?(jQuery("#"+c.id).removeClass("hide"),(0,x.F)(B.$.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(O=>{jQuery("#"+O).removeClass("hide"),(0,x.F)(B.$.findNode(O),c.nodeStatus,c.slideStatus)})},Z=c=>{console.log("icdt_Run_Interactive_TriggerHide",c),c.id?jQuery("#"+c.id).addClass("hide"):c.ids&&c.ids.forEach(O=>{jQuery("#"+O).addClass("hide")})}},4080:(ce,At,f)=>{f.d(At,{Mh:()=>gt,wM:()=>tt,xo:()=>mt,it:()=>D,g1:()=>Mt,__:()=>Wt,QI:()=>Dt,DB:()=>Lt,eb:()=>ct,x0:()=>pt,g$:()=>Gt,mo:()=>Zt,XH:()=>St,hJ:()=>dt,vl:()=>xt,yD:()=>Y,Yw:()=>ne});var B=f(9054),x=f(1687),Z=/^#?[a-fA-F0-9]+$/;const S=(G,R)=>{var u;if("none"==(G=null!==(u=G)&&void 0!==u?u:""))return"none";if("transparent"==G)return"rgba(0,0,0,0)";if(G.includes("rgba("))return G;if(G.includes("rgb(")&&(G=((G,R)=>{if(!G)return"";let u=G.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),J=(u&&u[4]||"").trim(),yt=u?(256|u[1]).toString(16).slice(1)+(256|u[2]).toString(16).slice(1)+(256|u[3]).toString(16).slice(1):G;return"0"==J?"transparent":`#${yt}`})(G)),!(G=G.replace(/[^0-9a-fA-F]/g,"")))return"";if(!Z.test(G))return console.error(`hex2rgba -> ${G}: first argument has invalid hexadecimal characters`),"";if("#"===G[0]&&(G=G.slice(1)),3===G.length){let yt=G.split("");yt.splice(2,0,G[2]),yt.splice(1,0,G[1]),yt.splice(0,0,G[0]),G=yt.join("")}if(6!==G.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var J=[parseInt(G.slice(0,2),16),parseInt(G.slice(2,4),16),parseInt(G.slice(4,6),16)];return R="number"==typeof R?R:parseFloat(R),J.push(R>=0&&R<=1?R:1),"rgba("+J.join(",")+")"};var q=f(370),_=f(1814),M=f(4981),b=f(3423),it=f(8054),W=f(7210),H=f(8619),at=f(1690),N=f(2875),nt=f(1105);class gt{constructor(R,u){let J=window.document.querySelector(u);var yt;J||(J=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(yt=window.document.querySelector(R))||void 0===yt||yt.appendChild(J));let{svgViewBox:ft,svgSize:Ot}=M.icdt.screen.init();J.setAttributeNS(null,"viewBox",`${ft.x} ${ft.y} ${ft.width} ${ft.height}`),J.setAttribute("id",u.replace("#","")),J.style.display="block",J.style.width=`${Ot.width}px`,J.style.height=`${Ot.height}px`,J.style.backgroundColor="#fafafa",J.style.cursor="default"}}const mt=G=>{jQuery(M.icdt.target).find("#"+x.O.BACKGROUND_GROUP).empty();let R=Mt(x.O.BACKGROUND_GROUP,"g",void 0,M.icdt.target);pt(R,G),(()=>{let u=window.document.getElementById(null==G?void 0:G.id);jQuery(u).find("#"+x.O.BACKGROUND_GROUP).empty();let J=Mt(x.O.BACKGROUND_GROUP,"g",void 0,u);pt(J,G)})()},ct=()=>{let G=M.icdt.screen.svgViewBox,R=M.icdt.screen.svgSize;M.icdt.target&&(M.icdt.target.setAttributeNS(null,"viewBox",`${G.x} ${G.y} ${G.width} ${G.height}`),M.icdt.target.style.left=`${R.x}px`,M.icdt.target.style.top=`${R.y}px`,M.icdt.target.style.width=`${R.width}px`,M.icdt.target.style.height=`${R.height}px`)},tt=()=>{jQuery(M.icdt.target).find(">*:not(defs)").remove()},D=(G,R,u,J,yt)=>{let ft;return G?(ft=jQuery(yt||M.icdt.target).find("#"+G).get(0),ft||(ft=window.document.createElementNS("http://www.w3.org/2000/svg",u),ft.setAttribute("id",G),R==B.$.FOREIGNOBJECT&&ft.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(ft).appendTo(yt||M.icdt.target))):(ft=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(ft).appendTo(yt||M.icdt.target)),null!=J&&J.attribute&&Wt(ft,null==J?void 0:J.attribute),null!=J&&J.style&&Lt(ft,null==J?void 0:J.style),null!=J&&J.source&&Dt(ft,R,null==J?void 0:J.source),ft},Wt=(G,R)=>{return jQuery(G).attr((u=Object.assign({},R||{}),null===(J=Object.keys(u))||void 0===J||J.forEach(Ot=>{switch(Ot){case"fill":break;case"stroke":var Ft;Object.assign(u,{"stroke-width":null!==(Ft=u.strokeWidth)&&void 0!==Ft?Ft:null,strokeWidth:null});break;case"strokeLinecap":var zt;Object.assign(u,{"stroke-linecap":null!==(zt=u.strokeLinecap)&&void 0!==zt?zt:null,strokeLinecap:null});break;case"strokeLinejoin":var Et;Object.assign(u,{"stroke-linejoin":null!==(Et=u.strokeLinejoin)&&void 0!==Et?Et:null,strokeLinejoin:null});break;case"strokeDasharray":var _t;Object.assign(u,{"stroke-dasharray":null!==(_t=u.strokeDasharray)&&void 0!==_t?_t:null,strokeDasharray:null});break;case"strokeDasharrays":var qt,Pt;Object.assign(u,{"stroke-dasharray":null!==(qt=null===(Pt=u.strokeDasharrays)||void 0===Pt?void 0:Pt.join(" "))&&void 0!==qt?qt:null,strokeDasharrays:null});break;case"fontFamily":var re;Object.assign(u,{"font-family":null!==(re=u.fontFamily)&&void 0!==re?re:null,fontFamily:null});break;case"fontSize":var j;Object.assign(u,{"font-size":null!==(j=u.fontSize)&&void 0!==j?j:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var d;Object.assign(u,{"transform-origin":null!==(d=u.transformOrigin)&&void 0!==d?d:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?S(u.fill,null!==(yt=null==u?void 0:u.fillOpacity)&&void 0!==yt?yt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?S(u.stroke,null!==(ft=null==u?void 0:u.strokeOpacity)&&void 0!==ft?ft:1):"rgba(0,0,0,0)",strokeOpacity:null}))),G;var u,J,yt,ft},Lt=(G,R)=>{return jQuery(G).css((u=Object.assign({},R||{}),null===(J=Object.keys(u))||void 0===J||J.forEach(yt=>{switch(yt){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var ft;Object.assign(u,u.borderWidth&&u.borderStyle&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle,"border-color":S(u.borderColor,null!==(ft=u.borderOpacity)&&void 0!==ft?ft:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Ot;u.backgroundColor&&Object.assign(u,{"background-color":S(u.backgroundColor,null!==(Ot=u.backgroundOpacity)&&void 0!==Ot?Ot:1)}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),G;var u,J},Dt=(G,R,u)=>{switch(R){case B.$.TEXT:var J,yt;jQuery(G).text(null!==(J=null==u||null===(yt=u.text)||void 0===yt?void 0:yt.textContent)&&void 0!==J?J:"");break;case B.$.IMAGE:var ft,Ot,Ft,zt,Et;jQuery(G).attr("href",(null==u||null===(ft=u.image)||void 0===ft?void 0:ft.base64)||(null!=u&&null!==(Ot=u.image)&&void 0!==Ot&&Ot.path?(null===(Ft=M.icdt.config)||void 0===Ft?void 0:Ft.readfileuploadurl)+(null==u||null===(zt=u.image)||void 0===zt?void 0:zt.path):null==u||null===(Et=u.image)||void 0===Et?void 0:Et.url)||"");break;case B.$.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var _t,qt;if(null!==(_t=u.text)&&void 0!==_t&&_t.variableKeywords&&null!==(qt=u.text)&&void 0!==qt&&qt.variableKeywords.length){var Pt;let g=M.icdt.variable.getKeys(),v=(null===(Pt=u.text)||void 0===Pt?void 0:Pt.textContent)||"";u.text.variableKeywords.forEach(E=>{var p=E.replace(/[^a-zA-Z0-9_]/gm,"");if(g.indexOf(p)>=0){var z=M.icdt.variable.getValue(p);v=v.replace(E,z)}}),jQuery(G).text(v)}else{var re;jQuery(G).text((null===(re=u.text)||void 0===re?void 0:re.textContent)||"")}break;case"html":{var j,d,k;let g=(null==u||null===(j=u.html)||void 0===j?void 0:j.htmlContent)||"";if(null!==(d=u.html)&&void 0!==d&&d.variableKeywords&&null!==(k=u.html)&&void 0!==k&&k.variableKeywords.length){let v=M.icdt.variable.getKeys();u.html.variableKeywords.forEach(E=>{var p=E.replace(/[^a-zA-Z0-9_]/gm,"");if(v.indexOf(p)>=0){var z=M.icdt.variable.getValue(p);g=g.replace(E,z)}})}jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${g}</div>`).find("img[path],video[path],iframe[path]").each((v,E)=>{var p,z;E.setAttribute("src",(null!==(p=null===(z=M.icdt.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+E.getAttribute("path")),E.removeAttribute("path")});break}case"input":var F,Q,K,I;if(null!==(F=u.input)&&void 0!==F&&F.input)jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(K=null===(I=u.input)||void 0===I?void 0:I.placeholder)&&void 0!==K?K:""}" maxlength="100" /></div>`);else if(null!==(Q=u.input)&&void 0!==Q&&Q.textarea){var V,T;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(V=null===(T=u.input)||void 0===T?void 0:T.placeholder)&&void 0!==V?V:""}" maxlength="1000"></textarea></div>`)}break;case"image":var X,bt,Kt,Tt,Rt;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(X=u.image)||void 0===X?void 0:X.base64)||(null!==(bt=u.image)&&void 0!==bt&&bt.path?(null===(Kt=M.icdt.config)||void 0===Kt?void 0:Kt.readfileuploadurl)+(null===(Tt=u.image)||void 0===Tt?void 0:Tt.path):null===(Rt=u.image)||void 0===Rt?void 0:Rt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Xt,jt,Jt,Yt;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Xt=u.iframe)&&void 0!==Xt&&Xt.path?(null===(jt=M.icdt.config)||void 0===jt?void 0:jt.readfileuploadurl)+(null===(Jt=u.iframe)||void 0===Jt?void 0:Jt.path):null===(Yt=u.iframe)||void 0===Yt?void 0:Yt.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var oe,_e,ve,ge,Oe,ni;let g=(0,q.e)({readfileuploadurl:null===(oe=M.icdt.config)||void 0===oe?void 0:oe.readfileuploadurl,type:null===(_e=u.embed)||void 0===_e?void 0:_e.type,oss:null===(ve=u.embed)||void 0===ve?void 0:ve.oss,path:null===(ge=u.embed)||void 0===ge?void 0:ge.path,pathExtract:null===(Oe=u.embed)||void 0===Oe?void 0:Oe.pathExtract,url:null===(ni=u.embed)||void 0===ni?void 0:ni.url});jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${g}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ri,vi;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ri=null===(vi=u.svg)||void 0===vi?void 0:vi.svgContent)&&void 0!==ri?ri:""}</div>`);break;case"test":{var Ae,li,Ge,Ze;let g=(null==u||null===(Ae=u.html)||void 0===Ae?void 0:Ae.htmlContent)||"";if(null!==(li=u.html)&&void 0!==li&&li.variableKeywords&&null!==(Ge=u.html)&&void 0!==Ge&&Ge.variableKeywords.length){let v=M.icdt.variable.getKeys();u.html.variableKeywords.forEach(E=>{var p=E.replace(/[^a-zA-Z0-9_]/gm,"");if(v.indexOf(p)>=0){var z=M.icdt.variable.getValue(p);g=g.replace(E,z)}})}switch(null==u||null===(Ze=u.test)||void 0===Ze?void 0:Ze.type){case"truefalse":var ai;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(ai=u.test.truefalse)&&void 0!==ai&&ai.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"singlechoice":var oi;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(oi=u.test.singlechoice)&&void 0!==oi&&oi.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"multichoice":var ti;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(ti=u.test.multichoice)&&void 0!==ti&&ti.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"matching-empty":var Xe;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==u||null===(Xe=u.test.matching)||void 0===Xe?void 0:Xe.key}"></div>`);break;case"matching-content":var si,wt,C;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==u||null===(si=u.test.matching)||void 0===si?void 0:si.key}"><div class="ondrag-item" data-key="${null!==(wt=null==u||null===(C=u.test)||void 0===C||null===(C=C.matching)||void 0===C?void 0:C.key)&&void 0!==wt?wt:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div></div>`);break;case"fill":var i;((null===(i=u.html)||void 0===i?void 0:i.fillKeywords)||[]).forEach(v=>{var E=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${v.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;g=g.replace(new RegExp(v.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),E)}),jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"speech":jQuery(G).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var n,r,a,o,y;jQuery(G).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(n=null!==(r=u.image)&&void 0!==r&&r.path?(null===(a=M.icdt.config)||void 0===a?void 0:a.readfileuploadurl)+(null===(o=u.image)||void 0===o?void 0:o.path):null===(y=u.image)||void 0===y?void 0:y.url)&&void 0!==n?n:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(G).find("img[path],video[path],iframe[path]").each((v,E)=>{var p,z;E.setAttribute("src",(null!==(p=null===(z=M.icdt.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+E.getAttribute("path")),E.removeAttribute("path")})}}}},Mt=(G,R,u,J)=>{let yt=jQuery(J||M.icdt.target).find("#"+G).get(0);return yt||(yt=window.document.createElementNS("http://www.w3.org/2000/svg",R),yt.setAttribute("id",G),jQuery(yt).appendTo(J||M.icdt.target)),jQuery(yt).attr((null==u?void 0:u.attribute)||{}),jQuery(yt).css((null==u?void 0:u.style)||{}),yt},Gt=(G,R)=>{let u=(0,b.v)(2),J={fill:_.S3.fill,stroke:_.S3.stroke,"stroke-width":(0,b.v)(_.S3.strokeWidth)};return[{element:Mt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:R.x-u,y:R.y-u,width:R.width+2*u,height:R.height+2*u},J)},G),posType:"rect-center"}]},dt=(G,R)=>{let{size:u}=R,J=(0,b.v)(1),yt=(0,b.v)(2),ft=(0,b.v)(5),Ot={stroke:_.NV.stroke,"stroke-width":(0,b.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},Ft={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,b.v)(_.Mo.strokeWidth)},zt={fill:_.In.fill,stroke:_.In.stroke,"stroke-width":(0,b.v)(_.In.strokeWidth),width:(0,b.v)(_.In.width),height:(0,b.v)(_.In.height)};return Mt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-J,y1:u.y,x2:u.x-J,y2:u.y+u.height},Ot)},G),Mt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-J,x2:u.x+u.width,y2:u.y-J},Ot)},G),Mt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+J,y1:u.y,x2:u.x+u.width+J,y2:u.y+u.height},Ot)},G),Mt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+J,x2:u.x+u.width,y2:u.y+u.height+J},Ot)},G),[{element:Mt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Ft),style:{cursor:"move"}},G),posType:"rect-center"},{element:Mt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-ft,y:u.y-ft},zt),style:{cursor:"nw-resize"}},G),posType:"rect-top-left"},{element:Mt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-yt,y:u.y-ft},zt),style:{cursor:"ne-resize"}},G),posType:"rect-top-right"},{element:Mt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-ft,y:u.y+u.height-yt},zt),style:{cursor:"sw-resize"}},G),posType:"rect-bottom-left"},{element:Mt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-yt,y:u.y+u.height-yt},zt),style:{cursor:"se-resize"}},G),posType:"rect-bottom-right"}]},Y=(G,R,u)=>{let J=(0,b.v)(1),yt={stroke:_.NV.stroke,"stroke-width":(0,b.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},ft={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,b.v)(_.Mo.strokeWidth)},Ot={fill:_.dt.fill,stroke:_.dt.stroke,"stroke-width":(0,b.v)(_.dt.strokeWidth)},qt=(Mt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-J,y1:u.y,x2:u.x-J,y2:u.y+u.height},yt)},G),Mt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-J,x2:u.x+u.width,y2:u.y-J},yt)},G),Mt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+J,y1:u.y,x2:u.x+u.width+J,y2:u.y+u.height},yt)},G),Mt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+J,x2:u.x+u.width,y2:u.y+u.height+J},yt)},G),Mt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},ft)},G));return R.forEach(Pt=>{let{size:re}=Pt;Mt("icdt-temp-select-rect-node-"+Pt.id,"rect",{attribute:Object.assign({x:re.x,y:re.y,width:re.width,height:re.height},Ot)},G)}),[{element:qt,posType:"rect-center"}]},xt=(G,R)=>{let u=(0,b.v)(1),J={stroke:_.NV.stroke,"stroke-width":(0,b.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},yt={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,b.v)(_.Mo.strokeWidth)};return Mt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:R.x-u,y1:R.y,x2:R.x-u,y2:R.y+R.height},J)},G),Mt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:R.x,y1:R.y-u,x2:R.x+R.width,y2:R.y-u},J)},G),Mt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:R.x+R.width+u,y1:R.y,x2:R.x+R.width+u,y2:R.y+R.height},J)},G),Mt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:R.x,y1:R.y+R.height+u,x2:R.x+R.width,y2:R.y+R.height+u},J)},G),[{element:Mt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:R.x,y:R.y,width:R.width,height:R.height},yt)},G),posType:"rect-center"}]},St=(G,R)=>{let u=(0,b.v)(-1),J={stroke:_.h8.stroke,"stroke-width":(0,b.v)(_.h8.strokeWidth),"stroke-linecap":_.h8.strokeLinecap,"stroke-dasharray":(0,b.v)(_.h8.strokeDasharray)},yt={fill:_.MA.fill};return Mt("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:R.x-u,y1:R.y,x2:R.x-u,y2:R.y+R.height},J)},G),Mt("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:R.x,y1:R.y-u,x2:R.x+R.width,y2:R.y-u},J)},G),Mt("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:R.x+R.width+u,y1:R.y,x2:R.x+R.width+u,y2:R.y+R.height},J)},G),Mt("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:R.x,y1:R.y+R.height+u,x2:R.x+R.width,y2:R.y+R.height+u},J)},G),Mt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:R.x,y:R.y,width:R.width,height:R.height},yt)},G),[]},Zt=(G,R)=>{let u={fill:_.k0.fill,stroke:_.k0.stroke,"stroke-width":(0,b.v)(_.k0.strokeWidth),"stroke-dasharray":(0,b.v)(_.k0.strokeDasharray)};jQuery(G).empty(),R.forEach(J=>{var yt,ft;let{size:Ot}=J;if(!J.idx)return;Mt("icdt-temp-index-rect-node-"+J.id,"rect",{attribute:Object.assign({x:Ot.x-5,y:Ot.y-5,width:Ot.width+10,height:Ot.height+10},u)},G);let{element:Ft}=(0,N.e)(Math.ceil(1e9*Math.random()),{size:{x:Ot.x-76,y:Ot.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(yt=J.idx)&&void 0!==yt?yt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(ft=J.time)&&void 0!==ft?ft:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},G);Ft.classList.add("node-input"),jQuery(Ft).on("change",'input[name="idx"]',zt=>{var Et;J.idx=parseInt(null!==(Et=zt.target.value)&&void 0!==Et?Et:"0")}).on("change",'input[name="time"]',zt=>{var Et;J.time=parseFloat(null!==(Et=zt.target.value)&&void 0!==Et?Et:"0")}).on("click",'button[name="remove"]',zt=>{J.idx=0,J.time=null,Zt(G,R)})})},pt=(G,R)=>{var u,J,yt,ft,Ot,Ft;let{color:zt,opacity:Et,path:_t,url:qt,base64:Pt}=null!==(u=null==R||null===(J=R.svg)||void 0===J?void 0:J.background)&&void 0!==u?u:{},{x:re,y:j,width:d,height:k}=null!==(yt=null==R||null===(ft=R.svg)||void 0===ft?void 0:ft.viewBox)&&void 0!==yt?yt:{x:0,y:0,width:0,height:0};(0,nt.$)(void 0,{size:{x:0,y:-7,width:d,height:k},attribute:{fill:"#999",fontSize:14,class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Ot=null!==(Ft=null==R?void 0:R.name)&&void 0!==Ft?Ft:null==R?void 0:R.code)&&void 0!==Ot?Ot:void 0}}},G),(0,it.f)(void 0,{size:{x:re,y:j,width:d,height:k},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},G),zt&&(0,it.f)(void 0,{size:{x:re,y:j,width:d,height:k},attribute:{fill:zt,fillOpacity:Et}},G),_t&&(0,W.G)(void 0,{size:{x:re,y:j,width:d,height:k},source:{type:"image",image:{path:_t,url:qt,base64:Pt}}},G)},ne=(G,R)=>{var u;switch(jQuery(G).empty(),null===(u=R.test)||void 0===u?void 0:u.type){case"truefalse":{var J,yt,ft;let j=null==R||null===(J=R.test)||void 0===J||null===(J=J.answer)||void 0===J||null===(J=J.truefalse)||void 0===J?void 0:J.value;null===(yt=R.svg)||void 0===yt||yt.nodes.filter(d=>{var k;return"truefalse"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&d.id!=j}).forEach(d=>{var k;let{x:Q,y:K,width:I,height:V}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,H._)(Math.ceil(1e9*Math.random()),{size:{x:Q-.5,y:K-.5,width:I+1,height:V+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},G)}),null!=R&&null!==(ft=R.test)&&void 0!==ft&&null!==(ft=ft.answer)&&void 0!==ft&&ft.truefalse&&j&&(d=>{let k=at.$.findNode(j),{x:Q,y:K,width:I,height:V}=null!==(d=null==k?void 0:k.size)&&void 0!==d?d:{x:0,y:0,width:0,height:0};(0,H._)(Math.ceil(1e9*Math.random()),{size:{x:Q-2,y:K-2,width:I+4,height:V+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},G)})();break}case"singlechoice":{var Ot,Ft,zt;let j=null==R||null===(Ot=R.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||null===(Ot=Ot.singlechoice)||void 0===Ot?void 0:Ot.value;null===(Ft=R.svg)||void 0===Ft||Ft.nodes.filter(d=>{var k;return"singlechoice"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&d.id!=j}).forEach(d=>{var k;let{x:Q,y:K,width:I,height:V}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,H._)(Math.ceil(1e9*Math.random()),{size:{x:Q-.5,y:K-.5,width:I+1,height:V+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},G)}),null!=R&&null!==(zt=R.test)&&void 0!==zt&&null!==(zt=zt.answer)&&void 0!==zt&&zt.singlechoice&&j&&(d=>{let k=at.$.findNode(j),{x:Q,y:K,width:I,height:V}=null!==(d=null==k?void 0:k.size)&&void 0!==d?d:{x:0,y:0,width:0,height:0};(0,H._)(Math.ceil(1e9*Math.random()),{size:{x:Q-2,y:K-2,width:I+4,height:V+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},G)})();break}case"multichoice":{var Et,_t,qt,Pt;let j=null!==(Et=null==R||null===(_t=R.test)||void 0===_t||null===(_t=_t.answer)||void 0===_t||null===(_t=_t.multichoice)||void 0===_t?void 0:_t.map(d=>d.value))&&void 0!==Et?Et:[];var re;null===(qt=R.svg)||void 0===qt||qt.nodes.filter(d=>{var k;return"multichoice"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&!j.includes(d.id)}).forEach(d=>{var k;let{x:Q,y:K,width:I,height:V}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,it.f)(Math.ceil(1e9*Math.random()),{size:{x:Q-.5,y:K-.5,width:I+1,height:V+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},G)}),null!=R&&null!==(Pt=R.test)&&void 0!==Pt&&null!==(Pt=Pt.answer)&&void 0!==Pt&&Pt.multichoice&&j.length&&(null==R||null===(re=R.test)||void 0===re||null===(re=re.answer)||void 0===re||re.multichoice.forEach(d=>{var k;let F=at.$.findNode(d.value),{x:K,y:I,width:V,height:T}=null!==(k=null==F?void 0:F.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,it.f)(Math.ceil(1e9*Math.random()),{size:{x:K-2,y:I-2,width:V+4,height:T+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},G)}));break}}}},370:(ce,At,f)=>{f.d(At,{e:()=>ut});const ut=c=>{switch(null==c?void 0:c.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+c.readfileuploadurl+c.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+c.readfileuploadurl+c.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+c.readfileuploadurl+c.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+c.readfileuploadurl+c.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+c.readfileuploadurl+c.path;case 906:case 911:case 910:return""+c.readfileuploadurl+c.path;case 905:var O;return"imsmanifest.xml"==(null===(O=c.pathExtract)||void 0===O||null===(O=O.split("/"))||void 0===O?void 0:O.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+c.readfileuploadurl+c.pathExtract:""+c.readfileuploadurl+c.path;case 907:case 900:return""+c.readfileuploadurl+c.path;case 904:switch(c.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+c.url;case 1002:var S;return null!==(S=A(c.url))&&void 0!==S?S:"";case 1005:var q;return null!==(q=c.url)&&void 0!==q?q:"";default:var _;return null!==(_=c.url)&&void 0!==_?_:""}default:return""+c.readfileuploadurl+c.path}},A=c=>{let O=Z(c);return O?"https://www.youtube.com/embed/"+O+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},Z=c=>{let O=null==c?void 0:c.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return O&&O.length>=2?O[1]:null}},511:(ce,At,f)=>{function B(){}function x(t){return null==t?B:function(){return this.querySelector(t)}}function Z(){return[]}function c(t){return null==t?Z:function(){return this.querySelectorAll(t)}}function q(t){return function(){return this.matches(t)}}function _(t){return function(e){return e.matches(t)}}f.d(At,{$0Z:()=>aa,jvg:()=>la});var M=Array.prototype.find;function it(){return this.firstElementChild}var H=Array.prototype.filter;function at(){return Array.from(this.children)}function mt(t){return new Array(t.length)}function tt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Wt(t,e,l,s,h,m){for(var P,w=0,L=e.length,rt=m.length;w<rt;++w)(P=e[w])?(P.__data__=m[w],s[w]=P):l[w]=new tt(t,m[w]);for(;w<L;++w)(P=e[w])&&(h[w]=P)}function Lt(t,e,l,s,h,m,w){var P,L,Ht,rt=new Map,st=e.length,It=m.length,Nt=new Array(st);for(P=0;P<st;++P)(L=e[P])&&(Nt[P]=Ht=w.call(L,L.__data__,P,e)+"",rt.has(Ht)?h[P]=L:rt.set(Ht,L));for(P=0;P<It;++P)Ht=w.call(t,m[P],P,m)+"",(L=rt.get(Ht))?(s[P]=L,L.__data__=m[P],rt.delete(Ht)):l[P]=new tt(t,m[P]);for(P=0;P<st;++P)(L=e[P])&&rt.get(Nt[P])===L&&(h[P]=L)}function Dt(t){return t.__data__}function Mt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Zt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}tt.prototype={constructor:tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var yt="http://www.w3.org/1999/xhtml";const ft={svg:"http://www.w3.org/2000/svg",xhtml:yt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),ft.hasOwnProperty(e)?{space:ft[e],local:t}:t}function Ft(t){return function(){this.removeAttribute(t)}}function zt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Et(t,e){return function(){this.setAttribute(t,e)}}function _t(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Pt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function j(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function d(t){return function(){this.style.removeProperty(t)}}function k(t,e,l){return function(){this.style.setProperty(t,e,l)}}function F(t,e,l){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,l)}}function K(t,e){return t.style.getPropertyValue(e)||j(t).getComputedStyle(t,null).getPropertyValue(e)}function I(t){return function(){delete this[t]}}function V(t,e){return function(){this[t]=e}}function T(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function bt(t){return t.trim().split(/^|\s+/)}function Kt(t){return t.classList||new Tt(t)}function Tt(t){this._node=t,this._names=bt(t.getAttribute("class")||"")}function Rt(t,e){for(var l=Kt(t),s=-1,h=e.length;++s<h;)l.add(e[s])}function Xt(t,e){for(var l=Kt(t),s=-1,h=e.length;++s<h;)l.remove(e[s])}function jt(t){return function(){Rt(this,t)}}function Jt(t){return function(){Xt(this,t)}}function Yt(t,e){return function(){(e.apply(this,arguments)?Rt:Xt)(this,t)}}function _e(){this.textContent=""}function ve(t){return function(){this.textContent=t}}function ge(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ni(){this.innerHTML=""}function ri(t){return function(){this.innerHTML=t}}function vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function Ze(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===yt&&e.documentElement.namespaceURI===yt?e.createElement(t):e.createElementNS(l,t)}}function ti(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=Ot(t);return(e.local?ti:oi)(e)}function wt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function E(t){return function(){var e=this.__on;if(e){for(var m,l=0,s=-1,h=e.length;l<h;++l)m=e[l],t.type&&m.type!==t.type||m.name!==t.name?e[++s]=m:this.removeEventListener(m.type,m.listener,m.options);++s?e.length=s:delete this.__on}}}function p(t,e,l){return function(){var h,s=this.__on,m=function g(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var w=0,P=s.length;w<P;++w)if((h=s[w]).type===t.type&&h.name===t.name)return this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=m,h.options=l),void(h.value=e);this.addEventListener(t.type,m,l),h={type:t.type,name:t.name,value:e,listener:m,options:l},s?s.push(h):this.__on=[h]}}function U(t,e,l){var s=j(t),h=s.CustomEvent;"function"==typeof h?h=new h(e,l):(h=s.document.createEvent("Event"),l?(h.initEvent(e,l.bubbles,l.cancelable),h.detail=l.detail):h.initEvent(e,!1,!1)),t.dispatchEvent(h)}function lt(t,e){return function(){return U(this,t,e)}}function ht(t,e){return function(){return U(this,t,e.apply(this,arguments))}}Tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var se=[null];function fe(t,e){this._groups=t,this._parents=e}function pe(){return new fe([[document.documentElement]],se)}fe.prototype=pe.prototype={constructor:fe,select:function ut(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,l=e.length,s=new Array(l),h=0;h<l;++h)for(var L,rt,m=e[h],w=m.length,P=s[h]=new Array(w),st=0;st<w;++st)(L=m[st])&&(rt=t.call(L,L.__data__,st,m))&&("__data__"in L&&(rt.__data__=L.__data__),P[st]=rt);return new fe(s,this._parents)},selectAll:function S(t){t="function"==typeof t?function O(t){return function(){return function A(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):c(t);for(var e=this._groups,l=e.length,s=[],h=[],m=0;m<l;++m)for(var L,w=e[m],P=w.length,rt=0;rt<P;++rt)(L=w[rt])&&(s.push(t.call(L,L.__data__,rt,w)),h.push(L));return new fe(s,h)},selectChild:function W(t){return this.select(null==t?it:function b(t){return function(){return M.call(this.children,t)}}("function"==typeof t?t:_(t)))},selectChildren:function nt(t){return this.selectAll(null==t?at:function N(t){return function(){return H.call(this.children,t)}}("function"==typeof t?t:_(t)))},filter:function gt(t){"function"!=typeof t&&(t=q(t));for(var e=this._groups,l=e.length,s=new Array(l),h=0;h<l;++h)for(var L,m=e[h],w=m.length,P=s[h]=[],rt=0;rt<w;++rt)(L=m[rt])&&t.call(L,L.__data__,rt,m)&&P.push(L);return new fe(s,this._parents)},data:function le(t,e){if(!arguments.length)return Array.from(this,Dt);var l=e?Lt:Wt,s=this._parents,h=this._groups;"function"!=typeof t&&(t=function D(t){return function(){return t}}(t));for(var m=h.length,w=new Array(m),P=new Array(m),L=new Array(m),rt=0;rt<m;++rt){var st=s[rt],It=h[rt],Nt=It.length,Ht=Mt(t.call(st,st&&st.__data__,rt,s)),we=Ht.length,Se=P[rt]=new Array(we),Ct=w[rt]=new Array(we);l(st,It,Se,Ct,L[rt]=new Array(Nt),Ht,e);for(var de,ye,ee=0,Vt=0;ee<we;++ee)if(de=Se[ee]){for(ee>=Vt&&(Vt=ee+1);!(ye=Ct[Vt])&&++Vt<we;);de._next=ye||null}}return(w=new fe(w,s))._enter=P,w._exit=L,w},enter:function ct(){return new fe(this._enter||this._groups.map(mt),this._parents)},exit:function Gt(){return new fe(this._exit||this._groups.map(mt),this._parents)},join:function dt(t,e,l){var s=this.enter(),h=this,m=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(h=e(h))&&(h=h.selection()),null==l?m.remove():l(m),s&&h?s.merge(h).order():h},merge:function Y(t){for(var e=t.selection?t.selection():t,l=this._groups,s=e._groups,h=l.length,w=Math.min(h,s.length),P=new Array(h),L=0;L<w;++L)for(var Ht,rt=l[L],st=s[L],It=rt.length,Nt=P[L]=new Array(It),we=0;we<It;++we)(Ht=rt[we]||st[we])&&(Nt[we]=Ht);for(;L<h;++L)P[L]=l[L];return new fe(P,this._parents)},selection:function xe(){return this},order:function xt(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var w,s=t[e],h=s.length-1,m=s[h];--h>=0;)(w=s[h])&&(m&&4^w.compareDocumentPosition(m)&&m.parentNode.insertBefore(w,m),m=w);return this},sort:function St(t){function e(It,Nt){return It&&Nt?t(It.__data__,Nt.__data__):!It-!Nt}t||(t=Zt);for(var l=this._groups,s=l.length,h=new Array(s),m=0;m<s;++m){for(var rt,w=l[m],P=w.length,L=h[m]=new Array(P),st=0;st<P;++st)(rt=w[st])&&(L[st]=rt);L.sort(e)}return new fe(h,this._parents).order()},call:function pt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ne(){return Array.from(this)},node:function G(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var s=t[e],h=0,m=s.length;h<m;++h){var w=s[h];if(w)return w}return null},size:function R(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function J(t){for(var e=this._groups,l=0,s=e.length;l<s;++l)for(var P,h=e[l],m=0,w=h.length;m<w;++m)(P=h[m])&&t.call(P,P.__data__,m,h);return this},attr:function re(t,e){var l=Ot(t);if(arguments.length<2){var s=this.node();return l.local?s.getAttributeNS(l.space,l.local):s.getAttribute(l)}return this.each((null==e?l.local?zt:Ft:"function"==typeof e?l.local?Pt:qt:l.local?_t:Et)(l,e))},style:function Q(t,e,l){return arguments.length>1?this.each((null==e?d:"function"==typeof e?F:k)(t,e,null==l?"":l)):K(this.node(),t)},property:function X(t,e){return arguments.length>1?this.each((null==e?I:"function"==typeof e?T:V)(t,e)):this.node()[t]},classed:function oe(t,e){var l=bt(t+"");if(arguments.length<2){for(var s=Kt(this.node()),h=-1,m=l.length;++h<m;)if(!s.contains(l[h]))return!1;return!0}return this.each(("function"==typeof e?Yt:e?jt:Jt)(l,e))},text:function Oe(t){return arguments.length?this.each(null==t?_e:("function"==typeof t?ge:ve)(t)):this.node().textContent},html:function Ae(t){return arguments.length?this.each(null==t?ni:("function"==typeof t?vi:ri)(t)):this.node().innerHTML},raise:function Ge(){return this.each(li)},lower:function ai(){return this.each(Ze)},append:function si(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function C(t,e){var l="function"==typeof t?t:Xe(t),s=null==e?wt:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function o(t){return this.select(t?a:r)},datum:function y(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function z(t,e,l){var h,w,s=function v(t){return t.trim().split(/^|\s+/).map(function(e){var l="",s=e.indexOf(".");return s>=0&&(l=e.slice(s+1),e=e.slice(0,s)),{type:e,name:l}})}(t+""),m=s.length;if(!(arguments.length<2)){for(P=e?p:E,h=0;h<m;++h)this.each(P(s[h],e,l));return this}var P=this.node().__on;if(P)for(var st,L=0,rt=P.length;L<rt;++L)for(h=0,st=P[L];h<m;++h)if((w=s[h]).type===st.type&&w.name===st.name)return st.value},dispatch:function ot(t,e){return this.each(("function"==typeof e?ht:lt)(t,e))},[Symbol.iterator]:function*Ut(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var w,s=t[e],h=0,m=s.length;h<m;++h)(w=s[h])&&(yield w)}};const me=pe;var ke={value:()=>{}};function vn(){for(var s,t=0,e=arguments.length,l={};t<e;++t){if(!(s=arguments[t]+"")||s in l||/[\s.]/.test(s))throw new Error("illegal type: "+s);l[s]=[]}return new Pi(l)}function Pi(t){this._=t}function ar(t,e){for(var h,l=0,s=t.length;l<s;++l)if((h=t[l]).name===e)return h.value}function gn(t,e,l){for(var s=0,h=t.length;s<h;++s)if(t[s].name===e){t[s]=ke,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=l&&t.push({name:e,value:l}),t}Pi.prototype=vn.prototype={constructor:Pi,on:function(t,e){var h,l=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var s="",h=l.indexOf(".");if(h>=0&&(s=l.slice(h+1),l=l.slice(0,h)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:s}})}(t+"",l),m=-1,w=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++m<w;)if(h=(t=s[m]).type)l[h]=gn(l[h],t.name,e);else if(null==e)for(h in l)l[h]=gn(l[h],t.name,null);return this}for(;++m<w;)if((h=(t=s[m]).type)&&(h=ar(l[h],t.name)))return h},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Pi(t)},call:function(t,e){if((h=arguments.length-2)>0)for(var h,m,l=new Array(h),s=0;s<h;++s)l[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,h=(m=this._[t]).length;s<h;++s)m[s].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],h=0,m=s.length;h<m;++h)s[h].value.apply(e,l)}};const or=vn;var Ri,Oi,gi=0,xi=0,Ei=0,yn=1e3,Li=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return di||(pn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,l){var s=new ji;return s.restart(t,e,l),s}function _n(){di=(Li=Si.now())+Di,gi=xi=0;try{!function dr(){Xi(),++gi;for(var e,t=Ri;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}()}finally{gi=0,function hr(){for(var t,l,e=Ri,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ri=l);Oi=t,Yi(s)}(),di=0}}function ur(){var t=Si.now(),e=t-Li;e>yn&&(Di-=e,Li=t)}function Yi(t){gi||(xi&&(xi=clearTimeout(xi)),t-di>24?(t<1/0&&(xi=setTimeout(_n,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Li=Si.now(),Ei=setInterval(ur,yn)),gi=1,pn(_n)))}function wn(t,e,l){var s=new ji;return s.restart(h=>{s.stop(),t(h+e)},e=null==e?0:+e,l),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Xi():+l)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ri=this,Oi=this),this._call=t,this._time=l,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,zi=3;function Ki(t,e,l,s,h,m){var w=t.__transition;if(w){if(l in w)return}else t.__transition={};!function vr(t,e,l){var h,s=t.__transition;function w(rt){var st,It,Nt,Ht;if(1!==l.state)return L();for(st in s)if((Ht=s[st]).name===l.name){if(Ht.state===zi)return wn(w);4===Ht.state?(Ht.state=6,Ht.timer.stop(),Ht.on.call("interrupt",t,t.__data__,Ht.index,Ht.group),delete s[st]):+st<e&&(Ht.state=6,Ht.timer.stop(),Ht.on.call("cancel",t,t.__data__,Ht.index,Ht.group),delete s[st])}if(wn(function(){l.state===zi&&(l.state=4,l.timer.restart(P,l.delay,l.time),P(rt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=zi,h=new Array(Nt=l.tween.length),st=0,It=-1;st<Nt;++st)(Ht=l.tween[st].value.call(t,t.__data__,l.index,l.group))&&(h[++It]=Ht);h.length=It+1}}function P(rt){for(var st=rt<l.duration?l.ease.call(null,rt/l.duration):(l.timer.restart(L),l.state=5,1),It=-1,Nt=h.length;++It<Nt;)h[It].call(t,st);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),L())}function L(){for(var rt in l.state=6,l.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=l,l.timer=mn(function m(rt){l.state=1,l.timer.restart(w,l.delay,l.time),l.delay<=rt&&w(rt-l.delay)},0,l.time)}(t,l,{name:e,index:s,group:h,on:cr,tween:fr,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:bn})}function tn(t,e){var l=Fe(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function He(t,e){var l=Fe(t,e);if(l.state>zi)throw new Error("too late; already running");return l}function Fe(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ei(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Wi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,s,h,m){var w,P,L;return(w=Math.sqrt(t*t+e*e))&&(t/=w,e/=w),(L=t*l+e*s)&&(l-=t*L,s-=e*L),(P=Math.sqrt(l*l+s*s))&&(l/=P,s/=P,L/=P),t*s<e*l&&(t=-t,e=-e,L=-L,w=-w),{translateX:h,translateY:m,rotate:Math.atan2(e,t)*On,skewX:Math.atan(L)*On,scaleX:w,scaleY:P}}function kn(t,e,l,s){function h(rt){return rt.length?rt.pop()+" ":""}return function(rt,st){var It=[],Nt=[];return rt=t(rt),st=t(st),function m(rt,st,It,Nt,Ht,we){if(rt!==It||st!==Nt){var Se=Ht.push("translate(",null,e,null,l);we.push({i:Se-4,x:ei(rt,It)},{i:Se-2,x:ei(st,Nt)})}else(It||Nt)&&Ht.push("translate("+It+e+Nt+l)}(rt.translateX,rt.translateY,st.translateX,st.translateY,It,Nt),function w(rt,st,It,Nt){rt!==st?(rt-st>180?st+=360:st-rt>180&&(rt+=360),Nt.push({i:It.push(h(It)+"rotate(",null,s)-2,x:ei(rt,st)})):st&&It.push(h(It)+"rotate("+st+s)}(rt.rotate,st.rotate,It,Nt),function P(rt,st,It,Nt){rt!==st?Nt.push({i:It.push(h(It)+"skewX(",null,s)-2,x:ei(rt,st)}):st&&It.push(h(It)+"skewX("+st+s)}(rt.skewX,st.skewX,It,Nt),function L(rt,st,It,Nt,Ht,we){if(rt!==It||st!==Nt){var Se=Ht.push(h(Ht)+"scale(",null,",",null,")");we.push({i:Se-4,x:ei(rt,It)},{i:Se-2,x:ei(st,Nt)})}else(1!==It||1!==Nt)&&Ht.push(h(Ht)+"scale("+It+","+Nt+")")}(rt.scaleX,rt.scaleY,st.scaleX,st.scaleY,It,Nt),rt=st=null,function(Ht){for(var Ct,we=-1,Se=Nt.length;++we<Se;)It[(Ct=Nt[we]).i]=Ct.x(Ht);return It.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function br(t,e){var l,s;return function(){var h=He(this,t),m=h.tween;if(m!==l)for(var w=0,P=(s=l=m).length;w<P;++w)if(s[w].name===e){(s=s.slice()).splice(w,1);break}h.tween=s}}function xr(t,e,l){var s,h;if("function"!=typeof l)throw new Error;return function(){var m=He(this,t),w=m.tween;if(w!==s){h=(s=w).slice();for(var P={name:e,value:l},L=0,rt=h.length;L<rt;++L)if(h[L].name===e){h[L]=P;break}L===rt&&h.push(P)}m.tween=h}}function nn(t,e,l){var s=t._id;return t.each(function(){var h=He(this,s);(h.value||(h.value={}))[e]=l.apply(this,arguments)}),function(h){return Fe(h,s).value[e]}}function rn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Mn(t,e){var l=Object.create(t.prototype);for(var s in e)l[s]=e[s];return l}function ki(){}var Ui=1/.7,yi="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),kr=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),Mr=new RegExp(`^rgba\\(${yi},${yi},${yi},${Ti}\\)$`),Tr=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Ti}\\)$`),Cr=new RegExp(`^hsl\\(${Ti},${Ve},${Ve}\\)$`),Ar=new RegExp(`^hsla\\(${Ti},${Ve},${Ve},${Ti}\\)$`),Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?In(e):3===l?new ze(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new ze(e[1],e[2],e[3],1):(e=kr.exec(t))?new ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Tr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Tn.hasOwnProperty(t)?In(Tn[t]):"transparent"===t?new ze(NaN,NaN,NaN,0):null}function In(t){return new ze(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,s){return s<=0&&(t=e=l=NaN),new ze(t,e,l,s)}function Fi(t,e,l,s){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new ze((t=t.rgb()).r,t.g,t.b,t.opacity):new ze}(t):new ze(t,e,l,null==s?1:s)}function ze(t,e,l,s){this.r=+t,this.g=+e,this.b=+l,this.opacity=+s}function Nn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Qi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Rn(t,e,l,s){return s<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Qe(t,e,l,s)}function Ln(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Qe;if(t instanceof Qe)return t;var e=(t=t.rgb()).r/255,l=t.g/255,s=t.b/255,h=Math.min(e,l,s),m=Math.max(e,l,s),w=NaN,P=m-h,L=(m+h)/2;return P?(w=e===m?(l-s)/P+6*(l<s):l===m?(s-e)/P+2:(e-l)/P+4,P/=L<.5?m+h:2-m-h,w*=60):P=L>0&&L<1?0:w,new Qe(w,P,L,t.opacity)}function Qe(t,e,l,s){this.h=+t,this.s=+e,this.l=+l,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,s,h){var m=t*t,w=m*t;return((1-3*t+3*m-w)*e+(4-6*m+3*w)*l+(1+3*t+3*m-3*w)*s+w*h)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Nr(){return Ln(this).formatHsl()},formatRgb:An,toString:An}),rn(ze,Fi,Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ze(ui(this.r),ui(this.g),ui(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:function Rr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Qe,function Lr(t,e,l,s){return 1===arguments.length?Ln(t):new Qe(t,e,l,null==s?1:s)},Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,s=l+(l<.5?l:1-l)*e,h=2*l-s;return new ze(ln(t>=240?t-240:t+120,h,s),ln(t,h,s),ln(t<120?t+240:t-120,h,s),this.opacity)},clamp(){return new Qe(Dn(this.h),Hi(this.s),Hi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Kn(t,e){var l=e-t;return l?function Bn(t,e){return function(l){return t+l*e}}(t,l):zn(isNaN(t)?e:t)}const Wn=function t(e){var l=function Br(t){return 1==(t=+t)?Kn:function(e,l){return l-e?function zr(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(s){return Math.pow(t+s*e,l)}}(e,l,t):zn(isNaN(e)?l:e)}}(e);function s(h,m){var w=l((h=Fi(h)).r,(m=Fi(m)).r),P=l(h.g,m.g),L=l(h.b,m.b),rt=Kn(h.opacity,m.opacity);return function(st){return h.r=w(st),h.g=P(st),h.b=L(st),h.opacity=rt(st),h+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var w,P,l=e.length,s=new Array(l),h=new Array(l),m=new Array(l);for(w=0;w<l;++w)P=Fi(e[w]),s[w]=P.r||0,h[w]=P.g||0,m[w]=P.b||0;return s=t(s),h=t(h),m=t(m),P.opacity=1,function(L){return P.r=s(L),P.g=h(L),P.b=m(L),P+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var s=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),h=t[s],m=t[s+1];return jn((l-s/e)*e,s>0?t[s-1]:2*h-m,h,m,s<e-1?t[s+2]:2*m-h)}}),Un(function jr(t){var e=t.length;return function(l){var s=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var s,h,m,l=an.lastIndex=on.lastIndex=0,w=-1,P=[],L=[];for(t+="",e+="";(s=an.exec(t))&&(h=on.exec(e));)(m=h.index)>l&&(m=e.slice(l,m),P[w]?P[w]+=m:P[++w]=m),(s=s[0])===(h=h[0])?P[w]?P[w]+=h:P[++w]=h:(P[++w]=null,L.push({i:w,x:ei(s,h)})),l=on.lastIndex;return l<e.length&&(m=e.slice(l),P[w]?P[w]+=m:P[++w]=m),P.length<2?L[0]?function Wr(t){return function(e){return t(e)+""}}(L[0].x):function Kr(t){return function(){return t}}(e):(e=L.length,function(rt){for(var It,st=0;st<e;++st)P[(It=L[st]).i]=It.x(rt);return P.join("")})}function Gn(t,e){var l;return("number"==typeof e?ei:e instanceof Ci?Wn:(l=Ci(e))?(e=l,Wn):Ur)(t,e)}function Gr(t){return function(){this.removeAttribute(t)}}function Fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var s,m,h=l+"";return function(){var w=this.getAttribute(t);return w===h?null:w===s?m:m=e(s=w,l)}}function Hr(t,e,l){var s,m,h=l+"";return function(){var w=this.getAttributeNS(t.space,t.local);return w===h?null:w===s?m:m=e(s=w,l)}}function Vr(t,e,l){var s,h,m;return function(){var w,L,P=l(this);return null==P?void this.removeAttribute(t):(w=this.getAttribute(t))===(L=P+"")?null:w===s&&L===h?m:(h=L,m=e(s=w,P))}}function Jr(t,e,l){var s,h,m;return function(){var w,L,P=l(this);return null==P?void this.removeAttributeNS(t.space,t.local):(w=this.getAttributeNS(t.space,t.local))===(L=P+"")?null:w===s&&L===h?m:(h=L,m=e(s=w,P))}}function $r(t,e){var l,s;function h(){var m=e.apply(this,arguments);return m!==s&&(l=(s=m)&&function Yr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,m)),l}return h._value=e,h}function qr(t,e){var l,s;function h(){var m=e.apply(this,arguments);return m!==s&&(l=(s=m)&&function Xr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,m)),l}return h._value=e,h}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){He(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){He(this,t).duration=e}}var wl=me.prototype.constructor;function Fn(t){return function(){this.style.removeProperty(t)}}var zl=0;function Ye(t,e,l,s){this._groups=t,this._parents=e,this._name=l,this._id=s}function Qn(){return++zl}var $e=me.prototype;Ye.prototype=function Bl(t){return me().transition(t)}.prototype={constructor:Ye,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=x(t));for(var s=this._groups,h=s.length,m=new Array(h),w=0;w<h;++w)for(var st,It,P=s[w],L=P.length,rt=m[w]=new Array(L),Nt=0;Nt<L;++Nt)(st=P[Nt])&&(It=t.call(st,st.__data__,Nt,P))&&("__data__"in st&&(It.__data__=st.__data__),rt[Nt]=It,Ki(rt[Nt],e,l,Nt,rt,Fe(st,l)));return new Ye(m,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=c(t));for(var s=this._groups,h=s.length,m=[],w=[],P=0;P<h;++P)for(var st,L=s[P],rt=L.length,It=0;It<rt;++It)if(st=L[It]){for(var Ht,Nt=t.call(st,st.__data__,It,L),we=Fe(st,l),Se=0,Ct=Nt.length;Se<Ct;++Se)(Ht=Nt[Se])&&Ki(Ht,e,l,Se,Nt,we);m.push(Nt),w.push(st)}return new Ye(m,w,e,l)},selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=q(t));for(var e=this._groups,l=e.length,s=new Array(l),h=0;h<l;++h)for(var L,m=e[h],w=m.length,P=s[h]=[],rt=0;rt<w;++rt)(L=m[rt])&&t.call(L,L.__data__,rt,m)&&P.push(L);return new Ye(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,s=e.length,m=Math.min(s,l.length),w=new Array(s),P=0;P<m;++P)for(var Nt,L=e[P],rt=l[P],st=L.length,It=w[P]=new Array(st),Ht=0;Ht<st;++Ht)(Nt=L[Ht]||rt[Ht])&&(It[Ht]=Nt);for(;P<s;++P)w[P]=e[P];return new Ye(w,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),s=this._groups,h=s.length,m=0;m<h;++m)for(var L,w=s[m],P=w.length,rt=0;rt<P;++rt)if(L=w[rt]){var st=Fe(L,e);Ki(L,t,l,rt,w,{time:st.time+st.delay+st.duration,delay:0,duration:st.duration,ease:st.ease})}return new Ye(s,this._parents,t,l)},call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:function gl(t,e){var l=this._id;return arguments.length<2?Fe(this.node(),l).on.on(t):this.each(function vl(t,e,l){var s,h,m=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?tn:He;return function(){var w=m(this,t),P=w.on;P!==s&&(h=(s=P).copy()).on(e,l),w.on=h}}(l,t,e))},attr:function Zr(t,e){var l=Ot(t),s="transform"===l?wr:Gn;return this.attrTween(t,"function"==typeof e?(l.local?Jr:Vr)(l,s,nn(this,"attr."+t,e)):null==e?(l.local?Fr:Gr)(l):(l.local?Hr:Qr)(l,s,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var s=Ot(t);return this.tween(l,(s.local?$r:qr)(s,e))},style:function kl(t,e,l){var s="transform"==(t+="")?_r:Gn;return null==e?this.styleTween(t,function xl(t,e){var l,s,h;return function(){var m=K(this,t),w=(this.style.removeProperty(t),K(this,t));return m===w?null:m===l&&w===s?h:h=e(l=m,s=w)}}(t,s)).on("end.style."+t,Fn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var s,h,m;return function(){var w=K(this,t),P=l(this),L=P+"";return null==P&&(this.style.removeProperty(t),L=P=K(this,t)),w===L?null:w===s&&L===h?m:(h=L,m=e(s=w,P))}}(t,s,nn(this,"style."+t,e))).each(function Sl(t,e){var l,s,h,P,m="style."+e,w="end."+m;return function(){var L=He(this,t),rt=L.on,st=null==L.value[m]?P||(P=Fn(e)):void 0;(rt!==l||h!==st)&&(s=(l=rt).copy()).on(w,h=st),L.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,l){var s,m,h=l+"";return function(){var w=K(this,t);return w===h?null:w===s?m:m=e(s=w,l)}}(t,s,e),l).on("end.style."+t,null)},styleTween:function Cl(t,e,l){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Tl(t,e,l){var s,h;function m(){var w=e.apply(this,arguments);return w!==h&&(s=(h=w)&&function Ml(t,e,l){return function(s){this.style.setProperty(t,e.call(this,s),l)}}(t,w,l)),s}return m._value=e,m}(t,e,null==l?"":l))},text:function Nl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,l;function s(){var h=t.apply(this,arguments);return h!==l&&(e=(l=h)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(h)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var w,s=Fe(this.node(),l).tween,h=0,m=s.length;h<m;++h)if((w=s[h]).name===t)return w.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Fe(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Fe(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){He(this,t).ease=e}}(e,t)):Fe(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;He(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,s=l._id,h=l.size();return new Promise(function(m,w){var P={value:w},L={value:function(){0==--h&&m()}};l.each(function(){var rt=He(this,s),st=rt.on;st!==t&&((e=(t=st).copy())._.cancel.push(P),e._.interrupt.push(P),e._.end.push(L)),rt.on=e}),0===h&&m()})},[Symbol.iterator]:$e[Symbol.iterator]};var Wl={time:null,delay:0,duration:250,ease:function Kl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}me.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,h,w,l=t.__transition,m=!0;if(l){for(w in e=null==e?null:e+"",l)(s=l[w]).name===e?(h=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(h?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete l[w]):m=!1;m&&delete t.__transition}}(this,t)})},me.prototype.transition=function Gl(t){var e,l;t instanceof Ye?(e=t._id,t=t._name):(e=Qn(),(l=Wl).time=Xi(),t=null==t?null:t+"");for(var s=this._groups,h=s.length,m=0;m<h;++m)for(var L,w=s[m],P=w.length,rt=0;rt<P;++rt)(L=w[rt])&&Ki(L,t,e,rt,w,l||Ul(L,e));return new Ye(s,this._parents,t,e)};Math;function Ai(t){return{type:t}}function _i(t){return function(){return t}}function Yn(t){this._context=t}function $l(t){return new Yn(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,fn=2*cn,ci=1e-6,ql=fn-ci;function $n(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const l=10**e;return function(s){this._+=s[0];for(let h=1,m=s.length;h<m;++h)this._+=Math.round(arguments[h]*l)/l+s[h]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,s,h){this._append`Q${+e},${+l},${this._x1=+s},${this._y1=+h}`}bezierCurveTo(e,l,s,h,m,w){this._append`C${+e},${+l},${+s},${+h},${this._x1=+m},${this._y1=+w}`}arcTo(e,l,s,h,m){if(e=+e,l=+l,s=+s,h=+h,(m=+m)<0)throw new Error(`negative radius: ${m}`);let w=this._x1,P=this._y1,L=s-e,rt=h-l,st=w-e,It=P-l,Nt=st*st+It*It;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Nt>ci)if(Math.abs(It*L-rt*st)>ci&&m){let Ht=s-w,we=h-P,Se=L*L+rt*rt,Ct=Ht*Ht+we*we,kt=Math.sqrt(Se),ee=Math.sqrt(Nt),Vt=m*Math.tan((cn-Math.acos((Se+Nt-Ct)/(2*kt*ee)))/2),de=Vt/ee,ye=Vt/kt;Math.abs(de-1)>ci&&this._append`L${e+de*st},${l+de*It}`,this._append`A${m},${m},0,0,${+(It*Ht>st*we)},${this._x1=e+ye*L},${this._y1=l+ye*rt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,s,h,m,w){if(e=+e,l=+l,w=!!w,(s=+s)<0)throw new Error(`negative radius: ${s}`);let P=s*Math.cos(h),L=s*Math.sin(h),rt=e+P,st=l+L,It=1^w,Nt=w?h-m:m-h;null===this._x1?this._append`M${rt},${st}`:(Math.abs(this._x1-rt)>ci||Math.abs(this._y1-st)>ci)&&this._append`L${rt},${st}`,s&&(Nt<0&&(Nt=Nt%fn+fn),Nt>ql?this._append`A${s},${s},0,1,${It},${e-P},${l-L}A${s},${s},0,1,${It},${this._x1=rt},${this._y1=st}`:Nt>ci&&this._append`A${s},${s},0,${+(Nt>=cn)},${It},${this._x1=e+s*Math.cos(m)},${this._y1=l+s*Math.sin(m)}`)}rect(e,l,s,h){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${s=+s}v${+h}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=_i(!0),s=null,h=$l,m=null,w=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const s=Math.floor(l);if(!(s>=0))throw new RangeError(`invalid digits: ${l}`);e=s}return t},()=>new Zi(e)}(P);function P(L){var rt,It,Ht,st=(L=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(L)).length,Nt=!1;for(null==s&&(m=h(Ht=w())),rt=0;rt<=st;++rt)!(rt<st&&l(It=L[rt],rt,L))===Nt&&((Nt=!Nt)?m.lineStart():m.lineEnd()),Nt&&m.point(+t(It,rt,L),+e(It,rt,L));if(Ht)return m=null,Ht+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),P.x=function(L){return arguments.length?(t="function"==typeof L?L:_i(+L),P):t},P.y=function(L){return arguments.length?(e="function"==typeof L?L:_i(+L),P):e},P.defined=function(L){return arguments.length?(l="function"==typeof L?L:_i(!!L),P):l},P.curve=function(L){return arguments.length?(h=L,null!=s&&(m=h(s)),P):h},P.context=function(L){return arguments.length?(null==L?s=m=null:m=h(s=L),P):s},P}function qn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);