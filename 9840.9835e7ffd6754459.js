"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9840],{1461:(I,x,p)=>{p.d(x,{N:()=>T,b:()=>y});var m=p(4459);function T(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,m.cd)({url:"api/Category/Search",params:{category_id:t.params.category_id||null,category_title:t.params.category_title||null,createdby:t.params.createdby||null,level:t.params.level||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:c=>{"function"==typeof t.callback&&t.callback(c.data||null)},error:c=>{"function"==typeof t.callback&&t.callback(null),console.error(c)}})}function y(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,m.cd)({url:"api/Category/SearchTreeList",params:{getby:t.params.userid||null,category_id:t.params.category_id||null,category_pid:t.params.category_pid||null,category_title:t.params.category_title||null,active:t.params.active||null,topic_id:t.params.topic_id||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:c=>{"function"==typeof t.callback&&t.callback(c.data||null)},error:c=>{"function"==typeof t.callback&&t.callback(null),console.error(c)},loading:t.loading})}},203:(I,x,p)=>{p.d(x,{AY:()=>T,ef:()=>c,nC:()=>t,v9:()=>y});var m=p(4459);const T=_=>{var C,f,h,e;_.params=_.params||{},_.params.page=_.params.page||1,_.params.limit=_.params.limit||1,(0,m.cd)({url:"api/ProductPackage/Search",params:{getby:null!==(C=_.params.userid)&&void 0!==C?C:null,userid:null!==(f=_.params.userid)&&void 0!==f?f:null,productpackage_id:null!==(h=_.params.productpackage_id)&&void 0!==h?h:null,productpackage_key:null!==(e=_.params.productpackage_key)&&void 0!==e?e:null,iseffect:!0,ispublic:!0,sortfield:"ordinal",sorttype:"asc",posstart:(_.params.page-1)*_.params.limit,numofrow:_.params.limit},success:b=>{var o;"function"==typeof _.callback&&_.callback(null!==(o=b.data)&&void 0!==o?o:null)},error:b=>{"function"==typeof _.callback&&_.callback(),console.error(b)},loading:_.loading})},y=_=>{var C,f,h;_.params=_.params||{},(0,m.cd)({url:"api/ProductPackage/Detail",params:{getby:null!==(C=_.params.userid)&&void 0!==C?C:null,productpackage_id:null!==(f=_.params.productpackage_id)&&void 0!==f?f:null,productpackage_key:null!==(h=_.params.productpackage_key)&&void 0!==h?h:null},success:e=>{var b;"function"==typeof _.callback&&_.callback(null!==(b=e.data)&&void 0!==b?b:null)},error:e=>{"function"==typeof _.callback&&_.callback(),console.error(e)},loading:_.loading})},t=_=>{var C;_.params=_.params||{},(0,m.cd)({url:"api/ProductPackage/AppliedPackage",params:{userid:null!==(C=_.params.userid)&&void 0!==C?C:null},success:f=>{var h;"function"==typeof _.callback&&_.callback(null!==(h=f.data)&&void 0!==h?h:null)},error:f=>{"function"==typeof _.callback&&_.callback(),console.error(f)},loading:_.loading})},c=_=>{var C,f;_.params=_.params||{},(0,m.cd)({url:"api/ProductPackage/AppliedPackageContent",params:{userid:null!==(C=_.params.userid)&&void 0!==C?C:null,v_functionlimit:null!==(f=_.params.v_functionlimit)&&void 0!==f?f:null},success:h=>{var e;"function"==typeof _.callback&&_.callback(null!==(e=h.data)&&void 0!==e?e:null)},error:h=>{"function"==typeof _.callback&&_.callback(),console.error(h)},loading:_.loading})}},4041:(I,x,p)=>{p.d(x,{D:()=>T,w:()=>y});var m=p(4459);function T(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,m.cd)({url:"api/Topic/Search",params:{topic_id:t.params.topic_id||null,topic_title:t.params.topic_title||null,createdby:t.params.createdby||null,level:t.params.level||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:c=>{"function"==typeof t.callback&&t.callback(c.data||null)},error:c=>{"function"==typeof t.callback&&t.callback(null),console.error(c)}})}function y(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,m.cd)({url:"api/Topic/SearchTreeList",params:{getby:t.params.userid||null,topic_id:t.params.topic_id||null,topic_pid:t.params.topic_pid||null,topic_title:t.params.topic_title||null,active:t.params.active||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:c=>{"function"==typeof t.callback&&t.callback(c.data||null)},error:c=>{"function"==typeof t.callback&&t.callback(null),console.error(c)},loading:t.loading})}},3589:(I,x,p)=>{p.d(x,{z:()=>y});var m=p(5861),T=p(4459);const y=function(){var t=(0,m.Z)(function*(c){c.params=c.params||{};let _=yield(0,T.H0)();var C=[];c.params.subFolder&&(c.params.subFolder=c.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),c.params.subFolder&&C.push(c.params.subFolder)),c.params.isconvertvideo=!!c.params.isconvertvideo,c.params.isconvertpdf2image=!!c.params.isconvertpdf2image,c.params.isconvertoffice2image=!!c.params.isconvertoffice2image,c.params.isresizeimage=!!c.params.isresizeimage;const f=new FormData;f.append("path",C.join("/")),f.append("types",c.params.fileType||null),f.append("file",c.params.file||null),f.append("base64",c.params.base64||!1),f.append("isconvertvideo",c.params.isconvertvideo),f.append("isconvertpdf2image",c.params.isconvertpdf2image),f.append("isconvertoffice2image",c.params.isconvertoffice2image),f.append("isresizeimage",c.params.isresizeimage),(0,T.tm)({api_url:_.fileuploadurl,authorization:!1,url:"Files",params:f,success:h=>{"function"==typeof c.callback&&c.callback(h.data||null)},error:h=>{"function"==typeof c.callback&&c.callback(),console.error(c,h)},loading:c.loading})});return function(_){return t.apply(this,arguments)}}()},4531:(I,x,p)=>{p.d(x,{e:()=>d});var m=p(5861),T=p(4459),y=p(8530),t=p(1461),c=p(4041),_=p(5938),C=p(9403),f=p(8526),h=p(3377),e=p(8186),b=p(7090),o=p(9468),O=p(3536),D=p(6814),k=p(95);function U(n,a){if(1&n){const r=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){o.CHM(r);const l=o.oxw(2);return o.KtG(l.clearTopic())}),o._UZ(1,"ion-icon",25),o.qZA()}}function B(n,a){if(1&n){const r=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){o.CHM(r);const l=o.oxw(2);return o.KtG(l.clearCategory())}),o._UZ(1,"ion-icon",25),o.qZA()}}function E(n,a){if(1&n){const r=o.EpF();o.TgZ(0,"div",15)(1,"ion-item")(2,"ion-input",16),o.NdJ("change",function(l){o.CHM(r);const g=o.oxw();return o.KtG(g.changeBoardTitle(l))}),o.qZA()()(),o.TgZ(3,"div",17)(4,"div",18),o._UZ(5,"input",19),o.TgZ(6,"div",20),o.YNc(7,U,2,0,"button",21),o.TgZ(8,"button",22),o.NdJ("click",function(l){o.CHM(r);const g=o.oxw();return o.KtG(g.presentPopoverTopic(l))}),o._UZ(9,"ion-icon",23),o.qZA()()()(),o.TgZ(10,"div",17)(11,"div",18),o._UZ(12,"input",24),o.TgZ(13,"div",20),o.YNc(14,B,2,0,"button",21),o.TgZ(15,"button",22),o.NdJ("click",function(l){o.CHM(r);const g=o.oxw();return o.KtG(g.presentPopoverCategory(l))}),o._UZ(16,"ion-icon",23),o.qZA()()()()}if(2&n){const r=o.oxw();let i,l;o.xp6(2),o.Q6J("ngModel",r.board.board_title),o.xp6(3),o.Q6J("value",null!==(i=r.board.topic_title)&&void 0!==i?i:""),o.xp6(2),o.Q6J("ngIf",r.board.topic_id),o.xp6(5),o.Q6J("value",null!==(l=r.board.category_title)&&void 0!==l?l:""),o.xp6(2),o.Q6J("ngIf",r.board.category_id)}}function Z(n,a){if(1&n){const r=o.EpF();o.ynx(0),o.TgZ(1,"div",36),o.NdJ("click",function(){const g=o.CHM(r).$implicit,v=o.oxw(2);return o.KtG(v.selectItem(g.board_id))}),o.TgZ(2,"div",37)(3,"div",30)(4,"div",31)(5,"ion-img",38),o.NdJ("ionImgDidLoad",function(l){const v=o.CHM(r).$implicit,M=o.oxw(2);return o.KtG(M.coverLoad(l,v))}),o.qZA()()()()(),o.BQk()}if(2&n){const r=a.$implicit,i=o.oxw(2);o.xp6(1),o.Tol(r.board_id==i.selectedId?"selected":r.board_id==i.currentId?"actived":""),o.xp6(4),o.Q6J("alt",r.board_title)}}function P(n,a){1&n&&(o.ynx(0),o.TgZ(1,"div",39)(2,"div",40)(3,"div",30)(4,"div",31),o._UZ(5,"ion-skeleton-text",41),o.qZA()()()(),o.BQk()),2&n&&(o.xp6(5),o.Q6J("animated",!0))}function u(n,a){if(1&n){const r=o.EpF();o.TgZ(0,"ion-infinite-scroll",42),o.NdJ("ionInfinite",function(l){o.CHM(r);const g=o.oxw(2);return o.KtG(g.onIonInfinite(l))}),o._UZ(1,"ion-infinite-scroll-content"),o.qZA()}}function s(n,a){if(1&n){const r=o.EpF();o.TgZ(0,"ion-content")(1,"div",26)(2,"div",27)(3,"div",28),o.NdJ("click",function(){o.CHM(r);const l=o.oxw();return o.KtG(l.selectItem())}),o.TgZ(4,"div")(5,"div",29)(6,"div",30)(7,"div",31)(8,"div",32)(9,"div")(10,"div"),o._uU(11,"B\xe0i m\u1edbi"),o.qZA()()()()()()()(),o.YNc(12,Z,6,3,"ng-container",33),o.YNc(13,P,6,1,"ng-container",34),o.qZA()(),o.YNc(14,u,2,0,"ion-infinite-scroll",35),o.qZA()}if(2&n){const r=o.oxw();o.xp6(3),o.Tol(r.selectedId?"":"selected"),o.xp6(9),o.Q6J("ngForOf",r.boards),o.xp6(1),o.Q6J("ngIf",r.paging.loading),o.xp6(1),o.Q6J("ngIf",r.paging.active)}}let d=(()=>{var n;class a{constructor(i,l,g){this.modalController=i,this.toastController=l,this.popoverController=g,this.board={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.fileurl="",this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.boards=[],this.topics=[],this.categorys=[],this.isloading=!1}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,m.Z)(function*(){var l,g,v,M;i.appsettings=yield(0,T.H0)(),i.appsettings.madonvi&&(i.user=yield(0,h.iA)(),i.readfileuploadurl=i.appsettings.readfileuploadurl||"",i.coverUrl=`${null!==(l=i.appsettings.readfileuploadurl)&&void 0!==l?l:""}${null!==(g=i.appsettings.boardpath)&&void 0!==g?g:""}`,i.coverv1Url=`${null!==(v=i.appsettings.readfileuploadurl)&&void 0!==v?v:""}${null!==(M=i.appsettings.boardpathv1)&&void 0!==M?M:""}`,i.refreshData())})()}refreshData(){(0,c.D)({params:{page:1,limit:20},callback:i=>{this.topics=i||[]}}),(0,t.N)({params:{page:1,limit:20},callback:i=>{this.categorys=i||[]}}),this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadData_Paging(i){var l;this.paging.loading=!0,(0,b.rM)({params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:g=>{this.boards=this.boards.concat(g||[]),this.paging.loading=!1,(!(null!=g&&g.length)||(null==g?void 0:g.length)<this.paging.limit)&&(this.paging.active=!1),i&&i()}})}loadMore(i){this.paging.page+=1,this.loadData_Paging(i)}onIonInfinite(i){this.loadMore(()=>{i.target.complete()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var i=this;if(!this.board.board_title)return void(0,e.B)(this.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(M=>{M.present()});let l=M=>{(0,e.B)(this.toastController,{},M).then(A=>{A.present()}),0==(null==M?void 0:M.returncode)&&(this.modalController.dismiss(null==M?void 0:M.id,"confirm"),"modal-board"==this.openFrom&&(0,m.Z)(function*(){const A=yield i.modalController.create({component:f.F,componentProps:{currentId:i.currentId,selectedId:null==M?void 0:M.id},mode:"ios",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});A.onDidDismiss().then(w=>{if("confirm"==w.role&&w.data){let L=w.data;var F;L.board_id&&window.open(`editor?b=${L.board_id}#${null===(F=L.board_title)||void 0===F?void 0:F.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),A.present()})())};var g,v;this.selectedId?(0,y.Z6)({loading:M=>{this.isloading=M},params:Object.assign({},this.board,{userid:null===(g=this.user)||void 0===g?void 0:g.userid,board_id:this.selectedId}),callback:l}):(0,y.Ux)({loading:M=>{this.isloading=M},params:Object.assign({},this.board,{userid:null===(v=this.user)||void 0===v?void 0:v.userid}),callback:l})}changeTopic(i,l){Object.assign(this.board,{topic_id:i,topic_title:l})}clearTopic(){Object.assign(this.board,{topic_id:null,topic_title:null})}presentPopoverTopic(i){var l=this;return(0,m.Z)(function*(){const g=yield l.popoverController.create({component:_.a,componentProps:{selectedId:l.board.topic_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(v=>{var M,A;"confirm"==v.role&&Object.assign(l.board,{topic_id:null===(M=v.data)||void 0===M?void 0:M.topic_id,topic_title:null===(A=v.data)||void 0===A?void 0:A.topic_title})}),g.present()})()}changeCategory(i,l){Object.assign(this.board,{category_id:i,category_title:l})}clearCategory(){Object.assign(this.board,{category_id:null,category_title:null})}presentPopoverCategory(i){var l=this;return(0,m.Z)(function*(){const g=yield l.popoverController.create({component:C.l,componentProps:{selectedId:l.board.category_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(v=>{var M,A;"confirm"==v.role&&Object.assign(l.board,{category_id:null===(M=v.data)||void 0===M?void 0:M.category_id,category_title:null===(A=v.data)||void 0===A?void 0:A.category_title})}),g.present()})()}changeBoardTitle(i){var l;this.board.board_title=null==i||null===(l=i.target)||void 0===l?void 0:l.value}changeBoardDescription(i){this.board.board_description=i}changeBoardContent(i){this.board.board_content=i}coverLoad(i,l){let g=[null!=l&&l.cover?this.readfileuploadurl+(null==l?void 0:l.cover):void 0,this.coverUrl+(null==l?void 0:l.board_id)+"/cover.svg",this.coverv1Url+(null==l?void 0:l.board_id)+"/cover.png"].filter(M=>!!M),v=M=>{if(!M)return;let A=new Image;A.onload=()=>{console.log(`onload -> ${A.src}`),i.target.setAttribute("src",M)},A.onerror=()=>{console.log(`onerror -> ${A.src}`),v(g.shift())},A.src=M};v(g.shift())}selectItem(i){this.selectedId=i}}return(n=a).\u0275fac=function(i){return new(i||n)(o.Y36(O.IN),o.Y36(O.yF),o.Y36(O.Dh))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-modal-board-add"]],inputs:{currentId:"currentId",openFrom:"openFrom",board:"board"},decls:32,vars:4,consts:[["slot","end","mode","ios","color","tertiary",3,"disabled","click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","flex-column","flex-lg-row"],[1,"col-auto","col-lg-4","p-3","border-right"],[1,"ml-1","text-danger"],[3,"ngTemplateOutlet"],[1,"col","col-lg-8","p-3","flex-grow-1"],[1,"d-flex","h-100","flex-column"],[1,"flex-grow-1"],["tempForm",""],["tempTemplate",""],[1,"form-group","mb-4"],["label","T\xean b\xe0i gi\u1ea3ng *","label-placement","floating","placeholder","T\xean b\xe0i gi\u1ea3ng",3,"ngModel","change"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc","readonly","",1,"form-control",3,"value"],["name","close-outline"],[1,"py-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board",3,"click"],[1,"item-add"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-loading"],[1,"h-100",3,"animated"],[3,"ionInfinite"]],template:function(i,l){if(1&i&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"T\u1ea1o b\xe0i gi\u1ea3ng"),o.qZA(),o.TgZ(4,"ion-button",0),o.NdJ("click",function(){return l.save()}),o.TgZ(5,"ion-label"),o._uU(6,"T\u1ea1o m\u1edbi"),o.qZA()(),o.TgZ(7,"ion-buttons",1)(8,"ion-button",2),o.NdJ("click",function(){return l.toggleFullScreen()}),o._UZ(9,"ion-icon",3),o.qZA(),o.TgZ(10,"ion-button",4),o.NdJ("click",function(){return l.close()}),o._UZ(11,"ion-icon",5),o.qZA()()()(),o.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div")(16,"label"),o._uU(17,"Th\xf4ng tin b\xe0i gi\u1ea3ng: "),o.TgZ(18,"span",8),o._uU(19,"*"),o.qZA()()(),o.GkF(20,9),o.qZA(),o.TgZ(21,"div",10)(22,"div",11)(23,"div")(24,"label"),o._uU(25,"Ch\u1ecdn m\u1eabu:"),o.qZA()(),o.TgZ(26,"div",12),o.GkF(27,9),o.qZA()()()()(),o.YNc(28,E,17,5,"ng-template",null,13,o.W1O),o.YNc(30,s,15,5,"ng-template",null,14,o.W1O)),2&i){const g=o.MAs(29),v=o.MAs(31);o.xp6(4),o.Q6J("disabled",l.isloading),o.xp6(5),o.Q6J("src",l.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),o.xp6(11),o.Q6J("ngTemplateOutlet",g),o.xp6(7),o.Q6J("ngTemplateOutlet",v)}},dependencies:[D.sg,D.O5,D.tP,k.JJ,k.On,O.YG,O.Sm,O.W2,O.Gu,O.gu,O.Xz,O.ju,O.MB,O.pK,O.Ie,O.Q$,O.CK,O.wd,O.sr,O.j9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:36px;font-size:14px;outline:none;box-shadow:none;border-color:#eee;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}"]}),a})()},5744:(I,x,p)=>{p.d(x,{E:()=>B});var m=p(5861),T=p(4459),y=p(7090),t=p(8530),c=p(3377),_=p(8186),C=p(5938),f=p(9403),h=p(3589),e=p(9468),b=p(3536),o=p(6814),O=p(95);function D(E,Z){if(1&E){const P=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(s){e.CHM(P);const d=e.oxw();return e.KtG(d.clearTopic(s))}),e._UZ(1,"ion-icon",31),e.qZA()}}function k(E,Z){if(1&E){const P=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(s){e.CHM(P);const d=e.oxw();return e.KtG(d.clearCategory(s))}),e._UZ(1,"ion-icon",31),e.qZA()}}function U(E,Z){if(1&E){const P=e.EpF();e.TgZ(0,"ion-img",32),e.NdJ("ionImgDidLoad",function(s){e.CHM(P);const d=e.oxw();return e.KtG(d.coverLoad(s,d.board))}),e.qZA()}if(2&E){const P=e.oxw();e.Q6J("alt",P.board.board_title)}}let B=(()=>{var E;class Z{constructor(u,s,d,n){this.modalController=u,this.popoverController=s,this.toastController=d,this.loadingController=n,this.b=0,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var u=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,m.Z)(function*(){var s,d,n,a;u.appsettings=yield(0,T.H0)(),u.appsettings.madonvi&&(u.user=yield(0,c.iA)(),u.readfileuploadurl=u.appsettings.readfileuploadurl||"",u.coverUrl=`${null!==(s=u.appsettings.readfileuploadurl)&&void 0!==s?s:""}${null!==(d=u.appsettings.boardpath)&&void 0!==d?d:""}`,u.coverv1Url=`${null!==(n=u.appsettings.readfileuploadurl)&&void 0!==n?n:""}${null!==(a=u.appsettings.boardpathv1)&&void 0!==a?a:""}`,u.refreshData())})()}refreshData(){var u;(0,y.T6)({params:{userid:null===(u=this.user)||void 0===u?void 0:u.userid,board_id:this.b},callback:s=>{(null==s?void 0:s.board_id)!=this.b?this.modalController.dismiss():this.board=s}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var u=this;return(0,m.Z)(function*(){if(!u.board.board_title)return void(0,_.B)(u.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(n=>{n.present()});let s=[];u.boardCover&&s.push(new Promise((n,a)=>{var r;(0,h.z)({params:{file:u.boardCover,subFolder:`board-cover/${null!==(r=u.board.board_id)&&void 0!==r?r:0}`,fileType:"image"},callback:i=>{var l;0==(null==i?void 0:i.ReturnCode)&&(u.board.cover=i.path+"/"+(null===(l=i.file)||void 0===l?void 0:l.name)),n(!0)}})}));const d=yield u.loadingController.create({message:"\u0110ang t\u1ea3i..."});d.present(),Promise.all(s).then(n=>{var a;(0,t.Ux)({params:Object.assign({},u.board,{userid:null===(a=u.user)||void 0===a?void 0:a.userid}),callback:r=>{(0,_.B)(u.toastController,{},r).then(i=>{i.present()}),0==(null==r?void 0:r.returncode)&&u.modalController.dismiss(null==r?void 0:r.id,"confirm")},loading:r=>{r||d.dismiss()}})})})()}presentPopoverTopic(u){var s=this;return(0,m.Z)(function*(){const d=yield s.popoverController.create({component:C.a,componentProps:{selectedId:s.board.topic_id,filterFor:"board"},event:u,dismissOnSelect:!1,animated:!1,side:"right"});d.onDidDismiss().then(n=>{var a,r;"confirm"==n.role&&Object.assign(s.board,{topic_id:null===(a=n.data)||void 0===a?void 0:a.topic_id,topic_title:null===(r=n.data)||void 0===r?void 0:r.topic_title})}),d.present()})()}clearTopic(u){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(u){this.board.topic_id=u}presentPopoverCategory(u){var s=this;return(0,m.Z)(function*(){const d=yield s.popoverController.create({component:f.l,componentProps:{selectedId:s.board.category_id,filterFor:"board"},event:u,dismissOnSelect:!1,animated:!1,side:"right"});d.onDidDismiss().then(n=>{var a,r;"confirm"==n.role&&Object.assign(s.board,{category_id:null===(a=n.data)||void 0===a?void 0:a.category_id,category_title:null===(r=n.data)||void 0===r?void 0:r.category_title})}),d.present()})()}clearCategory(u){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(u){this.board.category_id=u}changeBoardTitle(u){var s;this.board.board_title=null==u||null===(s=u.target)||void 0===s?void 0:s.value}changeBoardDescription(u){var s;this.board.board_description=null==u||null===(s=u.target)||void 0===s?void 0:s.value}changeBoardContent(u){var s;this.board.board_content=null==u||null===(s=u.target)||void 0===s?void 0:s.value}changeBoardCover(u){this.boardCover=void 0,u.target.files.length&&(this.boardCover=u.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(u,s){let d=[null!=s&&s.cover?this.readfileuploadurl+(null==s?void 0:s.cover):void 0,this.coverUrl+(null==s?void 0:s.board_id)+"/cover.svg",this.coverv1Url+(null==s?void 0:s.board_id)+"/cover.png"].filter(a=>!!a),n=a=>{if(!a)return;let r=new Image;r.onload=()=>{console.log(`onload -> ${r.src}`),u.target.setAttribute("src",a)},r.onerror=()=>{console.log(`onerror -> ${r.src}`),n(d.shift())},r.src=a};n(d.shift())}errorBoardCover(u,s){let d=u.target,n=[s.cover?this.readfileuploadurl+s.cover:void 0,s.board_id?this.coverUrl+s.board_id+"/cover.svg":void 0,s.board_id?this.coverv1Url+s.board_id+"/cover.png":void 0,"assets/image-png/board-default.jpg"].filter(r=>!!r),a=r=>{if(!r)return;let i=new Image;i.onload=()=>{null==d||d.setAttribute("src",r)},i.onerror=()=>{a(n.shift())},i.src=r};a(n.shift())}}return(E=Z).\u0275fac=function(u){return new(u||E)(e.Y36(b.IN),e.Y36(b.Dh),e.Y36(b.yF),e.Y36(b.HT))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-modal-board-update"]],inputs:{b:"b"},decls:68,vars:9,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","h-100","py-3"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","7",1,"form-control",3,"ngModel","change"],[1,"col-lg-6","col-cover"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad",4,"ngIf"],[1,"flex-grow-1"],[1,"input-group","h-100"],["rows","12",1,"form-control",3,"ngModel","change"],["name","close-outline"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"]],template:function(u,s){if(1&u&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"C\u1eadp nh\u1eadt th\xf4ng tin b\xe0i gi\u1ea3ng"),e.qZA(),e.TgZ(4,"ion-button",0),e.NdJ("click",function(){return s.save()}),e.TgZ(5,"ion-label"),e._uU(6,"C\u1eadp nh\u1eadt"),e.qZA()(),e.TgZ(7,"ion-buttons",1)(8,"ion-button",2),e.NdJ("click",function(){return s.toggleFullScreen()}),e._UZ(9,"ion-icon",3),e.qZA(),e.TgZ(10,"ion-button",4),e.NdJ("click",function(){return s.close()}),e._UZ(11,"ion-icon",5),e.qZA()()()(),e.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"label",13),e._uU(21,"C\u1ea5p l\u1edbp"),e.qZA()(),e._UZ(22,"input",14),e.TgZ(23,"div",15),e.YNc(24,D,2,0,"button",16),e.TgZ(25,"button",17),e.NdJ("click",function(n){return s.presentPopoverTopic(n)}),e._UZ(26,"ion-icon",18),e.qZA()()()(),e.TgZ(27,"div",10)(28,"div",11)(29,"div",12)(30,"label",13),e._uU(31,"M\xf4n h\u1ecdc"),e.qZA()(),e._UZ(32,"input",14),e.TgZ(33,"div",15),e.YNc(34,k,2,0,"button",16),e.TgZ(35,"button",17),e.NdJ("click",function(n){return s.presentPopoverCategory(n)}),e._UZ(36,"ion-icon",18),e.qZA()()()(),e.TgZ(37,"div",10)(38,"div",11)(39,"div",12)(40,"label",13),e._uU(41,"T\xean h\u1ecdc li\u1ec7u"),e.qZA()(),e.TgZ(42,"input",19),e.NdJ("change",function(n){return s.changeBoardTitle(n)}),e.qZA()()(),e.TgZ(43,"div",10)(44,"div",11)(45,"div",12)(46,"label",13),e._uU(47,"M\xf4 t\u1ea3"),e.qZA()(),e.TgZ(48,"textarea",20),e.NdJ("change",function(n){return s.changeBoardDescription(n)}),e.qZA()()()(),e.TgZ(49,"div",21)(50,"div",10)(51,"div",11)(52,"div",12)(53,"label",13),e._uU(54,"\u1ea2nh b\xeca"),e.qZA()(),e.TgZ(55,"div",22)(56,"input",23),e.NdJ("change",function(n){return s.changeBoardCover(n)}),e.qZA(),e._UZ(57,"label",24),e.qZA()()(),e.TgZ(58,"div",10)(59,"div",25)(60,"div",26),e.YNc(61,U,1,1,"ion-img",27),e.qZA()()()()(),e.TgZ(62,"div",28)(63,"div",29)(64,"div",12)(65,"label",13),e._uU(66,"N\u1ed9i dung"),e.qZA()(),e.TgZ(67,"textarea",30),e.NdJ("change",function(n){return s.changeBoardContent(n)}),e.qZA()()()()()()),2&u){let d,n;e.xp6(9),e.Q6J("src",s.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.xp6(13),e.Q6J("value",null!==(d=s.board.topic_title)&&void 0!==d?d:""),e.xp6(2),e.Q6J("ngIf",s.board.topic_id),e.xp6(8),e.Q6J("value",null!==(n=s.board.category_title)&&void 0!==n?n:""),e.xp6(2),e.Q6J("ngIf",s.board.category_id),e.xp6(8),e.Q6J("ngModel",s.board.board_title),e.xp6(6),e.Q6J("ngModel",s.board.board_description),e.xp6(13),e.Q6J("ngIf",s.board.board_id),e.xp6(6),e.Q6J("ngModel",s.board.board_content)}},dependencies:[o.O5,O.Fj,O.JJ,O.On,b.YG,b.Sm,b.W2,b.Gu,b.gu,b.Xz,b.Q$,b.wd,b.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),Z})()},7050:(I,x,p)=>{p.d(x,{z:()=>t});var m=p(9468),T=p(3536),y=p(5470);let t=(()=>{var c;class _{constructor(f){this.modalController=f,this.b=0,this.w=1366,this.h=768,this.isfullscreen=!1}ngOnInit(){this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}load(f){this.iframe=f.target}}return(c=_).\u0275fac=function(f){return new(f||c)(m.Y36(T.IN))},c.\u0275cmp=m.Xpm({type:c,selectors:[["app-modal-board-viewer"]],inputs:{b:"b",w:"w",h:"h"},decls:10,vars:5,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"src","load"]],template:function(f,h){1&f&&(m.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),m.NdJ("click",function(){return h.toggleFullScreen()}),m._UZ(4,"ion-icon",2),m.qZA(),m.TgZ(5,"ion-button",3),m.NdJ("click",function(){return h.close()}),m._UZ(6,"ion-icon",4),m.qZA()()()(),m.TgZ(7,"ion-content")(8,"iframe",5),m.NdJ("load",function(b){return h.load(b)}),m.ALo(9,"safe"),m.qZA()()),2&f&&(m.xp6(4),m.Q6J("src",h.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),m.xp6(4),m.Q6J("src",m.xi3(9,2,"viewer?b="+h.b,"resourceUrl"),m.uOi))},dependencies:[T.YG,T.Sm,T.W2,T.Gu,T.gu,T.sr,y.y],styles:["iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),_})()},8526:(I,x,p)=>{p.d(x,{F:()=>Z});var m=p(5861),T=p(4459),y=p(7090),t=p(5938),c=p(9403),_=p(3377),C=p(4531),f=p(5744),h=p(7050),e=p(9468),b=p(4487),o=p(3536),O=p(6814);function D(P,u){if(1&P){const s=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.clearFilterTopic(n))}),e._UZ(1,"ion-icon",32),e.qZA()}}function k(P,u){if(1&P){const s=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.clearFilterCategory(n))}),e._UZ(1,"ion-icon",32),e.qZA()}}function U(P,u){if(1&P){const s=e.EpF();e.ynx(0),e.TgZ(1,"div",33),e.NdJ("click",function(){const a=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.selectItem(a.board_id))})("dblclick",function(){const a=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.openEditor(a.board_id))}),e.TgZ(2,"div",34)(3,"div",35)(4,"div",22)(5,"div",23)(6,"ion-img",36),e.NdJ("ionImgDidLoad",function(n){const r=e.CHM(s).$implicit,i=e.oxw();return e.KtG(i.coverLoad(n,r))}),e.qZA()()()(),e.TgZ(7,"div",37)(8,"div",38)(9,"button",39),e.NdJ("click",function(){const a=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.openViewer(a.board_id))}),e._UZ(10,"ion-icon",40),e.qZA(),e.TgZ(11,"button",39),e.NdJ("click",function(){const a=e.CHM(s).$implicit,r=e.oxw();return e.KtG(r.openEditor(a.board_id))}),e._UZ(12,"ion-icon",41),e.qZA()()()(),e.TgZ(13,"div",42),e._uU(14),e.qZA()(),e.BQk()}if(2&P){const s=u.$implicit,d=e.oxw();e.xp6(1),e.Tol(s.board_id==d.selectedId?"selected":s.board_id==d.currentId?"actived":""),e.xp6(5),e.Q6J("alt",s.board_title),e.xp6(7),e.Q6J("title",s.board_title),e.xp6(1),e.Oqu(s.board_title)}}function B(P,u){1&P&&(e.ynx(0),e.TgZ(1,"div",20)(2,"div",43)(3,"div",22)(4,"div",23),e._UZ(5,"ion-skeleton-text",44),e.qZA()()(),e.TgZ(6,"div",28),e._UZ(7,"ion-skeleton-text",45),e.qZA()(),e.BQk()),2&P&&(e.xp6(5),e.Q6J("animated",!0),e.xp6(2),e.Q6J("animated",!0))}function E(P,u){if(1&P){const s=e.EpF();e.TgZ(0,"ion-infinite-scroll",46),e.NdJ("ionInfinite",function(n){e.CHM(s);const a=e.oxw();return e.KtG(a.onIonInfinite(n))}),e._UZ(1,"ion-infinite-scroll-content"),e.qZA()}}let Z=(()=>{var P;class u{constructor(d,n,a,r){this.router=d,this.activatedRoute=n,this.modalController=a,this.popoverController=r,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.paging={sortfield:null,sorttype:null,page:1,limit:50,loading:!1,active:!0},this.filter={},this.boards=[]}ngOnInit(){var d=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,m.Z)(function*(){var n,a,r,i,l;d.appsettings=yield(0,T.H0)(),d.appsettings.madonvi&&(d.user=yield(0,_.iA)(),d.readfileuploadurl=null!==(n=d.appsettings.readfileuploadurl)&&void 0!==n?n:"",d.coverUrl=`${null!==(a=d.appsettings.readfileuploadurl)&&void 0!==a?a:""}${null!==(r=d.appsettings.boardpath)&&void 0!==r?r:""}`,d.coverv1Url=`${null!==(i=d.appsettings.readfileuploadurl)&&void 0!==i?i:""}${null!==(l=d.appsettings.boardpathv1)&&void 0!==l?l:""}`,d.refreshData())})()}ngAfterViewInit(){}selectItem(d){this.currentId!=d&&(this.selectedId=d)}openViewer(d){var n=this;return(0,m.Z)(function*(){d&&(yield n.modalController.create({component:h.z,componentProps:{b:d},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0})).present()})()}openEditor(d){d&&this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{b:d,n:null},queryParamsHandling:"merge",replaceUrl:!0}).finally(()=>{window.location.reload()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){return this.modalController.dismiss(this.boards.find(d=>d.board_id==this.selectedId),"confirm")}coverLoad(d,n){let a=[null!=n&&n.cover?this.readfileuploadurl+(null==n?void 0:n.cover):void 0,this.coverUrl+(null==n?void 0:n.board_id)+"/cover.svg",this.coverv1Url+(null==n?void 0:n.board_id)+"/cover.png"].filter(i=>!!i),r=i=>{if(!i)return;let l=new Image;l.onload=()=>{console.log(`onload -> ${l.src}`),d.target.setAttribute("src",i)},l.onerror=()=>{console.log(`onerror -> ${l.src}`),r(a.shift())},l.src=i};r(a.shift())}onIonInfinite(d){this.loadMore(()=>{d.target.complete()})}loadData_Paging(d){var n;this.paging.loading=!0,(0,y.GW)({params:{userid:null===(n=this.user)||void 0===n?void 0:n.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:a=>{this.boards=this.boards.concat(a||[]),this.paging.loading=!1,(!(null!=a&&a.length)||(null==a?void 0:a.length)<this.paging.limit)&&(this.paging.active=!1),d&&d()}})}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadMore(d){this.paging.page+=1,this.loadData_Paging(d)}searchChange(d){this.filter.search=d.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}sortChange(d,n){this.paging.sortfield=d||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}presentModalBoardAdd(d){var n=this;return(0,m.Z)(function*(){n.modalController.dismiss(null,"close2open-modal-add"),(yield n.modalController.create({component:C.e,componentProps:{currentId:n.currentId,openFrom:"modal-board"},mode:"md",cssClass:"ion-modal-xl",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardUpdate(d){var n=this;return(0,m.Z)(function*(){const a=yield n.modalController.create({component:f.E,mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});a.onDidDismiss().then(r=>{"confirm"==r.role&&r.data&&n.refreshData()}),a.present()})()}clearFilterTopic(d){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}presentPopoverTopic(d){var n=this;return(0,m.Z)(function*(){const a=yield n.popoverController.create({component:t.a,componentProps:{selectedId:n.filter.topic_id,filterFor:"board"},event:d,dismissOnSelect:!1,animated:!1});a.onDidDismiss().then(r=>{var i,l;"confirm"==r.role&&(Object.assign(n.filter,{topic_id:null===(i=r.data)||void 0===i?void 0:i.topic_id,topic_title:null===(l=r.data)||void 0===l?void 0:l.topic_title}),n.filterChange())}),a.present()})()}clearFilterCategory(d){Object.assign(this.filter,{category_id:null,category_title:null}),this.filterChange()}presentPopoverCategory(d){var n=this;return(0,m.Z)(function*(){const a=yield n.popoverController.create({component:c.l,componentProps:{selectedId:n.filter.category_id,filterFor:"board"},event:d,dismissOnSelect:!1,animated:!1});a.onDidDismiss().then(r=>{var i,l;"confirm"==r.role&&(Object.assign(n.filter,{category_id:null===(i=r.data)||void 0===i?void 0:i.category_id,category_title:null===(l=r.data)||void 0===l?void 0:l.category_title}),n.filterChange())}),a.present()})()}}return(P=u).\u0275fac=function(d){return new(d||P)(e.Y36(b.F0),e.Y36(b.gz),e.Y36(o.IN),e.Y36(o.Dh))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-modal-board"]],inputs:{currentId:"currentId",selectedId:"selectedId"},decls:49,vars:9,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"px-3"],[1,"row"],[1,"col-12","col-lg-4","my-3"],[1,"searchbox"],["mode","ios","inputmode","search","placeholder","T\xecm ki\u1ebfm ...","search-icon","","show-clear-button","never","show-cancel-button","never",3,"debounce","ionInput"],[1,"col-6","col-lg-4","my-3"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc",1,"form-control",3,"value"],[1,"py-3","p-lg-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-add",3,"click"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"text-center"],[1,"icon-add"],["src","../../../../assets/icon/16x16/add.svg"],[1,"item-name","line-clamp-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["name","close-outline"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click","dblclick"],[1,"position-relative"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"position-absolute","top-0","bottom-0","left-0","right-0","item-action"],[1,"position-absolute","bottom-0","right-0"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/view.svg"],["src","../../../../assets/icon/16x16/edit.svg"],[1,"item-name","line-clamp-2",3,"title"],[1,"item-loading"],[1,"h-100",3,"animated"],[2,"width","75%",3,"animated"],[3,"ionInfinite"]],template:function(d,n){if(1&d&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\xe0i gi\u1ea3ng c\u1ee7a t\xf4i"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return n.toggleFullScreen()}),e._UZ(6,"ion-icon",2),e.qZA(),e.TgZ(7,"ion-button",3),e.NdJ("click",function(){return n.close()}),e._UZ(8,"ion-icon",4),e.qZA()()(),e.TgZ(9,"ion-toolbar")(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"ion-searchbar",9),e.NdJ("ionInput",function(r){return n.searchChange(r)}),e.qZA()()(),e.TgZ(15,"div",10)(16,"div",11),e._UZ(17,"input",12),e.TgZ(18,"div",13),e.YNc(19,D,2,0,"button",14),e.TgZ(20,"button",15),e.NdJ("click",function(r){return n.presentPopoverTopic(r)}),e._UZ(21,"ion-icon",16),e.qZA()()()(),e.TgZ(22,"div",10)(23,"div",11),e._UZ(24,"input",17),e.TgZ(25,"div",13),e.YNc(26,k,2,0,"button",14),e.TgZ(27,"button",15),e.NdJ("click",function(r){return n.presentPopoverCategory(r)}),e._UZ(28,"ion-icon",16),e.qZA()()()()()()()(),e.TgZ(29,"ion-content")(30,"div",18)(31,"div",19)(32,"div",20)(33,"div")(34,"div",21),e.NdJ("click",function(r){return n.presentModalBoardAdd(r)}),e.TgZ(35,"div",22)(36,"div",23)(37,"div",24)(38,"div")(39,"div",25)(40,"div",26),e._UZ(41,"ion-icon",27),e.qZA()(),e.TgZ(42,"div"),e._uU(43,"T\u1ea1o b\xe0i gi\u1ea3ng"),e.qZA()()()()()(),e.TgZ(44,"div",28),e._uU(45,"\xa0"),e.qZA()()(),e.YNc(46,U,15,5,"ng-container",29),e.YNc(47,B,8,2,"ng-container",30),e.qZA()(),e.YNc(48,E,2,0,"ion-infinite-scroll",31),e.qZA()),2&d){let a,r;e.xp6(6),e.Q6J("src",n.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.xp6(8),e.Q6J("debounce",1e3),e.xp6(3),e.Q6J("value",null!==(a=n.filter.topic_title)&&void 0!==a?a:""),e.xp6(2),e.Q6J("ngIf",n.filter.topic_id),e.xp6(5),e.Q6J("value",null!==(r=n.filter.category_title)&&void 0!==r?r:""),e.xp6(2),e.Q6J("ngIf",n.filter.category_id),e.xp6(20),e.Q6J("ngForOf",n.boards),e.xp6(1),e.Q6J("ngIf",n.paging.loading),e.xp6(1),e.Q6J("ngIf",n.paging.active)}},dependencies:[O.sg,O.O5,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Xz,o.ju,o.MB,o.VI,o.CK,o.wd,o.sr,o.j9],styles:[".item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #8F9BB3;background:#FFF}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{height:40px;padding:0;--color: #333;--background: transparent;--box-shadow: none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-size:14px;outline:none;box-shadow:none;border-color:#8f9bb3;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-primary-shade, #000)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium, #999)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}"]}),u})()},9403:(I,x,p)=>{p.d(x,{l:()=>d});var m=p(5861),T=p(1461),y=p(3377),t=p(9468),c=p(3536),_=p(6814);function C(n,a){1&n&&t.GkF(0)}function f(n,a){1&n&&(t.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),t._UZ(3,"ion-spinner",8),t.qZA()()())}function h(n,a){1&n&&t.GkF(0)}function e(n,a){if(1&n&&t.YNc(0,h,1,0,"ng-container",0),2&n){const r=t.oxw(),i=t.MAs(6),l=t.MAs(8);t.Q6J("ngIf",!(null!=r.categorys&&r.categorys.length))("ngIfThen",i)("ngIfElse",l)}}function b(n,a){1&n&&(t.TgZ(0,"div",9)(1,"small",10),t._uU(2,"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u!"),t.qZA()())}const o=function(n){return{$implicit:n}};function O(n,a){if(1&n&&t.GkF(0,13),2&n){const r=a.$implicit;t.oxw(2);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,o,r))}}function D(n,a){if(1&n&&(t.TgZ(0,"div",11)(1,"ul"),t.YNc(2,O,1,4,"ng-container",12),t.qZA()()),2&n){const r=t.oxw();t.xp6(2),t.Q6J("ngForOf",r.filterCategory(r.categorys))}}function k(n,a){1&n&&t._UZ(0,"ion-icon",21)}function U(n,a){1&n&&t._UZ(0,"ion-icon",22)}function B(n,a){1&n&&t._UZ(0,"ion-spinner",23)}function E(n,a){if(1&n&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.total_board)}}function Z(n,a){if(1&n&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.total_media)}}function P(n,a){if(1&n&&t.GkF(0,13),2&n){const r=a.$implicit;t.oxw(3);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,o,r))}}function u(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,P,1,4,"ng-container",12),t.qZA(),t.BQk()),2&n){const r=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.filterCategory(i.categorys,r.category_id))}}function s(n,a){if(1&n){const r=t.EpF();t.TgZ(0,"li")(1,"ion-item",14),t.NdJ("click",function(){const g=t.CHM(r).$implicit,v=t.oxw();return t.KtG(v.filterChange(g.category_id))}),t.TgZ(2,"ion-button",15),t.NdJ("click",function(l){const v=t.CHM(r).$implicit,M=t.oxw();return t.KtG(M.expandCategory(l,v.category_id,v.isexpanded))}),t.YNc(3,k,1,0,"ion-icon",16),t.YNc(4,U,1,0,"ion-icon",17),t.YNc(5,B,1,0,"ion-spinner",18),t.qZA(),t.TgZ(6,"ion-label"),t._uU(7),t.qZA(),t.YNc(8,E,2,1,"ion-badge",19),t.YNc(9,Z,2,1,"ion-badge",19),t.qZA(),t.YNc(10,u,3,1,"ng-container",20),t.qZA()}if(2&n){const r=a.$implicit,i=t.oxw();t.xp6(1),t.uIk("color",r.category_id==i.selectedId?"primary":""),t.xp6(1),t.uIk("style",r.ishaschild?"visibility:unset":"visibility:hidden",t.Ckj),t.xp6(1),t.Q6J("ngIf",!r.isexpanded),t.xp6(1),t.Q6J("ngIf",r.isexpanded&&!1===r.loading),t.xp6(1),t.Q6J("ngIf",r.isexpanded&&!1!==r.loading),t.xp6(2),t.Oqu(r.category_title),t.xp6(1),t.Q6J("ngIf","board"==i.filterFor&&r.total_board),t.xp6(1),t.Q6J("ngIf","media"==i.filterFor&&r.total_media),t.xp6(1),t.Q6J("ngIf",r.isexpanded)}}let d=(()=>{var n;class a{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.categorys=[]}ngOnInit(){var i=this;(0,m.Z)(function*(){i.user=yield(0,y.iA)(),i.loadCategory()})()}loadCategory(i){var l;(0,T.b)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,category_pid:null==i?void 0:i.category_id,active:!0,page:1,limit:-1},callback:g=>{this.categorys=this.categorys.concat(g||[])}})}filterCategory(i,l){return i.filter(l?g=>g.category_pid==l:g=>null==g.category_pid||0==g.category_pid)}expandCategory(i,l,g){i.preventDefault(),i.stopPropagation(),this.categorys.filter(v=>v.category_id==l).forEach(v=>{v.isexpanded=!g,v.isloadedchild||(v.isloadedchild=!0,this.loadCategory(v))})}filterChange(i){this.popoverController.dismiss(this.categorys.find(l=>l.category_id==i),"confirm")}}return(n=a).\u0275fac=function(i){return new(i||n)(t.Y36(c.Dh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-popover-category"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-category","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,l){if(1&i&&(t.YNc(0,C,1,0,"ng-container",0),t.YNc(1,f,4,0,"ng-template",null,1,t.W1O),t.YNc(3,e,1,3,"ng-template",null,2,t.W1O),t.YNc(5,b,3,0,"ng-template",null,3,t.W1O),t.YNc(7,D,3,1,"ng-template",null,4,t.W1O),t.YNc(9,s,11,9,"ng-template",null,5,t.W1O)),2&i){const g=t.MAs(2),v=t.MAs(4);t.Q6J("ngIf",!(null!=l.categorys&&l.categorys.length)&&!1!==l.response.loading)("ngIfThen",g)("ngIfElse",v)}},dependencies:[_.sg,_.O5,_.tP,c.yp,c.YG,c.W2,c.gu,c.Ie,c.Q$,c.PQ],styles:[".menu-category[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),a})()},5938:(I,x,p)=>{p.d(x,{a:()=>d});var m=p(5861),T=p(4041),y=p(3377),t=p(9468),c=p(3536),_=p(6814);function C(n,a){1&n&&t.GkF(0)}function f(n,a){1&n&&(t.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),t._UZ(3,"ion-spinner",8),t.qZA()()())}function h(n,a){1&n&&t.GkF(0)}function e(n,a){if(1&n&&t.YNc(0,h,1,0,"ng-container",0),2&n){const r=t.oxw(),i=t.MAs(6),l=t.MAs(8);t.Q6J("ngIf",!(null!=r.topics&&r.topics.length))("ngIfThen",i)("ngIfElse",l)}}function b(n,a){1&n&&(t.TgZ(0,"div",9)(1,"small",10),t._uU(2,"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u!"),t.qZA()())}const o=function(n){return{$implicit:n}};function O(n,a){if(1&n&&t.GkF(0,13),2&n){const r=a.$implicit;t.oxw(2);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,o,r))}}function D(n,a){if(1&n&&(t.TgZ(0,"div",11)(1,"ul"),t.YNc(2,O,1,4,"ng-container",12),t.qZA()()),2&n){const r=t.oxw();t.xp6(2),t.Q6J("ngForOf",r.filterTopic(r.topics))}}function k(n,a){1&n&&t._UZ(0,"ion-icon",21)}function U(n,a){1&n&&t._UZ(0,"ion-icon",22)}function B(n,a){1&n&&t._UZ(0,"ion-spinner",23)}function E(n,a){if(1&n&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.total_board)}}function Z(n,a){if(1&n&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.total_media)}}function P(n,a){if(1&n&&t.GkF(0,13),2&n){const r=a.$implicit;t.oxw(3);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,o,r))}}function u(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,P,1,4,"ng-container",12),t.qZA(),t.BQk()),2&n){const r=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.filterTopic(i.topics,r.topic_id))}}function s(n,a){if(1&n){const r=t.EpF();t.TgZ(0,"li")(1,"ion-item",14),t.NdJ("click",function(){const g=t.CHM(r).$implicit,v=t.oxw();return t.KtG(v.filterChange(g.topic_id))}),t.TgZ(2,"ion-button",15),t.NdJ("click",function(l){const v=t.CHM(r).$implicit,M=t.oxw();return t.KtG(M.expandTopic(l,v.topic_id,v.isexpanded))}),t.YNc(3,k,1,0,"ion-icon",16),t.YNc(4,U,1,0,"ion-icon",17),t.YNc(5,B,1,0,"ion-spinner",18),t.qZA(),t.TgZ(6,"ion-label"),t._uU(7),t.qZA(),t.YNc(8,E,2,1,"ion-badge",19),t.YNc(9,Z,2,1,"ion-badge",19),t.qZA(),t.YNc(10,u,3,1,"ng-container",20),t.qZA()}if(2&n){const r=a.$implicit,i=t.oxw();t.xp6(1),t.uIk("color",r.topic_id==i.selectedId?"primary":""),t.xp6(1),t.uIk("style",r.ishaschild?"visibility:unset":"visibility:hidden",t.Ckj),t.xp6(1),t.Q6J("ngIf",!r.isexpanded),t.xp6(1),t.Q6J("ngIf",r.isexpanded&&!1===r.loading),t.xp6(1),t.Q6J("ngIf",r.isexpanded&&!1!==r.loading),t.xp6(2),t.Oqu(r.topic_title),t.xp6(1),t.Q6J("ngIf","board"==i.filterFor&&r.total_board),t.xp6(1),t.Q6J("ngIf","media"==i.filterFor&&r.total_media),t.xp6(1),t.Q6J("ngIf",r.isexpanded)}}let d=(()=>{var n;class a{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.topics=[]}ngOnInit(){var i=this;(0,m.Z)(function*(){i.user=yield(0,y.iA)(),i.loadTopic()})()}loadTopic(i){var l;(0,T.w)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,topic_pid:null==i?void 0:i.topic_id,active:!0,page:1,limit:-1},callback:g=>{this.topics=this.topics.concat(g||[])}})}filterTopic(i,l){return i.filter(l?g=>g.topic_pid==l:g=>null==g.topic_pid||0==g.topic_pid)}expandTopic(i,l,g){i.preventDefault(),i.stopPropagation(),this.topics.filter(v=>v.topic_id==l).forEach(v=>{v.isexpanded=!g,v.isloadedchild||(v.isloadedchild=!0,this.loadTopic(v))})}filterChange(i){this.popoverController.dismiss(this.topics.find(l=>l.topic_id==i),"confirm")}}return(n=a).\u0275fac=function(i){return new(i||n)(t.Y36(c.Dh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-popover-topic"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-topic","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,l){if(1&i&&(t.YNc(0,C,1,0,"ng-container",0),t.YNc(1,f,4,0,"ng-template",null,1,t.W1O),t.YNc(3,e,1,3,"ng-template",null,2,t.W1O),t.YNc(5,b,3,0,"ng-template",null,3,t.W1O),t.YNc(7,D,3,1,"ng-template",null,4,t.W1O),t.YNc(9,s,11,9,"ng-template",null,5,t.W1O)),2&i){const g=t.MAs(2),v=t.MAs(4);t.Q6J("ngIf",!(null!=l.topics&&l.topics.length)&&!1!==l.response.loading)("ngIfThen",g)("ngIfElse",v)}},dependencies:[_.sg,_.O5,_.tP,c.yp,c.YG,c.W2,c.gu,c.Ie,c.Q$,c.PQ],styles:[".menu-topic[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),a})()},9018:(I,x,p)=>{p.d(x,{Be:()=>_,C0:()=>t,W6:()=>C,gk:()=>c,iD:()=>y});var m=p(5861),T=p(8526);const y=function(){var f=(0,m.Z)(function*(h,e){const b=yield h.create({component:T.F,componentProps:{currentId:null==e?void 0:e.board_id},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});b.onDidDismiss().then(o=>{if("confirm"==o.role&&o.data){let D=o.data;var O;D.board_id&&window.open(`editor?b=${D.board_id}#${null===(O=D.board_title)||void 0===O?void 0:O.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),b.present()});return function(e,b){return f.apply(this,arguments)}}(),t=(f,h)=>{const e=h.shadowRoot,b=f.create().addElement(null==e?void 0:e.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),o=f.create().addElement(null==e?void 0:e.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(-100%)"},{offset:1,transform:"translateX(0%)"}]);return f.create().addElement(h).easing("ease-out").duration(300).addAnimation([b,o])},c=(f,h)=>t(f,h).direction("reverse"),_=(f,h)=>{const e=h.shadowRoot,b=f.create().addElement(null==e?void 0:e.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),o=f.create().addElement(null==e?void 0:e.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(100%)"},{offset:1,transform:"translateX(0%)"}]);return f.create().addElement(h).easing("ease-out").duration(300).addAnimation([b,o])},C=(f,h)=>_(f,h).direction("reverse")},8186:(I,x,p)=>{p.d(x,{B:()=>T});var m=p(5861);const T=function(){var y=(0,m.Z)(function*(t,c,_){var C;_&&(c.message||(c.message=null!==(C=null==_?void 0:_.returnmsg)&&void 0!==C?C:0==(null==_?void 0:_.returncode)?"Th\xe0nh c\xf4ng!":null!=_&&_.returncode?`L\u1ed7i: #${null==_?void 0:_.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),c.icon||(c.icon=0==(null==_?void 0:_.returncode)?"checkmark-circle-sharp":null!=_&&_.returncode?"alert-circle-outline":"close-circle-sharp"),c.color||(c.color=0==(null==_?void 0:_.returncode)?"success":null!=_&&_.returncode?"warning":"danger"));return c.position||(c.position="bottom"),c.icon||(c.icon="bulb-outline"),c.color||(c.color="secondary"),c.duration=3e3,c.animated=!0,c.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield t.create(c)});return function(c,_,C){return y.apply(this,arguments)}}()},5470:(I,x,p)=>{p.d(x,{Z:()=>t,y:()=>y});var m=p(9468),T=p(6593);let y=(()=>{class c{constructor(C){this.sanitizer=C}transform(C,f){switch(f){case"html":return this.sanitizer.bypassSecurityTrustHtml(C);case"style":return this.sanitizer.bypassSecurityTrustStyle(C);case"script":return this.sanitizer.bypassSecurityTrustScript(C);case"url":return this.sanitizer.bypassSecurityTrustUrl(C);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(C);default:throw new Error(`SafePipe unable to bypass security for invalid type: ${f}`)}}}return c.\u0275fac=function(C){return new(C||c)(m.Y36(T.H7,16))},c.\u0275pipe=m.Yjl({name:"safe",type:c,pure:!0}),c})(),t=(()=>{class c{}return c.\u0275fac=function(C){return new(C||c)},c.\u0275mod=m.oAB({type:c}),c.\u0275inj=m.cJS({}),c})()}}]);