"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4981],{1814:(ce,At,f)=>{f.d(At,{In:()=>dt,MA:()=>S,Mo:()=>C,NV:()=>b,S3:()=>W,dt:()=>rt,h8:()=>h,k0:()=>A});const W={fill:"transparent",stroke:"#129bff",strokeWidth:1},b={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},dt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},C={fill:"transparent",stroke:"transparent",strokeWidth:1},rt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},h={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},S={fill:"transparent"},A={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(ce,At,f)=>{f.d(At,{w:()=>lt,I:()=>T});var W=f(4981),b=f(9054),dt=f(5811),C=/^#[a-fA-F0-9]+$/i,rt=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,h=/^rgb\((\d+),(\d+),(\d+)\)$/i;const S=K=>{let J=null,nt=null;if(K)if("transparent"==K)J="#000000",nt=0;else if(K.match(C))J=K;else{let E=(K=K.replace(/\s+/g,"")).match(rt);if(E)J="#"+(256|E[1]).toString(16).slice(1)+(256|E[2]).toString(16).slice(1)+(256|E[3]).toString(16).slice(1),nt=(0,dt.q)(parseFloat(E[4]),100);else{let q=K.match(h);q&&(J="#"+(256|q[1]).toString(16).slice(1)+(256|q[2]).toString(16).slice(1)+(256|q[3]).toString(16).slice(1))}}return{hex:J,alpha:nt}},T=K=>x(null==K?void 0:K.url,null==K?void 0:K.path,null==K?void 0:K.src);var x=(K,J,nt)=>{var E,q;let vt,ft,ct,tt;var P,Wt;return K&&(vt=K.replace(/\\/g,"/")),J&&(ft=J.replace(/\\/g,"/")),nt&&(ct=nt.replace(/\\/g,"/")),ft&&!vt&&(vt=(null===(P=W.icdt.config)||void 0===P?void 0:P.readfileuploadurl)+ft),!ct||ft||vt||(ft=ct.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),vt=(null===(Wt=W.icdt.config)||void 0===Wt?void 0:Wt.readfileuploadurl)+ft),tt=(null!==(E=vt)&&void 0!==E?E:"").split("/").pop()||(null!==(q=ft)&&void 0!==q?q:"").split("/").pop()||"",{url:vt,path:ft,name:tt}};const lt=K=>{let J={x:0,y:0,width:K.screen.w,height:K.screen.h},nt=[];return K.data.forEach((E,q)=>{var vt,ft;let ct={id:"number"==typeof E.id?E.id:W.icdt.data.newSlideId,code:null===(vt=E.id)||void 0===vt?void 0:vt.toString(),name:"string"==typeof E.id?E.id:`Trang ${q+1}`,svg:{viewBox:J,nodes:[]},test:(tt=E.test2,tt?(tt.audiotrue&&(tt.audiotrue=T({path:tt.audiotrue.path})),tt.audiofalse&&(tt.audiofalse=T({path:tt.audiofalse.path})),tt.effecttrue&&(tt.effecttrue=T({path:tt.effecttrue.path})),tt.effectfalse&&(tt.effectfalse=T({path:tt.effectfalse.path})),tt.icontrue&&(tt.icontrue=T({path:tt.icontrue.path})),tt.iconfalse&&(tt.iconfalse=T({path:tt.iconfalse.path})),tt):{})};var tt;E.background&&ct.svg&&(ct.svg.background=function(K){return K&&(null!==K.match(/#([a-zA-Z0-9]+)/)||null!==K.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==K.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(E.background)?{color:E.background}:function(K){return K&&null!==K.match(/data:[^;]+;base64,/)}(E.background)?{base64:E.background}:function(K){return K&&null!==K.match(/http(s)?:\/\//)}(E.background)?x(E.background):x(void 0,E.background)),jQuery(null!==(ft=E.svg)&&void 0!==ft?ft:"").find(".svg-node").each((tt,P)=>{var Wt,Dt;let jt=jQuery(P).parents(".indexs"),le=jt.attr("data-index"),Tt=jt.attr("data-time"),Gt=null!==(Wt=P.getAttribute("id"))&&void 0!==Wt?Wt:"0",ut={id:parseInt(Gt),code:`${P.nodeName}-${P.getAttribute("id")}`,name:P.nodeName,idx:le?parseInt(le):0,time:Tt?parseFloat(Tt):0,type:(()=>{switch(P.nodeName){case"polygon":return b.$.POLYGON;case"circle":return b.$.CIRCLE;case"ellipse":return b.$.ELLIPSE;case"line":return b.$.LINE;case"rect":return b.$.RECT;case"foreignObject":return b.$.FOREIGNOBJECT}return 0})(),size:(Y=>{let Et=0,kt=0,Xt=0,mt=0,ne=null,F=null,L=parseFloat((null===(Y=P.getAttribute("transform"))||void 0===Y?void 0:Y.replace("rotate(","").replace(")",""))||"0")||null;switch(P.nodeName){case"polygon":{var u,V;let pt=[],gt=[],St=999999999,Ft=999999999,Bt=0,Ot=0;ne=JSON.parse(P.getAttribute("ratios")||"[]"),F=null!==(u=null===(V=P.getAttribute("points"))||void 0===V?void 0:V.split(",").map(function(bt){return bt.split(" ").map(function(qt){return parseFloat(qt)})}))&&void 0!==u?u:[],F.forEach(function(bt){pt.push(bt[0]),gt.push(bt[1])}),St=Math.min.apply(null,pt),Ft=Math.min.apply(null,gt),Bt=Math.max.apply(null,pt),Ot=Math.max.apply(null,gt),Et=St,kt=Ft,Xt=Bt-Et,mt=Ot-kt;break}case"circle":{let pt=parseFloat(P.getAttribute("cx")||"0"),gt=parseFloat(P.getAttribute("cy")||"0"),St=parseFloat(P.getAttribute("r")||"0");Et=pt-St,kt=gt-St,Xt=2*St,mt=2*St;break}case"ellipse":{let pt=parseFloat(P.getAttribute("cx")||"0"),gt=parseFloat(P.getAttribute("cy")||"0"),St=parseFloat(P.getAttribute("rx")||"0"),Ft=parseFloat(P.getAttribute("ry")||"0");Et=pt-St,kt=gt-Ft,Xt=2*St,mt=2*Ft;break}case"line":{let pt=parseFloat(P.getAttribute("x1")||"0"),gt=parseFloat(P.getAttribute("y1")||"0"),St=parseFloat(P.getAttribute("x2")||"0"),Ft=parseFloat(P.getAttribute("y2")||"0"),Bt=999999999,Ot=999999999,bt=0,qt=0;Bt=Math.min(pt,St),Ot=Math.min(gt,Ft),bt=Math.max(pt,St),qt=Math.max(gt,Ft),Et=Bt,kt=Ot,Xt=bt-Et,mt=qt-kt,ne=[[(pt-Et)/(Xt||1),(gt-kt)/(mt||1)],[(St-Et)/(Xt||1),(Ft-kt)/(mt||1)]];break}case"rect":case"foreignObject":Et=parseFloat(P.getAttribute("x")||"0"),kt=parseFloat(P.getAttribute("y")||"0"),Xt=parseFloat(P.getAttribute("width")||"0"),mt=parseFloat(P.getAttribute("height")||"0")}return Object.assign({},{x:Et,y:kt,width:Xt,height:mt,ratios:ne,points:F,rotate:L})})(),attribute:(()=>{let Y={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Et,kt,Xt,mt,ne,F;let L=null!==(Et=P.getAttribute("fill"))&&void 0!==Et?Et:null,u=null!==(kt=P.getAttribute("stroke"))&&void 0!==kt?kt:null,V=null!==(Xt=parseFloat(P.getAttribute("stroke-width")||"0"))&&void 0!==Xt?Xt:null,pt=null!==(mt=P.getAttribute("stroke-linecap"))&&void 0!==mt?mt:null,gt=null!==(ne=P.getAttribute("stroke-linejoin"))&&void 0!==ne?ne:null,St=null!==(F=parseFloat(P.getAttribute("stroke-dasharray")||"0"))&&void 0!==F?F:null;Object.assign(Y,{fill:L,stroke:u,strokeWidth:V,strokeLinecap:pt,strokeLinejoin:gt,strokeDasharray:St});break}}return Y})(),style:(()=>{let Y={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ne=jQuery(P).find(".svg-container");if(ne.length){var Et,kt;let L=null!==(Et=parseFloat(ne.css("border-width")||"0"))&&void 0!==Et?Et:null,u=null!==(kt=ne.css("border-style"))&&void 0!==kt?kt:null,V=ne.css("border-color")||null,pt=null,gt=ne.css("background-color")||null,St=null;(()=>{let{hex:Ft,alpha:Bt}=S(V);V=Ft,pt=Bt})(),(()=>{let{hex:Ft,alpha:Bt}=S(gt);gt=Ft,St=Bt})(),Object.assign(Y,{borderWidth:L,borderStyle:u,borderColor:V,borderOpacity:pt,backgroundColor:gt,backgroundOpacity:St})}let F=jQuery(P).find(".svg-editor-content");if(F.length){var Xt,mt;let L=JSON.parse((F.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:u,alpha:V}=S(L.TextColor);Object.assign(Y,{fontFamily:null!==(Xt=L.FontFamily)&&void 0!==Xt?Xt:null,fontSize:null!==(mt=L.FontSize)&&void 0!==mt?mt:null,color:u,opacity:V})}break}}return Y})(),source:(()=>{let Y={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(jt.hasClass("editors")){let Ot=jQuery(P).find(".svg-editor-content");if(Ot.length){var Et;let bt=Ot.html(),qt=null!==(Et=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Et?Et:[];Object.assign(Y,{type:"html",html:{htmlContent:bt,variableKeywords:qt}})}}else if(jt.hasClass("inputs")||jt.hasClass("textareas"))Object.assign(Y,{type:"input",input:{input:!!jQuery(P).find("input").length,textarea:!!jQuery(P).find("textarea").length}});else if(jt.hasClass("tests")){let Ot=jQuery(P).find(".svg-test");if(jt.hasClass("tests-truefalse")){var kt,Xt;let bt=Ot.find(".svg-editor-content").html(),qt=null!==(kt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==kt?kt:[];Object.assign(Y,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(Xt=E.test2.truefalse)||void 0===Xt?void 0:Xt.includes(Gt)}},html:{htmlContent:bt,variableKeywords:qt}})}else if(jt.hasClass("tests-singlechoice")){var mt,ne;let bt=Ot.find(".svg-editor-content").html(),qt=null!==(mt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==mt?mt:[];Object.assign(Y,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(ne=E.test2.singlechoice)||void 0===ne?void 0:ne.includes(Gt)}},html:{htmlContent:bt,variableKeywords:qt}})}else if(jt.hasClass("tests-multichoice")){var F,L;let bt=Ot.find(".svg-editor-content").html(),qt=null!==(F=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==F?F:[];Object.assign(Y,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(L=E.test2.multichoice)||void 0===L?void 0:L.includes(Gt)}},html:{htmlContent:bt,variableKeywords:qt}})}else if(jt.hasClass("tests-fill")){var u,V;let bt=Ot.find(".svg-editor-content").html(),qt=null!==(u=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==u?u:[],Lt=null!==(V=(null!=bt?bt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==V?V:[];Lt=Lt.filter((re,j,d)=>d.indexOf(re)==j),Object.assign(Y,{type:"test",test:{type:"fill",fill:Lt.map(re=>{var j;return{key:re,value:null===(j=E.test2.fill)||void 0===j||null===(j=j.find(d=>d.id==Gt))||void 0===j||null===(j=j.vals)||void 0===j?void 0:j.map(d=>d.text).filter(d=>!["",null,void 0,NaN].includes(d))}})},html:{htmlContent:bt,variableKeywords:qt,fillKeywords:Lt}})}else if(jt.hasClass("tests-matching")){if(Ot.hasClass("svg-test-empty"))Object.assign(Y,{type:"test",test:{type:"matching-empty",matching:{key:Ot.attr("data-name")||null}}});else if(Ot.hasClass("svg-test-content")){var pt;let bt=Ot.find(".svg-editor-content").html(),qt=null!==(pt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==pt?pt:[];Object.assign(Y,{type:"test",test:{type:"matching-content",matching:{key:Ot.attr("data-name")||null}},html:{htmlContent:bt,variableKeywords:qt}})}}else if(jt.hasClass("tests-speech")){var gt;Object.assign(Y,{type:"speech",speech:{value:null===(gt=E.test2.speech)||void 0===gt||null===(gt=gt.find(bt=>bt.id==Gt))||void 0===gt||null===(gt=gt.vals)||void 0===gt?void 0:gt.map(bt=>bt.text).filter(bt=>!["",null,void 0,NaN].includes(bt))}})}else if(jt.hasClass("tests-submit")){let bt=jQuery(P).find(".svg-container img");Object.assign(Y,{type:"test",test:{type:"submit"},image:x(bt.attr("url"),bt.attr("path"),bt.attr("src"))})}}else if(jt.hasClass("images")){let Ot=jQuery(P).find(".svg-editor-content img");if(Ot.length)Object.assign(Y,{type:"image",image:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});else{let bt=jQuery(P).find("iframe");Object.assign(Y,{type:"iframe",iframe:x(bt.attr("url"),bt.attr("path"),bt.attr("src"))})}}else if(jt.hasClass("sounds")){let Ot=jQuery(P).find(".svg-editor-content img");Ot.length&&Object.assign(Y,{type:"image",image:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))})}else if(jt.hasClass("htmls")){let Ot=jQuery(P).find("iframe");Ot.length&&Object.assign(Y,{type:"iframe",iframe:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))})}else if(jt.hasClass("svgs")){let Ot=jQuery(P).find("svg");var St,Ft;Ot.length&&Object.assign(Y,{type:"svg",svg:Object.assign(x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src")),{svgContent:null!==(St=null===(Ft=Ot.get(0))||void 0===Ft?void 0:Ft.outerHTML)&&void 0!==St?St:null})})}else if(jt.hasClass("medias")){let Ot=jQuery(P).find(".media-item");if(Ot.length)switch(Ot.attr("type")){case"audio":Object.assign(Y,{type:"audio",audio:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;case"video":Object.assign(Y,{type:"video",video:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;case"file":Object.assign(Y,{type:"file",file:x(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;default:var Bt;Object.assign(Y,{type:"link",link:{url:null!==(Bt=Ot.attr("url"))&&void 0!==Bt?Bt:null}})}let bt=jQuery(P).find("img");bt.length&&(Object.assign(Y,{image:x(bt.attr("url"),bt.attr("path"),bt.attr("src"))}),Y.type||Object.assign(Y,{type:"image"}))}}return Y})(),animate:(Y=>{let Et={},kt=null===(Y=E.animates)||void 0===Y?void 0:Y.find(Xt=>Xt.elementId==Gt);return kt&&Object.assign(Et,{value:kt.value}),Et})(),interactive:(()=>{let Y={},Et=E.actions.show.filter(Xt=>Xt.elementId==Gt&&Xt.active);Et.length&&(Y.show={},Et.forEach(Xt=>{let{source:mt}=Xt;switch(null==mt?void 0:mt.type){case"work":var ne,F,L,u,V;Y.show.action={},Object.assign(Y.show.action,{value:null!==(ne=mt.value)&&void 0!==ne?ne:null,iteration:null!==(F=mt.iteration)&&void 0!==F?F:null,finish:null!==(L=mt.end)&&void 0!==L?L:null,time:null!==(u=mt.time)&&void 0!==u?u:null,points:null!==(V=mt.points)&&void 0!==V?V:null});break;case"audio":var pt,gt,St;Y.show.audio={},Object.assign(Y.show.audio,{source:x(null,null,mt.url),iteration:null!==(pt=mt.iteration)&&void 0!==pt?pt:null,finish:null!==(gt=mt.end)&&void 0!==gt?gt:null,time:null!==(St=mt.time)&&void 0!==St?St:null,async:-1==mt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Ft,Bt,Ot,bt,qt,Lt,re,j,d,k,Q,H,B,N,Z;mt.options.includes("show")&&(Y.show.triggershow={},Object.assign(Y.show.triggershow,{id:null!==(Ft=parseInt(null!==(Bt=mt.id)&&void 0!==Bt?Bt:"0"))&&void 0!==Ft?Ft:null,ids:null===(Ot=mt.ids)||void 0===Ot?void 0:Ot.map(I=>parseInt(I)),async:null!==(bt=mt.async)&&void 0!==bt?bt:null,time:null!==(qt=mt.time)&&void 0!==qt?qt:null})),mt.options.includes("run")&&(Y.show.triggerrun={},Object.assign(Y.show.triggerrun,{id:null!==(Lt=parseInt(null!==(re=mt.id)&&void 0!==re?re:"0"))&&void 0!==Lt?Lt:null,ids:null===(j=mt.ids)||void 0===j?void 0:j.map(I=>parseInt(I)),async:null!==(d=mt.async)&&void 0!==d?d:null,time:null!==(k=mt.time)&&void 0!==k?k:null})),mt.options.includes("hide")&&(Y.show.triggerhide={},Object.assign(Y.show.triggerhide,{id:null!==(Q=parseInt(null!==(H=mt.id)&&void 0!==H?H:"0"))&&void 0!==Q?Q:null,ids:null===(B=mt.ids)||void 0===B?void 0:B.map(I=>parseInt(I)),async:null!==(N=mt.async)&&void 0!==N?N:null,time:null!==(Z=mt.time)&&void 0!==Z?Z:null}))}}));let kt=E.actions.click.filter(Xt=>Xt.elementId==Gt&&Xt.active);return kt&&(Y.click={},kt.forEach(Xt=>{let{source:mt}=Xt;switch(null==mt?void 0:mt.type){case"work":var ne,F,L,u,V;Y.click.action={},Object.assign(Y.click.action,{value:null!==(ne=mt.value)&&void 0!==ne?ne:null,iteration:null!==(F=mt.iteration)&&void 0!==F?F:null,finish:null!==(L=mt.end)&&void 0!==L?L:null,time:null!==(u=mt.time)&&void 0!==u?u:null,points:null!==(V=mt.points)&&void 0!==V?V:null});break;case"audio":var pt,gt,St;Y.click.audio={},Object.assign(Y.click.audio,{source:x(null,null,mt.url),iteration:null!==(pt=mt.iteration)&&void 0!==pt?pt:null,finish:null!==(gt=mt.end)&&void 0!==gt?gt:null,time:null!==(St=mt.time)&&void 0!==St?St:null,async:-1==mt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Ft,Bt,Ot,bt,qt,Lt,re,j,d,k,Q,H,B,N,Z;mt.options.includes("show")&&(Y.click.triggershow={},Object.assign(Y.click.triggershow,{id:null!==(Ft=parseInt(null!==(Bt=mt.id)&&void 0!==Bt?Bt:"0"))&&void 0!==Ft?Ft:null,ids:null===(Ot=mt.ids)||void 0===Ot?void 0:Ot.map(X=>parseInt(X)),async:null!==(bt=mt.async)&&void 0!==bt?bt:null,time:null!==(qt=mt.time)&&void 0!==qt?qt:null})),mt.options.includes("run")&&(Y.click.triggerrun={},Object.assign(Y.click.triggerrun,{id:null!==(Lt=parseInt(null!==(re=mt.id)&&void 0!==re?re:"0"))&&void 0!==Lt?Lt:null,ids:null===(j=mt.ids)||void 0===j?void 0:j.map(X=>parseInt(X)),async:null!==(d=mt.async)&&void 0!==d?d:null,time:null!==(k=mt.time)&&void 0!==k?k:null})),mt.options.includes("hide")&&(Y.click.triggerhide={},Object.assign(Y.click.triggerhide,{id:null!==(Q=parseInt(null!==(H=mt.id)&&void 0!==H?H:"0"))&&void 0!==Q?Q:null,ids:null===(B=mt.ids)||void 0===B?void 0:B.map(X=>parseInt(X)),async:null!==(N=mt.async)&&void 0!==N?N:null,time:null!==(Z=mt.time)&&void 0!==Z?Z:null}));break;case"slide":var I;Y.click.slide={},Object.assign(Y.click.slide,{id:parseInt(null!==(I=mt.id)&&void 0!==I?I:"0")||mt.num||null,code:mt.id})}})),Y})(),variable:(Y=>{let Et={};var kt;P.getAttribute("data-variable")&&(Et.input={},Object.assign(Et.input,{variable:null!==(kt=P.getAttribute("data-variable"))&&void 0!==kt?kt:null}));let Xt=null===(Y=E.nodes)||void 0===Y||null===(Y=Y.find(u=>u.id==Gt))||void 0===Y?void 0:Y.variable;var mt,ne,F,L;return Xt&&(Et.click={},Object.assign(Et.click,{variable:null!==(mt=Xt.variable)&&void 0!==mt?mt:null,operator:null!==(ne=Xt.operator)&&void 0!==ne?ne:null,valuetype:null!==(F=Xt.valuetype)&&void 0!==F?F:null,value:null!==(L=Xt.value)&&void 0!==L?L:null})),Et})()};null===(Dt=ct.svg)||void 0===Dt||Dt.nodes.push(ut)}),nt.push(ct)}),console.log(nt),{screen:{width:K.screen.w,height:K.screen.h},data:{slides:nt},variable:K.variable}}},644:(ce,At,f)=>{f.d(At,{Dx:()=>h,aY:()=>G,qp:()=>A,qz:()=>rt,sV:()=>S,yR:()=>_});var W=f(5861),b=f(9422);b.config({driver:[b.INDEXEDDB,b.LOCALSTORAGE,b.WEBSQL],name:"_localDataDB",version:1});const C={create:(T=(0,W.Z)(function*(){return b}),function(){return T.apply(this,arguments)}),get:function(){var T=(0,W.Z)(function*(x){return b.getItem(x)});return function(lt){return T.apply(this,arguments)}}(),set:function(){var T=(0,W.Z)(function*(x,lt){return b.setItem(x,lt)});return function(lt,K){return T.apply(this,arguments)}}()},rt=function(){var T=(0,W.Z)(function*(x){yield C.create();var lt=(yield C.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(lt)});return function(lt){return T.apply(this,arguments)}}(),h=function(){var T=(0,W.Z)(function*(x){yield C.create(),x.params=x.params||{};try{yield C.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(lt){"function"==typeof x.callback&&x.callback(null),console.error(lt)}});return function(lt){return T.apply(this,arguments)}}(),S=function(){var T=(0,W.Z)(function*(x){yield C.create();try{var lt=(yield C.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(lt)}catch(K){"function"==typeof x.callback&&x.callback(null),console.error(K)}});return function(lt){return T.apply(this,arguments)}}(),A=function(){var T=(0,W.Z)(function*(x){yield C.create(),x.params=x.params||{};try{yield C.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(lt){"function"==typeof x.callback&&x.callback(null),console.error(lt)}});return function(lt){return T.apply(this,arguments)}}(),G=function(){var T=(0,W.Z)(function*(x){yield C.create();try{var lt=(yield C.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(lt)}catch(K){"function"==typeof x.callback&&x.callback(null),console.error(K)}});return function(lt){return T.apply(this,arguments)}}(),_=function(){var T=(0,W.Z)(function*(x){yield C.create(),x.params=x.params||{};try{yield C.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(lt){"function"==typeof x.callback&&x.callback(null),console.error(lt)}});return function(lt){return T.apply(this,arguments)}}();var T},1687:(ce,At,f)=>{f.d(At,{O:()=>W});const W={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(ce,At,f)=>{f.d(At,{D:()=>W});const W={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(ce,At,f)=>{f.d(At,{_:()=>W});const W={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(ce,At,f)=>{f.d(At,{D:()=>W});const W={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(ce,At,f)=>{f.d(At,{$:()=>W});const W={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(ce,At,f)=>{f.d(At,{icdt:()=>xt});var W=f(968),b=f(4080),dt=f(1687),C=f(9054),rt=f(4318),h=f(6816),S=f(666),A=f(2966);const T=M=>{var i,n,r,a,o;let y=(null===(i=M.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=M.touchEvent)||void 0===n?void 0:n.target),g=(null==y?void 0:y.getAttribute("id"))||"",v=null==y?void 0:y.nodeName,O=(null==y||null===(r=y.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var p,z;if([dt.O.RESIZE_GROUP,dt.O.SELECT_GROUP].includes(O))return null===(p=M.mouseEvent)||void 0===p||p.stopPropagation(),void(null===(z=M.mouseEvent)||void 0===z||z.preventDefault());if(null!==(a=M.mouseEvent)&&void 0!==a&&a.altKey||null!==(o=M.touchEvent)&&void 0!==o&&o.altKey||!g||g.match(/[^0-9]/)||!xt.dataSelect.nodeName.includes(v)){var U;xt.dataSelect.ids.length&&(xt.dataSelect.ids=[]),(0==(null===(U=M.mouseEvent)||void 0===U?void 0:U.button)||M.touchEvent)&&(M=>{let o=(0,b.g1)(dt.O.SCAN_GROUP,"g"),y=(0,rt.bH)(0,0,1,1);(0,b.vl)(o,y),((M,i,n)=>{(0,h.A)(M,{start:o=>{},move:(o,y)=>{((o,y,g,v)=>{i=(0,rt.bH)(o,y,g,v),(0,b.vl)(n,i)})(y[0][0],y[0][1],o.x,o.y)},end:(o,y)=>{null==n||n.remove(),xt.dataSelect.ids=xt.data.getNodeInArea(Math.min(y[0][0],o.x),Math.min(y[0][1],o.y),Math.max(y[0][0],o.x),Math.max(y[0][1],o.y));let g=xt.dataSelect.nodes;1==g.length?(0,S.y)(g[0]):g.length>1&&(0,A.Q)(g)}})})(M,y,o)})(M)}else{var at,ht;let ot=parseFloat(g||"0");xt.dataSelect.ids=null!==(at=M.mouseEvent)&&void 0!==at&&at.shiftKey||null!==(ht=M.touchEvent)&&void 0!==ht&&ht.shiftKey?[ot].concat(xt.dataSelect.ids).filter((se,fe,pe)=>pe.indexOf(se)==fe):[ot];let Ut=xt.dataSelect.nodes;Ut.length>1||1==Ut.length&&Ut[0].type==C.$.PATH?(0,A.Q)(Ut):1==Ut.length&&(0,S.y)(Ut[0])}};class lt{constructor(){let{x:i,y:n}=xt.screen.dislocation;var r=(a,o,y,g)=>{xt.screen.move({x:i,y:n},{x:y-a,y:g-o})};return{start:a=>{},move:(a,o)=>{r(o[0][0],o[0][1],a.x,a.y)},end:(a,o)=>{r(o[0][0],o[0][1],a.x,a.y)}}}}var K=f(4714);const J=[{name:"tam gi\xe1c vu\xf4ng",type:K.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:K.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:K.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:K.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:K.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:K.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:K.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:K.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:K.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:K.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:K.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:K.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:K.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var nt=f(8619),E=f(5811);class q{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,nt._)(Math.ceil(1e9*Math.random())),y=(g,v,O,p)=>{o=(0,rt.bH)(g,v,O,p,{ratio:1}),o.x=(0,E.q)(o.x),o.y=(0,E.q)(o.y),o.width=(0,E.q)(o.width),o.height=(0,E.q)(o.height),Object.assign(a,(0,rt.sg)(C.$.CIRCLE,o)),(0,b.__)(r,a),(0,b.g$)(i,o)};return{start:g=>{r.setAttribute("cx",g.x.toString()),r.setAttribute("cy",g.y.toString()),r.setAttribute("r","1")},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),xt.data.node=Object.assign({id:n,type:C.$.CIRCLE,name:"Circle"},{size:o,attribute:a}),null==i||i.remove()}}}}var vt=f(8785);class ft{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,vt.r)(Math.ceil(1e9*Math.random()));var y=(g,v,O,p)=>{o=(0,rt.bH)(g,v,O,p),o.x=(0,E.q)(o.x),o.y=(0,E.q)(o.y),o.width=(0,E.q)(o.width),o.height=(0,E.q)(o.height),Object.assign(a,(0,rt.sg)(C.$.ELLIPSE,o)),(0,b.__)(r,a),(0,b.g$)(i,o)};return{start:g=>{r.setAttribute("cx",g.x.toString()),r.setAttribute("cy",g.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),xt.data.node=Object.assign({id:n,type:C.$.ELLIPSE,name:"Ellipse"},{size:o,attribute:a}),null==i||i.remove()}}}}var ct=f(8054);class tt{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,ct.f)(Math.ceil(1e9*Math.random()));var y=(g,v,O,p)=>{o=(0,rt.bH)(g,v,O,p),o.x=(0,E.q)(o.x),o.y=(0,E.q)(o.y),o.width=(0,E.q)(o.width),o.height=(0,E.q)(o.height),Object.assign(a,(0,rt.sg)(C.$.RECT,o)),(0,b.__)(r,a),(0,b.g$)(i,o)};return{start:g=>{y(g.x,g.y,g.x+o.width,g.y+o.height)},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{o.width>=10&&o.height>=10?xt.data.node=Object.assign({id:n,type:C.$.RECT,name:"Rect"},{size:o,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var P=f(2282);class Wt{constructor(i){let n=(0,b.g1)(dt.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:o,attribute:y,size:g}=(0,P.l)(Math.ceil(1e9*Math.random()));g.ratios=r;var v=(O,p,z,U)=>{g=(0,rt.bH)(O,p,z,U,{ratios:r}),g.x=(0,E.q)(g.x),g.y=(0,E.q)(g.y),g.width=(0,E.q)(g.width),g.height=(0,E.q)(g.height),Object.assign(y,(0,rt.sg)(C.$.POLYGON,g)),(0,b.__)(o,y),(0,b.g$)(n,g)};return{start:O=>{},move:(O,p)=>{v(p[0][0],p[0][1],O.x,O.y)},end:(O,p)=>{v(p[0][0],p[0][1],O.x,O.y),xt.data.node=Object.assign({id:a,type:C.$.POLYGON,name:"Polygon"},{size:g,attribute:y}),null==n||n.remove()}}}}var Dt=f(4921);class jt{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o}=(0,Dt.W)(Math.ceil(1e9*Math.random()));var y=(g,v,O,p)=>{o=(0,rt.bH)(g,v,O,p),o.x=(0,E.q)(o.x),o.y=(0,E.q)(o.y),o.width=(0,E.q)(o.width),o.height=(0,E.q)(o.height),Object.assign(a,(0,rt.sg)(C.$.LINE,o)),(0,b.__)(r,a),(0,b.g$)(i,o)};return{start:g=>{},move:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y)},end:(g,v)=>{y(v[0][0],v[0][1],g.x,g.y),xt.data.node=Object.assign({id:n,type:C.$.LINE,name:"Line"},{size:o,attribute:a}),null==i||i.remove()}}}}var le=f(8419);class Tt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,le.G)(Math.ceil(1e9*Math.random())),y="";var g=(v,O)=>{y+=` ${v} ${O}`,n.setAttribute("d",y)};return{start:v=>{y=`M ${v.x} ${v.y} L ${v.x} ${v.y}`},move:(v,O)=>{g(v.x,v.y)},end:(v,O)=>{g(v.x,v.y),(v=>{let O=9999,p=9999,z=-9999,U=-9999;v.forEach(at=>{O=Math.min(O,at[0]),p=Math.min(p,at[1]),z=Math.max(z,at[0]),U=Math.max(U,at[1])}),a=(0,rt.bH)(O,p,z,U,{points:v}),Object.assign(r,(0,rt.sg)(C.$.PATH,a)),(0,b.__)(n,r)})(O),xt.data.node=Object.assign({id:i,type:C.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var Gt=f(2875);class ut{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()));var v=(O,p,z,U)=>{a=(0,rt.bH)(O,p,z,U),a.x=(0,E.q)(a.x),a.y=(0,E.q)(a.y),a.width=(0,E.q)(a.width),a.height=(0,E.q)(a.height),Object.assign(o,(0,rt.sg)(C.$.FOREIGNOBJECT,a)),(0,b.__)(r,o),(0,b.g$)(i,a)};return{start:O=>{v(O.x,O.y,O.x+a.width,O.y+a.height)},move:(O,p)=>{v(p[0][0],p[0][1],O.x,O.y)},end:(O,p)=>{a.width>=10&&a.height>=10?xt.data.node=Object.assign({id:n,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g}):null==r||r.remove(),null==i||i.remove()}}}}var Y=f(7210);class Et{constructor(){var i,n;let r=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:a,element:o,size:y,attribute:g,source:v}=(0,Y.G)(Math.ceil(1e9*Math.random())),O=1;(z=>{if(!z)return;let U=new Image;U.onload=()=>{O=(0,E.q)(U.naturalWidth/U.naturalHeight,100)},U.onerror=at=>{console.error(`ImgSrc load failed -> ${z}`,at)},U.src=z})(null!==(i=null===(n=v.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var p=(z,U,at,ht)=>{y=(0,rt.bH)(z,U,at,ht,{ratio:O}),y.x=(0,E.q)(y.x),y.y=(0,E.q)(y.y),y.width=(0,E.q)(y.width),y.height=(0,E.q)(y.height),Object.assign(g,(0,rt.sg)(C.$.IMAGE,y)),(0,b.__)(o,g),(0,b.g$)(r,y)};return{start:z=>{p(z.x,z.y,z.x+y.width,z.y+y.height)},move:(z,U)=>{p(U[0][0],U[0][1],z.x,z.y)},end:(z,U)=>{y.width>=10&&y.height>=10?xt.data.node=Object.assign({id:a,type:C.$.IMAGE,name:"Image"},{size:y,attribute:g,source:v}):null==o||o.remove(),null==r||r.remove()}}}}var Xt=f(4578),mt=f(9623);function L(M,i,n,r){return Math.sqrt(Math.pow(n-M,2)+Math.pow(r-i,2))}function u(M,i,n,r,a){return L(M,i,n,r)<a?1:0}function pt(M,i,n,r,a,o,y){var g=[];return g.push(u(M,i,n,r,y)),g.push(u(M,i,a,o,y)),g.push(function V(M,i,n,r,a,o,y){var g=[a-n,o-r],v=[M-n,i-r],O=[-g[1],g[0]],p=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/p,O[1]/p],U=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),at=[g[0]/U,g[1]/U],ht=v[0]*at[0]+v[1]*at[1];if(ht<=0||ht>=U)return 0;var ot=v[0]*z[0]+v[1]*z[1];return ot>=y||ot<=-y?0:1}(M,i,n,r,a,o,y)),g}function gt(M,i,n,r,a){var o=[n-M,r-i],y=[-o[1],o[0]],g=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),v=[y[0]/g,y[1]/g];return[[M+a*v[0],i+a*v[1]],[M-a*v[0],i-a*v[1]],[n-a*v[0],r-a*v[1]],[n+a*v[0],r+a*v[1]]]}function St(M,i,n,r,a,o,y){var ht,g=[a-M,o-i],v=[n-M,r-i],O=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),p=[v[0]/O,v[1]/O],z=g[0]*p[0]+g[1]*p[1],U=[M+z*p[0],i+z*p[1]],at=Math.sqrt(Math.pow(a-U[0],2)+Math.pow(o-U[1],2));ht=0===at?y:Math.sqrt(Math.pow(y,2)-Math.pow(at,2));var ot=[M+z*p[0]+ht*p[0],i+z*p[1]+ht*p[1]];return ot[0]===M&&ot[1]===i?null:ot}function Ft(M,i,n,r,a,o,y){var g=[a-M,o-i],v=[n-M,r-i],O=[-v[1],v[0]],p=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/p,O[1]/p],U=g[0]*z[0]+g[1]*z[1],at=re([M,i],[n,r],[a,o]);if(qt([at[0]-a,at[1]-o])>=y)return null;var ot=Math.sqrt(Math.pow(y,2)-Math.pow(U,2)),Ut=[a-U*z[0],o-U*z[1]],se=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),fe=[v[0]/se,v[1]/se],pe=[[Ut[0]-fe[0]*ot,Ut[1]-fe[1]*ot],[Ut[0]+fe[0]*ot,Ut[1]+fe[1]*ot]];return pe[0][0]===M&&pe[0][1]===i?null:pe}function Bt(M,i,n,r,a,o,y,g){var v,O,p,z,U,at;return-(p=y-a)*(O=r-i)+(v=n-M)*(z=g-o)==0?null:(at=(p*(i-o)-z*(M-a))/(-p*O+v*z),(U=(-O*(M-a)+v*(i-o))/(-p*O+v*z))>=0&&U<=1&&at>=0&&at<=1?[M+at*v,i+at*O]:null)}function Ot(M,i,n,r,a,o,y,g,v,O){var p=gt(o,y,g,v,O),z=[];if(n[0]&&!n[1])z.push(St(M,i,r,a,o,y,O)),z.push(Bt(M,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Bt(M,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),(U=Ft(M,i,r,a,g,v,O))&&z.push(U[0],U[1]);else if(!n[0]&&n[1])z.push(St(M,i,r,a,g,v,O)),z.push(Bt(M,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Bt(M,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),(U=Ft(M,i,r,a,o,y,O))&&z.push(U[0],U[1]);else if(n[0]&&n[1])z.push(St(M,i,r,a,o,y,O)),z.push(Bt(M,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Bt(M,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1])),z.push(St(M,i,r,a,g,v,O));else{var U=Ft(M,i,r,a,g,v,O),at=Ft(M,i,r,a,o,y,O);U&&z.push(U[0],U[1]),at&&z.push(at[0],at[1]),z.push(Bt(M,i,r,a,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Bt(M,i,r,a,p[1][0],p[1][1],p[2][0],p[2][1]))}for(var ht=[M,i],ot=0;ot<z.length;ot++)z[ot]&&L(z[ot][0],z[ot][1],r,a)<L(ht[0],ht[1],r,a)&&(ht=z[ot]);return ht[0]===M&&ht[1]===i?null:ht}function bt(M,i,n,r,a,o,y,g,v){var O=gt(a,o,y,g,v),p=[],z=Ft(M,i,n,r,a,o,v);z&&p.push(z[0],z[1]),(z=Ft(M,i,n,r,y,g,v))&&p.push(z[0],z[1]),p.push(Bt(M,i,n,r,O[0][0],O[0][1],O[3][0],O[3][1])),p.push(Bt(M,i,n,r,O[1][0],O[1][1],O[2][0],O[2][1]));for(var U=[n,r],at=[M,i],ht=0;ht<p.length;ht++)p[ht]&&L(p[ht][0],p[ht][1],M,i)<L(U[0],U[1],M,i)&&(U=p[ht]);for(var ot=0;ot<p.length;ot++)p[ot]&&L(p[ot][0],p[ot][1],n,r)<L(at[0],at[1],n,r)&&(at=p[ot]);return U[0]===n&&U[1]===r||at[0]===M&&at[1]===i?null:[U,at]}var qt=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},re=function(M,i,n){var r=[i[0]-M[0],i[1]-M[1]],a=qt(r);if(a<1e-6)return M;var o=[n[0]-M[0],n[1]-M[1]],y=(r[0]*o[0]+r[1]*o[1])/a;return y<0?M:y>a?i:[M[0]+r[0]*y/a,M[1]+r[1]*y/a]};class j{constructor(){let{element:r,size:o}=(0,le.G)(Math.ceil(1e9*Math.random()));(0,b.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:O=>{y=`M ${O.x} ${O.y} L ${O.x} ${O.y}`},move:(O,p)=>{((O,p)=>{y+=` ${O} ${p}`,r.setAttribute("d",y)})(O.x,O.y)},end:(O,p)=>{r.remove(),(O=>{let p=9999,z=9999,U=-9999,at=-9999;O.forEach(ot=>{p=Math.min(p,ot[0]),z=Math.min(z,ot[1]),U=Math.max(U,ot[0]),at=Math.max(at,ot[1])}),o=(0,rt.bH)(p,z,U,at,{points:O}),xt.data.getNodeInArea(0,0,1920,1920,C.$.PATH).forEach(ot=>{let se=((M,i,n)=>{n=n||20;var r=[],a=function(p){var z=i[0][0],U=i[0][1],at=0,ht=0;if(1!==p.length||u(p[0][0],p[0][1],z,U,n)){for(var ot;at<p.length-1;){var Ut=p[at],se=p[at+1],fe=u(Ut[0],Ut[1],z,U,n),pe=u(se[0],se[1],z,U,n);if(fe&&pe)ht=++at;else if(fe&&!pe)(xe=St(Ut[0],Ut[1],se[0],se[1],z,U,n))?(p[at]=xe,ht=at):at++;else if(!fe&&pe){var xe;(xe=St(se[0],se[1],Ut[0],Ut[1],z,U,n))&&((ot=p.slice(ht,at+1)).push(xe),r.push(ot)),ht=++at}else{var me=Ft(Ut[0],Ut[1],se[0],se[1],z,U,n);me?(((ot=p.slice(ht,at+1))[ot.length-1][0]!==me[0][0]||ot[ot.length-1][1]!==me[0][1])&&ot.push(me[0]),ot.length>1&&r.push(ot),p[at]=me[1],p[at+1]&&p[at+1][0]==me[1][0]&&p[at+1][1]==me[1][1]&&at++,ht=at):at++}}ht!==at&&(ot=p.slice(ht,p.length))&&r.push(ot)}else r.push(p)},o=function(p,z){var se,U=i[z],at=i[z+1],ht=0,ot=0;if(1!==p.length||-1!==(Ut=pt(p[0][0],p[0][1],U[0],U[1],at[0],at[1],n)).indexOf(1)){for(;ht<p.length-1;){var fe=p[ht],pe=p[ht+1],Ut=pt(fe[0],fe[1],U[0],U[1],at[0],at[1],n),xe=pt(pe[0],pe[1],U[0],U[1],at[0],at[1],n);if(-1!==Ut.indexOf(1)&&-1!==xe.indexOf(1))ot=++ht;else if(-1!==Ut.indexOf(1)&&-1===xe.indexOf(1))(me=Ot(fe[0],fe[1],Ut,pe[0],pe[1],U[0],U[1],at[0],at[1],n))?(p[ht]=me,ot=ht):ht++;else if(-1===Ut.indexOf(1)&&-1!==xe.indexOf(1)){var me;(me=Ot(pe[0],pe[1],xe,fe[0],fe[1],U[0],U[1],at[0],at[1],n))?((se=p.slice(ot,ht+1)).push(me),r.push(se),ot=++ht):ht++}else{var ke=bt(fe[0],fe[1],pe[0],pe[1],U[0],U[1],at[0],at[1],n);ke?(((se=p.slice(ot,ht+1))[se.length-1][0]!==ke[0][0]||se[se.length-1][1]!==ke[0][1])&&se.push(ke[0]),se.length>1&&r.push(se),p[ht]=ke[1],p[ht+1]&&p[ht+1][0]==ke[1][0]&&p[ht+1][1]==ke[1][1]&&ht++,ot=ht):ht++}}ot!==ht&&(se=p.slice(ot,p.length))&&r.push(se)}else r.push(p)};if(i=function F(M){var i=[];if(1===M.length)i=M;else{for(var n=0;n<M.length-1;)(M[n][0]!==M[n+1][0]||M[n][1]!==M[n+1][1])&&i.push(M[n]),n++;0!==M.length&&0===i.length&&i.push(M[0]),(M[M.length-1][0]!==M[i.length-1][0]||M[M.length-1][1]!==M[i.length-1][1])&&i.push(M[n])}return i}(i),1===i.length){for(var y=0;y<M.length;y++)a(M[y]);M=r}else for(var g=0;g<i.length-1;g++){for(y=0;y<M.length;y++)o(M[y],g);M=r,r=[]}for(var v=0;v<M.length;v++)for(var O=0;O<M[v].length;O++)M[v][O][0]=Math.round(M[v][O][0]),M[v][O][1]=Math.round(M[v][O][1]);return M})(xt.data.getNode(ot).size.points,O,2);console.log(se)})})(p)}}}}var k=f(1105);class Q{constructor(){let i=(0,b.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:o,source:y}=(0,k.$)(Math.ceil(1e9*Math.random())),g=(v,O,p,z)=>{o=(0,rt.bH)(v,O,p,z),o.x=(0,E.q)(o.x),o.y=(0,E.q)(o.y),o.width=(0,E.q)(o.width),o.height=(0,E.q)(o.height),Object.assign(a,(0,rt.sg)(C.$.TEXT,o)),(0,b.__)(r,a),(0,b.g$)(i,o)};return{start:v=>{g(v.x,v.y,v.x+o.width,v.y+o.height)},move:(v,O)=>{g(O[0][0],O[0][1],v.x,v.y)},end:(v,O)=>{o.width>=10&&o.height>=10?xt.data.node=Object.assign({id:n,type:C.$.TEXT,name:"Text"},{size:o,attribute:a,source:y}):null==r||r.remove(),null==i||i.remove()}}}}var Z=f(4113),I=f(9125),X=f(7797);var Pt=f(6358);class wt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>xt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,o,y;null===(n=window.document.getElementById(dt.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(dt.O.SCAN_GROUP))||void 0===a||a.remove(),null===(o=window.document.getElementById(dt.O.CREATE_GROUP))||void 0===o||o.remove(),null===(y=window.document.getElementById(dt.O.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(g=>g(i))}deleteNode(){for(let i of this._selected_Ids){let n=xt.data.deleteNode(i);xt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}xt.dataSelect.ids=[]}groupNode(){let i=[];if(xt.dataSelect.ids.length>=2){let n=xt.data.getNode(xt.dataSelect.ids[0]),{nodeId:r,attribute:a,size:o}=(0,Pt.m)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);xt.data.node=Object.assign({id:r,type:C.$.GROUP,name:"G"},{size:o,attribute:a});for(let y of xt.dataSelect.ids)i.push(xt.data.addGroup(y,r))}if(i.length){xt.dataSelect.ids=i;let n=xt.dataSelect.nodes;1==n.length?(0,S.y)(n[0]):n.length>1&&(0,A.Q)(n)}}ungroupNode(){let i=[];for(let n of xt.dataSelect.ids)i.push(xt.data.unGroup(n));if(i.length){xt.dataSelect.ids=i;let n=xt.dataSelect.nodes;1==n.length?(0,S.y)(n[0]):n.length>1&&(0,A.Q)(n)}}}var It=f(9942);class Jt{createNodeImage(i,n){var r,a,o,y;let{nodeId:v,element:O,size:p,attribute:z,source:U}=(0,Y.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},source:{type:"image",image:(0,It.I)(i)}});(at=>{if(!at)return;let ht=new Image;ht.onload=()=>{let ot=(0,E.q)(ht.naturalWidth/ht.naturalHeight,100);ot>=1?(p.width=Math.min(ht.naturalWidth,512),p.height=(0,E.q)(p.width/ot,100)):(p.height=Math.min(ht.naturalHeight,512),p.width=(0,E.q)(p.height*ot,100)),p.x=(0,E.q)(p.x+50-p.width/2,100),p.y=(0,E.q)(p.y+50-p.height/2,100),Object.assign(z,(0,rt.sg)(C.$.IMAGE,p)),(0,b.__)(O,z),xt.data.node=Object.assign({id:v,type:C.$.IMAGE,name:"Image"},{size:p,attribute:z,source:U})},ht.onerror=ot=>{console.error(`ImgSrc load failed -> ${at}`,ot),null==O||O.remove()},ht.src=at})(null!==(o=null===(y=U.image)||void 0===y?void 0:y.url)&&void 0!==o?o:"")}createNodeIframe(i,n){var r,a;let{nodeId:y,element:g,size:v,attribute:O,style:p,source:z}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,It.I)(i)}});(U=>{let at=(null===(U=xt.data.slide)||void 0===U||null===(U=U.svg)||void 0===U?void 0:U.viewBox)||{x:0,y:0,width:100,height:100},ht=(0,E.q)(at.width/at.height,100);ht>=1?(v.width=Math.min(at.width,512),v.height=(0,E.q)(v.width/ht,100)):(v.height=Math.min(at.height,512),v.width=(0,E.q)(v.height*ht,100)),v.x=(0,E.q)(v.x+50-v.width/2,100),v.y=(0,E.q)(v.y+50-v.height/2,100),Object.assign(O,(0,rt.sg)(C.$.IMAGE,v)),(0,b.__)(g,O),xt.data.node=Object.assign({id:y,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:v,attribute:O,style:p,source:z})})()}createNodeEmbed(i,n){var r,a;let{nodeId:y,element:g,size:v,attribute:O,style:p,source:z}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},style:{},source:{type:"embed",embed:Object.assign(i,(0,It.I)(i))}});(U=>{let at=(null===(U=xt.data.slide)||void 0===U||null===(U=U.svg)||void 0===U?void 0:U.viewBox)||{x:0,y:0,width:100,height:100},ht=(0,E.q)(at.width/at.height,100);ht>=1?(v.width=Math.min(at.width,512),v.height=(0,E.q)(v.width/ht,100)):(v.height=Math.min(at.height,512),v.width=(0,E.q)(v.height*ht,100)),v.x=(0,E.q)(v.x+50-v.width/2,100),v.y=(0,E.q)(v.y+50-v.height/2,100),Object.assign(O,(0,rt.sg)(C.$.IMAGE,v)),(0,b.__)(g,O),xt.data.node=Object.assign({id:y,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:v,attribute:O,style:p,source:z})})()}createNodeMedia(i,n){var r,a,o,y;let{nodeId:v,element:O,size:p,attribute:z,source:U}=(0,Y.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(a=null==n?void 0:n.y)&&void 0!==a?a:50)-50,width:100,height:100},source:{type:"image",image:(0,It.I)(i.cover)}}),at={click:{media:i.media}};(ht=>{if(!ht)return;let ot=new Image;ot.onload=()=>{let Ut=(0,E.q)(ot.naturalWidth/ot.naturalHeight,100);Ut>=1?(p.width=Math.min(ot.naturalWidth,512),p.height=(0,E.q)(p.width/Ut,100)):(p.height=Math.min(ot.naturalHeight,512),p.width=(0,E.q)(p.height*Ut,100)),p.x=(0,E.q)(p.x+50-p.width/2,100),p.y=(0,E.q)(p.y+50-p.height/2,100),Object.assign(z,(0,rt.sg)(C.$.IMAGE,p)),(0,b.__)(O,z),xt.data.node=Object.assign({id:v,type:C.$.IMAGE,name:"Image"},{size:p,attribute:z,source:U,interactive:at})},ot.onerror=Ut=>{console.error(`ImgSrc load failed -> ${ht}`,Ut),null==O||O.remove()},ot.src=ht})(null!==(o=null===(y=U.image)||void 0===y?void 0:y.url)&&void 0!==o?o:"")}insert(i){var n;if(xt.data.insertSlide(xt.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});xt.data.node=Object.assign({id:r,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g})}if(i.description){let{nodeId:r,size:a,attribute:o,style:y,source:g}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});xt.data.node=Object.assign({id:r,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:o,style:y,source:g})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:o}=(0,ct.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});xt.data.node=Object.assign({id:r,type:C.$.RECT,name:"Rect"},{size:a,attribute:o})})(),(r=>{let{nodeId:a,size:o,attribute:y,style:g,source:v}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});xt.data.node=Object.assign({id:a,type:C.$.FOREIGNOBJECT,name:"ForeignObject"},{size:o,attribute:y,style:g,source:v})})())}}var zt=f(5226);class Zt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:xt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((o,y)=>y==this._slideIdx),r=null==n?void 0:n.svg,a=o=>{let y=[];return o.filter(g=>!g.isdeleted).forEach(g=>{g.type==C.$.GROUP?y=y.concat(a(g.nodes||[])):y.push(g.id)}),y};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,o;return null===(a=r)||void 0===a||a.filter(y=>y.type==C.$.GROUP).forEach(y=>{var g;y.nodes=n(null===(g=y.nodes)||void 0===g?void 0:g.filter(v=>!v.isdeleted))}),(r=null===(o=r)||void 0===o?void 0:o.filter(y=>{var g,v;return y.type!=C.$.GROUP||(null!==(g=null===(v=y.nodes)||void 0===v?void 0:v.length)&&void 0!==g?g:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(o=>!o.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,o,y,g,v,O,p,z;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(o=r.svg)||void 0===o||o.nodes.forEach(U=>{var at,ht,ot,Ut,se,fe,pe,xe,me,ke;n.push(null===(at=U.source)||void 0===at||null===(at=at.image)||void 0===at?void 0:at.path),n.push(null===(ht=U.source)||void 0===ht||null===(ht=ht.audio)||void 0===ht?void 0:ht.path),n.push(null===(ot=U.source)||void 0===ot||null===(ot=ot.video)||void 0===ot?void 0:ot.path),n.push(null===(Ut=U.source)||void 0===Ut||null===(Ut=Ut.file)||void 0===Ut?void 0:Ut.path),n.push(null===(se=U.source)||void 0===se||null===(se=se.iframe)||void 0===se?void 0:se.path),n.push(null===(fe=U.source)||void 0===fe||null===(fe=fe.track)||void 0===fe?void 0:fe.path),n.push(null===(pe=U.interactive)||void 0===pe||null===(pe=pe.show)||void 0===pe||null===(pe=pe.audio)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),n.push(null===(xe=U.interactive)||void 0===xe||null===(xe=xe.click)||void 0===xe||null===(xe=xe.audio)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),n.push(null===(me=U.interactive)||void 0===me||null===(me=me.click)||void 0===me||null===(me=me.image)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),n.push(null===(ke=U.interactive)||void 0===ke||null===(ke=ke.click)||void 0===ke||null===(ke=ke.video)||void 0===ke||null===(ke=ke.source)||void 0===ke?void 0:ke.path)}),n.push(null===(y=r.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),n.push(null===(g=r.test)||void 0===g||null===(g=g.audiofalse)||void 0===g?void 0:g.path),n.push(null===(v=r.test)||void 0===v||null===(v=v.effecttrue)||void 0===v?void 0:v.path),n.push(null===(O=r.test)||void 0===O||null===(O=O.effectfalse)||void 0===O?void 0:O.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.icontrue)||void 0===p?void 0:p.path),n.push(null===(z=r.test)||void 0===z||null===(z=z.iconfalse)||void 0===z?void 0:z.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,o)=>o.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,o;return null===(a=r)||void 0===a||a.filter(y=>y.type==C.$.GROUP).forEach(y=>{var g;y.nodes=n(null===(g=y.nodes)||void 0===g?void 0:g.filter(v=>!v.isdeleted))}),(r=null===(o=r)||void 0===o?void 0:o.filter(y=>{var g,v;return y.type!=C.$.GROUP||(null!==(g=null===(v=y.nodes)||void 0===v?void 0:v.length)&&void 0!==g?g:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(o=>!o.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,b.wM)(),(0,zt.E)(this.slide)}openSlide(i,n){var r,a,o,y;if(i)for(let z=0,U=null!==(g=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==g?g:0;z<U;z++){var g,v,O;if((null!==(O=this._dataSource.slides)&&void 0!==O?O:[])[z].id==i){this._slideIdx=z;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var p;this._slideIdx=0,null!==(p=this._dataSource.slides)&&void 0!==p&&p.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,b.wM)(),(0,zt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(o=null===(y=this._dataSource.slides)||void 0===y?void 0:y.length)&&void 0!==o?o:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,n,r){var a,o,y,g,v;let O=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(z=>z.id==i);if(!r||!O||null!=O&&null!==(o=O.svg)&&void 0!==o&&o.nodes.filter(z=>!z.isdeleted).length)return this.insertSlide(i,n,r);let p=null!==(y=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(O))&&void 0!==y?y:0;null===(v=this._dataSource.slides)||void 0===v||v.splice(p,1,r),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,o,y,g,v;let O=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(U=>U.id==i))&&void 0!==a?a:this._defaultSlide,p=(null!==(y=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(O))&&void 0!==y?y:0)+n;var z;r?(r.id=this.newSlideId,r.code=void 0,r.name||(r.name="Trang m\u1edbi"),null!==(z=r.svg)&&void 0!==z&&z.viewBox||r.svg&&(r.svg.viewBox=xt.screen.frameSize)):r=this._defaultSlide,null===(v=this._dataSource.slides)||void 0===v||v.splice(p,0,r),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,o,y,g,v;let O=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(U=>U.id==i))&&void 0!==n?n:this._defaultSlide,p=(null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(O))&&void 0!==a?a:0)+1,z=Object.assign(JSON.parse(JSON.stringify(O)),{id:this.newSlideId,code:void 0,name:`${O.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(p,0,z),this.changeSlide(this.slides,this.slideIdx,null!==(g=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==g?g:0,this.slide)}moveSlide(i,n){var r,a,o,y,g,v;let O=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,p=null!==(o=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==o?o:0;null===(g=this._dataSource.slides)||void 0===g||g.splice(p+n,0,null===(v=this._dataSource.slides)||void 0===v?void 0:v.splice(p,1)[0])}deleteSlide(i){var n,r,a,o,y,g;let v=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(U=>U.id==i))&&void 0!==n?n:this._defaultSlide,O=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(v))&&void 0!==a?a:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(O,1),null!==(g=this._dataSource.slides)&&void 0!==g&&g.length)if(O<this._slideIdx){var p,z;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(z=this._dataSource.slides)||void 0===z?void 0:z.length)&&void 0!==p?p:0,this.slide)}else O==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,o,y;let g=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(O=>O.id==i))&&void 0!==n?n:this._defaultSlide,v=null!==(a=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(g))&&void 0!==a?a:0;if(g.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(O=>!O.isdeleted))&&void 0!==y&&y.length){let O=!0;for(;g.isdeleted;)O?v++:v--,this._dataSource.slides[v]?g=this._dataSource.slides[v]:O=!O;this.openSlide(g.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(o=>o(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((y,g)=>g==this._slideIdx),o=null==a?void 0:a.svg;null!=o&&o.nodes&&(null==o||o.nodes.push(i)),xt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,zt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((U,at)=>at==this._slideIdx),a=null==r?void 0:r.svg,o=(U,at)=>{let ht=null==U?void 0:U.find(se=>se.id==i);if(ht)return ht.pid=at,ht;let ot=0,Ut=U.length||0;for(;ot<Ut&&!ht&&(ht=o(U[ot].nodes||[],U[ot].id),!ht);)ot++;return ht},y=o((null==a?void 0:a.nodes)||[]);var g,v,O,p,z;return y?(y.style=null!==(g=y.style)&&void 0!==g?g:{},y.source=null!==(v=y.source)&&void 0!==v?v:{},y.animate=null!==(O=y.animate)&&void 0!==O?O:{},y.interactive=null!==(p=y.interactive)&&void 0!==p?p:{},y.variable=null!==(z=y.variable)&&void 0!==z?z:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((g,v)=>v==this._slideIdx),a=null==r?void 0:r.svg,y=g=>{let v=(null==g?void 0:g.find(ht=>ht.id==i))||(g=>{let v=null,O=0,p=g.length||0;for(;O<p&&!v;){if(v=y(g[O].nodes),v){v.pid=g[O].id;break}O++}var z,U,at,ht,ot;return v&&(v.style=null!==(z=v.style)&&void 0!==z?z:{},v.source=null!==(U=v.source)&&void 0!==U?U:{},v.animate=null!==(at=v.animate)&&void 0!==at?at:{},v.interactive=null!==(ht=v.interactive)&&void 0!==ht?ht:{},v.variable=null!==(ot=v.variable)&&void 0!==ot?ot:{}),v})((null==g?void 0:g.filter(ht=>ht.type==C.$.GROUP))||[]);var O,p,z,U,at;return v&&(v.style=null!==(O=v.style)&&void 0!==O?O:{},v.source=null!==(p=v.source)&&void 0!==p?p:{},v.animate=null!==(z=v.animate)&&void 0!==z?z:{},v.interactive=null!==(U=v.interactive)&&void 0!==U?U:{},v.variable=null!==(at=v.variable)&&void 0!==at?at:{}),v};return y((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,o){var y;let g=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,z)=>z==this._slideIdx),v=null==g?void 0:g.svg,O=p=>{let z=[];return p.filter(U=>!U.isdeleted).forEach(U=>{U.type==C.$.GROUP?z=z.concat(O(U.nodes||[])):i>U.size.x||n>U.size.y||r<U.size.x+U.size.width||a<U.size.y+U.size.height||(o?U.type==o&&z.push(U.id):z.push(U.id))}),z};return O((null==v?void 0:v.nodes)||[])}getNodeOnArea(i,n,r,a,o){var y;let g=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,z)=>z==this._slideIdx),v=null==g?void 0:g.svg,O=p=>{let z=[];return p.filter(U=>!U.isdeleted).forEach(U=>{U.type==C.$.GROUP?z=z.concat(O(U.nodes||[])):U.size.x+U.size.width<i||U.size.y+U.size.height<n||U.size.x>r||U.size.y>a||(o?U.type==o&&z.push(U.id):z.push(U.id))}),z};return O((null==v?void 0:v.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,zt.E)(this.slide),(0,zt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),o=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:o})),Object.assign(a,{isdeleted:!0}),(0,zt.E)(this.slide),(0,zt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),o}addGroup(i,n){var r;let a=this.getNode(i),o=this.getNode(n);o.nodes=o.nodes||[];let y=Math.ceil(1e9*Math.random());return o.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:y})),Object.assign(a,{isdeleted:!0}),(0,zt.E)(this.slide),(0,zt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),y}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(o=>o.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let o=i.map(at=>xt.data.getNode(at)).filter(at=>!at.isfake),{x1:y,y1:g,x2:v,y2:O}=Yt(o),p=this.getNodeOnArea(y,g,v,O);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((at,ht)=>{at.index=ht+1});let z=p.map(at=>{var ht,ot;return null!==(ht=null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||null===(ot=ot.nodes.find(Ut=>Ut.id==at))||void 0===ot?void 0:ot.index)&&void 0!==ht?ht:0}),U=Math.max.apply(null,z);i.forEach((at,ht)=>{var ot;null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||ot.nodes.filter(Ut=>Ut.id==at).forEach(Ut=>{Ut.index=U+(ht+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((at,ht)=>{var ot,Ut;return(null!==(ot=at.index)&&void 0!==ot?ot:0)-(null!==(Ut=ht.index)&&void 0!==Ut?Ut:0)}),(0,zt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,A.Q)(o)}sendToBack(i){var n,r,a;let o=i.map(at=>xt.data.getNode(at)).filter(at=>!at.isfake),{x1:y,y1:g,x2:v,y2:O}=Yt(o),p=this.getNodeOnArea(y,g,v,O);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((at,ht)=>{at.index=ht+1});let z=p.map(at=>{var ht,ot;return null!==(ht=null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||null===(ot=ot.nodes.find(Ut=>Ut.id==at))||void 0===ot?void 0:ot.index)&&void 0!==ht?ht:0}),U=Math.min.apply(null,z)-1;i.forEach((at,ht)=>{var ot;null===(ot=this.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot||ot.nodes.filter(Ut=>Ut.id==at).forEach(Ut=>{Ut.index=U+(ht+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((at,ht)=>{var ot,Ut;return(null!==(ot=at.index)&&void 0!==ot?ot:0)-(null!==(Ut=ht.index)&&void 0!==Ut?Ut:0)}),(0,zt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,A.Q)(o)}}const Yt=M=>{let i=999999,n=999999,r=-999999,a=-999999;return M.forEach(o=>{i=Math.min(i,o.size.x),n=Math.min(n,o.size.y),r=Math.max(r,o.size.x+o.size.width),a=Math.max(a,o.size.y+o.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class oe{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":xt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":xt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:o,attribute:y}=xt.data.getNode(n.from.id);Object.assign(o,n.from.size),Object.assign(y,(0,rt.sg)(a,o)),(0,b.__)(window.document.getElementById(r),y);break}case"attribute":{let{id:r,attribute:a}=xt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,b.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=xt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,b.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:o}=xt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.source),(0,b.QI)(window.document.getElementById(r),a,null!=o?o:{});break}case"animate":{let{animate:r}=xt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=xt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=xt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),xt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":xt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":xt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:o,attribute:y}=xt.data.getNode(n.to.id);Object.assign(o,n.to.size),Object.assign(y,(0,rt.sg)(a,o)),(0,b.__)(window.document.getElementById(r),y);break}case"attribute":{let{id:r,attribute:a}=xt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,b.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=xt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,b.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:o}=xt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.source),(0,b.QI)(window.document.getElementById(r),a,null!=o?o:{});break}case"animate":{let{animate:r}=xt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=xt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=xt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),xt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class _e{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var o={x:Math.max(0,Math.min((0,E.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,E.q)(n.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*o.x,y:(this._height/i-this._height/this._scale)*o.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,b.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var ve=f(644);class ge{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,ve.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,ve.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Oe=f(1690),ni=f(5973),ri=f(4787),Ae=function(M){return M&&JSON.parse(JSON.stringify(M))},Ge=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ze=[],ai={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},oi={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ti{constructor(){this._data_variables=Ae(Ge).concat(Ae(Ze)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Ae(Ge).concat(Ae(Ze)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),Ge.forEach(r=>{var a=this._data_variables.filter(o=>o.key==r.key);a.length?a.forEach(function(o,y,g){o.type=r.type,o.readonly=r.readonly,o.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Ae(ai)}getConditionTemp(){return Ae(oi)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Ae((M=this._data_variables,i="key",function(n){for(var r of M.map(function(a){return a[i]}).sort())M.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),M=M.filter(function(a){return a[i]!=r});return n}([]))):Ae(Ge).concat(Ae(Ze));var M,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ge.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,o,y)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Ae(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(o=>o.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(o=>o.key==i);a.length?a.forEach(function(o,y,g){o.value=n,o.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(y){return y.key==i});if(r.length){var o,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?o=!1:"boolean"==typeof a.value?o=a.value:(o=(a.value+"").toLowerCase(),o="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:o=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),o}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(y){return y.key==i});if(a.length){var o=a[0];this.OnSetActionExecuting(o),o&&(o.value=n),this.OnSetActionExecuted(o)}}}getConditionAll(){return Ae(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Ae(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,o){return a+o})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,o){return a+o})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,o){return a+o})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,o){return a+o});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,o){return a+o});case"sub":return n.reduce(function(a,o){return a-o});case"pro":return n.reduce(function(a,o){return a*o});case"div":return n.reduce(function(a,o){return a/o});case"avg":var r=n.reduce(function(a,o){return a+o})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,o){return a&&o});case"or":return n.reduce(function(a,o){return a||o});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Ae(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Ae(n),{variable:r})));break;case"slide":Oe.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ri.L5)({id:n.node,nodeStatus:Oe.$.nodeStatus,slideStatus:Oe.$.slideStatus});let o=Oe.$.findNode(n.node);null!=o&&null!==(a=o.interactive)&&void 0!==a&&a.click&&(0,ni.F)(o,Oe.$.nodeStatus,Oe.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Xe{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case W._.PEN:this._pen_type=n;break;case W._.SHAPE:this._shape_type=n,r&&n===C.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const xt=new class si{constructor(){this._container="",this._svg="",this._screen=_e.prototype,this._data=Zt.prototype,this._dataSelect=wt.prototype,this._slide=Jt.prototype,this._history=oe.prototype,this._attribute=ge.prototype,this._pointer=Xe.prototype,this._variable=ti.prototype,this._data=new Zt,this._dataSelect=new wt,this._slide=new Jt,this._history=new oe,this._attribute=new ge,this._pointer=new Xe,this._variable=new ti,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,o;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(o=null==i?void 0:i.top)&&void 0!==o?o:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new _e,(M=>{new b.Mh(M.container,M.target),xt.pointer.onchange=(r,a,o)=>{switch(r){case W._.POINTER:jQuery(M.target).css({cursor:"auto"});break;case W._.HAND:jQuery(M.target).css({cursor:"grab"});break;case W._.PEN:switch(a){case I.D.DRAW:jQuery(M.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case I.D.HIGHTLIGH:jQuery(M.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case W._.ERASER:jQuery(M.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case W._.SHAPE:jQuery(M.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case W._.TEXT:case W._.FOREIGNOBJECT:jQuery(M.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(M.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{xt.pointer.pointer_type==W._.HAND&&jQuery(M.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{xt.pointer.pointer_type==W._.HAND&&jQuery(M.target).css({cursor:"grab"})}),jQuery(M.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var o=xt.screen.scale,y=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;xt.screen.scaleTo(o-.04*o*y,(0,X.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},xt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{xt.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(M.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{xt.screen.actived=!0}),jQuery(M.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{xt.screen.actived=!1}),jQuery(M.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(M.container.includes("#")&&M.container.includes(r.target.getAttribute("id"))||M.container.includes(".")&&M.container.includes(r.target.getAttribute("class"))||M.container.includes(r.target.nodeName))&&(xt.pointer.pointer_type_temp||xt.pointer.pointer_type)===W._.POINTER&&(xt.dataSelect.ids=[])}),jQuery(M.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(xt.pointer.pointer_type_temp||xt.pointer.pointer_type){case W._.POINTER:T(r);break;case W._.HAND:(M=>{(0,h.A)(M,new lt,1,{x:0,y:0})})(r);break;case W._.PEN:(0,mt.i)(r);break;case W._.SHAPE:(M=>{var i=null;switch(xt.pointer.shape_type){case C.$.CIRCLE:i=new q;break;case C.$.ELLIPSE:i=new ft;break;case C.$.LINE:i=new jt;break;case C.$.RECT:i=new tt;break;case C.$.POLYGON:var n;i=new Wt(null===(n=J.find(r=>r.type==xt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case C.$.FOREIGNOBJECT:i=new ut;break;case C.$.IMAGE:i=new Et;break;case C.$.TEXT:case C.$.PATH:i=new Tt}i&&(0,h.A)(M,i)})(r);break;case W._.FOREIGNOBJECT:(M=>{(0,h.A)(M,new ut)})(r);break;case W._.IMAGE:(M=>{(0,h.A)(M,new Et)})(r);break;case W._.TEXT:(M=>{(0,h.A)(M,new Q)})(r);break;case W._.ERASER:(M=>{(0,h.A)(M,new j)})(r);break;case W._.INDEX:(0,Z.s)(r)}};let n=!1;jQuery(M.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(M.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),M.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{xt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Xt.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{xt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Xt.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(ce,At,f)=>{f.d(At,{s:()=>A,Q:()=>_});var W=f(1687),b=f(4981),dt=f(4318),C=f(6816),rt=f(4080);const A=T=>{var x,lt,K,J;let nt=(null===(x=T.mouseEvent)||void 0===x?void 0:x.target)||(null===(lt=T.touchEvent)||void 0===lt?void 0:lt.target),E=(null==nt?void 0:nt.getAttribute("id"))||"",q=null==nt?void 0:nt.nodeName,vt=jQuery(nt).parents("g[id]").attr("id")||"";if(![W.O.INDEX_GROUP].includes(vt))if(null!==(K=T.mouseEvent)&&void 0!==K&&K.altKey||null!==(J=T.touchEvent)&&void 0!==J&&J.altKey||!E||E.match(/[^0-9]/)||!b.icdt.dataSelect.nodeName.includes(q)){var ft;b.icdt.dataSelect.ids.length&&(b.icdt.dataSelect.ids=[]),(0==(null===(ft=T.mouseEvent)||void 0===ft?void 0:ft.button)||T.touchEvent)&&((T,x)=>{let E=(0,rt.g1)(W.O.SCAN_GROUP,"g"),q=(0,dt.bH)(0,0,1,1);(0,rt.vl)(E,q),((T,x,lt,K)=>{(0,C.A)(T,{start:E=>{},move:(E,q)=>{((E,q,vt,ft)=>{x=(0,dt.bH)(E,q,vt,ft),(0,rt.vl)(lt,x)})(q[0][0],q[0][1],E.x,E.y)},end:(E,q)=>{null==lt||lt.remove(),b.icdt.dataSelect.ids=b.icdt.data.getNodeInArea(Math.min(q[0][0],E.x),Math.min(q[0][1],E.y),Math.max(q[0][0],E.x),Math.max(q[0][1],E.y)),K(b.icdt.dataSelect.nodes)}})})(T,q,E,x)})(T,G)}else{var ct,tt;let P=parseFloat(E||"0");b.icdt.dataSelect.ids=null!==(ct=T.mouseEvent)&&void 0!==ct&&ct.shiftKey||null!==(tt=T.touchEvent)&&void 0!==tt&&tt.shiftKey?[P].concat(b.icdt.dataSelect.ids).filter((Dt,jt,le)=>le.indexOf(Dt)==jt):[P],G(b.icdt.dataSelect.nodes)}},G=T=>{var x,lt;let K=1;var J,nt;if(T.length&&(K=Math.max.apply(null,null!==(J=null===(nt=b.icdt.data.slide)||void 0===nt||null===(nt=nt.svg)||void 0===nt?void 0:nt.nodes.map(q=>{var vt;return null!==(vt=q.idx)&&void 0!==vt?vt:0}))&&void 0!==J?J:[0])+1),1==T.length)T[0].idx||(T[0].idx=K,T[0].time=0);else if(T.length>=0){let q=T.map(ft=>{var ct;return null!==(ct=ft.idx)&&void 0!==ct?ct:0}).filter(ft=>ft>0),vt=q.length?Math.min.apply(null,q):K;T.forEach(ft=>{var ct;ft.idx=vt,ft.time=null!==(ct=ft.time)&&void 0!==ct?ct:0})}let E=(0,rt.g1)(W.O.INDEX_GROUP,"g");(0,rt.mo)(E,null!==(x=null===(lt=b.icdt.data.slide)||void 0===lt||null===(lt=lt.svg)||void 0===lt?void 0:lt.nodes)&&void 0!==x?x:[])},_=T=>{var x,lt,K;null!=T&&null!==(x=T.svg)&&void 0!==x&&x.nodes&&T.svg.nodes.forEach(nt=>{nt.idx=0,nt.time=null});let J=(0,rt.g1)(W.O.INDEX_GROUP,"g");(0,rt.mo)(J,null!==(lt=null===(K=b.icdt.data.slide)||void 0===K||null===(K=K.svg)||void 0===K?void 0:K.nodes)&&void 0!==lt?lt:[])}},4578:(ce,At,f)=>{f.d(At,{h:()=>x,t:()=>lt});var W=f(644),b=f(7308),dt=f(968),C=f(4981),rt=f(666),h=f(2966),S=f(5226),A=f(3423),G=f(5811),_=f(3385);const x=new class T{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:b.s.Escape,fn:()=>{C.icdt.dataSelect.ids.length&&(C.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:b.s.Delete,fn:()=>{C.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:b.s.Space,fn:()=>{C.icdt.pointer.pointer_type_temp=dt._.HAND}},this.onchange={type:"keyup",key:b.s.Space,fn:()=>{C.icdt.pointer.pointer_type_temp=dt._.POINTER}},this.onchange={type:"keydown",key:b.s.ArrowLeft,fn:()=>{C.icdt.dataSelect.ids.length||C.icdt.data.backSlide()}},this.onchange={type:"keydown",key:b.s.ArrowRight,fn:()=>{C.icdt.dataSelect.ids.length||C.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:b.s.ArrowLeft,fn:()=>{C.icdt.dataSelect.ids.length&&(C.icdt.dataSelect.nodes.forEach(J=>{(0,_.k6)(J,(0,G.q)(J.size.x-(0,A.v)(1)))}),1==C.icdt.dataSelect.ids.length?(0,rt.y)(C.icdt.dataSelect.nodes[0]):(0,h.Q)(C.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.s.ArrowRight,fn:()=>{C.icdt.dataSelect.ids.length&&(C.icdt.dataSelect.nodes.forEach(J=>{(0,_.k6)(J,(0,G.q)(J.size.x+(0,A.v)(1)))}),1==C.icdt.dataSelect.ids.length?(0,rt.y)(C.icdt.dataSelect.nodes[0]):(0,h.Q)(C.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.s.ArrowUp,fn:()=>{C.icdt.dataSelect.ids.length&&(C.icdt.dataSelect.nodes.forEach(J=>{(0,_.co)(J,(0,G.q)(J.size.y-(0,A.v)(1)))}),1==C.icdt.dataSelect.ids.length?(0,rt.y)(C.icdt.dataSelect.nodes[0]):(0,h.Q)(C.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.s.ArrowDown,fn:()=>{C.icdt.dataSelect.ids.length&&(C.icdt.dataSelect.nodes.forEach(J=>{(0,_.co)(J,(0,G.q)(J.size.y+(0,A.v)(1)))}),1==C.icdt.dataSelect.ids.length?(0,rt.y)(C.icdt.dataSelect.nodes[0]):(0,h.Q)(C.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.s.Digit1,fn:J=>{J.shiftKey&&(C.icdt.reloadView(),C.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:b.s.KeyA,fn:J=>{if(J.ctrlKey){C.icdt.dataSelect.ids=C.icdt.data.getNodeAll();let nt=C.icdt.dataSelect.nodes;1==nt.length?(0,rt.y)(nt[0]):nt.length>1&&(0,h.Q)(nt)}}},this.onchange={type:"keydown",key:b.s.KeyC,fn:J=>{if(J.ctrlKey){let nt=C.icdt.dataSelect.nodes;nt&&(0,W.yR)({params:{type:"nodes",nodes:nt}})}}},this.onchange={type:"keydown",key:b.s.KeyV,fn:J=>{J.ctrlKey&&(0,W.aY)({callback:nt=>{var E,q;"nodes"==(null==nt?void 0:nt.type)&&null!=nt&&null!==(E=nt.nodes)&&void 0!==E&&E.length&&(null==nt||null===(q=nt.nodes)||void 0===q||q.forEach(vt=>{vt.id=Math.ceil(1e9*Math.random()),C.icdt.data.node=vt}),(0,S.E)(C.icdt.data.slide))}})}},this.onchange={type:"keydown",key:b.s.KeyZ,fn:J=>{J.ctrlKey&&J.shiftKey?C.icdt.history.redo():J.ctrlKey&&C.icdt.history.undo()}}}set onchange(J){let nt=this._fnChanges.find(E=>E.eventType==J.type&&E.eventKey==J.key);nt?nt.fns.push(J.fn):this._fnChanges.push({eventType:J.type,eventKey:J.key,fns:[J.fn]})}change(J,nt,E){var q;null===(q=this._fnChanges.find(vt=>vt.eventType==J&&vt.eventKey==nt))||void 0===q||q.fns.forEach(vt=>vt(E))}},lt=K=>{x.change(K.type,K.keyCode||K.which||K.charCode||0,K)}},410:(ce,At,f)=>{f.d(At,{a:()=>A});var W=f(4318),b=f(8419),dt=f(9054),C=f(4080),rt=f(511),h=f(3423),S=f(1687);class A{constructor(_){var T;let x={stroke:"#FF0000",strokeWidth:(0,h.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,h.v)(8)},{element:K,attribute:J,size:nt}=(0,b.G)(Math.ceil(1e9*Math.random()),{size:_});window.document.getElementById(S.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ct=>null==ct?void 0:ct.remove()),null===(T=window.document.getElementById(S.O.INTERACTIVE_GROUP))||void 0===T||T.appendChild(K),(0,C.__)(K,x);let q="";return{start:ct=>{q=`M ${ct.x} ${ct.y} L ${ct.x} ${ct.y}`},move:(ct,tt)=>{((ct,tt)=>{q+=` ${ct} ${tt}`,K.setAttribute("d",q)})(ct.x,ct.y)},end:(ct,tt)=>{(ct=>{let P=rt.jvg().x(Wt=>Wt[0]).y(Wt=>Wt[1]).curve(rt.$0Z)(ct);K.setAttribute("d",P),ct.length>=2&&(window.interactivePoints=ct)})(tt),(ct=>{let tt=9999,P=9999,Wt=-9999,Dt=-9999;ct.forEach(jt=>{tt=Math.min(tt,jt[0]),P=Math.min(P,jt[1]),Wt=Math.max(Wt,jt[0]),Dt=Math.max(Dt,jt[1])}),nt=(0,W.bH)(tt,P,Wt,Dt,{points:ct}),Object.assign(J,(0,W.sg)(dt.$.PATH,nt),x)})(tt)}}}}},9623:(ce,At,f)=>{f.d(At,{U:()=>K,i:()=>lt});var W=f(1687),b=f(9125),dt=f(4981),C=f(6816),rt=f(4080),h=f(4318),S=f(8419),A=f(9054),G=f(511);class _{constructor(){let nt={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:E,element:q,attribute:vt,size:ft}=(0,S.G)(Math.ceil(1e9*Math.random()));(0,rt.__)(q,vt);let tt="";return{start:Dt=>{tt=`M ${Dt.x} ${Dt.y} L ${Dt.x} ${Dt.y}`},move:(Dt,jt)=>{((Dt,jt)=>{tt+=` ${Dt} ${jt}`,q.setAttribute("d",tt)})(Dt.x,Dt.y)},end:(Dt,jt)=>{(Dt=>{let le=G.jvg().x(Tt=>Tt[0]).y(Tt=>Tt[1]).curve(G.$0Z)(Dt);q.setAttribute("d",le)})(jt),(Dt=>{let jt=9999,le=9999,Tt=-9999,Gt=-9999;Dt.forEach(ut=>{jt=Math.min(jt,ut[0]),le=Math.min(le,ut[1]),Tt=Math.max(Tt,ut[0]),Gt=Math.max(Gt,ut[1])}),ft=(0,h.bH)(jt,le,Tt,Gt,{points:Dt}),Object.assign(vt,(0,h.sg)(A.$.PATH,ft),nt)})(jt),dt.icdt.data.node=Object.assign({id:E,type:A.$.PATH,name:"Path"},{size:ft,attribute:vt})}}}}class T{constructor(){let nt={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:E,element:q,attribute:vt,size:ft}=(0,S.G)(Math.ceil(1e9*Math.random()));(0,rt.__)(q,vt);let tt="";var P=(Wt,Dt)=>{tt+=` ${Wt} ${Dt}`,q.setAttribute("d",tt)};return{start:Wt=>{tt=`M ${Wt.x} ${Wt.y} L ${Wt.x} ${Wt.y}`},move:(Wt,Dt)=>{P(Wt.x,Wt.y)},end:(Wt,Dt)=>{P(Wt.x,Wt.y),(Wt=>{let Dt=9999,jt=9999,le=-9999,Tt=-9999;Wt.forEach(Gt=>{Dt=Math.min(Dt,Gt[0]),jt=Math.min(jt,Gt[1]),le=Math.max(le,Gt[0]),Tt=Math.max(Tt,Gt[1])}),ft=(0,h.bH)(Dt,jt,le,Tt,{points:Wt}),Object.assign(vt,(0,h.sg)(A.$.PATH,ft),nt)})(Dt),dt.icdt.data.node=Object.assign({id:E,type:A.$.PATH,name:"Path"},{size:ft,attribute:vt})}}}}var x=f(410);const lt=J=>{switch(dt.icdt.pointer.pen_type){case b.D.DRAW:(0,C.A)(J,new _);break;case b.D.HIGHTLIGH:(0,C.A)(J,new T);break;case b.D.INTERACTIVE:K(J)}},K=J=>{var nt,E;let q=(0,rt.g1)(W.O.INTERACTIVE_GROUP,"g"),vt=null!==(nt=null===(E=dt.icdt.data.slide)||void 0===E||null===(E=E.svg)||void 0===E?void 0:E.viewBox)&&void 0!==nt?nt:(()=>{let{width:ft,height:ct}=dt.icdt.screen.get;return{x:0,y:0,width:ft,height:ct}})();(0,rt.XH)(q,vt),J&&(0,C.A)(J,new x.a)}},666:(ce,At,f)=>{f.d(At,{y:()=>S});var W=f(1687),b=f(4981),dt=f(4318),C=f(6816),rt=f(4080),h=f(5811);const S=_=>{let T=(0,rt.g1)(W.O.RESIZE_GROUP,"g");(0,rt.hJ)(T,_).forEach(x=>{A(x.element,x.posType,_,T)})},A=(_,T,x,lt)=>{let K=!1;null==_||_.addEventListener("touchstart",J=>{K=!0,G({touchEvent:J},T,x,lt)}),null==_||_.addEventListener("mousedown",J=>{if(0==J.button){if(K)return void(K=!1);G({mouseEvent:J},T,x,lt)}})},G=(_,T,x,lt)=>{let P,{id:K,type:J,size:nt,attribute:E}=x,{x:q,y:vt,width:ft,height:ct}=nt,tt=(ft||1)/(ct||1),Dt=null,Tt=!1;(0,C.A)(_,{start:ut=>{Dt=JSON.parse(JSON.stringify({id:K,size:nt,attribute:E}))},move:(ut,Y)=>{((ut,Y,Et,kt)=>{switch(T){case"rect-center":var Xt,mt;P=null!==(Xt=_.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(mt=_.touchEvent)&&void 0!==mt&&mt.shiftKey?Math.abs(Et-ut)>=Math.abs(kt-Y)?{x:q+Et-ut,y:vt,width:ft,height:ct}:{x:q,y:vt+kt-Y,width:ft,height:ct}:{x:q+Et-ut,y:vt+kt-Y,width:ft,height:ct};break;case"rect-top-left":var ne,F,L,u,V,pt,gt,St;P=(null!==(ne=_.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(F=_.touchEvent)&&void 0!==F&&F.shiftKey)&&(null!==(L=_.mouseEvent)&&void 0!==L&&L.altKey||null!==(u=_.touchEvent)&&void 0!==u&&u.altKey)?tt>=1?{x:q+(Et-ut),y:vt+(Et-ut)/tt,width:ft-2*(Et-ut),height:ct-2*(Et-ut)/tt}:{x:q+(kt-Y)*tt,y:vt+(kt-Y),width:ft-2*(kt-Y)*tt,height:ct-2*(kt-Y)}:null!==(V=_.mouseEvent)&&void 0!==V&&V.shiftKey||null!==(pt=_.touchEvent)&&void 0!==pt&&pt.shiftKey?tt>=1?{x:q+(Et-ut),y:vt+(Et-ut)/tt,width:ft-(Et-ut),height:ct-(Et-ut)/tt}:{x:q+(kt-Y)*tt,y:vt+(kt-Y),width:ft-(kt-Y)*tt,height:ct-(kt-Y)}:null!==(gt=_.mouseEvent)&&void 0!==gt&&gt.altKey||null!==(St=_.touchEvent)&&void 0!==St&&St.altKey?{x:q+(Et-ut),y:vt+(kt-Y),width:ft-2*(Et-ut),height:ct-2*(kt-Y)}:{x:q+(Et-ut),y:vt+(kt-Y),width:ft-(Et-ut),height:ct-(kt-Y)};break;case"rect-top-right":var Ft,Bt,Ot,bt,qt,Lt,re,j;P=(null!==(Ft=_.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(Bt=_.touchEvent)&&void 0!==Bt&&Bt.shiftKey)&&(null!==(Ot=_.mouseEvent)&&void 0!==Ot&&Ot.altKey||null!==(bt=_.touchEvent)&&void 0!==bt&&bt.altKey)?tt>=1?{x:q-(Et-ut),y:vt-(Et-ut)/tt,width:ft+2*(Et-ut),height:ct+2*(Et-ut)/tt}:{x:q+(kt-Y)*tt,y:vt+(kt-Y),width:ft-2*(kt-Y)*tt,height:ct-2*(kt-Y)}:null!==(qt=_.mouseEvent)&&void 0!==qt&&qt.shiftKey||null!==(Lt=_.touchEvent)&&void 0!==Lt&&Lt.shiftKey?tt>=1?{x:q,y:vt-(Et-ut)/tt,width:ft+(Et-ut),height:ct+(Et-ut)/tt}:{x:q,y:vt+(kt-Y),width:ft-(kt-Y)*tt,height:ct-(kt-Y)}:null!==(re=_.mouseEvent)&&void 0!==re&&re.altKey||null!==(j=_.touchEvent)&&void 0!==j&&j.altKey?{x:q-(Et-ut),y:vt+(kt-Y),width:ft+2*(Et-ut),height:ct-2*(kt-Y)}:{x:q,y:vt+(kt-Y),width:ft+(Et-ut),height:ct-(kt-Y)};break;case"rect-bottom-left":var d,k,Q,H,B,N,Z,I;P=(null!==(d=_.mouseEvent)&&void 0!==d&&d.shiftKey||null!==(k=_.touchEvent)&&void 0!==k&&k.shiftKey)&&(null!==(Q=_.mouseEvent)&&void 0!==Q&&Q.altKey||null!==(H=_.touchEvent)&&void 0!==H&&H.altKey)?tt>=1?{x:q+(Et-ut),y:vt+(Et-ut)/tt,width:ft-2*(Et-ut),height:ct-2*(Et-ut)/tt}:{x:q-(kt-Y)*tt,y:vt-(kt-Y),width:ft+2*(kt-Y)*tt,height:ct+2*(kt-Y)}:null!==(B=_.mouseEvent)&&void 0!==B&&B.shiftKey||null!==(N=_.touchEvent)&&void 0!==N&&N.shiftKey?tt>=1?{x:q+(Et-ut),y:vt,width:ft-(Et-ut),height:ct-(Et-ut)/tt}:{x:q-(kt-Y)*tt,y:vt,width:ft+(kt-Y)*tt,height:ct+(kt-Y)}:null!==(Z=_.mouseEvent)&&void 0!==Z&&Z.altKey||null!==(I=_.touchEvent)&&void 0!==I&&I.altKey?{x:q+(Et-ut),y:vt-(kt-Y),width:ft-2*(Et-ut),height:ct+2*(kt-Y)}:{x:q+(Et-ut),y:vt,width:ft-(Et-ut),height:ct+(kt-Y)};break;case"rect-bottom-right":var X,_t,Pt,wt,It,Jt,zt,Zt;P=(null!==(X=_.mouseEvent)&&void 0!==X&&X.shiftKey||null!==(_t=_.touchEvent)&&void 0!==_t&&_t.shiftKey)&&(null!==(Pt=_.mouseEvent)&&void 0!==Pt&&Pt.altKey||null!==(wt=_.touchEvent)&&void 0!==wt&&wt.altKey)?tt>=1?{x:q-(Et-ut),y:vt-(Et-ut)/tt,width:ft+2*(Et-ut),height:ct+2*(Et-ut)/tt}:{x:q-(kt-Y)*tt,y:vt-(kt-Y),width:ft+2*(kt-Y)*tt,height:ct+2*(kt-Y)}:null!==(It=_.mouseEvent)&&void 0!==It&&It.shiftKey||null!==(Jt=_.touchEvent)&&void 0!==Jt&&Jt.shiftKey?tt>=1?{x:q,y:vt,width:ft+(Et-ut),height:ct+(Et-ut)/tt}:{x:q,y:vt,width:ft+(kt-Y)*tt,height:ct+(kt-Y)}:null!==(zt=_.mouseEvent)&&void 0!==zt&&zt.altKey||null!==(Zt=_.touchEvent)&&void 0!==Zt&&Zt.altKey?{x:q-(Et-ut),y:vt-(kt-Y),width:ft+2*(Et-ut),height:ct+2*(kt-Y)}:{x:q,y:vt,width:ft+(Et-ut),height:ct+(kt-Y)};break;default:P={x:q+Et-ut,y:vt+kt-Y,width:ft,height:ct}}P.width<0&&(P.width=0),P.height<0&&(P.height=0),P.x=(0,h.q)(P.x),P.y=(0,h.q)(P.y),P.width=(0,h.q)(P.width),P.height=(0,h.q)(P.height),Object.assign(nt,P),Object.assign(E,(0,dt.sg)(J,nt)),(0,rt.__)(window.document.getElementById(K),E),(0,rt.hJ)(lt,x)})(Y[0][0],Y[0][1],ut.x,ut.y),Tt=!0},end:(ut,Y)=>{Tt&&Dt&&b.icdt.history.push([{type:"size",from:Dt,to:JSON.parse(JSON.stringify({id:K,size:nt,attribute:E}))}])}})}},2966:(ce,At,f)=>{f.d(At,{Q:()=>A});var W=f(1687),b=f(4981),dt=f(4318),C=f(6816),rt=f(4080),h=f(3423),S=f(5811);const A=T=>{let x=999999,lt=999999,K=-999999,J=-999999;null==T||T.forEach(q=>{x=Math.min(x,q.size.x),lt=Math.min(lt,q.size.y),K=Math.max(K,q.size.x+q.size.width),J=Math.max(J,q.size.y+q.size.height)});let nt=(0,rt.g1)(W.O.SELECT_GROUP,"g"),E=(0,dt.bH)(x,lt,K,J);(0,rt.yD)(nt,T,E).forEach(q=>{G(q.element,q.posType,E,T,nt)})},G=(T,x,lt,K,J)=>{let nt=!1;null==T||T.addEventListener("touchstart",E=>{nt=!0,_({touchEvent:E},x,lt,K,J)}),null==T||T.addEventListener("mousedown",E=>{if(0==E.button){if(nt)return void(nt=!1);_({mouseEvent:E},x,lt,K,J)}})},_=(T,x,lt,K,J)=>{let{x:nt,y:E,width:q,height:vt}=lt,ft=K.map(jt=>Object.assign({},jt.size)),tt=[];(0,C.A)(T,{start:jt=>{K.forEach((jt,le)=>{let{id:Tt,size:ut,attribute:Y}=jt;tt.push(JSON.parse(JSON.stringify({id:Tt,size:ut,attribute:Y})))})},move:(jt,le)=>{((jt,le,Tt,Gt)=>{(()=>{let ut;ut="rect-center"===x?{x:nt+Tt-jt,y:E+Gt-le,width:q,height:vt}:{x:nt,y:E,width:q,height:vt},(0,h.v)(b.icdt.screen.width),(0,h.v)(b.icdt.screen.height),ut.width<0&&(ut.width=0),ut.height<0&&(ut.height=0),Object.assign(lt,ut),(0,rt.yD)(J,K,lt)})(),K.forEach((ut,Y)=>{let V,{x:Et,y:kt,width:Xt,height:mt}=ft[Y],{id:ne,type:F,size:L,attribute:u}=ut;V="rect-center"===x?{x:Et+Tt-jt,y:kt+Gt-le,width:Xt,height:mt}:{x:Et,y:kt,width:Xt,height:mt},(0,h.v)(b.icdt.screen.width),(0,h.v)(b.icdt.screen.height),V.width<0&&(V.width=0),V.height<0&&(V.height=0),V.x=(0,S.q)(V.x),V.y=(0,S.q)(V.y),V.width=(0,S.q)(V.width),V.height=(0,S.q)(V.height),Object.assign(L,V),Object.assign(u,(0,dt.sg)(F,L)),(0,rt.__)(window.document.getElementById(ne),u)})})(le[0][0],le[0][1],jt.x,jt.y)},end:(jt,le)=>{tt.length&&b.icdt.history.push(K.map((jt,le)=>{let{id:Tt,size:ut,attribute:Y}=jt;return{type:"size",from:tt[le],to:JSON.parse(JSON.stringify({id:Tt,size:ut,attribute:Y}))}}))}})}},5226:(ce,At,f)=>{f.d(At,{E:()=>J,T:()=>nt});var W=f(1687),b=f(8619),dt=f(8785),C=f(2282),rt=f(8054),h=f(4921),S=f(6358),A=f(9054),G=f(8419),_=f(1105),T=f(2875),x=f(7210),lt=f(4981),K=f(4080);const J=(E,q)=>{var vt;if(q&&!window.document.getElementById(q))return;if("localhost"==location.hostname&&console.log("aaaaaaaaaaaaaaa s\u1ee3 qu\xe1 \u0111iiiiiiiiiiiiiiiiiiiiiiiiiii!",q),q){let ct=window.document.getElementById(q);jQuery(ct).find("#"+W.O.BACKGROUND_GROUP).empty();let tt=(0,K.g1)(W.O.BACKGROUND_GROUP,"g",void 0,ct);(0,K.x0)(tt,E)}else{jQuery(lt.icdt.target).find("#"+W.O.BACKGROUND_GROUP).empty();let ct=(0,K.g1)(W.O.BACKGROUND_GROUP,"g",void 0,lt.icdt.target);(0,K.x0)(ct,E)}let ft=(ct,tt)=>{tt=tt?parseFloat(`${q}0${tt}`):q,null==ct||ct.forEach(P=>{let Wt=q?parseFloat(`${q}0${P.id}`):P.id;var Dt;if(P.isdeleted)null===(Dt=window.document.getElementById(Wt))||void 0===Dt||Dt.remove();else switch(P.type){case A.$.GROUP:(0,S.m)(Wt,{},tt?window.document.getElementById(tt):null),ft(P.nodes,P.id);break;case A.$.CIRCLE:(0,b._)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case A.$.ELLIPSE:(0,dt.r)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case A.$.LINE:(0,h.W)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case A.$.RECT:(0,rt.f)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case A.$.POLYGON:(0,C.l)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case A.$.FOREIGNOBJECT:(0,T.e)(Wt,{size:P.size,attribute:P.attribute,style:P.style,source:P.source},tt?window.document.getElementById(tt):null);break;case A.$.IMAGE:(0,x.G)(Wt,{size:P.size,attribute:P.attribute,source:P.source},tt?window.document.getElementById(tt):null);break;case A.$.TEXT:(0,_.$)(Wt,{size:P.size,attribute:P.attribute,source:P.source},tt?window.document.getElementById(tt):null);break;case A.$.PATH:(0,G.G)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null)}})};ft(null==E||null===(vt=E.svg)||void 0===vt?void 0:vt.nodes)},nt=(E,q)=>{var vt;if(q&&!window.document.getElementById(q))return;let ft=(ct,tt)=>{tt=tt?parseFloat(`${q}0${tt}`):q,null==ct||ct.forEach(P=>{let Wt=q?parseFloat(`${q}0${P.id}`):P.id;jQuery("#"+Wt).appendTo(tt?window.document.getElementById(tt):lt.icdt.target),P.type==A.$.GROUP&&ft(P.nodes,P.id)})};ft(null==E||null===(vt=E.svg)||void 0===vt?void 0:vt.nodes)}},8619:(ce,At,f)=>{f.d(At,{_:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{fill:b.icdt.attribute.fill,stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth};return Object.assign(_,(0,dt.sg)(W.$.CIRCLE,G)),{nodeId:h,element:(0,C.it)(h,W.$.CIRCLE,"circle",{size:G,attribute:_},A),size:G,attribute:_}}},8785:(ce,At,f)=>{f.d(At,{r:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{fill:b.icdt.attribute.fill,stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth};return Object.assign(_,(0,dt.sg)(W.$.ELLIPSE,G)),{nodeId:h,element:(0,C.it)(h,W.$.ELLIPSE,"ellipse",{size:G,attribute:_},A),size:G,attribute:_}}},2875:(ce,At,f)=>{f.d(At,{e:()=>C});var W=f(9054),b=f(4318),dt=f(4080);const C=(rt,h,S)=>{let A=(null==h?void 0:h.size)||{x:0,y:0,width:180,height:180},G=(null==h?void 0:h.attribute)||{};Object.assign(G,(0,b.sg)(W.$.FOREIGNOBJECT,A));let _=(null==h?void 0:h.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},T=(null==h?void 0:h.style)||{};return{nodeId:rt,element:(0,dt.it)(rt,W.$.FOREIGNOBJECT,"foreignObject",{size:A,attribute:G,style:T,source:_},S),size:A,attribute:G,style:T,source:_}}},6358:(ce,At,f)=>{f.d(At,{m:()=>C});var W=f(9054),b=f(4318),dt=f(4080);const C=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{};return Object.assign(_,(0,b.sg)(W.$.GROUP,G)),{nodeId:h,element:(0,dt.it)(h,W.$.GROUP,"g",{size:G,attribute:_},A),size:G,attribute:_}}},7210:(ce,At,f)=>{f.d(At,{G:()=>C});var W=f(9054),b=f(4318),dt=f(4080);const C=(rt,h,S)=>{let A=(null==h?void 0:h.size)||{x:0,y:0,width:100,height:100},G=(null==h?void 0:h.attribute)||{preserveAspectRatio:"none"};Object.assign(G,(0,b.sg)(W.$.IMAGE,A));let _=(null==h?void 0:h.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:rt,element:(0,dt.it)(rt,W.$.IMAGE,"image",{size:A,attribute:G,source:_},S),size:A,attribute:G,source:_}}},4921:(ce,At,f)=>{f.d(At,{W:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth,strokeLinecap:b.icdt.attribute.strokeLinecap};return Object.assign(_,(0,dt.sg)(W.$.LINE,G)),{nodeId:h,element:(0,C.it)(h,W.$.LINE,"line",{size:G,attribute:_},A),size:G,attribute:_}}},8419:(ce,At,f)=>{f.d(At,{G:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth};return Object.assign(_,(0,dt.sg)(W.$.PATH,G)),{nodeId:h,element:(0,C.it)(h,W.$.PATH,"path",{size:G,attribute:_},A),size:G,attribute:_}}},2282:(ce,At,f)=>{f.d(At,{l:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{fill:b.icdt.attribute.fill,stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth};return Object.assign(_,(0,dt.sg)(W.$.POLYGON,G)),{nodeId:h,element:(0,C.it)(h,W.$.POLYGON,"polygon",{size:G,attribute:_},A),size:G,attribute:_}}},8054:(ce,At,f)=>{f.d(At,{f:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},_=(null==S?void 0:S.attribute)||{fill:b.icdt.attribute.fill,stroke:b.icdt.attribute.stroke,strokeWidth:b.icdt.attribute.strokeWidth};return Object.assign(_,(0,dt.sg)(W.$.RECT,G)),{nodeId:h,element:(0,C.it)(h,W.$.RECT,"rect",{size:G,attribute:_},A),size:G,attribute:_}}},1105:(ce,At,f)=>{f.d(At,{$:()=>rt});var W=f(9054),b=f(4981),dt=f(4318),C=f(4080);const rt=(h,S,A)=>{let G=(null==S?void 0:S.size)||{x:0,y:0,width:100,height:50},_=(null==S?void 0:S.attribute)||{fill:b.icdt.attribute.stroke,fontFamily:b.icdt.attribute.fontFamily,fontSize:b.icdt.attribute.fontSize,textLength:b.icdt.attribute.textLength};Object.assign(_,(0,dt.sg)(W.$.TEXT,G));let T=(null==S?void 0:S.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:h,element:(0,C.it)(h,W.$.TEXT,"text",{size:G,attribute:_,source:T},A),size:G,attribute:_,source:T}}},4318:(ce,At,f)=>{f.d(At,{bH:()=>b,sg:()=>dt});var W=f(9054);const b=(rt,h,S,A,G)=>{let _={x:Math.min(rt,S),y:Math.min(h,A),width:Math.abs(S-rt)||1,height:Math.abs(A-h)||1};return null!=G&&G.ratio&&(_.width<=_.height?_.height=_.width*(null==G?void 0:G.ratio):_.width=_.height/(null==G?void 0:G.ratio)),Object.assign(_,{ratios:(null==G?void 0:G.ratios)||[[(rt-_.x)/(_.width||1),(h-_.y)/(_.height||1)],[(S-_.x)/(_.width||1),(A-_.y)/(_.height||1)]]}),null!=G&&G.points&&(_.points=null==G?void 0:G.points),_},dt=(rt,h,S)=>{var A=(()=>{switch(rt){case W.$.CIRCLE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,r:Math.min(h.width/2,h.height/2)};case W.$.ELLIPSE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2};case W.$.LINE:{var G;let x={};return null===(G=h.ratios)||void 0===G||G.forEach((lt,K)=>{x[`x${K+1}`]=h.x+h.width*lt[0],x[`y${K+1}`]=h.y+h.height*lt[1]}),x}case W.$.RECT:return{x:h.x,y:h.y,width:h.width,height:h.height};case W.$.POLYGON:var _;return{points:((null===(_=h.ratios)||void 0===_?void 0:_.map(x=>[h.x+h.width*x[0],h.y+h.height*x[1]]))||[]).map(x=>x.join(" ")).join(",")};case W.$.FOREIGNOBJECT:case W.$.IMAGE:return{x:h.x,y:h.y,width:h.width,height:h.height};case W.$.TEXT:return{x:h.x,y:h.y};case W.$.PATH:{var T;let x=null!==(T=h.points)&&void 0!==T?T:[];return x.length?{d:`M ${x[0][0]} ${x[0][1]} L `+(x.map(lt=>[lt[0],lt[1]])||[]).map(lt=>lt.join(" ")).join(" ")}:{d:""}}}return{}})();return h.rotate?(A.transform=`rotate(${h.rotate})`,A.transformOrigin=`${h.x+h.width/2} ${h.y+h.height/2}`):(A.transform=null,A.transformOrigin=null),A}},5811:(ce,At,f)=>{f.d(At,{q:()=>W});const W=(b,dt)=>{var C;return dt=null!==(C=dt)&&void 0!==C?C:100,Math.round((b+Number.EPSILON)*dt)/dt}},3423:(ce,At,f)=>{f.d(At,{v:()=>dt});var W=f(4981),b=f(5811);const dt=C=>(0,b.q)(C/W.icdt.screen.scale)},3385:(ce,At,f)=>{f.d(At,{Vs:()=>A,co:()=>h,k6:()=>rt,lO:()=>S,mr:()=>G});var W=f(4981),b=f(4080),dt=f(4318),C=f(5811);const rt=(_,T)=>{let{id:x,type:lt,size:K,attribute:J}=_,nt=JSON.parse(JSON.stringify({id:x,size:K,attribute:J}));K.x=(0,C.q)(T),Object.assign(J,(0,dt.sg)(lt,K)),(0,b.__)(window.document.getElementById(x),J),W.icdt.history.push([{type:"size",from:nt,to:JSON.parse(JSON.stringify({id:x,size:K,attribute:J}))}])},h=(_,T)=>{let{id:x,type:lt,size:K,attribute:J}=_,nt=JSON.parse(JSON.stringify({id:x,size:K,attribute:J}));K.y=(0,C.q)(T),Object.assign(J,(0,dt.sg)(lt,K)),(0,b.__)(window.document.getElementById(x),J),W.icdt.history.push([{type:"size",from:nt,to:JSON.parse(JSON.stringify({id:x,size:K,attribute:J}))}])},S=(_,T,x)=>{let{id:lt,type:K,size:J,attribute:nt}=_,E=JSON.parse(JSON.stringify({id:lt,size:J,attribute:nt}));x&&(J.height=(0,C.q)(T*J.height/J.width)),J.width=(0,C.q)(T),Object.assign(nt,(0,dt.sg)(K,J)),(0,b.__)(window.document.getElementById(lt),nt),W.icdt.history.push([{type:"size",from:E,to:JSON.parse(JSON.stringify({id:lt,size:J,attribute:nt}))}])},A=(_,T,x)=>{let{id:lt,type:K,size:J,attribute:nt}=_,E=JSON.parse(JSON.stringify({id:lt,size:J,attribute:nt}));x&&(J.width=(0,C.q)(T*J.width/J.height)),J.height=(0,C.q)(T),Object.assign(nt,(0,dt.sg)(K,J)),(0,b.__)(window.document.getElementById(lt),nt),W.icdt.history.push([{type:"size",from:E,to:JSON.parse(JSON.stringify({id:lt,size:J,attribute:nt}))}])},G=(_,T)=>{let{id:x,type:lt,size:K,attribute:J}=_,nt=JSON.parse(JSON.stringify({id:x,size:K,attribute:J}));K.rotate=(0,C.q)(T),Object.assign(J,(0,dt.sg)(lt,K)),(0,b.__)(window.document.getElementById(x),J),W.icdt.history.push([{type:"size",from:nt,to:JSON.parse(JSON.stringify({id:x,size:K,attribute:J}))}])}},6816:(ce,At,f)=>{f.d(At,{A:()=>h});var W=f(968),b=f(4981);class dt{constructor(A){this._points=[],this._options=A}start(A){this._points.length=0,this._points.push([A.x,A.y]),this._options.start(A)}move(A){this._points.push([A.x,A.y]),this._options.move(A,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(A=this._points[0])[0],y:A[1]}:{x:0,y:0};var A}get offsetLast(){return this._points.length>=1?{x:(A=this._points[this._points.length-1])[0],y:A[1]}:{x:0,y:0};var A}}var C=f(7797);const h=(S,A,G,_,T)=>{var x,lt,K;let J=null,nt=0,E=0;S.mouseEvent?(J=S.mouseEvent.target,nt=S.mouseEvent.offsetX,E=S.mouseEvent.offsetY):S.touchEvent&&(J=S.touchEvent.target,S.touchEvent.touches.length&&(nt=S.touchEvent.touches[0].clientX,E=S.touchEvent.touches[0].clientY));let q=null!=G?G:b.icdt.screen.scale,vt=null!=_?_:b.icdt.screen.dislocation,ft=null!=T?T:b.icdt.screen.offset,ct=()=>{};var tt=new dt({start:null!==(x=null==A?void 0:A.start)&&void 0!==x?x:ct,move:null!==(lt=null==A?void 0:A.move)&&void 0!==lt?lt:ct,end:null!==(K=null==A?void 0:A.end)&&void 0!==K?K:ct});S.mouseEvent?tt.start((0,C.p)({x:nt,y:E},q,vt,{x:0,y:0})):S.touchEvent&&tt.start((0,C.p)({x:nt,y:E},q,vt,ft));let P=ut=>{tt.move((0,C.p)({x:ut.clientX,y:ut.clientY},q,vt,ft))},Wt=ut=>{tt.end(),[W._.SHAPE,W._.FOREIGNOBJECT,W._.IMAGE,W._.TEXT].includes(b.icdt.pointer.pointer_type)&&(ut.shiftKey||(b.icdt.pointer.pointer_type=W._.POINTER))},Dt=ut=>{ut.touches.length&&P({clientX:ut.touches[0].clientX,clientY:ut.touches[0].clientY})},jt=ut=>{Wt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("touchmove",Dt,!1),window.removeEventListener("touchend",jt,!1)},le=ut=>{0==ut.button&&P({clientX:ut.clientX,clientY:ut.clientY})},Tt=ut=>{0==ut.button&&(Wt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("mousemove",le,!1),window.removeEventListener("mouseup",Tt,!1))};if(S.mouseEvent)window.addEventListener("mousemove",le,!1),window.addEventListener("mouseup",Tt,!1);else if(S.touchEvent){var Gt;window.addEventListener("touchmove",Dt,!1),window.addEventListener("touchend",jt,!1),null===(Gt=J)||void 0===Gt||Gt.addEventListener("touchmove",function(ut){ut.preventDefault()})}}},7797:(ce,At,f)=>{f.d(At,{p:()=>b});var W=f(5811);const b=(dt,C,rt,h)=>(dt.x-=h.x,dt.y-=h.y,dt.x/=C,dt.y/=C,dt.x-=rt.x,dt.y-=rt.y,dt.x=(0,W.q)(dt.x),dt.y=(0,W.q)(dt.y),dt)},1690:(ce,At,f)=>{f.d(At,{$:()=>Lt,U:()=>re});var W=f(1687),b=f(4981),dt=f(9054),C=f(5973),rt=f(2336),h=f(861),S=f(157),A=f(4787),_=f(1105),T=f(6358);const q=function(j){var d,k,Q=jQuery("#"+j),H=null===(d=Q.attr("class"))||void 0===d?void 0:d.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),B=null===(k=Q.attr("class"))||void 0===k?void 0:k.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);H&&H.forEach(function(Z){jQuery(Q).removeClass(Z)}),B&&B.forEach(function(Z){jQuery(Q).removeClass(Z)});let N=Q.attr("data-class");N&&(Q.attr("class",N),Q.removeAttr("data-class")),jQuery(Q).data("animation-running",!1)};var vt=f(7210),ft=f(5811);const ct=(j,d,k)=>{var Q,H,B,N;let Z=1,I=new Image;I.onload=()=>{var X,_t,Pt,wt;Z=(0,ft.q)(I.naturalWidth/I.naturalHeight,100);let It=0,Jt=0,zt=0,Zt=0;var Yt,oe,_e,ve;Z>=1?(zt=Math.min(I.naturalWidth,null!==(Yt=null===(oe=Lt.slide.svg)||void 0===oe||null===(oe=oe.viewBox)||void 0===oe?void 0:oe.width)&&void 0!==Yt?Yt:0),Zt=zt/Z):(Zt=Math.min(I.naturalHeight,null!==(_e=null===(ve=Lt.slide.svg)||void 0===ve||null===(ve=ve.viewBox)||void 0===ve?void 0:ve.height)&&void 0!==_e?_e:0),zt=Zt/Z),It=((null!==(X=null===(_t=Lt.slide.svg)||void 0===_t||null===(_t=_t.viewBox)||void 0===_t?void 0:_t.width)&&void 0!==X?X:0)-zt)/2,Jt=((null!==(Pt=null===(wt=Lt.slide.svg)||void 0===wt||null===(wt=wt.viewBox)||void 0===wt?void 0:wt.height)&&void 0!==Pt?Pt:0)-Zt)/2,d.size={x:It,y:Jt,width:zt,height:Zt},tt(d,k)},I.onerror=X=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,X)},I.src=(null!==(Q=d.source)&&void 0!==Q&&Q.path?(null===(H=b.icdt.config)||void 0===H?void 0:H.readfileuploadurl)+(null===(B=d.source)||void 0===B?void 0:B.path):null===(N=d.source)||void 0===N?void 0:N.url)||""},tt=(j,d)=>{if(j.slideStatus!=Lt.slideStatus)return void d();let{element:k}=(0,vt.G)(Math.ceil(1e9*Math.random()),{size:j.size,source:{type:"image",image:null==j?void 0:j.source}});setTimeout(()=>{null==k||k.remove(),d()},3e3)},P=(j,d,k)=>{var Q,H,B,N;let Z=new Image;Z.onload=()=>{Wt(j,{width:Z.naturalWidth,height:Z.naturalHeight},d,k)},Z.onerror=I=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,I),k()},Z.src=(null!==(Q=d.source)&&void 0!==Q&&Q.path?(null===(H=b.icdt.config)||void 0===H?void 0:H.readfileuploadurl)+(null===(B=d.source)||void 0===B?void 0:B.path):null===(N=d.source)||void 0===N?void 0:N.url)||""},Wt=(j,d,k,Q)=>{if(k.slideStatus!=Lt.slideStatus)return void Q();let H=(0,ft.q)(d.width/d.height,100),B=0,N=0,Z=0,I=0;H>=1?(Z=d.width,Z=Math.max(Z,40),Z=Math.min(Z,100),I=Z/H):(I=d.height,I=Math.max(I,40),I=Math.min(I,100),Z=I/H);let{size:X}=j;B=X.x+X.width/2-Z/2,N=X.y+X.height/2-I/2;let{element:_t}=(0,vt.G)(Math.ceil(1e9*Math.random()),{size:{x:B,y:N,width:Z,height:I},source:{type:"image",image:null==k?void 0:k.source}});setTimeout(()=>{null==_t||_t.remove(),Q()},3e3)};var Dt=f(4080);const jt=(j,d,k)=>{var Q,H,B,N,Z,I,X;if(d.slideStatus!=Lt.slideStatus)return void k();if(!(null!==(Q=d.source)&&void 0!==Q&&Q.path||null!==(H=d.source)&&void 0!==H&&H.url))return console.warn(`${j.id} -> audio no source!`),void k();var _t=jQuery("#"+j.id);let Pt=null!==(B=d.iteration)&&void 0!==B?B:0;if(Pt<0&&(k(),k=function(){}),!(_t.data("audio-running")&&Pt<0)){_t.data("audio-running",!0);var wt=new Audio;return wt.autoplay=!0,wt.loop=0!=Pt,wt.preload="auto",wt.controls=!0,wt.setAttributeNode(document.createAttribute("playsinline")),wt.addEventListener("canplay",function(){var It=wt.play();It&&It.then(function(Jt){_t.data("audio-running",!0)}).catch(function(Jt){_t.data("audio-running",!1),d.slideStatus===Lt.slideStatus&&k()})}),wt.addEventListener("timeupdate",function(){var Jt;d.slideStatus!==Lt.slideStatus&&((Jt=this).pause(),Jt.remove(),_t.data("audio-running",!1))}),wt.addEventListener("canplaythrough",function(){this.loop&&(Pt>0?Pt--:0==Pt&&(this.loop=!1))}),wt.addEventListener("play",function(){}),wt.addEventListener("pause",function(){}),wt.addEventListener("ended",function(){this.remove(),_t.data("audio-running",!1),d.slideStatus===Lt.slideStatus&&k()}),wt.onerror=function(){this.remove(),_t.data("audio-running",!1),d.slideStatus===Lt.slideStatus&&k()},wt.src=(null!==(N=d.source)&&void 0!==N&&N.path?(null===(Z=b.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)+(null===(I=d.source)||void 0===I?void 0:I.path):null===(X=d.source)||void 0===X?void 0:X.url)||"",wt}};var le=f(9942);const Xt=(j,d,k)=>{var Q;null===(Q=d.test)||void 0===Q||null===(Q=Q.answer)||void 0===Q||null===(Q=Q.matching)||void 0===Q||Q.filter(H=>H.value==k.key).forEach(H=>H.value="")},ne=(j,d,k,Q,H,B)=>{var N,Z,I,X,_t,Pt,wt,It,Jt,zt,Zt,Yt;H.iscorrect?(null!==(N=d.test)&&void 0!==N&&null!==(N=N.audiotrue)&&void 0!==N&&N.path&&jt(j,{source:(0,le.I)(null===(X=d.test)||void 0===X?void 0:X.audiotrue),iteration:0,nodeStatus:k,slideStatus:Q},B),null!==(Z=d.test)&&void 0!==Z&&null!==(Z=Z.icontrue)&&void 0!==Z&&Z.path&&P(j,{source:(0,le.I)(null===(_t=d.test)||void 0===_t?void 0:_t.icontrue),iteration:0,nodeStatus:k,slideStatus:Q},B),null!==(I=d.test)&&void 0!==I&&null!==(I=I.effecttrue)&&void 0!==I&&I.path&&ct(0,{source:(0,le.I)(null===(Pt=d.test)||void 0===Pt?void 0:Pt.effecttrue),iteration:0,nodeStatus:k,slideStatus:Q},B)):(null!==(wt=d.test)&&void 0!==wt&&null!==(wt=wt.audiofalse)&&void 0!==wt&&wt.path&&jt(j,{source:(0,le.I)(null===(zt=d.test)||void 0===zt?void 0:zt.audiofalse),iteration:0,nodeStatus:k,slideStatus:Q},B),null!==(It=d.test)&&void 0!==It&&null!==(It=It.iconfalse)&&void 0!==It&&It.path&&P(j,{source:(0,le.I)(null===(Zt=d.test)||void 0===Zt?void 0:Zt.iconfalse),iteration:0,nodeStatus:k,slideStatus:Q},B),null!==(Jt=d.test)&&void 0!==Jt&&null!==(Jt=Jt.effectfalse)&&void 0!==Jt&&Jt.path&&ct(0,{source:(0,le.I)(null===(Yt=d.test)||void 0===Yt?void 0:Yt.effectfalse),iteration:0,nodeStatus:k,slideStatus:Q},B))},F=(j,d,k,Q)=>{var H,B,N,Z,I,X,Pt,It,wt;null!==(H=d.animate)&&void 0!==H&&H.value&&((j,d,k)=>{var Q,H;let{value:N}=null!==(Q=j.animate)&&void 0!==Q?Q:{};((j,d,k)=>{var Q;let H=jQuery("#"+j),B="",N=null!==(Q=d.iteration)&&void 0!==Q?Q:0,Z=[];(d.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?Z.push(d.value):d.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(d.value)?(Z.push("animation"),Z.push(`animation-${d.value}`)):(Z.push("animate__animated"),Z.push(`animate__${d.value}`)):(Z.push("animation"),Z.push("animation-fadein")),N<0?(Z.push("animation-iteration-infinite"),k(),k=function(){}):N>0&&Z.push("animation-iteration-"+(N+1)),B=Z.join(" "),function(X){let _t=function(){H.data("animate-running")?H.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){H.data("animate-running",!1),setTimeout(function(){X()},100)}):X()};H.hasClass("animation")?setTimeout(function(){_t()}):_t()}(function(){var X;q(j),(N>0||N<0)&&H.one("animationiteration",function(){d.slideStatus===Lt.slideStatus||(H.data("animate-running",!1),q(j),d.slideStatus===Lt.slideStatus&&k())}),H.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(H.data("animate-running",!1),q(j),d.finish){default:case 0:case 1:break;case 2:H.addClass("hide")}d.slideStatus===Lt.slideStatus&&k()}),H.attr("data-class",null!==(X=H.attr("class"))&&void 0!==X?X:""),H.addClass(B),H.data("animate-running",!0)})})(null!==(H=j.pid)&&void 0!==H?H:0,{value:N,nodeStatus:d,slideStatus:k},()=>{})})(d,k.nodeStatus,k.slideStatus),null!==(B=d.interactive)&&void 0!==B&&B.show?((j,d,k,Q)=>{var H,B,N;console.log("icdt_Run_Interactive_NodeShow",j,d,k);let Z={total:0,counter:0},{triggershow:I,triggerrun:X,triggerhide:_t,action:Pt,audio:wt}=null!==(H=null===(B=j.interactive)||void 0===B?void 0:B.show)&&void 0!==H?H:{};if(I){let{id:zt,ids:Zt,time:Yt,async:oe}=I;"asynctrue"==oe?setTimeout(()=>{(0,A.L5)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,A.L5)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}if(X){let{id:zt,ids:Zt,time:Yt,async:oe}=X;"asynctrue"==oe?setTimeout(()=>{(0,A.Ar)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,A.Ar)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}if(_t){let{id:zt,ids:Zt,time:Yt,async:oe}=_t;"asynctrue"==oe?setTimeout(()=>{(0,A.WT)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}):"time"==oe&&setTimeout(()=>{(0,A.WT)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})},1e3*(null!=Yt?Yt:0))}let It=()=>{setTimeout(()=>{if(Z.counter>=Z.total){if(Q&&Q(),I){let{id:zt,ids:Zt,async:Yt}=I;"asyncfalse"==Yt&&(0,A.L5)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}if(X){let{id:zt,ids:Zt,async:Yt}=X;"asyncfalse"==Yt&&(0,A.Ar)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}if(_t){let{id:zt,ids:Zt,async:Yt}=_t;"asyncfalse"==Yt&&(0,A.WT)({id:zt,ids:Zt,nodeStatus:d,slideStatus:k})}}})};if(null!=Pt&&Pt.value){Z.total+=1;let zt=()=>{Z.counter+=1,It()};switch(null==Pt?void 0:Pt.value){case"hide":jQuery("#"+j.id).addClass("hide"),zt();break;case"points":{let{points:Zt,time:Yt,iteration:oe,finish:_e}=Pt;(0,h.G)(j.id,{points:Zt,time:Yt,iteration:oe,finish:_e,nodeStatus:d,slideStatus:k},zt);break}default:{var Jt;let{value:Zt,time:Yt,iteration:oe,finish:_e}=Pt;(0,rt.Q)(null!==(Jt=j.pid)&&void 0!==Jt?Jt:0,{value:Zt,time:Yt,iteration:oe,finish:_e,nodeStatus:d,slideStatus:k},zt);break}}}if(null!=wt&&null!==(N=wt.source)&&void 0!==N&&N.path){Z.total+=1;let zt=()=>{Z.counter+=1,It()};(0,S.R)(j.id,wt,Z,{nodeStatus:d,slideStatus:k},zt)}Z.total||It()})(d,k.nodeStatus,k.slideStatus,Q):Q&&Q(),null!==(N=d.interactive)&&void 0!==N&&N.click&&(It=null===(Pt=d.interactive)||void 0===Pt?void 0:Pt.click,Object.keys(null!=It?It:{}).map(zt=>It[zt]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(It=>{It.preventDefault(),k.nodeStatus=Lt.refreshNodeStatus(),(0,C.F)(d,k.nodeStatus,k.slideStatus)})),null!==(Z=d.variable)&&void 0!==Z&&Z.input&&jQuery("#"+d.id).on("change","input,textarea",It=>{It.preventDefault(),((j,d,k)=>{var Q,H;b.icdt.variable.setValue(null!==(Q=null===(H=d.variable)||void 0===H||null===(H=H.input)||void 0===H?void 0:H.variable)&&void 0!==Q?Q:"",j),(j=>{var d;let k=(Q,H)=>{null==Q||Q.forEach(B=>{switch(B.type){case dt.$.GROUP:(0,T.m)(B.id,{},H?window.document.getElementById(H):null),k(B.nodes,B.id);break;case dt.$.POLYGON:break;case dt.$.TEXT:(0,_.$)(B.id,{size:B.size,attribute:B.attribute,source:B.source},H?window.document.getElementById(H):null)}})};k(null===(d=j.svg)||void 0===d?void 0:d.nodes)})(k)})(It.target.value,d,j)}),null!==(I=d.variable)&&void 0!==I&&I.click&&(null!==(wt=d.variable)&&void 0!==wt&&null!==(wt=wt.click)&&void 0!==wt&&wt.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(It=>{It.preventDefault(),((j,d)=>{var k;b.icdt.variable.setValueOperator(null===(k=j.variable)||void 0===k?void 0:k.click),(j=>{var d;let k=(Q,H)=>{null==Q||Q.forEach(B=>{switch(B.type){case dt.$.GROUP:(0,T.m)(B.id,{},H?window.document.getElementById(H):null),k(B.nodes,B.id);break;case dt.$.POLYGON:break;case dt.$.TEXT:(0,_.$)(B.id,{size:B.size,attribute:B.attribute,source:B.source},H?window.document.getElementById(H):null)}})};k(null===(d=j.svg)||void 0===d?void 0:d.nodes)})(d)})(d,j)})),"test"==(null===(X=d.source)||void 0===X?void 0:X.type)&&((j,d)=>{var k;let Q=()=>{};switch(null===(k=j.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type){case"truefalse":var H;if(jQuery("#"+j.id).click(I=>{I.preventDefault(),((j,d,k,Q,H)=>{var B,N;let Z=null===(B=j.source)||void 0===B||null===(B=B.test)||void 0===B||null===(B=B.truefalse)||void 0===B?void 0:B.iscorrect;if(null!==(N=d.svg)&&void 0!==N&&N.nodes.find(I=>{var X;return"submit"==(null===(X=I.source)||void 0===X||null===(X=X.test)||void 0===X?void 0:X.type)})||ne(j,d,k,Q,{iscorrect:Z},H),d.test?d.test.answer?d.test.answer.truefalse={value:j.id,iscorrect:Z}:d.test.answer={truefalse:{value:j.id,iscorrect:Z}}:d.test={answer:{truefalse:{value:j.id,iscorrect:Z}}},d.test.showselection){let I=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(I,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Lt.nodeStatus,Lt.slideStatus,Q)}),null!==(H=d.test)&&void 0!==H&&H.showselection){let I=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(I,d)}break;case"singlechoice":var B;if(jQuery("#"+j.id).click(I=>{I.preventDefault(),((j,d,k,Q,H)=>{var B,N;let Z=null===(B=j.source)||void 0===B||null===(B=B.test)||void 0===B||null===(B=B.singlechoice)||void 0===B?void 0:B.iscorrect;if(null!==(N=d.svg)&&void 0!==N&&N.nodes.find(I=>{var X;return"submit"==(null===(X=I.source)||void 0===X||null===(X=X.test)||void 0===X?void 0:X.type)})||ne(j,d,k,Q,{iscorrect:Z},H),d.test?d.test.answer?d.test.answer.singlechoice={value:j.id,iscorrect:Z}:d.test.answer={singlechoice:{value:j.id,iscorrect:Z}}:d.test={answer:{singlechoice:{value:j.id,iscorrect:Z}}},d.test.showselection){let I=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(I,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Lt.nodeStatus,Lt.slideStatus,Q)}),null!==(B=d.test)&&void 0!==B&&B.showselection){let I=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(I,d)}break;case"multichoice":var N;if(jQuery("#"+j.id).click(I=>{I.preventDefault(),((j,d,k,Q,H)=>{var B,N;let I,Z=null===(B=j.source)||void 0===B||null===(B=B.test)||void 0===B||null===(B=B.multichoice)||void 0===B?void 0:B.iscorrect;if(null!==(N=d.svg)&&void 0!==N&&N.nodes.find(X=>{var _t;return"submit"==(null===(_t=X.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||ne(j,d,k,Q,{iscorrect:Z},H),d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(X=>X.value==j.id)?(d.test.answer.multichoice=d.test.answer.multichoice.filter(X=>X.value!=j.id),I=!0):d.test.answer.multichoice.push({value:j.id,iscorrect:Z}):d.test.answer.multichoice=[{value:j.id,iscorrect:Z}]:d.test.answer={multichoice:[{value:j.id,iscorrect:Z}]}:d.test={answer:{multichoice:[{value:j.id,iscorrect:Z}]}},d.test.showselection){let X=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(X,d)}console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Lt.nodeStatus,Lt.slideStatus,Q)}),null!==(N=d.test)&&void 0!==N&&N.showselection){let I=(0,Dt.g1)(W.O.TEST_GROUP,"g",void 0,b.icdt.target);(0,Dt.Yw)(I,d)}break;case"fill":var Z;jQuery("#"+j.id).on("keyup",'input[type="text"]',I=>{var X;let _t=jQuery("<div/>").css({"font-size":jQuery(I.target).css("font-size"),visibility:"hidden",float:"left"}).text(I.target.value).appendTo(window.document.body);jQuery(I.target).css({width:(null!==(X=_t.width())&&void 0!==X?X:0)+30})}).on("keypress",'input[type="text"]',I=>{13===(I.keyCode||I.charCode||I.which)&&(I.preventDefault(),I.stopPropagation(),jQuery(I.target).blur())}).on("change",'input[type="text"]',I=>{var X,_t;let Pt=Lt.nodeStatus,wt=Lt.slideStatus,It=null===(X=I.target)||void 0===X?void 0:X.getAttribute("data-key"),Jt=null===(_t=I.target)||void 0===_t||null===(_t=_t.value)||void 0===_t?void 0:_t.trim();((j,d,k,Q,H,B)=>{var N,Z,I,X;let{value:_t}=null!==(N=null===(Z=j.source)||void 0===Z||null===(Z=Z.test)||void 0===Z||null===(Z=Z.fill)||void 0===Z?void 0:Z.find(wt=>wt.key==`[[${H.key}]]`))&&void 0!==N?N:{},Pt=_t&&_t.map(wt=>null==wt?void 0:wt.toLocaleLowerCase()).includes(null===(I=H.value)||void 0===I?void 0:I.toLocaleLowerCase());null!==(X=d.svg)&&void 0!==X&&X.nodes.find(wt=>{var It;return"submit"==(null===(It=wt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||ne(j,d,k,Q,{iscorrect:Pt},B),H.iscorrect=Pt,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(wt=>wt.key==H.key)?d.test.answer.fill.filter(wt=>wt.key==H.key).forEach(wt=>{wt.value=H.value,wt.iscorrect=H.iscorrect}):d.test.answer.fill.push(H):d.test.answer.fill=[H]:d.test.answer={fill:[H]}:d.test={answer:{fill:[H]}},console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Pt,wt,{key:It,value:Jt},Q),jQuery("#"+j.id).find(`input[type="text"][data-key="${It}"]`).val(Jt)}),null!==(Z=d.test)&&void 0!==Z&&Z.showselection||jQuery("#"+j.id).addClass("hide-selection");break;case"matching-empty":jQuery("#"+j.id).on("touchmove",".ondrag-item",function(I){I.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(I){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${I.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(I){var X;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(X=d.test)&&void 0!==X&&X.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(I){},dragend:function(I){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(I){I.dropTarget.hasClass("actived")&&I.dropTarget.addClass("focused")},dragleave:function(I){I.dropTarget.hasClass("actived")&&I.dropTarget.removeClass("focused")},drop:function(I){if(!I.dropTarget.hasClass("actived"))return;I.dropTarget.removeClass("focused");let X=I.dropTarget,_t=I.draggable.currentTarget;X.is(":empty")||X.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),_t.appendTo(X),((j,d,k,Q,H,B)=>{var N,Z,I;let{key:X}=null!==(N=null===(Z=j.source)||void 0===Z||null===(Z=Z.test)||void 0===Z?void 0:Z.matching)&&void 0!==N?N:{key:"KIEN"},_t=H.key==X;null!==(I=d.svg)&&void 0!==I&&I.nodes.find(wt=>{var It;return"submit"==(null===(It=wt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||ne(j,d,k,Q,{iscorrect:_t},B),Xt(j,d,H);let Pt={key:null!=X?X:"",value:H.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(wt=>wt.key==X)?d.test.answer.matching.filter(wt=>wt.key==X).forEach(wt=>wt.value=Pt.value):d.test.answer.matching.push(Pt):d.test.answer.matching=[Pt]:d.test.answer={matching:[Pt]}:d.test={answer:{matching:[Pt]}},console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Lt.nodeStatus,Lt.slideStatus,{key:_t.data("key")},Q)}});break;case"matching-content":jQuery("#"+j.id).on("touchmove",".ondrag-item",function(I){I.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(I){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${I.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(I){var X;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(X=d.test)&&void 0!==X&&X.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(I){},dragend:function(I){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(I){I.dropTarget.hasClass("actived")&&I.dropTarget.addClass("focused")},dragleave:function(I){I.dropTarget.hasClass("actived")&&I.dropTarget.removeClass("focused")},drop:function(I){if(!I.dropTarget.hasClass("actived"))return;I.dropTarget.removeClass("focused");let _t=I.draggable.currentTarget;_t.appendTo(I.dropTarget),Xt(j,d,{key:_t.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+j.id).click(I=>{I.preventDefault(),((j,d,k,Q,H)=>{var B,N,Z,I,X;let _t;var Pt;if(null!=d&&null!==(B=d.test)&&void 0!==B&&null!==(B=B.answer)&&void 0!==B&&B.truefalse)_t=null==d||null===(Pt=d.test)||void 0===Pt||null===(Pt=Pt.answer)||void 0===Pt||null===(Pt=Pt.truefalse)||void 0===Pt?void 0:Pt.iscorrect;else if(null!=d&&null!==(N=d.test)&&void 0!==N&&null!==(N=N.answer)&&void 0!==N&&N.singlechoice){var wt;_t=null==d||null===(wt=d.test)||void 0===wt||null===(wt=wt.answer)||void 0===wt||null===(wt=wt.singlechoice)||void 0===wt?void 0:wt.iscorrect}else if(null!=d&&null!==(Z=d.test)&&void 0!==Z&&null!==(Z=Z.answer)&&void 0!==Z&&Z.multichoice){var It,Jt,zt;_t=1==[null==d||null===(It=d.test)||void 0===It||null===(It=It.answer)||void 0===It||null===(It=It.multichoice)||void 0===It?void 0:It.length,null==d||null===(Jt=d.test)||void 0===Jt||null===(Jt=Jt.answer)||void 0===Jt||null===(Jt=Jt.multichoice)||void 0===Jt||null===(Jt=Jt.map(ve=>ve.iscorrect?1:0))||void 0===Jt?void 0:Jt.reduce((ve,ge)=>ve+ge),null==d||null===(zt=d.svg)||void 0===zt||null===(zt=zt.nodes)||void 0===zt||null===(zt=zt.filter(ve=>{var ge,Oe;return"multichoice"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)&&(null===(Oe=ve.source)||void 0===Oe||null===(Oe=Oe.test)||void 0===Oe||null===(Oe=Oe.multichoice)||void 0===Oe?void 0:Oe.iscorrect)}))||void 0===zt?void 0:zt.length].filter((ve,ge,Oe)=>Oe.indexOf(ve)==ge).length}else if(null!=d&&null!==(I=d.test)&&void 0!==I&&null!==(I=I.answer)&&void 0!==I&&I.fill){var Zt,Yt;_t=(null==d||null===(Zt=d.test)||void 0===Zt||null===(Zt=Zt.answer)||void 0===Zt||null===(Zt=Zt.fill)||void 0===Zt||null===(Zt=Zt.map(ve=>ve.iscorrect?1:0))||void 0===Zt?void 0:Zt.reduce((ve,ge)=>ve+ge))==(null===(Yt=d.svg)||void 0===Yt||null===(Yt=Yt.nodes)||void 0===Yt||null===(Yt=Yt.filter(ve=>{var ge;return"fill"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)}))||void 0===Yt?void 0:Yt.length)}else if(null!=d&&null!==(X=d.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.matching){var oe,_e;_t=(null===(oe=d.svg)||void 0===oe||null===(oe=oe.nodes)||void 0===oe||null===(oe=oe.filter(ve=>{var ge;return"matching-empty"==(null===(ge=ve.source)||void 0===ge||null===(ge=ge.test)||void 0===ge?void 0:ge.type)}))||void 0===oe?void 0:oe.length)==((null==d||null===(_e=d.test)||void 0===_e||null===(_e=_e.answer)||void 0===_e?void 0:_e.matching)||[]).map(ve=>ve.key==ve.value?1:0).reduce((ve,ge)=>ve+ge)}ne(j,d,k,Q,{iscorrect:_t},H),console.log("node source ->",j.source),console.log("slide test ->",d.test)})(j,d,Lt.nodeStatus,Lt.slideStatus,Q)})}})(d,j)};var L=f(8619),u=f(8785),V=f(4921),pt=f(8054),gt=f(2282),St=f(2875),Ft=f(8419);const Ot=(j,d,k)=>{if(k.slideStatus!=Lt.slideStatus||!d.length)return;let Q=d.shift(),H=j.filter(I=>I.idx==Q);if(!H.length)return;let B=Math.max.apply(null,H.map(I=>{var X;return null!==(X=I.time)&&void 0!==X?X:0})),N=!1,Z=B<.5?0:setTimeout(()=>{N||(N=!0,Ot(j,d,k))},1e3*B);bt(j,d,H,0,k,{idx:Q,total:H.length,counter:0,isRecursive:N,timeoutRecursive:Z,maxTimeCoundown:B,uid:Math.floor(1e9*Math.random())})},bt=(j,d,k,Q,H,B)=>{if(H.slideStatus!=Lt.slideStatus)return;let N=k[Q];if(N){switch(N.type){case dt.$.GROUP:break;case dt.$.CIRCLE:(0,L._)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.ELLIPSE:(0,u.r)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.LINE:(0,V.W)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.RECT:(0,pt.f)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.POLYGON:(0,gt.l)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.FOREIGNOBJECT:(0,St.e)(N.id,{size:N.size,attribute:N.attribute,style:N.style,source:N.source},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.IMAGE:(0,vt.G)(N.id,{size:N.size,attribute:N.attribute,source:N.source},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.TEXT:(0,_.$)(N.id,{size:N.size,attribute:N.attribute,source:N.source},N.pid?window.document.getElementById(N.pid):null);break;case dt.$.PATH:(0,Ft.G)(N.id,{size:N.size,attribute:N.attribute},N.pid?window.document.getElementById(N.pid):null)}F(H.slide,N,H,()=>{B.counter+=1,B.maxTimeCoundown<.5&&B.counter>=B.total&&(B.total=B.counter=0,B.isRecursive||(clearTimeout(B.timeoutRecursive),B.isRecursive=!0,setTimeout(()=>{Ot(j,d,H)},250)))}),bt(j,d,k,++Q,H,B)}},Lt=new class qt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},b.icdt.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,k;return null!==(d=null===(k=this._dataSource)||void 0===k||null===(k=k.slides)||void 0===k?void 0:k.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var k;let Q=null===(k=this._dataSource)||void 0===k||null===(k=k.slides)||void 0===k?void 0:k.find((wt,It)=>It==this._slideIdx),H=null==Q?void 0:Q.svg,B=(wt,It)=>{let Jt=null==wt?void 0:wt.find(Yt=>Yt.id==d);if(Jt)return Jt.pid=It,Jt;let zt=0,Zt=wt.length||0;for(;zt<Zt&&!Jt&&(Jt=B(wt[zt].nodes||[],wt[zt].id),!Jt);)zt++;return Jt},N=B((null==H?void 0:H.nodes)||[]);var Z,I,X,_t,Pt;return N?(N.style=null!==(Z=N.style)&&void 0!==Z?Z:{},N.source=null!==(I=N.source)&&void 0!==I?I:{},N.animate=null!==(X=N.animate)&&void 0!==X?X:{},N.interactive=null!==(_t=N.interactive)&&void 0!==_t?_t:{},N.variable=null!==(Pt=N.variable)&&void 0!==Pt?Pt:{},N):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,k,Q){var H;let B;var N,Z;if(this.refreshNodeStatus(),this.refreshSlideStatus(),Q)B=null===(N=this._dataSource)||void 0===N||null===(N=N.slides)||void 0===N?void 0:N.find(Pt=>Pt.code==Q||Pt.id==Q),B&&(this._slideIdx=(null===(Z=this._dataSource)||void 0===Z||null===(Z=Z.slides)||void 0===Z?void 0:Z.indexOf(B))||0);else if(k){var I,X;B=null===(I=this._dataSource)||void 0===I||null===(I=I.slides)||void 0===I?void 0:I.find(Pt=>Pt.id==k),B&&(this._slideIdx=(null===(X=this._dataSource)||void 0===X||null===(X=X.slides)||void 0===X?void 0:X.indexOf(B))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),B=this.slide;if(B){var _t;re(b.icdt.container,b.icdt.svg,B,!0),null===(_t=jQuery(b.icdt.svg).find("#"+W.O.BACKGROUND_GROUP))||void 0===_t||_t.empty();let Pt=(0,Dt.g1)(W.O.BACKGROUND_GROUP,"g",void 0,b.icdt.svg);(0,Dt.x0)(Pt,B),(j=>{var d,k,Q,H;let B=Lt.nodeStatus,N=Lt.slideStatus;null===(d=j.svg)||void 0===d||d.nodes.forEach(I=>{I.pid=Math.ceil(1e9*Math.random()),(0,T.m)(I.pid)});let Z=null===(k=j.svg)||void 0===k||null===(k=k.nodes)||void 0===k?void 0:k.map(I=>I.idx).filter((I,X,_t)=>_t.indexOf(I)==X).sort((I,X)=>(null!=I?I:0)-(null!=X?X:0));Ot(null!==(Q=null===(H=j.svg)||void 0===H?void 0:H.nodes)&&void 0!==Q?Q:[],null!=Z?Z:[],{slide:j,nodeStatus:B,slideStatus:N})})(B)}this.changeSlide(this.slides,null===(H=this.slide)||void 0===H?void 0:H.id,this.slideIdx,this.slides.length,B)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,k,Q,H,B){this._fnChangeSlides.forEach(N=>N(d,k,Q,H,B))}},re=(j,d,k,Q)=>{var H,B,N,Z;let I=window.document.querySelector(d);var X;I||(I=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(X=window.document.querySelector(j))||void 0===X||X.appendChild(I)),Q&&(I.textContent=null);let{x:_t,y:Pt,width:wt,height:It}=null!==(H=null==k||null===(B=k.svg)||void 0===B?void 0:B.viewBox)&&void 0!==H?H:b.icdt.screen.frameSize;I.setAttributeNS(null,"viewBox",_t+" "+Pt+" "+wt+" "+It),I.setAttribute("id",d.replace("#",""));var oe,_e,Jt=null!==(N=jQuery(j).width())&&void 0!==N?N:1080,zt=null!==(Z=jQuery(j).height())&&void 0!==Z?Z:1080,Yt=wt/It;Yt>=Jt/zt?_e=(oe=Jt)/Yt:oe=(_e=zt)*Yt,I.setAttributeNS(null,"width",oe.toString()),I.setAttributeNS(null,"height",_e.toString())}},2336:(ce,At,f)=>{f.d(At,{Q:()=>b});var W=f(1690);const b=(C,rt,h)=>{var S;if(!rt.value)return void h();let A=jQuery("#"+C),G="",_=null!==(S=rt.iteration)&&void 0!==S?S:0,T=[];(rt.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?T.push(rt.value):(T.push("animation"),T.push(rt.value?"animation-"+rt.value:"animation-fadein")),_<0?(T.push("animation-iteration-infinite"),h(),h=function(){}):_>0&&T.push("animation-iteration-"+(_+1)),G=T.join(" "),function(lt){let K=function(){A.data("animate-running")?A.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){A.data("animate-running",!1),setTimeout(function(){lt()},100)}):lt()};A.hasClass("animation")?setTimeout(function(){K()}):K()}(function(){var lt;dt(C),(_>0||_<0)&&A.one("animationiteration",function(){rt.slideStatus===W.$.slideStatus||(A.data("animate-running",!1),dt(C),rt.slideStatus===W.$.slideStatus&&h())}),A.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(A.data("animate-running",!1),dt(C),rt.finish){default:case 0:case 1:break;case 2:A.addClass("hide")}rt.slideStatus===W.$.slideStatus&&h()}),A.attr("data-class",null!==(lt=A.attr("class"))&&void 0!==lt?lt:""),A.addClass(G),A.data("animate-running",!0)})},dt=function(C){var rt,h=jQuery("#"+C),S=null===(rt=h.attr("class"))||void 0===rt?void 0:rt.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);S&&S.forEach(function(G){jQuery(h).removeClass(G)});let A=h.attr("data-class");A&&(h.attr("class",A),h.removeAttr("data-class")),jQuery(h).data("animation-running",!1)}},861:(ce,At,f)=>{f.d(At,{G:()=>C});var W=f(4318),b=f(1690),dt=f(4080);const C=(h,S,A)=>{var G;if(!S.points||!S.points.length)return void A();let _=jQuery("#"+h),T=function rt(h){let S=[];2===h.length&&h.splice(1,0,[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);let x,lt,K,A=1,G=h.length;for(;A<G;){if(x=h[A-1],lt=h[A],K=h[A+1],(Math.abs(x[0]-lt[0])>=15||Math.abs(x[1]-lt[1])>=15)&&Math.pow(x[0]-lt[0],2)+Math.pow(x[1]-lt[1],2)>=Math.pow(15,2)&&K&&(Math.abs(x[0]-K[0])<=20||Math.abs(x[1]-K[1])<=20)&&Math.pow(x[0]-K[0],2)+Math.pow(x[1]-K[1],2)<=Math.pow(20,2))S.push(lt);else{let nt=lt[0]-x[0],E=lt[1]-x[1],q=Math.max(Math.abs(nt),Math.abs(E));for(var J=0;J<q;J+=15)S.push([x[0]+nt*J/q,x[1]+E*J/q])}A++}return G>0&&(S.splice(0,0,h[0]),S.push(h[G-1])),S}(S.points||[]),x=null!==(G=S.iteration)&&void 0!==G?G:0;if(x<0&&(A(),A=function(){}),_.data("work-running")&&x<0)return;_.data("work-running",!0);let vt,lt=T.length,K=Math.max(20,1e3*(S.time||3)/lt),{id:J,type:nt,size:E,attribute:q}=b.$.findNode(h),ft=function(ct){if(S.slideStatus!==b.$.slideStatus)return _.data("work-running",!1),void(S.slideStatus===b.$.slideStatus&&A());if(ct<lt){let tt=T[ct];tt&&(vt=Object.assign({},E,{x:tt[0]-E.width/2,y:tt[1]-E.height/2}),Object.assign(q,(0,W.sg)(nt,vt)),(0,dt.__)(window.document.getElementById(J),q),setTimeout(function(){ft(++ct)},K))}else if(x>0)x--,ft(1);else if(x<0)ft(1);else switch(_.data("work-running",!1),S.slideStatus===b.$.slideStatus&&A(),S.finish){default:case 0:break;case 1:Object.assign(q,(0,W.sg)(nt,E)),(0,dt.__)(window.document.getElementById(J),q);break;case 2:_.addClass("hide")}};ft(1)}},157:(ce,At,f)=>{f.d(At,{R:()=>dt});var W=f(4981),b=f(1690);const dt=(rt,h,S,A,G)=>{var _,T,x,lt,K,J,nt;if(A.slideStatus!=b.$.slideStatus)return h.async&&"change-slide"!=h.async?void 0:void G();if(A.nodeStatus!=b.$.nodeStatus&&(!h.async||"change-node"==h.async))return void G();if(!(null!==(_=h.source)&&void 0!==_&&_.path||null!==(T=h.source)&&void 0!==T&&T.url))return console.warn(`${rt} -> audio no source!`),G(),void(G=()=>{});var E=jQuery("#"+rt);let q=null!==(x=h.iteration)&&void 0!==x?x:0;if(q<0&&(G(),G=function(){}),!(E.data("audio-running")&&q<0)){E.data("audio-running",!0);var vt=function(ct){ct.pause(),ct.remove(),E.data("audio-running",!1)},ft=new Audio;return ft.autoplay=!0,ft.loop=0!=q,ft.preload="auto",ft.controls=!0,ft.setAttributeNode(document.createAttribute("playsinline")),ft.addEventListener("canplay",function(){var ct=ft.play();ct&&ct.then(function(tt){var P;E.data("audio-running",!0),"time"==h.async?setTimeout(()=>{vt(ft),G(),G=()=>{}},1e3*(null!==(P=h.time)&&void 0!==P?P:1)):"non-stop"==h.async&&(G(),G=()=>{})}).catch(function(tt){E.data("audio-running",!1),A.slideStatus===b.$.slideStatus&&(G(),G=()=>{})})}),ft.addEventListener("timeupdate",function(){switch(h.async){case"time":case"non-stop":break;case"finish-action":S.total>=2&&S.total-S.counter==1&&(vt(this),G(),G=()=>{});break;default:case"change-node":A.nodeStatus!==b.$.nodeStatus&&(vt(this),G(),G=()=>{});break;case"change-slide":A.slideStatus!==b.$.slideStatus&&(vt(this),G(),G=()=>{})}}),ft.addEventListener("canplaythrough",function(){this.loop&&(q>0?q--:0==q&&(this.loop=!1))}),ft.addEventListener("play",function(){}),ft.addEventListener("pause",function(){}),ft.addEventListener("ended",function(){this.remove(),E.data("audio-running",!1),A.slideStatus===b.$.slideStatus&&(G(),G=()=>{})}),ft.onerror=function(){this.remove(),E.data("audio-running",!1),A.slideStatus===b.$.slideStatus&&(G(),G=()=>{})},ft.src=(null!==(lt=h.source)&&void 0!==lt&&lt.path?(null===(K=W.icdt.config)||void 0===K?void 0:K.readfileuploadurl)+(null===(J=h.source)||void 0===J?void 0:J.path):null===(nt=h.source)||void 0===nt?void 0:nt.url)||"",ft}}},5973:(ce,At,f)=>{f.d(At,{F:()=>A});var W=f(4981),b=f(1690),dt=f(2336),C=f(861),rt=f(157),h=f(4787),S=f(370);const A=(G,_,T,x)=>{var lt,K,J;let nt={total:0,counter:0},{triggershow:E,triggerrun:q,triggerhide:vt,action:ft,audio:ct,slide:tt,media:P}=null!==(lt=null===(K=G.interactive)||void 0===K?void 0:K.click)&&void 0!==lt?lt:{};if(E){let{id:Tt,ids:Gt,time:ut,async:Y}=E;"asynctrue"==Y?(0,h.L5)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T}):"time"==Y&&setTimeout(()=>{(0,h.L5)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})},1e3*(null!=ut?ut:0))}if(q){let{id:Tt,ids:Gt,time:ut,async:Y}=q;"asynctrue"==Y?(0,h.Ar)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T}):"time"==Y&&setTimeout(()=>{(0,h.Ar)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})},1e3*(null!=ut?ut:0))}if(vt){let{id:Tt,ids:Gt,time:ut,async:Y}=vt;"asynctrue"==Y?(0,h.WT)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T}):"time"==Y&&setTimeout(()=>{(0,h.WT)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})},1e3*(null!=ut?ut:0))}let Wt=()=>{setTimeout(()=>{if(nt.counter>=nt.total){if(x&&x(),E){let{id:Tt,ids:Gt,async:ut}=E;"asyncfalse"==ut&&(0,h.L5)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})}if(q){let{id:Tt,ids:Gt,async:ut}=q;"asyncfalse"==ut&&(0,h.Ar)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})}if(vt){let{id:Tt,ids:Gt,async:ut}=vt;"asyncfalse"==ut&&(0,h.WT)({id:Tt,ids:Gt,nodeStatus:_,slideStatus:T})}}})};if(null!=ft&&ft.value){nt.total+=1;let Tt=()=>{nt.counter+=1,Wt()};switch(ft.value){case"hide":jQuery("#"+G.id).addClass("hide"),Tt();break;case"points":{let{points:Gt,time:ut,iteration:Y,finish:Et}=ft;Gt&&(0,C.G)(G.id,{points:Gt,time:ut,iteration:Y,finish:Et,nodeStatus:_,slideStatus:T},Tt);break}default:{var Dt;let{value:Gt,time:ut,iteration:Y,finish:Et}=ft;(0,dt.Q)(null!==(Dt=G.pid)&&void 0!==Dt?Dt:0,{value:Gt,time:ut,iteration:Y,finish:Et,nodeStatus:_,slideStatus:T},Tt);break}}}if(null!=ct&&null!==(J=ct.source)&&void 0!==J&&J.path){nt.total+=1;let Tt=()=>{nt.counter+=1,Wt()};(0,rt.R)(G.id,ct,nt,{nodeStatus:_,slideStatus:T},Tt)}if(nt.total||Wt(),null!=tt&&tt.id)switch(console.log(`InteractiveNode #${G.id} slide(undefined,${tt.id},${tt.code}) success!`),tt.id){case-1:b.$.runSlide(b.$.slideIdx-1);break;case-2:b.$.runSlide(b.$.slideIdx+1);break;default:var jt;b.$.runSlide(void 0,tt.id,null===(jt=tt.code)||void 0===jt?void 0:jt.toString())}if(null!=P&&P.type){var le;let Gt=`<div class="popup-media-viewer"><iframe src="${(0,S.e)({readfileuploadurl:null===(le=W.icdt.config)||void 0===le?void 0:le.readfileuploadurl,type:null==P?void 0:P.type,oss:null==P?void 0:P.oss,path:null==P?void 0:P.path,pathExtract:null==P?void 0:P.pathExtract,url:null==P?void 0:P.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,ut=jQuery(Gt).appendTo(window.document.body);ut.find(".btn-close").click(function(Y){Y.preventDefault(),ut.remove()})}}},4787:(ce,At,f)=>{f.d(At,{Ar:()=>C,L5:()=>dt,WT:()=>rt});var W=f(1690),b=f(5973);const dt=h=>{console.log("icdt_Run_Interactive_TriggerShow",h),h.id?jQuery("#"+h.id).removeClass("hide"):h.ids&&h.ids.forEach(S=>{jQuery("#"+S).removeClass("hide")})},C=h=>{console.log("icdt_Run_Interactive_TriggerRun",h),h.id?(jQuery("#"+h.id).removeClass("hide"),(0,b.F)(W.$.findNode(h.id),h.nodeStatus,h.slideStatus)):h.ids&&h.ids.forEach(S=>{jQuery("#"+S).removeClass("hide"),(0,b.F)(W.$.findNode(S),h.nodeStatus,h.slideStatus)})},rt=h=>{console.log("icdt_Run_Interactive_TriggerHide",h),h.id?jQuery("#"+h.id).addClass("hide"):h.ids&&h.ids.forEach(S=>{jQuery("#"+S).addClass("hide")})}},4080:(ce,At,f)=>{f.d(At,{Mh:()=>vt,wM:()=>tt,xo:()=>ft,it:()=>P,g1:()=>Tt,__:()=>Wt,QI:()=>jt,DB:()=>Dt,eb:()=>ct,x0:()=>mt,g$:()=>Gt,mo:()=>Xt,XH:()=>kt,hJ:()=>ut,vl:()=>Et,yD:()=>Y,Yw:()=>ne});var W=f(9054),b=f(1687),rt=/^#?[a-fA-F0-9]+$/;const A=(F,L)=>{var u;if("none"==(F=null!==(u=F)&&void 0!==u?u:""))return"none";if("transparent"==F)return"rgba(0,0,0,0)";if(F.includes("rgba("))return F;if(F.includes("rgb(")&&(F=((F,L)=>{if(!F)return"";let u=F.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),V=(u&&u[4]||"").trim(),pt=u?(256|u[1]).toString(16).slice(1)+(256|u[2]).toString(16).slice(1)+(256|u[3]).toString(16).slice(1):F;return"0"==V?"transparent":`#${pt}`})(F)),!(F=F.replace(/[^0-9a-fA-F]/g,"")))return"";if(!rt.test(F))return console.error(`hex2rgba -> ${F}: first argument has invalid hexadecimal characters`),"";if("#"===F[0]&&(F=F.slice(1)),3===F.length){let pt=F.split("");pt.splice(2,0,F[2]),pt.splice(1,0,F[1]),pt.splice(0,0,F[0]),F=pt.join("")}if(6!==F.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var V=[parseInt(F.slice(0,2),16),parseInt(F.slice(2,4),16),parseInt(F.slice(4,6),16)];return L="number"==typeof L?L:parseFloat(L),V.push(L>=0&&L<=1?L:1),"rgba("+V.join(",")+")"};var G=f(370),_=f(1814),T=f(4981),x=f(3423),lt=f(8054),K=f(7210),J=f(8619),nt=f(1690),E=f(2875),q=f(1105);class vt{constructor(L,u){let V=window.document.querySelector(u);var pt;V||(V=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(pt=window.document.querySelector(L))||void 0===pt||pt.appendChild(V));let{svgViewBox:gt,svgSize:St}=T.icdt.screen.init();V.setAttributeNS(null,"viewBox",`${gt.x} ${gt.y} ${gt.width} ${gt.height}`),V.setAttribute("id",u.replace("#","")),V.style.display="block",V.style.width=`${St.width}px`,V.style.height=`${St.height}px`,V.style.backgroundColor="#fafafa",V.style.cursor="default"}}const ft=F=>{jQuery(T.icdt.target).find("#"+b.O.BACKGROUND_GROUP).empty();let L=Tt(b.O.BACKGROUND_GROUP,"g",void 0,T.icdt.target);mt(L,F),(()=>{let u=window.document.getElementById(null==F?void 0:F.id);jQuery(u).find("#"+b.O.BACKGROUND_GROUP).empty();let V=Tt(b.O.BACKGROUND_GROUP,"g",void 0,u);mt(V,F)})()},ct=()=>{let F=T.icdt.screen.svgViewBox,L=T.icdt.screen.svgSize;T.icdt.target&&(T.icdt.target.setAttributeNS(null,"viewBox",`${F.x} ${F.y} ${F.width} ${F.height}`),T.icdt.target.style.left=`${L.x}px`,T.icdt.target.style.top=`${L.y}px`,T.icdt.target.style.width=`${L.width}px`,T.icdt.target.style.height=`${L.height}px`)},tt=()=>{jQuery(T.icdt.target).find(">*:not(defs)").remove()},P=(F,L,u,V,pt)=>{let gt;return F?(gt=jQuery(pt||T.icdt.target).find("#"+F).get(0),gt||(gt=window.document.createElementNS("http://www.w3.org/2000/svg",u),gt.setAttribute("id",F),L==W.$.FOREIGNOBJECT&&gt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(gt).appendTo(pt||T.icdt.target))):(gt=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(gt).appendTo(pt||T.icdt.target)),null!=V&&V.attribute&&Wt(gt,null==V?void 0:V.attribute),null!=V&&V.style&&Dt(gt,null==V?void 0:V.style),null!=V&&V.source&&jt(gt,L,null==V?void 0:V.source),gt},Wt=(F,L)=>{return jQuery(F).attr((u=Object.assign({},L||{}),null===(V=Object.keys(u))||void 0===V||V.forEach(St=>{switch(St){case"fill":break;case"stroke":var Ft;Object.assign(u,{"stroke-width":null!==(Ft=u.strokeWidth)&&void 0!==Ft?Ft:null,strokeWidth:null});break;case"strokeLinecap":var Bt;Object.assign(u,{"stroke-linecap":null!==(Bt=u.strokeLinecap)&&void 0!==Bt?Bt:null,strokeLinecap:null});break;case"strokeLinejoin":var Ot;Object.assign(u,{"stroke-linejoin":null!==(Ot=u.strokeLinejoin)&&void 0!==Ot?Ot:null,strokeLinejoin:null});break;case"strokeDasharray":var bt;Object.assign(u,{"stroke-dasharray":null!==(bt=u.strokeDasharray)&&void 0!==bt?bt:null,strokeDasharray:null});break;case"strokeDasharrays":var qt,Lt;Object.assign(u,{"stroke-dasharray":null!==(qt=null===(Lt=u.strokeDasharrays)||void 0===Lt?void 0:Lt.join(" "))&&void 0!==qt?qt:null,strokeDasharrays:null});break;case"fontFamily":var re;Object.assign(u,{"font-family":null!==(re=u.fontFamily)&&void 0!==re?re:null,fontFamily:null});break;case"fontSize":var j;Object.assign(u,{"font-size":null!==(j=u.fontSize)&&void 0!==j?j:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var d;Object.assign(u,{"transform-origin":null!==(d=u.transformOrigin)&&void 0!==d?d:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?A(u.fill,null!==(pt=null==u?void 0:u.fillOpacity)&&void 0!==pt?pt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?A(u.stroke,null!==(gt=null==u?void 0:u.strokeOpacity)&&void 0!==gt?gt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),F;var u,V,pt,gt},Dt=(F,L)=>{return jQuery(F).css((u=Object.assign({},L||{}),null===(V=Object.keys(u))||void 0===V||V.forEach(pt=>{switch(pt){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var gt;Object.assign(u,u.borderWidth&&u.borderStyle&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle,"border-color":A(u.borderColor,null!==(gt=u.borderOpacity)&&void 0!==gt?gt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var St;u.backgroundColor&&Object.assign(u,{"background-color":A(u.backgroundColor,null!==(St=u.backgroundOpacity)&&void 0!==St?St:1)}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),F;var u,V},jt=(F,L,u)=>{switch(L){case W.$.TEXT:var V,pt;jQuery(F).text(null!==(V=null==u||null===(pt=u.text)||void 0===pt?void 0:pt.textContent)&&void 0!==V?V:"");break;case W.$.IMAGE:var gt,St,Ft,Bt,Ot;jQuery(F).attr("href",(null==u||null===(gt=u.image)||void 0===gt?void 0:gt.base64)||(null!=u&&null!==(St=u.image)&&void 0!==St&&St.path?(null===(Ft=T.icdt.config)||void 0===Ft?void 0:Ft.readfileuploadurl)+(null==u||null===(Bt=u.image)||void 0===Bt?void 0:Bt.path):null==u||null===(Ot=u.image)||void 0===Ot?void 0:Ot.url)||"");break;case W.$.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var bt,qt;if(null!==(bt=u.text)&&void 0!==bt&&bt.variableKeywords&&null!==(qt=u.text)&&void 0!==qt&&qt.variableKeywords.length){var Lt;let g=T.icdt.variable.getKeys(),v=(null===(Lt=u.text)||void 0===Lt?void 0:Lt.textContent)||"";u.text.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(g.indexOf(p)>=0){var z=T.icdt.variable.getValue(p);v=v.replace(O,z)}}),jQuery(F).text(v)}else{var re;jQuery(F).text((null===(re=u.text)||void 0===re?void 0:re.textContent)||"")}break;case"html":{var j,d,k;let g=(null==u||null===(j=u.html)||void 0===j?void 0:j.htmlContent)||"";if(null!==(d=u.html)&&void 0!==d&&d.variableKeywords&&null!==(k=u.html)&&void 0!==k&&k.variableKeywords.length){let v=T.icdt.variable.getKeys();u.html.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(v.indexOf(p)>=0){var z=T.icdt.variable.getValue(p);g=g.replace(O,z)}})}jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${g}</div>`).find("img[path],video[path],iframe[path]").each((v,O)=>{var p,z;O.setAttribute("src",(null!==(p=null===(z=T.icdt.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+O.getAttribute("path")),O.removeAttribute("path")});break}case"input":var Q,H,B,N;if(null!==(Q=u.input)&&void 0!==Q&&Q.input)jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(B=null===(N=u.input)||void 0===N?void 0:N.placeholder)&&void 0!==B?B:""}" maxlength="100" /></div>`);else if(null!==(H=u.input)&&void 0!==H&&H.textarea){var Z,I;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Z=null===(I=u.input)||void 0===I?void 0:I.placeholder)&&void 0!==Z?Z:""}" maxlength="1000"></textarea></div>`)}break;case"image":var X,_t,Pt,wt,It;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(X=u.image)||void 0===X?void 0:X.base64)||(null!==(_t=u.image)&&void 0!==_t&&_t.path?(null===(Pt=T.icdt.config)||void 0===Pt?void 0:Pt.readfileuploadurl)+(null===(wt=u.image)||void 0===wt?void 0:wt.path):null===(It=u.image)||void 0===It?void 0:It.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Jt,zt,Zt,Yt;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Jt=u.iframe)&&void 0!==Jt&&Jt.path?(null===(zt=T.icdt.config)||void 0===zt?void 0:zt.readfileuploadurl)+(null===(Zt=u.iframe)||void 0===Zt?void 0:Zt.path):null===(Yt=u.iframe)||void 0===Yt?void 0:Yt.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var oe,_e,ve,ge,Oe,ni;let g=(0,G.e)({readfileuploadurl:null===(oe=T.icdt.config)||void 0===oe?void 0:oe.readfileuploadurl,type:null===(_e=u.embed)||void 0===_e?void 0:_e.type,oss:null===(ve=u.embed)||void 0===ve?void 0:ve.oss,path:null===(ge=u.embed)||void 0===ge?void 0:ge.path,pathExtract:null===(Oe=u.embed)||void 0===Oe?void 0:Oe.pathExtract,url:null===(ni=u.embed)||void 0===ni?void 0:ni.url});jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${g}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ri,vi;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ri=null===(vi=u.svg)||void 0===vi?void 0:vi.svgContent)&&void 0!==ri?ri:""}</div>`);break;case"test":{var Ae,li,Ge,Ze;let g=(null==u||null===(Ae=u.html)||void 0===Ae?void 0:Ae.htmlContent)||"";if(null!==(li=u.html)&&void 0!==li&&li.variableKeywords&&null!==(Ge=u.html)&&void 0!==Ge&&Ge.variableKeywords.length){let v=T.icdt.variable.getKeys();u.html.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(v.indexOf(p)>=0){var z=T.icdt.variable.getValue(p);g=g.replace(O,z)}})}switch(null==u||null===(Ze=u.test)||void 0===Ze?void 0:Ze.type){case"truefalse":var ai;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(ai=u.test.truefalse)&&void 0!==ai&&ai.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"singlechoice":var oi;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(oi=u.test.singlechoice)&&void 0!==oi&&oi.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"multichoice":var ti;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(ti=u.test.multichoice)&&void 0!==ti&&ti.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"matching-empty":var Xe;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==u||null===(Xe=u.test.matching)||void 0===Xe?void 0:Xe.key}"></div>`);break;case"matching-content":var si,xt,M;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==u||null===(si=u.test.matching)||void 0===si?void 0:si.key}"><div class="ondrag-item" data-key="${null!==(xt=null==u||null===(M=u.test)||void 0===M||null===(M=M.matching)||void 0===M?void 0:M.key)&&void 0!==xt?xt:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div></div>`);break;case"fill":var i;((null===(i=u.html)||void 0===i?void 0:i.fillKeywords)||[]).forEach(v=>{var O=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${v.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;g=g.replace(new RegExp(v.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),O)}),jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${g}</div></div></div>`);break;case"speech":jQuery(F).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var n,r,a,o,y;jQuery(F).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(n=null!==(r=u.image)&&void 0!==r&&r.path?(null===(a=T.icdt.config)||void 0===a?void 0:a.readfileuploadurl)+(null===(o=u.image)||void 0===o?void 0:o.path):null===(y=u.image)||void 0===y?void 0:y.url)&&void 0!==n?n:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(F).find("img[path],video[path],iframe[path]").each((v,O)=>{var p,z;O.setAttribute("src",(null!==(p=null===(z=T.icdt.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+O.getAttribute("path")),O.removeAttribute("path")})}}}},Tt=(F,L,u,V)=>{let pt=jQuery(V||T.icdt.target).find("#"+F).get(0);return pt||(pt=window.document.createElementNS("http://www.w3.org/2000/svg",L),pt.setAttribute("id",F),jQuery(pt).appendTo(V||T.icdt.target)),jQuery(pt).attr((null==u?void 0:u.attribute)||{}),jQuery(pt).css((null==u?void 0:u.style)||{}),pt},Gt=(F,L)=>{let u=(0,x.v)(2),V={fill:_.S3.fill,stroke:_.S3.stroke,"stroke-width":(0,x.v)(_.S3.strokeWidth)};return[{element:Tt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:L.x-u,y:L.y-u,width:L.width+2*u,height:L.height+2*u},V)},F),posType:"rect-center"}]},ut=(F,L)=>{let{size:u}=L,V=(0,x.v)(1),pt=(0,x.v)(2),gt=(0,x.v)(5),St={stroke:_.NV.stroke,"stroke-width":(0,x.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},Ft={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,x.v)(_.Mo.strokeWidth)},Bt={fill:_.In.fill,stroke:_.In.stroke,"stroke-width":(0,x.v)(_.In.strokeWidth),width:(0,x.v)(_.In.width),height:(0,x.v)(_.In.height)};return Tt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-V,y1:u.y,x2:u.x-V,y2:u.y+u.height},St)},F),Tt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-V,x2:u.x+u.width,y2:u.y-V},St)},F),Tt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+V,y1:u.y,x2:u.x+u.width+V,y2:u.y+u.height},St)},F),Tt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+V,x2:u.x+u.width,y2:u.y+u.height+V},St)},F),[{element:Tt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Ft),style:{cursor:"move"}},F),posType:"rect-center"},{element:Tt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-gt,y:u.y-gt},Bt),style:{cursor:"nw-resize"}},F),posType:"rect-top-left"},{element:Tt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-pt,y:u.y-gt},Bt),style:{cursor:"ne-resize"}},F),posType:"rect-top-right"},{element:Tt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-gt,y:u.y+u.height-pt},Bt),style:{cursor:"sw-resize"}},F),posType:"rect-bottom-left"},{element:Tt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-pt,y:u.y+u.height-pt},Bt),style:{cursor:"se-resize"}},F),posType:"rect-bottom-right"}]},Y=(F,L,u)=>{let V=(0,x.v)(1),pt={stroke:_.NV.stroke,"stroke-width":(0,x.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},gt={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,x.v)(_.Mo.strokeWidth)},St={fill:_.dt.fill,stroke:_.dt.stroke,"stroke-width":(0,x.v)(_.dt.strokeWidth)},qt=(Tt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-V,y1:u.y,x2:u.x-V,y2:u.y+u.height},pt)},F),Tt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-V,x2:u.x+u.width,y2:u.y-V},pt)},F),Tt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+V,y1:u.y,x2:u.x+u.width+V,y2:u.y+u.height},pt)},F),Tt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+V,x2:u.x+u.width,y2:u.y+u.height+V},pt)},F),Tt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},gt)},F));return L.forEach(Lt=>{let{size:re}=Lt;Tt("icdt-temp-select-rect-node-"+Lt.id,"rect",{attribute:Object.assign({x:re.x,y:re.y,width:re.width,height:re.height},St)},F)}),[{element:qt,posType:"rect-center"}]},Et=(F,L)=>{let u=(0,x.v)(1),V={stroke:_.NV.stroke,"stroke-width":(0,x.v)(_.NV.strokeWidth),"stroke-linecap":_.NV.strokeLinecap},pt={fill:_.Mo.fill,stroke:_.Mo.stroke,"stroke-width":(0,x.v)(_.Mo.strokeWidth)};return Tt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:L.x-u,y1:L.y,x2:L.x-u,y2:L.y+L.height},V)},F),Tt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:L.x,y1:L.y-u,x2:L.x+L.width,y2:L.y-u},V)},F),Tt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:L.x+L.width+u,y1:L.y,x2:L.x+L.width+u,y2:L.y+L.height},V)},F),Tt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:L.x,y1:L.y+L.height+u,x2:L.x+L.width,y2:L.y+L.height+u},V)},F),[{element:Tt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:L.x,y:L.y,width:L.width,height:L.height},pt)},F),posType:"rect-center"}]},kt=(F,L)=>{let u=(0,x.v)(-1),V={stroke:_.h8.stroke,"stroke-width":(0,x.v)(_.h8.strokeWidth),"stroke-linecap":_.h8.strokeLinecap,"stroke-dasharray":(0,x.v)(_.h8.strokeDasharray)},pt={fill:_.MA.fill};return Tt("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:L.x-u,y1:L.y,x2:L.x-u,y2:L.y+L.height},V)},F),Tt("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:L.x,y1:L.y-u,x2:L.x+L.width,y2:L.y-u},V)},F),Tt("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:L.x+L.width+u,y1:L.y,x2:L.x+L.width+u,y2:L.y+L.height},V)},F),Tt("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:L.x,y1:L.y+L.height+u,x2:L.x+L.width,y2:L.y+L.height+u},V)},F),Tt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:L.x,y:L.y,width:L.width,height:L.height},pt)},F),[]},Xt=(F,L)=>{let u={fill:_.k0.fill,stroke:_.k0.stroke,"stroke-width":(0,x.v)(_.k0.strokeWidth),"stroke-dasharray":(0,x.v)(_.k0.strokeDasharray)};jQuery(F).empty(),L.forEach(V=>{var pt,gt;let{size:St}=V;if(!V.idx)return;Tt("icdt-temp-index-rect-node-"+V.id,"rect",{attribute:Object.assign({x:St.x-5,y:St.y-5,width:St.width+10,height:St.height+10},u)},F);let{element:Ft}=(0,E.e)(Math.ceil(1e9*Math.random()),{size:{x:St.x-76,y:St.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(pt=V.idx)&&void 0!==pt?pt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(gt=V.time)&&void 0!==gt?gt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},F);Ft.classList.add("node-input"),jQuery(Ft).on("change",'input[name="idx"]',Bt=>{var Ot;V.idx=parseInt(null!==(Ot=Bt.target.value)&&void 0!==Ot?Ot:"0")}).on("change",'input[name="time"]',Bt=>{var Ot;V.time=parseFloat(null!==(Ot=Bt.target.value)&&void 0!==Ot?Ot:"0")}).on("click",'button[name="remove"]',Bt=>{V.idx=0,V.time=null,Xt(F,L)})})},mt=(F,L)=>{var u,V,pt,gt,St,Ft;let{color:Bt,opacity:Ot,path:bt,url:qt,base64:Lt}=null!==(u=null==L||null===(V=L.svg)||void 0===V?void 0:V.background)&&void 0!==u?u:{},{x:re,y:j,width:d,height:k}=null!==(pt=null==L||null===(gt=L.svg)||void 0===gt?void 0:gt.viewBox)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,q.$)(void 0,{size:{x:0,y:-7,width:d,height:k},attribute:{fill:"#999",fontSize:14,class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(St=null!==(Ft=null==L?void 0:L.name)&&void 0!==Ft?Ft:null==L?void 0:L.code)&&void 0!==St?St:void 0}}},F),(0,lt.f)(void 0,{size:{x:re,y:j,width:d,height:k},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},F),Bt&&(0,lt.f)(void 0,{size:{x:re,y:j,width:d,height:k},attribute:{fill:Bt,fillOpacity:Ot}},F),bt&&(0,K.G)(void 0,{size:{x:re,y:j,width:d,height:k},source:{type:"image",image:{path:bt,url:qt,base64:Lt}}},F)},ne=(F,L)=>{var u;switch(jQuery(F).empty(),null===(u=L.test)||void 0===u?void 0:u.type){case"truefalse":{var V,pt,gt;let j=null==L||null===(V=L.test)||void 0===V||null===(V=V.answer)||void 0===V||null===(V=V.truefalse)||void 0===V?void 0:V.value;null===(pt=L.svg)||void 0===pt||pt.nodes.filter(d=>{var k;return"truefalse"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&d.id!=j}).forEach(d=>{var k;let{x:H,y:B,width:N,height:Z}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:H-.5,y:B-.5,width:N+1,height:Z+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},F)}),null!=L&&null!==(gt=L.test)&&void 0!==gt&&null!==(gt=gt.answer)&&void 0!==gt&&gt.truefalse&&j&&(d=>{let k=nt.$.findNode(j),{x:H,y:B,width:N,height:Z}=null!==(d=null==k?void 0:k.size)&&void 0!==d?d:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:H-2,y:B-2,width:N+4,height:Z+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},F)})();break}case"singlechoice":{var St,Ft,Bt;let j=null==L||null===(St=L.test)||void 0===St||null===(St=St.answer)||void 0===St||null===(St=St.singlechoice)||void 0===St?void 0:St.value;null===(Ft=L.svg)||void 0===Ft||Ft.nodes.filter(d=>{var k;return"singlechoice"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&d.id!=j}).forEach(d=>{var k;let{x:H,y:B,width:N,height:Z}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:H-.5,y:B-.5,width:N+1,height:Z+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},F)}),null!=L&&null!==(Bt=L.test)&&void 0!==Bt&&null!==(Bt=Bt.answer)&&void 0!==Bt&&Bt.singlechoice&&j&&(d=>{let k=nt.$.findNode(j),{x:H,y:B,width:N,height:Z}=null!==(d=null==k?void 0:k.size)&&void 0!==d?d:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:H-2,y:B-2,width:N+4,height:Z+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},F)})();break}case"multichoice":{var Ot,bt,qt,Lt;let j=null!==(Ot=null==L||null===(bt=L.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||null===(bt=bt.multichoice)||void 0===bt?void 0:bt.map(d=>d.value))&&void 0!==Ot?Ot:[];var re;null===(qt=L.svg)||void 0===qt||qt.nodes.filter(d=>{var k;return"multichoice"==(null===(k=d.source)||void 0===k||null===(k=k.test)||void 0===k?void 0:k.type)&&!j.includes(d.id)}).forEach(d=>{var k;let{x:H,y:B,width:N,height:Z}=null!==(k=null==d?void 0:d.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,lt.f)(Math.ceil(1e9*Math.random()),{size:{x:H-.5,y:B-.5,width:N+1,height:Z+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},F)}),null!=L&&null!==(Lt=L.test)&&void 0!==Lt&&null!==(Lt=Lt.answer)&&void 0!==Lt&&Lt.multichoice&&j.length&&(null==L||null===(re=L.test)||void 0===re||null===(re=re.answer)||void 0===re||re.multichoice.forEach(d=>{var k;let Q=nt.$.findNode(d.value),{x:B,y:N,width:Z,height:I}=null!==(k=null==Q?void 0:Q.size)&&void 0!==k?k:{x:0,y:0,width:0,height:0};(0,lt.f)(Math.ceil(1e9*Math.random()),{size:{x:B-2,y:N-2,width:Z+4,height:I+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},F)}));break}}}},370:(ce,At,f)=>{f.d(At,{e:()=>dt});const dt=h=>{switch(null==h?void 0:h.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+h.readfileuploadurl+h.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+h.readfileuploadurl+h.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+h.readfileuploadurl+h.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+h.readfileuploadurl+h.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+h.readfileuploadurl+h.path;case 906:case 911:case 910:return""+h.readfileuploadurl+h.path;case 905:var S;return"imsmanifest.xml"==(null===(S=h.pathExtract)||void 0===S||null===(S=S.split("/"))||void 0===S?void 0:S.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+h.readfileuploadurl+h.pathExtract:""+h.readfileuploadurl+h.path;case 907:case 900:return""+h.readfileuploadurl+h.path;case 904:switch(h.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+h.url;case 1002:var A;return null!==(A=C(h.url))&&void 0!==A?A:"";case 1005:var G;return null!==(G=h.url)&&void 0!==G?G:"";default:var _;return null!==(_=h.url)&&void 0!==_?_:""}default:return""+h.readfileuploadurl+h.path}},C=h=>{let S=rt(h);return S?"https://www.youtube.com/embed/"+S+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},rt=h=>{let S=null==h?void 0:h.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return S&&S.length>=2?S[1]:null}},511:(ce,At,f)=>{function W(){}function b(t){return null==t?W:function(){return this.querySelector(t)}}function rt(){return[]}function h(t){return null==t?rt:function(){return this.querySelectorAll(t)}}function G(t){return function(){return this.matches(t)}}function _(t){return function(e){return e.matches(t)}}f.d(At,{$0Z:()=>aa,jvg:()=>la});var T=Array.prototype.find;function lt(){return this.firstElementChild}var J=Array.prototype.filter;function nt(){return Array.from(this.children)}function ft(t){return new Array(t.length)}function tt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Wt(t,e,l,s,c,m){for(var R,w=0,D=e.length,it=m.length;w<it;++w)(R=e[w])?(R.__data__=m[w],s[w]=R):l[w]=new tt(t,m[w]);for(;w<D;++w)(R=e[w])&&(c[w]=R)}function Dt(t,e,l,s,c,m,w){var R,D,Ht,it=new Map,st=e.length,Nt=m.length,Rt=new Array(st);for(R=0;R<st;++R)(D=e[R])&&(Rt[R]=Ht=w.call(D,D.__data__,R,e)+"",it.has(Ht)?c[R]=D:it.set(Ht,D));for(R=0;R<Nt;++R)Ht=w.call(t,m[R],R,m)+"",(D=it.get(Ht))?(s[R]=D,D.__data__=m[R],it.delete(Ht)):l[R]=new tt(t,m[R]);for(R=0;R<st;++R)(D=e[R])&&it.get(Rt[R])===D&&(c[R]=D)}function jt(t){return t.__data__}function Tt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Xt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}tt.prototype={constructor:tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var pt="http://www.w3.org/1999/xhtml";const gt={svg:"http://www.w3.org/2000/svg",xhtml:pt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function St(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),gt.hasOwnProperty(e)?{space:gt[e],local:t}:t}function Ft(t){return function(){this.removeAttribute(t)}}function Bt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ot(t,e){return function(){this.setAttribute(t,e)}}function bt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Lt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function j(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function d(t){return function(){this.style.removeProperty(t)}}function k(t,e,l){return function(){this.style.setProperty(t,e,l)}}function Q(t,e,l){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,l)}}function B(t,e){return t.style.getPropertyValue(e)||j(t).getComputedStyle(t,null).getPropertyValue(e)}function N(t){return function(){delete this[t]}}function Z(t,e){return function(){this[t]=e}}function I(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function _t(t){return t.trim().split(/^|\s+/)}function Pt(t){return t.classList||new wt(t)}function wt(t){this._node=t,this._names=_t(t.getAttribute("class")||"")}function It(t,e){for(var l=Pt(t),s=-1,c=e.length;++s<c;)l.add(e[s])}function Jt(t,e){for(var l=Pt(t),s=-1,c=e.length;++s<c;)l.remove(e[s])}function zt(t){return function(){It(this,t)}}function Zt(t){return function(){Jt(this,t)}}function Yt(t,e){return function(){(e.apply(this,arguments)?It:Jt)(this,t)}}function _e(){this.textContent=""}function ve(t){return function(){this.textContent=t}}function ge(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ni(){this.innerHTML=""}function ri(t){return function(){this.innerHTML=t}}function vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function Ze(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===pt&&e.documentElement.namespaceURI===pt?e.createElement(t):e.createElementNS(l,t)}}function ti(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=St(t);return(e.local?ti:oi)(e)}function xt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function O(t){return function(){var e=this.__on;if(e){for(var m,l=0,s=-1,c=e.length;l<c;++l)m=e[l],t.type&&m.type!==t.type||m.name!==t.name?e[++s]=m:this.removeEventListener(m.type,m.listener,m.options);++s?e.length=s:delete this.__on}}}function p(t,e,l){return function(){var c,s=this.__on,m=function g(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var w=0,R=s.length;w<R;++w)if((c=s[w]).type===t.type&&c.name===t.name)return this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=m,c.options=l),void(c.value=e);this.addEventListener(t.type,m,l),c={type:t.type,name:t.name,value:e,listener:m,options:l},s?s.push(c):this.__on=[c]}}function U(t,e,l){var s=j(t),c=s.CustomEvent;"function"==typeof c?c=new c(e,l):(c=s.document.createEvent("Event"),l?(c.initEvent(e,l.bubbles,l.cancelable),c.detail=l.detail):c.initEvent(e,!1,!1)),t.dispatchEvent(c)}function at(t,e){return function(){return U(this,t,e)}}function ht(t,e){return function(){return U(this,t,e.apply(this,arguments))}}wt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var se=[null];function fe(t,e){this._groups=t,this._parents=e}function pe(){return new fe([[document.documentElement]],se)}fe.prototype=pe.prototype={constructor:fe,select:function dt(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,l=e.length,s=new Array(l),c=0;c<l;++c)for(var D,it,m=e[c],w=m.length,R=s[c]=new Array(w),st=0;st<w;++st)(D=m[st])&&(it=t.call(D,D.__data__,st,m))&&("__data__"in D&&(it.__data__=D.__data__),R[st]=it);return new fe(s,this._parents)},selectAll:function A(t){t="function"==typeof t?function S(t){return function(){return function C(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,l=e.length,s=[],c=[],m=0;m<l;++m)for(var D,w=e[m],R=w.length,it=0;it<R;++it)(D=w[it])&&(s.push(t.call(D,D.__data__,it,w)),c.push(D));return new fe(s,c)},selectChild:function K(t){return this.select(null==t?lt:function x(t){return function(){return T.call(this.children,t)}}("function"==typeof t?t:_(t)))},selectChildren:function q(t){return this.selectAll(null==t?nt:function E(t){return function(){return J.call(this.children,t)}}("function"==typeof t?t:_(t)))},filter:function vt(t){"function"!=typeof t&&(t=G(t));for(var e=this._groups,l=e.length,s=new Array(l),c=0;c<l;++c)for(var D,m=e[c],w=m.length,R=s[c]=[],it=0;it<w;++it)(D=m[it])&&t.call(D,D.__data__,it,m)&&R.push(D);return new fe(s,this._parents)},data:function le(t,e){if(!arguments.length)return Array.from(this,jt);var l=e?Dt:Wt,s=this._parents,c=this._groups;"function"!=typeof t&&(t=function P(t){return function(){return t}}(t));for(var m=c.length,w=new Array(m),R=new Array(m),D=new Array(m),it=0;it<m;++it){var st=s[it],Nt=c[it],Rt=Nt.length,Ht=Tt(t.call(st,st&&st.__data__,it,s)),we=Ht.length,Se=R[it]=new Array(we),Ct=w[it]=new Array(we);l(st,Nt,Se,Ct,D[it]=new Array(Rt),Ht,e);for(var de,ye,ee=0,Vt=0;ee<we;++ee)if(de=Se[ee]){for(ee>=Vt&&(Vt=ee+1);!(ye=Ct[Vt])&&++Vt<we;);de._next=ye||null}}return(w=new fe(w,s))._enter=R,w._exit=D,w},enter:function ct(){return new fe(this._enter||this._groups.map(ft),this._parents)},exit:function Gt(){return new fe(this._exit||this._groups.map(ft),this._parents)},join:function ut(t,e,l){var s=this.enter(),c=this,m=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(c=e(c))&&(c=c.selection()),null==l?m.remove():l(m),s&&c?s.merge(c).order():c},merge:function Y(t){for(var e=t.selection?t.selection():t,l=this._groups,s=e._groups,c=l.length,w=Math.min(c,s.length),R=new Array(c),D=0;D<w;++D)for(var Ht,it=l[D],st=s[D],Nt=it.length,Rt=R[D]=new Array(Nt),we=0;we<Nt;++we)(Ht=it[we]||st[we])&&(Rt[we]=Ht);for(;D<c;++D)R[D]=l[D];return new fe(R,this._parents)},selection:function xe(){return this},order:function Et(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var w,s=t[e],c=s.length-1,m=s[c];--c>=0;)(w=s[c])&&(m&&4^w.compareDocumentPosition(m)&&m.parentNode.insertBefore(w,m),m=w);return this},sort:function kt(t){function e(Nt,Rt){return Nt&&Rt?t(Nt.__data__,Rt.__data__):!Nt-!Rt}t||(t=Xt);for(var l=this._groups,s=l.length,c=new Array(s),m=0;m<s;++m){for(var it,w=l[m],R=w.length,D=c[m]=new Array(R),st=0;st<R;++st)(it=w[st])&&(D[st]=it);D.sort(e)}return new fe(c,this._parents).order()},call:function mt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ne(){return Array.from(this)},node:function F(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var s=t[e],c=0,m=s.length;c<m;++c){var w=s[c];if(w)return w}return null},size:function L(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function V(t){for(var e=this._groups,l=0,s=e.length;l<s;++l)for(var R,c=e[l],m=0,w=c.length;m<w;++m)(R=c[m])&&t.call(R,R.__data__,m,c);return this},attr:function re(t,e){var l=St(t);if(arguments.length<2){var s=this.node();return l.local?s.getAttributeNS(l.space,l.local):s.getAttribute(l)}return this.each((null==e?l.local?Bt:Ft:"function"==typeof e?l.local?Lt:qt:l.local?bt:Ot)(l,e))},style:function H(t,e,l){return arguments.length>1?this.each((null==e?d:"function"==typeof e?Q:k)(t,e,null==l?"":l)):B(this.node(),t)},property:function X(t,e){return arguments.length>1?this.each((null==e?N:"function"==typeof e?I:Z)(t,e)):this.node()[t]},classed:function oe(t,e){var l=_t(t+"");if(arguments.length<2){for(var s=Pt(this.node()),c=-1,m=l.length;++c<m;)if(!s.contains(l[c]))return!1;return!0}return this.each(("function"==typeof e?Yt:e?zt:Zt)(l,e))},text:function Oe(t){return arguments.length?this.each(null==t?_e:("function"==typeof t?ge:ve)(t)):this.node().textContent},html:function Ae(t){return arguments.length?this.each(null==t?ni:("function"==typeof t?vi:ri)(t)):this.node().innerHTML},raise:function Ge(){return this.each(li)},lower:function ai(){return this.each(Ze)},append:function si(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function M(t,e){var l="function"==typeof t?t:Xe(t),s=null==e?xt:"function"==typeof e?e:b(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function o(t){return this.select(t?a:r)},datum:function y(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function z(t,e,l){var c,w,s=function v(t){return t.trim().split(/^|\s+/).map(function(e){var l="",s=e.indexOf(".");return s>=0&&(l=e.slice(s+1),e=e.slice(0,s)),{type:e,name:l}})}(t+""),m=s.length;if(!(arguments.length<2)){for(R=e?p:O,c=0;c<m;++c)this.each(R(s[c],e,l));return this}var R=this.node().__on;if(R)for(var st,D=0,it=R.length;D<it;++D)for(c=0,st=R[D];c<m;++c)if((w=s[c]).type===st.type&&w.name===st.name)return st.value},dispatch:function ot(t,e){return this.each(("function"==typeof e?ht:at)(t,e))},[Symbol.iterator]:function*Ut(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var w,s=t[e],c=0,m=s.length;c<m;++c)(w=s[c])&&(yield w)}};const me=pe;var ke={value:()=>{}};function vn(){for(var s,t=0,e=arguments.length,l={};t<e;++t){if(!(s=arguments[t]+"")||s in l||/[\s.]/.test(s))throw new Error("illegal type: "+s);l[s]=[]}return new Pi(l)}function Pi(t){this._=t}function ar(t,e){for(var c,l=0,s=t.length;l<s;++l)if((c=t[l]).name===e)return c.value}function gn(t,e,l){for(var s=0,c=t.length;s<c;++s)if(t[s].name===e){t[s]=ke,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=l&&t.push({name:e,value:l}),t}Pi.prototype=vn.prototype={constructor:Pi,on:function(t,e){var c,l=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var s="",c=l.indexOf(".");if(c>=0&&(s=l.slice(c+1),l=l.slice(0,c)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:s}})}(t+"",l),m=-1,w=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++m<w;)if(c=(t=s[m]).type)l[c]=gn(l[c],t.name,e);else if(null==e)for(c in l)l[c]=gn(l[c],t.name,null);return this}for(;++m<w;)if((c=(t=s[m]).type)&&(c=ar(l[c],t.name)))return c},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Pi(t)},call:function(t,e){if((c=arguments.length-2)>0)for(var c,m,l=new Array(c),s=0;s<c;++s)l[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,c=(m=this._[t]).length;s<c;++s)m[s].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],c=0,m=s.length;c<m;++c)s[c].value.apply(e,l)}};const or=vn;var Ri,Oi,gi=0,xi=0,Ei=0,yn=1e3,Li=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return di||(pn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,l){var s=new ji;return s.restart(t,e,l),s}function _n(){di=(Li=Si.now())+Di,gi=xi=0;try{!function dr(){Xi(),++gi;for(var e,t=Ri;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}()}finally{gi=0,function hr(){for(var t,l,e=Ri,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ri=l);Oi=t,Yi(s)}(),di=0}}function ur(){var t=Si.now(),e=t-Li;e>yn&&(Di-=e,Li=t)}function Yi(t){gi||(xi&&(xi=clearTimeout(xi)),t-di>24?(t<1/0&&(xi=setTimeout(_n,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Li=Si.now(),Ei=setInterval(ur,yn)),gi=1,pn(_n)))}function wn(t,e,l){var s=new ji;return s.restart(c=>{s.stop(),t(c+e)},e=null==e?0:+e,l),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Xi():+l)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ri=this,Oi=this),this._call=t,this._time=l,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,zi=3;function Ki(t,e,l,s,c,m){var w=t.__transition;if(w){if(l in w)return}else t.__transition={};!function vr(t,e,l){var c,s=t.__transition;function w(it){var st,Nt,Rt,Ht;if(1!==l.state)return D();for(st in s)if((Ht=s[st]).name===l.name){if(Ht.state===zi)return wn(w);4===Ht.state?(Ht.state=6,Ht.timer.stop(),Ht.on.call("interrupt",t,t.__data__,Ht.index,Ht.group),delete s[st]):+st<e&&(Ht.state=6,Ht.timer.stop(),Ht.on.call("cancel",t,t.__data__,Ht.index,Ht.group),delete s[st])}if(wn(function(){l.state===zi&&(l.state=4,l.timer.restart(R,l.delay,l.time),R(it))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=zi,c=new Array(Rt=l.tween.length),st=0,Nt=-1;st<Rt;++st)(Ht=l.tween[st].value.call(t,t.__data__,l.index,l.group))&&(c[++Nt]=Ht);c.length=Nt+1}}function R(it){for(var st=it<l.duration?l.ease.call(null,it/l.duration):(l.timer.restart(D),l.state=5,1),Nt=-1,Rt=c.length;++Nt<Rt;)c[Nt].call(t,st);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),D())}function D(){for(var it in l.state=6,l.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=l,l.timer=mn(function m(it){l.state=1,l.timer.restart(w,l.delay,l.time),l.delay<=it&&w(it-l.delay)},0,l.time)}(t,l,{name:e,index:s,group:c,on:cr,tween:fr,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:bn})}function tn(t,e){var l=Fe(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function He(t,e){var l=Fe(t,e);if(l.state>zi)throw new Error("too late; already running");return l}function Fe(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ei(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Wi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,s,c,m){var w,R,D;return(w=Math.sqrt(t*t+e*e))&&(t/=w,e/=w),(D=t*l+e*s)&&(l-=t*D,s-=e*D),(R=Math.sqrt(l*l+s*s))&&(l/=R,s/=R,D/=R),t*s<e*l&&(t=-t,e=-e,D=-D,w=-w),{translateX:c,translateY:m,rotate:Math.atan2(e,t)*On,skewX:Math.atan(D)*On,scaleX:w,scaleY:R}}function kn(t,e,l,s){function c(it){return it.length?it.pop()+" ":""}return function(it,st){var Nt=[],Rt=[];return it=t(it),st=t(st),function m(it,st,Nt,Rt,Ht,we){if(it!==Nt||st!==Rt){var Se=Ht.push("translate(",null,e,null,l);we.push({i:Se-4,x:ei(it,Nt)},{i:Se-2,x:ei(st,Rt)})}else(Nt||Rt)&&Ht.push("translate("+Nt+e+Rt+l)}(it.translateX,it.translateY,st.translateX,st.translateY,Nt,Rt),function w(it,st,Nt,Rt){it!==st?(it-st>180?st+=360:st-it>180&&(it+=360),Rt.push({i:Nt.push(c(Nt)+"rotate(",null,s)-2,x:ei(it,st)})):st&&Nt.push(c(Nt)+"rotate("+st+s)}(it.rotate,st.rotate,Nt,Rt),function R(it,st,Nt,Rt){it!==st?Rt.push({i:Nt.push(c(Nt)+"skewX(",null,s)-2,x:ei(it,st)}):st&&Nt.push(c(Nt)+"skewX("+st+s)}(it.skewX,st.skewX,Nt,Rt),function D(it,st,Nt,Rt,Ht,we){if(it!==Nt||st!==Rt){var Se=Ht.push(c(Ht)+"scale(",null,",",null,")");we.push({i:Se-4,x:ei(it,Nt)},{i:Se-2,x:ei(st,Rt)})}else(1!==Nt||1!==Rt)&&Ht.push(c(Ht)+"scale("+Nt+","+Rt+")")}(it.scaleX,it.scaleY,st.scaleX,st.scaleY,Nt,Rt),it=st=null,function(Ht){for(var Ct,we=-1,Se=Rt.length;++we<Se;)Nt[(Ct=Rt[we]).i]=Ct.x(Ht);return Nt.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function br(t,e){var l,s;return function(){var c=He(this,t),m=c.tween;if(m!==l)for(var w=0,R=(s=l=m).length;w<R;++w)if(s[w].name===e){(s=s.slice()).splice(w,1);break}c.tween=s}}function xr(t,e,l){var s,c;if("function"!=typeof l)throw new Error;return function(){var m=He(this,t),w=m.tween;if(w!==s){c=(s=w).slice();for(var R={name:e,value:l},D=0,it=c.length;D<it;++D)if(c[D].name===e){c[D]=R;break}D===it&&c.push(R)}m.tween=c}}function nn(t,e,l){var s=t._id;return t.each(function(){var c=He(this,s);(c.value||(c.value={}))[e]=l.apply(this,arguments)}),function(c){return Fe(c,s).value[e]}}function rn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Mn(t,e){var l=Object.create(t.prototype);for(var s in e)l[s]=e[s];return l}function ki(){}var Ui=1/.7,yi="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),kr=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),Mr=new RegExp(`^rgba\\(${yi},${yi},${yi},${Ti}\\)$`),Tr=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Ti}\\)$`),Cr=new RegExp(`^hsl\\(${Ti},${Ve},${Ve}\\)$`),Ar=new RegExp(`^hsla\\(${Ti},${Ve},${Ve},${Ti}\\)$`),Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?In(e):3===l?new ze(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new ze(e[1],e[2],e[3],1):(e=kr.exec(t))?new ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Tr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Tn.hasOwnProperty(t)?In(Tn[t]):"transparent"===t?new ze(NaN,NaN,NaN,0):null}function In(t){return new ze(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,s){return s<=0&&(t=e=l=NaN),new ze(t,e,l,s)}function Fi(t,e,l,s){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new ze((t=t.rgb()).r,t.g,t.b,t.opacity):new ze}(t):new ze(t,e,l,null==s?1:s)}function ze(t,e,l,s){this.r=+t,this.g=+e,this.b=+l,this.opacity=+s}function Nn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Qi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Rn(t,e,l,s){return s<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Qe(t,e,l,s)}function Ln(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Qe;if(t instanceof Qe)return t;var e=(t=t.rgb()).r/255,l=t.g/255,s=t.b/255,c=Math.min(e,l,s),m=Math.max(e,l,s),w=NaN,R=m-c,D=(m+c)/2;return R?(w=e===m?(l-s)/R+6*(l<s):l===m?(s-e)/R+2:(e-l)/R+4,R/=D<.5?m+c:2-m-c,w*=60):R=D>0&&D<1?0:w,new Qe(w,R,D,t.opacity)}function Qe(t,e,l,s){this.h=+t,this.s=+e,this.l=+l,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,s,c){var m=t*t,w=m*t;return((1-3*t+3*m-w)*e+(4-6*m+3*w)*l+(1+3*t+3*m-3*w)*s+w*c)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Nr(){return Ln(this).formatHsl()},formatRgb:An,toString:An}),rn(ze,Fi,Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ze(ui(this.r),ui(this.g),ui(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:function Rr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Qe,function Lr(t,e,l,s){return 1===arguments.length?Ln(t):new Qe(t,e,l,null==s?1:s)},Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,s=l+(l<.5?l:1-l)*e,c=2*l-s;return new ze(ln(t>=240?t-240:t+120,c,s),ln(t,c,s),ln(t<120?t+240:t-120,c,s),this.opacity)},clamp(){return new Qe(Dn(this.h),Hi(this.s),Hi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Kn(t,e){var l=e-t;return l?function Bn(t,e){return function(l){return t+l*e}}(t,l):zn(isNaN(t)?e:t)}const Wn=function t(e){var l=function Br(t){return 1==(t=+t)?Kn:function(e,l){return l-e?function zr(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(s){return Math.pow(t+s*e,l)}}(e,l,t):zn(isNaN(e)?l:e)}}(e);function s(c,m){var w=l((c=Fi(c)).r,(m=Fi(m)).r),R=l(c.g,m.g),D=l(c.b,m.b),it=Kn(c.opacity,m.opacity);return function(st){return c.r=w(st),c.g=R(st),c.b=D(st),c.opacity=it(st),c+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var w,R,l=e.length,s=new Array(l),c=new Array(l),m=new Array(l);for(w=0;w<l;++w)R=Fi(e[w]),s[w]=R.r||0,c[w]=R.g||0,m[w]=R.b||0;return s=t(s),c=t(c),m=t(m),R.opacity=1,function(D){return R.r=s(D),R.g=c(D),R.b=m(D),R+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var s=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),c=t[s],m=t[s+1];return jn((l-s/e)*e,s>0?t[s-1]:2*c-m,c,m,s<e-1?t[s+2]:2*m-c)}}),Un(function jr(t){var e=t.length;return function(l){var s=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var s,c,m,l=an.lastIndex=on.lastIndex=0,w=-1,R=[],D=[];for(t+="",e+="";(s=an.exec(t))&&(c=on.exec(e));)(m=c.index)>l&&(m=e.slice(l,m),R[w]?R[w]+=m:R[++w]=m),(s=s[0])===(c=c[0])?R[w]?R[w]+=c:R[++w]=c:(R[++w]=null,D.push({i:w,x:ei(s,c)})),l=on.lastIndex;return l<e.length&&(m=e.slice(l),R[w]?R[w]+=m:R[++w]=m),R.length<2?D[0]?function Wr(t){return function(e){return t(e)+""}}(D[0].x):function Kr(t){return function(){return t}}(e):(e=D.length,function(it){for(var Nt,st=0;st<e;++st)R[(Nt=D[st]).i]=Nt.x(it);return R.join("")})}function Gn(t,e){var l;return("number"==typeof e?ei:e instanceof Ci?Wn:(l=Ci(e))?(e=l,Wn):Ur)(t,e)}function Gr(t){return function(){this.removeAttribute(t)}}function Fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var s,m,c=l+"";return function(){var w=this.getAttribute(t);return w===c?null:w===s?m:m=e(s=w,l)}}function Hr(t,e,l){var s,m,c=l+"";return function(){var w=this.getAttributeNS(t.space,t.local);return w===c?null:w===s?m:m=e(s=w,l)}}function Vr(t,e,l){var s,c,m;return function(){var w,D,R=l(this);return null==R?void this.removeAttribute(t):(w=this.getAttribute(t))===(D=R+"")?null:w===s&&D===c?m:(c=D,m=e(s=w,R))}}function Jr(t,e,l){var s,c,m;return function(){var w,D,R=l(this);return null==R?void this.removeAttributeNS(t.space,t.local):(w=this.getAttributeNS(t.space,t.local))===(D=R+"")?null:w===s&&D===c?m:(c=D,m=e(s=w,R))}}function $r(t,e){var l,s;function c(){var m=e.apply(this,arguments);return m!==s&&(l=(s=m)&&function Yr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,m)),l}return c._value=e,c}function qr(t,e){var l,s;function c(){var m=e.apply(this,arguments);return m!==s&&(l=(s=m)&&function Xr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,m)),l}return c._value=e,c}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){He(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){He(this,t).duration=e}}var wl=me.prototype.constructor;function Fn(t){return function(){this.style.removeProperty(t)}}var zl=0;function Ye(t,e,l,s){this._groups=t,this._parents=e,this._name=l,this._id=s}function Qn(){return++zl}var $e=me.prototype;Ye.prototype=function Bl(t){return me().transition(t)}.prototype={constructor:Ye,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=b(t));for(var s=this._groups,c=s.length,m=new Array(c),w=0;w<c;++w)for(var st,Nt,R=s[w],D=R.length,it=m[w]=new Array(D),Rt=0;Rt<D;++Rt)(st=R[Rt])&&(Nt=t.call(st,st.__data__,Rt,R))&&("__data__"in st&&(Nt.__data__=st.__data__),it[Rt]=Nt,Ki(it[Rt],e,l,Rt,it,Fe(st,l)));return new Ye(m,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=h(t));for(var s=this._groups,c=s.length,m=[],w=[],R=0;R<c;++R)for(var st,D=s[R],it=D.length,Nt=0;Nt<it;++Nt)if(st=D[Nt]){for(var Ht,Rt=t.call(st,st.__data__,Nt,D),we=Fe(st,l),Se=0,Ct=Rt.length;Se<Ct;++Se)(Ht=Rt[Se])&&Ki(Ht,e,l,Se,Rt,we);m.push(Rt),w.push(st)}return new Ye(m,w,e,l)},selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=G(t));for(var e=this._groups,l=e.length,s=new Array(l),c=0;c<l;++c)for(var D,m=e[c],w=m.length,R=s[c]=[],it=0;it<w;++it)(D=m[it])&&t.call(D,D.__data__,it,m)&&R.push(D);return new Ye(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,s=e.length,m=Math.min(s,l.length),w=new Array(s),R=0;R<m;++R)for(var Rt,D=e[R],it=l[R],st=D.length,Nt=w[R]=new Array(st),Ht=0;Ht<st;++Ht)(Rt=D[Ht]||it[Ht])&&(Nt[Ht]=Rt);for(;R<s;++R)w[R]=e[R];return new Ye(w,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),s=this._groups,c=s.length,m=0;m<c;++m)for(var D,w=s[m],R=w.length,it=0;it<R;++it)if(D=w[it]){var st=Fe(D,e);Ki(D,t,l,it,w,{time:st.time+st.delay+st.duration,delay:0,duration:st.duration,ease:st.ease})}return new Ye(s,this._parents,t,l)},call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:function gl(t,e){var l=this._id;return arguments.length<2?Fe(this.node(),l).on.on(t):this.each(function vl(t,e,l){var s,c,m=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?tn:He;return function(){var w=m(this,t),R=w.on;R!==s&&(c=(s=R).copy()).on(e,l),w.on=c}}(l,t,e))},attr:function Zr(t,e){var l=St(t),s="transform"===l?wr:Gn;return this.attrTween(t,"function"==typeof e?(l.local?Jr:Vr)(l,s,nn(this,"attr."+t,e)):null==e?(l.local?Fr:Gr)(l):(l.local?Hr:Qr)(l,s,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var s=St(t);return this.tween(l,(s.local?$r:qr)(s,e))},style:function kl(t,e,l){var s="transform"==(t+="")?_r:Gn;return null==e?this.styleTween(t,function xl(t,e){var l,s,c;return function(){var m=B(this,t),w=(this.style.removeProperty(t),B(this,t));return m===w?null:m===l&&w===s?c:c=e(l=m,s=w)}}(t,s)).on("end.style."+t,Fn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var s,c,m;return function(){var w=B(this,t),R=l(this),D=R+"";return null==R&&(this.style.removeProperty(t),D=R=B(this,t)),w===D?null:w===s&&D===c?m:(c=D,m=e(s=w,R))}}(t,s,nn(this,"style."+t,e))).each(function Sl(t,e){var l,s,c,R,m="style."+e,w="end."+m;return function(){var D=He(this,t),it=D.on,st=null==D.value[m]?R||(R=Fn(e)):void 0;(it!==l||c!==st)&&(s=(l=it).copy()).on(w,c=st),D.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,l){var s,m,c=l+"";return function(){var w=B(this,t);return w===c?null:w===s?m:m=e(s=w,l)}}(t,s,e),l).on("end.style."+t,null)},styleTween:function Cl(t,e,l){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Tl(t,e,l){var s,c;function m(){var w=e.apply(this,arguments);return w!==c&&(s=(c=w)&&function Ml(t,e,l){return function(s){this.style.setProperty(t,e.call(this,s),l)}}(t,w,l)),s}return m._value=e,m}(t,e,null==l?"":l))},text:function Nl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,l;function s(){var c=t.apply(this,arguments);return c!==l&&(e=(l=c)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(c)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var w,s=Fe(this.node(),l).tween,c=0,m=s.length;c<m;++c)if((w=s[c]).name===t)return w.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Fe(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Fe(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){He(this,t).ease=e}}(e,t)):Fe(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;He(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,s=l._id,c=l.size();return new Promise(function(m,w){var R={value:w},D={value:function(){0==--c&&m()}};l.each(function(){var it=He(this,s),st=it.on;st!==t&&((e=(t=st).copy())._.cancel.push(R),e._.interrupt.push(R),e._.end.push(D)),it.on=e}),0===c&&m()})},[Symbol.iterator]:$e[Symbol.iterator]};var Wl={time:null,delay:0,duration:250,ease:function Kl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}me.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,c,w,l=t.__transition,m=!0;if(l){for(w in e=null==e?null:e+"",l)(s=l[w]).name===e?(c=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(c?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete l[w]):m=!1;m&&delete t.__transition}}(this,t)})},me.prototype.transition=function Gl(t){var e,l;t instanceof Ye?(e=t._id,t=t._name):(e=Qn(),(l=Wl).time=Xi(),t=null==t?null:t+"");for(var s=this._groups,c=s.length,m=0;m<c;++m)for(var D,w=s[m],R=w.length,it=0;it<R;++it)(D=w[it])&&Ki(D,t,e,it,w,l||Ul(D,e));return new Ye(s,this._parents,t,e)};Math;function Ai(t){return{type:t}}function _i(t){return function(){return t}}function Yn(t){this._context=t}function $l(t){return new Yn(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,fn=2*cn,ci=1e-6,ql=fn-ci;function $n(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const l=10**e;return function(s){this._+=s[0];for(let c=1,m=s.length;c<m;++c)this._+=Math.round(arguments[c]*l)/l+s[c]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,s,c){this._append`Q${+e},${+l},${this._x1=+s},${this._y1=+c}`}bezierCurveTo(e,l,s,c,m,w){this._append`C${+e},${+l},${+s},${+c},${this._x1=+m},${this._y1=+w}`}arcTo(e,l,s,c,m){if(e=+e,l=+l,s=+s,c=+c,(m=+m)<0)throw new Error(`negative radius: ${m}`);let w=this._x1,R=this._y1,D=s-e,it=c-l,st=w-e,Nt=R-l,Rt=st*st+Nt*Nt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Rt>ci)if(Math.abs(Nt*D-it*st)>ci&&m){let Ht=s-w,we=c-R,Se=D*D+it*it,Ct=Ht*Ht+we*we,Mt=Math.sqrt(Se),ee=Math.sqrt(Rt),Vt=m*Math.tan((cn-Math.acos((Se+Rt-Ct)/(2*Mt*ee)))/2),de=Vt/ee,ye=Vt/Mt;Math.abs(de-1)>ci&&this._append`L${e+de*st},${l+de*Nt}`,this._append`A${m},${m},0,0,${+(Nt*Ht>st*we)},${this._x1=e+ye*D},${this._y1=l+ye*it}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,s,c,m,w){if(e=+e,l=+l,w=!!w,(s=+s)<0)throw new Error(`negative radius: ${s}`);let R=s*Math.cos(c),D=s*Math.sin(c),it=e+R,st=l+D,Nt=1^w,Rt=w?c-m:m-c;null===this._x1?this._append`M${it},${st}`:(Math.abs(this._x1-it)>ci||Math.abs(this._y1-st)>ci)&&this._append`L${it},${st}`,s&&(Rt<0&&(Rt=Rt%fn+fn),Rt>ql?this._append`A${s},${s},0,1,${Nt},${e-R},${l-D}A${s},${s},0,1,${Nt},${this._x1=it},${this._y1=st}`:Rt>ci&&this._append`A${s},${s},0,${+(Rt>=cn)},${Nt},${this._x1=e+s*Math.cos(m)},${this._y1=l+s*Math.sin(m)}`)}rect(e,l,s,c){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${s=+s}v${+c}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=_i(!0),s=null,c=$l,m=null,w=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const s=Math.floor(l);if(!(s>=0))throw new RangeError(`invalid digits: ${l}`);e=s}return t},()=>new Zi(e)}(R);function R(D){var it,Nt,Ht,st=(D=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(D)).length,Rt=!1;for(null==s&&(m=c(Ht=w())),it=0;it<=st;++it)!(it<st&&l(Nt=D[it],it,D))===Rt&&((Rt=!Rt)?m.lineStart():m.lineEnd()),Rt&&m.point(+t(Nt,it,D),+e(Nt,it,D));if(Ht)return m=null,Ht+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),R.x=function(D){return arguments.length?(t="function"==typeof D?D:_i(+D),R):t},R.y=function(D){return arguments.length?(e="function"==typeof D?D:_i(+D),R):e},R.defined=function(D){return arguments.length?(l="function"==typeof D?D:_i(!!D),R):l},R.curve=function(D){return arguments.length?(c=D,null!=s&&(m=c(s)),R):c},R.context=function(D){return arguments.length?(null==D?s=m=null:m=c(s=D),R):s},R}function qn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);