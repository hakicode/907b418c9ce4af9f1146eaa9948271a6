"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6960],{1461:(B,Z,d)=>{d.d(Z,{N:()=>x,b:()=>P});var M=d(4459);function x(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,M.cd)({url:"api/Category/Search",params:{category_id:t.params.category_id||null,category_title:t.params.category_title||null,createdby:t.params.createdby||null,level:t.params.level||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:u=>{"function"==typeof t.callback&&t.callback(u.data||null)},error:u=>{"function"==typeof t.callback&&t.callback(null),console.error(u)}})}function P(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,M.cd)({url:"api/Category/SearchTreeList",params:{getby:t.params.userid||null,category_id:t.params.category_id||null,category_pid:t.params.category_pid||null,category_title:t.params.category_title||null,active:t.params.active||null,topic_id:t.params.topic_id||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:u=>{"function"==typeof t.callback&&t.callback(u.data||null)},error:u=>{"function"==typeof t.callback&&t.callback(null),console.error(u)},loading:t.loading})}},203:(B,Z,d)=>{d.d(Z,{AY:()=>x,ef:()=>u,nC:()=>t,v9:()=>P});var M=d(4459);const x=r=>{var h,f,v,n;r.params=r.params||{},r.params.page=r.params.page||1,r.params.limit=r.params.limit||1,(0,M.cd)({url:"api/ProductPackage/Search",params:{getby:null!==(h=r.params.userid)&&void 0!==h?h:null,userid:null!==(f=r.params.userid)&&void 0!==f?f:null,productpackage_id:null!==(v=r.params.productpackage_id)&&void 0!==v?v:null,productpackage_key:null!==(n=r.params.productpackage_key)&&void 0!==n?n:null,iseffect:!0,ispublic:!0,sortfield:"ordinal",sorttype:"asc",posstart:(r.params.page-1)*r.params.limit,numofrow:r.params.limit},success:b=>{var e;"function"==typeof r.callback&&r.callback(null!==(e=b.data)&&void 0!==e?e:null)},error:b=>{"function"==typeof r.callback&&r.callback(),console.error(b)},loading:r.loading})},P=r=>{var h,f,v;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/Detail",params:{getby:null!==(h=r.params.userid)&&void 0!==h?h:null,productpackage_id:null!==(f=r.params.productpackage_id)&&void 0!==f?f:null,productpackage_key:null!==(v=r.params.productpackage_key)&&void 0!==v?v:null},success:n=>{var b;"function"==typeof r.callback&&r.callback(null!==(b=n.data)&&void 0!==b?b:null)},error:n=>{"function"==typeof r.callback&&r.callback(),console.error(n)},loading:r.loading})},t=r=>{var h;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/AppliedPackage",params:{userid:null!==(h=r.params.userid)&&void 0!==h?h:null},success:f=>{var v;"function"==typeof r.callback&&r.callback(null!==(v=f.data)&&void 0!==v?v:null)},error:f=>{"function"==typeof r.callback&&r.callback(),console.error(f)},loading:r.loading})},u=r=>{var h,f;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/AppliedPackageContent",params:{userid:null!==(h=r.params.userid)&&void 0!==h?h:null,v_functionlimit:null!==(f=r.params.v_functionlimit)&&void 0!==f?f:null},success:v=>{var n;"function"==typeof r.callback&&r.callback(null!==(n=v.data)&&void 0!==n?n:null)},error:v=>{"function"==typeof r.callback&&r.callback(),console.error(v)},loading:r.loading})}},4041:(B,Z,d)=>{d.d(Z,{D:()=>x,w:()=>P});var M=d(4459);function x(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,M.cd)({url:"api/Topic/Search",params:{topic_id:t.params.topic_id||null,topic_title:t.params.topic_title||null,createdby:t.params.createdby||null,level:t.params.level||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:u=>{"function"==typeof t.callback&&t.callback(u.data||null)},error:u=>{"function"==typeof t.callback&&t.callback(null),console.error(u)}})}function P(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,M.cd)({url:"api/Topic/SearchTreeList",params:{getby:t.params.userid||null,topic_id:t.params.topic_id||null,topic_pid:t.params.topic_pid||null,topic_title:t.params.topic_title||null,active:t.params.active||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:u=>{"function"==typeof t.callback&&t.callback(u.data||null)},error:u=>{"function"==typeof t.callback&&t.callback(null),console.error(u)},loading:t.loading})}},3589:(B,Z,d)=>{d.d(Z,{w:()=>t,z:()=>P});var M=d(5861),x=d(4459);const P=function(){var u=(0,M.Z)(function*(r){r.params=r.params||{};let h=yield(0,x.H0)();var f=[];r.params.subFolder&&(r.params.subFolder=r.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),r.params.subFolder&&f.push(r.params.subFolder)),r.params.isconvertvideo=!!r.params.isconvertvideo,r.params.isconvertpdf2image=!!r.params.isconvertpdf2image,r.params.isconvertoffice2image=!!r.params.isconvertoffice2image,r.params.isresizeimage=!!r.params.isresizeimage;const v=new FormData;v.append("path",f.join("/")),v.append("types",r.params.fileType||null),v.append("file",r.params.file||null),v.append("base64",r.params.base64||!1),v.append("isconvertvideo",r.params.isconvertvideo),v.append("isconvertpdf2image",r.params.isconvertpdf2image),v.append("isconvertoffice2image",r.params.isconvertoffice2image),v.append("isresizeimage",r.params.isresizeimage),(0,x.tm)({api_url:h.fileuploadurl,authorization:!1,url:"Files",params:v,success:n=>{"function"==typeof r.callback&&r.callback(n.data||null)},error:n=>{"function"==typeof r.callback&&r.callback(),console.error(r,n)},loading:r.loading})});return function(h){return u.apply(this,arguments)}}(),t=function(){var u=(0,M.Z)(function*(r){r.params=r.params||{};let h=yield(0,x.H0)();(0,x.cd)({api_url:h.fileuploadurl,authorization:!1,url:"Zips/ExtractScorm",params:{pathFile:r.params.pathFile},success:f=>{"function"==typeof r.callback&&r.callback(f.data||null)},error:f=>{"function"==typeof r.callback&&r.callback(),console.error(r,f)},loading:r.loading})});return function(h){return u.apply(this,arguments)}}()},8328:(B,Z,d)=>{d.d(Z,{j:()=>L});var M=d(5861),x=d(9422),t=d(5879),u=d(3999),r=d(6814),h=d(3536);function f(y,A){1&y&&(t.ynx(0),t._UZ(1,"ion-icon",5),t.BQk())}function v(y,A){1&y&&(t.ynx(0),t._UZ(1,"ion-icon",6),t.BQk())}function n(y,A){1&y&&(t.ynx(0),t._UZ(1,"ion-icon",10),t.TgZ(2,"ion-label"),t._uU(3,"Vietnamese (Vi\u1ec7t Nam)"),t.qZA(),t.BQk())}function b(y,A){1&y&&(t.ynx(0),t._UZ(1,"ion-icon",11),t.TgZ(2,"ion-label"),t._uU(3,"English (United States)"),t.qZA(),t.BQk())}function e(y,A){if(1&y){const E=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(k){const p=t.CHM(E).$implicit,m=t.oxw(2);return t.KtG(m.changeLang(k,p))}),t.ynx(1,1),t.YNc(2,n,4,0,"ng-container",2),t.YNc(3,b,4,0,"ng-container",2),t.BQk(),t.qZA()}if(2&y){const E=A.$implicit;t.xp6(1),t.Q6J("ngSwitch",E),t.xp6(1),t.Q6J("ngSwitchCase","vi"),t.xp6(1),t.Q6J("ngSwitchCase","en")}}function T(y,A){if(1&y&&(t.TgZ(0,"ion-list",7),t.YNc(1,e,4,3,"ion-item",8),t.qZA()),2&y){const E=t.oxw();t.xp6(1),t.Q6J("ngForOf",E.translates)}}x.config({driver:[x.INDEXEDDB,x.LOCALSTORAGE,x.WEBSQL],name:"_config",version:1});const U={create:(y=(0,M.Z)(function*(){return x}),function(){return y.apply(this,arguments)}),get:function(){var y=(0,M.Z)(function*(A){return x.getItem(A)});return function(E){return y.apply(this,arguments)}}(),set:function(){var y=(0,M.Z)(function*(A,E){return x.setItem(A,E)});return function(E,D){return y.apply(this,arguments)}}()};var y;let L=(()=>{var y;class A{constructor(D){var k=this;this.translateService=D,this.changeLang=function(){var _=(0,M.Z)(function*(p,m){var s,o;(m=null!==(s=m)&&void 0!==s?s:null==p||null===(o=p.target)||void 0===o?void 0:o.value)&&(k.translate.use(m),yield U.set("lang",m))});return function(p,m){return _.apply(this,arguments)}}(),this.translate=D,this.translates=D.getLangs()}ngOnInit(){}}return(y=A).\u0275fac=function(D){return new(D||y)(t.Y36(u.sK))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-select-language"]],decls:7,vars:3,consts:[["id","click-trigger"],[3,"ngSwitch"],[4,"ngSwitchCase"],["slot","end","name","chevron-down-outline"],["trigger","click-trigger","triggerAction","click","side","bottom","alignment","center","dismiss-on-select","true"],["src","../../../../assets/i18n/flag/vi-VN.svg"],["src","../../../../assets/i18n/flag/en-US.svg"],["mode","ios","lines","none"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["slot","start","src","../../../../assets/i18n/flag/vi-VN.svg"],["slot","start","src","../../../../assets/i18n/flag/en-US.svg"]],template:function(D,k){1&D&&(t.TgZ(0,"ion-button",0),t.ynx(1,1),t.YNc(2,f,2,0,"ng-container",2),t.YNc(3,v,2,0,"ng-container",2),t._UZ(4,"ion-icon",3),t.BQk(),t.qZA(),t.TgZ(5,"ion-popover",4),t.YNc(6,T,2,1,"ng-template"),t.qZA()),2&D&&(t.xp6(1),t.Q6J("ngSwitch",k.translate.currentLang),t.xp6(1),t.Q6J("ngSwitchCase","vi"),t.xp6(1),t.Q6J("ngSwitchCase","en"))},dependencies:[r.sg,r.RF,r.n9,h.YG,h.gu,h.Ie,h.Q$,h.q_,h.d8],styles:["ion-button[_ngcontent-%COMP%]{margin:0;--border-radius: .5rem;--padding-top: .25rem;--padding-start: .25rem;--padding-end: .5rem;--padding-bottom: .25rem;--background: transparent;--background-activated: transparent;--background-focused: transparent;--background-hover: transparent}ion-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--ion-color-dark, #4D4F60)}ion-icon[slot=end][_ngcontent-%COMP%]{font-size:1rem}"]}),A})()},4531:(B,Z,d)=>{d.d(Z,{e:()=>s});var M=d(5861),x=d(4459),P=d(8530),t=d(1461),u=d(4041),r=d(5938),h=d(9403),f=d(8526),v=d(3377),n=d(8186),b=d(7090),e=d(5879),T=d(3536),U=d(6814),L=d(6223),y=d(3999);function A(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(a);const c=e.oxw(2);return e.KtG(c.clearTopic())}),e._UZ(1,"ion-icon",24),e.qZA()}}function E(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(a);const c=e.oxw(2);return e.KtG(c.clearCategory())}),e._UZ(1,"ion-icon",24),e.qZA()}}function D(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"div",15)(1,"ion-item")(2,"ion-input",16),e.NdJ("change",function(c){e.CHM(a);const g=e.oxw();return e.KtG(g.changeBoardTitle(c))}),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"div",17)(6,"div",18),e._UZ(7,"input",19),e.ALo(8,"translate"),e.TgZ(9,"div",20),e.YNc(10,A,2,0,"button",21),e.TgZ(11,"button",22),e.NdJ("click",function(c){e.CHM(a);const g=e.oxw();return e.KtG(g.presentPopoverTopic(c))}),e._UZ(12,"ion-icon",23),e.qZA()()()(),e.TgZ(13,"div",17)(14,"div",18),e._UZ(15,"input",19),e.ALo(16,"translate"),e.TgZ(17,"div",20),e.YNc(18,E,2,0,"button",21),e.TgZ(19,"button",22),e.NdJ("click",function(c){e.CHM(a);const g=e.oxw();return e.KtG(g.presentPopoverCategory(c))}),e._UZ(20,"ion-icon",23),e.qZA()()()()}if(2&o){const a=e.oxw();let i,c;e.xp6(2),e.MGl("placeholder","",e.lcZ(4,11,"LectureName")," *"),e.Q6J("ngModel",a.board.board_title),e.uIk("label",e.lcZ(3,9,"LectureName")),e.xp6(5),e.s9C("placeholder",e.lcZ(8,13,"GradeLevel")),e.Q6J("value",null!==(i=a.board.topic_title)&&void 0!==i?i:""),e.xp6(3),e.Q6J("ngIf",a.board.topic_id),e.xp6(5),e.s9C("placeholder",e.lcZ(16,15,"Subject")),e.Q6J("value",null!==(c=a.board.category_title)&&void 0!==c?c:""),e.xp6(3),e.Q6J("ngIf",a.board.category_id)}}function k(o,l){if(1&o){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",35),e.NdJ("click",function(){const g=e.CHM(a).$implicit,C=e.oxw(2);return e.KtG(C.selectItem(g.board_id))}),e.TgZ(2,"div",36)(3,"div",29)(4,"div",30)(5,"ion-img",37),e.NdJ("ionImgDidLoad",function(c){const C=e.CHM(a).$implicit,O=e.oxw(2);return e.KtG(O.coverLoad(c,C))}),e.qZA()()()()(),e.BQk()}if(2&o){const a=l.$implicit,i=e.oxw(2);e.xp6(1),e.Tol(a.board_id==i.selectedId?"selected":a.board_id==i.currentId?"actived":""),e.xp6(4),e.Q6J("alt",a.board_title)}}function _(o,l){1&o&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",39)(3,"div",29)(4,"div",30),e._UZ(5,"ion-skeleton-text",40),e.qZA()()()(),e.BQk()),2&o&&(e.xp6(5),e.Q6J("animated",!0))}function p(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"ion-infinite-scroll",41),e.NdJ("ionInfinite",function(c){e.CHM(a);const g=e.oxw(2);return e.KtG(g.onIonInfinite(c))}),e._UZ(1,"ion-infinite-scroll-content"),e.qZA()}}function m(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"ion-content")(1,"div",25)(2,"div",26)(3,"div",27),e.NdJ("click",function(){e.CHM(a);const c=e.oxw();return e.KtG(c.selectItem())}),e.TgZ(4,"div")(5,"div",28)(6,"div",29)(7,"div",30)(8,"div",31)(9,"div")(10,"div"),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()()()(),e.YNc(13,k,6,3,"ng-container",32),e.YNc(14,_,6,1,"ng-container",33),e.qZA()(),e.YNc(15,p,2,0,"ion-infinite-scroll",34),e.qZA()}if(2&o){const a=e.oxw();e.xp6(3),e.Tol(a.selectedId?"":"selected"),e.xp6(8),e.Oqu(e.lcZ(12,6,"NewLecture")),e.xp6(2),e.Q6J("ngForOf",a.boards),e.xp6(1),e.Q6J("ngIf",a.paging.loading),e.xp6(1),e.Q6J("ngIf",a.paging.active)}}let s=(()=>{var o;class l{constructor(i,c,g){this.modalController=i,this.toastController=c,this.popoverController=g,this.board={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.fileurl="",this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.boards=[],this.topics=[],this.categorys=[],this.isloading=!1}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){var c,g,C,O;i.appsettings=yield(0,x.H0)(),i.appsettings.madonvi&&(i.user=yield(0,v.iA)(),i.readfileuploadurl=i.appsettings.readfileuploadurl||"",i.coverUrl=`${null!==(c=i.appsettings.readfileuploadurl)&&void 0!==c?c:""}${null!==(g=i.appsettings.boardpath)&&void 0!==g?g:""}`,i.coverv1Url=`${null!==(C=i.appsettings.readfileuploadurl)&&void 0!==C?C:""}${null!==(O=i.appsettings.boardpathv1)&&void 0!==O?O:""}`,i.refreshData())})()}refreshData(){(0,u.D)({params:{page:1,limit:20},callback:i=>{this.topics=i||[]}}),(0,t.N)({params:{page:1,limit:20},callback:i=>{this.categorys=i||[]}}),this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadData_Paging(i){var c;this.paging.loading=!0,(0,b.rM)({params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:g=>{this.boards=this.boards.concat(g||[]),this.paging.loading=!1,(!(null!=g&&g.length)||(null==g?void 0:g.length)<this.paging.limit)&&(this.paging.active=!1),i&&i()}})}loadMore(i){this.paging.page+=1,this.loadData_Paging(i)}onIonInfinite(i){this.loadMore(()=>{i.target.complete()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var i=this;if(!this.board.board_title)return void(0,n.B)(this.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(O=>{O.present()});let c=O=>{(0,n.B)(this.toastController,{},O).then(I=>{I.present()}),0==(null==O?void 0:O.returncode)&&(this.modalController.dismiss(null==O?void 0:O.id,"confirm"),"modal-board"==this.openFrom&&(0,M.Z)(function*(){const I=yield i.modalController.create({component:f.F,componentProps:{currentId:i.currentId,selectedId:null==O?void 0:O.id},mode:"ios",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});I.onDidDismiss().then(F=>{if("confirm"==F.role&&F.data){let J=F.data;var w;J.board_id&&window.open(`editor?b=${J.board_id}#${null===(w=J.board_title)||void 0===w?void 0:w.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),I.present()})())};var g,C;this.selectedId?(0,P.Z6)({loading:O=>{this.isloading=O},params:Object.assign({},this.board,{userid:null===(g=this.user)||void 0===g?void 0:g.userid,board_id:this.selectedId}),callback:c}):(0,P.Ux)({loading:O=>{this.isloading=O},params:Object.assign({},this.board,{userid:null===(C=this.user)||void 0===C?void 0:C.userid}),callback:c})}changeTopic(i,c){Object.assign(this.board,{topic_id:i,topic_title:c})}clearTopic(){Object.assign(this.board,{topic_id:null,topic_title:null})}presentPopoverTopic(i){var c=this;return(0,M.Z)(function*(){const g=yield c.popoverController.create({component:r.a,componentProps:{selectedId:c.board.topic_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(C=>{var O,I;"confirm"==C.role&&Object.assign(c.board,{topic_id:null===(O=C.data)||void 0===O?void 0:O.topic_id,topic_title:null===(I=C.data)||void 0===I?void 0:I.topic_title})}),g.present()})()}changeCategory(i,c){Object.assign(this.board,{category_id:i,category_title:c})}clearCategory(){Object.assign(this.board,{category_id:null,category_title:null})}presentPopoverCategory(i){var c=this;return(0,M.Z)(function*(){const g=yield c.popoverController.create({component:h.l,componentProps:{selectedId:c.board.category_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(C=>{var O,I;"confirm"==C.role&&Object.assign(c.board,{category_id:null===(O=C.data)||void 0===O?void 0:O.category_id,category_title:null===(I=C.data)||void 0===I?void 0:I.category_title})}),g.present()})()}changeBoardTitle(i){var c;this.board.board_title=null==i||null===(c=i.target)||void 0===c?void 0:c.value}changeBoardDescription(i){this.board.board_description=i}changeBoardContent(i){this.board.board_content=i}coverLoad(i,c){let g=[null!=c&&c.cover?this.readfileuploadurl+(null==c?void 0:c.cover):void 0,this.coverUrl+(null==c?void 0:c.board_id)+"/cover.svg",this.coverv1Url+(null==c?void 0:c.board_id)+"/cover.png"].filter(O=>!!O),C=O=>{if(!O)return;let I=new Image;I.onload=()=>{console.log(`onload -> ${I.src}`),i.target.setAttribute("src",O)},I.onerror=()=>{console.log(`onerror -> ${I.src}`),C(g.shift())},I.src=O};C(g.shift())}selectItem(i){this.selectedId=i}}return(o=l).\u0275fac=function(i){return new(i||o)(e.Y36(T.IN),e.Y36(T.yF),e.Y36(T.Dh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-board-add"]],inputs:{currentId:"currentId",openFrom:"openFrom",board:"board"},decls:36,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"disabled","click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","flex-column","flex-lg-row"],[1,"col-auto","col-lg-4","p-3","border-right"],[1,"ml-1","text-danger"],[3,"ngTemplateOutlet"],[1,"col","col-lg-8","p-3","flex-grow-1"],[1,"d-flex","h-100","flex-column"],[1,"flex-grow-1"],["tempForm",""],["tempTemplate",""],[1,"form-group","mb-4"],["label-placement","floating",3,"placeholder","ngModel","change"],[1,"form-group"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"placeholder","value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["name","close-outline"],[1,"py-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board",3,"click"],[1,"item-add"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-loading"],[1,"h-100",3,"animated"],[3,"ionInfinite"]],template:function(i,c){if(1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-button",0),e.NdJ("click",function(){return c.save()}),e.TgZ(6,"ion-label"),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"ion-buttons",1)(10,"ion-button",2),e.NdJ("click",function(){return c.toggleFullScreen()}),e._UZ(11,"ion-icon",3),e.qZA(),e.TgZ(12,"ion-button",4),e.NdJ("click",function(){return c.close()}),e._UZ(13,"ion-icon",5),e.qZA()()()(),e.TgZ(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div")(18,"label"),e._uU(19),e.ALo(20,"translate"),e.TgZ(21,"span",8),e._uU(22,"*"),e.qZA()()(),e.GkF(23,9),e.qZA(),e.TgZ(24,"div",10)(25,"div",11)(26,"div")(27,"label"),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",12),e.GkF(31,9),e.qZA()()()()(),e.YNc(32,D,21,17,"ng-template",null,13,e.W1O),e.YNc(34,m,16,8,"ng-template",null,14,e.W1O)),2&i){const g=e.MAs(33),C=e.MAs(35);e.xp6(3),e.Oqu(e.lcZ(4,8,"CreateLecture")),e.xp6(2),e.Q6J("disabled",c.isloading),e.xp6(2),e.Oqu(e.lcZ(8,10,"CreateNew")),e.xp6(4),e.Q6J("src",c.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.xp6(8),e.hij("",e.lcZ(20,12,"LectureInfo"),": "),e.xp6(4),e.Q6J("ngTemplateOutlet",g),e.xp6(5),e.hij("",e.lcZ(29,14,"SelectTemplate"),":"),e.xp6(3),e.Q6J("ngTemplateOutlet",C)}},dependencies:[U.sg,U.O5,U.tP,L.JJ,L.On,T.YG,T.Sm,T.W2,T.Gu,T.gu,T.Xz,T.ju,T.MB,T.pK,T.Ie,T.Q$,T.CK,T.wd,T.sr,T.j9,y.X$],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:36px;font-size:14px;outline:none;box-shadow:none;border-color:#eee;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}"]}),l})()},5744:(B,Z,d)=>{d.d(Z,{E:()=>A});var M=d(5861),x=d(4459),P=d(7090),t=d(8530),u=d(3377),r=d(8186),h=d(5938),f=d(9403),v=d(3589),n=d(5879),b=d(3536),e=d(6814),T=d(6223),U=d(3999);function L(E,D){if(1&E){const k=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(p){n.CHM(k);const m=n.oxw();return n.KtG(m.clearTopic(p))}),n._UZ(1,"ion-icon",31),n.qZA()}}function y(E,D){if(1&E){const k=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(p){n.CHM(k);const m=n.oxw();return n.KtG(m.clearCategory(p))}),n._UZ(1,"ion-icon",31),n.qZA()}}let A=(()=>{var E;class D{constructor(_,p,m,s){this.modalController=_,this.popoverController=p,this.toastController=m,this.loadingController=s,this.b=0,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var _=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){_.appsettings=yield(0,x.H0)(),_.appsettings.madonvi&&(_.user=yield(0,u.iA)(),_.readfileuploadurl=_.appsettings.readfileuploadurl||"",_.refreshData())})()}refreshData(){var _;(0,P.T6)({params:{userid:null===(_=this.user)||void 0===_?void 0:_.userid,board_id:this.b},callback:p=>{if((null==p?void 0:p.board_id)==this.b)return this.board=p,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var _=this;return(0,M.Z)(function*(){if(!_.board.board_title)return void(0,r.B)(_.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(s=>{s.present()});let p=[];_.boardCover&&p.push(new Promise((s,o)=>{var l;(0,v.z)({params:{file:_.boardCover,subFolder:`board-cover/${null!==(l=_.board.board_id)&&void 0!==l?l:0}`,fileType:"image"},callback:a=>{var i;0==(null==a?void 0:a.ReturnCode)&&(_.board.cover=a.path+"/"+(null===(i=a.file)||void 0===i?void 0:i.name)),s(!0)}})}));const m=yield _.loadingController.create({message:"\u0110ang t\u1ea3i..."});m.present(),Promise.all(p).then(s=>{var o;(0,t.Ux)({params:Object.assign({},_.board,{userid:null===(o=_.user)||void 0===o?void 0:o.userid}),callback:l=>{(0,r.B)(_.toastController,{},l).then(a=>{a.present()}),0==(null==l?void 0:l.returncode)&&_.modalController.dismiss(null==l?void 0:l.id,"confirm")},loading:l=>{l||m.dismiss()}})})})()}presentPopoverTopic(_){var p=this;return(0,M.Z)(function*(){const m=yield p.popoverController.create({component:h.a,componentProps:{selectedId:p.board.topic_id,filterFor:"board"},event:_,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(s=>{var o,l;"confirm"==s.role&&Object.assign(p.board,{topic_id:null===(o=s.data)||void 0===o?void 0:o.topic_id,topic_title:null===(l=s.data)||void 0===l?void 0:l.topic_title})}),m.present()})()}clearTopic(_){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(_){this.board.topic_id=_}presentPopoverCategory(_){var p=this;return(0,M.Z)(function*(){const m=yield p.popoverController.create({component:f.l,componentProps:{selectedId:p.board.category_id,filterFor:"board"},event:_,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(s=>{var o,l;"confirm"==s.role&&Object.assign(p.board,{category_id:null===(o=s.data)||void 0===o?void 0:o.category_id,category_title:null===(l=s.data)||void 0===l?void 0:l.category_title})}),m.present()})()}clearCategory(_){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(_){this.board.category_id=_}changeBoardTitle(_){var p;this.board.board_title=null==_||null===(p=_.target)||void 0===p?void 0:p.value}changeBoardDescription(_){var p;this.board.board_description=null==_||null===(p=_.target)||void 0===p?void 0:p.value}changeBoardContent(_){var p;this.board.board_content=null==_||null===(p=_.target)||void 0===p?void 0:p.value}changeBoardCover(_){this.boardCover=void 0,_.target.files.length&&(this.boardCover=_.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var _,p,m,s,o,l,a,i,c,g,C;let O=[null!==(_=this.board)&&void 0!==_&&_.cover?`${null!==(p=this.appsettings.readfileuploadurl)&&void 0!==p?p:""}${null===(m=this.board)||void 0===m?void 0:m.cover}`:void 0,null!==(s=this.board)&&void 0!==s&&s.board_id?`${null!==(o=this.appsettings.readfileuploadurl)&&void 0!==o?o:""}${null!==(l=this.appsettings.boardpath)&&void 0!==l?l:""}${null===(a=this.board)||void 0===a?void 0:a.board_id}/cover.svg`:void 0,null!==(i=this.board)&&void 0!==i&&i.board_id?`${null!==(c=this.appsettings.readfileuploadurl)&&void 0!==c?c:""}${null!==(g=this.appsettings.boardpathv1)&&void 0!==g?g:""}${null===(C=this.board)||void 0===C?void 0:C.board_id}/cover.png`:void 0].filter(F=>!!F),I=F=>{if(!F)return;let w=new Image;w.onload=()=>{console.log(`onload -> ${w.src}`),this.coverUrl=F},w.onerror=()=>{console.log(`onerror -> ${w.src}`),I(O.shift())},w.src=F};O.length&&I(O.shift())}}return(E=D).\u0275fac=function(_){return new(_||E)(n.Y36(b.IN),n.Y36(b.Dh),n.Y36(b.yF),n.Y36(b.HT))},E.\u0275cmp=n.Xpm({type:E,selectors:[["app-modal-board-update"]],inputs:{b:"b"},decls:76,vars:34,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","h-100","py-3"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","7",1,"form-control",3,"ngModel","change"],[1,"col-lg-6","col-cover"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"flex-grow-1"],[1,"input-group","h-100"],["rows","12",1,"form-control",3,"ngModel","change"],["name","close-outline"]],template:function(_,p){if(1&_&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ion-button",0),n.NdJ("click",function(){return p.save()}),n.TgZ(6,"ion-label"),n._uU(7),n.ALo(8,"translate"),n.qZA()(),n.TgZ(9,"ion-buttons",1)(10,"ion-button",2),n.NdJ("click",function(){return p.toggleFullScreen()}),n._UZ(11,"ion-icon",3),n.qZA(),n.TgZ(12,"ion-button",4),n.NdJ("click",function(){return p.close()}),n._UZ(13,"ion-icon",5),n.qZA()()()(),n.TgZ(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div",8)(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"label",13),n._uU(23),n.ALo(24,"translate"),n.qZA()(),n._UZ(25,"input",14),n.TgZ(26,"div",15),n.YNc(27,L,2,0,"button",16),n.TgZ(28,"button",17),n.NdJ("click",function(s){return p.presentPopoverTopic(s)}),n._UZ(29,"ion-icon",18),n.qZA()()()(),n.TgZ(30,"div",10)(31,"div",11)(32,"div",12)(33,"label",13),n._uU(34),n.ALo(35,"translate"),n.qZA()(),n._UZ(36,"input",14),n.TgZ(37,"div",15),n.YNc(38,y,2,0,"button",16),n.TgZ(39,"button",17),n.NdJ("click",function(s){return p.presentPopoverCategory(s)}),n._UZ(40,"ion-icon",18),n.qZA()()()(),n.TgZ(41,"div",10)(42,"div",11)(43,"div",12)(44,"label",13),n._uU(45),n.ALo(46,"translate"),n.qZA()(),n.TgZ(47,"input",19),n.NdJ("change",function(s){return p.changeBoardTitle(s)}),n.qZA()()(),n.TgZ(48,"div",10)(49,"div",11)(50,"div",12)(51,"label",13),n._uU(52),n.ALo(53,"translate"),n.qZA()(),n.TgZ(54,"textarea",20),n.NdJ("change",function(s){return p.changeBoardDescription(s)}),n.qZA()()()(),n.TgZ(55,"div",21)(56,"div",10)(57,"div",11)(58,"div",12)(59,"label",13),n._uU(60),n.ALo(61,"translate"),n.qZA()(),n.TgZ(62,"div",22)(63,"input",23),n.NdJ("change",function(s){return p.changeBoardCover(s)}),n.qZA(),n._UZ(64,"label",24),n.qZA()()(),n.TgZ(65,"div",10)(66,"div",25)(67,"div",26),n._UZ(68,"ion-img",27),n.qZA()()()()(),n.TgZ(69,"div",28)(70,"div",29)(71,"div",12)(72,"label",13),n._uU(73),n.ALo(74,"translate"),n.qZA()(),n.TgZ(75,"textarea",30),n.NdJ("change",function(s){return p.changeBoardContent(s)}),n.qZA()()()()()()),2&_){let m,s;n.xp6(3),n.Oqu(n.lcZ(4,18,"UpdateLectureInformation")),n.xp6(4),n.Oqu(n.lcZ(8,20,"Update")),n.xp6(4),n.Q6J("src",p.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(12),n.Oqu(n.lcZ(24,22,"GradeLevel")),n.xp6(2),n.Q6J("value",null!==(m=p.board.topic_title)&&void 0!==m?m:""),n.xp6(2),n.Q6J("ngIf",p.board.topic_id),n.xp6(7),n.Oqu(n.lcZ(35,24,"Subject")),n.xp6(2),n.Q6J("value",null!==(s=p.board.category_title)&&void 0!==s?s:""),n.xp6(2),n.Q6J("ngIf",p.board.category_id),n.xp6(7),n.Oqu(n.lcZ(46,26,"LectureName")),n.xp6(2),n.Q6J("ngModel",p.board.board_title),n.xp6(5),n.Oqu(n.lcZ(53,28,"Description")),n.xp6(2),n.Q6J("ngModel",p.board.board_description),n.xp6(6),n.Oqu(n.lcZ(61,30,"Cover")),n.xp6(8),n.Q6J("src",p.fileurl||p.coverUrl||"assets/image/no-image.svg")("alt",p.board.board_title),n.xp6(5),n.Oqu(n.lcZ(74,32,"Content")),n.xp6(2),n.Q6J("ngModel",p.board.board_content)}},dependencies:[e.O5,T.Fj,T.JJ,T.On,b.YG,b.Sm,b.W2,b.Gu,b.gu,b.Xz,b.Q$,b.wd,b.sr,U.X$],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),D})()},7050:(B,Z,d)=>{d.d(Z,{z:()=>r});var M=d(2695),x=d(553),P=d(5879),t=d(3536),u=d(5470);let r=(()=>{var h;class f{constructor(n){this.modalController=n,this.b=0,this.w=1366,this.h=768,this.APP_ROUTE=M.z,this.isfullscreen=!1,this.version=x.N.version}ngOnInit(){this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}load(n){this.iframe=n.target}}return(h=f).\u0275fac=function(n){return new(n||h)(P.Y36(t.IN))},h.\u0275cmp=P.Xpm({type:h,selectors:[["app-modal-board-viewer"]],inputs:{b:"b",w:"w",h:"h"},decls:10,vars:5,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"src","load"]],template:function(n,b){1&n&&(P.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),P.NdJ("click",function(){return b.toggleFullScreen()}),P._UZ(4,"ion-icon",2),P.qZA(),P.TgZ(5,"ion-button",3),P.NdJ("click",function(){return b.close()}),P._UZ(6,"ion-icon",4),P.qZA()()()(),P.TgZ(7,"ion-content")(8,"iframe",5),P.NdJ("load",function(T){return b.load(T)}),P.ALo(9,"safe"),P.qZA()()),2&n&&(P.xp6(4),P.Q6J("src",b.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),P.xp6(4),P.Q6J("src",P.xi3(9,2,b.APP_ROUTE.EMBED+"?b="+b.b+"&v="+b.version,"resourceUrl"),P.uOi))},dependencies:[t.YG,t.Sm,t.W2,t.Gu,t.gu,t.sr,u.y],styles:["iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),f})()},8526:(B,Z,d)=>{d.d(Z,{F:()=>k});var M=d(5861),x=d(4459),P=d(7090),t=d(5938),u=d(9403),r=d(3377),h=d(4531),f=d(5744),v=d(7050),n=d(5879),b=d(6916),e=d(3536),T=d(6814),U=d(3999);function L(_,p){if(1&_){const m=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(o){n.CHM(m);const l=n.oxw();return n.KtG(l.clearFilterTopic(o))}),n._UZ(1,"ion-icon",31),n.qZA()}}function y(_,p){if(1&_){const m=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(o){n.CHM(m);const l=n.oxw();return n.KtG(l.clearFilterCategory(o))}),n._UZ(1,"ion-icon",31),n.qZA()}}function A(_,p){if(1&_){const m=n.EpF();n.ynx(0),n.TgZ(1,"div",32),n.NdJ("click",function(){const l=n.CHM(m).$implicit,a=n.oxw();return n.KtG(a.selectItem(l.board_id))})("dblclick",function(){const l=n.CHM(m).$implicit,a=n.oxw();return n.KtG(a.openEditor(l.board_id))}),n.TgZ(2,"div",33)(3,"div",34)(4,"div",21)(5,"div",22)(6,"ion-img",35),n.NdJ("ionImgDidLoad",function(o){const a=n.CHM(m).$implicit,i=n.oxw();return n.KtG(i.coverLoad(o,a))}),n.qZA()()()(),n.TgZ(7,"div",36)(8,"div",37)(9,"button",38),n.NdJ("click",function(){const l=n.CHM(m).$implicit,a=n.oxw();return n.KtG(a.openViewer(l.board_id))}),n._UZ(10,"ion-icon",39),n.qZA(),n.TgZ(11,"button",38),n.NdJ("click",function(){const l=n.CHM(m).$implicit,a=n.oxw();return n.KtG(a.openEditor(l.board_id))}),n._UZ(12,"ion-icon",40),n.qZA()()()(),n.TgZ(13,"div",41),n._uU(14),n.qZA()(),n.BQk()}if(2&_){const m=p.$implicit,s=n.oxw();n.xp6(1),n.Tol(m.board_id==s.selectedId?"selected":m.board_id==s.currentId?"actived":""),n.xp6(5),n.Q6J("alt",m.board_title),n.xp6(7),n.Q6J("title",m.board_title),n.xp6(1),n.Oqu(m.board_title)}}function E(_,p){1&_&&(n.ynx(0),n.TgZ(1,"div",19)(2,"div",42)(3,"div",21)(4,"div",22),n._UZ(5,"ion-skeleton-text",43),n.qZA()()(),n.TgZ(6,"div",27),n._UZ(7,"ion-skeleton-text",44),n.qZA()(),n.BQk()),2&_&&(n.xp6(5),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0))}function D(_,p){if(1&_){const m=n.EpF();n.TgZ(0,"ion-infinite-scroll",45),n.NdJ("ionInfinite",function(o){n.CHM(m);const l=n.oxw();return n.KtG(l.onIonInfinite(o))}),n._UZ(1,"ion-infinite-scroll-content"),n.qZA()}}let k=(()=>{var _;class p{constructor(s,o,l,a){this.router=s,this.activatedRoute=o,this.modalController=l,this.popoverController=a,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.paging={sortfield:null,sorttype:null,page:1,limit:50,loading:!1,active:!0},this.filter={},this.boards=[]}ngOnInit(){var s=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){var o,l,a,i,c;s.appsettings=yield(0,x.H0)(),s.appsettings.madonvi&&(s.user=yield(0,r.iA)(),s.readfileuploadurl=null!==(o=s.appsettings.readfileuploadurl)&&void 0!==o?o:"",s.coverUrl=`${null!==(l=s.appsettings.readfileuploadurl)&&void 0!==l?l:""}${null!==(a=s.appsettings.boardpath)&&void 0!==a?a:""}`,s.coverv1Url=`${null!==(i=s.appsettings.readfileuploadurl)&&void 0!==i?i:""}${null!==(c=s.appsettings.boardpathv1)&&void 0!==c?c:""}`,s.refreshData())})()}ngAfterViewInit(){}selectItem(s){this.currentId!=s&&(this.selectedId=s)}openViewer(s){var o=this;return(0,M.Z)(function*(){s&&(yield o.modalController.create({component:v.z,componentProps:{b:s},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0})).present()})()}openEditor(s){s&&this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{b:s,n:null},queryParamsHandling:"merge",replaceUrl:!0}).finally(()=>{window.location.reload()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){return this.modalController.dismiss(this.boards.find(s=>s.board_id==this.selectedId),"confirm")}coverLoad(s,o){let l=[null!=o&&o.cover?this.readfileuploadurl+(null==o?void 0:o.cover):void 0,this.coverUrl+(null==o?void 0:o.board_id)+"/cover.svg",this.coverv1Url+(null==o?void 0:o.board_id)+"/cover.png"].filter(i=>!!i),a=i=>{if(!i)return;let c=new Image;c.onload=()=>{console.log(`onload -> ${c.src}`),s.target.setAttribute("src",i)},c.onerror=()=>{console.log(`onerror -> ${c.src}`),a(l.shift())},c.src=i};a(l.shift())}onIonInfinite(s){this.loadMore(()=>{s.target.complete()})}loadData_Paging(s){var o;this.paging.loading=!0,(0,P.GW)({params:{userid:null===(o=this.user)||void 0===o?void 0:o.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:l=>{this.boards=this.boards.concat(l||[]),this.paging.loading=!1,(!(null!=l&&l.length)||(null==l?void 0:l.length)<this.paging.limit)&&(this.paging.active=!1),s&&s()}})}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadMore(s){this.paging.page+=1,this.loadData_Paging(s)}searchChange(s){this.filter.search=s.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}sortChange(s,o){this.paging.sortfield=s||null,this.paging.sorttype=o||null,this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}presentModalBoardAdd(s){var o=this;return(0,M.Z)(function*(){o.modalController.dismiss(null,"close2open-modal-add"),(yield o.modalController.create({component:h.e,componentProps:{currentId:o.currentId,openFrom:"modal-board"},mode:"md",cssClass:"ion-modal-xl",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardUpdate(s){var o=this;return(0,M.Z)(function*(){const l=yield o.modalController.create({component:f.E,mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});l.onDidDismiss().then(a=>{"confirm"==a.role&&a.data&&o.refreshData()}),l.present()})()}clearFilterTopic(s){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}presentPopoverTopic(s){var o=this;return(0,M.Z)(function*(){const l=yield o.popoverController.create({component:t.a,componentProps:{selectedId:o.filter.topic_id,filterFor:"board"},event:s,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(a=>{var i,c;"confirm"==a.role&&(Object.assign(o.filter,{topic_id:null===(i=a.data)||void 0===i?void 0:i.topic_id,topic_title:null===(c=a.data)||void 0===c?void 0:c.topic_title}),o.filterChange())}),l.present()})()}clearFilterCategory(s){Object.assign(this.filter,{category_id:null,category_title:null}),this.filterChange()}presentPopoverCategory(s){var o=this;return(0,M.Z)(function*(){const l=yield o.popoverController.create({component:u.l,componentProps:{selectedId:o.filter.category_id,filterFor:"board"},event:s,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(a=>{var i,c;"confirm"==a.role&&(Object.assign(o.filter,{category_id:null===(i=a.data)||void 0===i?void 0:i.category_id,category_title:null===(c=a.data)||void 0===c?void 0:c.category_title}),o.filterChange())}),l.present()})()}}return(_=p).\u0275fac=function(s){return new(s||_)(n.Y36(b.F0),n.Y36(b.gz),n.Y36(e.IN),n.Y36(e.Dh))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-modal-board"]],inputs:{currentId:"currentId",selectedId:"selectedId"},decls:54,vars:24,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"px-3"],[1,"row"],[1,"col-12","col-lg-4","my-3"],[1,"searchbox"],["mode","ios","inputmode","search","search-icon","","show-clear-button","never","show-cancel-button","never",3,"placeholder","debounce","ionInput"],[1,"col-6","col-lg-4","my-3"],[1,"input-group"],["type","text",1,"form-control",3,"placeholder","value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],[1,"py-3","p-lg-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-add",3,"click"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"text-center"],[1,"icon-add"],["src","../../../../assets/icon/16x16/add.svg"],[1,"item-name","line-clamp-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["name","close-outline"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click","dblclick"],[1,"position-relative"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"position-absolute","top-0","bottom-0","left-0","right-0","item-action"],[1,"position-absolute","bottom-0","right-0"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/view.svg"],["src","../../../../assets/icon/16x16/edit.svg"],[1,"item-name","line-clamp-2",3,"title"],[1,"item-loading"],[1,"h-100",3,"animated"],[2,"width","75%",3,"animated"],[3,"ionInfinite"]],template:function(s,o){if(1&s&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ion-buttons",0)(6,"ion-button",1),n.NdJ("click",function(){return o.toggleFullScreen()}),n._UZ(7,"ion-icon",2),n.qZA(),n.TgZ(8,"ion-button",3),n.NdJ("click",function(){return o.close()}),n._UZ(9,"ion-icon",4),n.qZA()()(),n.TgZ(10,"ion-toolbar")(11,"div",5)(12,"div",6)(13,"div",7)(14,"div",8)(15,"ion-searchbar",9),n.NdJ("ionInput",function(a){return o.searchChange(a)}),n.ALo(16,"translate"),n.qZA()()(),n.TgZ(17,"div",10)(18,"div",11),n._UZ(19,"input",12),n.ALo(20,"translate"),n.TgZ(21,"div",13),n.YNc(22,L,2,0,"button",14),n.TgZ(23,"button",15),n.NdJ("click",function(a){return o.presentPopoverTopic(a)}),n._UZ(24,"ion-icon",16),n.qZA()()()(),n.TgZ(25,"div",10)(26,"div",11),n._UZ(27,"input",12),n.ALo(28,"translate"),n.TgZ(29,"div",13),n.YNc(30,y,2,0,"button",14),n.TgZ(31,"button",15),n.NdJ("click",function(a){return o.presentPopoverCategory(a)}),n._UZ(32,"ion-icon",16),n.qZA()()()()()()()(),n.TgZ(33,"ion-content")(34,"div",17)(35,"div",18)(36,"div",19)(37,"div")(38,"div",20),n.NdJ("click",function(a){return o.presentModalBoardAdd(a)}),n.TgZ(39,"div",21)(40,"div",22)(41,"div",23)(42,"div")(43,"div",24)(44,"div",25),n._UZ(45,"ion-icon",26),n.qZA()(),n.TgZ(46,"div"),n._uU(47),n.ALo(48,"translate"),n.qZA()()()()()(),n.TgZ(49,"div",27),n._uU(50,"\xa0"),n.qZA()()(),n.YNc(51,A,15,5,"ng-container",28),n.YNc(52,E,8,2,"ng-container",29),n.qZA()(),n.YNc(53,D,2,0,"ion-infinite-scroll",30),n.qZA()),2&s){let l,a;n.xp6(3),n.Oqu(n.lcZ(4,14,"MyLecture")),n.xp6(4),n.Q6J("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(8),n.MGl("placeholder","",n.lcZ(16,16,"Search")," ..."),n.Q6J("debounce",1e3),n.xp6(4),n.s9C("placeholder",n.lcZ(20,18,"GradeLevel")),n.Q6J("value",null!==(l=o.filter.topic_title)&&void 0!==l?l:""),n.xp6(3),n.Q6J("ngIf",o.filter.topic_id),n.xp6(5),n.s9C("placeholder",n.lcZ(28,20,"Subject")),n.Q6J("value",null!==(a=o.filter.category_title)&&void 0!==a?a:""),n.xp6(3),n.Q6J("ngIf",o.filter.category_id),n.xp6(17),n.Oqu(n.lcZ(48,22,"CreateLecture")),n.xp6(4),n.Q6J("ngForOf",o.boards),n.xp6(1),n.Q6J("ngIf",o.paging.loading),n.xp6(1),n.Q6J("ngIf",o.paging.active)}},dependencies:[T.sg,T.O5,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.Xz,e.ju,e.MB,e.VI,e.CK,e.wd,e.sr,e.j9,U.X$],styles:[".item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #8F9BB3;background:#FFF}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{height:40px;padding:0;--color: #333;--background: transparent;--box-shadow: none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-size:14px;outline:none;box-shadow:none;border-color:#8f9bb3;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-primary-shade, #000)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium, #999)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}"]}),p})()},9403:(B,Z,d)=>{d.d(Z,{l:()=>s});var M=d(5861),x=d(1461),P=d(3377),t=d(5879),u=d(3536),r=d(6814),h=d(3999);function f(o,l){1&o&&t.GkF(0)}function v(o,l){1&o&&(t.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),t._UZ(3,"ion-spinner",8),t.qZA()()())}function n(o,l){1&o&&t.GkF(0)}function b(o,l){if(1&o&&t.YNc(0,n,1,0,"ng-container",0),2&o){const a=t.oxw(),i=t.MAs(6),c=t.MAs(8);t.Q6J("ngIf",!(null!=a.categorys&&a.categorys.length))("ngIfThen",i)("ngIfElse",c)}}function e(o,l){1&o&&(t.TgZ(0,"div",9)(1,"small",10),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"DataNotFound")))}const T=function(o){return{$implicit:o}};function U(o,l){if(1&o&&t.GkF(0,13),2&o){const a=l.$implicit;t.oxw(2);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,T,a))}}function L(o,l){if(1&o&&(t.TgZ(0,"div",11)(1,"ul"),t.YNc(2,U,1,4,"ng-container",12),t.qZA()()),2&o){const a=t.oxw();t.xp6(2),t.Q6J("ngForOf",a.filterCategory(a.categorys))}}function y(o,l){1&o&&t._UZ(0,"ion-icon",21)}function A(o,l){1&o&&t._UZ(0,"ion-icon",22)}function E(o,l){1&o&&t._UZ(0,"ion-spinner",23)}function D(o,l){if(1&o&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&o){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.total_board)}}function k(o,l){if(1&o&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&o){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.total_media)}}function _(o,l){if(1&o&&t.GkF(0,13),2&o){const a=l.$implicit;t.oxw(3);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,T,a))}}function p(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,_,1,4,"ng-container",12),t.qZA(),t.BQk()),2&o){const a=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.filterCategory(i.categorys,a.category_id))}}function m(o,l){if(1&o){const a=t.EpF();t.TgZ(0,"li")(1,"ion-item",14),t.NdJ("click",function(){const g=t.CHM(a).$implicit,C=t.oxw();return t.KtG(C.filterChange(g.category_id))}),t.TgZ(2,"ion-button",15),t.NdJ("click",function(c){const C=t.CHM(a).$implicit,O=t.oxw();return t.KtG(O.expandCategory(c,C.category_id,C.isexpanded))}),t.YNc(3,y,1,0,"ion-icon",16),t.YNc(4,A,1,0,"ion-icon",17),t.YNc(5,E,1,0,"ion-spinner",18),t.qZA(),t.TgZ(6,"ion-label"),t._uU(7),t.qZA(),t.YNc(8,D,2,1,"ion-badge",19),t.YNc(9,k,2,1,"ion-badge",19),t.qZA(),t.YNc(10,p,3,1,"ng-container",20),t.qZA()}if(2&o){const a=l.$implicit,i=t.oxw();t.xp6(1),t.uIk("color",a.category_id==i.selectedId?"primary":""),t.xp6(1),t.uIk("style",a.ishaschild?"visibility:unset":"visibility:hidden",t.Ckj),t.xp6(1),t.Q6J("ngIf",!a.isexpanded),t.xp6(1),t.Q6J("ngIf",a.isexpanded&&!1===a.loading),t.xp6(1),t.Q6J("ngIf",a.isexpanded&&!1!==a.loading),t.xp6(2),t.Oqu(a.category_title),t.xp6(1),t.Q6J("ngIf","board"==i.filterFor&&a.total_board),t.xp6(1),t.Q6J("ngIf","media"==i.filterFor&&a.total_media),t.xp6(1),t.Q6J("ngIf",a.isexpanded)}}let s=(()=>{var o;class l{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.categorys=[]}ngOnInit(){var i=this;(0,M.Z)(function*(){i.user=yield(0,P.iA)(),i.loadCategory()})()}loadCategory(i){var c;(0,x.b)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,category_pid:null==i?void 0:i.category_id,active:!0,page:1,limit:-1},callback:g=>{this.categorys=this.categorys.concat(g||[])}})}filterCategory(i,c){return i.filter(c?g=>g.category_pid==c:g=>null==g.category_pid||0==g.category_pid)}expandCategory(i,c,g){i.preventDefault(),i.stopPropagation(),this.categorys.filter(C=>C.category_id==c).forEach(C=>{C.isexpanded=!g,C.isloadedchild||(C.isloadedchild=!0,this.loadCategory(C))})}filterChange(i){this.popoverController.dismiss(this.categorys.find(c=>c.category_id==i),"confirm")}}return(o=l).\u0275fac=function(i){return new(i||o)(t.Y36(u.Dh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-popover-category"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-category","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,c){if(1&i&&(t.YNc(0,f,1,0,"ng-container",0),t.YNc(1,v,4,0,"ng-template",null,1,t.W1O),t.YNc(3,b,1,3,"ng-template",null,2,t.W1O),t.YNc(5,e,4,3,"ng-template",null,3,t.W1O),t.YNc(7,L,3,1,"ng-template",null,4,t.W1O),t.YNc(9,m,11,9,"ng-template",null,5,t.W1O)),2&i){const g=t.MAs(2),C=t.MAs(4);t.Q6J("ngIf",!(null!=c.categorys&&c.categorys.length)&&!1!==c.response.loading)("ngIfThen",g)("ngIfElse",C)}},dependencies:[r.sg,r.O5,r.tP,u.yp,u.YG,u.W2,u.gu,u.Ie,u.Q$,u.PQ,h.X$],styles:[".menu-category[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),l})()},5938:(B,Z,d)=>{d.d(Z,{a:()=>s});var M=d(5861),x=d(4041),P=d(3377),t=d(5879),u=d(3536),r=d(6814),h=d(3999);function f(o,l){1&o&&t.GkF(0)}function v(o,l){1&o&&(t.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),t._UZ(3,"ion-spinner",8),t.qZA()()())}function n(o,l){1&o&&t.GkF(0)}function b(o,l){if(1&o&&t.YNc(0,n,1,0,"ng-container",0),2&o){const a=t.oxw(),i=t.MAs(6),c=t.MAs(8);t.Q6J("ngIf",!(null!=a.topics&&a.topics.length))("ngIfThen",i)("ngIfElse",c)}}function e(o,l){1&o&&(t.TgZ(0,"div",9)(1,"small",10),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"DataNotFound")))}const T=function(o){return{$implicit:o}};function U(o,l){if(1&o&&t.GkF(0,13),2&o){const a=l.$implicit;t.oxw(2);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,T,a))}}function L(o,l){if(1&o&&(t.TgZ(0,"div",11)(1,"ul"),t.YNc(2,U,1,4,"ng-container",12),t.qZA()()),2&o){const a=t.oxw();t.xp6(2),t.Q6J("ngForOf",a.filterTopic(a.topics))}}function y(o,l){1&o&&t._UZ(0,"ion-icon",21)}function A(o,l){1&o&&t._UZ(0,"ion-icon",22)}function E(o,l){1&o&&t._UZ(0,"ion-spinner",23)}function D(o,l){if(1&o&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&o){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.total_board)}}function k(o,l){if(1&o&&(t.TgZ(0,"ion-badge",24),t._uU(1),t.qZA()),2&o){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.total_media)}}function _(o,l){if(1&o&&t.GkF(0,13),2&o){const a=l.$implicit;t.oxw(3);const i=t.MAs(10);t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,T,a))}}function p(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"ul"),t.YNc(2,_,1,4,"ng-container",12),t.qZA(),t.BQk()),2&o){const a=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.filterTopic(i.topics,a.topic_id))}}function m(o,l){if(1&o){const a=t.EpF();t.TgZ(0,"li")(1,"ion-item",14),t.NdJ("click",function(){const g=t.CHM(a).$implicit,C=t.oxw();return t.KtG(C.filterChange(g.topic_id))}),t.TgZ(2,"ion-button",15),t.NdJ("click",function(c){const C=t.CHM(a).$implicit,O=t.oxw();return t.KtG(O.expandTopic(c,C.topic_id,C.isexpanded))}),t.YNc(3,y,1,0,"ion-icon",16),t.YNc(4,A,1,0,"ion-icon",17),t.YNc(5,E,1,0,"ion-spinner",18),t.qZA(),t.TgZ(6,"ion-label"),t._uU(7),t.qZA(),t.YNc(8,D,2,1,"ion-badge",19),t.YNc(9,k,2,1,"ion-badge",19),t.qZA(),t.YNc(10,p,3,1,"ng-container",20),t.qZA()}if(2&o){const a=l.$implicit,i=t.oxw();t.xp6(1),t.uIk("color",a.topic_id==i.selectedId?"primary":""),t.xp6(1),t.uIk("style",a.ishaschild?"visibility:unset":"visibility:hidden",t.Ckj),t.xp6(1),t.Q6J("ngIf",!a.isexpanded),t.xp6(1),t.Q6J("ngIf",a.isexpanded&&!1===a.loading),t.xp6(1),t.Q6J("ngIf",a.isexpanded&&!1!==a.loading),t.xp6(2),t.Oqu(a.topic_title),t.xp6(1),t.Q6J("ngIf","board"==i.filterFor&&a.total_board),t.xp6(1),t.Q6J("ngIf","media"==i.filterFor&&a.total_media),t.xp6(1),t.Q6J("ngIf",a.isexpanded)}}let s=(()=>{var o;class l{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.topics=[]}ngOnInit(){var i=this;(0,M.Z)(function*(){i.user=yield(0,P.iA)(),i.loadTopic()})()}loadTopic(i){var c;(0,x.w)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,topic_pid:null==i?void 0:i.topic_id,active:!0,page:1,limit:-1},callback:g=>{this.topics=this.topics.concat(g||[])}})}filterTopic(i,c){return i.filter(c?g=>g.topic_pid==c:g=>null==g.topic_pid||0==g.topic_pid)}expandTopic(i,c,g){i.preventDefault(),i.stopPropagation(),this.topics.filter(C=>C.topic_id==c).forEach(C=>{C.isexpanded=!g,C.isloadedchild||(C.isloadedchild=!0,this.loadTopic(C))})}filterChange(i){this.popoverController.dismiss(this.topics.find(c=>c.topic_id==i),"confirm")}}return(o=l).\u0275fac=function(i){return new(i||o)(t.Y36(u.Dh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-popover-topic"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-topic","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,c){if(1&i&&(t.YNc(0,f,1,0,"ng-container",0),t.YNc(1,v,4,0,"ng-template",null,1,t.W1O),t.YNc(3,b,1,3,"ng-template",null,2,t.W1O),t.YNc(5,e,4,3,"ng-template",null,3,t.W1O),t.YNc(7,L,3,1,"ng-template",null,4,t.W1O),t.YNc(9,m,11,9,"ng-template",null,5,t.W1O)),2&i){const g=t.MAs(2),C=t.MAs(4);t.Q6J("ngIf",!(null!=c.topics&&c.topics.length)&&!1!==c.response.loading)("ngIfThen",g)("ngIfElse",C)}},dependencies:[r.sg,r.O5,r.tP,u.yp,u.YG,u.W2,u.gu,u.Ie,u.Q$,u.PQ,h.X$],styles:[".menu-topic[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),l})()},9074:(B,Z,d)=>{d.d(Z,{V:()=>h});var M=d(6814),x=d(6223),P=d(3536),t=d(5470),u=d(2630),r=d(5879);let h=(()=>{var f;class v{}return(f=v).\u0275fac=function(b){return new(b||f)},f.\u0275mod=r.oAB({type:f}),f.\u0275inj=r.cJS({imports:[M.ez,x.u5,P.Pc,t.Z,u.L,t.Z,u.L]}),v})()},9018:(B,Z,d)=>{d.d(Z,{Be:()=>r,C0:()=>t,W6:()=>h,gk:()=>u,iD:()=>P});var M=d(5861),x=d(8526);const P=function(){var f=(0,M.Z)(function*(v,n){const b=yield v.create({component:x.F,componentProps:{currentId:null==n?void 0:n.board_id},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});b.onDidDismiss().then(e=>{if("confirm"==e.role&&e.data){let U=e.data;var T;U.board_id&&window.open(`editor?b=${U.board_id}#${null===(T=U.board_title)||void 0===T?void 0:T.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),b.present()});return function(n,b){return f.apply(this,arguments)}}(),t=(f,v)=>{const n=v.shadowRoot,b=f.create().addElement(null==n?void 0:n.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),e=f.create().addElement(null==n?void 0:n.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(-100%)"},{offset:1,transform:"translateX(0%)"}]);return f.create().addElement(v).easing("ease-out").duration(300).addAnimation([b,e])},u=(f,v)=>t(f,v).direction("reverse"),r=(f,v)=>{const n=v.shadowRoot,b=f.create().addElement(null==n?void 0:n.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),e=f.create().addElement(null==n?void 0:n.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(100%)"},{offset:1,transform:"translateX(0%)"}]);return f.create().addElement(v).easing("ease-out").duration(300).addAnimation([b,e])},h=(f,v)=>r(f,v).direction("reverse")},8186:(B,Z,d)=>{d.d(Z,{B:()=>x});var M=d(5861);const x=function(){var P=(0,M.Z)(function*(t,u,r){var h,f,v;r&&(u.message||(u.message=null!==(v=null==r?void 0:r.returnmsg)&&void 0!==v?v:0==(null==r?void 0:r.returncode)?"Th\xe0nh c\xf4ng!":null!=r&&r.returncode?`L\u1ed7i: #${null==r?void 0:r.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),u.icon||(u.icon=0==(null==r?void 0:r.returncode)?"checkmark-circle-sharp":null!=r&&r.returncode?"alert-circle-outline":"close-circle-sharp"),u.color||(u.color=0==(null==r?void 0:r.returncode)?"success":null!=r&&r.returncode?"warning":"danger"));return u.position||(u.position="bottom"),u.icon||(u.icon="bulb-outline"),u.color||(u.color="secondary"),u.duration=null!==(h=u.duration)&&void 0!==h?h:3e3,u.animated=null===(f=u.animated)||void 0===f||f,u.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield t.create(u)});return function(u,r,h){return P.apply(this,arguments)}}()}}]);