"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5453],{1814:(ce,At,f)=>{f.d(At,{In:()=>dt,MA:()=>T,Mo:()=>M,NV:()=>x,S3:()=>W,dt:()=>F,h8:()=>c,k0:()=>E});const W={fill:"transparent",stroke:"#129bff",strokeWidth:1},x={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},dt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},M={fill:"transparent",stroke:"transparent",strokeWidth:1},F={fill:"none",stroke:"#5F6CE1",strokeWidth:1},c={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},T={fill:"transparent"},E={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(ce,At,f)=>{f.d(At,{w:()=>nt,I:()=>O});var W=f(4981),x=f(9054),dt=f(5811),M=/^#[a-fA-F0-9]+$/i,F=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,c=/^rgb\((\d+),(\d+),(\d+)\)$/i;const T=D=>{let J=null,ut=null;if(D)if("transparent"==D)J="#000000",ut=0;else if(D.match(M))J=D;else{let U=(D=D.replace(/\s+/g,"")).match(F);if(U)J="#"+(256|U[1]).toString(16).slice(1)+(256|U[2]).toString(16).slice(1)+(256|U[3]).toString(16).slice(1),ut=(0,dt.q)(parseFloat(U[4]),100);else{let it=D.match(c);it&&(J="#"+(256|it[1]).toString(16).slice(1)+(256|it[2]).toString(16).slice(1)+(256|it[3]).toString(16).slice(1))}}return{hex:J,alpha:ut}},O=D=>_(null==D?void 0:D.url,null==D?void 0:D.path,null==D?void 0:D.src);var _=(D,J,ut)=>{var U,it;let gt,wt,ct,tt;var P,Wt;return D&&(gt=D.replace(/\\/g,"/")),J&&(wt=J.replace(/\\/g,"/")),ut&&(ct=ut.replace(/\\/g,"/")),wt&&!gt&&(gt=(null===(P=W.icdt.config)||void 0===P?void 0:P.readfileuploadurl)+wt),!ct||wt||gt||(wt=ct.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Wt=W.icdt.config)||void 0===Wt?void 0:Wt.readfileuploadurl)+wt),tt=(null!==(U=gt)&&void 0!==U?U:"").split("/").pop()||(null!==(it=wt)&&void 0!==it?it:"").split("/").pop()||"",{url:gt,path:wt,name:tt}};const nt=D=>{let J={x:0,y:0,width:D.screen.w,height:D.screen.h},ut=[];return D.data.forEach((U,it)=>{var gt,wt;let ct={id:"number"==typeof U.id?U.id:W.icdt.data.newSlideId,code:null===(gt=U.id)||void 0===gt?void 0:gt.toString(),name:"string"==typeof U.id?U.id:`Trang ${it+1}`,svg:{viewBox:J,nodes:[]},test:(tt=U.test2,tt?(tt.audiotrue&&(tt.audiotrue=O({path:tt.audiotrue.path})),tt.audiofalse&&(tt.audiofalse=O({path:tt.audiofalse.path})),tt.effecttrue&&(tt.effecttrue=O({path:tt.effecttrue.path})),tt.effectfalse&&(tt.effectfalse=O({path:tt.effectfalse.path})),tt.icontrue&&(tt.icontrue=O({path:tt.icontrue.path})),tt.iconfalse&&(tt.iconfalse=O({path:tt.iconfalse.path})),tt):{})};var tt;U.background&&ct.svg&&(ct.svg.background=function(D){return D&&(null!==D.match(/#([a-zA-Z0-9]+)/)||null!==D.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==D.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(U.background)?{color:U.background}:function(D){return D&&null!==D.match(/data:[^;]+;base64,/)}(U.background)?{base64:U.background}:function(D){return D&&null!==D.match(/http(s)?:\/\//)}(U.background)?_(U.background):_(void 0,U.background)),jQuery(null!==(wt=U.svg)&&void 0!==wt?wt:"").find(".svg-node").each((tt,P)=>{var Wt,Ut;let Bt=jQuery(P).parents(".indexs"),Ht=Bt.attr("data-index"),kt=Bt.attr("data-time"),Gt=null!==(Wt=P.getAttribute("id"))&&void 0!==Wt?Wt:"0",ht={id:parseInt(Gt),code:`${P.nodeName}-${P.getAttribute("id")}`,name:P.nodeName,idx:Ht?parseInt(Ht):0,time:kt?parseFloat(kt):0,type:(()=>{switch(P.nodeName){case"polygon":return x.$.POLYGON;case"circle":return x.$.CIRCLE;case"ellipse":return x.$.ELLIPSE;case"line":return x.$.LINE;case"rect":return x.$.RECT;case"foreignObject":return x.$.FOREIGNOBJECT}return 0})(),size:(rt=>{let xt=0,Et=0,$t=0,yt=0,oe=null,K=null,j=parseFloat((null===(rt=P.getAttribute("transform"))||void 0===rt?void 0:rt.replace("rotate(","").replace(")",""))||"0")||null;switch(P.nodeName){case"polygon":{var h,Q;let vt=[],ft=[],Ot=999999999,Dt=999999999,jt=0,mt=0;oe=JSON.parse(P.getAttribute("ratios")||"[]"),K=null!==(h=null===(Q=P.getAttribute("points"))||void 0===Q?void 0:Q.split(",").map(function(bt){return bt.split(" ").map(function(Mt){return parseFloat(Mt)})}))&&void 0!==h?h:[],K.forEach(function(bt){vt.push(bt[0]),ft.push(bt[1])}),Ot=Math.min.apply(null,vt),Dt=Math.min.apply(null,ft),jt=Math.max.apply(null,vt),mt=Math.max.apply(null,ft),xt=Ot,Et=Dt,$t=jt-xt,yt=mt-Et;break}case"circle":{let vt=parseFloat(P.getAttribute("cx")||"0"),ft=parseFloat(P.getAttribute("cy")||"0"),Ot=parseFloat(P.getAttribute("r")||"0");xt=vt-Ot,Et=ft-Ot,$t=2*Ot,yt=2*Ot;break}case"ellipse":{let vt=parseFloat(P.getAttribute("cx")||"0"),ft=parseFloat(P.getAttribute("cy")||"0"),Ot=parseFloat(P.getAttribute("rx")||"0"),Dt=parseFloat(P.getAttribute("ry")||"0");xt=vt-Ot,Et=ft-Dt,$t=2*Ot,yt=2*Dt;break}case"line":{let vt=parseFloat(P.getAttribute("x1")||"0"),ft=parseFloat(P.getAttribute("y1")||"0"),Ot=parseFloat(P.getAttribute("x2")||"0"),Dt=parseFloat(P.getAttribute("y2")||"0"),jt=999999999,mt=999999999,bt=0,Mt=0;jt=Math.min(vt,Ot),mt=Math.min(ft,Dt),bt=Math.max(vt,Ot),Mt=Math.max(ft,Dt),xt=jt,Et=mt,$t=bt-xt,yt=Mt-Et,oe=[[(vt-xt)/($t||1),(ft-Et)/(yt||1)],[(Ot-xt)/($t||1),(Dt-Et)/(yt||1)]];break}case"rect":case"foreignObject":xt=parseFloat(P.getAttribute("x")||"0"),Et=parseFloat(P.getAttribute("y")||"0"),$t=parseFloat(P.getAttribute("width")||"0"),yt=parseFloat(P.getAttribute("height")||"0")}return Object.assign({},{x:xt,y:Et,width:$t,height:yt,ratios:oe,points:K,rotate:j})})(),attribute:(()=>{let rt={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var xt,Et,$t,yt,oe,K;let j=null!==(xt=P.getAttribute("fill"))&&void 0!==xt?xt:null,h=null!==(Et=P.getAttribute("stroke"))&&void 0!==Et?Et:null,Q=null!==($t=parseFloat(P.getAttribute("stroke-width")||"0"))&&void 0!==$t?$t:null,vt=null!==(yt=P.getAttribute("stroke-linecap"))&&void 0!==yt?yt:null,ft=null!==(oe=P.getAttribute("stroke-linejoin"))&&void 0!==oe?oe:null,Ot=null!==(K=parseFloat(P.getAttribute("stroke-dasharray")||"0"))&&void 0!==K?K:null;Object.assign(rt,{fill:j,stroke:h,strokeWidth:Q,strokeLinecap:vt,strokeLinejoin:ft,strokeDasharray:Ot});break}}return rt})(),style:(()=>{let rt={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let oe=jQuery(P).find(".svg-container");if(oe.length){var xt,Et;let j=null!==(xt=parseFloat(oe.css("border-width")||"0"))&&void 0!==xt?xt:null,h=null!==(Et=oe.css("border-style"))&&void 0!==Et?Et:null,Q=oe.css("border-color")||null,vt=null,ft=oe.css("background-color")||null,Ot=null;(()=>{let{hex:Dt,alpha:jt}=T(Q);Q=Dt,vt=jt})(),(()=>{let{hex:Dt,alpha:jt}=T(ft);ft=Dt,Ot=jt})(),Object.assign(rt,{borderWidth:j,borderStyle:h,borderColor:Q,borderOpacity:vt,backgroundColor:ft,backgroundOpacity:Ot})}let K=jQuery(P).find(".svg-editor-content");if(K.length){var $t,yt;let j=JSON.parse((K.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:h,alpha:Q}=T(j.TextColor);Object.assign(rt,{fontFamily:null!==($t=j.FontFamily)&&void 0!==$t?$t:null,fontSize:null!==(yt=j.FontSize)&&void 0!==yt?yt:null,color:h,opacity:Q})}break}}return rt})(),source:(()=>{let rt={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Bt.hasClass("editors")){let mt=jQuery(P).find(".svg-editor-content");if(mt.length){var xt;let bt=mt.html(),Mt=null!==(xt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==xt?xt:[];Object.assign(rt,{type:"html",html:{htmlContent:bt,variableKeywords:Mt}})}}else if(Bt.hasClass("inputs")||Bt.hasClass("textareas"))Object.assign(rt,{type:"input",input:{input:!!jQuery(P).find("input").length,textarea:!!jQuery(P).find("textarea").length}});else if(Bt.hasClass("tests")){let mt=jQuery(P).find(".svg-test");if(Bt.hasClass("tests-truefalse")){var Et,$t;let bt=mt.find(".svg-editor-content").html(),Mt=null!==(Et=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Et?Et:[];Object.assign(rt,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===($t=U.test2.truefalse)||void 0===$t?void 0:$t.includes(Gt)}},html:{htmlContent:bt,variableKeywords:Mt}})}else if(Bt.hasClass("tests-singlechoice")){var yt,oe;let bt=mt.find(".svg-editor-content").html(),Mt=null!==(yt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==yt?yt:[];Object.assign(rt,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(oe=U.test2.singlechoice)||void 0===oe?void 0:oe.includes(Gt)}},html:{htmlContent:bt,variableKeywords:Mt}})}else if(Bt.hasClass("tests-multichoice")){var K,j;let bt=mt.find(".svg-editor-content").html(),Mt=null!==(K=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==K?K:[];Object.assign(rt,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(j=U.test2.multichoice)||void 0===j?void 0:j.includes(Gt)}},html:{htmlContent:bt,variableKeywords:Mt}})}else if(Bt.hasClass("tests-fill")){var h,Q;let bt=mt.find(".svg-editor-content").html(),Mt=null!==(h=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==h?h:[],Yt=null!==(Q=(null!=bt?bt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Q?Q:[];Yt=Yt.filter((C,d,R)=>R.indexOf(C)==d),Object.assign(rt,{type:"test",test:{type:"fill",fill:Yt.map(C=>{var d;return{key:C,value:null===(d=U.test2.fill)||void 0===d||null===(d=d.find(R=>R.id==Gt))||void 0===d||null===(d=d.vals)||void 0===d?void 0:d.map(R=>R.text).filter(R=>!["",null,void 0,NaN].includes(R))}})},html:{htmlContent:bt,variableKeywords:Mt,fillKeywords:Yt}})}else if(Bt.hasClass("tests-matching")){if(mt.hasClass("svg-test-empty"))Object.assign(rt,{type:"test",test:{type:"matching-empty",matching:{key:mt.attr("data-name")||null}}});else if(mt.hasClass("svg-test-content")){var vt;let bt=mt.find(".svg-editor-content").html(),Mt=null!==(vt=(null!=bt?bt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==vt?vt:[];Object.assign(rt,{type:"test",test:{type:"matching-content",matching:{key:mt.attr("data-name")||null}},html:{htmlContent:bt,variableKeywords:Mt}})}}else if(Bt.hasClass("tests-speech")){var ft;Object.assign(rt,{type:"speech",speech:{value:null===(ft=U.test2.speech)||void 0===ft||null===(ft=ft.find(bt=>bt.id==Gt))||void 0===ft||null===(ft=ft.vals)||void 0===ft?void 0:ft.map(bt=>bt.text).filter(bt=>!["",null,void 0,NaN].includes(bt))}})}else if(Bt.hasClass("tests-submit")){let bt=jQuery(P).find(".svg-container img");Object.assign(rt,{type:"test",test:{type:"submit"},image:_(bt.attr("url"),bt.attr("path"),bt.attr("src"))})}}else if(Bt.hasClass("images")){let mt=jQuery(P).find(".svg-editor-content img");if(mt.length)Object.assign(rt,{type:"image",image:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))});else{let bt=jQuery(P).find("iframe");Object.assign(rt,{type:"iframe",iframe:_(bt.attr("url"),bt.attr("path"),bt.attr("src"))})}}else if(Bt.hasClass("sounds")){let mt=jQuery(P).find(".svg-editor-content img");mt.length&&Object.assign(rt,{type:"image",image:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))})}else if(Bt.hasClass("htmls")){let mt=jQuery(P).find("iframe");mt.length&&Object.assign(rt,{type:"iframe",iframe:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))})}else if(Bt.hasClass("svgs")){let mt=jQuery(P).find("svg");var Ot,Dt;mt.length&&Object.assign(rt,{type:"svg",svg:Object.assign(_(mt.attr("url"),mt.attr("path"),mt.attr("src")),{svgContent:null!==(Ot=null===(Dt=mt.get(0))||void 0===Dt?void 0:Dt.outerHTML)&&void 0!==Ot?Ot:null})})}else if(Bt.hasClass("medias")){let mt=jQuery(P).find(".media-item");if(mt.length)switch(mt.attr("type")){case"audio":Object.assign(rt,{type:"audio",audio:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))});break;case"video":Object.assign(rt,{type:"video",video:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))});break;case"file":Object.assign(rt,{type:"file",file:_(mt.attr("url"),mt.attr("path"),mt.attr("src"))});break;default:var jt;Object.assign(rt,{type:"link",link:{url:null!==(jt=mt.attr("url"))&&void 0!==jt?jt:null}})}let bt=jQuery(P).find("img");bt.length&&(Object.assign(rt,{image:_(bt.attr("url"),bt.attr("path"),bt.attr("src"))}),rt.type||Object.assign(rt,{type:"image"}))}}return rt})(),animate:(rt=>{let xt={},Et=null===(rt=U.animates)||void 0===rt?void 0:rt.find($t=>$t.elementId==Gt);return Et&&Object.assign(xt,{value:Et.value}),xt})(),interactive:(()=>{let rt={},xt=U.actions.show.filter($t=>$t.elementId==Gt&&$t.active);xt.length&&(rt.show={},xt.forEach($t=>{let{source:yt}=$t;switch(null==yt?void 0:yt.type){case"work":var oe,K,j,h,Q;rt.show.action={},Object.assign(rt.show.action,{value:null!==(oe=yt.value)&&void 0!==oe?oe:null,iteration:null!==(K=yt.iteration)&&void 0!==K?K:null,finish:null!==(j=yt.end)&&void 0!==j?j:null,time:null!==(h=yt.time)&&void 0!==h?h:null,points:null!==(Q=yt.points)&&void 0!==Q?Q:null});break;case"audio":var vt,ft,Ot;rt.show.audio={},Object.assign(rt.show.audio,{source:_(null,null,yt.url),iteration:null!==(vt=yt.iteration)&&void 0!==vt?vt:null,finish:null!==(ft=yt.end)&&void 0!==ft?ft:null,time:null!==(Ot=yt.time)&&void 0!==Ot?Ot:null,async:-1==yt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Dt,jt,mt,bt,Mt,Yt,C,d,R,ot,X,V,L,S,G;yt.options.includes("show")&&(rt.show.triggershow={},Object.assign(rt.show.triggershow,{id:null!==(Dt=parseInt(null!==(jt=yt.id)&&void 0!==jt?jt:"0"))&&void 0!==Dt?Dt:null,ids:null===(mt=yt.ids)||void 0===mt?void 0:mt.map(at=>parseInt(at)),async:null!==(bt=yt.async)&&void 0!==bt?bt:null,time:null!==(Mt=yt.time)&&void 0!==Mt?Mt:null})),yt.options.includes("run")&&(rt.show.triggerrun={},Object.assign(rt.show.triggerrun,{id:null!==(Yt=parseInt(null!==(C=yt.id)&&void 0!==C?C:"0"))&&void 0!==Yt?Yt:null,ids:null===(d=yt.ids)||void 0===d?void 0:d.map(at=>parseInt(at)),async:null!==(R=yt.async)&&void 0!==R?R:null,time:null!==(ot=yt.time)&&void 0!==ot?ot:null})),yt.options.includes("hide")&&(rt.show.triggerhide={},Object.assign(rt.show.triggerhide,{id:null!==(X=parseInt(null!==(V=yt.id)&&void 0!==V?V:"0"))&&void 0!==X?X:null,ids:null===(L=yt.ids)||void 0===L?void 0:L.map(at=>parseInt(at)),async:null!==(S=yt.async)&&void 0!==S?S:null,time:null!==(G=yt.time)&&void 0!==G?G:null}))}}));let Et=U.actions.click.filter($t=>$t.elementId==Gt&&$t.active);return Et&&(rt.click={},Et.forEach($t=>{let{source:yt}=$t;switch(null==yt?void 0:yt.type){case"work":var oe,K,j,h,Q;rt.click.action={},Object.assign(rt.click.action,{value:null!==(oe=yt.value)&&void 0!==oe?oe:null,iteration:null!==(K=yt.iteration)&&void 0!==K?K:null,finish:null!==(j=yt.end)&&void 0!==j?j:null,time:null!==(h=yt.time)&&void 0!==h?h:null,points:null!==(Q=yt.points)&&void 0!==Q?Q:null});break;case"audio":var vt,ft,Ot;rt.click.audio={},Object.assign(rt.click.audio,{source:_(null,null,yt.url),iteration:null!==(vt=yt.iteration)&&void 0!==vt?vt:null,finish:null!==(ft=yt.end)&&void 0!==ft?ft:null,time:null!==(Ot=yt.time)&&void 0!==Ot?Ot:null,async:-1==yt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Dt,jt,mt,bt,Mt,Yt,C,d,R,ot,X,V,L,S,G;yt.options.includes("show")&&(rt.click.triggershow={},Object.assign(rt.click.triggershow,{id:null!==(Dt=parseInt(null!==(jt=yt.id)&&void 0!==jt?jt:"0"))&&void 0!==Dt?Dt:null,ids:null===(mt=yt.ids)||void 0===mt?void 0:mt.map(Tt=>parseInt(Tt)),async:null!==(bt=yt.async)&&void 0!==bt?bt:null,time:null!==(Mt=yt.time)&&void 0!==Mt?Mt:null})),yt.options.includes("run")&&(rt.click.triggerrun={},Object.assign(rt.click.triggerrun,{id:null!==(Yt=parseInt(null!==(C=yt.id)&&void 0!==C?C:"0"))&&void 0!==Yt?Yt:null,ids:null===(d=yt.ids)||void 0===d?void 0:d.map(Tt=>parseInt(Tt)),async:null!==(R=yt.async)&&void 0!==R?R:null,time:null!==(ot=yt.time)&&void 0!==ot?ot:null})),yt.options.includes("hide")&&(rt.click.triggerhide={},Object.assign(rt.click.triggerhide,{id:null!==(X=parseInt(null!==(V=yt.id)&&void 0!==V?V:"0"))&&void 0!==X?X:null,ids:null===(L=yt.ids)||void 0===L?void 0:L.map(Tt=>parseInt(Tt)),async:null!==(S=yt.async)&&void 0!==S?S:null,time:null!==(G=yt.time)&&void 0!==G?G:null}));break;case"slide":var at;rt.click.slide={},Object.assign(rt.click.slide,{id:parseInt(null!==(at=yt.id)&&void 0!==at?at:"0")||yt.num||null,code:yt.id})}})),rt})(),variable:(rt=>{let xt={};var Et;P.getAttribute("data-variable")&&(xt.input={},Object.assign(xt.input,{variable:null!==(Et=P.getAttribute("data-variable"))&&void 0!==Et?Et:null}));let $t=null===(rt=U.nodes)||void 0===rt||null===(rt=rt.find(h=>h.id==Gt))||void 0===rt?void 0:rt.variable;var yt,oe,K,j;return $t&&(xt.click={},Object.assign(xt.click,{variable:null!==(yt=$t.variable)&&void 0!==yt?yt:null,operator:null!==(oe=$t.operator)&&void 0!==oe?oe:null,valuetype:null!==(K=$t.valuetype)&&void 0!==K?K:null,value:null!==(j=$t.value)&&void 0!==j?j:null})),xt})()};null===(Ut=ct.svg)||void 0===Ut||Ut.nodes.push(ht)}),ut.push(ct)}),console.log(ut),{screen:{width:D.screen.w,height:D.screen.h},data:{slides:ut},variable:D.variable}}},644:(ce,At,f)=>{f.d(At,{Dx:()=>c,aY:()=>Y,qp:()=>E,qz:()=>F,sV:()=>T,yR:()=>y});var W=f(5861),x=f(9422);x.config({driver:[x.INDEXEDDB,x.LOCALSTORAGE,x.WEBSQL],name:"_localDataDB",version:1});const M={create:(O=(0,W.Z)(function*(){return x}),function(){return O.apply(this,arguments)}),get:function(){var O=(0,W.Z)(function*(_){return x.getItem(_)});return function(nt){return O.apply(this,arguments)}}(),set:function(){var O=(0,W.Z)(function*(_,nt){return x.setItem(_,nt)});return function(nt,D){return O.apply(this,arguments)}}()},F=function(){var O=(0,W.Z)(function*(_){yield M.create();var nt=(yield M.get("icdt-data"))||[];"function"==typeof _.callback&&_.callback(nt)});return function(nt){return O.apply(this,arguments)}}(),c=function(){var O=(0,W.Z)(function*(_){yield M.create(),_.params=_.params||{};try{yield M.set("icdt-data",_.params),"function"==typeof _.callback&&_.callback(_.params)}catch(nt){"function"==typeof _.callback&&_.callback(null),console.error(nt)}});return function(nt){return O.apply(this,arguments)}}(),T=function(){var O=(0,W.Z)(function*(_){yield M.create();try{var nt=(yield M.get("icdt-config"))||{};"function"==typeof _.callback&&_.callback(nt)}catch(D){"function"==typeof _.callback&&_.callback(null),console.error(D)}});return function(nt){return O.apply(this,arguments)}}(),E=function(){var O=(0,W.Z)(function*(_){yield M.create(),_.params=_.params||{};try{yield M.set("icdt-config",_.params),"function"==typeof _.callback&&_.callback(_.params)}catch(nt){"function"==typeof _.callback&&_.callback(null),console.error(nt)}});return function(nt){return O.apply(this,arguments)}}(),Y=function(){var O=(0,W.Z)(function*(_){yield M.create();try{var nt=(yield M.get("icdt-clipboard"))||{};"function"==typeof _.callback&&_.callback(nt)}catch(D){"function"==typeof _.callback&&_.callback(null),console.error(D)}});return function(nt){return O.apply(this,arguments)}}(),y=function(){var O=(0,W.Z)(function*(_){yield M.create(),_.params=_.params||{};try{yield M.set("icdt-clipboard",_.params),"function"==typeof _.callback&&_.callback(_.params)}catch(nt){"function"==typeof _.callback&&_.callback(null),console.error(nt)}});return function(nt){return O.apply(this,arguments)}}();var O},1687:(ce,At,f)=>{f.d(At,{O:()=>W});const W={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(ce,At,f)=>{f.d(At,{D:()=>W});const W={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(ce,At,f)=>{f.d(At,{_:()=>W});const W={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(ce,At,f)=>{f.d(At,{D:()=>W});const W={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(ce,At,f)=>{f.d(At,{$:()=>W});const W={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(ce,At,f)=>{f.d(At,{icdt:()=>_t});var W=f(968),x=f(4080),dt=f(1687),M=f(9054),F=f(4318),c=f(6816),T=f(666),E=f(2966);const O=k=>{var i,n,r,a,s;let v=(null===(i=k.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=k.touchEvent)||void 0===n?void 0:n.target),p=(null==v?void 0:v.getAttribute("id"))||"",w=null==v?void 0:v.nodeName,B=(null==v||null===(r=v.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var b,A;if([dt.O.RESIZE_GROUP,dt.O.SELECT_GROUP].includes(B))return null===(b=k.mouseEvent)||void 0===b||b.stopPropagation(),void(null===(A=k.mouseEvent)||void 0===A||A.preventDefault());if(null!==(a=k.mouseEvent)&&void 0!==a&&a.altKey||null!==(s=k.touchEvent)&&void 0!==s&&s.altKey||!p||p.match(/[^0-9]/)||!_t.dataSelect.nodeName.includes(w)){var z;_t.dataSelect.ids.length&&(_t.dataSelect.ids=[]),(0==(null===(z=k.mouseEvent)||void 0===z?void 0:z.button)||k.touchEvent)&&(k=>{let s=(0,x.g1)(dt.O.SCAN_GROUP,"g"),v=(0,F.bH)(0,0,1,1);(0,x.vl)(s,v),((k,i,n)=>{(0,c.A)(k,{start:s=>{},move:(s,v)=>{((s,v,p,w)=>{i=(0,F.bH)(s,v,p,w),(0,x.vl)(n,i)})(v[0][0],v[0][1],s.x,s.y)},end:(s,v)=>{null==n||n.remove(),_t.dataSelect.ids=_t.data.getNodeInArea(Math.min(v[0][0],s.x),Math.min(v[0][1],s.y),Math.max(v[0][0],s.x),Math.max(v[0][1],s.y));let p=_t.dataSelect.nodes;1==p.length?(0,T.y)(p[0]):p.length>1&&(0,E.Q)(p)}})})(k,v,s)})(k)}else{var H,q;let Z=parseFloat(p||"0");_t.dataSelect.ids=null!==(H=k.mouseEvent)&&void 0!==H&&H.shiftKey||null!==(q=k.touchEvent)&&void 0!==q&&q.shiftKey?[Z].concat(_t.dataSelect.ids).filter((se,fe,ge)=>ge.indexOf(se)==fe):[Z];let Lt=_t.dataSelect.nodes;Lt.length>1||1==Lt.length&&Lt[0].type==M.$.PATH?(0,E.Q)(Lt):1==Lt.length&&(0,T.y)(Lt[0])}};class nt{constructor(){let{x:i,y:n}=_t.screen.dislocation;var r=(a,s,v,p)=>{_t.screen.move({x:i,y:n},{x:v-a,y:p-s})};return{start:a=>{},move:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)},end:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)}}}}var D=f(4714);const J=[{name:"tam gi\xe1c vu\xf4ng",type:D.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:D.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:D.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:D.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:D.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:D.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:D.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:D.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:D.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:D.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:D.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:D.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:D.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var ut=f(8619),U=f(5811);class it{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ut._)(Math.ceil(1e9*Math.random())),v=(p,w,B,b)=>{s=(0,F.bH)(p,w,B,b,{ratio:1}),s.x=(0,U.q)(s.x),s.y=(0,U.q)(s.y),s.width=(0,U.q)(s.width),s.height=(0,U.q)(s.height),Object.assign(a,(0,F.sg)(M.$.CIRCLE,s)),(0,x.__)(r,a),(0,x.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("r","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),_t.data.node=Object.assign({id:n,type:M.$.CIRCLE,name:"Circle"},{size:s,attribute:a}),null==i||i.remove()}}}}var gt=f(8785);class wt{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,gt.r)(Math.ceil(1e9*Math.random()));var v=(p,w,B,b)=>{s=(0,F.bH)(p,w,B,b),s.x=(0,U.q)(s.x),s.y=(0,U.q)(s.y),s.width=(0,U.q)(s.width),s.height=(0,U.q)(s.height),Object.assign(a,(0,F.sg)(M.$.ELLIPSE,s)),(0,x.__)(r,a),(0,x.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),_t.data.node=Object.assign({id:n,type:M.$.ELLIPSE,name:"Ellipse"},{size:s,attribute:a}),null==i||i.remove()}}}}var ct=f(8054);class tt{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ct.f)(Math.ceil(1e9*Math.random()));var v=(p,w,B,b)=>{s=(0,F.bH)(p,w,B,b),s.x=(0,U.q)(s.x),s.y=(0,U.q)(s.y),s.width=(0,U.q)(s.width),s.height=(0,U.q)(s.height),Object.assign(a,(0,F.sg)(M.$.RECT,s)),(0,x.__)(r,a),(0,x.g$)(i,s)};return{start:p=>{v(p.x,p.y,p.x+s.width,p.y+s.height)},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{s.width>=10&&s.height>=10?_t.data.node=Object.assign({id:n,type:M.$.RECT,name:"Rect"},{size:s,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var P=f(2282);class Wt{constructor(i){let n=(0,x.g1)(dt.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:s,attribute:v,size:p}=(0,P.l)(Math.ceil(1e9*Math.random()));p.ratios=r;var w=(B,b,A,z)=>{p=(0,F.bH)(B,b,A,z,{ratios:r}),p.x=(0,U.q)(p.x),p.y=(0,U.q)(p.y),p.width=(0,U.q)(p.width),p.height=(0,U.q)(p.height),Object.assign(v,(0,F.sg)(M.$.POLYGON,p)),(0,x.__)(s,v),(0,x.g$)(n,p)};return{start:B=>{},move:(B,b)=>{w(b[0][0],b[0][1],B.x,B.y)},end:(B,b)=>{w(b[0][0],b[0][1],B.x,B.y),_t.data.node=Object.assign({id:a,type:M.$.POLYGON,name:"Polygon"},{size:p,attribute:v}),null==n||n.remove()}}}}var Ut=f(4921);class Bt{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,Ut.W)(Math.ceil(1e9*Math.random()));var v=(p,w,B,b)=>{s=(0,F.bH)(p,w,B,b),s.x=(0,U.q)(s.x),s.y=(0,U.q)(s.y),s.width=(0,U.q)(s.width),s.height=(0,U.q)(s.height),Object.assign(a,(0,F.sg)(M.$.LINE,s)),(0,x.__)(r,a),(0,x.g$)(i,s)};return{start:p=>{},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),_t.data.node=Object.assign({id:n,type:M.$.LINE,name:"Line"},{size:s,attribute:a}),null==i||i.remove()}}}}var Ht=f(8419);class kt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,Ht.G)(Math.ceil(1e9*Math.random())),v="";var p=(w,B)=>{v+=` ${w} ${B}`,n.setAttribute("d",v)};return{start:w=>{v=`M ${w.x} ${w.y} L ${w.x} ${w.y}`},move:(w,B)=>{p(w.x,w.y)},end:(w,B)=>{p(w.x,w.y),(w=>{let B=9999,b=9999,A=-9999,z=-9999;w.forEach(H=>{B=Math.min(B,H[0]),b=Math.min(b,H[1]),A=Math.max(A,H[0]),z=Math.max(z,H[1])}),a=(0,F.bH)(B,b,A,z,{points:w}),Object.assign(r,(0,F.sg)(M.$.PATH,a)),(0,x.__)(n,r)})(B),_t.data.node=Object.assign({id:i,type:M.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var Gt=f(2875);class ht{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Gt.e)(Math.ceil(1e9*Math.random()));var w=(B,b,A,z)=>{a=(0,F.bH)(B,b,A,z),a.x=(0,U.q)(a.x),a.y=(0,U.q)(a.y),a.width=(0,U.q)(a.width),a.height=(0,U.q)(a.height),Object.assign(s,(0,F.sg)(M.$.FOREIGNOBJECT,a)),(0,x.__)(r,s),(0,x.g$)(i,a)};return{start:B=>{w(B.x,B.y,B.x+a.width,B.y+a.height)},move:(B,b)=>{w(b[0][0],b[0][1],B.x,B.y)},end:(B,b)=>{a.width>=10&&a.height>=10?_t.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p}):null==r||r.remove(),null==i||i.remove()}}}}var rt=f(7210);class xt{constructor(){var i,n;let r=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,rt.G)(Math.ceil(1e9*Math.random())),B=1;(A=>{if(!A)return;let z=new Image;z.onload=()=>{B=(0,U.q)(z.naturalWidth/z.naturalHeight,100)},z.onerror=H=>{console.error(`ImgSrc load failed -> ${A}`,H)},z.src=A})(null!==(i=null===(n=w.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var b=(A,z,H,q)=>{v=(0,F.bH)(A,z,H,q,{ratio:B}),v.x=(0,U.q)(v.x),v.y=(0,U.q)(v.y),v.width=(0,U.q)(v.width),v.height=(0,U.q)(v.height),Object.assign(p,(0,F.sg)(M.$.IMAGE,v)),(0,x.__)(s,p),(0,x.g$)(r,v)};return{start:A=>{b(A.x,A.y,A.x+v.width,A.y+v.height)},move:(A,z)=>{b(z[0][0],z[0][1],A.x,A.y)},end:(A,z)=>{v.width>=10&&v.height>=10?_t.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w}):null==s||s.remove(),null==r||r.remove()}}}}var $t=f(4578),yt=f(9623);function j(k,i,n,r){return Math.sqrt(Math.pow(n-k,2)+Math.pow(r-i,2))}function h(k,i,n,r,a){return j(k,i,n,r)<a?1:0}function vt(k,i,n,r,a,s,v){var p=[];return p.push(h(k,i,n,r,v)),p.push(h(k,i,a,s,v)),p.push(function Q(k,i,n,r,a,s,v){var p=[a-n,s-r],w=[k-n,i-r],B=[-p[1],p[0]],b=Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2)),A=[B[0]/b,B[1]/b],z=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),H=[p[0]/z,p[1]/z],q=w[0]*H[0]+w[1]*H[1];if(q<=0||q>=z)return 0;var Z=w[0]*A[0]+w[1]*A[1];return Z>=v||Z<=-v?0:1}(k,i,n,r,a,s,v)),p}function ft(k,i,n,r,a){var s=[n-k,r-i],v=[-s[1],s[0]],p=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),w=[v[0]/p,v[1]/p];return[[k+a*w[0],i+a*w[1]],[k-a*w[0],i-a*w[1]],[n-a*w[0],r-a*w[1]],[n+a*w[0],r+a*w[1]]]}function Ot(k,i,n,r,a,s,v){var q,p=[a-k,s-i],w=[n-k,r-i],B=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),b=[w[0]/B,w[1]/B],A=p[0]*b[0]+p[1]*b[1],z=[k+A*b[0],i+A*b[1]],H=Math.sqrt(Math.pow(a-z[0],2)+Math.pow(s-z[1],2));q=0===H?v:Math.sqrt(Math.pow(v,2)-Math.pow(H,2));var Z=[k+A*b[0]+q*b[0],i+A*b[1]+q*b[1]];return Z[0]===k&&Z[1]===i?null:Z}function Dt(k,i,n,r,a,s,v){var p=[a-k,s-i],w=[n-k,r-i],B=[-w[1],w[0]],b=Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2)),A=[B[0]/b,B[1]/b],z=p[0]*A[0]+p[1]*A[1],H=C([k,i],[n,r],[a,s]);if(Mt([H[0]-a,H[1]-s])>=v)return null;var Z=Math.sqrt(Math.pow(v,2)-Math.pow(z,2)),Lt=[a-z*A[0],s-z*A[1]],se=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),fe=[w[0]/se,w[1]/se],ge=[[Lt[0]-fe[0]*Z,Lt[1]-fe[1]*Z],[Lt[0]+fe[0]*Z,Lt[1]+fe[1]*Z]];return ge[0][0]===k&&ge[0][1]===i?null:ge}function jt(k,i,n,r,a,s,v,p){var w,B,b,A,z,H;return-(b=v-a)*(B=r-i)+(w=n-k)*(A=p-s)==0?null:(H=(b*(i-s)-A*(k-a))/(-b*B+w*A),(z=(-B*(k-a)+w*(i-s))/(-b*B+w*A))>=0&&z<=1&&H>=0&&H<=1?[k+H*w,i+H*B]:null)}function mt(k,i,n,r,a,s,v,p,w,B){var b=ft(s,v,p,w,B),A=[];if(n[0]&&!n[1])A.push(Ot(k,i,r,a,s,v,B)),A.push(jt(k,i,r,a,b[0][0],b[0][1],b[3][0],b[3][1])),A.push(jt(k,i,r,a,b[1][0],b[1][1],b[2][0],b[2][1])),(z=Dt(k,i,r,a,p,w,B))&&A.push(z[0],z[1]);else if(!n[0]&&n[1])A.push(Ot(k,i,r,a,p,w,B)),A.push(jt(k,i,r,a,b[0][0],b[0][1],b[3][0],b[3][1])),A.push(jt(k,i,r,a,b[1][0],b[1][1],b[2][0],b[2][1])),(z=Dt(k,i,r,a,s,v,B))&&A.push(z[0],z[1]);else if(n[0]&&n[1])A.push(Ot(k,i,r,a,s,v,B)),A.push(jt(k,i,r,a,b[0][0],b[0][1],b[3][0],b[3][1])),A.push(jt(k,i,r,a,b[1][0],b[1][1],b[2][0],b[2][1])),A.push(Ot(k,i,r,a,p,w,B));else{var z=Dt(k,i,r,a,p,w,B),H=Dt(k,i,r,a,s,v,B);z&&A.push(z[0],z[1]),H&&A.push(H[0],H[1]),A.push(jt(k,i,r,a,b[0][0],b[0][1],b[3][0],b[3][1])),A.push(jt(k,i,r,a,b[1][0],b[1][1],b[2][0],b[2][1]))}for(var q=[k,i],Z=0;Z<A.length;Z++)A[Z]&&j(A[Z][0],A[Z][1],r,a)<j(q[0],q[1],r,a)&&(q=A[Z]);return q[0]===k&&q[1]===i?null:q}function bt(k,i,n,r,a,s,v,p,w){var B=ft(a,s,v,p,w),b=[],A=Dt(k,i,n,r,a,s,w);A&&b.push(A[0],A[1]),(A=Dt(k,i,n,r,v,p,w))&&b.push(A[0],A[1]),b.push(jt(k,i,n,r,B[0][0],B[0][1],B[3][0],B[3][1])),b.push(jt(k,i,n,r,B[1][0],B[1][1],B[2][0],B[2][1]));for(var z=[n,r],H=[k,i],q=0;q<b.length;q++)b[q]&&j(b[q][0],b[q][1],k,i)<j(z[0],z[1],k,i)&&(z=b[q]);for(var Z=0;Z<b.length;Z++)b[Z]&&j(b[Z][0],b[Z][1],n,r)<j(H[0],H[1],n,r)&&(H=b[Z]);return z[0]===n&&z[1]===r||H[0]===k&&H[1]===i?null:[z,H]}var Mt=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},C=function(k,i,n){var r=[i[0]-k[0],i[1]-k[1]],a=Mt(r);if(a<1e-6)return k;var s=[n[0]-k[0],n[1]-k[1]],v=(r[0]*s[0]+r[1]*s[1])/a;return v<0?k:v>a?i:[k[0]+r[0]*v/a,k[1]+r[1]*v/a]};class d{constructor(){let{element:r,size:s}=(0,Ht.G)(Math.ceil(1e9*Math.random()));(0,x.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:B=>{v=`M ${B.x} ${B.y} L ${B.x} ${B.y}`},move:(B,b)=>{((B,b)=>{v+=` ${B} ${b}`,r.setAttribute("d",v)})(B.x,B.y)},end:(B,b)=>{r.remove(),(B=>{let b=9999,A=9999,z=-9999,H=-9999;B.forEach(Z=>{b=Math.min(b,Z[0]),A=Math.min(A,Z[1]),z=Math.max(z,Z[0]),H=Math.max(H,Z[1])}),s=(0,F.bH)(b,A,z,H,{points:B}),_t.data.getNodeInArea(0,0,1920,1920,M.$.PATH).forEach(Z=>{let se=((k,i,n)=>{n=n||20;var r=[],a=function(b){var A=i[0][0],z=i[0][1],H=0,q=0;if(1!==b.length||h(b[0][0],b[0][1],A,z,n)){for(var Z;H<b.length-1;){var Lt=b[H],se=b[H+1],fe=h(Lt[0],Lt[1],A,z,n),ge=h(se[0],se[1],A,z,n);if(fe&&ge)q=++H;else if(fe&&!ge)(we=Ot(Lt[0],Lt[1],se[0],se[1],A,z,n))?(b[H]=we,q=H):H++;else if(!fe&&ge){var we;(we=Ot(se[0],se[1],Lt[0],Lt[1],A,z,n))&&((Z=b.slice(q,H+1)).push(we),r.push(Z)),q=++H}else{var ye=Dt(Lt[0],Lt[1],se[0],se[1],A,z,n);ye?(((Z=b.slice(q,H+1))[Z.length-1][0]!==ye[0][0]||Z[Z.length-1][1]!==ye[0][1])&&Z.push(ye[0]),Z.length>1&&r.push(Z),b[H]=ye[1],b[H+1]&&b[H+1][0]==ye[1][0]&&b[H+1][1]==ye[1][1]&&H++,q=H):H++}}q!==H&&(Z=b.slice(q,b.length))&&r.push(Z)}else r.push(b)},s=function(b,A){var se,z=i[A],H=i[A+1],q=0,Z=0;if(1!==b.length||-1!==(Lt=vt(b[0][0],b[0][1],z[0],z[1],H[0],H[1],n)).indexOf(1)){for(;q<b.length-1;){var fe=b[q],ge=b[q+1],Lt=vt(fe[0],fe[1],z[0],z[1],H[0],H[1],n),we=vt(ge[0],ge[1],z[0],z[1],H[0],H[1],n);if(-1!==Lt.indexOf(1)&&-1!==we.indexOf(1))Z=++q;else if(-1!==Lt.indexOf(1)&&-1===we.indexOf(1))(ye=mt(fe[0],fe[1],Lt,ge[0],ge[1],z[0],z[1],H[0],H[1],n))?(b[q]=ye,Z=q):q++;else if(-1===Lt.indexOf(1)&&-1!==we.indexOf(1)){var ye;(ye=mt(ge[0],ge[1],we,fe[0],fe[1],z[0],z[1],H[0],H[1],n))?((se=b.slice(Z,q+1)).push(ye),r.push(se),Z=++q):q++}else{var Ee=bt(fe[0],fe[1],ge[0],ge[1],z[0],z[1],H[0],H[1],n);Ee?(((se=b.slice(Z,q+1))[se.length-1][0]!==Ee[0][0]||se[se.length-1][1]!==Ee[0][1])&&se.push(Ee[0]),se.length>1&&r.push(se),b[q]=Ee[1],b[q+1]&&b[q+1][0]==Ee[1][0]&&b[q+1][1]==Ee[1][1]&&q++,Z=q):q++}}Z!==q&&(se=b.slice(Z,b.length))&&r.push(se)}else r.push(b)};if(i=function K(k){var i=[];if(1===k.length)i=k;else{for(var n=0;n<k.length-1;)(k[n][0]!==k[n+1][0]||k[n][1]!==k[n+1][1])&&i.push(k[n]),n++;0!==k.length&&0===i.length&&i.push(k[0]),(k[k.length-1][0]!==k[i.length-1][0]||k[k.length-1][1]!==k[i.length-1][1])&&i.push(k[n])}return i}(i),1===i.length){for(var v=0;v<k.length;v++)a(k[v]);k=r}else for(var p=0;p<i.length-1;p++){for(v=0;v<k.length;v++)s(k[v],p);k=r,r=[]}for(var w=0;w<k.length;w++)for(var B=0;B<k[w].length;B++)k[w][B][0]=Math.round(k[w][B][0]),k[w][B][1]=Math.round(k[w][B][1]);return k})(_t.data.getNode(Z).size.points,B,2);console.log(se)})})(b)}}}}var ot=f(1105);class X{constructor(){let i=(0,x.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s,source:v}=(0,ot.$)(Math.ceil(1e9*Math.random())),p=(w,B,b,A)=>{s=(0,F.bH)(w,B,b,A),s.x=(0,U.q)(s.x),s.y=(0,U.q)(s.y),s.width=(0,U.q)(s.width),s.height=(0,U.q)(s.height),Object.assign(a,(0,F.sg)(M.$.TEXT,s)),(0,x.__)(r,a),(0,x.g$)(i,s)};return{start:w=>{p(w.x,w.y,w.x+s.width,w.y+s.height)},move:(w,B)=>{p(B[0][0],B[0][1],w.x,w.y)},end:(w,B)=>{s.width>=10&&s.height>=10?_t.data.node=Object.assign({id:n,type:M.$.TEXT,name:"Text"},{size:s,attribute:a,source:v}):null==r||r.remove(),null==i||i.remove()}}}}var G=f(4113),at=f(9125),Tt=f(7797);var It=f(6358);class Jt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>_t.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,s,v;null===(n=window.document.getElementById(dt.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(dt.O.SCAN_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(dt.O.CREATE_GROUP))||void 0===s||s.remove(),null===(v=window.document.getElementById(dt.O.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=_t.data.deleteNode(i);_t.history.push([{type:"delete",from:{id:n},to:{id:n}}])}_t.dataSelect.ids=[]}groupNode(){let i=[];if(_t.dataSelect.ids.length>=2){let n=_t.data.getNode(_t.dataSelect.ids[0]),{nodeId:r,attribute:a,size:s}=(0,It.m)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);_t.data.node=Object.assign({id:r,type:M.$.GROUP,name:"G"},{size:s,attribute:a});for(let v of _t.dataSelect.ids)i.push(_t.data.addGroup(v,r))}if(i.length){_t.dataSelect.ids=i;let n=_t.dataSelect.nodes;1==n.length?(0,T.y)(n[0]):n.length>1&&(0,E.Q)(n)}}ungroupNode(){let i=[];for(let n of _t.dataSelect.ids)i.push(_t.data.unGroup(n));if(i.length){_t.dataSelect.ids=i;let n=_t.dataSelect.nodes;1==n.length?(0,T.y)(n[0]):n.length>1&&(0,E.Q)(n)}}}var Kt=f(9942);class Xt{createNodeImage(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,rt.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Kt.I)(i)}}),B=1;(z=>{if(!z)return;let H=new Image;H.onload=()=>{var q;B=(0,U.q)(H.naturalHeight/H.naturalWidth,100);let Z=(null===(q=_t.data.slide)||void 0===q||null===(q=q.svg)||void 0===q?void 0:q.viewBox)||{x:0,y:0,width:100,height:100};((z,H,q,Z)=>{v=(0,F.bH)(z,H,q,Z,{ratio:B}),Object.assign(p,(0,F.sg)(M.$.IMAGE,v)),(0,x.__)(s,p)})(Z.width/2-H.naturalWidth/2,Z.height/2-H.naturalHeight/2,Z.width/2+H.naturalWidth/2,Z.height/2+H.naturalHeight/2),_t.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w})},H.onerror=q=>{console.error(`ImgSrc load failed -> ${z}`,q)},H.src=z})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}createNodeIframe(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{style:{},source:{type:"iframe",iframe:(0,Kt.I)(i)}});(b=>{let A=(null===(b=_t.data.slide)||void 0===b||null===(b=b.svg)||void 0===b?void 0:b.viewBox)||{x:0,y:0,width:100,height:100};((b,A,z,H)=>{a=(0,F.bH)(b,A,z,H),Object.assign(s,(0,F.sg)(M.$.IMAGE,a)),(0,x.__)(r,s)})(A.width/2-a.width/2,A.height/2-a.height/2,A.width/2+a.width/2,A.height/2+a.height/2),_t.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeEmbed(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:0,y:0,width:640,height:360},style:{},source:{type:"embed",embed:Object.assign(i,(0,Kt.I)(i))}});(b=>{let A=(null===(b=_t.data.slide)||void 0===b||null===(b=b.svg)||void 0===b?void 0:b.viewBox)||{x:0,y:0,width:100,height:100};((b,A,z,H)=>{a=(0,F.bH)(b,A,z,H),Object.assign(s,(0,F.sg)(M.$.IMAGE,a)),(0,x.__)(r,s)})(A.width/2-a.width/2,A.height/2-a.height/2,A.width/2+a.width/2,A.height/2+a.height/2),_t.data.node=Object.assign({id:n,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeMedia(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,rt.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Kt.I)(i.cover)}}),B={click:{media:i.media}},b=1;(H=>{if(!H)return;let q=new Image;q.onload=()=>{var Z;b=(0,U.q)(q.naturalHeight/q.naturalWidth,100);let Lt=(null===(Z=_t.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.viewBox)||{x:0,y:0,width:100,height:100};((H,q,Z,Lt)=>{v=(0,F.bH)(H,q,Z,Lt,{ratio:b}),Object.assign(p,(0,F.sg)(M.$.IMAGE,v)),(0,x.__)(s,p)})(Lt.width/2-q.naturalWidth/2,Lt.height/2-q.naturalHeight/2,Lt.width/2+q.naturalWidth/2,Lt.height/2+q.naturalHeight/2),_t.data.node=Object.assign({id:a,type:M.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w,interactive:B})},q.onerror=Z=>{console.error(`ImgSrc load failed -> ${H}`,Z)},q.src=H})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}insert(i){var n;if(_t.data.insertSlide(_t.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});_t.data.node=Object.assign({id:r,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}if(i.description){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});_t.data.node=Object.assign({id:r,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:s}=(0,ct.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});_t.data.node=Object.assign({id:r,type:M.$.RECT,name:"Rect"},{size:a,attribute:s})})(),(r=>{let{nodeId:a,size:s,attribute:v,style:p,source:w}=(0,Gt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});_t.data.node=Object.assign({id:a,type:M.$.FOREIGNOBJECT,name:"ForeignObject"},{size:s,attribute:v,style:p,source:w})})())}}var Qt=f(5226);class ne{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:_t.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((s,v)=>v==this._slideIdx),r=null==n?void 0:n.svg,a=s=>{let v=[];return s.filter(p=>!p.isdeleted).forEach(p=>{p.type==M.$.GROUP?v=v.concat(a(p.nodes||[])):v.push(p.id)}),v};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==M.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=M.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,s,v,p,w,B,b,A;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(s=r.svg)||void 0===s||s.nodes.forEach(z=>{var H,q,Z,Lt,se,fe,ge,we,ye,Ee;n.push(null===(H=z.source)||void 0===H||null===(H=H.image)||void 0===H?void 0:H.path),n.push(null===(q=z.source)||void 0===q||null===(q=q.audio)||void 0===q?void 0:q.path),n.push(null===(Z=z.source)||void 0===Z||null===(Z=Z.video)||void 0===Z?void 0:Z.path),n.push(null===(Lt=z.source)||void 0===Lt||null===(Lt=Lt.file)||void 0===Lt?void 0:Lt.path),n.push(null===(se=z.source)||void 0===se||null===(se=se.iframe)||void 0===se?void 0:se.path),n.push(null===(fe=z.source)||void 0===fe||null===(fe=fe.track)||void 0===fe?void 0:fe.path),n.push(null===(ge=z.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),n.push(null===(we=z.interactive)||void 0===we||null===(we=we.click)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),n.push(null===(ye=z.interactive)||void 0===ye||null===(ye=ye.click)||void 0===ye||null===(ye=ye.image)||void 0===ye||null===(ye=ye.source)||void 0===ye?void 0:ye.path),n.push(null===(Ee=z.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.video)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path)}),n.push(null===(v=r.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(w=r.test)||void 0===w||null===(w=w.effecttrue)||void 0===w?void 0:w.path),n.push(null===(B=r.test)||void 0===B||null===(B=B.effectfalse)||void 0===B?void 0:B.path),n.push(null===(b=r.test)||void 0===b||null===(b=b.icontrue)||void 0===b?void 0:b.path),n.push(null===(A=r.test)||void 0===A||null===(A=A.iconfalse)||void 0===A?void 0:A.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,s)=>s.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,x.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==M.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=M.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,x.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}openSlide(i,n){var r,a,s,v;if(i)for(let A=0,z=null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0;A<z;A++){var p,w,B;if((null!==(B=this._dataSource.slides)&&void 0!==B?B:[])[A].id==i){this._slideIdx=A;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var b;this._slideIdx=0,null!==(b=this._dataSource.slides)&&void 0!==b&&b.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,x.wM)(),(0,Qt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==s?s:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,s,v,p,w;let B=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.find(z=>z.id==i))&&void 0!==a?a:this._defaultSlide,b=(null!==(v=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(B))&&void 0!==v?v:0)+n;var A;r?(r.id=this.newSlideId,r.code=void 0,r.name="Trang m\u1edbi",null!==(A=r.svg)&&void 0!==A&&A.viewBox||r.svg&&(r.svg.viewBox=_t.screen.frameSize)):r=this._defaultSlide,null===(w=this._dataSource.slides)||void 0===w||w.splice(b,0,r),this._slideIdx=b,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,s,v,p,w;let B=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(z=>z.id==i))&&void 0!==n?n:this._defaultSlide,b=(null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(B))&&void 0!==a?a:0)+1,A=Object.assign(JSON.parse(JSON.stringify(B)),{id:this.newSlideId,code:void 0,name:`${B.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(b,0,A),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var r,a,s,v,p,w;let B=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(A=>A.id==i))&&void 0!==r?r:this._defaultSlide,b=null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(B))&&void 0!==s?s:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(b+n,0,null===(w=this._dataSource.slides)||void 0===w?void 0:w.splice(b,1)[0])}deleteSlide(i){var n,r,a,s,v,p;let w=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(z=>z.id==i))&&void 0!==n?n:this._defaultSlide,B=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(w))&&void 0!==a?a:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(B,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(B<this._slideIdx){var b,A;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(b=null===(A=this._dataSource.slides)||void 0===A?void 0:A.length)&&void 0!==b?b:0,this.slide)}else B==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,s,v;let p=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(B=>B.id==i))&&void 0!==n?n:this._defaultSlide,w=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(p))&&void 0!==a?a:0;if(p.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(B=>!B.isdeleted))&&void 0!==v&&v.length){let B=!0;for(;p.isdeleted;)B?w++:w--,this._dataSource.slides[w]?p=this._dataSource.slides[w]:B=!B;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(s=>s(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((v,p)=>p==this._slideIdx),s=null==a?void 0:a.svg;null!=s&&s.nodes&&(null==s||s.nodes.push(i)),_t.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((z,H)=>H==this._slideIdx),a=null==r?void 0:r.svg,s=(z,H)=>{let q=null==z?void 0:z.find(se=>se.id==i);if(q)return q.pid=H,q;let Z=0,Lt=z.length||0;for(;Z<Lt&&!q&&(q=s(z[Z].nodes||[],z[Z].id),!q);)Z++;return q},v=s((null==a?void 0:a.nodes)||[]);var p,w,B,b,A;return v?(v.style=null!==(p=v.style)&&void 0!==p?p:{},v.source=null!==(w=v.source)&&void 0!==w?w:{},v.animate=null!==(B=v.animate)&&void 0!==B?B:{},v.interactive=null!==(b=v.interactive)&&void 0!==b?b:{},v.variable=null!==(A=v.variable)&&void 0!==A?A:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,w)=>w==this._slideIdx),a=null==r?void 0:r.svg,v=p=>{let w=(null==p?void 0:p.find(q=>q.id==i))||(p=>{let w=null,B=0,b=p.length||0;for(;B<b&&!w;){if(w=v(p[B].nodes),w){w.pid=p[B].id;break}B++}var A,z,H,q,Z;return w&&(w.style=null!==(A=w.style)&&void 0!==A?A:{},w.source=null!==(z=w.source)&&void 0!==z?z:{},w.animate=null!==(H=w.animate)&&void 0!==H?H:{},w.interactive=null!==(q=w.interactive)&&void 0!==q?q:{},w.variable=null!==(Z=w.variable)&&void 0!==Z?Z:{}),w})((null==p?void 0:p.filter(q=>q.type==M.$.GROUP))||[]);var B,b,A,z,H;return w&&(w.style=null!==(B=w.style)&&void 0!==B?B:{},w.source=null!==(b=w.source)&&void 0!==b?b:{},w.animate=null!==(A=w.animate)&&void 0!==A?A:{},w.interactive=null!==(z=w.interactive)&&void 0!==z?z:{},w.variable=null!==(H=w.variable)&&void 0!==H?H:{}),w};return v((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((b,A)=>A==this._slideIdx),w=null==p?void 0:p.svg,B=b=>{let A=[];return b.filter(z=>!z.isdeleted).forEach(z=>{z.type==M.$.GROUP?A=A.concat(B(z.nodes||[])):i>z.size.x||n>z.size.y||r<z.size.x+z.size.width||a<z.size.y+z.size.height||(s?z.type==s&&A.push(z.id):A.push(z.id))}),A};return B((null==w?void 0:w.nodes)||[])}getNodeOnArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((b,A)=>A==this._slideIdx),w=null==p?void 0:p.svg,B=b=>{let A=[];return b.filter(z=>!z.isdeleted).forEach(z=>{z.type==M.$.GROUP?A=A.concat(B(z.nodes||[])):z.size.x+z.size.width<i||z.size.y+z.size.height<n||z.size.x>r||z.size.y>a||(s?z.type==s&&A.push(z.id):A.push(z.id))}),A};return B((null==w?void 0:w.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),s=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:s})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),s}addGroup(i,n){var r;let a=this.getNode(i),s=this.getNode(n);s.nodes=s.nodes||[];let v=Math.ceil(1e9*Math.random());return s.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:v})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),v}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(s=>s.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let s=i.map(H=>_t.data.getNode(H)).filter(H=>!H.isfake),{x1:v,y1:p,x2:w,y2:B}=re(s),b=this.getNodeOnArea(v,p,w,B);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((H,q)=>{H.index=q+1});let A=b.map(H=>{var q,Z;return null!==(q=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Lt=>Lt.id==H))||void 0===Z?void 0:Z.index)&&void 0!==q?q:0}),z=Math.max.apply(null,A);i.forEach((H,q)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Lt=>Lt.id==H).forEach(Lt=>{Lt.index=z+(q+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((H,q)=>{var Z,Lt;return(null!==(Z=H.index)&&void 0!==Z?Z:0)-(null!==(Lt=q.index)&&void 0!==Lt?Lt:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,E.Q)(s)}sendToBack(i){var n,r,a;let s=i.map(H=>_t.data.getNode(H)).filter(H=>!H.isfake),{x1:v,y1:p,x2:w,y2:B}=re(s),b=this.getNodeOnArea(v,p,w,B);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((H,q)=>{H.index=q+1});let A=b.map(H=>{var q,Z;return null!==(q=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Lt=>Lt.id==H))||void 0===Z?void 0:Z.index)&&void 0!==q?q:0}),z=Math.min.apply(null,A)-1;i.forEach((H,q)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Lt=>Lt.id==H).forEach(Lt=>{Lt.index=z+(q+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((H,q)=>{var Z,Lt;return(null!==(Z=H.index)&&void 0!==Z?Z:0)-(null!==(Lt=q.index)&&void 0!==Lt?Lt:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,E.Q)(s)}}const re=k=>{let i=999999,n=999999,r=-999999,a=-999999;return k.forEach(s=>{i=Math.min(i,s.size.x),n=Math.min(n,s.size.y),r=Math.max(r,s.size.x+s.size.width),a=Math.max(a,s.size.y+s.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class le{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":_t.data.deleteNode(n.from.id);break;case"edit":break;case"delete":_t.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:s,attribute:v}=_t.data.getNode(n.from.id);Object.assign(s,n.from.size),Object.assign(v,(0,F.sg)(a,s)),(0,x.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=_t.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,x.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=_t.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,x.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=_t.data.getNode(n.from.id);Object.assign(null!=s?s:{},n.from.source),(0,x.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=_t.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=_t.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=_t.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),_t.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":_t.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":_t.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:s,attribute:v}=_t.data.getNode(n.to.id);Object.assign(s,n.to.size),Object.assign(v,(0,F.sg)(a,s)),(0,x.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=_t.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,x.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=_t.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,x.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=_t.data.getNode(n.to.id);Object.assign(null!=s?s:{},n.to.source),(0,x.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=_t.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=_t.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=_t.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),_t.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class pe{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var s={x:Math.max(0,Math.min((0,U.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,U.q)(n.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*s.x,y:(this._height/i-this._height/this._scale)*s.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,x.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var $e=f(644);class qe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,$e.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,$e.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Ke=f(1690),ni=f(5973),ri=f(4787),Me=function(k){return k&&JSON.parse(JSON.stringify(k))},We=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Je=[],ai={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},oi={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ti{constructor(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),We.forEach(r=>{var a=this._data_variables.filter(s=>s.key==r.key);a.length?a.forEach(function(s,v,p){s.type=r.type,s.readonly=r.readonly,s.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Me(ai)}getConditionTemp(){return Me(oi)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Me((k=this._data_variables,i="key",function(n){for(var r of k.map(function(a){return a[i]}).sort())k.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),k=k.filter(function(a){return a[i]!=r});return n}([]))):Me(We).concat(Me(Je));var k,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),We.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,s,v)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(s=>s.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(s=>s.key==i);a.length?a.forEach(function(s,v,p){s.value=n,s.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(v){return v.key==i});if(r.length){var s,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?s=!1:"boolean"==typeof a.value?s=a.value:(s=(a.value+"").toLowerCase(),s="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),s}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(v){return v.key==i});if(a.length){var s=a[0];this.OnSetActionExecuting(s),s&&(s.value=n),this.OnSetActionExecuted(s)}}}getConditionAll(){return Me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,s){return a+s});case"sub":return n.reduce(function(a,s){return a-s});case"pro":return n.reduce(function(a,s){return a*s});case"div":return n.reduce(function(a,s){return a/s});case"avg":var r=n.reduce(function(a,s){return a+s})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,s){return a&&s});case"or":return n.reduce(function(a,s){return a||s});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Me(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Me(n),{variable:r})));break;case"slide":Ke.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ri.L5)({id:n.node,nodeStatus:Ke.$.nodeStatus,slideStatus:Ke.$.slideStatus});let s=Ke.$.findNode(n.node);null!=s&&null!==(a=s.interactive)&&void 0!==a&&a.click&&(0,ni.F)(s,Ke.$.nodeStatus,Ke.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ve{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case W._.PEN:this._pen_type=n;break;case W._.SHAPE:this._shape_type=n,r&&n===M.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const _t=new class si{constructor(){this._container="",this._svg="",this._screen=pe.prototype,this._data=ne.prototype,this._dataSelect=Jt.prototype,this._slide=Xt.prototype,this._history=le.prototype,this._attribute=qe.prototype,this._pointer=Ve.prototype,this._variable=ti.prototype,this._data=new ne,this._dataSelect=new Jt,this._slide=new Xt,this._history=new le,this._attribute=new qe,this._pointer=new Ve,this._variable=new ti,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,s;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(s=null==i?void 0:i.top)&&void 0!==s?s:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new pe,(k=>{new x.Mh(k.container,k.target),_t.pointer.onchange=(r,a,s)=>{switch(r){case W._.POINTER:jQuery(k.target).css({cursor:"auto"});break;case W._.HAND:jQuery(k.target).css({cursor:"grab"});break;case W._.PEN:switch(a){case at.D.DRAW:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case at.D.HIGHTLIGH:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case W._.ERASER:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case W._.SHAPE:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case W._.TEXT:case W._.FOREIGNOBJECT:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(k.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{_t.pointer.pointer_type==W._.HAND&&jQuery(k.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{_t.pointer.pointer_type==W._.HAND&&jQuery(k.target).css({cursor:"grab"})}),jQuery(k.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var s=_t.screen.scale,v=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;_t.screen.scaleTo(s-.04*s*v,(0,Tt.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},_t.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{_t.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(k.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{_t.screen.actived=!0}),jQuery(k.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{_t.screen.actived=!1}),jQuery(k.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(k.container.includes("#")&&k.container.includes(r.target.getAttribute("id"))||k.container.includes(".")&&k.container.includes(r.target.getAttribute("class"))||k.container.includes(r.target.nodeName))&&(_t.pointer.pointer_type_temp||_t.pointer.pointer_type)===W._.POINTER&&(_t.dataSelect.ids=[])}),jQuery(k.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(_t.pointer.pointer_type_temp||_t.pointer.pointer_type){case W._.POINTER:O(r);break;case W._.HAND:(k=>{(0,c.A)(k,new nt,1,{x:0,y:0})})(r);break;case W._.PEN:(0,yt.i)(r);break;case W._.SHAPE:(k=>{var i=null;switch(_t.pointer.shape_type){case M.$.CIRCLE:i=new it;break;case M.$.ELLIPSE:i=new wt;break;case M.$.LINE:i=new Bt;break;case M.$.RECT:i=new tt;break;case M.$.POLYGON:var n;i=new Wt(null===(n=J.find(r=>r.type==_t.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case M.$.FOREIGNOBJECT:i=new ht;break;case M.$.IMAGE:i=new xt;break;case M.$.TEXT:case M.$.PATH:i=new kt}i&&(0,c.A)(k,i)})(r);break;case W._.FOREIGNOBJECT:(k=>{(0,c.A)(k,new ht)})(r);break;case W._.IMAGE:(k=>{(0,c.A)(k,new xt)})(r);break;case W._.TEXT:(k=>{(0,c.A)(k,new X)})(r);break;case W._.ERASER:(k=>{(0,c.A)(k,new d)})(r);break;case W._.INDEX:(0,G.s)(r)}};let n=!1;jQuery(k.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(k.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),k.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{_t.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,$t.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{_t.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,$t.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(ce,At,f)=>{f.d(At,{s:()=>E,Q:()=>y});var W=f(1687),x=f(4981),dt=f(4318),M=f(6816),F=f(4080);const E=O=>{var _,nt;let D=(null===(_=O.mouseEvent)||void 0===_?void 0:_.target)||(null===(nt=O.touchEvent)||void 0===nt?void 0:nt.target),J=(null==D?void 0:D.getAttribute("id"))||"",ut=null==D?void 0:D.nodeName,U=jQuery(D).parents("g[id]").attr("id")||"";if(![W.O.INDEX_GROUP].includes(U))if(J&&!J.match(/[^0-9]/)&&x.icdt.dataSelect.nodeName.includes(ut)){var gt,wt;let ct=parseFloat(J||"0");x.icdt.dataSelect.ids=null!==(gt=O.mouseEvent)&&void 0!==gt&&gt.shiftKey||null!==(wt=O.touchEvent)&&void 0!==wt&&wt.shiftKey?[ct].concat(x.icdt.dataSelect.ids).filter((P,Wt,Ut)=>Ut.indexOf(P)==Wt):[ct],Y(x.icdt.dataSelect.nodes)}else{var it;x.icdt.dataSelect.ids.length&&(x.icdt.dataSelect.ids=[]),(0==(null===(it=O.mouseEvent)||void 0===it?void 0:it.button)||O.touchEvent)&&((O,_)=>{let U=(0,F.g1)(W.O.SCAN_GROUP,"g"),it=(0,dt.bH)(0,0,1,1);(0,F.vl)(U,it),((O,_,nt,D)=>{(0,M.A)(O,{start:U=>{},move:(U,it)=>{((U,it,gt,wt)=>{_=(0,dt.bH)(U,it,gt,wt),(0,F.vl)(nt,_)})(it[0][0],it[0][1],U.x,U.y)},end:(U,it)=>{null==nt||nt.remove(),x.icdt.dataSelect.ids=x.icdt.data.getNodeInArea(Math.min(it[0][0],U.x),Math.min(it[0][1],U.y),Math.max(it[0][0],U.x),Math.max(it[0][1],U.y)),D(x.icdt.dataSelect.nodes)}})})(O,it,U,_)})(O,Y)}},Y=O=>{var _,nt;let D=1;var J,ut;if(O.length&&(D=Math.max.apply(null,null!==(J=null===(ut=x.icdt.data.slide)||void 0===ut||null===(ut=ut.svg)||void 0===ut?void 0:ut.nodes.map(it=>{var gt;return null!==(gt=it.idx)&&void 0!==gt?gt:0}))&&void 0!==J?J:[0])+1),1==O.length)O[0].idx||(O[0].idx=D,O[0].time=0);else if(O.length>=0){let it=O.map(wt=>{var ct;return null!==(ct=wt.idx)&&void 0!==ct?ct:0}).filter(wt=>wt>0),gt=it.length?Math.min.apply(null,it):D;O.forEach(wt=>{var ct;wt.idx=gt,wt.time=null!==(ct=wt.time)&&void 0!==ct?ct:0})}let U=(0,F.g1)(W.O.INDEX_GROUP,"g");(0,F.mo)(U,null!==(_=null===(nt=x.icdt.data.slide)||void 0===nt||null===(nt=nt.svg)||void 0===nt?void 0:nt.nodes)&&void 0!==_?_:[])},y=O=>{var _,nt,D;null!=O&&null!==(_=O.svg)&&void 0!==_&&_.nodes&&O.svg.nodes.forEach(ut=>{ut.idx=0});let J=(0,F.g1)(W.O.INDEX_GROUP,"g");(0,F.mo)(J,null!==(nt=null===(D=x.icdt.data.slide)||void 0===D||null===(D=D.svg)||void 0===D?void 0:D.nodes)&&void 0!==nt?nt:[])}},4578:(ce,At,f)=>{f.d(At,{h:()=>_,t:()=>nt});var W=f(644),x=f(7308),dt=f(968),M=f(4981),F=f(666),c=f(2966),T=f(5226),E=f(3423),Y=f(5811),y=f(3385);const _=new class O{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:x.s.Escape,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:x.s.Delete,fn:()=>{M.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:x.s.Space,fn:()=>{M.icdt.pointer.pointer_type_temp=dt._.HAND}},this.onchange={type:"keyup",key:x.s.Space,fn:()=>{M.icdt.pointer.pointer_type_temp=dt._.POINTER}},this.onchange={type:"keydown",key:x.s.ArrowLeft,fn:()=>{M.icdt.dataSelect.ids.length||M.icdt.data.backSlide()}},this.onchange={type:"keydown",key:x.s.ArrowRight,fn:()=>{M.icdt.dataSelect.ids.length||M.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:x.s.ArrowLeft,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(J=>{(0,y.k6)(J,(0,Y.q)(J.size.x-(0,E.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,F.y)(M.icdt.dataSelect.nodes[0]):(0,c.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowRight,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(J=>{(0,y.k6)(J,(0,Y.q)(J.size.x+(0,E.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,F.y)(M.icdt.dataSelect.nodes[0]):(0,c.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowUp,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(J=>{(0,y.co)(J,(0,Y.q)(J.size.y-(0,E.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,F.y)(M.icdt.dataSelect.nodes[0]):(0,c.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.ArrowDown,fn:()=>{M.icdt.dataSelect.ids.length&&(M.icdt.dataSelect.nodes.forEach(J=>{(0,y.co)(J,(0,Y.q)(J.size.y+(0,E.v)(1)))}),1==M.icdt.dataSelect.ids.length?(0,F.y)(M.icdt.dataSelect.nodes[0]):(0,c.Q)(M.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:x.s.Digit1,fn:J=>{J.shiftKey&&(M.icdt.reloadView(),M.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:x.s.KeyA,fn:J=>{if(J.ctrlKey){M.icdt.dataSelect.ids=M.icdt.data.getNodeAll();let ut=M.icdt.dataSelect.nodes;1==ut.length?(0,F.y)(ut[0]):ut.length>1&&(0,c.Q)(ut)}}},this.onchange={type:"keydown",key:x.s.KeyC,fn:J=>{if(J.ctrlKey){let ut=M.icdt.dataSelect.nodes;ut&&(0,W.yR)({params:{type:"nodes",nodes:ut}})}}},this.onchange={type:"keydown",key:x.s.KeyV,fn:J=>{J.ctrlKey&&(0,W.aY)({callback:ut=>{var U,it;"nodes"==(null==ut?void 0:ut.type)&&null!=ut&&null!==(U=ut.nodes)&&void 0!==U&&U.length&&(null==ut||null===(it=ut.nodes)||void 0===it||it.forEach(gt=>{gt.id=Math.ceil(1e9*Math.random()),M.icdt.data.node=gt}),(0,T.E)(M.icdt.data.slide))}})}},this.onchange={type:"keydown",key:x.s.KeyZ,fn:J=>{J.ctrlKey&&J.shiftKey?M.icdt.history.redo():J.ctrlKey&&M.icdt.history.undo()}}}set onchange(J){let ut=this._fnChanges.find(U=>U.eventType==J.type&&U.eventKey==J.key);ut?ut.fns.push(J.fn):this._fnChanges.push({eventType:J.type,eventKey:J.key,fns:[J.fn]})}change(J,ut,U){var it;null===(it=this._fnChanges.find(gt=>gt.eventType==J&&gt.eventKey==ut))||void 0===it||it.fns.forEach(gt=>gt(U))}},nt=D=>{_.change(D.type,D.keyCode||D.which||D.charCode||0,D)}},410:(ce,At,f)=>{f.d(At,{a:()=>E});var W=f(4318),x=f(8419),dt=f(9054),M=f(4080),F=f(511),c=f(3423),T=f(1687);class E{constructor(y){var O;let _={stroke:"#FF0000",strokeWidth:(0,c.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,c.v)(8)},{element:D,attribute:J,size:ut}=(0,x.G)(Math.ceil(1e9*Math.random()),{size:y});window.document.getElementById(T.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ct=>null==ct?void 0:ct.remove()),null===(O=window.document.getElementById(T.O.INTERACTIVE_GROUP))||void 0===O||O.appendChild(D),(0,M.__)(D,_);let it="";return{start:ct=>{it=`M ${ct.x} ${ct.y} L ${ct.x} ${ct.y}`},move:(ct,tt)=>{((ct,tt)=>{it+=` ${ct} ${tt}`,D.setAttribute("d",it)})(ct.x,ct.y)},end:(ct,tt)=>{(ct=>{let P=F.jvg().x(Wt=>Wt[0]).y(Wt=>Wt[1]).curve(F.$0Z)(ct);D.setAttribute("d",P),ct.length>=2&&(window.interactivePoints=ct)})(tt),(ct=>{let tt=9999,P=9999,Wt=-9999,Ut=-9999;ct.forEach(Bt=>{tt=Math.min(tt,Bt[0]),P=Math.min(P,Bt[1]),Wt=Math.max(Wt,Bt[0]),Ut=Math.max(Ut,Bt[1])}),ut=(0,W.bH)(tt,P,Wt,Ut,{points:ct}),Object.assign(J,(0,W.sg)(dt.$.PATH,ut),_)})(tt)}}}}},9623:(ce,At,f)=>{f.d(At,{U:()=>D,i:()=>nt});var W=f(1687),x=f(9125),dt=f(4981),M=f(6816),F=f(4080),c=f(4318),T=f(8419),E=f(9054),Y=f(511);class y{constructor(){let ut={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:U,element:it,attribute:gt,size:wt}=(0,T.G)(Math.ceil(1e9*Math.random()));(0,F.__)(it,gt);let tt="";return{start:Ut=>{tt=`M ${Ut.x} ${Ut.y} L ${Ut.x} ${Ut.y}`},move:(Ut,Bt)=>{((Ut,Bt)=>{tt+=` ${Ut} ${Bt}`,it.setAttribute("d",tt)})(Ut.x,Ut.y)},end:(Ut,Bt)=>{(Ut=>{let Ht=Y.jvg().x(kt=>kt[0]).y(kt=>kt[1]).curve(Y.$0Z)(Ut);it.setAttribute("d",Ht)})(Bt),(Ut=>{let Bt=9999,Ht=9999,kt=-9999,Gt=-9999;Ut.forEach(ht=>{Bt=Math.min(Bt,ht[0]),Ht=Math.min(Ht,ht[1]),kt=Math.max(kt,ht[0]),Gt=Math.max(Gt,ht[1])}),wt=(0,c.bH)(Bt,Ht,kt,Gt,{points:Ut}),Object.assign(gt,(0,c.sg)(E.$.PATH,wt),ut)})(Bt),dt.icdt.data.node=Object.assign({id:U,type:E.$.PATH,name:"Path"},{size:wt,attribute:gt})}}}}class O{constructor(){let ut={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:U,element:it,attribute:gt,size:wt}=(0,T.G)(Math.ceil(1e9*Math.random()));(0,F.__)(it,gt);let tt="";var P=(Wt,Ut)=>{tt+=` ${Wt} ${Ut}`,it.setAttribute("d",tt)};return{start:Wt=>{tt=`M ${Wt.x} ${Wt.y} L ${Wt.x} ${Wt.y}`},move:(Wt,Ut)=>{P(Wt.x,Wt.y)},end:(Wt,Ut)=>{P(Wt.x,Wt.y),(Wt=>{let Ut=9999,Bt=9999,Ht=-9999,kt=-9999;Wt.forEach(Gt=>{Ut=Math.min(Ut,Gt[0]),Bt=Math.min(Bt,Gt[1]),Ht=Math.max(Ht,Gt[0]),kt=Math.max(kt,Gt[1])}),wt=(0,c.bH)(Ut,Bt,Ht,kt,{points:Wt}),Object.assign(gt,(0,c.sg)(E.$.PATH,wt),ut)})(Ut),dt.icdt.data.node=Object.assign({id:U,type:E.$.PATH,name:"Path"},{size:wt,attribute:gt})}}}}var _=f(410);const nt=J=>{switch(dt.icdt.pointer.pen_type){case x.D.DRAW:(0,M.A)(J,new y);break;case x.D.HIGHTLIGH:(0,M.A)(J,new O);break;case x.D.INTERACTIVE:D(J)}},D=J=>{var ut,U;let it=(0,F.g1)(W.O.INTERACTIVE_GROUP,"g"),gt=null!==(ut=null===(U=dt.icdt.data.slide)||void 0===U||null===(U=U.svg)||void 0===U?void 0:U.viewBox)&&void 0!==ut?ut:(()=>{let{width:wt,height:ct}=dt.icdt.screen.get;return{x:0,y:0,width:wt,height:ct}})();(0,F.XH)(it,gt),J&&(0,M.A)(J,new _.a)}},666:(ce,At,f)=>{f.d(At,{y:()=>T});var W=f(1687),x=f(4981),dt=f(4318),M=f(6816),F=f(4080),c=f(5811);const T=y=>{let O=(0,F.g1)(W.O.RESIZE_GROUP,"g");(0,F.hJ)(O,y).forEach(_=>{E(_.element,_.posType,y,O)})},E=(y,O,_,nt)=>{let D=!1;null==y||y.addEventListener("touchstart",J=>{D=!0,Y({touchEvent:J},O,_,nt)}),null==y||y.addEventListener("mousedown",J=>{if(0==J.button){if(D)return void(D=!1);Y({mouseEvent:J},O,_,nt)}})},Y=(y,O,_,nt)=>{let P,{id:D,type:J,size:ut,attribute:U}=_,{x:it,y:gt,width:wt,height:ct}=ut,tt=(wt||1)/(ct||1),Ut=null,kt=!1;(0,M.A)(y,{start:ht=>{Ut=JSON.parse(JSON.stringify({id:D,size:ut,attribute:U}))},move:(ht,rt)=>{((ht,rt,xt,Et)=>{switch(O){case"rect-center":var $t,yt;P=null!==($t=y.mouseEvent)&&void 0!==$t&&$t.shiftKey||null!==(yt=y.touchEvent)&&void 0!==yt&&yt.shiftKey?Math.abs(xt-ht)>=Math.abs(Et-rt)?{x:it+xt-ht,y:gt,width:wt,height:ct}:{x:it,y:gt+Et-rt,width:wt,height:ct}:{x:it+xt-ht,y:gt+Et-rt,width:wt,height:ct};break;case"rect-top-left":var oe,K,j,h,Q,vt,ft,Ot;P=(null!==(oe=y.mouseEvent)&&void 0!==oe&&oe.shiftKey||null!==(K=y.touchEvent)&&void 0!==K&&K.shiftKey)&&(null!==(j=y.mouseEvent)&&void 0!==j&&j.altKey||null!==(h=y.touchEvent)&&void 0!==h&&h.altKey)?tt>=1?{x:it+(xt-ht),y:gt+(xt-ht)/tt,width:wt-2*(xt-ht),height:ct-2*(xt-ht)/tt}:{x:it+(Et-rt)*tt,y:gt+(Et-rt),width:wt-2*(Et-rt)*tt,height:ct-2*(Et-rt)}:null!==(Q=y.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(vt=y.touchEvent)&&void 0!==vt&&vt.shiftKey?tt>=1?{x:it+(xt-ht),y:gt+(xt-ht)/tt,width:wt-(xt-ht),height:ct-(xt-ht)/tt}:{x:it+(Et-rt)*tt,y:gt+(Et-rt),width:wt-(Et-rt)*tt,height:ct-(Et-rt)}:null!==(ft=y.mouseEvent)&&void 0!==ft&&ft.altKey||null!==(Ot=y.touchEvent)&&void 0!==Ot&&Ot.altKey?{x:it+(xt-ht),y:gt+(Et-rt),width:wt-2*(xt-ht),height:ct-2*(Et-rt)}:{x:it+(xt-ht),y:gt+(Et-rt),width:wt-(xt-ht),height:ct-(Et-rt)};break;case"rect-top-right":var Dt,jt,mt,bt,Mt,Yt,C,d;P=(null!==(Dt=y.mouseEvent)&&void 0!==Dt&&Dt.shiftKey||null!==(jt=y.touchEvent)&&void 0!==jt&&jt.shiftKey)&&(null!==(mt=y.mouseEvent)&&void 0!==mt&&mt.altKey||null!==(bt=y.touchEvent)&&void 0!==bt&&bt.altKey)?tt>=1?{x:it-(xt-ht),y:gt-(xt-ht)/tt,width:wt+2*(xt-ht),height:ct+2*(xt-ht)/tt}:{x:it+(Et-rt)*tt,y:gt+(Et-rt),width:wt-2*(Et-rt)*tt,height:ct-2*(Et-rt)}:null!==(Mt=y.mouseEvent)&&void 0!==Mt&&Mt.shiftKey||null!==(Yt=y.touchEvent)&&void 0!==Yt&&Yt.shiftKey?tt>=1?{x:it,y:gt-(xt-ht)/tt,width:wt+(xt-ht),height:ct+(xt-ht)/tt}:{x:it,y:gt+(Et-rt),width:wt-(Et-rt)*tt,height:ct-(Et-rt)}:null!==(C=y.mouseEvent)&&void 0!==C&&C.altKey||null!==(d=y.touchEvent)&&void 0!==d&&d.altKey?{x:it-(xt-ht),y:gt+(Et-rt),width:wt+2*(xt-ht),height:ct-2*(Et-rt)}:{x:it,y:gt+(Et-rt),width:wt+(xt-ht),height:ct-(Et-rt)};break;case"rect-bottom-left":var R,ot,X,V,L,S,G,at;P=(null!==(R=y.mouseEvent)&&void 0!==R&&R.shiftKey||null!==(ot=y.touchEvent)&&void 0!==ot&&ot.shiftKey)&&(null!==(X=y.mouseEvent)&&void 0!==X&&X.altKey||null!==(V=y.touchEvent)&&void 0!==V&&V.altKey)?tt>=1?{x:it+(xt-ht),y:gt+(xt-ht)/tt,width:wt-2*(xt-ht),height:ct-2*(xt-ht)/tt}:{x:it-(Et-rt)*tt,y:gt-(Et-rt),width:wt+2*(Et-rt)*tt,height:ct+2*(Et-rt)}:null!==(L=y.mouseEvent)&&void 0!==L&&L.shiftKey||null!==(S=y.touchEvent)&&void 0!==S&&S.shiftKey?tt>=1?{x:it+(xt-ht),y:gt,width:wt-(xt-ht),height:ct-(xt-ht)/tt}:{x:it-(Et-rt)*tt,y:gt,width:wt+(Et-rt)*tt,height:ct+(Et-rt)}:null!==(G=y.mouseEvent)&&void 0!==G&&G.altKey||null!==(at=y.touchEvent)&&void 0!==at&&at.altKey?{x:it+(xt-ht),y:gt-(Et-rt),width:wt-2*(xt-ht),height:ct+2*(Et-rt)}:{x:it+(xt-ht),y:gt,width:wt-(xt-ht),height:ct+(Et-rt)};break;case"rect-bottom-right":var Tt,Pt,It,Jt,Kt,Xt,Qt,ne;P=(null!==(Tt=y.mouseEvent)&&void 0!==Tt&&Tt.shiftKey||null!==(Pt=y.touchEvent)&&void 0!==Pt&&Pt.shiftKey)&&(null!==(It=y.mouseEvent)&&void 0!==It&&It.altKey||null!==(Jt=y.touchEvent)&&void 0!==Jt&&Jt.altKey)?tt>=1?{x:it-(xt-ht),y:gt-(xt-ht)/tt,width:wt+2*(xt-ht),height:ct+2*(xt-ht)/tt}:{x:it-(Et-rt)*tt,y:gt-(Et-rt),width:wt+2*(Et-rt)*tt,height:ct+2*(Et-rt)}:null!==(Kt=y.mouseEvent)&&void 0!==Kt&&Kt.shiftKey||null!==(Xt=y.touchEvent)&&void 0!==Xt&&Xt.shiftKey?tt>=1?{x:it,y:gt,width:wt+(xt-ht),height:ct+(xt-ht)/tt}:{x:it,y:gt,width:wt+(Et-rt)*tt,height:ct+(Et-rt)}:null!==(Qt=y.mouseEvent)&&void 0!==Qt&&Qt.altKey||null!==(ne=y.touchEvent)&&void 0!==ne&&ne.altKey?{x:it-(xt-ht),y:gt-(Et-rt),width:wt+2*(xt-ht),height:ct+2*(Et-rt)}:{x:it,y:gt,width:wt+(xt-ht),height:ct+(Et-rt)};break;default:P={x:it+xt-ht,y:gt+Et-rt,width:wt,height:ct}}P.width<0&&(P.width=0),P.height<0&&(P.height=0),P.x=(0,c.q)(P.x),P.y=(0,c.q)(P.y),P.width=(0,c.q)(P.width),P.height=(0,c.q)(P.height),Object.assign(ut,P),Object.assign(U,(0,dt.sg)(J,ut)),(0,F.__)(window.document.getElementById(D),U),(0,F.hJ)(nt,_)})(rt[0][0],rt[0][1],ht.x,ht.y),kt=!0},end:(ht,rt)=>{kt&&Ut&&x.icdt.history.push([{type:"size",from:Ut,to:JSON.parse(JSON.stringify({id:D,size:ut,attribute:U}))}])}})}},2966:(ce,At,f)=>{f.d(At,{Q:()=>E});var W=f(1687),x=f(4981),dt=f(4318),M=f(6816),F=f(4080),c=f(3423),T=f(5811);const E=O=>{let _=999999,nt=999999,D=-999999,J=-999999;null==O||O.forEach(it=>{_=Math.min(_,it.size.x),nt=Math.min(nt,it.size.y),D=Math.max(D,it.size.x+it.size.width),J=Math.max(J,it.size.y+it.size.height)});let ut=(0,F.g1)(W.O.SELECT_GROUP,"g"),U=(0,dt.bH)(_,nt,D,J);(0,F.yD)(ut,O,U).forEach(it=>{Y(it.element,it.posType,U,O,ut)})},Y=(O,_,nt,D,J)=>{let ut=!1;null==O||O.addEventListener("touchstart",U=>{ut=!0,y({touchEvent:U},_,nt,D,J)}),null==O||O.addEventListener("mousedown",U=>{if(0==U.button){if(ut)return void(ut=!1);y({mouseEvent:U},_,nt,D,J)}})},y=(O,_,nt,D,J)=>{let{x:ut,y:U,width:it,height:gt}=nt,wt=D.map(Bt=>Object.assign({},Bt.size)),tt=[];(0,M.A)(O,{start:Bt=>{D.forEach((Bt,Ht)=>{let{id:kt,size:ht,attribute:rt}=Bt;tt.push(JSON.parse(JSON.stringify({id:kt,size:ht,attribute:rt})))})},move:(Bt,Ht)=>{((Bt,Ht,kt,Gt)=>{(()=>{let ht;ht="rect-center"===_?{x:ut+kt-Bt,y:U+Gt-Ht,width:it,height:gt}:{x:ut,y:U,width:it,height:gt},(0,c.v)(x.icdt.screen.width),(0,c.v)(x.icdt.screen.height),ht.width<0&&(ht.width=0),ht.height<0&&(ht.height=0),Object.assign(nt,ht),(0,F.yD)(J,D,nt)})(),D.forEach((ht,rt)=>{let Q,{x:xt,y:Et,width:$t,height:yt}=wt[rt],{id:oe,type:K,size:j,attribute:h}=ht;Q="rect-center"===_?{x:xt+kt-Bt,y:Et+Gt-Ht,width:$t,height:yt}:{x:xt,y:Et,width:$t,height:yt},(0,c.v)(x.icdt.screen.width),(0,c.v)(x.icdt.screen.height),Q.width<0&&(Q.width=0),Q.height<0&&(Q.height=0),Q.x=(0,T.q)(Q.x),Q.y=(0,T.q)(Q.y),Q.width=(0,T.q)(Q.width),Q.height=(0,T.q)(Q.height),Object.assign(j,Q),Object.assign(h,(0,dt.sg)(K,j)),(0,F.__)(window.document.getElementById(oe),h)})})(Ht[0][0],Ht[0][1],Bt.x,Bt.y)},end:(Bt,Ht)=>{tt.length&&x.icdt.history.push(D.map((Bt,Ht)=>{let{id:kt,size:ht,attribute:rt}=Bt;return{type:"size",from:tt[Ht],to:JSON.parse(JSON.stringify({id:kt,size:ht,attribute:rt}))}}))}})}},5226:(ce,At,f)=>{f.d(At,{E:()=>J,T:()=>ut});var W=f(1687),x=f(8619),dt=f(8785),M=f(2282),F=f(8054),c=f(4921),T=f(6358),E=f(9054),Y=f(8419),y=f(1105),O=f(2875),_=f(7210),nt=f(4981),D=f(4080);const J=(U,it)=>{var gt;if(it&&!window.document.getElementById(it))return;if(it){let ct=window.document.getElementById(it);jQuery(ct).find("#"+W.O.BACKGROUND_GROUP).empty();let tt=(0,D.g1)(W.O.BACKGROUND_GROUP,"g",void 0,ct);(0,D.x0)(tt,U)}else{jQuery(nt.icdt.target).find("#"+W.O.BACKGROUND_GROUP).empty();let ct=(0,D.g1)(W.O.BACKGROUND_GROUP,"g",void 0,nt.icdt.target);(0,D.x0)(ct,U)}let wt=(ct,tt)=>{tt=tt?parseFloat(`${it}0${tt}`):it,null==ct||ct.forEach(P=>{let Wt=it?parseFloat(`${it}0${P.id}`):P.id;var Ut;if(P.isdeleted)null===(Ut=window.document.getElementById(Wt))||void 0===Ut||Ut.remove();else switch(P.type){case E.$.GROUP:(0,T.m)(Wt,{},tt?window.document.getElementById(tt):null),wt(P.nodes,P.id);break;case E.$.CIRCLE:(0,x._)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case E.$.ELLIPSE:(0,dt.r)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case E.$.LINE:(0,c.W)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case E.$.RECT:(0,F.f)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case E.$.POLYGON:(0,M.l)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null);break;case E.$.FOREIGNOBJECT:(0,O.e)(Wt,{size:P.size,attribute:P.attribute,style:P.style,source:P.source},tt?window.document.getElementById(tt):null);break;case E.$.IMAGE:(0,_.G)(Wt,{size:P.size,attribute:P.attribute,source:P.source},tt?window.document.getElementById(tt):null);break;case E.$.TEXT:(0,y.$)(Wt,{size:P.size,attribute:P.attribute,source:P.source},tt?window.document.getElementById(tt):null);break;case E.$.PATH:(0,Y.G)(Wt,{size:P.size,attribute:P.attribute},tt?window.document.getElementById(tt):null)}})};wt(null==U||null===(gt=U.svg)||void 0===gt?void 0:gt.nodes)},ut=(U,it)=>{var gt;if(it&&!window.document.getElementById(it))return;let wt=(ct,tt)=>{tt=tt?parseFloat(`${it}0${tt}`):it,null==ct||ct.forEach(P=>{let Wt=it?parseFloat(`${it}0${P.id}`):P.id;jQuery("#"+Wt).appendTo(tt?window.document.getElementById(tt):nt.icdt.target),P.type==E.$.GROUP&&wt(P.nodes,P.id)})};wt(null==U||null===(gt=U.svg)||void 0===gt?void 0:gt.nodes)}},8619:(ce,At,f)=>{f.d(At,{_:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(y,(0,dt.sg)(W.$.CIRCLE,Y)),{nodeId:c,element:(0,M.it)(c,W.$.CIRCLE,"circle",{size:Y,attribute:y},E),size:Y,attribute:y}}},8785:(ce,At,f)=>{f.d(At,{r:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(y,(0,dt.sg)(W.$.ELLIPSE,Y)),{nodeId:c,element:(0,M.it)(c,W.$.ELLIPSE,"ellipse",{size:Y,attribute:y},E),size:Y,attribute:y}}},2875:(ce,At,f)=>{f.d(At,{e:()=>M});var W=f(9054),x=f(4318),dt=f(4080);const M=(F,c,T)=>{let E=(null==c?void 0:c.size)||{x:0,y:0,width:180,height:180},Y=(null==c?void 0:c.attribute)||{};Object.assign(Y,(0,x.sg)(W.$.FOREIGNOBJECT,E));let y=(null==c?void 0:c.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},O=(null==c?void 0:c.style)||{};return{nodeId:F,element:(0,dt.it)(F,W.$.FOREIGNOBJECT,"foreignObject",{size:E,attribute:Y,style:O,source:y},T),size:E,attribute:Y,style:O,source:y}}},6358:(ce,At,f)=>{f.d(At,{m:()=>M});var W=f(9054),x=f(4318),dt=f(4080);const M=(F,c,T)=>{let E=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},Y=(null==c?void 0:c.attribute)||{};return Object.assign(Y,(0,x.sg)(W.$.GROUP,E)),{nodeId:F,element:(0,dt.it)(F,W.$.GROUP,"g",{size:E,attribute:Y},T),size:E,attribute:Y}}},7210:(ce,At,f)=>{f.d(At,{G:()=>M});var W=f(9054),x=f(4318),dt=f(4080);const M=(F,c,T)=>{let E=(null==c?void 0:c.size)||{x:0,y:0,width:200,height:100},Y=(null==c?void 0:c.attribute)||{preserveAspectRatio:"none"};Object.assign(Y,(0,x.sg)(W.$.IMAGE,E));let y=(null==c?void 0:c.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:F,element:(0,dt.it)(F,W.$.IMAGE,"image",{size:E,attribute:Y,source:y},T),size:E,attribute:Y,source:y}}},4921:(ce,At,f)=>{f.d(At,{W:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth,strokeLinecap:x.icdt.attribute.strokeLinecap};return Object.assign(y,(0,dt.sg)(W.$.LINE,Y)),{nodeId:c,element:(0,M.it)(c,W.$.LINE,"line",{size:Y,attribute:y},E),size:Y,attribute:y}}},8419:(ce,At,f)=>{f.d(At,{G:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(y,(0,dt.sg)(W.$.PATH,Y)),{nodeId:c,element:(0,M.it)(c,W.$.PATH,"path",{size:Y,attribute:y},E),size:Y,attribute:y}}},2282:(ce,At,f)=>{f.d(At,{l:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(y,(0,dt.sg)(W.$.POLYGON,Y)),{nodeId:c,element:(0,M.it)(c,W.$.POLYGON,"polygon",{size:Y,attribute:y},E),size:Y,attribute:y}}},8054:(ce,At,f)=>{f.d(At,{f:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},y=(null==T?void 0:T.attribute)||{fill:x.icdt.attribute.fill,stroke:x.icdt.attribute.stroke,strokeWidth:x.icdt.attribute.strokeWidth};return Object.assign(y,(0,dt.sg)(W.$.RECT,Y)),{nodeId:c,element:(0,M.it)(c,W.$.RECT,"rect",{size:Y,attribute:y},E),size:Y,attribute:y}}},1105:(ce,At,f)=>{f.d(At,{$:()=>F});var W=f(9054),x=f(4981),dt=f(4318),M=f(4080);const F=(c,T,E)=>{let Y=(null==T?void 0:T.size)||{x:0,y:0,width:100,height:50},y=(null==T?void 0:T.attribute)||{fill:x.icdt.attribute.stroke,fontFamily:x.icdt.attribute.fontFamily,fontSize:x.icdt.attribute.fontSize,textLength:x.icdt.attribute.textLength};Object.assign(y,(0,dt.sg)(W.$.TEXT,Y));let O=(null==T?void 0:T.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:c,element:(0,M.it)(c,W.$.TEXT,"text",{size:Y,attribute:y,source:O},E),size:Y,attribute:y,source:O}}},4318:(ce,At,f)=>{f.d(At,{bH:()=>x,sg:()=>dt});var W=f(9054);const x=(F,c,T,E,Y)=>{let y={x:Math.min(F,T),y:Math.min(c,E),width:Math.abs(T-F)||1,height:Math.abs(E-c)||1};return null!=Y&&Y.ratio&&(y.width<=y.height?y.height=y.width*(null==Y?void 0:Y.ratio):y.width=y.height/(null==Y?void 0:Y.ratio)),Object.assign(y,{ratios:(null==Y?void 0:Y.ratios)||[[(F-y.x)/(y.width||1),(c-y.y)/(y.height||1)],[(T-y.x)/(y.width||1),(E-y.y)/(y.height||1)]]}),null!=Y&&Y.points&&(y.points=null==Y?void 0:Y.points),y},dt=(F,c,T)=>{var E=(()=>{switch(F){case W.$.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case W.$.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case W.$.LINE:{var Y;let _={};return null===(Y=c.ratios)||void 0===Y||Y.forEach((nt,D)=>{_[`x${D+1}`]=c.x+c.width*nt[0],_[`y${D+1}`]=c.y+c.height*nt[1]}),_}case W.$.RECT:return{x:c.x,y:c.y,width:c.width,height:c.height};case W.$.POLYGON:var y;return{points:((null===(y=c.ratios)||void 0===y?void 0:y.map(_=>[c.x+c.width*_[0],c.y+c.height*_[1]]))||[]).map(_=>_.join(" ")).join(",")};case W.$.FOREIGNOBJECT:case W.$.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case W.$.TEXT:return{x:c.x,y:c.y};case W.$.PATH:{var O;let _=null!==(O=c.points)&&void 0!==O?O:[];return _.length?{d:`M ${_[0][0]} ${_[0][1]} L `+(_.map(nt=>[nt[0],nt[1]])||[]).map(nt=>nt.join(" ")).join(" ")}:{d:""}}}return{}})();return c.rotate?(E.transform=`rotate(${c.rotate})`,E.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):(E.transform=null,E.transformOrigin=null),E}},5811:(ce,At,f)=>{f.d(At,{q:()=>W});const W=(x,dt)=>{var M;return dt=null!==(M=dt)&&void 0!==M?M:100,Math.round((x+Number.EPSILON)*dt)/dt}},3423:(ce,At,f)=>{f.d(At,{v:()=>dt});var W=f(4981),x=f(5811);const dt=M=>(0,x.q)(M/W.icdt.screen.scale)},3385:(ce,At,f)=>{f.d(At,{Vs:()=>E,co:()=>c,k6:()=>F,lO:()=>T,mr:()=>Y});var W=f(4981),x=f(4080),dt=f(4318),M=f(5811);const F=(y,O)=>{let{id:_,type:nt,size:D,attribute:J}=y,ut=JSON.parse(JSON.stringify({id:_,size:D,attribute:J}));D.x=(0,M.q)(O),Object.assign(J,(0,dt.sg)(nt,D)),(0,x.__)(window.document.getElementById(_),J),W.icdt.history.push([{type:"size",from:ut,to:JSON.parse(JSON.stringify({id:_,size:D,attribute:J}))}])},c=(y,O)=>{let{id:_,type:nt,size:D,attribute:J}=y,ut=JSON.parse(JSON.stringify({id:_,size:D,attribute:J}));D.y=(0,M.q)(O),Object.assign(J,(0,dt.sg)(nt,D)),(0,x.__)(window.document.getElementById(_),J),W.icdt.history.push([{type:"size",from:ut,to:JSON.parse(JSON.stringify({id:_,size:D,attribute:J}))}])},T=(y,O,_)=>{let{id:nt,type:D,size:J,attribute:ut}=y,U=JSON.parse(JSON.stringify({id:nt,size:J,attribute:ut}));_&&(J.height=(0,M.q)(O*J.height/J.width)),J.width=(0,M.q)(O),Object.assign(ut,(0,dt.sg)(D,J)),(0,x.__)(window.document.getElementById(nt),ut),W.icdt.history.push([{type:"size",from:U,to:JSON.parse(JSON.stringify({id:nt,size:J,attribute:ut}))}])},E=(y,O,_)=>{let{id:nt,type:D,size:J,attribute:ut}=y,U=JSON.parse(JSON.stringify({id:nt,size:J,attribute:ut}));_&&(J.width=(0,M.q)(O*J.width/J.height)),J.height=(0,M.q)(O),Object.assign(ut,(0,dt.sg)(D,J)),(0,x.__)(window.document.getElementById(nt),ut),W.icdt.history.push([{type:"size",from:U,to:JSON.parse(JSON.stringify({id:nt,size:J,attribute:ut}))}])},Y=(y,O)=>{let{id:_,type:nt,size:D,attribute:J}=y,ut=JSON.parse(JSON.stringify({id:_,size:D,attribute:J}));D.rotate=(0,M.q)(O),Object.assign(J,(0,dt.sg)(nt,D)),(0,x.__)(window.document.getElementById(_),J),W.icdt.history.push([{type:"size",from:ut,to:JSON.parse(JSON.stringify({id:_,size:D,attribute:J}))}])}},6816:(ce,At,f)=>{f.d(At,{A:()=>c});var W=f(968),x=f(4981);class dt{constructor(E){this._points=[],this._options=E}start(E){this._points.length=0,this._points.push([E.x,E.y]),this._options.start(E)}move(E){this._points.push([E.x,E.y]),this._options.move(E,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(E=this._points[0])[0],y:E[1]}:{x:0,y:0};var E}get offsetLast(){return this._points.length>=1?{x:(E=this._points[this._points.length-1])[0],y:E[1]}:{x:0,y:0};var E}}var M=f(7797);const c=(T,E,Y,y,O)=>{var _,nt,D;let J=null,ut=0,U=0;T.mouseEvent?(J=T.mouseEvent.target,ut=T.mouseEvent.offsetX,U=T.mouseEvent.offsetY):T.touchEvent&&(J=T.touchEvent.target,T.touchEvent.touches.length&&(ut=T.touchEvent.touches[0].clientX,U=T.touchEvent.touches[0].clientY));let it=null!=Y?Y:x.icdt.screen.scale,gt=null!=y?y:x.icdt.screen.dislocation,wt=null!=O?O:x.icdt.screen.offset,ct=()=>{};var tt=new dt({start:null!==(_=null==E?void 0:E.start)&&void 0!==_?_:ct,move:null!==(nt=null==E?void 0:E.move)&&void 0!==nt?nt:ct,end:null!==(D=null==E?void 0:E.end)&&void 0!==D?D:ct});T.mouseEvent?tt.start((0,M.p)({x:ut,y:U},it,gt,{x:0,y:0})):T.touchEvent&&tt.start((0,M.p)({x:ut,y:U},it,gt,wt));let P=ht=>{tt.move((0,M.p)({x:ht.clientX,y:ht.clientY},it,gt,wt))},Wt=ht=>{tt.end(),[W._.SHAPE,W._.FOREIGNOBJECT,W._.IMAGE,W._.TEXT].includes(x.icdt.pointer.pointer_type)&&(ht.shiftKey||(x.icdt.pointer.pointer_type=W._.POINTER))},Ut=ht=>{ht.touches.length&&P({clientX:ht.touches[0].clientX,clientY:ht.touches[0].clientY})},Bt=ht=>{Wt({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("touchmove",Ut,!1),window.removeEventListener("touchend",Bt,!1)},Ht=ht=>{0==ht.button&&P({clientX:ht.clientX,clientY:ht.clientY})},kt=ht=>{0==ht.button&&(Wt({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("mousemove",Ht,!1),window.removeEventListener("mouseup",kt,!1))};if(T.mouseEvent)window.addEventListener("mousemove",Ht,!1),window.addEventListener("mouseup",kt,!1);else if(T.touchEvent){var Gt;window.addEventListener("touchmove",Ut,!1),window.addEventListener("touchend",Bt,!1),null===(Gt=J)||void 0===Gt||Gt.addEventListener("touchmove",function(ht){ht.preventDefault()})}}},7797:(ce,At,f)=>{f.d(At,{p:()=>x});var W=f(5811);const x=(dt,M,F,c)=>(dt.x-=c.x,dt.y-=c.y,dt.x/=M,dt.y/=M,dt.x-=F.x,dt.y-=F.y,dt.x=(0,W.q)(dt.x),dt.y=(0,W.q)(dt.y),dt)},1690:(ce,At,f)=>{f.d(At,{$:()=>Mt,U:()=>Yt});var W=f(1687),x=f(4981),dt=f(9054),M=f(5973),F=f(2336),c=f(861),T=f(157),E=f(4787),y=f(1105),O=f(6358);const it=function(C){var d,R,ot=jQuery("#"+C),X=null===(d=ot.attr("class"))||void 0===d?void 0:d.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),V=null===(R=ot.attr("class"))||void 0===R?void 0:R.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);X&&X.forEach(function(S){jQuery(ot).removeClass(S)}),V&&V.forEach(function(S){jQuery(ot).removeClass(S)});let L=ot.attr("data-class");L&&(ot.attr("class",L),ot.removeAttr("data-class")),jQuery(ot).data("animation-running",!1)};var gt=f(7210),wt=f(5811);const ct=(C,d,R)=>{var ot,X,V,L;let S=1,G=new Image;G.onload=()=>{var at,Tt,Pt,It;S=(0,wt.q)(G.naturalWidth/G.naturalHeight,100);let Jt=0,Kt=0,Xt=0,Qt=0;var ne,re,le,pe;S>=1?(Xt=Math.min(G.naturalWidth,null!==(ne=null===(re=Mt.slide.svg)||void 0===re||null===(re=re.viewBox)||void 0===re?void 0:re.width)&&void 0!==ne?ne:0),Qt=Xt/S):(Qt=Math.min(G.naturalHeight,null!==(le=null===(pe=Mt.slide.svg)||void 0===pe||null===(pe=pe.viewBox)||void 0===pe?void 0:pe.height)&&void 0!==le?le:0),Xt=Qt/S),Jt=((null!==(at=null===(Tt=Mt.slide.svg)||void 0===Tt||null===(Tt=Tt.viewBox)||void 0===Tt?void 0:Tt.width)&&void 0!==at?at:0)-Xt)/2,Kt=((null!==(Pt=null===(It=Mt.slide.svg)||void 0===It||null===(It=It.viewBox)||void 0===It?void 0:It.height)&&void 0!==Pt?Pt:0)-Qt)/2,d.size={x:Jt,y:Kt,width:Xt,height:Qt},tt(d,R)},G.onerror=at=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,at)},G.src=null!==(ot=null!==(X=null===(V=d.source)||void 0===V?void 0:V.url)&&void 0!==X?X:null===(L=d.source)||void 0===L?void 0:L.path)&&void 0!==ot?ot:""},tt=(C,d)=>{if(C.slideStatus!=Mt.slideStatus)return void d();let{element:R}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:C.size,source:{type:"image",image:null==C?void 0:C.source}});setTimeout(()=>{null==R||R.remove(),d()},3e3)},P=(C,d,R)=>{var ot,X,V,L;let S=new Image;S.onload=()=>{Wt(C,{width:S.naturalWidth,height:S.naturalHeight},d,R)},S.onerror=G=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,G),R()},S.src=null!==(ot=null!==(X=null===(V=d.source)||void 0===V?void 0:V.url)&&void 0!==X?X:null===(L=d.source)||void 0===L?void 0:L.path)&&void 0!==ot?ot:""},Wt=(C,d,R,ot)=>{if(R.slideStatus!=Mt.slideStatus)return void ot();let X=(0,wt.q)(d.width/d.height,100),V=0,L=0,S=0,G=0;X>=1?(S=d.width,S=Math.max(S,40),S=Math.min(S,100),G=S/X):(G=d.height,G=Math.max(G,40),G=Math.min(G,100),S=G/X);let{size:at}=C;V=at.x+at.width/2-S/2,L=at.y+at.height/2-G/2;let{element:Tt}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:{x:V,y:L,width:S,height:G},source:{type:"image",image:null==R?void 0:R.source}});setTimeout(()=>{null==Tt||Tt.remove(),ot()},3e3)};var Ut=f(4080);const Bt=(C,d,R)=>{var ot,X,V;if(d.slideStatus!=Mt.slideStatus)return void R();if(null===(ot=d.source)||void 0===ot||!ot.url)return console.warn(`${C.id} -> audio no source!`),void R();var L=jQuery("#"+C.id);let S=null!==(X=d.iteration)&&void 0!==X?X:0;if(S<0&&(R(),R=function(){}),!(L.data("audio-running")&&S<0)){L.data("audio-running",!0);var G=new Audio;return G.autoplay=!0,G.loop=0!=S,G.preload="auto",G.controls=!0,G.setAttributeNode(document.createAttribute("playsinline")),G.addEventListener("canplay",function(){var at=G.play();at&&at.then(function(Tt){L.data("audio-running",!0)}).catch(function(Tt){L.data("audio-running",!1),d.slideStatus===Mt.slideStatus&&R()})}),G.addEventListener("timeupdate",function(){var Tt;d.slideStatus!==Mt.slideStatus&&((Tt=this).pause(),Tt.remove(),L.data("audio-running",!1))}),G.addEventListener("canplaythrough",function(){this.loop&&(S>0?S--:0==S&&(this.loop=!1))}),G.addEventListener("play",function(){}),G.addEventListener("pause",function(){}),G.addEventListener("ended",function(){this.remove(),L.data("audio-running",!1),d.slideStatus===Mt.slideStatus&&R()}),G.onerror=function(){this.remove(),L.data("audio-running",!1),d.slideStatus===Mt.slideStatus&&R()},G.src=(null===(V=d.source)||void 0===V?void 0:V.url)||"",G}};var Ht=f(9942);const Et=(C,d,R)=>{var ot;null===(ot=d.test)||void 0===ot||null===(ot=ot.answer)||void 0===ot||null===(ot=ot.matching)||void 0===ot||ot.filter(X=>X.value==R.key).forEach(X=>X.value="")},yt=(C,d,R,ot,X,V)=>{var L,S,G,at,Tt,Pt,It,Jt,Kt,Xt,Qt,ne;X.iscorrect?(null!==(L=d.test)&&void 0!==L&&null!==(L=L.audiotrue)&&void 0!==L&&L.path&&Bt(C,{source:(0,Ht.I)(null===(at=d.test)||void 0===at?void 0:at.audiotrue),iteration:0,nodeStatus:R,slideStatus:ot},V),null!==(S=d.test)&&void 0!==S&&null!==(S=S.icontrue)&&void 0!==S&&S.path&&P(C,{source:(0,Ht.I)(null===(Tt=d.test)||void 0===Tt?void 0:Tt.icontrue),iteration:0,nodeStatus:R,slideStatus:ot},V),null!==(G=d.test)&&void 0!==G&&null!==(G=G.effecttrue)&&void 0!==G&&G.path&&ct(0,{source:(0,Ht.I)(null===(Pt=d.test)||void 0===Pt?void 0:Pt.effecttrue),iteration:0,nodeStatus:R,slideStatus:ot},V)):(null!==(It=d.test)&&void 0!==It&&null!==(It=It.audiofalse)&&void 0!==It&&It.path&&Bt(C,{source:(0,Ht.I)(null===(Xt=d.test)||void 0===Xt?void 0:Xt.audiofalse),iteration:0,nodeStatus:R,slideStatus:ot},V),null!==(Jt=d.test)&&void 0!==Jt&&null!==(Jt=Jt.iconfalse)&&void 0!==Jt&&Jt.path&&P(C,{source:(0,Ht.I)(null===(Qt=d.test)||void 0===Qt?void 0:Qt.iconfalse),iteration:0,nodeStatus:R,slideStatus:ot},V),null!==(Kt=d.test)&&void 0!==Kt&&null!==(Kt=Kt.effectfalse)&&void 0!==Kt&&Kt.path&&ct(0,{source:(0,Ht.I)(null===(ne=d.test)||void 0===ne?void 0:ne.effectfalse),iteration:0,nodeStatus:R,slideStatus:ot},V))},oe=(C,d,R,ot)=>{var X,V,L,S,G,at,Tt,Pt,It;null!==(X=d.animate)&&void 0!==X&&X.value&&((C,d,R)=>{var ot;let{value:V}=null!==(ot=C.animate)&&void 0!==ot?ot:{};((C,d,R)=>{var ot;let X=jQuery("#"+C),V="",L=null!==(ot=d.iteration)&&void 0!==ot?ot:0,S=[];(d.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?S.push(d.value):d.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(d.value)?(S.push("animation"),S.push(`animation-${d.value}`)):(S.push("animate__animated"),S.push(`animate__${d.value}`)):(S.push("animation"),S.push("animation-fadein")),L<0?(S.push("animation-iteration-infinite"),R(),R=function(){}):L>0&&S.push("animation-iteration-"+(L+1)),V=S.join(" "),function(at){let Tt=function(){X.data("animate-running")?X.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){X.data("animate-running",!1),setTimeout(function(){at()},100)}):at()};X.hasClass("animation")?setTimeout(function(){Tt()}):Tt()}(function(){var at;it(C),(L>0||L<0)&&X.one("animationiteration",function(){d.slideStatus===Mt.slideStatus||(X.data("animate-running",!1),it(C),d.slideStatus===Mt.slideStatus&&R())}),X.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(X.data("animate-running",!1),it(C),d.finish){default:case 0:case 1:break;case 2:X.addClass("hide")}d.slideStatus===Mt.slideStatus&&R()}),X.attr("data-class",null!==(at=X.attr("class"))&&void 0!==at?at:""),X.addClass(V),X.data("animate-running",!0)})})(C.id,{value:V,nodeStatus:d,slideStatus:R},()=>{})})(d,R.nodeStatus,R.slideStatus),null!==(V=d.interactive)&&void 0!==V&&V.show?((C,d,R,ot)=>{var X,V,L;console.log("icdt_Run_Interactive_NodeShow",C,d,R);let S={total:0,counter:0},{triggershow:G,triggerrun:at,triggerhide:Tt,action:Pt,audio:It}=null!==(X=null===(V=C.interactive)||void 0===V?void 0:V.show)&&void 0!==X?X:{};if(G){let{id:Kt,ids:Xt,time:Qt,async:ne}=G;"asynctrue"==ne?setTimeout(()=>{(0,E.L5)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}):"time"==ne&&setTimeout(()=>{(0,E.L5)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})},1e3*(null!=Qt?Qt:0))}if(at){let{id:Kt,ids:Xt,time:Qt,async:ne}=at;"asynctrue"==ne?setTimeout(()=>{(0,E.Ar)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}):"time"==ne&&setTimeout(()=>{(0,E.Ar)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})},1e3*(null!=Qt?Qt:0))}if(Tt){let{id:Kt,ids:Xt,time:Qt,async:ne}=Tt;"asynctrue"==ne?setTimeout(()=>{(0,E.WT)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}):"time"==ne&&setTimeout(()=>{(0,E.WT)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})},1e3*(null!=Qt?Qt:0))}let Jt=()=>{setTimeout(()=>{if(S.counter>=S.total){if(ot&&ot(),G){let{id:Kt,ids:Xt,async:Qt}=G;"asyncfalse"==Qt&&(0,E.L5)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}if(at){let{id:Kt,ids:Xt,async:Qt}=at;"asyncfalse"==Qt&&(0,E.Ar)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}if(Tt){let{id:Kt,ids:Xt,async:Qt}=Tt;"asyncfalse"==Qt&&(0,E.WT)({id:Kt,ids:Xt,nodeStatus:d,slideStatus:R})}}})};if(null!=Pt&&Pt.value){S.total+=1;let Kt=()=>{S.counter+=1,Jt()};switch(null==Pt?void 0:Pt.value){case"hide":jQuery("#"+C.id).addClass("hide"),Kt();break;case"points":{let{points:Xt,time:Qt,iteration:ne,finish:re}=Pt;(0,c.G)(C.id,{points:Xt,time:Qt,iteration:ne,finish:re,nodeStatus:d,slideStatus:R},Kt);break}default:{let{value:Xt,time:Qt,iteration:ne,finish:re}=Pt;(0,F.Q)(C.id,{value:Xt,time:Qt,iteration:ne,finish:re,nodeStatus:d,slideStatus:R},Kt);break}}}if(null!=It&&null!==(L=It.source)&&void 0!==L&&L.path){S.total+=1;let Kt=()=>{S.counter+=1,Jt()};(0,T.R)(C.id,It,S,{nodeStatus:d,slideStatus:R},Kt)}S.total||Jt()})(d,R.nodeStatus,R.slideStatus,ot):ot&&ot(),null!==(L=d.interactive)&&void 0!==L&&L.click&&(Object.keys(null!==(Tt=null===(Pt=d.interactive)||void 0===Pt?void 0:Pt.click)&&void 0!==Tt?Tt:{}).length&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(Jt=>{Jt.preventDefault(),R.nodeStatus=Mt.refreshNodeStatus(),(0,M.F)(d,R.nodeStatus,R.slideStatus)})),null!==(S=d.variable)&&void 0!==S&&S.input&&jQuery("#"+d.id).on("change","input,textarea",Jt=>{Jt.preventDefault(),((C,d,R)=>{var ot,X;x.icdt.variable.setValue(null!==(ot=null===(X=d.variable)||void 0===X||null===(X=X.input)||void 0===X?void 0:X.variable)&&void 0!==ot?ot:"",C),(C=>{var d;let R=(ot,X)=>{null==ot||ot.forEach(V=>{switch(V.type){case dt.$.GROUP:(0,O.m)(V.id,{},X?window.document.getElementById(X):null),R(V.nodes,V.id);break;case dt.$.POLYGON:break;case dt.$.TEXT:(0,y.$)(V.id,{size:V.size,attribute:V.attribute,source:V.source},X?window.document.getElementById(X):null)}})};R(null===(d=C.svg)||void 0===d?void 0:d.nodes)})(R)})(Jt.target.value,d,C)}),null!==(G=d.variable)&&void 0!==G&&G.click&&(null!==(It=d.variable)&&void 0!==It&&null!==(It=It.click)&&void 0!==It&&It.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(Jt=>{Jt.preventDefault(),((C,d)=>{var R;x.icdt.variable.setValueOperator(null===(R=C.variable)||void 0===R?void 0:R.click),(C=>{var d;let R=(ot,X)=>{null==ot||ot.forEach(V=>{switch(V.type){case dt.$.GROUP:(0,O.m)(V.id,{},X?window.document.getElementById(X):null),R(V.nodes,V.id);break;case dt.$.POLYGON:break;case dt.$.TEXT:(0,y.$)(V.id,{size:V.size,attribute:V.attribute,source:V.source},X?window.document.getElementById(X):null)}})};R(null===(d=C.svg)||void 0===d?void 0:d.nodes)})(d)})(d,C)})),"test"==(null===(at=d.source)||void 0===at?void 0:at.type)&&((C,d)=>{var R;let ot=()=>{};switch(null===(R=C.source)||void 0===R||null===(R=R.test)||void 0===R?void 0:R.type){case"singlechoice":var X;if(jQuery("#"+C.id).click(S=>{S.preventDefault(),((C,d,R,ot,X)=>{var V,L;let S=null===(V=C.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.singlechoice)||void 0===V?void 0:V.iscorrect;if(null!==(L=d.svg)&&void 0!==L&&L.nodes.find(G=>{var at;return"submit"==(null===(at=G.source)||void 0===at||null===(at=at.test)||void 0===at?void 0:at.type)})||yt(C,d,R,ot,{iscorrect:S},X),d.test?d.test.answer?d.test.answer.singlechoice={value:C.id,iscorrect:S}:d.test.answer={singlechoice:{value:C.id,iscorrect:S}}:d.test={answer:{singlechoice:{value:C.id,iscorrect:S}}},d.test.showselection){let G=(0,Ut.g1)(W.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Ut.Yw)(G,d)}console.log("node source ->",C.source),console.log("slide test ->",d.test)})(C,d,Mt.nodeStatus,Mt.slideStatus,ot)}),null!==(X=d.test)&&void 0!==X&&X.showselection){let S=(0,Ut.g1)(W.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Ut.Yw)(S,d)}break;case"multichoice":var V;if(jQuery("#"+C.id).click(S=>{S.preventDefault(),((C,d,R,ot,X)=>{var V,L;let G,S=null===(V=C.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.multichoice)||void 0===V?void 0:V.iscorrect;if(null!==(L=d.svg)&&void 0!==L&&L.nodes.find(at=>{var Tt;return"submit"==(null===(Tt=at.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||yt(C,d,R,ot,{iscorrect:S},X),d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(at=>at.value==C.id)?(d.test.answer.multichoice=d.test.answer.multichoice.filter(at=>at.value!=C.id),G=!0):d.test.answer.multichoice.push({value:C.id,iscorrect:S}):d.test.answer.multichoice=[{value:C.id,iscorrect:S}]:d.test.answer={multichoice:[{value:C.id,iscorrect:S}]}:d.test={answer:{multichoice:[{value:C.id,iscorrect:S}]}},d.test.showselection){let at=(0,Ut.g1)(W.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Ut.Yw)(at,d)}console.log("node source ->",C.source),console.log("slide test ->",d.test)})(C,d,Mt.nodeStatus,Mt.slideStatus,ot)}),null!==(V=d.test)&&void 0!==V&&V.showselection){let S=(0,Ut.g1)(W.O.TEST_GROUP,"g",void 0,x.icdt.target);(0,Ut.Yw)(S,d)}break;case"fill":var L;jQuery("#"+C.id).on("keyup",'input[type="text"]',S=>{var G;let at=jQuery("<div/>").css({"font-size":jQuery(S.target).css("font-size"),visibility:"hidden",float:"left"}).text(S.target.value).appendTo(window.document.body);jQuery(S.target).css({width:(null!==(G=at.width())&&void 0!==G?G:0)+30})}).on("keypress",'input[type="text"]',S=>{13===(S.keyCode||S.charCode||S.which)&&(S.preventDefault(),S.stopPropagation(),jQuery(S.target).blur())}).on("change",'input[type="text"]',S=>{var G,at;let Tt=Mt.nodeStatus,Pt=Mt.slideStatus,It=null===(G=S.target)||void 0===G?void 0:G.getAttribute("data-key"),Jt=null===(at=S.target)||void 0===at||null===(at=at.value)||void 0===at||null===(at=at.toLowerCase())||void 0===at?void 0:at.trim();((C,d,R,ot,X,V)=>{var L,S,G;let{value:at}=null!==(L=null===(S=C.source)||void 0===S||null===(S=S.test)||void 0===S||null===(S=S.fill)||void 0===S?void 0:S.find(Pt=>Pt.key==`[[${X.key}]]`))&&void 0!==L?L:{},Tt=at&&at.includes(X.value);null!==(G=d.svg)&&void 0!==G&&G.nodes.find(Pt=>{var It;return"submit"==(null===(It=Pt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||yt(C,d,R,ot,{iscorrect:Tt},V),X.iscorrect=Tt,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(Pt=>Pt.key==X.key)?d.test.answer.fill.filter(Pt=>Pt.key==X.key).forEach(Pt=>{Pt.value=X.value,Pt.iscorrect=X.iscorrect}):d.test.answer.fill.push(X):d.test.answer.fill=[X]:d.test.answer={fill:[X]}:d.test={answer:{fill:[X]}},console.log("node source ->",C.source),console.log("slide test ->",d.test)})(C,d,Tt,Pt,{key:It,value:Jt},ot),jQuery("#"+C.id).find(`input[type="text"][data-key="${It}"]`).val(Jt)}),null!==(L=d.test)&&void 0!==L&&L.showselection||jQuery("#"+C.id).addClass("hide-selection");break;case"matching-empty":jQuery("#"+C.id).on("touchmove",".ondrag-item",function(S){S.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(S){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${C.size.height/C.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${S.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(S){var G;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(G=d.test)&&void 0!==G&&G.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(S){},dragend:function(S){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${C.id} .ondrop-here`).kendoDropTarget({dragenter:function(S){S.dropTarget.hasClass("actived")&&S.dropTarget.addClass("focused")},dragleave:function(S){S.dropTarget.hasClass("actived")&&S.dropTarget.removeClass("focused")},drop:function(S){if(!S.dropTarget.hasClass("actived"))return;S.dropTarget.removeClass("focused");let G=S.dropTarget,at=S.draggable.currentTarget;G.is(":empty")||G.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),at.appendTo(G),((C,d,R,ot,X,V)=>{var L,S,G;let{key:at}=null!==(L=null===(S=C.source)||void 0===S||null===(S=S.test)||void 0===S?void 0:S.matching)&&void 0!==L?L:{key:"KIEN"},Tt=X.key==at;null!==(G=d.svg)&&void 0!==G&&G.nodes.find(It=>{var Jt;return"submit"==(null===(Jt=It.source)||void 0===Jt||null===(Jt=Jt.test)||void 0===Jt?void 0:Jt.type)})||yt(C,d,R,ot,{iscorrect:Tt},V),Et(C,d,X);let Pt={key:null!=at?at:"",value:X.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(It=>It.key==at)?d.test.answer.matching.filter(It=>It.key==at).forEach(It=>It.value=Pt.value):d.test.answer.matching.push(Pt):d.test.answer.matching=[Pt]:d.test.answer={matching:[Pt]}:d.test={answer:{matching:[Pt]}},console.log("node source ->",C.source),console.log("slide test ->",d.test)})(C,d,Mt.nodeStatus,Mt.slideStatus,{key:at.data("key")},ot)}});break;case"matching-content":jQuery("#"+C.id).on("touchmove",".ondrag-item",function(S){S.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(S){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${C.size.height/C.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${S.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(S){var G;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(G=d.test)&&void 0!==G&&G.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(S){},dragend:function(S){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${C.id} .ondrop-here`).kendoDropTarget({dragenter:function(S){S.dropTarget.hasClass("actived")&&S.dropTarget.addClass("focused")},dragleave:function(S){S.dropTarget.hasClass("actived")&&S.dropTarget.removeClass("focused")},drop:function(S){if(!S.dropTarget.hasClass("actived"))return;S.dropTarget.removeClass("focused");let at=S.draggable.currentTarget;at.appendTo(S.dropTarget),Et(C,d,{key:at.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+C.id).click(S=>{S.preventDefault(),((C,d,R,ot,X)=>{var V,L,S,G;let at;var Tt;if(null!=d&&null!==(V=d.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.singlechoice)at=null==d||null===(Tt=d.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||null===(Tt=Tt.singlechoice)||void 0===Tt?void 0:Tt.iscorrect;else if(null!=d&&null!==(L=d.test)&&void 0!==L&&null!==(L=L.answer)&&void 0!==L&&L.multichoice){var Pt,It,Jt;at=1==[null==d||null===(Pt=d.test)||void 0===Pt||null===(Pt=Pt.answer)||void 0===Pt||null===(Pt=Pt.multichoice)||void 0===Pt?void 0:Pt.length,null==d||null===(It=d.test)||void 0===It||null===(It=It.answer)||void 0===It||null===(It=It.multichoice)||void 0===It||null===(It=It.map(re=>re.iscorrect?1:0))||void 0===It?void 0:It.reduce((re,le)=>re+le),null==d||null===(Jt=d.svg)||void 0===Jt||null===(Jt=Jt.nodes)||void 0===Jt||null===(Jt=Jt.filter(re=>{var le,pe;return"multichoice"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)&&(null===(pe=re.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===Jt?void 0:Jt.length].filter((re,le,pe)=>pe.indexOf(re)==le).length}else if(null!=d&&null!==(S=d.test)&&void 0!==S&&null!==(S=S.answer)&&void 0!==S&&S.fill){var Kt,Xt;at=(null==d||null===(Kt=d.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||null===(Kt=Kt.fill)||void 0===Kt||null===(Kt=Kt.map(re=>re.iscorrect?1:0))||void 0===Kt?void 0:Kt.reduce((re,le)=>re+le))==(null===(Xt=d.svg)||void 0===Xt||null===(Xt=Xt.nodes)||void 0===Xt||null===(Xt=Xt.filter(re=>{var le;return"fill"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)}))||void 0===Xt?void 0:Xt.length)}else if(null!=d&&null!==(G=d.test)&&void 0!==G&&null!==(G=G.answer)&&void 0!==G&&G.matching){var Qt,ne;at=(null===(Qt=d.svg)||void 0===Qt||null===(Qt=Qt.nodes)||void 0===Qt||null===(Qt=Qt.filter(re=>{var le;return"matching-empty"==(null===(le=re.source)||void 0===le||null===(le=le.test)||void 0===le?void 0:le.type)}))||void 0===Qt?void 0:Qt.length)==((null==d||null===(ne=d.test)||void 0===ne||null===(ne=ne.answer)||void 0===ne?void 0:ne.matching)||[]).map(re=>re.key==re.value?1:0).reduce((re,le)=>re+le)}yt(C,d,R,ot,{iscorrect:at},X),console.log("node source ->",C.source),console.log("slide test ->",d.test)})(C,d,Mt.nodeStatus,Mt.slideStatus,ot)})}})(d,C)};var K=f(8619),j=f(8785),h=f(4921),Q=f(8054),vt=f(2282),ft=f(2875),Ot=f(8419);const jt=(C,d,R)=>{if(R.slideStatus!=Mt.slideStatus||!d.length)return;let ot=d.shift(),X=C.filter(G=>G.idx==ot);if(!X.length)return;let V=Math.max.apply(null,X.map(G=>{var at;return null!==(at=G.time)&&void 0!==at?at:0})),L=!1,S=V<.5?0:setTimeout(()=>{L||(L=!0,jt(C,d,R))},1e3*V);mt(C,d,X,0,R,{idx:ot,total:X.length,counter:0,isRecursive:L,timeoutRecursive:S,maxTimeCoundown:V,uid:Math.floor(1e9*Math.random())})},mt=(C,d,R,ot,X,V)=>{if(X.slideStatus!=Mt.slideStatus)return;let L=R[ot];if(L){switch(L.type){case dt.$.GROUP:break;case dt.$.CIRCLE:(0,K._)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.ELLIPSE:(0,j.r)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.LINE:(0,h.W)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.RECT:(0,Q.f)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.POLYGON:(0,vt.l)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.FOREIGNOBJECT:(0,ft.e)(L.id,{size:L.size,attribute:L.attribute,style:L.style,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.IMAGE:(0,gt.G)(L.id,{size:L.size,attribute:L.attribute,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.TEXT:(0,y.$)(L.id,{size:L.size,attribute:L.attribute,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case dt.$.PATH:(0,Ot.G)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null)}oe(X.slide,L,X,()=>{V.counter+=1,V.maxTimeCoundown<.5&&V.counter>=V.total&&(V.total=V.counter=0,V.isRecursive||(clearTimeout(V.timeoutRecursive),V.isRecursive=!0,setTimeout(()=>{jt(C,d,X)},250)))}),mt(C,d,R,++ot,X,V)}},Mt=new class bt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},x.icdt.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,R;return null!==(d=null===(R=this._dataSource)||void 0===R||null===(R=R.slides)||void 0===R?void 0:R.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var R;let ot=null===(R=this._dataSource)||void 0===R||null===(R=R.slides)||void 0===R?void 0:R.find((It,Jt)=>Jt==this._slideIdx),X=null==ot?void 0:ot.svg,V=(It,Jt)=>{let Kt=null==It?void 0:It.find(ne=>ne.id==d);if(Kt)return Kt.pid=Jt,Kt;let Xt=0,Qt=It.length||0;for(;Xt<Qt&&!Kt&&(Kt=V(It[Xt].nodes||[],It[Xt].id),!Kt);)Xt++;return Kt},L=V((null==X?void 0:X.nodes)||[]);var S,G,at,Tt,Pt;return L?(L.style=null!==(S=L.style)&&void 0!==S?S:{},L.source=null!==(G=L.source)&&void 0!==G?G:{},L.animate=null!==(at=L.animate)&&void 0!==at?at:{},L.interactive=null!==(Tt=L.interactive)&&void 0!==Tt?Tt:{},L.variable=null!==(Pt=L.variable)&&void 0!==Pt?Pt:{},L):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,R,ot){var X;let V;var L,S;if(this.refreshNodeStatus(),this.refreshSlideStatus(),ot)V=null===(L=this._dataSource)||void 0===L||null===(L=L.slides)||void 0===L?void 0:L.find(Pt=>Pt.code==ot||Pt.id==ot),V&&(this._slideIdx=(null===(S=this._dataSource)||void 0===S||null===(S=S.slides)||void 0===S?void 0:S.indexOf(V))||0);else if(R){var G,at;V=null===(G=this._dataSource)||void 0===G||null===(G=G.slides)||void 0===G?void 0:G.find(Pt=>Pt.id==R),V&&(this._slideIdx=(null===(at=this._dataSource)||void 0===at||null===(at=at.slides)||void 0===at?void 0:at.indexOf(V))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),V=this.slide;if(V){var Tt;Yt(x.icdt.container,x.icdt.svg,V,!0),null===(Tt=jQuery(x.icdt.svg).find("#"+W.O.BACKGROUND_GROUP))||void 0===Tt||Tt.empty();let Pt=(0,Ut.g1)(W.O.BACKGROUND_GROUP,"g",void 0,x.icdt.svg);(0,Ut.x0)(Pt,V),(C=>{var d,R,ot,X;let V=Mt.nodeStatus,L=Mt.slideStatus;null===(d=C.svg)||void 0===d||d.nodes.forEach(G=>{G.pid=Math.ceil(1e9*Math.random()),(0,O.m)(G.pid)});let S=null===(R=C.svg)||void 0===R||null===(R=R.nodes)||void 0===R?void 0:R.map(G=>G.idx).filter((G,at,Tt)=>Tt.indexOf(G)==at).sort((G,at)=>(null!=G?G:0)-(null!=at?at:0));jt(null!==(ot=null===(X=C.svg)||void 0===X?void 0:X.nodes)&&void 0!==ot?ot:[],null!=S?S:[],{slide:C,nodeStatus:V,slideStatus:L})})(V)}this.changeSlide(this.slides,null===(X=this.slide)||void 0===X?void 0:X.id,this.slideIdx,this.slides.length,V)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,R,ot,X,V){this._fnChangeSlides.forEach(L=>L(d,R,ot,X,V))}},Yt=(C,d,R,ot)=>{var X,V,L,S;let G=window.document.querySelector(d);var at;G||(G=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(at=window.document.querySelector(C))||void 0===at||at.appendChild(G)),ot&&(G.textContent=null);let{x:Tt,y:Pt,width:It,height:Jt}=null!==(X=null==R||null===(V=R.svg)||void 0===V?void 0:V.viewBox)&&void 0!==X?X:x.icdt.screen.frameSize;G.setAttributeNS(null,"viewBox",Tt+" "+Pt+" "+It+" "+Jt),G.setAttribute("id",d.replace("#",""));var re,le,Kt=null!==(L=jQuery(C).width())&&void 0!==L?L:1080,Xt=null!==(S=jQuery(C).height())&&void 0!==S?S:1080,ne=It/Jt;ne>=Kt/Xt?le=(re=Kt)/ne:re=(le=Xt)*ne,G.setAttributeNS(null,"width",re.toString()),G.setAttributeNS(null,"height",le.toString())}},2336:(ce,At,f)=>{f.d(At,{Q:()=>x});var W=f(1690);const x=(M,F,c)=>{var T;if(!F.value)return void c();let E=jQuery("#"+M),Y="",y=null!==(T=F.iteration)&&void 0!==T?T:0,O=[];(F.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?O.push(F.value):(O.push("animation"),O.push(F.value?"animation-"+F.value:"animation-fadein")),y<0?(O.push("animation-iteration-infinite"),c(),c=function(){}):y>0&&O.push("animation-iteration-"+(y+1)),Y=O.join(" "),function(nt){let D=function(){E.data("animate-running")?E.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){E.data("animate-running",!1),setTimeout(function(){nt()},100)}):nt()};E.hasClass("animation")?setTimeout(function(){D()}):D()}(function(){var nt;dt(M),(y>0||y<0)&&E.one("animationiteration",function(){F.slideStatus===W.$.slideStatus||(E.data("animate-running",!1),dt(M),F.slideStatus===W.$.slideStatus&&c())}),E.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(E.data("animate-running",!1),dt(M),F.finish){default:case 0:case 1:break;case 2:E.addClass("hide")}F.slideStatus===W.$.slideStatus&&c()}),E.attr("data-class",null!==(nt=E.attr("class"))&&void 0!==nt?nt:""),E.addClass(Y),E.data("animate-running",!0)})},dt=function(M){var F,c=jQuery("#"+M),T=null===(F=c.attr("class"))||void 0===F?void 0:F.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);T&&T.forEach(function(Y){jQuery(c).removeClass(Y)});let E=c.attr("data-class");E&&(c.attr("class",E),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},861:(ce,At,f)=>{f.d(At,{G:()=>M});var W=f(4318),x=f(1690),dt=f(4080);const M=(c,T,E)=>{var Y;if(!T.points||!T.points.length)return void E();let y=jQuery("#"+c),O=function F(c){let T=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let _,nt,D,E=1,Y=c.length;for(;E<Y;){if(_=c[E-1],nt=c[E],D=c[E+1],(Math.abs(_[0]-nt[0])>=15||Math.abs(_[1]-nt[1])>=15)&&Math.pow(_[0]-nt[0],2)+Math.pow(_[1]-nt[1],2)>=Math.pow(15,2)&&D&&(Math.abs(_[0]-D[0])<=20||Math.abs(_[1]-D[1])<=20)&&Math.pow(_[0]-D[0],2)+Math.pow(_[1]-D[1],2)<=Math.pow(20,2))T.push(nt);else{let ut=nt[0]-_[0],U=nt[1]-_[1],it=Math.max(Math.abs(ut),Math.abs(U));for(var J=0;J<it;J+=15)T.push([_[0]+ut*J/it,_[1]+U*J/it])}E++}return Y>0&&(T.splice(0,0,c[0]),T.push(c[Y-1])),T}(T.points||[]),_=null!==(Y=T.iteration)&&void 0!==Y?Y:0;if(_<0&&(E(),E=function(){}),y.data("work-running")&&_<0)return;y.data("work-running",!0);let gt,nt=O.length,D=Math.max(20,1e3*(T.time||3)/nt),{id:J,type:ut,size:U,attribute:it}=x.$.findNode(c),wt=function(ct){if(T.slideStatus!==x.$.slideStatus)return y.data("work-running",!1),void(T.slideStatus===x.$.slideStatus&&E());if(ct<nt){let tt=O[ct];tt&&(gt=Object.assign({},U,{x:tt[0]-U.width/2,y:tt[1]-U.height/2}),Object.assign(it,(0,W.sg)(ut,gt)),(0,dt.__)(window.document.getElementById(J),it),setTimeout(function(){wt(++ct)},D))}else if(_>0)_--,wt(1);else if(_<0)wt(1);else switch(y.data("work-running",!1),T.slideStatus===x.$.slideStatus&&E(),T.finish){default:case 0:break;case 1:Object.assign(it,(0,W.sg)(ut,U)),(0,dt.__)(window.document.getElementById(J),it);break;case 2:y.addClass("hide")}};wt(1)}},157:(ce,At,f)=>{f.d(At,{R:()=>x});var W=f(1690);const x=(M,F,c,T,E)=>{var Y,y,O;if(T.slideStatus!=W.$.slideStatus)return F.async&&"change-slide"!=F.async?void 0:void E();if(T.nodeStatus!=W.$.nodeStatus&&(!F.async||"change-node"==F.async))return void E();if(null===(Y=F.source)||void 0===Y||!Y.url)return console.warn(`${M} -> audio no source!`),E(),void(E=()=>{});var _=jQuery("#"+M);let nt=null!==(y=F.iteration)&&void 0!==y?y:0;if(nt<0&&(E(),E=function(){}),!(_.data("audio-running")&&nt<0)){_.data("audio-running",!0);var D=function(ut){ut.pause(),ut.remove(),_.data("audio-running",!1)},J=new Audio;return J.autoplay=!0,J.loop=0!=nt,J.preload="auto",J.controls=!0,J.setAttributeNode(document.createAttribute("playsinline")),J.addEventListener("canplay",function(){var ut=J.play();ut&&ut.then(function(U){var it;_.data("audio-running",!0),"time"==F.async?setTimeout(()=>{D(J),E(),E=()=>{}},1e3*(null!==(it=F.time)&&void 0!==it?it:1)):"non-stop"==F.async&&(E(),E=()=>{})}).catch(function(U){_.data("audio-running",!1),T.slideStatus===W.$.slideStatus&&(E(),E=()=>{})})}),J.addEventListener("timeupdate",function(){switch(F.async){case"time":case"non-stop":break;case"finish-action":c.total>=2&&c.total-c.counter==1&&(D(this),E(),E=()=>{});break;default:case"change-node":T.nodeStatus!==W.$.nodeStatus&&(D(this),E(),E=()=>{});break;case"change-slide":T.slideStatus!==W.$.slideStatus&&(D(this),E(),E=()=>{})}}),J.addEventListener("canplaythrough",function(){this.loop&&(nt>0?nt--:0==nt&&(this.loop=!1))}),J.addEventListener("play",function(){}),J.addEventListener("pause",function(){}),J.addEventListener("ended",function(){this.remove(),_.data("audio-running",!1),T.slideStatus===W.$.slideStatus&&(E(),E=()=>{})}),J.onerror=function(){this.remove(),_.data("audio-running",!1),T.slideStatus===W.$.slideStatus&&(E(),E=()=>{})},J.src=(null===(O=F.source)||void 0===O?void 0:O.url)||"",J}}},5973:(ce,At,f)=>{f.d(At,{F:()=>E});var W=f(4981),x=f(1690),dt=f(2336),M=f(861),F=f(157),c=f(4787),T=f(370);const E=(Y,y,O,_)=>{var nt,D,J;let ut={total:0,counter:0},{triggershow:U,triggerrun:it,triggerhide:gt,action:wt,audio:ct,slide:tt,media:P}=null!==(nt=null===(D=Y.interactive)||void 0===D?void 0:D.click)&&void 0!==nt?nt:{};if(U){let{id:Ht,ids:kt,time:Gt,async:ht}=U;"asynctrue"==ht?(0,c.L5)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O}):"time"==ht&&setTimeout(()=>{(0,c.L5)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})},1e3*(null!=Gt?Gt:0))}if(it){let{id:Ht,ids:kt,time:Gt,async:ht}=it;"asynctrue"==ht?(0,c.Ar)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O}):"time"==ht&&setTimeout(()=>{(0,c.Ar)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})},1e3*(null!=Gt?Gt:0))}if(gt){let{id:Ht,ids:kt,time:Gt,async:ht}=gt;"asynctrue"==ht?(0,c.WT)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O}):"time"==ht&&setTimeout(()=>{(0,c.WT)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})},1e3*(null!=Gt?Gt:0))}let Wt=()=>{setTimeout(()=>{if(ut.counter>=ut.total){if(_&&_(),U){let{id:Ht,ids:kt,async:Gt}=U;"asyncfalse"==Gt&&(0,c.L5)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})}if(it){let{id:Ht,ids:kt,async:Gt}=it;"asyncfalse"==Gt&&(0,c.Ar)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})}if(gt){let{id:Ht,ids:kt,async:Gt}=gt;"asyncfalse"==Gt&&(0,c.WT)({id:Ht,ids:kt,nodeStatus:y,slideStatus:O})}}})};if(null!=wt&&wt.value){ut.total+=1;let Ht=()=>{ut.counter+=1,Wt()};switch(wt.value){case"hide":jQuery("#"+Y.id).addClass("hide"),Ht();break;case"points":{let{points:kt,time:Gt,iteration:ht,finish:rt}=wt;kt&&(0,M.G)(Y.id,{points:kt,time:Gt,iteration:ht,finish:rt,nodeStatus:y,slideStatus:O},Ht);break}default:{let{value:kt,time:Gt,iteration:ht,finish:rt}=wt;(0,dt.Q)(Y.id,{value:kt,time:Gt,iteration:ht,finish:rt,nodeStatus:y,slideStatus:O},Ht);break}}}if(null!=ct&&null!==(J=ct.source)&&void 0!==J&&J.path){ut.total+=1;let Ht=()=>{ut.counter+=1,Wt()};(0,F.R)(Y.id,ct,ut,{nodeStatus:y,slideStatus:O},Ht)}if(ut.total||Wt(),null!=tt&&tt.id)switch(console.log(`InteractiveNode #${Y.id} slide(undefined,${tt.id},${tt.code}) success!`),tt.id){case-1:x.$.runSlide(x.$.slideIdx-1);break;case-2:x.$.runSlide(x.$.slideIdx+1);break;default:var Ut;x.$.runSlide(void 0,tt.id,null===(Ut=tt.code)||void 0===Ut?void 0:Ut.toString())}if(null!=P&&P.type){var Bt;let kt=`<div class="popup-media-viewer"><iframe src="${(0,T.e)({readfileuploadurl:null===(Bt=W.icdt.config)||void 0===Bt?void 0:Bt.readfileuploadurl,type:null==P?void 0:P.type,oss:null==P?void 0:P.oss,path:null==P?void 0:P.path,pathExtract:null==P?void 0:P.pathExtract,url:null==P?void 0:P.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Gt=jQuery(kt).appendTo(window.document.body);Gt.find(".btn-close").click(function(ht){ht.preventDefault(),Gt.remove()})}}},4787:(ce,At,f)=>{f.d(At,{Ar:()=>M,L5:()=>dt,WT:()=>F});var W=f(1690),x=f(5973);const dt=c=>{console.log("icdt_Run_Interactive_TriggerShow",c),c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(T=>{jQuery("#"+T).removeClass("hide")})},M=c=>{console.log("icdt_Run_Interactive_TriggerRun",c),c.id?(jQuery("#"+c.id).removeClass("hide"),(0,x.F)(W.$.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(T=>{jQuery("#"+T).removeClass("hide"),(0,x.F)(W.$.findNode(T),c.nodeStatus,c.slideStatus)})},F=c=>{console.log("icdt_Run_Interactive_TriggerHide",c),c.id?jQuery("#"+c.id).addClass("hide"):c.ids&&c.ids.forEach(T=>{jQuery("#"+T).addClass("hide")})}},4080:(ce,At,f)=>{f.d(At,{Mh:()=>gt,wM:()=>tt,x_:()=>wt,it:()=>P,g1:()=>kt,__:()=>Wt,QI:()=>Bt,DB:()=>Ut,eb:()=>ct,x0:()=>yt,g$:()=>Gt,mo:()=>$t,XH:()=>Et,hJ:()=>ht,vl:()=>xt,yD:()=>rt,Yw:()=>oe});var W=f(9054),x=f(1687),F=/^#?[a-fA-F0-9]+$/;const E=(K,j)=>{var h;if("none"==(K=null!==(h=K)&&void 0!==h?h:""))return"none";if("transparent"==K)return"rgba(0,0,0,0)";if(K.includes("rgba("))return K;if(K.includes("rgb(")&&(K=((K,j)=>{if(!K)return"";let h=K.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),Q=(h&&h[4]||"").trim(),vt=h?(256|h[1]).toString(16).slice(1)+(256|h[2]).toString(16).slice(1)+(256|h[3]).toString(16).slice(1):K;return"0"==Q?"transparent":`#${vt}`})(K)),!(K=K.replace(/[^0-9a-fA-F]/g,"")))return"";if(!F.test(K))return console.error(`hex2rgba -> ${K}: first argument has invalid hexadecimal characters`),"";if("#"===K[0]&&(K=K.slice(1)),3===K.length){let vt=K.split("");vt.splice(2,0,K[2]),vt.splice(1,0,K[1]),vt.splice(0,0,K[0]),K=vt.join("")}if(6!==K.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var Q=[parseInt(K.slice(0,2),16),parseInt(K.slice(2,4),16),parseInt(K.slice(4,6),16)];return j="number"==typeof j?j:parseFloat(j),Q.push(j>=0&&j<=1?j:1),"rgba("+Q.join(",")+")"};var Y=f(370),y=f(1814),O=f(4981),_=f(3423),nt=f(8054),D=f(7210),J=f(8619),ut=f(1690),U=f(2875),it=f(1105);class gt{constructor(j,h){let Q=window.document.querySelector(h);var vt;Q||(Q=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(vt=window.document.querySelector(j))||void 0===vt||vt.appendChild(Q));let{svgViewBox:ft,svgSize:Ot}=O.icdt.screen.init();Q.setAttributeNS(null,"viewBox",`${ft.x} ${ft.y} ${ft.width} ${ft.height}`),Q.setAttribute("id",h.replace("#","")),Q.style.display="block",Q.style.position="absolute",Q.style.left=`${Ot.x}px`,Q.style.top=`${Ot.y}px`,Q.style.width=`${Ot.width}px`,Q.style.height=`${Ot.height}px`,Q.style.backgroundColor="#fafafa",Q.style.cursor="default"}}const wt=K=>{var j,h,Q,vt,ft,Ot;O.icdt.target.setAttributeNS(null,"viewBox",`${null!==(j=null==K||null===(h=K.svg)||void 0===h?void 0:h.viewBox.x)&&void 0!==j?j:0} ${null!==(Q=null==K||null===(vt=K.svg)||void 0===vt?void 0:vt.viewBox.y)&&void 0!==Q?Q:0} ${null==K||null===(ft=K.svg)||void 0===ft?void 0:ft.viewBox.width} ${null==K||null===(Ot=K.svg)||void 0===Ot?void 0:Ot.viewBox.height}`),jQuery(O.icdt.target).find("#"+x.O.BACKGROUND_GROUP).empty();let Dt=kt(x.O.BACKGROUND_GROUP,"g",void 0,O.icdt.target);yt(Dt,K),(()=>{let jt=window.document.getElementById(null==K?void 0:K.id);jQuery(jt).find("#"+x.O.BACKGROUND_GROUP).empty();let mt=kt(x.O.BACKGROUND_GROUP,"g",void 0,jt);yt(mt,K)})()},ct=()=>{let K=O.icdt.screen.svgViewBox,j=O.icdt.screen.svgSize;O.icdt.target&&(O.icdt.target.setAttributeNS(null,"viewBox",`${K.x} ${K.y} ${K.width} ${K.height}`),O.icdt.target.style.left=`${j.x}px`,O.icdt.target.style.top=`${j.y}px`,O.icdt.target.style.width=`${j.width}px`,O.icdt.target.style.height=`${j.height}px`)},tt=()=>{jQuery(O.icdt.target).find(">*:not(defs)").remove()},P=(K,j,h,Q,vt)=>{let ft;return K?(ft=jQuery(vt||O.icdt.target).find("#"+K).get(0),ft||(ft=window.document.createElementNS("http://www.w3.org/2000/svg",h),ft.setAttribute("id",K),jQuery(ft).appendTo(vt||O.icdt.target))):(ft=window.document.createElementNS("http://www.w3.org/2000/svg",h),jQuery(ft).appendTo(vt||O.icdt.target)),null!=Q&&Q.attribute&&Wt(ft,null==Q?void 0:Q.attribute),null!=Q&&Q.style&&Ut(ft,null==Q?void 0:Q.style),null!=Q&&Q.source&&Bt(ft,j,null==Q?void 0:Q.source),ft},Wt=(K,j)=>{return jQuery(K).attr((h=Object.assign({},j||{}),null===(Q=Object.keys(h))||void 0===Q||Q.forEach(Ot=>{switch(Ot){case"fill":break;case"stroke":var Dt;Object.assign(h,{"stroke-width":null!==(Dt=h.strokeWidth)&&void 0!==Dt?Dt:null,strokeWidth:null});break;case"strokeLinecap":var jt;Object.assign(h,{"stroke-linecap":null!==(jt=h.strokeLinecap)&&void 0!==jt?jt:null,strokeLinecap:null});break;case"strokeLinejoin":var mt;Object.assign(h,{"stroke-linejoin":null!==(mt=h.strokeLinejoin)&&void 0!==mt?mt:null,strokeLinejoin:null});break;case"strokeDasharray":var bt;Object.assign(h,{"stroke-dasharray":null!==(bt=h.strokeDasharray)&&void 0!==bt?bt:null,strokeDasharray:null});break;case"strokeDasharrays":var Mt,Yt;Object.assign(h,{"stroke-dasharray":null!==(Mt=null===(Yt=h.strokeDasharrays)||void 0===Yt?void 0:Yt.join(" "))&&void 0!==Mt?Mt:null,strokeDasharrays:null});break;case"fontFamily":var C;Object.assign(h,{"font-family":null!==(C=h.fontFamily)&&void 0!==C?C:null,fontFamily:null});break;case"fontSize":var d;Object.assign(h,{"font-size":null!==(d=h.fontSize)&&void 0!==d?d:null,fontSize:null});break;case"textLength":Object.assign(h,{textLength:h.textLength?`${h.textLength}px`:null});break;case"transformOrigin":var R;Object.assign(h,{"transform-origin":null!==(R=h.transformOrigin)&&void 0!==R?R:null,transformOrigin:null})}}),Object.assign({},null!=h?h:{},{fill:null!=h&&h.fill?E(h.fill,null!==(vt=null==h?void 0:h.fillOpacity)&&void 0!==vt?vt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=h&&h.stroke?E(h.stroke,null!==(ft=null==h?void 0:h.strokeOpacity)&&void 0!==ft?ft:1):"rgba(0,0,0,0)",strokeOpacity:null}))),K;var h,Q,vt,ft},Ut=(K,j)=>{return jQuery(K).css((h=Object.assign({},j||{}),null===(Q=Object.keys(h))||void 0===Q||Q.forEach(vt=>{switch(vt){case"padding":Object.assign(h,{padding:h.padding?`${h.padding}px`:null});break;case"borderWidth":var ft;Object.assign(h,h.borderWidth&&h.borderStyle&&h.borderColor?{"border-width":`${h.borderWidth}px`,"border-style":h.borderStyle,"border-color":E(h.borderColor,null!==(ft=h.borderOpacity)&&void 0!==ft?ft:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(h,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(h,{"border-radius":h.borderRadius?`${h.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Ot;h.backgroundColor&&Object.assign(h,{"background-color":E(h.backgroundColor,null!==(Ot=h.backgroundOpacity)&&void 0!==Ot?Ot:1)}),Object.assign(h,{backgroundColor:null,backgroundOpacity:null})}}),h)),K;var h,Q},Bt=(K,j,h)=>{switch(j){case W.$.TEXT:var Q,vt;jQuery(K).text(null!==(Q=null==h||null===(vt=h.text)||void 0===vt?void 0:vt.textContent)&&void 0!==Q?Q:"");break;case W.$.IMAGE:var ft,Ot,Dt,jt,mt,bt,Mt;jQuery(K).attr("href",(null==h||null===(ft=h.image)||void 0===ft?void 0:ft.base64)||(null!=h&&null!==(Ot=h.image)&&void 0!==Ot&&Ot.path?`${null!==(Dt=null===(jt=O.icdt.config)||void 0===jt?void 0:jt.readfileuploadurl)&&void 0!==Dt?Dt:""}${null!==(mt=null==h||null===(bt=h.image)||void 0===bt?void 0:bt.path)&&void 0!==mt?mt:""}`:"")||(null==h||null===(Mt=h.image)||void 0===Mt?void 0:Mt.url)||"");break;case W.$.FOREIGNOBJECT:switch(null==h?void 0:h.type){case"text":var Yt,C;if(null!==(Yt=h.text)&&void 0!==Yt&&Yt.variableKeywords&&null!==(C=h.text)&&void 0!==C&&C.variableKeywords.length){var d;let A=O.icdt.variable.getKeys(),z=(null===(d=h.text)||void 0===d?void 0:d.textContent)||"";h.text.variableKeywords.forEach(H=>{var q=H.replace(/[^a-zA-Z0-9_]/gm,"");if(A.indexOf(q)>=0){var Z=O.icdt.variable.getValue(q);z=z.replace(H,Z)}}),jQuery(K).text(z)}else{var R;jQuery(K).text((null===(R=h.text)||void 0===R?void 0:R.textContent)||"")}break;case"html":{var ot,X,V;let A=(null==h||null===(ot=h.html)||void 0===ot?void 0:ot.htmlContent)||"";if(null!==(X=h.html)&&void 0!==X&&X.variableKeywords&&null!==(V=h.html)&&void 0!==V&&V.variableKeywords.length){let z=O.icdt.variable.getKeys();h.html.variableKeywords.forEach(H=>{var q=H.replace(/[^a-zA-Z0-9_]/gm,"");if(z.indexOf(q)>=0){var Z=O.icdt.variable.getValue(q);A=A.replace(H,Z)}})}jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${A}</div>`).find("img[path],video[path],iframe[path]").each((z,H)=>{var q,Z,Lt;H.setAttribute("src",(null!==(q=null===(Z=O.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)&&void 0!==q?q:"")+(null!==(Lt=H.getAttribute("path"))&&void 0!==Lt?Lt:"")),H.removeAttribute("path")});break}case"input":var L,S,G,at;if(null!==(L=h.input)&&void 0!==L&&L.input)jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(G=null===(at=h.input)||void 0===at?void 0:at.placeholder)&&void 0!==G?G:""}" maxlength="100" /></div>`);else if(null!==(S=h.input)&&void 0!==S&&S.textarea){var Tt,Pt;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Tt=null===(Pt=h.input)||void 0===Pt?void 0:Pt.placeholder)&&void 0!==Tt?Tt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var It,Jt,Kt,Xt,Qt,ne,re;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(It=h.image)||void 0===It?void 0:It.base64)||(null!==(Jt=h.image)&&void 0!==Jt&&Jt.path?`${null!==(Kt=null===(Xt=O.icdt.config)||void 0===Xt?void 0:Xt.readfileuploadurl)&&void 0!==Kt?Kt:""}${null!==(Qt=null===(ne=h.image)||void 0===ne?void 0:ne.path)&&void 0!==Qt?Qt:""}`:"")||(null===(re=h.image)||void 0===re?void 0:re.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var le,pe,$e,qe,Ke,ni,ri;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${null!==(le=h.iframe)&&void 0!==le&&le.path?`${null!==(pe=null===($e=O.icdt.config)||void 0===$e?void 0:$e.readfileuploadurl)&&void 0!==pe?pe:""}${null!==(qe=null===(Ke=h.iframe)||void 0===Ke?void 0:Ke.path)&&void 0!==qe?qe:""}`:null!==(ni=null===(ri=h.iframe)||void 0===ri?void 0:ri.url)&&void 0!==ni?ni:""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var vi,Me,li,We,Je,ai;let A=(0,Y.e)({readfileuploadurl:null===(vi=O.icdt.config)||void 0===vi?void 0:vi.readfileuploadurl,type:null===(Me=h.embed)||void 0===Me?void 0:Me.type,oss:null===(li=h.embed)||void 0===li?void 0:li.oss,path:null===(We=h.embed)||void 0===We?void 0:We.path,pathExtract:null===(Je=h.embed)||void 0===Je?void 0:Je.pathExtract,url:null===(ai=h.embed)||void 0===ai?void 0:ai.url});jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${A}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var oi,ti;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(oi=null===(ti=h.svg)||void 0===ti?void 0:ti.svgContent)&&void 0!==oi?oi:""}</div>`);break;case"test":{var Ve,si,_t,k;let A=(null==h||null===(Ve=h.html)||void 0===Ve?void 0:Ve.htmlContent)||"";if(null!==(si=h.html)&&void 0!==si&&si.variableKeywords&&null!==(_t=h.html)&&void 0!==_t&&_t.variableKeywords.length){let z=O.icdt.variable.getKeys();h.html.variableKeywords.forEach(H=>{var q=H.replace(/[^a-zA-Z0-9_]/gm,"");if(z.indexOf(q)>=0){var Z=O.icdt.variable.getValue(q);A=A.replace(H,Z)}})}switch(null==h||null===(k=h.test)||void 0===k?void 0:k.type){case"matching-empty":jQuery(K).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty"></div>');break;case"matching-content":var i,n;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content"><div class="ondrag-item" data-key="${null!==(i=null==h||null===(n=h.test)||void 0===n||null===(n=n.matching)||void 0===n?void 0:n.key)&&void 0!==i?i:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${A}</div></div></div></div>`);break;case"singlechoice":case"multichoice":jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${A}</div></div></div>`);break;case"fill":var r;((null===(r=h.html)||void 0===r?void 0:r.fillKeywords)||[]).forEach(z=>{var H=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${z.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;A=A.replace(new RegExp(z.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),H)}),jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${A}</div></div></div>`);break;case"speech":jQuery(K).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var a,s,v,p,w,B,b;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(a=null!==(s=null===(v=h.image)||void 0===v?void 0:v.url)&&void 0!==s?s:`${null!==(p=null===(w=O.icdt.config)||void 0===w?void 0:w.readfileuploadurl)&&void 0!==p?p:""}${null!==(B=null===(b=h.image)||void 0===b?void 0:b.path)&&void 0!==B?B:""}`)&&void 0!==a?a:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(K).find("img[path],video[path],iframe[path]").each((z,H)=>{var q,Z,Lt;H.setAttribute("src",(null!==(q=null===(Z=O.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)&&void 0!==q?q:"")+(null!==(Lt=H.getAttribute("path"))&&void 0!==Lt?Lt:"")),H.removeAttribute("path")})}}}},kt=(K,j,h,Q)=>{let vt=jQuery(Q||O.icdt.target).find("#"+K).get(0);return vt||(vt=window.document.createElementNS("http://www.w3.org/2000/svg",j),vt.setAttribute("id",K),jQuery(vt).appendTo(Q||O.icdt.target)),jQuery(vt).attr((null==h?void 0:h.attribute)||{}),jQuery(vt).css((null==h?void 0:h.style)||{}),vt},Gt=(K,j)=>{let h=(0,_.v)(2),Q={fill:y.S3.fill,stroke:y.S3.stroke,"stroke-width":(0,_.v)(y.S3.strokeWidth)};return[{element:kt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:j.x-h,y:j.y-h,width:j.width+2*h,height:j.height+2*h},Q)},K),posType:"rect-center"}]},ht=(K,j)=>{let{size:h}=j,Q=(0,_.v)(1),vt=(0,_.v)(2),ft=(0,_.v)(5),Ot={stroke:y.NV.stroke,"stroke-width":(0,_.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Dt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,_.v)(y.Mo.strokeWidth)},jt={fill:y.In.fill,stroke:y.In.stroke,"stroke-width":(0,_.v)(y.In.strokeWidth),width:(0,_.v)(y.In.width),height:(0,_.v)(y.In.height)};return kt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:h.x-Q,y1:h.y,x2:h.x-Q,y2:h.y+h.height},Ot)},K),kt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:h.x,y1:h.y-Q,x2:h.x+h.width,y2:h.y-Q},Ot)},K),kt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:h.x+h.width+Q,y1:h.y,x2:h.x+h.width+Q,y2:h.y+h.height},Ot)},K),kt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:h.x,y1:h.y+h.height+Q,x2:h.x+h.width,y2:h.y+h.height+Q},Ot)},K),[{element:kt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:h.x,y:h.y,width:h.width,height:h.height},Dt),style:{cursor:"move"}},K),posType:"rect-center"},{element:kt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:h.x-ft,y:h.y-ft},jt),style:{cursor:"nw-resize"}},K),posType:"rect-top-left"},{element:kt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:h.x+h.width-vt,y:h.y-ft},jt),style:{cursor:"ne-resize"}},K),posType:"rect-top-right"},{element:kt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:h.x-ft,y:h.y+h.height-vt},jt),style:{cursor:"sw-resize"}},K),posType:"rect-bottom-left"},{element:kt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:h.x+h.width-vt,y:h.y+h.height-vt},jt),style:{cursor:"se-resize"}},K),posType:"rect-bottom-right"}]},rt=(K,j,h)=>{let Q=(0,_.v)(1),vt={stroke:y.NV.stroke,"stroke-width":(0,_.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ft={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,_.v)(y.Mo.strokeWidth)},Ot={fill:y.dt.fill,stroke:y.dt.stroke,"stroke-width":(0,_.v)(y.dt.strokeWidth)},Mt=(kt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:h.x-Q,y1:h.y,x2:h.x-Q,y2:h.y+h.height},vt)},K),kt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:h.x,y1:h.y-Q,x2:h.x+h.width,y2:h.y-Q},vt)},K),kt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:h.x+h.width+Q,y1:h.y,x2:h.x+h.width+Q,y2:h.y+h.height},vt)},K),kt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:h.x,y1:h.y+h.height+Q,x2:h.x+h.width,y2:h.y+h.height+Q},vt)},K),kt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:h.x,y:h.y,width:h.width,height:h.height},ft)},K));return j.forEach(Yt=>{let{size:C}=Yt;kt("icdt-temp-select-rect-node-"+Yt.id,"rect",{attribute:Object.assign({x:C.x,y:C.y,width:C.width,height:C.height},Ot)},K)}),[{element:Mt,posType:"rect-center"}]},xt=(K,j)=>{let h=(0,_.v)(1),Q={stroke:y.NV.stroke,"stroke-width":(0,_.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},vt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,_.v)(y.Mo.strokeWidth)};return kt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:j.x-h,y1:j.y,x2:j.x-h,y2:j.y+j.height},Q)},K),kt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:j.x,y1:j.y-h,x2:j.x+j.width,y2:j.y-h},Q)},K),kt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:j.x+j.width+h,y1:j.y,x2:j.x+j.width+h,y2:j.y+j.height},Q)},K),kt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:j.x,y1:j.y+j.height+h,x2:j.x+j.width,y2:j.y+j.height+h},Q)},K),[{element:kt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:j.x,y:j.y,width:j.width,height:j.height},vt)},K),posType:"rect-center"}]},Et=(K,j)=>{let h=(0,_.v)(-1),Q={stroke:y.h8.stroke,"stroke-width":(0,_.v)(y.h8.strokeWidth),"stroke-linecap":y.h8.strokeLinecap,"stroke-dasharray":(0,_.v)(y.h8.strokeDasharray)},vt={fill:y.MA.fill};return kt("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:j.x-h,y1:j.y,x2:j.x-h,y2:j.y+j.height},Q)},K),kt("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:j.x,y1:j.y-h,x2:j.x+j.width,y2:j.y-h},Q)},K),kt("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:j.x+j.width+h,y1:j.y,x2:j.x+j.width+h,y2:j.y+j.height},Q)},K),kt("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:j.x,y1:j.y+j.height+h,x2:j.x+j.width,y2:j.y+j.height+h},Q)},K),kt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:j.x,y:j.y,width:j.width,height:j.height},vt)},K),[]},$t=(K,j)=>{let h={fill:y.k0.fill,stroke:y.k0.stroke,"stroke-width":(0,_.v)(y.k0.strokeWidth),"stroke-dasharray":(0,_.v)(y.k0.strokeDasharray)};jQuery(K).empty(),j.forEach(Q=>{var vt,ft;let{size:Ot}=Q;if(!Q.idx)return;kt("icdt-temp-index-rect-node-"+Q.id,"rect",{attribute:Object.assign({x:Ot.x-5,y:Ot.y-5,width:Ot.width+10,height:Ot.height+10},h)},K);let{element:Dt}=(0,U.e)(Math.ceil(1e9*Math.random()),{size:{x:Ot.x-76,y:Ot.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(vt=Q.idx)&&void 0!==vt?vt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(ft=Q.time)&&void 0!==ft?ft:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},K);Dt.classList.add("node-input"),jQuery(Dt).on("change",'input[name="idx"]',jt=>{var mt;Q.idx=parseInt(null!==(mt=jt.target.value)&&void 0!==mt?mt:"0")}).on("change",'input[name="time"]',jt=>{var mt;Q.time=parseFloat(null!==(mt=jt.target.value)&&void 0!==mt?mt:"0")}).on("click",'button[name="remove"]',jt=>{Q.idx=0,Q.time=null,$t(K,j)})})},yt=(K,j)=>{var h,Q,vt,ft,Ot,Dt;let{color:jt,opacity:mt,path:bt,url:Mt,base64:Yt}=null!==(h=null==j||null===(Q=j.svg)||void 0===Q?void 0:Q.background)&&void 0!==h?h:{},{x:C,y:d,width:R,height:ot}=null!==(vt=null==j||null===(ft=j.svg)||void 0===ft?void 0:ft.viewBox)&&void 0!==vt?vt:{x:0,y:0,width:0,height:0};(0,it.$)(void 0,{size:{x:0,y:-7,width:R,height:ot},attribute:{fill:"#999",fontSize:14,class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Ot=null!==(Dt=null==j?void 0:j.name)&&void 0!==Dt?Dt:null==j?void 0:j.code)&&void 0!==Ot?Ot:void 0}}},K),(0,nt.f)(void 0,{size:{x:C,y:d,width:R,height:ot},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},K),jt&&(0,nt.f)(void 0,{size:{x:C,y:d,width:R,height:ot},attribute:{fill:jt,fillOpacity:mt}},K),bt&&(0,D.G)(void 0,{size:{x:C,y:d,width:R,height:ot},source:{type:"image",image:{path:bt,url:Mt,base64:Yt}}},K)},oe=(K,j)=>{var h;switch(jQuery(K).empty(),null===(h=j.test)||void 0===h?void 0:h.type){case"singlechoice":{var Q,vt,ft;let Mt=null==j||null===(Q=j.test)||void 0===Q||null===(Q=Q.answer)||void 0===Q||null===(Q=Q.singlechoice)||void 0===Q?void 0:Q.value;null===(vt=j.svg)||void 0===vt||vt.nodes.filter(Yt=>{var C;return"singlechoice"==(null===(C=Yt.source)||void 0===C||null===(C=C.test)||void 0===C?void 0:C.type)&&Yt.id!=Mt}).forEach(Yt=>{var C;let{x:R,y:ot,width:X,height:V}=null!==(C=null==Yt?void 0:Yt.size)&&void 0!==C?C:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:R-.5,y:ot-.5,width:X+1,height:V+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},K)}),null!=j&&null!==(ft=j.test)&&void 0!==ft&&null!==(ft=ft.answer)&&void 0!==ft&&ft.singlechoice&&Mt&&(Yt=>{let C=ut.$.findNode(Mt),{x:R,y:ot,width:X,height:V}=null!==(Yt=null==C?void 0:C.size)&&void 0!==Yt?Yt:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:R-2,y:ot-2,width:X+4,height:V+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:8}},K)})();break}case"multichoice":{var Ot,Dt,jt,mt;let Mt=null!==(Ot=null==j||null===(Dt=j.test)||void 0===Dt||null===(Dt=Dt.answer)||void 0===Dt||null===(Dt=Dt.multichoice)||void 0===Dt?void 0:Dt.map(Yt=>Yt.value))&&void 0!==Ot?Ot:[];var bt;null===(jt=j.svg)||void 0===jt||jt.nodes.filter(Yt=>{var C;return"multichoice"==(null===(C=Yt.source)||void 0===C||null===(C=C.test)||void 0===C?void 0:C.type)&&!Mt.includes(Yt.id)}).forEach(Yt=>{var C;let{x:R,y:ot,width:X,height:V}=null!==(C=null==Yt?void 0:Yt.size)&&void 0!==C?C:{x:0,y:0,width:0,height:0};(0,nt.f)(Math.ceil(1e9*Math.random()),{size:{x:R-.5,y:ot-.5,width:X+1,height:V+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},K)}),null!=j&&null!==(mt=j.test)&&void 0!==mt&&null!==(mt=mt.answer)&&void 0!==mt&&mt.multichoice&&Mt.length&&(null==j||null===(bt=j.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||bt.multichoice.forEach(Yt=>{var C;let d=ut.$.findNode(Yt.value),{x:ot,y:X,width:V,height:L}=null!==(C=null==d?void 0:d.size)&&void 0!==C?C:{x:0,y:0,width:0,height:0};(0,nt.f)(Math.ceil(1e9*Math.random()),{size:{x:ot-2,y:X-2,width:V+4,height:L+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:8}},K)}));break}}}},370:(ce,At,f)=>{f.d(At,{e:()=>dt});const dt=c=>{switch(null==c?void 0:c.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+c.readfileuploadurl+c.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+c.readfileuploadurl+c.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+c.readfileuploadurl+c.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+c.readfileuploadurl+c.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+c.readfileuploadurl+c.path;case 906:case 911:case 910:return""+c.readfileuploadurl+c.path;case 905:var T;return"imsmanifest.xml"==(null===(T=c.pathExtract)||void 0===T||null===(T=T.split("/"))||void 0===T?void 0:T.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+c.readfileuploadurl+c.pathExtract:""+c.readfileuploadurl+c.path;case 907:case 900:return""+c.readfileuploadurl+c.path;case 904:switch(c.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+c.url;case 1002:var E;return null!==(E=M(c.url))&&void 0!==E?E:"";case 1005:var Y;return null!==(Y=c.url)&&void 0!==Y?Y:"";default:var y;return null!==(y=c.url)&&void 0!==y?y:""}default:return""+c.readfileuploadurl+c.path}},M=c=>{let T=F(c);return T?"https://www.youtube.com/embed/"+T+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},F=c=>{let T=null==c?void 0:c.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return T&&T.length>=2?T[1]:null}},511:(ce,At,f)=>{function W(){}function x(t){return null==t?W:function(){return this.querySelector(t)}}function F(){return[]}function c(t){return null==t?F:function(){return this.querySelectorAll(t)}}function Y(t){return function(){return this.matches(t)}}function y(t){return function(e){return e.matches(t)}}f.d(At,{$0Z:()=>aa,jvg:()=>la});var O=Array.prototype.find;function nt(){return this.firstElementChild}var J=Array.prototype.filter;function ut(){return Array.from(this.children)}function wt(t){return new Array(t.length)}function tt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Wt(t,e,l,o,u,g){for(var I,m=0,N=e.length,lt=g.length;m<lt;++m)(I=e[m])?(I.__data__=g[m],o[m]=I):l[m]=new tt(t,g[m]);for(;m<N;++m)(I=e[m])&&(u[m]=I)}function Ut(t,e,l,o,u,g,m){var I,N,Vt,lt=new Map,st=e.length,Nt=g.length,Rt=new Array(st);for(I=0;I<st;++I)(N=e[I])&&(Rt[I]=Vt=m.call(N,N.__data__,I,e)+"",lt.has(Vt)?u[I]=N:lt.set(Vt,N));for(I=0;I<Nt;++I)Vt=m.call(t,g[I],I,g)+"",(N=lt.get(Vt))?(o[I]=N,N.__data__=g[I],lt.delete(Vt)):l[I]=new tt(t,g[I]);for(I=0;I<st;++I)(N=e[I])&&lt.get(Rt[I])===N&&(u[I]=N)}function Bt(t){return t.__data__}function kt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function $t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}tt.prototype={constructor:tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var vt="http://www.w3.org/1999/xhtml";const ft={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),ft.hasOwnProperty(e)?{space:ft[e],local:t}:t}function Dt(t){return function(){this.removeAttribute(t)}}function jt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mt(t,e){return function(){this.setAttribute(t,e)}}function bt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Yt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function d(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function R(t){return function(){this.style.removeProperty(t)}}function ot(t,e,l){return function(){this.style.setProperty(t,e,l)}}function X(t,e,l){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,l)}}function L(t,e){return t.style.getPropertyValue(e)||d(t).getComputedStyle(t,null).getPropertyValue(e)}function S(t){return function(){delete this[t]}}function G(t,e){return function(){this[t]=e}}function at(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function Pt(t){return t.trim().split(/^|\s+/)}function It(t){return t.classList||new Jt(t)}function Jt(t){this._node=t,this._names=Pt(t.getAttribute("class")||"")}function Kt(t,e){for(var l=It(t),o=-1,u=e.length;++o<u;)l.add(e[o])}function Xt(t,e){for(var l=It(t),o=-1,u=e.length;++o<u;)l.remove(e[o])}function Qt(t){return function(){Kt(this,t)}}function ne(t){return function(){Xt(this,t)}}function re(t,e){return function(){(e.apply(this,arguments)?Kt:Xt)(this,t)}}function pe(){this.textContent=""}function $e(t){return function(){this.textContent=t}}function qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ni(){this.innerHTML=""}function ri(t){return function(){this.innerHTML=t}}function vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===vt&&e.documentElement.namespaceURI===vt?e.createElement(t):e.createElementNS(l,t)}}function ti(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Ot(t);return(e.local?ti:oi)(e)}function _t(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function B(t){return function(){var e=this.__on;if(e){for(var g,l=0,o=-1,u=e.length;l<u;++l)g=e[l],t.type&&g.type!==t.type||g.name!==t.name?e[++o]=g:this.removeEventListener(g.type,g.listener,g.options);++o?e.length=o:delete this.__on}}}function b(t,e,l){return function(){var u,o=this.__on,g=function p(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var m=0,I=o.length;m<I;++m)if((u=o[m]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=g,u.options=l),void(u.value=e);this.addEventListener(t.type,g,l),u={type:t.type,name:t.name,value:e,listener:g,options:l},o?o.push(u):this.__on=[u]}}function z(t,e,l){var o=d(t),u=o.CustomEvent;"function"==typeof u?u=new u(e,l):(u=o.document.createEvent("Event"),l?(u.initEvent(e,l.bubbles,l.cancelable),u.detail=l.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function H(t,e){return function(){return z(this,t,e)}}function q(t,e){return function(){return z(this,t,e.apply(this,arguments))}}Jt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var se=[null];function fe(t,e){this._groups=t,this._parents=e}function ge(){return new fe([[document.documentElement]],se)}fe.prototype=ge.prototype={constructor:fe,select:function dt(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,lt,g=e[u],m=g.length,I=o[u]=new Array(m),st=0;st<m;++st)(N=g[st])&&(lt=t.call(N,N.__data__,st,g))&&("__data__"in N&&(lt.__data__=N.__data__),I[st]=lt);return new fe(o,this._parents)},selectAll:function E(t){t="function"==typeof t?function T(t){return function(){return function M(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):c(t);for(var e=this._groups,l=e.length,o=[],u=[],g=0;g<l;++g)for(var N,m=e[g],I=m.length,lt=0;lt<I;++lt)(N=m[lt])&&(o.push(t.call(N,N.__data__,lt,m)),u.push(N));return new fe(o,u)},selectChild:function D(t){return this.select(null==t?nt:function _(t){return function(){return O.call(this.children,t)}}("function"==typeof t?t:y(t)))},selectChildren:function it(t){return this.selectAll(null==t?ut:function U(t){return function(){return J.call(this.children,t)}}("function"==typeof t?t:y(t)))},filter:function gt(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,g=e[u],m=g.length,I=o[u]=[],lt=0;lt<m;++lt)(N=g[lt])&&t.call(N,N.__data__,lt,g)&&I.push(N);return new fe(o,this._parents)},data:function Ht(t,e){if(!arguments.length)return Array.from(this,Bt);var l=e?Ut:Wt,o=this._parents,u=this._groups;"function"!=typeof t&&(t=function P(t){return function(){return t}}(t));for(var g=u.length,m=new Array(g),I=new Array(g),N=new Array(g),lt=0;lt<g;++lt){var st=o[lt],Nt=u[lt],Rt=Nt.length,Vt=kt(t.call(st,st&&st.__data__,lt,o)),me=Vt.length,xe=I[lt]=new Array(me),Ct=m[lt]=new Array(me);l(st,Nt,xe,Ct,N[lt]=new Array(Rt),Vt,e);for(var de,ve,ee=0,Zt=0;ee<me;++ee)if(de=xe[ee]){for(ee>=Zt&&(Zt=ee+1);!(ve=Ct[Zt])&&++Zt<me;);de._next=ve||null}}return(m=new fe(m,o))._enter=I,m._exit=N,m},enter:function ct(){return new fe(this._enter||this._groups.map(wt),this._parents)},exit:function Gt(){return new fe(this._exit||this._groups.map(wt),this._parents)},join:function ht(t,e,l){var o=this.enter(),u=this,g=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(u=e(u))&&(u=u.selection()),null==l?g.remove():l(g),o&&u?o.merge(u).order():u},merge:function rt(t){for(var e=t.selection?t.selection():t,l=this._groups,o=e._groups,u=l.length,m=Math.min(u,o.length),I=new Array(u),N=0;N<m;++N)for(var Vt,lt=l[N],st=o[N],Nt=lt.length,Rt=I[N]=new Array(Nt),me=0;me<Nt;++me)(Vt=lt[me]||st[me])&&(Rt[me]=Vt);for(;N<u;++N)I[N]=l[N];return new fe(I,this._parents)},selection:function we(){return this},order:function xt(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var m,o=t[e],u=o.length-1,g=o[u];--u>=0;)(m=o[u])&&(g&&4^m.compareDocumentPosition(g)&&g.parentNode.insertBefore(m,g),g=m);return this},sort:function Et(t){function e(Nt,Rt){return Nt&&Rt?t(Nt.__data__,Rt.__data__):!Nt-!Rt}t||(t=$t);for(var l=this._groups,o=l.length,u=new Array(o),g=0;g<o;++g){for(var lt,m=l[g],I=m.length,N=u[g]=new Array(I),st=0;st<I;++st)(lt=m[st])&&(N[st]=lt);N.sort(e)}return new fe(u,this._parents).order()},call:function yt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function oe(){return Array.from(this)},node:function K(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var o=t[e],u=0,g=o.length;u<g;++u){var m=o[u];if(m)return m}return null},size:function j(){let t=0;for(const e of this)++t;return t},empty:function h(){return!this.node()},each:function Q(t){for(var e=this._groups,l=0,o=e.length;l<o;++l)for(var I,u=e[l],g=0,m=u.length;g<m;++g)(I=u[g])&&t.call(I,I.__data__,g,u);return this},attr:function C(t,e){var l=Ot(t);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((null==e?l.local?jt:Dt:"function"==typeof e?l.local?Yt:Mt:l.local?bt:mt)(l,e))},style:function V(t,e,l){return arguments.length>1?this.each((null==e?R:"function"==typeof e?X:ot)(t,e,null==l?"":l)):L(this.node(),t)},property:function Tt(t,e){return arguments.length>1?this.each((null==e?S:"function"==typeof e?at:G)(t,e)):this.node()[t]},classed:function le(t,e){var l=Pt(t+"");if(arguments.length<2){for(var o=It(this.node()),u=-1,g=l.length;++u<g;)if(!o.contains(l[u]))return!1;return!0}return this.each(("function"==typeof e?re:e?Qt:ne)(l,e))},text:function Ke(t){return arguments.length?this.each(null==t?pe:("function"==typeof t?qe:$e)(t)):this.node().textContent},html:function Me(t){return arguments.length?this.each(null==t?ni:("function"==typeof t?vi:ri)(t)):this.node().innerHTML},raise:function We(){return this.each(li)},lower:function ai(){return this.each(Je)},append:function si(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function k(t,e){var l="function"==typeof t?t:Ve(t),o=null==e?_t:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function s(t){return this.select(t?a:r)},datum:function v(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function A(t,e,l){var u,m,o=function w(t){return t.trim().split(/^|\s+/).map(function(e){var l="",o=e.indexOf(".");return o>=0&&(l=e.slice(o+1),e=e.slice(0,o)),{type:e,name:l}})}(t+""),g=o.length;if(!(arguments.length<2)){for(I=e?b:B,u=0;u<g;++u)this.each(I(o[u],e,l));return this}var I=this.node().__on;if(I)for(var st,N=0,lt=I.length;N<lt;++N)for(u=0,st=I[N];u<g;++u)if((m=o[u]).type===st.type&&m.name===st.name)return st.value},dispatch:function Z(t,e){return this.each(("function"==typeof e?q:H)(t,e))},[Symbol.iterator]:function*Lt(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var m,o=t[e],u=0,g=o.length;u<g;++u)(m=o[u])&&(yield m)}};const ye=ge;var Ee={value:()=>{}};function vn(){for(var o,t=0,e=arguments.length,l={};t<e;++t){if(!(o=arguments[t]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new Pi(l)}function Pi(t){this._=t}function ar(t,e){for(var u,l=0,o=t.length;l<o;++l)if((u=t[l]).name===e)return u.value}function gn(t,e,l){for(var o=0,u=t.length;o<u;++o)if(t[o].name===e){t[o]=Ee,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=l&&t.push({name:e,value:l}),t}Pi.prototype=vn.prototype={constructor:Pi,on:function(t,e){var u,l=this._,o=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var o="",u=l.indexOf(".");if(u>=0&&(o=l.slice(u+1),l=l.slice(0,u)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}(t+"",l),g=-1,m=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++g<m;)if(u=(t=o[g]).type)l[u]=gn(l[u],t.name,e);else if(null==e)for(u in l)l[u]=gn(l[u],t.name,null);return this}for(;++g<m;)if((u=(t=o[g]).type)&&(u=ar(l[u],t.name)))return u},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Pi(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var u,g,l=new Array(u),o=0;o<u;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,u=(g=this._[t]).length;o<u;++o)g[o].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],u=0,g=o.length;u<g;++u)o[u].value.apply(e,l)}};const or=vn;var Ri,Oi,gi=0,xi=0,Ei=0,yn=1e3,Li=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return di||(pn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,l){var o=new ji;return o.restart(t,e,l),o}function _n(){di=(Li=Si.now())+Di,gi=xi=0;try{!function dr(){Xi(),++gi;for(var e,t=Ri;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}()}finally{gi=0,function hr(){for(var t,l,e=Ri,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ri=l);Oi=t,Yi(o)}(),di=0}}function ur(){var t=Si.now(),e=t-Li;e>yn&&(Di-=e,Li=t)}function Yi(t){gi||(xi&&(xi=clearTimeout(xi)),t-di>24?(t<1/0&&(xi=setTimeout(_n,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Li=Si.now(),Ei=setInterval(ur,yn)),gi=1,pn(_n)))}function wn(t,e,l){var o=new ji;return o.restart(u=>{o.stop(),t(u+e)},e=null==e?0:+e,l),o}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Xi():+l)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ri=this,Oi=this),this._call=t,this._time=l,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Bi=3;function Ki(t,e,l,o,u,g){var m=t.__transition;if(m){if(l in m)return}else t.__transition={};!function vr(t,e,l){var u,o=t.__transition;function m(lt){var st,Nt,Rt,Vt;if(1!==l.state)return N();for(st in o)if((Vt=o[st]).name===l.name){if(Vt.state===Bi)return wn(m);4===Vt.state?(Vt.state=6,Vt.timer.stop(),Vt.on.call("interrupt",t,t.__data__,Vt.index,Vt.group),delete o[st]):+st<e&&(Vt.state=6,Vt.timer.stop(),Vt.on.call("cancel",t,t.__data__,Vt.index,Vt.group),delete o[st])}if(wn(function(){l.state===Bi&&(l.state=4,l.timer.restart(I,l.delay,l.time),I(lt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=Bi,u=new Array(Rt=l.tween.length),st=0,Nt=-1;st<Rt;++st)(Vt=l.tween[st].value.call(t,t.__data__,l.index,l.group))&&(u[++Nt]=Vt);u.length=Nt+1}}function I(lt){for(var st=lt<l.duration?l.ease.call(null,lt/l.duration):(l.timer.restart(N),l.state=5,1),Nt=-1,Rt=u.length;++Nt<Rt;)u[Nt].call(t,st);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),N())}function N(){for(var lt in l.state=6,l.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=l,l.timer=mn(function g(lt){l.state=1,l.timer.restart(m,l.delay,l.time),l.delay<=lt&&m(lt-l.delay)},0,l.time)}(t,l,{name:e,index:o,group:u,on:cr,tween:fr,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:bn})}function tn(t,e){var l=Ue(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function Qe(t,e){var l=Ue(t,e);if(l.state>Bi)throw new Error("too late; already running");return l}function Ue(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ei(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Wi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,o,u,g){var m,I,N;return(m=Math.sqrt(t*t+e*e))&&(t/=m,e/=m),(N=t*l+e*o)&&(l-=t*N,o-=e*N),(I=Math.sqrt(l*l+o*o))&&(l/=I,o/=I,N/=I),t*o<e*l&&(t=-t,e=-e,N=-N,m=-m),{translateX:u,translateY:g,rotate:Math.atan2(e,t)*On,skewX:Math.atan(N)*On,scaleX:m,scaleY:I}}function kn(t,e,l,o){function u(lt){return lt.length?lt.pop()+" ":""}return function(lt,st){var Nt=[],Rt=[];return lt=t(lt),st=t(st),function g(lt,st,Nt,Rt,Vt,me){if(lt!==Nt||st!==Rt){var xe=Vt.push("translate(",null,e,null,l);me.push({i:xe-4,x:ei(lt,Nt)},{i:xe-2,x:ei(st,Rt)})}else(Nt||Rt)&&Vt.push("translate("+Nt+e+Rt+l)}(lt.translateX,lt.translateY,st.translateX,st.translateY,Nt,Rt),function m(lt,st,Nt,Rt){lt!==st?(lt-st>180?st+=360:st-lt>180&&(lt+=360),Rt.push({i:Nt.push(u(Nt)+"rotate(",null,o)-2,x:ei(lt,st)})):st&&Nt.push(u(Nt)+"rotate("+st+o)}(lt.rotate,st.rotate,Nt,Rt),function I(lt,st,Nt,Rt){lt!==st?Rt.push({i:Nt.push(u(Nt)+"skewX(",null,o)-2,x:ei(lt,st)}):st&&Nt.push(u(Nt)+"skewX("+st+o)}(lt.skewX,st.skewX,Nt,Rt),function N(lt,st,Nt,Rt,Vt,me){if(lt!==Nt||st!==Rt){var xe=Vt.push(u(Vt)+"scale(",null,",",null,")");me.push({i:xe-4,x:ei(lt,Nt)},{i:xe-2,x:ei(st,Rt)})}else(1!==Nt||1!==Rt)&&Vt.push(u(Vt)+"scale("+Nt+","+Rt+")")}(lt.scaleX,lt.scaleY,st.scaleX,st.scaleY,Nt,Rt),lt=st=null,function(Vt){for(var Ct,me=-1,xe=Rt.length;++me<xe;)Nt[(Ct=Rt[me]).i]=Ct.x(Vt);return Nt.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function br(t,e){var l,o;return function(){var u=Qe(this,t),g=u.tween;if(g!==l)for(var m=0,I=(o=l=g).length;m<I;++m)if(o[m].name===e){(o=o.slice()).splice(m,1);break}u.tween=o}}function xr(t,e,l){var o,u;if("function"!=typeof l)throw new Error;return function(){var g=Qe(this,t),m=g.tween;if(m!==o){u=(o=m).slice();for(var I={name:e,value:l},N=0,lt=u.length;N<lt;++N)if(u[N].name===e){u[N]=I;break}N===lt&&u.push(I)}g.tween=u}}function nn(t,e,l){var o=t._id;return t.each(function(){var u=Qe(this,o);(u.value||(u.value={}))[e]=l.apply(this,arguments)}),function(u){return Ue(u,o).value[e]}}function rn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Mn(t,e){var l=Object.create(t.prototype);for(var o in e)l[o]=e[o];return l}function ki(){}var Ui=1/.7,yi="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),kr=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Mr=new RegExp(`^rgba\\(${yi},${yi},${yi},${Ti}\\)$`),Tr=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Ti}\\)$`),Cr=new RegExp(`^hsl\\(${Ti},${Fe},${Fe}\\)$`),Ar=new RegExp(`^hsla\\(${Ti},${Fe},${Fe},${Ti}\\)$`),Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?In(e):3===l?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Le(e[1],e[2],e[3],1):(e=kr.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Tr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Tn.hasOwnProperty(t)?In(Tn[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function In(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,o){return o<=0&&(t=e=l=NaN),new Le(t,e,l,o)}function Qi(t,e,l,o){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}(t):new Le(t,e,l,null==o?1:o)}function Le(t,e,l,o){this.r=+t,this.g=+e,this.b=+l,this.opacity=+o}function Nn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Fi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Fi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Rn(t,e,l,o){return o<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,l,o)}function Ln(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Ge;if(t instanceof Ge)return t;var e=(t=t.rgb()).r/255,l=t.g/255,o=t.b/255,u=Math.min(e,l,o),g=Math.max(e,l,o),m=NaN,I=g-u,N=(g+u)/2;return I?(m=e===g?(l-o)/I+6*(l<o):l===g?(o-e)/I+2:(e-l)/I+4,I/=N<.5?g+u:2-g-u,m*=60):I=N>0&&N<1?0:m,new Ge(m,I,N,t.opacity)}function Ge(t,e,l,o){this.h=+t,this.s=+e,this.l=+l,this.opacity=+o}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,o,u){var g=t*t,m=g*t;return((1-3*t+3*g-m)*e+(4-6*g+3*m)*l+(1+3*t+3*g-3*m)*o+m*u)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Nr(){return Ln(this).formatHsl()},formatRgb:An,toString:An}),rn(Le,Qi,Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(ui(this.r),ui(this.g),ui(this.b),Fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:function Rr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Ge,function Lr(t,e,l,o){return 1===arguments.length?Ln(t):new Ge(t,e,l,null==o?1:o)},Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,o=l+(l<.5?l:1-l)*e,u=2*l-o;return new Le(ln(t>=240?t-240:t+120,u,o),ln(t,u,o),ln(t<120?t+240:t-120,u,o),this.opacity)},clamp(){return new Ge(Dn(this.h),Hi(this.s),Hi(this.l),Fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const Bn=t=>()=>t;function Kn(t,e){var l=e-t;return l?function zn(t,e){return function(l){return t+l*e}}(t,l):Bn(isNaN(t)?e:t)}const Wn=function t(e){var l=function zr(t){return 1==(t=+t)?Kn:function(e,l){return l-e?function Br(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(o){return Math.pow(t+o*e,l)}}(e,l,t):Bn(isNaN(e)?l:e)}}(e);function o(u,g){var m=l((u=Qi(u)).r,(g=Qi(g)).r),I=l(u.g,g.g),N=l(u.b,g.b),lt=Kn(u.opacity,g.opacity);return function(st){return u.r=m(st),u.g=I(st),u.b=N(st),u.opacity=lt(st),u+""}}return o.gamma=t,o}(1);function Un(t){return function(e){var m,I,l=e.length,o=new Array(l),u=new Array(l),g=new Array(l);for(m=0;m<l;++m)I=Qi(e[m]),o[m]=I.r||0,u[m]=I.g||0,g[m]=I.b||0;return o=t(o),u=t(u),g=t(g),I.opacity=1,function(N){return I.r=o(N),I.g=u(N),I.b=g(N),I+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var o=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),u=t[o],g=t[o+1];return jn((l-o/e)*e,o>0?t[o-1]:2*u-g,u,g,o<e-1?t[o+2]:2*g-u)}}),Un(function jr(t){var e=t.length;return function(l){var o=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-o/e)*e,t[(o+e-1)%e],t[o%e],t[(o+1)%e],t[(o+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var o,u,g,l=an.lastIndex=on.lastIndex=0,m=-1,I=[],N=[];for(t+="",e+="";(o=an.exec(t))&&(u=on.exec(e));)(g=u.index)>l&&(g=e.slice(l,g),I[m]?I[m]+=g:I[++m]=g),(o=o[0])===(u=u[0])?I[m]?I[m]+=u:I[++m]=u:(I[++m]=null,N.push({i:m,x:ei(o,u)})),l=on.lastIndex;return l<e.length&&(g=e.slice(l),I[m]?I[m]+=g:I[++m]=g),I.length<2?N[0]?function Wr(t){return function(e){return t(e)+""}}(N[0].x):function Kr(t){return function(){return t}}(e):(e=N.length,function(lt){for(var Nt,st=0;st<e;++st)I[(Nt=N[st]).i]=Nt.x(lt);return I.join("")})}function Gn(t,e){var l;return("number"==typeof e?ei:e instanceof Ci?Wn:(l=Ci(e))?(e=l,Wn):Ur)(t,e)}function Gr(t){return function(){this.removeAttribute(t)}}function Qr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fr(t,e,l){var o,g,u=l+"";return function(){var m=this.getAttribute(t);return m===u?null:m===o?g:g=e(o=m,l)}}function Hr(t,e,l){var o,g,u=l+"";return function(){var m=this.getAttributeNS(t.space,t.local);return m===u?null:m===o?g:g=e(o=m,l)}}function Jr(t,e,l){var o,u,g;return function(){var m,N,I=l(this);return null==I?void this.removeAttribute(t):(m=this.getAttribute(t))===(N=I+"")?null:m===o&&N===u?g:(u=N,g=e(o=m,I))}}function Vr(t,e,l){var o,u,g;return function(){var m,N,I=l(this);return null==I?void this.removeAttributeNS(t.space,t.local):(m=this.getAttributeNS(t.space,t.local))===(N=I+"")?null:m===o&&N===u?g:(u=N,g=e(o=m,I))}}function $r(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Yr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,g)),l}return u._value=e,u}function qr(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Xr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,g)),l}return u._value=e,u}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){Qe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){Qe(this,t).duration=e}}var wl=ye.prototype.constructor;function Qn(t){return function(){this.style.removeProperty(t)}}var Bl=0;function Ze(t,e,l,o){this._groups=t,this._parents=e,this._name=l,this._id=o}function Fn(){return++Bl}var Xe=ye.prototype;Ze.prototype=function zl(t){return ye().transition(t)}.prototype={constructor:Ze,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=x(t));for(var o=this._groups,u=o.length,g=new Array(u),m=0;m<u;++m)for(var st,Nt,I=o[m],N=I.length,lt=g[m]=new Array(N),Rt=0;Rt<N;++Rt)(st=I[Rt])&&(Nt=t.call(st,st.__data__,Rt,I))&&("__data__"in st&&(Nt.__data__=st.__data__),lt[Rt]=Nt,Ki(lt[Rt],e,l,Rt,lt,Ue(st,l)));return new Ze(g,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=c(t));for(var o=this._groups,u=o.length,g=[],m=[],I=0;I<u;++I)for(var st,N=o[I],lt=N.length,Nt=0;Nt<lt;++Nt)if(st=N[Nt]){for(var Vt,Rt=t.call(st,st.__data__,Nt,N),me=Ue(st,l),xe=0,Ct=Rt.length;xe<Ct;++xe)(Vt=Rt[xe])&&Ki(Vt,e,l,xe,Rt,me);g.push(Rt),m.push(st)}return new Ze(g,m,e,l)},selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,g=e[u],m=g.length,I=o[u]=[],lt=0;lt<m;++lt)(N=g[lt])&&t.call(N,N.__data__,lt,g)&&I.push(N);return new Ze(o,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,o=e.length,g=Math.min(o,l.length),m=new Array(o),I=0;I<g;++I)for(var Rt,N=e[I],lt=l[I],st=N.length,Nt=m[I]=new Array(st),Vt=0;Vt<st;++Vt)(Rt=N[Vt]||lt[Vt])&&(Nt[Vt]=Rt);for(;I<o;++I)m[I]=e[I];return new Ze(m,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Fn(),o=this._groups,u=o.length,g=0;g<u;++g)for(var N,m=o[g],I=m.length,lt=0;lt<I;++lt)if(N=m[lt]){var st=Ue(N,e);Ki(N,t,l,lt,m,{time:st.time+st.delay+st.duration,delay:0,duration:st.duration,ease:st.ease})}return new Ze(o,this._parents,t,l)},call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:function gl(t,e){var l=this._id;return arguments.length<2?Ue(this.node(),l).on.on(t):this.each(function vl(t,e,l){var o,u,g=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?tn:Qe;return function(){var m=g(this,t),I=m.on;I!==o&&(u=(o=I).copy()).on(e,l),m.on=u}}(l,t,e))},attr:function Zr(t,e){var l=Ot(t),o="transform"===l?wr:Gn;return this.attrTween(t,"function"==typeof e?(l.local?Vr:Jr)(l,o,nn(this,"attr."+t,e)):null==e?(l.local?Qr:Gr)(l):(l.local?Hr:Fr)(l,o,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var o=Ot(t);return this.tween(l,(o.local?$r:qr)(o,e))},style:function kl(t,e,l){var o="transform"==(t+="")?_r:Gn;return null==e?this.styleTween(t,function xl(t,e){var l,o,u;return function(){var g=L(this,t),m=(this.style.removeProperty(t),L(this,t));return g===m?null:g===l&&m===o?u:u=e(l=g,o=m)}}(t,o)).on("end.style."+t,Qn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var o,u,g;return function(){var m=L(this,t),I=l(this),N=I+"";return null==I&&(this.style.removeProperty(t),N=I=L(this,t)),m===N?null:m===o&&N===u?g:(u=N,g=e(o=m,I))}}(t,o,nn(this,"style."+t,e))).each(function Sl(t,e){var l,o,u,I,g="style."+e,m="end."+g;return function(){var N=Qe(this,t),lt=N.on,st=null==N.value[g]?I||(I=Qn(e)):void 0;(lt!==l||u!==st)&&(o=(l=lt).copy()).on(m,u=st),N.on=o}}(this._id,t)):this.styleTween(t,function El(t,e,l){var o,g,u=l+"";return function(){var m=L(this,t);return m===u?null:m===o?g:g=e(o=m,l)}}(t,o,e),l).on("end.style."+t,null)},styleTween:function Cl(t,e,l){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function Tl(t,e,l){var o,u;function g(){var m=e.apply(this,arguments);return m!==u&&(o=(u=m)&&function Ml(t,e,l){return function(o){this.style.setProperty(t,e.call(this,o),l)}}(t,m,l)),o}return g._value=e,g}(t,e,null==l?"":l))},text:function Nl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,l;function o(){var u=t.apply(this,arguments);return u!==l&&(e=(l=u)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(u)),e}return o._value=t,o}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var m,o=Ue(this.node(),l).tween,u=0,g=o.length;u<g;++u)if((m=o[u]).name===t)return m.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ue(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ue(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){Qe(this,t).ease=e}}(e,t)):Ue(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;Qe(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,o=l._id,u=l.size();return new Promise(function(g,m){var I={value:m},N={value:function(){0==--u&&g()}};l.each(function(){var lt=Qe(this,o),st=lt.on;st!==t&&((e=(t=st).copy())._.cancel.push(I),e._.interrupt.push(I),e._.end.push(N)),lt.on=e}),0===u&&g()})},[Symbol.iterator]:Xe[Symbol.iterator]};var Wl={time:null,delay:0,duration:250,ease:function Kl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}ye.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var o,u,m,l=t.__transition,g=!0;if(l){for(m in e=null==e?null:e+"",l)(o=l[m]).name===e?(u=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(u?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete l[m]):g=!1;g&&delete t.__transition}}(this,t)})},ye.prototype.transition=function Gl(t){var e,l;t instanceof Ze?(e=t._id,t=t._name):(e=Fn(),(l=Wl).time=Xi(),t=null==t?null:t+"");for(var o=this._groups,u=o.length,g=0;g<u;++g)for(var N,m=o[g],I=m.length,lt=0;lt<I;++lt)(N=m[lt])&&Ki(N,t,e,lt,m,l||Ul(N,e));return new Ze(o,this._parents,t,e)};Math;function Ai(t){return{type:t}}function _i(t){return function(){return t}}function Yn(t){this._context=t}function $l(t){return new Yn(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,fn=2*cn,ci=1e-6,ql=fn-ci;function $n(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const l=10**e;return function(o){this._+=o[0];for(let u=1,g=o.length;u<g;++u)this._+=Math.round(arguments[u]*l)/l+o[u]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,o,u){this._append`Q${+e},${+l},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(e,l,o,u,g,m){this._append`C${+e},${+l},${+o},${+u},${this._x1=+g},${this._y1=+m}`}arcTo(e,l,o,u,g){if(e=+e,l=+l,o=+o,u=+u,(g=+g)<0)throw new Error(`negative radius: ${g}`);let m=this._x1,I=this._y1,N=o-e,lt=u-l,st=m-e,Nt=I-l,Rt=st*st+Nt*Nt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Rt>ci)if(Math.abs(Nt*N-lt*st)>ci&&g){let Vt=o-m,me=u-I,xe=N*N+lt*lt,Ct=Vt*Vt+me*me,St=Math.sqrt(xe),ee=Math.sqrt(Rt),Zt=g*Math.tan((cn-Math.acos((xe+Rt-Ct)/(2*St*ee)))/2),de=Zt/ee,ve=Zt/St;Math.abs(de-1)>ci&&this._append`L${e+de*st},${l+de*Nt}`,this._append`A${g},${g},0,0,${+(Nt*Vt>st*me)},${this._x1=e+ve*N},${this._y1=l+ve*lt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,o,u,g,m){if(e=+e,l=+l,m=!!m,(o=+o)<0)throw new Error(`negative radius: ${o}`);let I=o*Math.cos(u),N=o*Math.sin(u),lt=e+I,st=l+N,Nt=1^m,Rt=m?u-g:g-u;null===this._x1?this._append`M${lt},${st}`:(Math.abs(this._x1-lt)>ci||Math.abs(this._y1-st)>ci)&&this._append`L${lt},${st}`,o&&(Rt<0&&(Rt=Rt%fn+fn),Rt>ql?this._append`A${o},${o},0,1,${Nt},${e-I},${l-N}A${o},${o},0,1,${Nt},${this._x1=lt},${this._y1=st}`:Rt>ci&&this._append`A${o},${o},0,${+(Rt>=cn)},${Nt},${this._x1=e+o*Math.cos(g)},${this._y1=l+o*Math.sin(g)}`)}rect(e,l,o,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=_i(!0),o=null,u=$l,g=null,m=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const o=Math.floor(l);if(!(o>=0))throw new RangeError(`invalid digits: ${l}`);e=o}return t},()=>new Zi(e)}(I);function I(N){var lt,Nt,Vt,st=(N=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(N)).length,Rt=!1;for(null==o&&(g=u(Vt=m())),lt=0;lt<=st;++lt)!(lt<st&&l(Nt=N[lt],lt,N))===Rt&&((Rt=!Rt)?g.lineStart():g.lineEnd()),Rt&&g.point(+t(Nt,lt,N),+e(Nt,lt,N));if(Vt)return g=null,Vt+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),I.x=function(N){return arguments.length?(t="function"==typeof N?N:_i(+N),I):t},I.y=function(N){return arguments.length?(e="function"==typeof N?N:_i(+N),I):e},I.defined=function(N){return arguments.length?(l="function"==typeof N?N:_i(!!N),I):l},I.curve=function(N){return arguments.length?(u=N,null!=o&&(g=u(o)),I):u},I.context=function(N){return arguments.length?(null==N?o=g=null:g=u(o=N),I):o},I}function qn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);