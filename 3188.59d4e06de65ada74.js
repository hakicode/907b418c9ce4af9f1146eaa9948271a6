(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3188],{1062:(G,N,p)=>{"use strict";p.d(N,{Z:()=>e,m:()=>c});var g=p(5861),w=p(2014);const A=new w.K({name:"_localDataDB",driverOrder:[w.N.IndexedDB,w.N.LocalStorage]}),k="ui-config",e=function(){var P=(0,g.Z)(function*(u){yield A.create();try{var O=(yield A.get(k))||{};"function"==typeof u.callback&&u.callback(O)}catch(h){"function"==typeof u.callback&&u.callback(null),console.error(h)}});return function(O){return P.apply(this,arguments)}}(),c=function(){var P=(0,g.Z)(function*(u){yield A.create(),u.params=u.params||{};try{var O=(yield A.get(k))||{};Object.assign(O,u.params),yield A.set(k,O),"function"==typeof u.callback&&u.callback(O)}catch(h){"function"==typeof u.callback&&u.callback(null),console.error(h)}});return function(O){return P.apply(this,arguments)}}()},8247:(G,N,p)=>{"use strict";p.d(N,{D:()=>w});var g=p(4459);function w(A){A.params=A.params||{},(0,g.cd)({url:"api/Lookup/get",params:{lookup_key:A.params.lookup_key||null},success:k=>{"function"==typeof A.callback&&A.callback(null==k?void 0:k.data)},error:k=>{"function"==typeof A.callback&&A.callback(null),console.error(A,k)},loading:A.loading})}},6240:(G,N,p)=>{"use strict";p.d(N,{Bm:()=>w,YM:()=>A,iS:()=>e,o5:()=>k});var g=p(4459);function w(c){var P,u,O,h,d,v,t,C,M,n,D;c.params=c.params||{},c.params.page=c.params.page||1,c.params.limit=c.params.limit||1,(0,g.cd)({url:"api/Media/Search",params:{getby:null!==(P=c.params.userid)&&void 0!==P?P:null,global:null!==(u=c.params.global)&&void 0!==u?u:null,media_id:null!==(O=c.params.media_id)&&void 0!==O?O:null,media_title:null!==(h=c.params.media_title)&&void 0!==h?h:null,v_mediatype:null!==(d=c.params.v_mediatype)&&void 0!==d?d:null,v_mediatypes:null!==(v=c.params.v_mediatypes)&&void 0!==v?v:null,topic_id:null!==(t=c.params.topic_id)&&void 0!==t?t:null,category_id:null!==(C=c.params.category_id)&&void 0!==C?C:null,tags:null!==(M=c.params.tags)&&void 0!==M?M:null,sortfield:null!==(n=c.params.sortfield)&&void 0!==n?n:null,sorttype:null!==(D=c.params.sorttype)&&void 0!==D?D:null,posstart:(c.params.page-1)*c.params.limit,numofrow:c.params.limit},success:Z=>{var U;"function"==typeof c.callback&&c.callback(null!==(U=Z.data)&&void 0!==U?U:null)},error:Z=>{"function"==typeof c.callback&&c.callback(),console.error(Z)},loading:c.loading})}function A(c){var P,u;c.params=c.params||{},(0,g.cd)({url:"api/Media/Detail",params:{getby:null!==(P=c.params.userid)&&void 0!==P?P:null,media_id:null!==(u=c.params.media_id)&&void 0!==u?u:null},success:O=>{var h;"function"==typeof c.callback&&c.callback(null!==(h=O.data)&&void 0!==h?h:null)},error:O=>{"function"==typeof c.callback&&c.callback(),console.error(O)},loading:c.loading})}function k(c){var P,u,O,h,d,v,t,C,M,n,D,Z,U,B,R,z,Q;c.params=c.params||{},(0,g.T1)({url:"api/Media/AddUpdate",params:{media_id:null!==(P=c.params.media_id)&&void 0!==P?P:null,media_title:null!==(u=c.params.media_title)&&void 0!==u?u:null,media_description:null!==(O=c.params.media_description)&&void 0!==O?O:null,media_content:null!==(h=c.params.media_content)&&void 0!==h?h:null,filepath:null!==(d=c.params.filepath)&&void 0!==d?d:null,filepath_extract:null!==(v=c.params.filepath_extract)&&void 0!==v?v:null,link_file:null!==(t=c.params.link_file)&&void 0!==t?t:null,link_share:null!==(C=c.params.link_share)&&void 0!==C?C:null,cover:null!==(M=c.params.cover)&&void 0!==M?M:null,v_mediatype:null!==(n=c.params.v_mediatype)&&void 0!==n?n:null,v_osstype:null!==(D=c.params.v_osstype)&&void 0!==D?D:null,v_sharingmode:null!==(Z=c.params.v_sharingmode)&&void 0!==Z?Z:null,topic_id:null!==(U=c.params.topic_id)&&void 0!==U?U:null,category_id:null!==(B=c.params.category_id)&&void 0!==B?B:null,tags:null!==(R=c.params.tags)&&void 0!==R?R:null,createdby:null!==(z=c.params.userid)&&void 0!==z?z:null,modifiedby:null!==(Q=c.params.userid)&&void 0!==Q?Q:null},success:L=>{var K;"function"==typeof c.callback&&c.callback(null!==(K=L.data)&&void 0!==K?K:null)},error:L=>{"function"==typeof c.callback&&c.callback(),console.error(L)},loading:c.loading})}function e(c){var P,u,O;c.params=c.params||{},(0,g.tD)({url:"api/Media/Delete",params:{deletedby:null!==(P=c.params.userid)&&void 0!==P?P:null,media_id:null!==(u=c.params.media_id)&&void 0!==u?u:null,createdby:null!==(O=c.params.userid)&&void 0!==O?O:null},success:h=>{var d;"function"==typeof c.callback&&c.callback(null!==(d=h.data)&&void 0!==d?d:null)},error:h=>{"function"==typeof c.callback&&c.callback(),console.error(h)},loading:c.loading})}},3938:(G,N,p)=>{"use strict";p.d(N,{GX:()=>w,IX:()=>k,hh:()=>A});var g=p(4459);function w(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,g.cd)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}function A(e){e.params=e.params||{},(0,g.T1)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}function k(e){e.params=e.params||{},(0,g.tD)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}},1529:(G,N,p)=>{"use strict";p.d(N,{G4:()=>e,NP:()=>u,r7:()=>k,u4:()=>c,zS:()=>P});var g=p(4459),w=p(3589),A=p(1862);function k(d){d.params=d.params||{},(0,g.OL)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/download-image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{url:d.params.url||null},success:v=>{var t;"function"==typeof d.callback&&(null!=v&&null!==(t=v.data)&&void 0!==t&&t.StatusCode?d.callback():d.callback(URL.createObjectURL(null==v?void 0:v.data)))},error:v=>{"function"==typeof d.callback&&d.callback(),console.error(v)},loading:d.loading})}function e(d){var v,t,C;d.params=d.params||{};let M=null!==(v=d.callback)&&void 0!==v?v:Z=>{console.log(Z)},n=null===(t=d.params.url)||void 0===t?void 0:t.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""),D=(null==n||null===(C=n.split("/"))||void 0===C||null===(C=C.pop())||void 0===C?void 0:C.toLocaleLowerCase())||"image.png";k({params:{url:n},callback:Z=>{Z?(0,A.d4)(Z,D,"image/x-png",U=>{U?(0,w.z)({params:{file:U,subFolder:"material/aitool",fileType:"image"},callback:B=>{0==(null==B?void 0:B.ReturnCode)?M(B):M()}}):M()}):M()},loading:d.loading})}function c(d){if(d.params=d.params||{},"2.0"==d.params.version)return function O(d){if(d.params=d.params||{},d.params.size){let v=d.params.size.split("x");d.params.width=parseInt(v[0]),d.params.height=parseInt(v[1])}(0,g.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{prompt:d.params.prompt||"Superheroes flying in the sky with chibi style",width:d.params.width||512,height:d.params.height||512,steps:20},success:v=>{"function"==typeof d.callback&&d.callback(v.data||null)},error:v=>{"function"==typeof d.callback&&d.callback(),console.error(v)},loading:d.loading})}(d);(0,g.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{Prompt:d.params.prompt||"Superheroes flying in the sky with chibi style",Size:d.params.size||"256x256"},success:v=>{"function"==typeof d.callback&&d.callback(v.data||null)},error:v=>{"function"==typeof d.callback&&d.callback(),console.error(v)},loading:d.loading})}function P(d){if(d.params=d.params||{},"2.0"==d.params.version)return function h(d){d.params=d.params||{};const v=new FormData;if(v.append("prompt",d.params.prompt||null),v.append("file",d.params.file||null),d.params.size){let t=d.params.size.split("x");v.append("width",t[0]||512),v.append("height",t[1]||512)}(0,g.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:v,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}(d);const v=new FormData;v.append("file",d.params.file||null),v.append("size",d.params.size||"256x256"),(0,g.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:v,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}function u(d){d.params=d.params||{};const v=new FormData;v.append("prompt",d.params.prompt||null),v.append("sourceText",d.params.sourceText||null),v.append("temperature","1.0"),(0,g.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/get-gpt-action",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:v,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}},865:(G,N,p)=>{"use strict";p.d(N,{s:()=>Y});var g=p(5861),w=p(8107),A=p.n(w),k=p(6676),e=p.n(k),c=p(4459),P=p(6240),u=p(1529),O=p(3377),h=p(1862),d=p(8186),v=p(422),t=p(9468),C=p(3536),M=p(6814),n=p(95);function D(f,a){if(1&f&&t.GkF(0,19),2&f){t.oxw();const i=t.MAs(32);t.Q6J("ngTemplateOutlet",i)}}function Z(f,a){if(1&f&&t.GkF(0,19),2&f){t.oxw();const i=t.MAs(34);t.Q6J("ngTemplateOutlet",i)}}function U(f,a){1&f&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",21),t.qZA())}function B(f,a){if(1&f){const i=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.download())}),t._UZ(2,"ion-icon",26),t.qZA()()}}function R(f,a){if(1&f&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",22),t.YNc(2,B,3,0,"div",23),t.qZA()),2&f){const i=t.oxw();let l;t.xp6(1),t.Tol(null!=i.response&&i.response.Data?"img-response":"img-default"),t.Q6J("src",null!==(l=null==i.response?null:i.response.Data)&&void 0!==l?l:"assets/image/no-image.svg"),t.xp6(1),t.Q6J("ngIf",null==i.response?null:i.response.Data)}}function z(f,a){if(1&f&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&f){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function Q(f,a){if(1&f&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&f){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function L(f,a){if(1&f){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.submitText2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function K(f,a){1&f&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function j(f,a){if(1&f){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1ee3i \xfd "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32)(9,"div",33)(10,"textarea",34),t.NdJ("change",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changePrompt(r))}),t.qZA()()()()(),t.TgZ(11,"div",29)(12,"div",35)(13,"div",36)(14,"label",37),t._uU(15,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(16,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changeSize(r))}),t.YNc(17,z,2,2,"option",39),t.qZA()()(),t.TgZ(18,"div",29)(19,"div",35)(20,"div",36)(21,"label",37),t._uU(22,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(23,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changeVersion(r))}),t.YNc(24,Q,2,2,"option",39),t.qZA()()()(),t.TgZ(25,"div")(26,"div",40),t.YNc(27,L,5,0,"div",41),t.YNc(28,K,2,0,"div",41),t.qZA()()()}if(2&f){const i=t.oxw();let l;t.xp6(10),t.Q6J("ngModel",null!==(l=i.dataForm.prompt)&&void 0!==l?l:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}function V(f,a){if(1&f&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&f){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function S(f,a){if(1&f&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&f){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function H(f,a){if(1&f){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.submitImage2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function q(f,a){1&f&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function I(f,a){if(1&f){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",46)(8,"div",47)(9,"div",32)(10,"div",33),t._UZ(11,"img",3),t.TgZ(12,"div",48)(13,"div",49)(14,"div")(15,"div",50),t._UZ(16,"ion-icon",51),t.qZA(),t.TgZ(17,"div",52)(18,"i"),t._uU(19,"C\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"),t.qZA()()()()()()()()()(),t.TgZ(20,"div",53)(21,"div",35)(22,"div",36)(23,"label",37),t._uU(24,"\u1ea2nh g\u1ed1c"),t.TgZ(25,"span",30),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"div",54)(28,"input",55),t.NdJ("change",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changeFile(r))}),t.qZA(),t.TgZ(29,"label",56),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",29)(32,"label"),t._uU(33,"G\u1ee3i \xfd"),t.qZA(),t.TgZ(34,"div",31)(35,"textarea",57),t.NdJ("change",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changePrompt(r))}),t.qZA()()(),t.TgZ(36,"div",29)(37,"div",35)(38,"div",36)(39,"label",37),t._uU(40,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(41,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changeSize(r))}),t.YNc(42,V,2,2,"option",39),t.qZA()()(),t.TgZ(43,"div",29)(44,"div",35)(45,"div",36)(46,"label",37),t._uU(47,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(48,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const E=t.oxw();return t.KtG(E.changeVersion(r))}),t.YNc(49,S,2,2,"option",39),t.qZA()()()(),t.TgZ(50,"div")(51,"div",40),t.YNc(52,H,5,0,"div",41),t.YNc(53,q,2,0,"div",41),t.qZA()()()}if(2&f){const i=t.oxw();let l,r;t.xp6(11),t.Q6J("src",null!==(l=i.dataForm.fileUrlViewer)&&void 0!==l?l:"",t.LSH),t.xp6(19),t.Oqu(null==i.dataForm.file?null:i.dataForm.file.name),t.xp6(5),t.Q6J("ngModel",null!==(r=i.dataForm.prompt)&&void 0!==r?r:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}let Y=(()=>{var f;class a{constructor(l,r,E){this.modalController=l,this.toastController=r,this.loadingController=E,this.versions=["1.0","2.0"],this.sizes=["256x256","512x512","1024x1024","1024x1792","1792x1024"],this.dataForm={version:"2.0",size:"512x512"},this.response={},this.appsettings={}}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,g.Z)(function*(){l.appsettings=yield(0,c.H0)(),l.appsettings.madonvi&&(l.user=yield(0,O.iA)())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeIsFile(l){this.dataForm.isloading||(this.isFile=l)}download(){var l=this;return(0,g.Z)(function*(){var r,E;null!==(r=l.response)&&void 0!==r&&r.Data&&(0,u.r7)({params:{url:null===(E=l.response)||void 0===E?void 0:E.Data},callback:F=>{if(F){var x;let s=(null===(x=l.response)||void 0===x||null===(x=x.Data)||void 0===x||null===(x=x.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""))||void 0===x||null===(x=x.split("/"))||void 0===x||null===(x=x.pop())||void 0===x?void 0:x.toLocaleLowerCase())||"image.png";(0,h.d4)(F,s,"image/x-png",b=>{b?A()(b,s,"image/x-png"):(0,d.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(_=>{_.present()})})}else(0,d.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(s=>{s.present()})}})})()}save(){var l=this;return(0,g.Z)(function*(){var r,E;if(l.dataForm.isloading)return(0,d.B)(l.toastController,{message:"H\xe3y \u0111\u1ee3i h\u1ec7 th\u1ed1ng ho\xe0n t\u1ea5t qu\xe1 tr\xecnh t\u1ea1o d\u1eef li\u1ec7u!"}).then(x=>{x.present()});if(null===(r=l.response)||void 0===r||!r.Data)return(0,d.B)(l.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u kh\u1edfi t\u1ea1o!"}).then(x=>{x.present()});const F=yield l.loadingController.create({message:"\u0110ang t\u1ea3i..."});(0,u.G4)({loading:x=>{x?F.present():F.dismiss()},params:{url:null===(E=l.response)||void 0===E?void 0:E.Data},callback:x=>{if(x){var s,b,_;let o={};return o.filepath=x.path+"/"+(null===(s=x.file)||void 0===s?void 0:s.name),o.link_file=l.appsettings.readfileuploadurl+x.path+"/"+(null===(b=x.file)||void 0===b?void 0:b.name),o.media_title=`AI-${e()(new Date).format("YYYYMMDDHHmm(SSS)")}`,o.media_description=l.dataForm.size,o.media_content=l.isFile?void 0:l.dataForm.prompt,o.v_mediatype=v.t.IMAGE,void(0,P.o5)({loading:m=>{m?F.present():F.dismiss()},params:Object.assign(o,{userid:null===(_=l.user)||void 0===_?void 0:_.userid}),callback:m=>{(0,d.B)(l.toastController,{},m).then(T=>{T.present()}),0==(null==m?void 0:m.returncode)&&l.modalController.dismiss(null==m?void 0:m.id,"confirm")}})}(0,d.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i l\xean t\u1eadp tin!"}).then(o=>{o.present()})}})})()}changeSize(l){this.dataForm.size=l}changeVersion(l){this.dataForm.version=l}changePrompt(l){var r;this.dataForm.prompt=null==l||null===(r=l.target)||void 0===r||null===(r=r.value)||void 0===r?void 0:r.trim().replace(/\s+/g," ")}changeFile(l){this.dataForm.file=void 0,l.target.files.length&&(this.dataForm.file=l.target.files[0]),this.dataForm.fileUrlViewer=this.dataForm.file?URL.createObjectURL(this.dataForm.file):void 0}submitText2Image(){var l=this;return(0,g.Z)(function*(){if(!l.dataForm.prompt)return(0,d.B)(l.toastController,{message:"H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(r=>{r.present()});(0,u.u4)({loading:r=>{l.dataForm.isloading=r},params:l.dataForm,callback:r=>{l.response=r}})})()}submitImage2Image(){var l=this;return(0,g.Z)(function*(){if(!l.dataForm.file)return(0,d.B)(l.toastController,{message:"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(r=>{r.present()});(0,u.zS)({loading:r=>{l.dataForm.isloading=r},params:l.dataForm,callback:r=>{l.response=r}})})()}}return(f=a).\u0275fac=function(l){return new(l||f)(t.Y36(C.IN),t.Y36(C.yF),t.Y36(C.HT))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-modal-ai-image"]],decls:35,vars:9,consts:[["slot","end","mode","ios","color","light","fill","outline",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch","user-select-none"],[1,"col-12","col-lg-5","p-3","pr-lg-0"],[1,"prompt"],[1,"d-flex","h-100","flex-column"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"flex-grow-1","overflow-auto"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col-12","col-lg-7","p-3"],["class","response",4,"ngIf"],["typelink",""],["typefile",""],[3,"ngTemplateOutlet"],[1,"response"],["src","../../../../assets/image/gif/ai-loading.gif",1,"w-100","h-100","no-fit"],[1,"w-100","h-100",3,"src"],["class","download-box",4,"ngIf"],[1,"download-box"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/download.svg"],[1,"d-flex","h-100","flex-column","justify-content-between"],[1,"px-3","mt-2"],[1,"form-group"],[1,"ml-1","text-danger"],[1,"prompt-box"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item"],["placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","text-center"],[4,"ngIf"],[3,"value"],[1,"btn",3,"click"],["src","../../../../assets/icon/16x16/magic.svg"],["name","dots","color","dark",1,"align-middle"],[1,"ondrop-image"],["onclick","document.getElementById('inputFileAiImage').click()",1,"media-box"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-icon"],["src","../../../../assets/image-svg/uploadImage2.svg"],[1,"placeholder-text"],[1,"form-group","hide"],[1,"custom-file"],["type","file","id","inputFileAiImage","multiple","",1,"custom-file-input",3,"change"],["for","inputFileAiImage",1,"custom-file-label"],["rows","3","placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"]],template:function(l,r){1&l&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"T\u1ea1o \u1ea3nh b\u1eb1ng c\xf4ng ngh\u1ec7 AI"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return r.save()}),t.TgZ(5,"ion-label"),t._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return r.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return r.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),t.NdJ("click",function(){return r.changeIsFile(!1)}),t._uU(21,"V\u1ebd \u1ea3nh AI"),t.qZA()(),t.TgZ(22,"li",11)(23,"a",12),t.NdJ("click",function(){return r.changeIsFile(!0)}),t._uU(24,"AI - T\u1ea1o \u1ea3nh t\u01b0\u01a1ng \u0111\u1ed3ng"),t.qZA()()()(),t.TgZ(25,"div",13),t.YNc(26,D,1,1,"ng-container",14),t.YNc(27,Z,1,1,"ng-container",14),t.qZA()()()(),t.TgZ(28,"div",15),t.YNc(29,U,2,0,"div",16),t.YNc(30,R,3,4,"div",16),t.qZA()()(),t.YNc(31,j,29,7,"ng-template",null,17,t.W1O),t.YNc(33,I,54,9,"ng-template",null,18,t.W1O)),2&l&&(t.xp6(9),t.Q6J("src",r.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(11),t.Tol(r.isFile?"":"active"),t.xp6(3),t.Tol(r.isFile?"active":""),t.xp6(3),t.Q6J("ngIf",!r.isFile),t.xp6(1),t.Q6J("ngIf",r.isFile),t.xp6(2),t.Q6J("ngIf",r.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",!r.dataForm.isloading))},dependencies:[M.sg,M.O5,M.tP,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,C.YG,C.Sm,C.W2,C.Gu,C.gu,C.Xz,C.Q$,C.PQ,C.wd,C.sr],styles:['button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.hide[_ngcontent-%COMP%]{display:none!important}.ondrop-image[_ngcontent-%COMP%]{--color: #eee}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]{border-radius:4px;border:1px dashed rgba(51,53,74,.2);background:#FFF}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:60px}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#33333380}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]), .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%]{display:none}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]) + .placeholder[_ngcontent-%COMP%], .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{display:block}.prompt[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;color:#333;box-shadow:0 0 12px #0000001a}.prompt[_ngcontent-%COMP%]   .prompt-box[_ngcontent-%COMP%]{border:1px solid transparent}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{min-width:33%}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;background:transparent;padding-left:0}.prompt[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#eee}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade, #000)}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:160px;height:3rem;padding:0;border-radius:1.5rem;vertical-align:middle;text-align:center;font-size:14px;font-weight:400;text-transform:initial;background:#FF6A61;color:#fff}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:0;color:inherit}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){background-color:#e9e8e9}.response[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;box-shadow:0 0 12px #0000001a;line-height:0}.response[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.response[_ngcontent-%COMP%]   ion-img.no-fit[_ngcontent-%COMP%]{object-fit:none}.response[_ngcontent-%COMP%]   ion-img.img-default[_ngcontent-%COMP%]{object-fit:cover}.response[_ngcontent-%COMP%]   ion-img.img-response[_ngcontent-%COMP%]{object-fit:contain}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:1rem;width:3rem;height:3rem;margin-left:-1.5rem;line-height:0;border-radius:50%;box-shadow:0 4px 4px #00000026}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:inherit}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;font-size:26px}']}),a})()},6115:(G,N,p)=>{"use strict";p.d(N,{b:()=>q});var g=p(5861),w=p(4459),A=p(8247),k=p(6240),e=p(3589),c=p(3377),P=p(1862),u=p(422),O=p(3130),h=p(8186),d=p(9403),v=p(5938),t=p(203),C=p(6034),M=p(4260),n=p(9468),D=p(3536),Z=p(6814),U=p(95);function B(I,Y){if(1&I){const f=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){n.CHM(f);const i=n.oxw();return n.KtG(i.switchModal("ai-image"))}),n._uU(1,"T\u1ea1o b\u1eb1ng AI"),n.qZA()}2&I&&n.Tol("btn-light")}function R(I,Y){if(1&I&&n.GkF(0,34),2&I){n.oxw();const f=n.MAs(74);n.Q6J("ngTemplateOutlet",f)}}function z(I,Y){if(1&I&&n.GkF(0,34),2&I){n.oxw();const f=n.MAs(76);n.Q6J("ngTemplateOutlet",f)}}function Q(I,Y){if(1&I){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.clearTopic(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function L(I,Y){if(1&I){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.clearCategory(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function K(I,Y){if(1&I&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&I){const f=Y.$implicit;n.Q6J("value",f.lookup_value),n.xp6(1),n.Oqu(f.lookup_title)}}function j(I,Y){if(1&I&&(n.ynx(0),n.TgZ(1,"option",41),n._uU(2,"Ch\u1ecdn lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA(),n.YNc(3,K,2,2,"option",42),n.BQk()),2&I){const f=n.oxw(2);n.xp6(3),n.Q6J("ngForOf",f.v_mediatypes)}}function V(I,Y){if(1&I){const f=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"T\u1eadp tin"),n.qZA()(),n.TgZ(5,"div",26)(6,"input",36),n.NdJ("change",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.changeMediaFile(i))}),n.qZA(),n.TgZ(7,"label",37),n._uU(8),n.qZA()()()(),n.TgZ(9,"div",9)(10,"div",15)(11,"div",16)(12,"label",17),n._uU(13,"Lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA()(),n.TgZ(14,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.changeMediaType(i))}),n.YNc(15,j,4,1,"ng-container",39),n.ynx(16),n.TgZ(17,"option",40),n._uU(18,"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn theo lo\u1ea1i t\u1eadp tin"),n.qZA(),n.BQk(),n.qZA()()()}if(2&I){const f=n.oxw();let a,i;n.xp6(8),n.Oqu(f.mediaFiles.length?"\u0110\xe3 ch\u1ecdn "+f.mediaFiles.length+" t\u1eadp tin":(null!==(a=f.media.filepath)&&void 0!==a?a:"").split("/").pop()),n.xp6(6),n.Q6J("ngModel",null!==(i=f.media.v_mediatype)&&void 0!==i?i:0),n.xp6(1),n.Q6J("ngIf",f.mediaFiles.length<=1)}}function S(I,Y){if(1&I&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&I){const f=Y.$implicit;n.Q6J("value",f.lookup_value),n.xp6(1),n.Oqu(f.lookup_title)}}function H(I,Y){if(1&I){const f=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"\u0110\u01b0\u1eddng d\u1eabn"),n.qZA()(),n.TgZ(5,"input",44),n.NdJ("ngModelChange",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.changeLinkShare(i))}),n.qZA()()(),n.TgZ(6,"div",9)(7,"div",15)(8,"div",16)(9,"label",17),n._uU(10,"Lo\u1ea1i li\xean k\u1ebft"),n.qZA()(),n.TgZ(11,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(f);const l=n.oxw();return n.KtG(l.changeOssType(i))}),n.TgZ(12,"option",41),n._uU(13,"Ch\u1ecdn lo\u1ea1i li\xean k\u1ebft"),n.qZA(),n.YNc(14,S,2,2,"option",42),n.qZA()()()}if(2&I){const f=n.oxw();let a;n.xp6(5),n.Q6J("ngModel",f.media.link_share),n.xp6(6),n.Q6J("ngModel",null!==(a=f.media.v_osstype)&&void 0!==a?a:0),n.xp6(3),n.Q6J("ngForOf",f.v_osstypes)}}let q=(()=>{var I;class Y{constructor(a,i,l,r){this.modalController=a,this.toastController=i,this.loadingController=l,this.popoverController=r,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[],this.membership={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,g.Z)(function*(){a.appsettings=yield(0,w.H0)(),a.appsettings.madonvi&&(a.user=yield(0,c.iA)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,A.D)({params:{lookup_key:"v_mediatype"},callback:i=>{this.v_mediatypes=i||[]}}),(0,A.D)({params:{lookup_key:"v_osstype"},callback:i=>{this.v_osstypes=i||[]}}),(0,t.ef)({params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,v_functionlimit:C.z.GenAITaoHinhAnh},callback:i=>{var l;this.membership.GenAITaoHinhAnh=(0,M.f)(null==i||null===(l=i.contents)||void 0===l?void 0:l.find(r=>r.v_functionlimit==C.z.GenAITaoHinhAnh))}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(a){return this.modalController.dismiss({modalName:a},"switch")}save(){var a=this;return(0,g.Z)(function*(){let i=[];if(a.mediaCover&&i.push(new Promise((r,E)=>{(0,e.z)({params:{file:a.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:F=>{var x;0==(null==F?void 0:F.ReturnCode)&&(a.media.cover=F.path+"/"+(null===(x=F.file)||void 0===x?void 0:x.name)),r(!0)}})})),a.isLink){if(a.media.v_mediatype=u.t.LINK,!a.media.link_share)return void(0,h.B)(a.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(r=>{r.present()})}else if(!a.media.link_file){if(a.mediaFiles.length>=2){const r=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});return r.present(),void a.recursiveUpload(E=>{E||r.dismiss()})}if(1!=a.mediaFiles.length)return void(0,h.B)(a.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(r=>{r.present()});i.push(new Promise((r,E)=>{let F=a.mediaFiles.pop();(0,e.z)({params:{file:F,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:x=>{var s,b;0==(null==x?void 0:x.ReturnCode)&&(a.media.filepath=x.path+"/"+(null===(s=x.file)||void 0===s?void 0:s.name),a.media.link_file=a.readfileuploadurl+x.path+"/"+(null===(b=x.file)||void 0===b?void 0:b.name),a.media.media_title||(a.media.media_title=x.name.replace(/.[a-zA-Z0-9]+$/,"")),a.media.v_mediatype||a.v_mediatypes.every(_=>{var o,m;return null===(o=_.lookup_note)||void 0===o||null===(o=o.replace(/\s+/g,""))||void 0===o||!o.split(",").includes(null===(m=x.file)||void 0===m?void 0:m.extension)||(a.media.v_mediatype=_.lookup_value,!1)})),r(!0)}})}))}const l=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});l.present(),Promise.all(i).then(r=>{var E;(0,k.o5)({params:Object.assign({},a.media,{userid:null===(E=a.user)||void 0===E?void 0:E.userid}),callback:F=>{(0,h.B)(a.toastController,{},F).then(x=>{x.present()}),0==(null==F?void 0:F.returncode)&&a.modalController.dismiss(null==F?void 0:F.id,"confirm")},loading:F=>{F||l.dismiss()}})})})()}recursiveUpload(a){if(this.mediaFiles.length){let i={topic_id:this.media.topic_id,category_id:this.media.category_id},l=this.mediaFiles.pop();(0,e.z)({params:{file:l,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:r=>{var E,F,x;0==(null==r?void 0:r.ReturnCode)?(i.filepath=r.path+"/"+(null===(E=r.file)||void 0===E?void 0:E.name),i.link_file=this.readfileuploadurl+r.path+"/"+(null===(F=r.file)||void 0===F?void 0:F.name),i.media_title=r.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(s=>{var b,_;return null===(b=s.lookup_note)||void 0===b||null===(b=b.replace(/\s+/g,""))||void 0===b||!b.split(",").includes(null===(_=r.file)||void 0===_?void 0:_.extension)||(i.v_mediatype=s.lookup_value,!1)}),(0,k.o5)({params:Object.assign(i,{userid:null===(x=this.user)||void 0===x?void 0:x.userid}),callback:s=>{this.recursiveUpload(a)}})):this.recursiveUpload(a)}})}else a(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(a){var i=this;return(0,g.Z)(function*(){const l=yield i.popoverController.create({component:v.a,componentProps:{selectedId:i.media.topic_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var E,F;"confirm"==r.role&&Object.assign(i.media,{topic_id:null===(E=r.data)||void 0===E?void 0:E.topic_id,topic_title:null===(F=r.data)||void 0===F?void 0:F.topic_title})}),l.present()})()}clearTopic(a){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(a){var i;this.media.topic_id=null!==(i=parseInt(a))&&void 0!==i?i:0}presentPopoverCategory(a){var i=this;return(0,g.Z)(function*(){const l=yield i.popoverController.create({component:d.l,componentProps:{selectedId:i.media.category_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var E,F;"confirm"==r.role&&Object.assign(i.media,{category_id:null===(E=r.data)||void 0===E?void 0:E.category_id,category_title:null===(F=r.data)||void 0===F?void 0:F.category_title})}),l.present()})()}clearCategory(a){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(a){var i;this.media.category_id=null!==(i=parseInt(a))&&void 0!==i?i:0}changeMediaTitle(a){var i;this.media.media_title=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaDescription(a){var i;this.media.media_description=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaContent(a){var i;this.media.media_content=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaType(a){this.media.v_mediatype=a?parseInt(a):0}changeOssType(a){this.media.v_osstype=a?parseInt(a):0}changeLinkShare(a){this.media.link_share=a,(0,P.II)(a)?this.media.v_osstype=O.e.YOUTUBE:(0,P.VJ)(a)&&(this.media.v_osstype=O.e.PHET)}changeMediaFile(a){this.mediaFiles.length=0;for(let l=0,r=null===(i=a.target)||void 0===i?void 0:i.files.length;l<r;l++){var i;this.mediaFiles.push(a.target.files[l])}if(1==this.mediaFiles.length){let{fileName:l,fileExtension:r}=(0,P.yB)(this.mediaFiles[0].name);this.media.media_title=l,this.media.v_mediatype=void 0,this.v_mediatypes.every(E=>{var F;return null===(F=E.lookup_note)||void 0===F||null===(F=F.replace(/\s+/g,""))||void 0===F||!F.split(",").includes(r)||(this.media.v_mediatype=E.lookup_value,!1)}),!this.mediaCover&&this.media.v_mediatype==u.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaFiles[0]))}}changeMediaCover(a){var i;if(this.mediaCover=void 0,a.target.files.length&&(this.mediaCover=a.target.files[0]),!this.mediaCover)return;let E,{fileExtension:r}=(0,P.yB)(null===(i=this.mediaCover)||void 0===i?void 0:i.name);r&&(this.v_mediatypes.every(F=>{var x;return null===(x=F.lookup_note)||void 0===x||null===(x=x.replace(/\s+/g,""))||void 0===x||!x.split(",").includes(r)||(E=F.lookup_value,!1)}),this.mediaCover&&E==u.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(a){this.isLink=a}}return(I=Y).\u0275fac=function(a){return new(a||I)(n.Y36(D.IN),n.Y36(D.yF),n.Y36(D.HT),n.Y36(D.Dh))},I.\u0275cmp=n.Xpm({type:I,selectors:[["app-modal-media-add"]],inputs:{filter:"filter"},decls:77,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"class","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","6",1,"form-control",3,"ngModel","change"],[1,"col-auto"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"w-100","h-100",3,"src"],["typefile",""],["typelink",""],[3,"ngTemplateOutlet"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModel","ngModelChange"]],template:function(a,i){if(1&a&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Th\xeam h\u1ecdc li\u1ec7u"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return i.save()}),n.TgZ(5,"ion-label"),n._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return i.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return i.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"button",11),n.NdJ("click",function(){return i.changeIsLink(!1)}),n._uU(19,"T\u1eadp tin"),n.qZA(),n.TgZ(20,"button",11),n.NdJ("click",function(){return i.changeIsLink(!0)}),n._uU(21,"Li\xean k\u1ebft"),n.qZA(),n.YNc(22,B,2,2,"button",12),n.qZA()(),n.YNc(23,R,1,1,"ng-container",13),n.YNc(24,z,1,1,"ng-container",13),n.qZA()(),n.TgZ(25,"div",7)(26,"div",14)(27,"div",9)(28,"div",15)(29,"div",16)(30,"label",17),n._uU(31,"C\u1ea5p l\u1edbp"),n.qZA()(),n._UZ(32,"input",18),n.TgZ(33,"div",19),n.YNc(34,Q,2,0,"button",20),n.TgZ(35,"button",21),n.NdJ("click",function(r){return i.presentPopoverTopic(r)}),n._UZ(36,"ion-icon",22),n.qZA()()()(),n.TgZ(37,"div",9)(38,"div",15)(39,"div",16)(40,"label",17),n._uU(41,"M\xf4n h\u1ecdc"),n.qZA()(),n._UZ(42,"input",18),n.TgZ(43,"div",19),n.YNc(44,L,2,0,"button",20),n.TgZ(45,"button",21),n.NdJ("click",function(r){return i.presentPopoverCategory(r)}),n._UZ(46,"ion-icon",22),n.qZA()()()(),n.TgZ(47,"div",9)(48,"div",15)(49,"div",16)(50,"label",17),n._uU(51,"T\xean h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(52,"input",23),n.NdJ("change",function(r){return i.changeMediaTitle(r)}),n.qZA()()(),n.TgZ(53,"div",9)(54,"div",15)(55,"div",16)(56,"label",17),n._uU(57,"M\xf4 t\u1ea3"),n.qZA()(),n.TgZ(58,"textarea",24),n.NdJ("change",function(r){return i.changeMediaDescription(r)}),n.qZA()()()(),n.TgZ(59,"div",25)(60,"div",9)(61,"div",15)(62,"div",16)(63,"label",17),n._uU(64,"\u1ea2nh b\xeca"),n.qZA()(),n.TgZ(65,"div",26)(66,"input",27),n.NdJ("change",function(r){return i.changeMediaCover(r)}),n.qZA(),n.TgZ(67,"label",28),n._uU(68),n.qZA()()()(),n.TgZ(69,"div",9)(70,"div",29)(71,"div",30),n._UZ(72,"ion-img",31),n.qZA()()()()()()(),n.YNc(73,V,19,3,"ng-template",null,32,n.W1O),n.YNc(75,H,15,3,"ng-template",null,33,n.W1O)),2&a){let l,r;n.xp6(9),n.Q6J("src",i.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(9),n.Tol(i.isLink?"btn-light":"btn-primary"),n.xp6(2),n.Tol(i.isLink?"btn-primary":"btn-light"),n.xp6(2),n.Q6J("ngIf",null==i.membership?null:i.membership.GenAITaoHinhAnh),n.xp6(1),n.Q6J("ngIf",!i.isLink),n.xp6(1),n.Q6J("ngIf",i.isLink),n.xp6(8),n.Q6J("value",null!==(l=i.media.topic_title)&&void 0!==l?l:""),n.xp6(2),n.Q6J("ngIf",i.media.topic_id),n.xp6(8),n.Q6J("value",null!==(r=i.media.category_title)&&void 0!==r?r:""),n.xp6(2),n.Q6J("ngIf",i.media.category_id),n.xp6(8),n.Q6J("ngModel",i.media.media_title),n.xp6(6),n.Q6J("ngModel",i.media.media_description),n.xp6(10),n.Oqu(null==i.mediaCover?null:i.mediaCover.name),n.xp6(4),n.Q6J("src",i.fileurl||"assets/image-png/media-default.jpg")}},dependencies:[Z.sg,Z.O5,Z.tP,U.YN,U.Kr,U.Fj,U.EJ,U.JJ,U.On,D.YG,D.Sm,D.W2,D.Gu,D.gu,D.Xz,D.Q$,D.wd,D.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),Y})()},5630:(G,N,p)=>{"use strict";p.d(N,{M:()=>x});var g=p(1461),w=p(8247),A=p(3938),k=p(4041),e=p(9468),c=p(3536),P=p(6814);function u(s,b){if(1&s&&e.GkF(0,23),2&s){e.oxw();const _=e.MAs(23);e.Q6J("ngTemplateOutlet",_)}}function O(s,b){if(1&s&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Lo\u1ea1i t\u1eadp tin"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(25);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function h(s,b){if(1&s&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Th\u1ebb"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(27);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function d(s,b){if(1&s&&(e.TgZ(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"C\u1ea5p l\u1edbp"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(29);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function v(s,b){if(1&s&&(e.TgZ(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"M\xf4n h\u1ecdc"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(33);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function t(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",37),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.clearFilterTopic(m))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.topic_title)&&void 0!==o?o:"C\u1ea5p l\u1edbp")}}function C(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",40),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.clearFilterCategory(m))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.category_title)&&void 0!==o?o:"M\xf4n h\u1ecdc")}}function M(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",41),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.clearFilterTags(m))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.tags_key)&&void 0!==o?o:"Th\u1ebb")}}function n(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.clearFilterMediaType(m,T.filter.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function D(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){const y=e.CHM(_).$implicit,J=e.oxw(2);return e.KtG(J.clearFilterMediaType(m,y.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=b.$implicit;let o;e.xp6(4),e.Oqu(null!==(o=_.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function Z(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",43),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.clearSearch(m))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);e.xp6(4),e.Oqu(_.filter.search)}}const U=function(){return[]};function B(s,b){if(1&s&&(e.TgZ(0,"div",30)(1,"div",31)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,t,7,1,"div",33),e.YNc(6,C,7,1,"div",33),e.YNc(7,M,7,1,"div",33),e.YNc(8,n,7,1,"div",33),e.YNc(9,D,7,1,"div",34),e.YNc(10,Z,7,1,"div",33),e.qZA()(),e._UZ(11,"hr")),2&s){const _=e.oxw();let o;e.xp6(3),e.hij("B\u1ed9 l\u1ecdc \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng (",_.counter(),")"),e.xp6(2),e.Q6J("ngIf",_.filter.topic_id),e.xp6(1),e.Q6J("ngIf",_.filter.category_id),e.xp6(1),e.Q6J("ngIf",_.filter.tags_id),e.xp6(1),e.Q6J("ngIf",_.filter.v_mediatype),e.xp6(1),e.Q6J("ngForOf",null!==(o=_.filter.v_mediatypes)&&void 0!==o?o:e.DdM(7,U)),e.xp6(1),e.Q6J("ngIf",_.filter.search)}}function R(s,b){if(1&s){const _=e.EpF();e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-checkbox",47),e.NdJ("ionChange",function(m){e.CHM(_);const T=e.oxw(2);return e.KtG(T.changeMediaType(m))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.BQk()}if(2&s){const _=b.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("value",_.lookup_value)("checked",o.checkedMediaType(_.lookup_value)),e.xp6(2),e.Oqu(_.lookup_title)}}function z(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.NdJ("ionChange",function(m){e.CHM(_);const T=e.oxw();return e.KtG(T.changeMediaType(m))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"T\u1ea5t c\u1ea3"),e.qZA()(),e.YNc(5,R,5,3,"ng-container",46),e.qZA()}if(2&s){const _=e.oxw();e.xp6(2),e.Q6J("value",0),e.xp6(3),e.Q6J("ngForOf",_.v_mediatypes)}}function Q(s,b){if(1&s){const _=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){const T=e.CHM(_).$implicit,y=e.oxw(2);return e.KtG(y.applyFilterTags({tags_id:T.tags_id,tags_key:T.tags_key}))}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const _=b.$implicit,o=e.oxw(2);e.xp6(1),e.Tol(_.tags_id==o.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.uIk("data-id",_.tags_id),e.xp6(1),e.Oqu(_.tags_key)}}function L(s,b){if(1&s&&(e.TgZ(0,"div",48),e.YNc(1,Q,3,4,"ng-container",46),e.qZA()),2&s){const _=e.oxw();e.xp6(1),e.Q6J("ngForOf",_.filterTags(_.tagss))}}const K=function(s){return{$implicit:s}};function j(s,b){if(1&s&&e.GkF(0,52),2&s){const _=b.$implicit;e.oxw(2);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,K,_))}}function V(s,b){if(1&s&&(e.TgZ(0,"div",50)(1,"ion-list",44)(2,"ul"),e.YNc(3,j,1,4,"ng-container",51),e.qZA()()()),2&s){const _=e.oxw();e.xp6(3),e.Q6J("ngForOf",_.filterTopic(_.topics))}}function S(s,b){1&s&&e._UZ(0,"ion-icon",59)}function H(s,b){1&s&&e._UZ(0,"ion-icon",60)}function q(s,b){if(1&s&&e.GkF(0,52),2&s){const _=b.$implicit;e.oxw(3);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,K,_))}}function I(s,b){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,q,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const _=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterTopic(o.topics,_.topic_id))}}function Y(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const T=e.CHM(_).$implicit,y=e.oxw();return e.KtG(y.applyFilterTopic({topic_id:T.topic_id,topic_title:T.topic_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(m){const y=e.CHM(_).$implicit,J=e.oxw();return e.KtG(J.expandTopic(m,y.topic_id,y.isexpanded))}),e.YNc(3,S,1,0,"ion-icon",55),e.YNc(4,H,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,I,3,1,"ng-container",58),e.qZA()}if(2&s){const _=b.$implicit,o=e.oxw();e.xp6(1),e.Tol(_.topic_id==o.filter.topic_id?"actived":""),e.xp6(1),e.uIk("style",_.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!_.isexpanded),e.xp6(1),e.Q6J("ngIf",_.isexpanded),e.xp6(1),e.Q6J("title",_.topic_title),e.xp6(1),e.Oqu(_.topic_title),e.xp6(1),e.Q6J("ngIf",_.isexpanded)}}function f(s,b){if(1&s&&e.GkF(0,52),2&s){const _=b.$implicit;e.oxw(2);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,K,_))}}function a(s,b){if(1&s&&(e.TgZ(0,"div",61)(1,"ion-list",44)(2,"ul"),e.YNc(3,f,1,4,"ng-container",51),e.qZA()()()),2&s){const _=e.oxw();e.xp6(3),e.Q6J("ngForOf",_.filterCategory(_.categorys))}}function i(s,b){1&s&&e._UZ(0,"ion-icon",59)}function l(s,b){1&s&&e._UZ(0,"ion-icon",60)}function r(s,b){if(1&s&&e.GkF(0,52),2&s){const _=b.$implicit;e.oxw(3);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,K,_))}}function E(s,b){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,r,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const _=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterCategory(o.categorys,_.category_id))}}function F(s,b){if(1&s){const _=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const T=e.CHM(_).$implicit,y=e.oxw();return e.KtG(y.applyFilterCategory({category_id:T.category_id,category_title:T.category_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(m){const y=e.CHM(_).$implicit,J=e.oxw();return e.KtG(J.expandCategory(m,y.category_id,y.isexpanded))}),e.YNc(3,i,1,0,"ion-icon",55),e.YNc(4,l,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,E,3,1,"ng-container",58),e.qZA()}if(2&s){const _=b.$implicit,o=e.oxw();e.xp6(1),e.Tol(_.category_id==o.filter.category_id?"actived":""),e.xp6(1),e.uIk("style",_.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!_.isexpanded),e.xp6(1),e.Q6J("ngIf",_.isexpanded),e.xp6(1),e.Q6J("title",_.category_title),e.xp6(1),e.Oqu(_.category_title),e.xp6(1),e.Q6J("ngIf",_.isexpanded)}}let x=(()=>{var s;class b{constructor(o){this.modalController=o,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var o;null!==(o=this.filter.v_mediatypes)&&void 0!==o&&o.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,w.D)({params:{lookup_key:"v_mediatype"},callback:m=>{this.v_mediatypes=m||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let o=0;return this.filter.search&&(o+=1),this.filter.topic_id&&(o+=1),this.filter.category_id&&(o+=1),this.filter.tags_id&&(o+=1),this.filter.v_mediatypes&&(o+=this.filter.v_mediatypes.length),o}changeMediaType(o){let{value:m,checked:T}=o.detail;if(0==m)return void(this.filter.v_mediatypes=T?this.v_mediatypes.map(W=>({v_mediatype:W.lookup_value,v_mediatype_title:W.lookup_title})):[]);let y=this.v_mediatypes.find(W=>W.lookup_value==m);var J;T?this.filter.v_mediatypes?this.filter.v_mediatypes.find(W=>W.v_mediatype==m)||this.filter.v_mediatypes.push({v_mediatype:null==y?void 0:y.lookup_value,v_mediatype_title:null==y?void 0:y.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==y?void 0:y.lookup_value,v_mediatype_title:null==y?void 0:y.lookup_title}]:this.filter.v_mediatypes=null===(J=this.filter.v_mediatypes)||void 0===J?void 0:J.filter(W=>W.v_mediatype!=m)}checkedMediaType(o){var m;return!(null===(m=this.filter.v_mediatypes)||void 0===m||!m.find(T=>T.v_mediatype==o))}clearSearch(o){Object.assign(this.filter,{search:null})}clearFilterMediaType(o,m){this.changeMediaType({detail:{value:m,checked:!1}})}refreshDataTags(o){this.loadTags(void 0,o,!0)}loadTags(o,m,T){var y;(0,A.GX)({params:{userid:null===(y=this.user)||void 0===y?void 0:y.userid,tags_pid:o,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:J=>{var W,X;this.tagss=T?null!==(W=null==J?void 0:J.tags)&&void 0!==W?W:[]:this.tagss.concat(null!==(X=null==J?void 0:J.tags)&&void 0!==X?X:[]),m&&m()}})}filterTags(o,m){return o.filter(m?T=>T.tags_pid==m:T=>null==T.tags_pid||0==T.tags_pid)}expandTags(o,m,T){o.preventDefault(),o.stopPropagation(),this.tagss.filter(y=>y.tags_id==m).forEach(y=>{y.isexpanded=!T,y.isloadedchild||(y.isloadedchild=!0,this.loadTags(y.tags_id))})}applyFilterTags(o){Object.assign(this.filter,this.filter.tags_id==o.tags_id?{tags_id:null,tags_key:null}:o)}clearFilterTags(o){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(o){this.loadTopic(void 0,o,!0)}loadTopic(o,m,T){var y;(0,k.w)({params:{userid:null===(y=this.user)||void 0===y?void 0:y.userid,topic_pid:o,active:!0,page:1,limit:-1},callback:J=>{this.topics=T?null!=J?J:[]:this.topics.concat(null!=J?J:[]),m&&m()}})}filterTopic(o,m){return o.filter(m?T=>T.topic_pid==m:T=>null==T.topic_pid||0==T.topic_pid)}expandTopic(o,m,T){o.preventDefault(),o.stopPropagation(),this.topics.filter(y=>y.topic_id==m).forEach(y=>{y.isexpanded=!T,y.isloadedchild||(y.isloadedchild=!0,this.loadTopic(y.topic_id))})}applyFilterTopic(o){Object.assign(this.filter,this.filter.topic_id==o.topic_id?{topic_id:null,topic_title:null}:o)}clearFilterTopic(o){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(o){this.loadCategory(void 0,o,!0)}loadCategory(o,m,T){var y;(0,g.b)({params:{userid:null===(y=this.user)||void 0===y?void 0:y.userid,category_pid:o,active:!0,page:1,limit:-1},callback:J=>{this.categorys=T?null!=J?J:[]:this.categorys.concat(null!=J?J:[]),m&&m()}})}filterCategory(o,m){return o.filter(m?T=>T.category_pid==m:T=>null==T.category_pid||0==T.category_pid)}expandCategory(o,m,T){o.preventDefault(),o.stopPropagation(),this.categorys.filter(y=>y.category_id==m).forEach(y=>{y.isexpanded=!T,y.isloadedchild||(y.isloadedchild=!0,this.loadCategory(y.category_id))})}applyFilterCategory(o){Object.assign(this.filter,this.filter.category_id==o.category_id?{category_id:null,category_title:null}:o)}clearFilterCategory(o){Object.assign(this.filter,{category_id:null,category_title:null})}}return(s=b).\u0275fac=function(o){return new(o||s)(e.Y36(c.IN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:36,vars:7,consts:[["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../../assets/icon-svg/arrow-right.svg"],["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../../assets/icon-svg/dashboard/category.svg"],["src","../../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"value","ionChange"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"value","checked","ionChange"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(o,m){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\u1ed9 l\u1ecdc"),e.qZA(),e.TgZ(4,"ion-label",1),e.NdJ("click",function(){return m.clean()}),e._uU(5,"X\xf3a t\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return m.close()}),e._UZ(8,"ion-icon",4),e.qZA()()()(),e._UZ(9,"hr",5),e.TgZ(10,"ion-content",6),e.YNc(11,u,1,1,"ng-container",7),e.TgZ(12,"ion-accordion-group",8),e.YNc(13,O,6,1,"ion-accordion",9),e.YNc(14,h,6,1,"ion-accordion",10),e.YNc(15,d,6,1,"ion-accordion",11),e.YNc(16,v,6,1,"ion-accordion",12),e.qZA()(),e.TgZ(17,"ion-footer")(18,"ion-item",13),e.NdJ("click",function(){return m.apply()}),e.TgZ(19,"ion-label",14),e._uU(20,"\xc1p d\u1ee5ng"),e.qZA(),e._UZ(21,"ion-icon",15),e.qZA()(),e.YNc(22,B,12,8,"ng-template",null,16,e.W1O),e.YNc(24,z,6,2,"ng-template",null,17,e.W1O),e.YNc(26,L,2,1,"ng-template",null,18,e.W1O),e.YNc(28,V,4,1,"ng-template",null,19,e.W1O),e.YNc(30,Y,8,8,"ng-template",null,20,e.W1O),e.YNc(32,a,4,1,"ng-template",null,21,e.W1O),e.YNc(34,F,8,8,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(11),e.Q6J("ngIf",m.filter.topic_id||m.filter.category_id||m.filter.tags_id||m.filter.v_mediatype||(null==m.filter.v_mediatypes?null:m.filter.v_mediatypes.length)||m.filter.search),e.xp6(1),e.Q6J("multiple",!0)("value",m.accordionValue),e.xp6(1),e.Q6J("ngIf",m.v_mediatypes.length),e.xp6(1),e.Q6J("ngIf",m.tagss.length),e.xp6(1),e.Q6J("ngIf",m.topics.length),e.xp6(1),e.Q6J("ngIf",m.categorys.length))},dependencies:[P.sg,P.O5,P.tP,c.We,c.eh,c.YG,c.Sm,c.nz,c.W2,c.fr,c.Gu,c.gu,c.Ie,c.Q$,c.q_,c.wd,c.sr,c.w],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),b})()},8262:(G,N,p)=>{"use strict";p.d(N,{W:()=>A});var g=p(9468),w=p(3536);let A=(()=>{var k;class e{constructor(P){this.popoverController=P}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(k=e).\u0275fac=function(P){return new(P||k)(g.Y36(w.Dh))},k.\u0275cmp=g.Xpm({type:k,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId"},decls:9,vars:0,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(P,u){1&P&&(g.TgZ(0,"div",0)(1,"div",1)(2,"small"),g._uU(3,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),g.qZA()(),g.TgZ(4,"div",2)(5,"button",3),g.NdJ("click",function(){return u.cancel()}),g._uU(6,"\u0110\xf3ng"),g.qZA(),g.TgZ(7,"button",4),g.NdJ("click",function(){return u.confirm()}),g._uU(8,"X\xf3a"),g.qZA()()())},styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),e})()},5511:(G,N,p)=>{"use strict";p.d(N,{R:()=>c,v:()=>e});var g=p(5861),w=p(3377),A=p(2695),k=p(4459);const e=function(){var P=(0,g.Z)(function*(){return yield(0,w.iA)()});return function(){return P.apply(this,arguments)}}(),c=function(){var P=(0,g.Z)(function*(u){let O=null!=u?u:yield(0,k.H0)(),h=yield(0,w.iA)();return(!O.madonvi||!h.userid||O.madonvi!=(null==h?void 0:h.madonvi))&&window.location.replace(A.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),h});return function(O){return P.apply(this,arguments)}}()},3731:(G,N,p)=>{"use strict";p.d(N,{FF:()=>h,T6:()=>v,ZI:()=>d,ds:()=>u,zq:()=>O});var g=p(8107),w=p.n(g),A=p(4981),k=p(8530),e=p(3589),c=p(6623);const P=(t,C)=>{var M=document.createElement("input");M.type="file",M.accept=t.accept,M.style.display="none",M.style.visibility="hidden",M.addEventListener("change",n=>{var D;n.preventDefault();let Z=(null===(D=n.target)||void 0===D?void 0:D.files)||[];Z.length>0&&C(Z),document.body.removeChild(M)}),document.body.appendChild(M),M.click()},u=(t,C,M)=>{let n=null!=C?C:D=>console.log(D);P({accept:".lvb"},D=>{(0,e.z)({loading:M,params:{file:D[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:Z=>{var U,B;0==(null==Z?void 0:Z.ReturnCode)?(U=U=>{var B;t.board_id?(0,k.UK)({loading:M,params:{userid:t.userid,board_id:t.board_id,filepath:Z.path+"/"+(null===(B=Z.file)||void 0===B?void 0:B.name)},callback:R=>{R&&(R.id=t.board_id),n(R)}}):n(U)},t.board_id?U():(0,k.Ux)({loading:M,params:{userid:t.userid,board_title:(null===(B=Z.name)||void 0===B?void 0:B.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:R=>{0==(null==R?void 0:R.returncode)&&(t.board_id=null==R?void 0:R.id),U(R)}})):n({returncode:null==Z?void 0:Z.ReturnCode,returnmsg:null==Z?void 0:Z.ReturnName})}})})},O=(t,C)=>{(0,k.gK)({params:{userid:t.userid,board_id:t.board_id},callback:(M,n)=>{0==(null==M?void 0:M.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==M?void 0:M.token}`),C&&C(M)},loading:M=>{}})},h=(t,C)=>{(0,k.aX)({params:{userid:t.userid,board_id:t.board_id},callback:(M,n)=>{0==(null==M?void 0:M.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==M?void 0:M.token}`),C&&C(M)},loading:M=>{}})},d=(t,C)=>{(0,k.Bh)({params:{userid:t.userid,board_id:t.board_id},callback:(M,n)=>{0==(null==M?void 0:M.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==M?void 0:M.token}`),C&&C(M)},loading:M=>{}})},v=(t,C)=>{let M=null!=C?C:n=>console.log(n);P({accept:".json, application/json"},n=>{var D=new FileReader;D.onload=()=>{if(D.result){let U,Z=JSON.parse(D.result.toString());Z&&!Z.modules?U=(0,c.w)(Z):"icdtV2"==(null==Z?void 0:Z.modules)&&(U=Z),U&&(A.icdt.dataSource=U,A.icdt.data.openSlide())}M()},D.readAsText(n[0])})}},3217:(G,N,p)=>{"use strict";p.d(N,{HB:()=>c,bw:()=>e,c_:()=>k,ei:()=>P});var g=p(422),w=p(3130),A=p(1862);const k=(u,O)=>{e("#body-slide",`#li${u}`,O)},e=(u,O,h)=>{var d,v,t,C,M,n;if(!$(u).length||!$(O).length)return;let D=null!==(d=null===(v=window.document.getElementById(O.replace(/\#/,"")))||void 0===v?void 0:v.offsetTop)&&void 0!==d?d:0,Z=null!==(t=null===(C=window.document.getElementById(O.replace(/\#/,"")))||void 0===C?void 0:C.offsetHeight)&&void 0!==t?t:0,U=null!==(M=null===(n=window.document.getElementById(u.replace(/\#/,"")))||void 0===n?void 0:n.offsetHeight)&&void 0!==M?M:0,B=Math.max(D+Z-U/2,0);h?$(u).animate({scrollTop:B}):$(u).scrollTop(B)},c=u=>{switch(u.v_mediatype){case g.t.IMAGE:return"assets/image/media/image.svg";case g.t.AUDIO:return"assets/image/media/audio.svg";case g.t.VIDEO:return"assets/image/media/video.svg";case g.t.OFFICE:switch(u.extension){case"doc":case"docx":return"assets/image/media/word.svg";case"xls":case"xlsx":return"assets/image/media/excel.svg";case"ppt":case"pptx":return"assets/image/media/powerpoint.svg";default:return"assets/image/media/file.svg"}case g.t.PDF:return"assets/image/media/pdf.svg";case g.t.HTML:return"assets/image/media/html.svg";case g.t.IMAGE_ANIMATION:return"assets/image/media/html-animation-2.svg";case g.t.PHET:return"assets/image/media/phet.svg";case g.t.ZIP:case g.t.TRACK:case g.t.TEXT:return"assets/image/media/file.svg";case g.t.LINK:switch(u.v_osstype){case w.e.YOUTUBE:return"assets/image/media/youtube.svg";case w.e.PHET:return"assets/image/media/phet.svg";default:return"assets/image/media/link.svg"}default:return"assets/image/media/file.svg"}},P=u=>{switch(null==u?void 0:u.type){case g.t.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+u.readfileuploadurl+u.path;case g.t.AUDIO:return"assets/iframe/lib/mk-audio-player/player.html?url="+u.readfileuploadurl+u.path;case g.t.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+u.readfileuploadurl+u.path;case g.t.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+u.readfileuploadurl+u.path;case g.t.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+u.readfileuploadurl+u.path;case g.t.HTML:case g.t.IMAGE_ANIMATION:case g.t.PHET:return""+u.readfileuploadurl+u.path;case g.t.ZIP:var O;return"imsmanifest.xml"==(null===(O=u.pathExtract)||void 0===O||null===(O=O.split("/"))||void 0===O?void 0:O.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+u.readfileuploadurl+u.pathExtract:""+u.readfileuploadurl+u.path;case g.t.TRACK:case g.t.TEXT:return""+u.readfileuploadurl+u.path;case g.t.LINK:switch(u.oss){case w.e.SCORM:return"assets/iframe/lib/ScormPool_Player/player.html?url="+u.url;case w.e.YOUTUBE:var h;return null!==(h=(0,A.eu)(u.url))&&void 0!==h?h:"";case w.e.PHET:var d;return null!==(d=u.url)&&void 0!==d?d:"";default:var v;return null!==(v=u.url)&&void 0!==v?v:""}default:return""+u.readfileuploadurl+u.path}}},4260:(G,N,p)=>{"use strict";p.d(N,{f:()=>w});const w=(A,k)=>{switch(null==A?void 0:A.v_datatype){case 800:if(null!=k&&A.datavalue==k)return!0;break;case 801:if(null!=k&&A.datavalue==k)return!0;if("1"==A.datavalue||"true"==A.datavalue||"TRUE"==A.datavalue||"True"==A.datavalue)return!0;break;case 802:if(null!=k&&A.datavalue==k)return!0;if(1==parseInt(A.datavalue))return!0}return!1}},6034:(G,N,p)=>{"use strict";p.d(N,{z:()=>g});const g={XemTatCaBaiGiangDaDuocPheDuyet:10301,SoLuongBaiGiangToiDaTrongDanhMuc:10302,SoLuongHocLieuToiDaTrongDanhMuc:10303,VungLuuTruDuLieu:10304,GenAITaoNoiDungTuDongBangVanBan:10311,GenAITaoHinhAnh:10312,GenAITaoHinhAnhgioiHanSoLuongMoiNgay:10313,GenAITaoBaiKiemTra:10314,NhapXuatDuLieuBaiGiangLVB:10321,XuatDuLieuBaiGiangVoiDinhDangSCORM:10322,XuatDuLieuDongGoiBaiGiangVoiDinhDangZIP:10323}},422:(G,N,p)=>{"use strict";p.d(N,{t:()=>g});const g={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},3130:(G,N,p)=>{"use strict";p.d(N,{e:()=>g});const g={ONEDRIVE:1e3,GOOGLEDRIVE:1001,YOUTUBE:1002,SCORM:1003,PHET:1005,OTHER:1004}},8107:function(G,N){var p,w;void 0!==(w="function"==typeof(p=function(){return function A(k,e,c){var n,D,P=window,u="application/octet-stream",O=c||u,h=k,d=!e&&!c&&h,v=document.createElement("a"),t=function(L){return String(L)},C=P.Blob||P.MozBlob||P.WebKitBlob||t,M=e||"download";if(C=C.call?C.bind(P):Blob,"true"===String(this)&&(O=(h=[h,O])[0],h=h[1]),d&&d.length<2048&&(M=d.split("/").pop().split("?")[0],v.href=d,-1!==v.href.indexOf(d))){var Z=new XMLHttpRequest;return Z.open("GET",d,!0),Z.responseType="blob",Z.onload=function(L){A(L.target.response,M,u)},setTimeout(function(){Z.send()},0),Z}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h)){if(!(h.length>2096103.424&&C!==t))return navigator.msSaveBlob?navigator.msSaveBlob(z(h),M):Q(h);O=(h=z(h)).type||u}else if(/([\x80-\xff])/.test(h)){for(var U=0,B=new Uint8Array(h.length),R=B.length;U<R;++U)B[U]=h.charCodeAt(U);h=new C([B],{type:O})}function z(L){for(var K=L.split(/[:;,]/),j=K[1],S=("base64"==K[2]?atob:decodeURIComponent)(K.pop()),H=S.length,q=0,I=new Uint8Array(H);q<H;++q)I[q]=S.charCodeAt(q);return new C([I],{type:j})}function Q(L,K){if("download"in v)return v.href=L,v.setAttribute("download",M),v.className="download-js-link",v.innerHTML="downloading...",v.style.display="none",document.body.appendChild(v),setTimeout(function(){v.click(),document.body.removeChild(v),!0===K&&setTimeout(function(){P.URL.revokeObjectURL(v.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(L)&&(L="data:"+L.replace(/^data:([\w\/\-\+]+)/,u)),window.open(L)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=L),!0;var j=document.createElement("iframe");document.body.appendChild(j),!K&&/^data:/.test(L)&&(L="data:"+L.replace(/^data:([\w\/\-\+]+)/,u)),j.src=L,setTimeout(function(){document.body.removeChild(j)},333)}if(n=h instanceof C?h:new C([h],{type:O}),navigator.msSaveBlob)return navigator.msSaveBlob(n,M);if(P.URL)Q(P.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===t)try{return Q("data:"+O+";base64,"+P.btoa(n))}catch{return Q("data:"+O+","+encodeURIComponent(n))}(D=new FileReader).onload=function(L){Q(this.result)},D.readAsDataURL(n)}return!0}})?p.apply(N,[]):p)&&(G.exports=w)}}]);