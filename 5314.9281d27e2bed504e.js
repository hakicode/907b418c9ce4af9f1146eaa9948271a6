(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5314],{8530:(q,$,c)=>{"use strict";c.d($,{Dc:()=>v,Ir:()=>d,JO:()=>x,KO:()=>A,UK:()=>s,Ux:()=>i,Yx:()=>t,Z6:()=>u,gK:()=>E,gj:()=>L,mD:()=>F});var Z=c(5861),N=c(4459),Y=c(1862);function i(l){return e.apply(this,arguments)}function e(){return(e=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/AddUpdate",params:{board_id:l.params.board_id||null,board_title:l.params.board_title||null,board_description:l.params.board_description||null,board_content:l.params.board_content||null,cover:l.params.cover||null,topic_id:l.params.topic_id||null,category_id:l.params.category_id||null,size_width:l.params.size_width||null,size_height:l.params.size_height||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}function u(l){return B.apply(this,arguments)}function B(){return(B=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/CopyBoard",params:{board_id:l.params.board_id||null,board_title:l.params.board_title||null,board_description:l.params.board_description||null,board_content:l.params.board_content||null,cover:l.params.cover||null,topic_id:l.params.topic_id||null,category_id:l.params.category_id||null,size_width:l.params.size_width||null,size_height:l.params.size_height||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}function F(l){return J.apply(this,arguments)}function J(){return(J=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.tD)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,url:"api/BoardFile2/DeleteBoard",params:{deleteby:l.params.userid||null,board_id:l.params.board_id||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)}}))})).apply(this,arguments)}function d(l){return a.apply(this,arguments)}function a(){return(a=(0,Z.Z)(function*(l){var _,h,K;let k=yield(0,N.H0)();k.madonvi&&(l.params=l.params||{},(0,Y.ly)(`${null!==(_=k.readfileuploadurl)&&void 0!==_?_:""}${null!==(h=k.boardpathv1)&&void 0!==h?h:""}${l.params.board_id}/content.json`,"content.json","application/json",null!==(K=l.callback)&&void 0!==K?K:g=>console.log(g)))})).apply(this,arguments)}function t(l){return o.apply(this,arguments)}function o(){return(o=(0,Z.Z)(function*(l){var _,h,K;let k=yield(0,N.H0)();k.madonvi&&(l.params=l.params||{},(0,Y.ly)(`${null!==(_=k.readfileuploadurl)&&void 0!==_?_:""}${null!==(h=k.boardpath)&&void 0!==h?h:""}${l.params.board_id}/content.json`,"content.json","application/json",null!==(K=l.callback)&&void 0!==K?K:g=>console.log(g)))})).apply(this,arguments)}function L(l){return w.apply(this,arguments)}function w(){return(w=(0,Z.Z)(function*(l){var _,h,K;let k=yield(0,N.H0)();k.madonvi&&(l.params=l.params||{},(0,Y.ly)(`${null!==(_=k.readfileuploadurl)&&void 0!==_?_:""}${null!==(h=k.boardpath)&&void 0!==h?h:""}${l.params.board_id}/setting.json`,"setting.json","application/json",null!==(K=l.callback)&&void 0!==K?K:g=>console.log(g)))})).apply(this,arguments)}function x(l){return I.apply(this,arguments)}function I(){return(I=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/UpdateBoardCover",params:{board_id:l.params.board_id||null,filestring:l.params.filestring||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)}}))})).apply(this,arguments)}function A(l){return C.apply(this,arguments)}function C(){return(C=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/UpdateBoardContent",params:{board_id:l.params.board_id||null,filestring:l.params.filestring||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}function v(l){return f.apply(this,arguments)}function f(){return(f=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,url:"api/BoardFile2/UpdateBoardSetting",params:{board_id:l.params.board_id||null,filestring:l.params.filestring||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}function s(l){return r.apply(this,arguments)}function r(){return(r=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/ImportLvb",params:{board_id:l.params.board_id||null,filepath:l.params.filepath||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}function E(l){return M.apply(this,arguments)}function M(){return(M=(0,Z.Z)(function*(l){let _=yield(0,N.H0)();_.madonvi&&(l.params=l.params||{},(0,N.T1)({api_url:_.apifilereaderurl,api_auth:_.apifilereaderauth,path:"api/BoardFile2/ExportLvb",params:{board_id:l.params.board_id||null,createdby:l.params.userid||null,modifiedby:l.params.userid||null},success:h=>{"function"==typeof l.callback&&l.callback(h.data||null,_)},error:h=>{"function"==typeof l.callback&&l.callback(null),console.error(h)},loading:l.loading}))})).apply(this,arguments)}},1461:(q,$,c)=>{"use strict";c.d($,{N:()=>N,b:()=>Y});var Z=c(4459);function N(i){i.params=i.params||{},i.params.page=i.params.page||1,i.params.limit=i.params.limit||1,(0,Z.cd)({url:"api/Category/Search",params:{category_id:i.params.category_id||null,category_title:i.params.category_title||null,createdby:i.params.createdby||null,level:i.params.level||null,sortfield:i.params.sortfield||null,sorttype:i.params.sorttype||null,posstart:(i.params.page-1)*i.params.limit,numofrow:i.params.limit},success:e=>{"function"==typeof i.callback&&i.callback(e.data||null)},error:e=>{"function"==typeof i.callback&&i.callback(null),console.error(e)}})}function Y(i){i.params=i.params||{},i.params.page=i.params.page||1,i.params.limit=i.params.limit||1,(0,Z.cd)({url:"api/Category/SearchTreeList",params:{getby:i.params.userid||null,category_id:i.params.category_id||null,category_pid:i.params.category_pid||null,category_title:i.params.category_title||null,active:i.params.active||null,topic_id:i.params.topic_id||null,sortfield:i.params.sortfield||null,sorttype:i.params.sorttype||null,posstart:(i.params.page-1)*i.params.limit,numofrow:i.params.limit},success:e=>{"function"==typeof i.callback&&i.callback(e.data||null)},error:e=>{"function"==typeof i.callback&&i.callback(null),console.error(e)}})}},1062:(q,$,c)=>{"use strict";c.d($,{Z:()=>e,m:()=>u});var Z=c(5861),N=c(2014);const Y=new N.K({name:"_localDataDB",driverOrder:[N.N.IndexedDB,N.N.LocalStorage]}),i="ui-config",e=function(){var B=(0,Z.Z)(function*(F){yield Y.create();try{var J=(yield Y.get(i))||{};"function"==typeof F.callback&&F.callback(J)}catch(n){"function"==typeof F.callback&&F.callback(null),console.error(n)}});return function(J){return B.apply(this,arguments)}}(),u=function(){var B=(0,Z.Z)(function*(F){yield Y.create(),F.params=F.params||{};try{var J=(yield Y.get(i))||{};Object.assign(J,F.params),yield Y.set(i,J),"function"==typeof F.callback&&F.callback(J)}catch(n){"function"==typeof F.callback&&F.callback(null),console.error(n)}});return function(J){return B.apply(this,arguments)}}()},8247:(q,$,c)=>{"use strict";c.d($,{D:()=>N});var Z=c(4459);function N(Y){Y.params=Y.params||{},(0,Z.cd)({url:"api/Lookup/get",params:{lookup_key:Y.params.lookup_key||null},success:i=>{"function"==typeof Y.callback&&Y.callback(null==i?void 0:i.data)},error:i=>{"function"==typeof Y.callback&&Y.callback(null),console.error(Y,i)},loading:Y.loading})}},6240:(q,$,c)=>{"use strict";c.d($,{Bm:()=>N,YM:()=>Y,iS:()=>e,o5:()=>i});var Z=c(4459);function N(u){var B,F,J,n,d,a,t,o,L,w,x;u.params=u.params||{},u.params.page=u.params.page||1,u.params.limit=u.params.limit||1,(0,Z.cd)({url:"api/Media/Search",params:{getby:null!==(B=u.params.userid)&&void 0!==B?B:null,global:null!==(F=u.params.global)&&void 0!==F?F:null,media_id:null!==(J=u.params.media_id)&&void 0!==J?J:null,media_title:null!==(n=u.params.media_title)&&void 0!==n?n:null,v_mediatype:null!==(d=u.params.v_mediatype)&&void 0!==d?d:null,v_mediatypes:null!==(a=u.params.v_mediatypes)&&void 0!==a?a:null,topic_id:null!==(t=u.params.topic_id)&&void 0!==t?t:null,category_id:null!==(o=u.params.category_id)&&void 0!==o?o:null,tags:null!==(L=u.params.tags)&&void 0!==L?L:null,sortfield:null!==(w=u.params.sortfield)&&void 0!==w?w:null,sorttype:null!==(x=u.params.sorttype)&&void 0!==x?x:null,posstart:(u.params.page-1)*u.params.limit,numofrow:u.params.limit},success:I=>{var A;"function"==typeof u.callback&&u.callback(null!==(A=I.data)&&void 0!==A?A:null)},error:I=>{"function"==typeof u.callback&&u.callback(),console.error(I)},loading:u.loading})}function Y(u){var B,F;u.params=u.params||{},(0,Z.cd)({url:"api/Media/Detail",params:{getby:null!==(B=u.params.userid)&&void 0!==B?B:null,media_id:null!==(F=u.params.media_id)&&void 0!==F?F:null},success:J=>{var n;"function"==typeof u.callback&&u.callback(null!==(n=J.data)&&void 0!==n?n:null)},error:J=>{"function"==typeof u.callback&&u.callback(),console.error(J)},loading:u.loading})}function i(u){var B,F,J,n,d,a,t,o,L,w,x,I,A,C,v,f,s;u.params=u.params||{},(0,Z.T1)({url:"api/Media/AddUpdate",params:{media_id:null!==(B=u.params.media_id)&&void 0!==B?B:null,media_title:null!==(F=u.params.media_title)&&void 0!==F?F:null,media_description:null!==(J=u.params.media_description)&&void 0!==J?J:null,media_content:null!==(n=u.params.media_content)&&void 0!==n?n:null,filepath:null!==(d=u.params.filepath)&&void 0!==d?d:null,filepath_extract:null!==(a=u.params.filepath_extract)&&void 0!==a?a:null,link_file:null!==(t=u.params.link_file)&&void 0!==t?t:null,link_share:null!==(o=u.params.link_share)&&void 0!==o?o:null,cover:null!==(L=u.params.cover)&&void 0!==L?L:null,v_mediatype:null!==(w=u.params.v_mediatype)&&void 0!==w?w:null,v_osstype:null!==(x=u.params.v_osstype)&&void 0!==x?x:null,v_sharingmode:null!==(I=u.params.v_sharingmode)&&void 0!==I?I:null,topic_id:null!==(A=u.params.topic_id)&&void 0!==A?A:null,category_id:null!==(C=u.params.category_id)&&void 0!==C?C:null,tags:null!==(v=u.params.tags)&&void 0!==v?v:null,createdby:null!==(f=u.params.userid)&&void 0!==f?f:null,modifiedby:null!==(s=u.params.userid)&&void 0!==s?s:null},success:r=>{var E;"function"==typeof u.callback&&u.callback(null!==(E=r.data)&&void 0!==E?E:null)},error:r=>{"function"==typeof u.callback&&u.callback(),console.error(r)},loading:u.loading})}function e(u){var B,F,J;u.params=u.params||{},(0,Z.tD)({url:"api/Media/Delete",params:{deletedby:null!==(B=u.params.userid)&&void 0!==B?B:null,media_id:null!==(F=u.params.media_id)&&void 0!==F?F:null,createdby:null!==(J=u.params.userid)&&void 0!==J?J:null},success:n=>{var d;"function"==typeof u.callback&&u.callback(null!==(d=n.data)&&void 0!==d?d:null)},error:n=>{"function"==typeof u.callback&&u.callback(),console.error(n)},loading:u.loading})}},3938:(q,$,c)=>{"use strict";c.d($,{GX:()=>N,IX:()=>i,hh:()=>Y});var Z=c(4459);function N(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,Z.cd)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:u=>{"function"==typeof e.callback&&e.callback(u.data||null)},error:u=>{"function"==typeof e.callback&&e.callback(null),console.error(u)}})}function Y(e){e.params=e.params||{},(0,Z.T1)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:u=>{"function"==typeof e.callback&&e.callback(u.data||null)},error:u=>{"function"==typeof e.callback&&e.callback(null),console.error(u)}})}function i(e){e.params=e.params||{},(0,Z.tD)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:u=>{"function"==typeof e.callback&&e.callback(u.data||null)},error:u=>{"function"==typeof e.callback&&e.callback(null),console.error(u)}})}},4041:(q,$,c)=>{"use strict";c.d($,{D:()=>N,w:()=>Y});var Z=c(4459);function N(i){i.params=i.params||{},i.params.page=i.params.page||1,i.params.limit=i.params.limit||1,(0,Z.cd)({url:"api/Topic/Search",params:{topic_id:i.params.topic_id||null,topic_title:i.params.topic_title||null,createdby:i.params.createdby||null,level:i.params.level||null,sortfield:i.params.sortfield||null,sorttype:i.params.sorttype||null,posstart:(i.params.page-1)*i.params.limit,numofrow:i.params.limit},success:e=>{"function"==typeof i.callback&&i.callback(e.data||null)},error:e=>{"function"==typeof i.callback&&i.callback(null),console.error(e)}})}function Y(i){i.params=i.params||{},i.params.page=i.params.page||1,i.params.limit=i.params.limit||1,(0,Z.cd)({url:"api/Topic/SearchTreeList",params:{getby:i.params.userid||null,topic_id:i.params.topic_id||null,topic_pid:i.params.topic_pid||null,topic_title:i.params.topic_title||null,active:i.params.active||null,sortfield:i.params.sortfield||null,sorttype:i.params.sorttype||null,posstart:(i.params.page-1)*i.params.limit,numofrow:i.params.limit},success:e=>{"function"==typeof i.callback&&i.callback(e.data||null)},error:e=>{"function"==typeof i.callback&&i.callback(null),console.error(e)}})}},1529:(q,$,c)=>{"use strict";c.d($,{G4:()=>e,NP:()=>F,r7:()=>i,u4:()=>u,zS:()=>B});var Z=c(4459),N=c(3589),Y=c(1862);function i(d){d.params=d.params||{},(0,Z.OL)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/download-image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{url:d.params.url||null},success:a=>{var t;"function"==typeof d.callback&&(null!=a&&null!==(t=a.data)&&void 0!==t&&t.StatusCode?d.callback():d.callback(URL.createObjectURL(null==a?void 0:a.data)))},error:a=>{"function"==typeof d.callback&&d.callback(),console.error(a)},loading:d.loading})}function e(d){var a,t,o;d.params=d.params||{};let L=null!==(a=d.callback)&&void 0!==a?a:I=>{console.log(I)},w=null===(t=d.params.url)||void 0===t?void 0:t.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""),x=(null==w||null===(o=w.split("/"))||void 0===o||null===(o=o.pop())||void 0===o?void 0:o.toLocaleLowerCase())||"image.png";i({params:{url:w},callback:I=>{I?(0,Y.d4)(I,x,"image/x-png",A=>{A?(0,N.z)({params:{file:A,subFolder:"material/aitool",fileType:"image"},callback:C=>{0==(null==C?void 0:C.ReturnCode)?L(C):L()}}):L()}):L()},loading:d.loading})}function u(d){if(d.params=d.params||{},"2.0"==d.params.version)return function J(d){if(d.params=d.params||{},d.params.size){let a=d.params.size.split("x");d.params.width=parseInt(a[0]),d.params.height=parseInt(a[1])}(0,Z.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{prompt:d.params.prompt||"Superheroes flying in the sky with chibi style",width:d.params.width||512,height:d.params.height||512,steps:20},success:a=>{"function"==typeof d.callback&&d.callback(a.data||null)},error:a=>{"function"==typeof d.callback&&d.callback(),console.error(a)},loading:d.loading})}(d);(0,Z.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{Prompt:d.params.prompt||"Superheroes flying in the sky with chibi style",Size:d.params.size||"256x256"},success:a=>{"function"==typeof d.callback&&d.callback(a.data||null)},error:a=>{"function"==typeof d.callback&&d.callback(),console.error(a)},loading:d.loading})}function B(d){if(d.params=d.params||{},"2.0"==d.params.version)return function n(d){d.params=d.params||{};const a=new FormData;if(a.append("prompt",d.params.prompt||null),a.append("file",d.params.file||null),d.params.size){let t=d.params.size.split("x");a.append("width",t[0]||512),a.append("height",t[1]||512)}(0,Z.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:a,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}(d);const a=new FormData;a.append("file",d.params.file||null),a.append("size",d.params.size||"256x256"),(0,Z.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:a,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}function F(d){d.params=d.params||{};const a=new FormData;a.append("prompt",d.params.prompt||null),a.append("sourceText",d.params.sourceText||null),a.append("temperature","1.0"),(0,Z.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/get-gpt-action",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:a,success:t=>{"function"==typeof d.callback&&d.callback(t.data||null)},error:t=>{"function"==typeof d.callback&&d.callback(),console.error(t)},loading:d.loading})}},3589:(q,$,c)=>{"use strict";c.d($,{z:()=>Y});var Z=c(5861),N=c(4459);const Y=function(){var i=(0,Z.Z)(function*(e){e.params=e.params||{};let u=yield(0,N.H0)();var B=[];e.params.subFolder&&(e.params.subFolder=e.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),e.params.subFolder&&B.push(e.params.subFolder)),e.params.isconvertvideo=!!e.params.isconvertvideo,e.params.isconvertpdf2image=!!e.params.isconvertpdf2image,e.params.isconvertoffice2image=!!e.params.isconvertoffice2image,e.params.isresizeimage=!!e.params.isresizeimage;const F=new FormData;F.append("path",B.join("/")),F.append("types",e.params.fileType||null),F.append("file",e.params.file||null),F.append("base64",e.params.base64||!1),F.append("isconvertvideo",e.params.isconvertvideo),F.append("isconvertpdf2image",e.params.isconvertpdf2image),F.append("isconvertoffice2image",e.params.isconvertoffice2image),F.append("isresizeimage",e.params.isresizeimage),(0,N.tm)({api_url:u.fileuploadurl,authorization:!1,url:"Files",params:F,success:J=>{"function"==typeof e.callback&&e.callback(J.data||null)},error:J=>{"function"==typeof e.callback&&e.callback(),console.error(e,J)},loading:e.loading})});return function(u){return i.apply(this,arguments)}}()},865:(q,$,c)=>{"use strict";c.d($,{s:()=>g});var Z=c(5861),N=c(8107),Y=c.n(N),i=c(6676),e=c.n(i),u=c(4459),B=c(6240),F=c(1529),J=c(3377),n=c(1862),d=c(8186),a=c(422),t=c(9468),o=c(3536),L=c(6814),w=c(95);function x(p,U){if(1&p&&t.GkF(0,19),2&p){t.oxw();const b=t.MAs(32);t.Q6J("ngTemplateOutlet",b)}}function I(p,U){if(1&p&&t.GkF(0,19),2&p){t.oxw();const b=t.MAs(34);t.Q6J("ngTemplateOutlet",b)}}function A(p,U){1&p&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",21),t.qZA())}function C(p,U){if(1&p){const b=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(b);const P=t.oxw(2);return t.KtG(P.download())}),t._UZ(2,"ion-icon",26),t.qZA()()}}function v(p,U){if(1&p&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",22),t.YNc(2,C,3,0,"div",23),t.qZA()),2&p){const b=t.oxw();let y;t.xp6(1),t.Tol(null!=b.response&&b.response.Data?"img-response":"img-default"),t.Q6J("src",null!==(y=null==b.response?null:b.response.Data)&&void 0!==y?y:"assets/image/no-image.svg"),t.xp6(1),t.Q6J("ngIf",null==b.response?null:b.response.Data)}}function f(p,U){if(1&p&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&p){const b=U.$implicit;t.Q6J("value",b),t.xp6(1),t.Oqu(b)}}function s(p,U){if(1&p&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&p){const b=U.$implicit;t.Q6J("value",b),t.xp6(1),t.Oqu(b)}}function r(p,U){if(1&p){const b=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(b);const P=t.oxw(2);return t.KtG(P.submitText2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function E(p,U){1&p&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function M(p,U){if(1&p){const b=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1ee3i \xfd "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32)(9,"div",33)(10,"textarea",34),t.NdJ("change",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changePrompt(P))}),t.qZA()()()()(),t.TgZ(11,"div",29)(12,"div",35)(13,"div",36)(14,"label",37),t._uU(15,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(16,"select",38),t.NdJ("ngModelChange",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changeSize(P))}),t.YNc(17,f,2,2,"option",39),t.qZA()()(),t.TgZ(18,"div",29)(19,"div",35)(20,"div",36)(21,"label",37),t._uU(22,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(23,"select",38),t.NdJ("ngModelChange",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changeVersion(P))}),t.YNc(24,s,2,2,"option",39),t.qZA()()()(),t.TgZ(25,"div")(26,"div",40),t.YNc(27,r,5,0,"div",41),t.YNc(28,E,2,0,"div",41),t.qZA()()()}if(2&p){const b=t.oxw();let y;t.xp6(10),t.Q6J("ngModel",null!==(y=b.dataForm.prompt)&&void 0!==y?y:""),t.xp6(6),t.Q6J("ngModel",b.dataForm.size),t.xp6(1),t.Q6J("ngForOf",b.sizes),t.xp6(6),t.Q6J("ngModel",b.dataForm.version),t.xp6(1),t.Q6J("ngForOf",b.versions),t.xp6(3),t.Q6J("ngIf",!b.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",b.dataForm.isloading)}}function l(p,U){if(1&p&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&p){const b=U.$implicit;t.Q6J("value",b),t.xp6(1),t.Oqu(b)}}function _(p,U){if(1&p&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&p){const b=U.$implicit;t.Q6J("value",b),t.xp6(1),t.Oqu(b)}}function h(p,U){if(1&p){const b=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(b);const P=t.oxw(2);return t.KtG(P.submitImage2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function K(p,U){1&p&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function k(p,U){if(1&p){const b=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",46)(8,"div",47)(9,"div",32)(10,"div",33),t._UZ(11,"img",3),t.TgZ(12,"div",48)(13,"div",49)(14,"div")(15,"div",50),t._UZ(16,"ion-icon",51),t.qZA(),t.TgZ(17,"div",52)(18,"i"),t._uU(19,"C\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"),t.qZA()()()()()()()()()(),t.TgZ(20,"div",53)(21,"div",35)(22,"div",36)(23,"label",37),t._uU(24,"\u1ea2nh g\u1ed1c"),t.TgZ(25,"span",30),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"div",54)(28,"input",55),t.NdJ("change",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changeFile(P))}),t.qZA(),t.TgZ(29,"label",56),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",29)(32,"label"),t._uU(33,"G\u1ee3i \xfd"),t.qZA(),t.TgZ(34,"div",31)(35,"textarea",57),t.NdJ("change",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changePrompt(P))}),t.qZA()()(),t.TgZ(36,"div",29)(37,"div",35)(38,"div",36)(39,"label",37),t._uU(40,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(41,"select",38),t.NdJ("ngModelChange",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changeSize(P))}),t.YNc(42,l,2,2,"option",39),t.qZA()()(),t.TgZ(43,"div",29)(44,"div",35)(45,"div",36)(46,"label",37),t._uU(47,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(48,"select",38),t.NdJ("ngModelChange",function(P){t.CHM(b);const G=t.oxw();return t.KtG(G.changeVersion(P))}),t.YNc(49,_,2,2,"option",39),t.qZA()()()(),t.TgZ(50,"div")(51,"div",40),t.YNc(52,h,5,0,"div",41),t.YNc(53,K,2,0,"div",41),t.qZA()()()}if(2&p){const b=t.oxw();let y,P;t.xp6(11),t.Q6J("src",null!==(y=b.dataForm.fileUrlViewer)&&void 0!==y?y:"",t.LSH),t.xp6(19),t.Oqu(null==b.dataForm.file?null:b.dataForm.file.name),t.xp6(5),t.Q6J("ngModel",null!==(P=b.dataForm.prompt)&&void 0!==P?P:""),t.xp6(6),t.Q6J("ngModel",b.dataForm.size),t.xp6(1),t.Q6J("ngForOf",b.sizes),t.xp6(6),t.Q6J("ngModel",b.dataForm.version),t.xp6(1),t.Q6J("ngForOf",b.versions),t.xp6(3),t.Q6J("ngIf",!b.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",b.dataForm.isloading)}}let g=(()=>{var p;class U{constructor(y,P,G){this.modalController=y,this.toastController=P,this.loadingController=G,this.versions=["1.0","2.0"],this.sizes=["256x256","512x512","1024x1024","1024x1792","1792x1024"],this.dataForm={version:"2.0",size:"512x512"},this.response={},this.appsettings={}}ngOnInit(){var y=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,Z.Z)(function*(){y.appsettings=yield(0,u.H0)(),y.appsettings.madonvi&&(y.user=yield(0,J.iA)())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeIsFile(y){this.dataForm.isloading||(this.isFile=y)}download(){var y=this;return(0,Z.Z)(function*(){var P,G;null!==(P=y.response)&&void 0!==P&&P.Data&&(0,F.r7)({params:{url:null===(G=y.response)||void 0===G?void 0:G.Data},callback:H=>{if(H){var j;let T=(null===(j=y.response)||void 0===j||null===(j=j.Data)||void 0===j||null===(j=j.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""))||void 0===j||null===(j=j.split("/"))||void 0===j||null===(j=j.pop())||void 0===j?void 0:j.toLocaleLowerCase())||"image.png";(0,n.d4)(H,T,"image/x-png",W=>{W?Y()(W,T,"image/x-png"):(0,d.B)(y.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(O=>{O.present()})})}else(0,d.B)(y.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(T=>{T.present()})}})})()}save(){var y=this;return(0,Z.Z)(function*(){var P,G;if(y.dataForm.isloading)return(0,d.B)(y.toastController,{message:"H\xe3y \u0111\u1ee3i h\u1ec7 th\u1ed1ng ho\xe0n t\u1ea5t qu\xe1 tr\xecnh t\u1ea1o d\u1eef li\u1ec7u!"}).then(j=>{j.present()});if(null===(P=y.response)||void 0===P||!P.Data)return(0,d.B)(y.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u kh\u1edfi t\u1ea1o!"}).then(j=>{j.present()});const H=yield y.loadingController.create({message:"\u0110ang t\u1ea3i..."});(0,F.G4)({loading:j=>{j?H.present():H.dismiss()},params:{url:null===(G=y.response)||void 0===G?void 0:G.Data},callback:j=>{if(j){var T,W,O;let m={};return m.filepath=j.path+"/"+(null===(T=j.file)||void 0===T?void 0:T.name),m.link_file=y.appsettings.readfileuploadurl+j.path+"/"+(null===(W=j.file)||void 0===W?void 0:W.name),m.media_title=`AI-${e()(new Date).format("YYYYMMDDHHmm(SSS)")}`,m.media_description=y.dataForm.size,m.media_content=y.isFile?void 0:y.dataForm.prompt,m.v_mediatype=a.t.IMAGE,void(0,B.o5)({loading:D=>{D?H.present():H.dismiss()},params:Object.assign(m,{userid:null===(O=y.user)||void 0===O?void 0:O.userid}),callback:D=>{(0,d.B)(y.toastController,{},D).then(R=>{R.present()}),0==(null==D?void 0:D.returncode)&&y.modalController.dismiss(null==D?void 0:D.id,"confirm")}})}(0,d.B)(y.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i l\xean t\u1eadp tin!"}).then(m=>{m.present()})}})})()}changeSize(y){this.dataForm.size=y}changeVersion(y){this.dataForm.version=y}changePrompt(y){var P;this.dataForm.prompt=null==y||null===(P=y.target)||void 0===P||null===(P=P.value)||void 0===P?void 0:P.trim().replace(/\s+/g," ")}changeFile(y){this.dataForm.file=void 0,y.target.files.length&&(this.dataForm.file=y.target.files[0]),this.dataForm.fileUrlViewer=this.dataForm.file?URL.createObjectURL(this.dataForm.file):void 0}submitText2Image(){var y=this;return(0,Z.Z)(function*(){if(!y.dataForm.prompt)return(0,d.B)(y.toastController,{message:"H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(P=>{P.present()});(0,F.u4)({loading:P=>{y.dataForm.isloading=P},params:y.dataForm,callback:P=>{y.response=P}})})()}submitImage2Image(){var y=this;return(0,Z.Z)(function*(){if(!y.dataForm.file)return(0,d.B)(y.toastController,{message:"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(P=>{P.present()});(0,F.zS)({loading:P=>{y.dataForm.isloading=P},params:y.dataForm,callback:P=>{y.response=P}})})()}}return(p=U).\u0275fac=function(y){return new(y||p)(t.Y36(o.IN),t.Y36(o.yF),t.Y36(o.HT))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-modal-ai-image"]],decls:35,vars:9,consts:[["slot","end","mode","ios","color","light","fill","outline",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch","user-select-none"],[1,"col-12","col-lg-5","p-3","pr-lg-0"],[1,"prompt"],[1,"d-flex","h-100","flex-column"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"flex-grow-1","overflow-auto"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col-12","col-lg-7","p-3"],["class","response",4,"ngIf"],["typelink",""],["typefile",""],[3,"ngTemplateOutlet"],[1,"response"],["src","../../../../assets/image/gif/ai-loading.gif",1,"w-100","h-100","no-fit"],[1,"w-100","h-100",3,"src"],["class","download-box",4,"ngIf"],[1,"download-box"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/download.svg"],[1,"d-flex","h-100","flex-column","justify-content-between"],[1,"px-3","mt-2"],[1,"form-group"],[1,"ml-1","text-danger"],[1,"prompt-box"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item"],["placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","text-center"],[4,"ngIf"],[3,"value"],[1,"btn",3,"click"],["src","../../../../assets/icon/16x16/magic.svg"],["name","dots","color","dark",1,"align-middle"],[1,"ondrop-image"],["onclick","document.getElementById('inputFileAiImage').click()",1,"media-box"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-icon"],["src","../../../../assets/image-svg/uploadImage2.svg"],[1,"placeholder-text"],[1,"form-group","hide"],[1,"custom-file"],["type","file","id","inputFileAiImage","multiple","",1,"custom-file-input",3,"change"],["for","inputFileAiImage",1,"custom-file-label"],["rows","3","placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"]],template:function(y,P){1&y&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"T\u1ea1o \u1ea3nh b\u1eb1ng c\xf4ng ngh\u1ec7 AI"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return P.save()}),t.TgZ(5,"ion-label"),t._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return P.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return P.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),t.NdJ("click",function(){return P.changeIsFile(!1)}),t._uU(21,"V\u1ebd \u1ea3nh AI"),t.qZA()(),t.TgZ(22,"li",11)(23,"a",12),t.NdJ("click",function(){return P.changeIsFile(!0)}),t._uU(24,"AI - T\u1ea1o \u1ea3nh t\u01b0\u01a1ng \u0111\u1ed3ng"),t.qZA()()()(),t.TgZ(25,"div",13),t.YNc(26,x,1,1,"ng-container",14),t.YNc(27,I,1,1,"ng-container",14),t.qZA()()()(),t.TgZ(28,"div",15),t.YNc(29,A,2,0,"div",16),t.YNc(30,v,3,4,"div",16),t.qZA()()(),t.YNc(31,M,29,7,"ng-template",null,17,t.W1O),t.YNc(33,k,54,9,"ng-template",null,18,t.W1O)),2&y&&(t.xp6(9),t.Q6J("src",P.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(11),t.Tol(P.isFile?"":"active"),t.xp6(3),t.Tol(P.isFile?"active":""),t.xp6(3),t.Q6J("ngIf",!P.isFile),t.xp6(1),t.Q6J("ngIf",P.isFile),t.xp6(2),t.Q6J("ngIf",P.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",!P.dataForm.isloading))},dependencies:[L.sg,L.O5,L.tP,w.YN,w.Kr,w.Fj,w.EJ,w.JJ,w.On,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Xz,o.Q$,o.PQ,o.wd,o.sr],styles:['button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.hide[_ngcontent-%COMP%]{display:none!important}.ondrop-image[_ngcontent-%COMP%]{--color: #eee}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]{border-radius:4px;border:1px dashed rgba(51,53,74,.2);background:#FFF}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:60px}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#33333380}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]), .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%]{display:none}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]) + .placeholder[_ngcontent-%COMP%], .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{display:block}.prompt[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;color:#333;box-shadow:0 0 12px #0000001a}.prompt[_ngcontent-%COMP%]   .prompt-box[_ngcontent-%COMP%]{border:1px solid transparent}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{min-width:33%}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;background:transparent;padding-left:0}.prompt[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#eee}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade, #000)}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:160px;height:3rem;padding:0;border-radius:1.5rem;vertical-align:middle;text-align:center;font-size:14px;font-weight:400;text-transform:initial;background:#FF6A61;color:#fff}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:0;color:inherit}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){background-color:#e9e8e9}.response[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;box-shadow:0 0 12px #0000001a;line-height:0}.response[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.response[_ngcontent-%COMP%]   ion-img.no-fit[_ngcontent-%COMP%]{object-fit:none}.response[_ngcontent-%COMP%]   ion-img.img-default[_ngcontent-%COMP%]{object-fit:cover}.response[_ngcontent-%COMP%]   ion-img.img-response[_ngcontent-%COMP%]{object-fit:contain}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:1rem;width:3rem;height:3rem;margin-left:-1.5rem;line-height:0;border-radius:50%;box-shadow:0 4px 4px #00000026}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:inherit}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;font-size:26px}']}),U})()},9847:(q,$,c)=>{"use strict";c.d($,{e:()=>s});var Z=c(5861),N=c(4459),Y=c(8530),i=c(1461),e=c(4041),u=c(5938),B=c(9403),F=c(8526),J=c(3377),n=c(8186),d=c(7090),a=c(9468),t=c(3536),o=c(6814),L=c(95);function w(r,E){if(1&r){const M=a.EpF();a.TgZ(0,"button",22),a.NdJ("click",function(){a.CHM(M);const _=a.oxw(2);return a.KtG(_.clearTopic())}),a._UZ(1,"ion-icon",25),a.qZA()}}function x(r,E){if(1&r){const M=a.EpF();a.TgZ(0,"button",22),a.NdJ("click",function(){a.CHM(M);const _=a.oxw(2);return a.KtG(_.clearCategory())}),a._UZ(1,"ion-icon",25),a.qZA()}}function I(r,E){if(1&r){const M=a.EpF();a.TgZ(0,"div",15)(1,"ion-item")(2,"ion-input",16),a.NdJ("change",function(_){a.CHM(M);const h=a.oxw();return a.KtG(h.changeBoardTitle(_))}),a.qZA()()(),a.TgZ(3,"div",17)(4,"div",18),a._UZ(5,"input",19),a.TgZ(6,"div",20),a.YNc(7,w,2,0,"button",21),a.TgZ(8,"button",22),a.NdJ("click",function(_){a.CHM(M);const h=a.oxw();return a.KtG(h.presentPopoverTopic(_))}),a._UZ(9,"ion-icon",23),a.qZA()()()(),a.TgZ(10,"div",17)(11,"div",18),a._UZ(12,"input",24),a.TgZ(13,"div",20),a.YNc(14,x,2,0,"button",21),a.TgZ(15,"button",22),a.NdJ("click",function(_){a.CHM(M);const h=a.oxw();return a.KtG(h.presentPopoverCategory(_))}),a._UZ(16,"ion-icon",23),a.qZA()()()()}if(2&r){const M=a.oxw();let l,_;a.xp6(2),a.Q6J("ngModel",M.board.board_title),a.xp6(3),a.Q6J("value",null!==(l=M.board.topic_title)&&void 0!==l?l:""),a.xp6(2),a.Q6J("ngIf",M.board.topic_id),a.xp6(5),a.Q6J("value",null!==(_=M.board.category_title)&&void 0!==_?_:""),a.xp6(2),a.Q6J("ngIf",M.board.category_id)}}function A(r,E){if(1&r){const M=a.EpF();a.ynx(0),a.TgZ(1,"div",36),a.NdJ("click",function(){const h=a.CHM(M).$implicit,K=a.oxw(2);return a.KtG(K.selectItem(h.board_id))}),a.TgZ(2,"div",37)(3,"div",30)(4,"div",31)(5,"ion-img",38),a.NdJ("ionImgDidLoad",function(_){const K=a.CHM(M).$implicit,k=a.oxw(2);return a.KtG(k.coverLoad(_,K))}),a.qZA()()()()(),a.BQk()}if(2&r){const M=E.$implicit,l=a.oxw(2);a.xp6(1),a.Tol(M.board_id==l.selectedId?"selected":M.board_id==l.currentId?"actived":""),a.xp6(4),a.Q6J("alt",M.board_title)}}function C(r,E){1&r&&(a.ynx(0),a.TgZ(1,"div",39)(2,"div",40)(3,"div",30)(4,"div",31),a._UZ(5,"ion-skeleton-text",41),a.qZA()()()(),a.BQk()),2&r&&(a.xp6(5),a.Q6J("animated",!0))}function v(r,E){if(1&r){const M=a.EpF();a.TgZ(0,"ion-infinite-scroll",42),a.NdJ("ionInfinite",function(_){a.CHM(M);const h=a.oxw(2);return a.KtG(h.onIonInfinite(_))}),a._UZ(1,"ion-infinite-scroll-content"),a.qZA()}}function f(r,E){if(1&r){const M=a.EpF();a.TgZ(0,"ion-content")(1,"div",26)(2,"div",27)(3,"div",28),a.NdJ("click",function(){a.CHM(M);const _=a.oxw();return a.KtG(_.selectItem())}),a.TgZ(4,"div")(5,"div",29)(6,"div",30)(7,"div",31)(8,"div",32)(9,"div")(10,"div"),a._uU(11,"B\xe0i m\u1edbi"),a.qZA()()()()()()()(),a.YNc(12,A,6,3,"ng-container",33),a.YNc(13,C,6,1,"ng-container",34),a.qZA()(),a.YNc(14,v,2,0,"ion-infinite-scroll",35),a.qZA()}if(2&r){const M=a.oxw();a.xp6(3),a.Tol(M.selectedId?"":"selected"),a.xp6(9),a.Q6J("ngForOf",M.boards),a.xp6(1),a.Q6J("ngIf",M.paging.loading),a.xp6(1),a.Q6J("ngIf",M.paging.active)}}let s=(()=>{var r;class E{constructor(l,_,h){this.modalController=l,this.toastController=_,this.popoverController=h,this.board={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.fileurl="",this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.boards=[],this.topics=[],this.categorys=[],this.isloading=!1}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,Z.Z)(function*(){var _,h,K,k;l.appsettings=yield(0,N.H0)(),l.appsettings.madonvi&&(l.user=yield(0,J.iA)(),l.readfileuploadurl=l.appsettings.readfileuploadurl||"",l.coverUrl=`${null!==(_=l.appsettings.readfileuploadurl)&&void 0!==_?_:""}${null!==(h=l.appsettings.boardpath)&&void 0!==h?h:""}`,l.coverv1Url=`${null!==(K=l.appsettings.readfileuploadurl)&&void 0!==K?K:""}${null!==(k=l.appsettings.boardpathv1)&&void 0!==k?k:""}`,l.refreshData())})()}refreshData(){(0,e.D)({params:{page:1,limit:20},callback:l=>{this.topics=l||[]}}),(0,i.N)({params:{page:1,limit:20},callback:l=>{this.categorys=l||[]}}),this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadData_Paging(l){var _;this.paging.loading=!0,(0,d.rM)({params:{userid:null===(_=this.user)||void 0===_?void 0:_.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:h=>{this.boards=this.boards.concat(h||[]),this.paging.loading=!1,(!h||!h.length)&&(this.paging.active=!1),l&&l()}})}loadMore(l){this.paging.page+=1,this.loadData_Paging(l)}onIonInfinite(l){this.loadMore(()=>{l.target.complete()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var l=this;if(!this.board.board_title)return void(0,n.B)(this.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(k=>{k.present()});let _=k=>{(0,n.B)(this.toastController,{},k).then(g=>{g.present()}),0==(null==k?void 0:k.returncode)&&(this.modalController.dismiss(null==k?void 0:k.id,"confirm"),"modal-board"==this.openFrom&&(0,Z.Z)(function*(){const g=yield l.modalController.create({component:F.F,componentProps:{currentId:l.currentId,selectedId:null==k?void 0:k.id},mode:"ios",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});g.onDidDismiss().then(p=>{if("confirm"==p.role&&p.data){let b=p.data;var U;b.board_id&&window.open(`editor?b=${b.board_id}#${null===(U=b.board_title)||void 0===U?void 0:U.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),g.present()})())};var h,K;this.selectedId?(0,Y.Z6)({loading:k=>{this.isloading=k},params:Object.assign({},this.board,{userid:null===(h=this.user)||void 0===h?void 0:h.userid,board_id:this.selectedId}),callback:_}):(0,Y.Ux)({loading:k=>{this.isloading=k},params:Object.assign({},this.board,{userid:null===(K=this.user)||void 0===K?void 0:K.userid}),callback:_})}changeTopic(l,_){Object.assign(this.board,{topic_id:l,topic_title:_})}clearTopic(){Object.assign(this.board,{topic_id:null,topic_title:null})}presentPopoverTopic(l){var _=this;return(0,Z.Z)(function*(){const h=yield _.popoverController.create({component:u.a,componentProps:{selectedId:_.board.topic_id},event:l,dismissOnSelect:!1,animated:!1});h.onDidDismiss().then(K=>{var k,g;"confirm"==K.role&&Object.assign(_.board,{topic_id:null===(k=K.data)||void 0===k?void 0:k.topic_id,topic_title:null===(g=K.data)||void 0===g?void 0:g.topic_title})}),h.present()})()}changeCategory(l,_){Object.assign(this.board,{category_id:l,category_title:_})}clearCategory(){Object.assign(this.board,{category_id:null,category_title:null})}presentPopoverCategory(l){var _=this;return(0,Z.Z)(function*(){const h=yield _.popoverController.create({component:B.l,componentProps:{selectedId:_.board.category_id},event:l,dismissOnSelect:!1,animated:!1});h.onDidDismiss().then(K=>{var k,g;"confirm"==K.role&&Object.assign(_.board,{category_id:null===(k=K.data)||void 0===k?void 0:k.category_id,category_title:null===(g=K.data)||void 0===g?void 0:g.category_title})}),h.present()})()}changeBoardTitle(l){var _;this.board.board_title=null==l||null===(_=l.target)||void 0===_?void 0:_.value}changeBoardDescription(l){this.board.board_description=l}changeBoardContent(l){this.board.board_content=l}coverLoad(l,_){let h=[null!=_&&_.cover?this.readfileuploadurl+(null==_?void 0:_.cover):void 0,this.coverUrl+(null==_?void 0:_.board_id)+"/cover.svg",this.coverv1Url+(null==_?void 0:_.board_id)+"/cover.png"].filter(k=>!!k),K=k=>{if(!k)return;let g=new Image;g.onload=()=>{console.log(`onload -> ${g.src}`),l.target.setAttribute("src",k)},g.onerror=()=>{console.log(`onerror -> ${g.src}`),K(h.shift())},g.src=k};K(h.shift())}selectItem(l){this.selectedId=l}}return(r=E).\u0275fac=function(l){return new(l||r)(a.Y36(t.IN),a.Y36(t.yF),a.Y36(t.Dh))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-modal-board-add"]],inputs:{currentId:"currentId",openFrom:"openFrom",board:"board"},decls:32,vars:4,consts:[["slot","end","mode","ios","color","tertiary",3,"disabled","click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch"],[1,"col-12","col-lg-4","p-3","border-right"],[1,"ml-1","text-danger"],[3,"ngTemplateOutlet"],[1,"col-12","col-lg-8","p-3"],[1,"d-flex","h-100","flex-column"],[1,"flex-grow-1"],["tempForm",""],["tempTemplate",""],[1,"form-group","mb-4"],["label","T\xean b\xe0i gi\u1ea3ng *","label-placement","floating","placeholder","T\xean b\xe0i gi\u1ea3ng",3,"ngModel","change"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc","readonly","",1,"form-control",3,"value"],["name","close-outline"],[1,"py-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board",3,"click"],[1,"item-add"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-loading"],[1,"h-100",3,"animated"],[3,"ionInfinite"]],template:function(l,_){if(1&l&&(a.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a._uU(3,"T\u1ea1o b\xe0i gi\u1ea3ng"),a.qZA(),a.TgZ(4,"ion-button",0),a.NdJ("click",function(){return _.save()}),a.TgZ(5,"ion-label"),a._uU(6,"T\u1ea1o b\xe0i gi\u1ea3ng"),a.qZA()(),a.TgZ(7,"ion-buttons",1)(8,"ion-button",2),a.NdJ("click",function(){return _.toggleFullScreen()}),a._UZ(9,"ion-icon",3),a.qZA(),a.TgZ(10,"ion-button",4),a.NdJ("click",function(){return _.close()}),a._UZ(11,"ion-icon",5),a.qZA()()()(),a.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div")(16,"label"),a._uU(17,"Th\xf4ng tin b\xe0i gi\u1ea3ng: "),a.TgZ(18,"span",8),a._uU(19,"*"),a.qZA()()(),a.GkF(20,9),a.qZA(),a.TgZ(21,"div",10)(22,"div",11)(23,"div")(24,"label"),a._uU(25,"Ch\u1ecdn m\u1eabu:"),a.qZA()(),a.TgZ(26,"div",12),a.GkF(27,9),a.qZA()()()()(),a.YNc(28,I,17,5,"ng-template",null,13,a.W1O),a.YNc(30,f,15,5,"ng-template",null,14,a.W1O)),2&l){const h=a.MAs(29),K=a.MAs(31);a.xp6(4),a.Q6J("disabled",_.isloading),a.xp6(5),a.Q6J("src",_.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),a.xp6(11),a.Q6J("ngTemplateOutlet",h),a.xp6(7),a.Q6J("ngTemplateOutlet",K)}},dependencies:[o.sg,o.O5,o.tP,L.JJ,L.On,t.YG,t.Sm,t.W2,t.Gu,t.gu,t.Xz,t.ju,t.MB,t.pK,t.Ie,t.Q$,t.CK,t.wd,t.sr,t.j9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:36px;font-size:14px;outline:none;box-shadow:none;border-color:#eee;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}"]}),E})()},5744:(q,$,c)=>{"use strict";c.d($,{E:()=>x});var Z=c(5861),N=c(4459),Y=c(7090),i=c(8530),e=c(3377),u=c(8186),B=c(5938),F=c(9403),J=c(3589),n=c(9468),d=c(3536),a=c(6814),t=c(95);function o(I,A){if(1&I){const C=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(f){n.CHM(C);const s=n.oxw();return n.KtG(s.clearTopic(f))}),n._UZ(1,"ion-icon",27),n.qZA()}}function L(I,A){if(1&I){const C=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(f){n.CHM(C);const s=n.oxw();return n.KtG(s.clearCategory(f))}),n._UZ(1,"ion-icon",27),n.qZA()}}function w(I,A){if(1&I){const C=n.EpF();n.TgZ(0,"img",28),n.NdJ("error",function(f){n.CHM(C);const s=n.oxw();return n.KtG(s.errorBoardCover(f,s.board))}),n.qZA()}if(2&I){const C=n.oxw();let v;n.Q6J("src",null!==(v=C.fileurl)&&void 0!==v?v:C.readfileuploadurl+C.board.cover,n.LSH)}}let x=(()=>{var I;class A{constructor(v,f,s,r){this.modalController=v,this.popoverController=f,this.toastController=s,this.loadingController=r,this.b=0,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var v=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,Z.Z)(function*(){var f,s,r,E;v.appsettings=yield(0,N.H0)(),v.appsettings.madonvi&&(v.user=yield(0,e.iA)(),v.readfileuploadurl=v.appsettings.readfileuploadurl||"",v.coverUrl=`${null!==(f=v.appsettings.readfileuploadurl)&&void 0!==f?f:""}${null!==(s=v.appsettings.boardpath)&&void 0!==s?s:""}`,v.coverv1Url=`${null!==(r=v.appsettings.readfileuploadurl)&&void 0!==r?r:""}${null!==(E=v.appsettings.boardpathv1)&&void 0!==E?E:""}`,v.refreshData())})()}refreshData(){var v;(0,Y.T6)({params:{userid:null===(v=this.user)||void 0===v?void 0:v.userid,board_id:this.b},callback:f=>{(null==f?void 0:f.board_id)!=this.b?this.modalController.dismiss():this.board=f}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var v=this;return(0,Z.Z)(function*(){if(!v.board.board_title)return void(0,u.B)(v.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(r=>{r.present()});let f=[];v.boardCover&&f.push(new Promise((r,E)=>{var M;(0,J.z)({params:{file:v.boardCover,subFolder:`board-cover/${null!==(M=v.board.board_id)&&void 0!==M?M:0}`,fileType:"image"},callback:l=>{var _;0==(null==l?void 0:l.ReturnCode)&&(v.board.cover=l.path+"/"+(null===(_=l.file)||void 0===_?void 0:_.name)),r(!0)}})}));const s=yield v.loadingController.create({message:"\u0110ang t\u1ea3i..."});s.present(),Promise.all(f).then(r=>{var E;(0,i.Ux)({params:Object.assign({},v.board,{userid:null===(E=v.user)||void 0===E?void 0:E.userid}),callback:M=>{(0,u.B)(v.toastController,{},M).then(l=>{l.present()}),0==(null==M?void 0:M.returncode)&&v.modalController.dismiss(null==M?void 0:M.id,"confirm")},loading:M=>{M||s.dismiss()}})})})()}presentPopoverTopic(v){var f=this;return(0,Z.Z)(function*(){const s=yield f.popoverController.create({component:B.a,componentProps:{selectedId:f.board.topic_id,filterFor:"board"},event:v,dismissOnSelect:!1,animated:!1,side:"right"});s.onDidDismiss().then(r=>{var E,M;"confirm"==r.role&&Object.assign(f.board,{topic_id:null===(E=r.data)||void 0===E?void 0:E.topic_id,topic_title:null===(M=r.data)||void 0===M?void 0:M.topic_title})}),s.present()})()}clearTopic(v){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(v){this.board.topic_id=v}presentPopoverCategory(v){var f=this;return(0,Z.Z)(function*(){const s=yield f.popoverController.create({component:F.l,componentProps:{selectedId:f.board.category_id,filterFor:"board"},event:v,dismissOnSelect:!1,animated:!1,side:"right"});s.onDidDismiss().then(r=>{var E,M;"confirm"==r.role&&Object.assign(f.board,{category_id:null===(E=r.data)||void 0===E?void 0:E.category_id,category_title:null===(M=r.data)||void 0===M?void 0:M.category_title})}),s.present()})()}clearCategory(v){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(v){this.board.category_id=v}changeBoardTitle(v){var f;this.board.board_title=null==v||null===(f=v.target)||void 0===f?void 0:f.value}changeBoardDescription(v){var f;this.board.board_description=null==v||null===(f=v.target)||void 0===f?void 0:f.value}changeBoardContent(v){var f;this.board.board_content=null==v||null===(f=v.target)||void 0===f?void 0:f.value}changeBoardCover(v){this.boardCover=void 0,v.target.files.length&&(this.boardCover=v.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}errorBoardCover(v,f){let s=v.target,r=[f.cover?this.readfileuploadurl+f.cover:void 0,f.board_id?this.coverUrl+f.board_id+"/cover.svg":void 0,f.board_id?this.coverv1Url+f.board_id+"/cover.png":void 0,"assets/image-png/board-default.jpg"].filter(M=>!!M),E=M=>{if(!M)return;let l=new Image;l.onload=()=>{null==s||s.setAttribute("src",M)},l.onerror=()=>{E(r.shift())},l.src=M};E(r.shift())}}return(I=A).\u0275fac=function(v){return new(v||I)(n.Y36(d.IN),n.Y36(d.Dh),n.Y36(d.yF),n.Y36(d.HT))},I.\u0275cmp=n.Xpm({type:I,selectors:[["app-modal-board-update"]],inputs:{b:"b"},decls:67,vars:9,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","7",1,"form-control",3,"ngModel","change"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],["class","w-100 h-100",3,"src","error",4,"ngIf"],["rows","12",1,"form-control",3,"ngModel","change"],["name","close-outline"],[1,"w-100","h-100",3,"src","error"]],template:function(v,f){if(1&v&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"C\u1eadp nh\u1eadt th\xf4ng tin b\xe0i gi\u1ea3ng"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return f.save()}),n.TgZ(5,"ion-label"),n._uU(6,"C\u1eadp nh\u1eadt"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return f.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return f.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"label",12),n._uU(20,"C\u1ea5p l\u1edbp"),n.qZA()(),n._UZ(21,"input",13),n.TgZ(22,"div",14),n.YNc(23,o,2,0,"button",15),n.TgZ(24,"button",16),n.NdJ("click",function(r){return f.presentPopoverTopic(r)}),n._UZ(25,"ion-icon",17),n.qZA()()()(),n.TgZ(26,"div",9)(27,"div",10)(28,"div",11)(29,"label",12),n._uU(30,"M\xf4n h\u1ecdc"),n.qZA()(),n._UZ(31,"input",13),n.TgZ(32,"div",14),n.YNc(33,L,2,0,"button",15),n.TgZ(34,"button",16),n.NdJ("click",function(r){return f.presentPopoverCategory(r)}),n._UZ(35,"ion-icon",17),n.qZA()()()(),n.TgZ(36,"div",9)(37,"div",10)(38,"div",11)(39,"label",12),n._uU(40,"T\xean h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(41,"input",18),n.NdJ("change",function(r){return f.changeBoardTitle(r)}),n.qZA()()(),n.TgZ(42,"div",9)(43,"div",10)(44,"div",11)(45,"label",12),n._uU(46,"M\xf4 t\u1ea3"),n.qZA()(),n.TgZ(47,"textarea",19),n.NdJ("change",function(r){return f.changeBoardDescription(r)}),n.qZA()()()(),n.TgZ(48,"div",8)(49,"div",9)(50,"div",10)(51,"div",11)(52,"label",12),n._uU(53,"\u1ea2nh b\xeca"),n.qZA()(),n.TgZ(54,"div",20)(55,"input",21),n.NdJ("change",function(r){return f.changeBoardCover(r)}),n.qZA(),n._UZ(56,"label",22),n.qZA()()(),n.TgZ(57,"div",9)(58,"div",23)(59,"div",24),n.YNc(60,w,1,1,"img",25),n.qZA()()()()(),n.TgZ(61,"div",9)(62,"div",10)(63,"div",11)(64,"label",12),n._uU(65,"N\u1ed9i dung"),n.qZA()(),n.TgZ(66,"textarea",26),n.NdJ("change",function(r){return f.changeBoardContent(r)}),n.qZA()()()()()),2&v){let s,r;n.xp6(9),n.Q6J("src",f.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(12),n.Q6J("value",null!==(s=f.board.topic_title)&&void 0!==s?s:""),n.xp6(2),n.Q6J("ngIf",f.board.topic_id),n.xp6(8),n.Q6J("value",null!==(r=f.board.category_title)&&void 0!==r?r:""),n.xp6(2),n.Q6J("ngIf",f.board.category_id),n.xp6(8),n.Q6J("ngModel",f.board.board_title),n.xp6(6),n.Q6J("ngModel",f.board.board_description),n.xp6(13),n.Q6J("ngIf",f.board.board_id),n.xp6(6),n.Q6J("ngModel",f.board.board_content)}},dependencies:[a.O5,t.Fj,t.JJ,t.On,d.YG,d.Sm,d.W2,d.Gu,d.gu,d.Q$,d.wd,d.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),A})()},8526:(q,$,c)=>{"use strict";c.d($,{F:()=>A});var Z=c(5861),N=c(4459),Y=c(7090),i=c(5938),e=c(9403),u=c(3377),B=c(9847),F=c(5744),J=c(9784),n=c(9468),d=c(4487),a=c(3536),t=c(6814);function o(C,v){if(1&C){const f=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(r){n.CHM(f);const E=n.oxw();return n.KtG(E.clearFilterTopic(r))}),n._UZ(1,"ion-icon",32),n.qZA()}}function L(C,v){if(1&C){const f=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(r){n.CHM(f);const E=n.oxw();return n.KtG(E.clearFilterCategory(r))}),n._UZ(1,"ion-icon",32),n.qZA()}}function w(C,v){if(1&C){const f=n.EpF();n.ynx(0),n.TgZ(1,"div",33),n.NdJ("click",function(){const E=n.CHM(f).$implicit,M=n.oxw();return n.KtG(M.selectItem(E.board_id))})("dblclick",function(){const E=n.CHM(f).$implicit,M=n.oxw();return n.KtG(M.openEditor(E.board_id))}),n.TgZ(2,"div",34)(3,"div",35)(4,"div",22)(5,"div",23)(6,"ion-img",36),n.NdJ("ionImgDidLoad",function(r){const M=n.CHM(f).$implicit,l=n.oxw();return n.KtG(l.coverLoad(r,M))}),n.qZA()()()(),n.TgZ(7,"div",37)(8,"div",38)(9,"button",39),n.NdJ("click",function(){const E=n.CHM(f).$implicit,M=n.oxw();return n.KtG(M.openViewer(E.board_id))}),n._UZ(10,"ion-icon",40),n.qZA(),n.TgZ(11,"button",39),n.NdJ("click",function(){const E=n.CHM(f).$implicit,M=n.oxw();return n.KtG(M.openEditor(E.board_id))}),n._UZ(12,"ion-icon",41),n.qZA()()()(),n.TgZ(13,"div",42),n._uU(14),n.qZA()(),n.BQk()}if(2&C){const f=v.$implicit,s=n.oxw();n.xp6(1),n.Tol(f.board_id==s.selectedId?"selected":f.board_id==s.currentId?"actived":""),n.xp6(5),n.Q6J("alt",f.board_title),n.xp6(7),n.Q6J("title",f.board_title),n.xp6(1),n.Oqu(f.board_title)}}function x(C,v){1&C&&(n.ynx(0),n.TgZ(1,"div",20)(2,"div",43)(3,"div",22)(4,"div",23),n._UZ(5,"ion-skeleton-text",44),n.qZA()()(),n.TgZ(6,"div",28),n._UZ(7,"ion-skeleton-text",45),n.qZA()(),n.BQk()),2&C&&(n.xp6(5),n.Q6J("animated",!0),n.xp6(2),n.Q6J("animated",!0))}function I(C,v){if(1&C){const f=n.EpF();n.TgZ(0,"ion-infinite-scroll",46),n.NdJ("ionInfinite",function(r){n.CHM(f);const E=n.oxw();return n.KtG(E.onIonInfinite(r))}),n._UZ(1,"ion-infinite-scroll-content"),n.qZA()}}let A=(()=>{var C;class v{constructor(s,r,E,M){this.router=s,this.activatedRoute=r,this.modalController=E,this.popoverController=M,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.paging={sortfield:null,sorttype:null,page:1,limit:50,loading:!1,active:!0},this.filter={},this.boards=[]}ngOnInit(){var s=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,Z.Z)(function*(){var r,E,M,l,_;s.appsettings=yield(0,N.H0)(),s.appsettings.madonvi&&(s.user=yield(0,u.iA)(),s.readfileuploadurl=null!==(r=s.appsettings.readfileuploadurl)&&void 0!==r?r:"",s.coverUrl=`${null!==(E=s.appsettings.readfileuploadurl)&&void 0!==E?E:""}${null!==(M=s.appsettings.boardpath)&&void 0!==M?M:""}`,s.coverv1Url=`${null!==(l=s.appsettings.readfileuploadurl)&&void 0!==l?l:""}${null!==(_=s.appsettings.boardpathv1)&&void 0!==_?_:""}`,s.refreshData())})()}ngAfterViewInit(){}selectItem(s){this.currentId!=s&&(this.selectedId=s)}openViewer(s){var r=this;return(0,Z.Z)(function*(){s&&(yield r.modalController.create({component:J.u,componentProps:{b:s},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0})).present()})()}openEditor(s){s&&this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{b:s,n:null},queryParamsHandling:"merge",replaceUrl:!0}).finally(()=>{window.location.reload()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){return this.modalController.dismiss(this.boards.find(s=>s.board_id==this.selectedId),"confirm")}coverLoad(s,r){let E=[null!=r&&r.cover?this.readfileuploadurl+(null==r?void 0:r.cover):void 0,this.coverUrl+(null==r?void 0:r.board_id)+"/cover.svg",this.coverv1Url+(null==r?void 0:r.board_id)+"/cover.png"].filter(l=>!!l),M=l=>{if(!l)return;let _=new Image;_.onload=()=>{console.log(`onload -> ${_.src}`),s.target.setAttribute("src",l)},_.onerror=()=>{console.log(`onerror -> ${_.src}`),M(E.shift())},_.src=l};M(E.shift())}onIonInfinite(s){this.loadMore(()=>{s.target.complete()})}loadData_Paging(s){var r;this.paging.loading=!0,(0,Y.GW)({params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:E=>{this.boards=this.boards.concat(E||[]),this.paging.loading=!1,(!E||!E.length)&&(this.paging.active=!1),s&&s()}})}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadMore(s){this.paging.page+=1,this.loadData_Paging(s)}searchChange(s){this.filter.search=s.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}sortChange(s,r){this.paging.sortfield=s||null,this.paging.sorttype=r||null,this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}presentModalBoardAdd(s){var r=this;return(0,Z.Z)(function*(){r.modalController.dismiss(null,"close2open-modal-add"),(yield r.modalController.create({component:B.e,componentProps:{currentId:r.currentId,openFrom:"modal-board"},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardUpdate(s){var r=this;return(0,Z.Z)(function*(){const E=yield r.modalController.create({component:F.E,mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});E.onDidDismiss().then(M=>{"confirm"==M.role&&M.data&&r.refreshData()}),E.present()})()}clearFilterTopic(s){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}presentPopoverTopic(s){var r=this;return(0,Z.Z)(function*(){const E=yield r.popoverController.create({component:i.a,componentProps:{selectedId:r.filter.topic_id,filterFor:"board"},event:s,dismissOnSelect:!1,animated:!1});E.onDidDismiss().then(M=>{var l,_;"confirm"==M.role&&(Object.assign(r.filter,{topic_id:null===(l=M.data)||void 0===l?void 0:l.topic_id,topic_title:null===(_=M.data)||void 0===_?void 0:_.topic_title}),r.filterChange())}),E.present()})()}clearFilterCategory(s){Object.assign(this.filter,{category_id:null,category_title:null}),this.filterChange()}presentPopoverCategory(s){var r=this;return(0,Z.Z)(function*(){const E=yield r.popoverController.create({component:e.l,componentProps:{selectedId:r.filter.category_id,filterFor:"board"},event:s,dismissOnSelect:!1,animated:!1});E.onDidDismiss().then(M=>{var l,_;"confirm"==M.role&&(Object.assign(r.filter,{category_id:null===(l=M.data)||void 0===l?void 0:l.category_id,category_title:null===(_=M.data)||void 0===_?void 0:_.category_title}),r.filterChange())}),E.present()})()}}return(C=v).\u0275fac=function(s){return new(s||C)(n.Y36(d.F0),n.Y36(d.gz),n.Y36(a.IN),n.Y36(a.Dh))},C.\u0275cmp=n.Xpm({type:C,selectors:[["app-modal-board"]],inputs:{currentId:"currentId",selectedId:"selectedId"},decls:49,vars:9,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"px-3"],[1,"row"],[1,"col-12","col-lg-4","my-3"],[1,"searchbox"],["mode","ios","inputmode","search","placeholder","T\xecm ki\u1ebfm ...","search-icon","","show-clear-button","never","show-cancel-button","never",3,"debounce","ionInput"],[1,"col-6","col-lg-4","my-3"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc",1,"form-control",3,"value"],[1,"py-3","p-lg-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-add",3,"click"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"text-center"],[1,"icon-add"],["src","../../../../assets/icon/16x16/add.svg"],[1,"item-name","line-clamp-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["name","close-outline"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click","dblclick"],[1,"position-relative"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"position-absolute","top-0","bottom-0","left-0","right-0","item-action"],[1,"position-absolute","bottom-0","right-0"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/view.svg"],["src","../../../../assets/icon/16x16/edit.svg"],[1,"item-name","line-clamp-2",3,"title"],[1,"item-loading"],[1,"h-100",3,"animated"],[2,"width","75%",3,"animated"],[3,"ionInfinite"]],template:function(s,r){if(1&s&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"B\xe0i gi\u1ea3ng c\u1ee7a t\xf4i"),n.qZA(),n.TgZ(4,"ion-buttons",0)(5,"ion-button",1),n.NdJ("click",function(){return r.toggleFullScreen()}),n._UZ(6,"ion-icon",2),n.qZA(),n.TgZ(7,"ion-button",3),n.NdJ("click",function(){return r.close()}),n._UZ(8,"ion-icon",4),n.qZA()()(),n.TgZ(9,"ion-toolbar")(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"ion-searchbar",9),n.NdJ("ionInput",function(M){return r.searchChange(M)}),n.qZA()()(),n.TgZ(15,"div",10)(16,"div",11),n._UZ(17,"input",12),n.TgZ(18,"div",13),n.YNc(19,o,2,0,"button",14),n.TgZ(20,"button",15),n.NdJ("click",function(M){return r.presentPopoverTopic(M)}),n._UZ(21,"ion-icon",16),n.qZA()()()(),n.TgZ(22,"div",10)(23,"div",11),n._UZ(24,"input",17),n.TgZ(25,"div",13),n.YNc(26,L,2,0,"button",14),n.TgZ(27,"button",15),n.NdJ("click",function(M){return r.presentPopoverCategory(M)}),n._UZ(28,"ion-icon",16),n.qZA()()()()()()()(),n.TgZ(29,"ion-content")(30,"div",18)(31,"div",19)(32,"div",20)(33,"div")(34,"div",21),n.NdJ("click",function(M){return r.presentModalBoardAdd(M)}),n.TgZ(35,"div",22)(36,"div",23)(37,"div",24)(38,"div")(39,"div",25)(40,"div",26),n._UZ(41,"ion-icon",27),n.qZA()(),n.TgZ(42,"div"),n._uU(43,"T\u1ea1o b\xe0i gi\u1ea3ng"),n.qZA()()()()()(),n.TgZ(44,"div",28),n._uU(45,"\xa0"),n.qZA()()(),n.YNc(46,w,15,5,"ng-container",29),n.YNc(47,x,8,2,"ng-container",30),n.qZA()(),n.YNc(48,I,2,0,"ion-infinite-scroll",31),n.qZA()),2&s){let E,M;n.xp6(6),n.Q6J("src",r.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(8),n.Q6J("debounce",1e3),n.xp6(3),n.Q6J("value",null!==(E=r.filter.topic_title)&&void 0!==E?E:""),n.xp6(2),n.Q6J("ngIf",r.filter.topic_id),n.xp6(5),n.Q6J("value",null!==(M=r.filter.category_title)&&void 0!==M?M:""),n.xp6(2),n.Q6J("ngIf",r.filter.category_id),n.xp6(20),n.Q6J("ngForOf",r.boards),n.xp6(1),n.Q6J("ngIf",r.paging.loading),n.xp6(1),n.Q6J("ngIf",r.paging.active)}},dependencies:[t.sg,t.O5,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.Xz,a.ju,a.MB,a.VI,a.CK,a.wd,a.sr,a.j9],styles:[".item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #8F9BB3;background:#FFF}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{height:40px;padding:0;--color: #333;--background: transparent;--box-shadow: none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-size:14px;outline:none;box-shadow:none;border-color:#8f9bb3;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-primary-shade, #000)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium, #999)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}"]}),v})()},6115:(q,$,c)=>{"use strict";c.d($,{b:()=>_});var Z=c(5861),N=c(4459),Y=c(8247),i=c(6240),e=c(3589),u=c(3377),B=c(1862),F=c(422),J=c(3130),n=c(9455),d=c(8186),a=c(9403),t=c(5938),o=c(9468),L=c(3536),w=c(6814),x=c(95);function I(h,K){if(1&h){const k=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(k);const p=o.oxw();return o.KtG(p.switchModal("ai-image"))}),o._uU(1,"T\u1ea1o b\u1eb1ng AI"),o.qZA()}2&h&&o.Tol("btn-light")}function A(h,K){if(1&h&&o.GkF(0,34),2&h){o.oxw();const k=o.MAs(74);o.Q6J("ngTemplateOutlet",k)}}function C(h,K){if(1&h&&o.GkF(0,34),2&h){o.oxw();const k=o.MAs(76);o.Q6J("ngTemplateOutlet",k)}}function v(h,K){if(1&h){const k=o.EpF();o.TgZ(0,"button",21),o.NdJ("click",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.clearTopic(p))}),o._UZ(1,"ion-icon",35),o.qZA()}}function f(h,K){if(1&h){const k=o.EpF();o.TgZ(0,"button",21),o.NdJ("click",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.clearCategory(p))}),o._UZ(1,"ion-icon",35),o.qZA()}}function s(h,K){if(1&h&&(o.TgZ(0,"option",43),o._uU(1),o.qZA()),2&h){const k=K.$implicit;o.Q6J("value",k.lookup_value),o.xp6(1),o.Oqu(k.lookup_title)}}function r(h,K){if(1&h&&(o.ynx(0),o.TgZ(1,"option",41),o._uU(2,"Ch\u1ecdn lo\u1ea1i t\xe0i li\u1ec7u"),o.qZA(),o.YNc(3,s,2,2,"option",42),o.BQk()),2&h){const k=o.oxw(2);o.xp6(3),o.Q6J("ngForOf",k.v_mediatypes)}}function E(h,K){if(1&h){const k=o.EpF();o.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),o._uU(4,"T\u1eadp tin"),o.qZA()(),o.TgZ(5,"div",26)(6,"input",36),o.NdJ("change",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.changeMediaFile(p))}),o.qZA(),o.TgZ(7,"label",37),o._uU(8),o.qZA()()()(),o.TgZ(9,"div",9)(10,"div",15)(11,"div",16)(12,"label",17),o._uU(13,"Lo\u1ea1i t\xe0i li\u1ec7u"),o.qZA()(),o.TgZ(14,"select",38),o.NdJ("ngModelChange",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.changeMediaType(p))}),o.YNc(15,r,4,1,"ng-container",39),o.ynx(16),o.TgZ(17,"option",40),o._uU(18,"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn theo lo\u1ea1i t\u1eadp tin"),o.qZA(),o.BQk(),o.qZA()()()}if(2&h){const k=o.oxw();let g,p;o.xp6(8),o.Oqu(k.mediaFiles.length?"\u0110\xe3 ch\u1ecdn "+k.mediaFiles.length+" t\u1eadp tin":(null!==(g=k.media.filepath)&&void 0!==g?g:"").split("/").pop()),o.xp6(6),o.Q6J("ngModel",null!==(p=k.media.v_mediatype)&&void 0!==p?p:0),o.xp6(1),o.Q6J("ngIf",k.mediaFiles.length<=1)}}function M(h,K){if(1&h&&(o.TgZ(0,"option",43),o._uU(1),o.qZA()),2&h){const k=K.$implicit;o.Q6J("value",k.lookup_value),o.xp6(1),o.Oqu(k.lookup_title)}}function l(h,K){if(1&h){const k=o.EpF();o.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),o._uU(4,"\u0110\u01b0\u1eddng d\u1eabn"),o.qZA()(),o.TgZ(5,"input",44),o.NdJ("ngModelChange",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.changeLinkShare(p))}),o.qZA()()(),o.TgZ(6,"div",9)(7,"div",15)(8,"div",16)(9,"label",17),o._uU(10,"Lo\u1ea1i li\xean k\u1ebft"),o.qZA()(),o.TgZ(11,"select",38),o.NdJ("ngModelChange",function(p){o.CHM(k);const U=o.oxw();return o.KtG(U.changeOssType(p))}),o.TgZ(12,"option",41),o._uU(13,"Ch\u1ecdn lo\u1ea1i li\xean k\u1ebft"),o.qZA(),o.YNc(14,M,2,2,"option",42),o.qZA()()()}if(2&h){const k=o.oxw();let g;o.xp6(5),o.Q6J("ngModel",k.media.link_share),o.xp6(6),o.Q6J("ngModel",null!==(g=k.media.v_osstype)&&void 0!==g?g:0),o.xp6(3),o.Q6J("ngForOf",k.v_osstypes)}}let _=(()=>{var h;class K{constructor(g,p,U,b){this.modalController=g,this.toastController=p,this.loadingController=U,this.popoverController=b,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[],this.isAI=n.isai}ngOnInit(){var g=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,Z.Z)(function*(){g.appsettings=yield(0,N.H0)(),g.appsettings.madonvi&&(g.user=yield(0,u.iA)(),g.readfileuploadurl=g.appsettings.readfileuploadurl||"",g.refreshData())})()}refreshData(){(0,Y.D)({params:{lookup_key:"v_mediatype"},callback:g=>{this.v_mediatypes=g||[]}}),(0,Y.D)({params:{lookup_key:"v_osstype"},callback:g=>{this.v_osstypes=g||[]}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(g){return this.modalController.dismiss({modalName:g},"switch")}save(){var g=this;return(0,Z.Z)(function*(){let p=[];if(g.mediaCover&&p.push(new Promise((b,y)=>{(0,e.z)({params:{file:g.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:P=>{var G;0==(null==P?void 0:P.ReturnCode)&&(g.media.cover=P.path+"/"+(null===(G=P.file)||void 0===G?void 0:G.name)),b(!0)}})})),g.isLink){if(g.media.v_mediatype=F.t.LINK,!g.media.link_share)return void(0,d.B)(g.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(b=>{b.present()})}else if(!g.media.link_file){if(g.mediaFiles.length>=2){const b=yield g.loadingController.create({message:"\u0110ang t\u1ea3i..."});return b.present(),void g.recursiveUpload(y=>{y||b.dismiss()})}if(1!=g.mediaFiles.length)return void(0,d.B)(g.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(b=>{b.present()});p.push(new Promise((b,y)=>{let P=g.mediaFiles.pop();(0,e.z)({params:{file:P,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:G=>{var H,j;0==(null==G?void 0:G.ReturnCode)&&(g.media.filepath=G.path+"/"+(null===(H=G.file)||void 0===H?void 0:H.name),g.media.link_file=g.readfileuploadurl+G.path+"/"+(null===(j=G.file)||void 0===j?void 0:j.name),g.media.media_title||(g.media.media_title=G.name.replace(/.[a-zA-Z0-9]+$/,"")),g.media.v_mediatype||g.v_mediatypes.every(T=>{var W,O;return null===(W=T.lookup_note)||void 0===W||null===(W=W.replace(/\s+/g,""))||void 0===W||!W.split(",").includes(null===(O=G.file)||void 0===O?void 0:O.extension)||(g.media.v_mediatype=T.lookup_value,!1)})),b(!0)}})}))}const U=yield g.loadingController.create({message:"\u0110ang t\u1ea3i..."});U.present(),Promise.all(p).then(b=>{var y;(0,i.o5)({params:Object.assign({},g.media,{userid:null===(y=g.user)||void 0===y?void 0:y.userid}),callback:P=>{(0,d.B)(g.toastController,{},P).then(G=>{G.present()}),0==(null==P?void 0:P.returncode)&&g.modalController.dismiss(null==P?void 0:P.id,"confirm")},loading:P=>{P||U.dismiss()}})})})()}recursiveUpload(g){if(this.mediaFiles.length){let p={topic_id:this.media.topic_id,category_id:this.media.category_id},U=this.mediaFiles.pop();(0,e.z)({params:{file:U,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:b=>{var y,P,G;0==(null==b?void 0:b.ReturnCode)?(p.filepath=b.path+"/"+(null===(y=b.file)||void 0===y?void 0:y.name),p.link_file=this.readfileuploadurl+b.path+"/"+(null===(P=b.file)||void 0===P?void 0:P.name),p.media_title=b.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(H=>{var j,T;return null===(j=H.lookup_note)||void 0===j||null===(j=j.replace(/\s+/g,""))||void 0===j||!j.split(",").includes(null===(T=b.file)||void 0===T?void 0:T.extension)||(p.v_mediatype=H.lookup_value,!1)}),(0,i.o5)({params:Object.assign(p,{userid:null===(G=this.user)||void 0===G?void 0:G.userid}),callback:H=>{this.recursiveUpload(g)}})):this.recursiveUpload(g)}})}else g(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(g){var p=this;return(0,Z.Z)(function*(){const U=yield p.popoverController.create({component:t.a,componentProps:{selectedId:p.media.topic_id,filterFor:"media"},event:g,dismissOnSelect:!1,animated:!1,side:"right"});U.onDidDismiss().then(b=>{var y,P;"confirm"==b.role&&Object.assign(p.media,{topic_id:null===(y=b.data)||void 0===y?void 0:y.topic_id,topic_title:null===(P=b.data)||void 0===P?void 0:P.topic_title})}),U.present()})()}clearTopic(g){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(g){var p;this.media.topic_id=null!==(p=parseInt(g))&&void 0!==p?p:0}presentPopoverCategory(g){var p=this;return(0,Z.Z)(function*(){const U=yield p.popoverController.create({component:a.l,componentProps:{selectedId:p.media.category_id,filterFor:"media"},event:g,dismissOnSelect:!1,animated:!1,side:"right"});U.onDidDismiss().then(b=>{var y,P;"confirm"==b.role&&Object.assign(p.media,{category_id:null===(y=b.data)||void 0===y?void 0:y.category_id,category_title:null===(P=b.data)||void 0===P?void 0:P.category_title})}),U.present()})()}clearCategory(g){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(g){var p;this.media.category_id=null!==(p=parseInt(g))&&void 0!==p?p:0}changeMediaTitle(g){var p;this.media.media_title=null==g||null===(p=g.target)||void 0===p?void 0:p.value}changeMediaDescription(g){var p;this.media.media_description=null==g||null===(p=g.target)||void 0===p?void 0:p.value}changeMediaContent(g){var p;this.media.media_content=null==g||null===(p=g.target)||void 0===p?void 0:p.value}changeMediaType(g){this.media.v_mediatype=g?parseInt(g):0}changeOssType(g){this.media.v_osstype=g?parseInt(g):0}changeLinkShare(g){this.media.link_share=g,(0,B.II)(g)?this.media.v_osstype=J.e.YOUTUBE:(0,B.VJ)(g)&&(this.media.v_osstype=J.e.PHET)}changeMediaFile(g){this.mediaFiles.length=0;for(let U=0,b=null===(p=g.target)||void 0===p?void 0:p.files.length;U<b;U++){var p;this.mediaFiles.push(g.target.files[U])}if(1==this.mediaFiles.length){let{fileName:U,fileExtension:b}=(0,B.yB)(this.mediaFiles[0].name);this.media.media_title=U,this.media.v_mediatype=void 0,this.v_mediatypes.every(y=>{var P;return null===(P=y.lookup_note)||void 0===P||null===(P=P.replace(/\s+/g,""))||void 0===P||!P.split(",").includes(b)||(this.media.v_mediatype=y.lookup_value,!1)}),!this.mediaCover&&this.media.v_mediatype==F.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaFiles[0]))}}changeMediaCover(g){var p;if(this.mediaCover=void 0,g.target.files.length&&(this.mediaCover=g.target.files[0]),!this.mediaCover)return;let y,{fileExtension:b}=(0,B.yB)(null===(p=this.mediaCover)||void 0===p?void 0:p.name);b&&(this.v_mediatypes.every(P=>{var G;return null===(G=P.lookup_note)||void 0===G||null===(G=G.replace(/\s+/g,""))||void 0===G||!G.split(",").includes(b)||(y=P.lookup_value,!1)}),this.mediaCover&&y==F.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(g){this.isLink=g}}return(h=K).\u0275fac=function(g){return new(g||h)(o.Y36(L.IN),o.Y36(L.yF),o.Y36(L.HT),o.Y36(L.Dh))},h.\u0275cmp=o.Xpm({type:h,selectors:[["app-modal-media-add"]],inputs:{filter:"filter"},decls:77,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"class","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","6",1,"form-control",3,"ngModel","change"],[1,"col-auto"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"w-100","h-100",3,"src"],["typefile",""],["typelink",""],[3,"ngTemplateOutlet"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModel","ngModelChange"]],template:function(g,p){if(1&g&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Th\xeam h\u1ecdc li\u1ec7u"),o.qZA(),o.TgZ(4,"ion-button",0),o.NdJ("click",function(){return p.save()}),o.TgZ(5,"ion-label"),o._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),o.qZA()(),o.TgZ(7,"ion-buttons",1)(8,"ion-button",2),o.NdJ("click",function(){return p.toggleFullScreen()}),o._UZ(9,"ion-icon",3),o.qZA(),o.TgZ(10,"ion-button",4),o.NdJ("click",function(){return p.close()}),o._UZ(11,"ion-icon",5),o.qZA()()()(),o.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"button",11),o.NdJ("click",function(){return p.changeIsLink(!1)}),o._uU(19,"T\u1eadp tin"),o.qZA(),o.TgZ(20,"button",11),o.NdJ("click",function(){return p.changeIsLink(!0)}),o._uU(21,"Li\xean k\u1ebft"),o.qZA(),o.YNc(22,I,2,2,"button",12),o.qZA()(),o.YNc(23,A,1,1,"ng-container",13),o.YNc(24,C,1,1,"ng-container",13),o.qZA()(),o.TgZ(25,"div",7)(26,"div",14)(27,"div",9)(28,"div",15)(29,"div",16)(30,"label",17),o._uU(31,"C\u1ea5p l\u1edbp"),o.qZA()(),o._UZ(32,"input",18),o.TgZ(33,"div",19),o.YNc(34,v,2,0,"button",20),o.TgZ(35,"button",21),o.NdJ("click",function(b){return p.presentPopoverTopic(b)}),o._UZ(36,"ion-icon",22),o.qZA()()()(),o.TgZ(37,"div",9)(38,"div",15)(39,"div",16)(40,"label",17),o._uU(41,"M\xf4n h\u1ecdc"),o.qZA()(),o._UZ(42,"input",18),o.TgZ(43,"div",19),o.YNc(44,f,2,0,"button",20),o.TgZ(45,"button",21),o.NdJ("click",function(b){return p.presentPopoverCategory(b)}),o._UZ(46,"ion-icon",22),o.qZA()()()(),o.TgZ(47,"div",9)(48,"div",15)(49,"div",16)(50,"label",17),o._uU(51,"T\xean h\u1ecdc li\u1ec7u"),o.qZA()(),o.TgZ(52,"input",23),o.NdJ("change",function(b){return p.changeMediaTitle(b)}),o.qZA()()(),o.TgZ(53,"div",9)(54,"div",15)(55,"div",16)(56,"label",17),o._uU(57,"M\xf4 t\u1ea3"),o.qZA()(),o.TgZ(58,"textarea",24),o.NdJ("change",function(b){return p.changeMediaDescription(b)}),o.qZA()()()(),o.TgZ(59,"div",25)(60,"div",9)(61,"div",15)(62,"div",16)(63,"label",17),o._uU(64,"\u1ea2nh b\xeca"),o.qZA()(),o.TgZ(65,"div",26)(66,"input",27),o.NdJ("change",function(b){return p.changeMediaCover(b)}),o.qZA(),o.TgZ(67,"label",28),o._uU(68),o.qZA()()()(),o.TgZ(69,"div",9)(70,"div",29)(71,"div",30),o._UZ(72,"ion-img",31),o.qZA()()()()()()(),o.YNc(73,E,19,3,"ng-template",null,32,o.W1O),o.YNc(75,l,15,3,"ng-template",null,33,o.W1O)),2&g){let U,b;o.xp6(9),o.Q6J("src",p.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),o.xp6(9),o.Tol(p.isLink?"btn-light":"btn-primary"),o.xp6(2),o.Tol(p.isLink?"btn-primary":"btn-light"),o.xp6(2),o.Q6J("ngIf",p.isAI),o.xp6(1),o.Q6J("ngIf",!p.isLink),o.xp6(1),o.Q6J("ngIf",p.isLink),o.xp6(8),o.Q6J("value",null!==(U=p.media.topic_title)&&void 0!==U?U:""),o.xp6(2),o.Q6J("ngIf",p.media.topic_id),o.xp6(8),o.Q6J("value",null!==(b=p.media.category_title)&&void 0!==b?b:""),o.xp6(2),o.Q6J("ngIf",p.media.category_id),o.xp6(8),o.Q6J("ngModel",p.media.media_title),o.xp6(6),o.Q6J("ngModel",p.media.media_description),o.xp6(10),o.Oqu(null==p.mediaCover?null:p.mediaCover.name),o.xp6(4),o.Q6J("src",p.fileurl||"assets/image-png/media-default.jpg")}},dependencies:[w.sg,w.O5,w.tP,x.YN,x.Kr,x.Fj,x.EJ,x.JJ,x.On,L.YG,L.Sm,L.W2,L.Gu,L.gu,L.Xz,L.Q$,L.wd,L.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),K})()},5630:(q,$,c)=>{"use strict";c.d($,{M:()=>j});var Z=c(1461),N=c(8247),Y=c(3938),i=c(4041),e=c(9468),u=c(3536),B=c(6814);function F(T,W){if(1&T&&e.GkF(0,23),2&T){e.oxw();const O=e.MAs(23);e.Q6J("ngTemplateOutlet",O)}}function J(T,W){if(1&T&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Lo\u1ea1i t\u1eadp tin"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&T){e.oxw();const O=e.MAs(25);e.xp6(5),e.Q6J("ngTemplateOutlet",O)}}function n(T,W){if(1&T&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Th\u1ebb"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&T){e.oxw();const O=e.MAs(27);e.xp6(5),e.Q6J("ngTemplateOutlet",O)}}function d(T,W){if(1&T&&(e.TgZ(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"C\u1ea5p l\u1edbp"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&T){e.oxw();const O=e.MAs(29);e.xp6(5),e.Q6J("ngTemplateOutlet",O)}}function a(T,W){if(1&T&&(e.TgZ(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"M\xf4n h\u1ecdc"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&T){e.oxw();const O=e.MAs(33);e.xp6(5),e.Q6J("ngTemplateOutlet",O)}}function t(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",37),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.clearFilterTopic(D))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=e.oxw(2);let m;e.xp6(4),e.Oqu(null!==(m=O.filter.topic_title)&&void 0!==m?m:"C\u1ea5p l\u1edbp")}}function o(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",40),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.clearFilterCategory(D))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=e.oxw(2);let m;e.xp6(4),e.Oqu(null!==(m=O.filter.category_title)&&void 0!==m?m:"M\xf4n h\u1ecdc")}}function L(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",41),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.clearFilterTags(D))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=e.oxw(2);let m;e.xp6(4),e.Oqu(null!==(m=O.filter.tags_key)&&void 0!==m?m:"Th\u1ebb")}}function w(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.clearFilterMediaType(D,R.filter.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=e.oxw(2);let m;e.xp6(4),e.Oqu(null!==(m=O.filter.v_mediatype_title)&&void 0!==m?m:"Lo\u1ea1i t\u1eadp tin")}}function x(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){const Q=e.CHM(O).$implicit,z=e.oxw(2);return e.KtG(z.clearFilterMediaType(D,Q.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=W.$implicit;let m;e.xp6(4),e.Oqu(null!==(m=O.v_mediatype_title)&&void 0!==m?m:"Lo\u1ea1i t\u1eadp tin")}}function I(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",43),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.clearSearch(D))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&T){const O=e.oxw(2);e.xp6(4),e.Oqu(O.filter.search)}}const A=function(){return[]};function C(T,W){if(1&T&&(e.TgZ(0,"div",30)(1,"div",31)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,t,7,1,"div",33),e.YNc(6,o,7,1,"div",33),e.YNc(7,L,7,1,"div",33),e.YNc(8,w,7,1,"div",33),e.YNc(9,x,7,1,"div",34),e.YNc(10,I,7,1,"div",33),e.qZA()(),e._UZ(11,"hr")),2&T){const O=e.oxw();let m;e.xp6(3),e.hij("B\u1ed9 l\u1ecdc \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng (",O.counter(),")"),e.xp6(2),e.Q6J("ngIf",O.filter.topic_id),e.xp6(1),e.Q6J("ngIf",O.filter.category_id),e.xp6(1),e.Q6J("ngIf",O.filter.tags_id),e.xp6(1),e.Q6J("ngIf",O.filter.v_mediatype),e.xp6(1),e.Q6J("ngForOf",null!==(m=O.filter.v_mediatypes)&&void 0!==m?m:e.DdM(7,A)),e.xp6(1),e.Q6J("ngIf",O.filter.search)}}function v(T,W){if(1&T){const O=e.EpF();e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-checkbox",47),e.NdJ("ionChange",function(D){e.CHM(O);const R=e.oxw(2);return e.KtG(R.changeMediaType(D))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.BQk()}if(2&T){const O=W.$implicit,m=e.oxw(2);e.xp6(2),e.Q6J("value",O.lookup_value)("checked",m.checkedMediaType(O.lookup_value)),e.xp6(2),e.Oqu(O.lookup_title)}}function f(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.NdJ("ionChange",function(D){e.CHM(O);const R=e.oxw();return e.KtG(R.changeMediaType(D))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"T\u1ea5t c\u1ea3"),e.qZA()(),e.YNc(5,v,5,3,"ng-container",46),e.qZA()}if(2&T){const O=e.oxw();e.xp6(2),e.Q6J("value",0),e.xp6(3),e.Q6J("ngForOf",O.v_mediatypes)}}function s(T,W){if(1&T){const O=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){const R=e.CHM(O).$implicit,Q=e.oxw(2);return e.KtG(Q.applyFilterTags({tags_id:R.tags_id,tags_key:R.tags_key}))}),e._uU(2),e.qZA(),e.BQk()}if(2&T){const O=W.$implicit,m=e.oxw(2);e.xp6(1),e.Tol(O.tags_id==m.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.uIk("data-id",O.tags_id),e.xp6(1),e.Oqu(O.tags_key)}}function r(T,W){if(1&T&&(e.TgZ(0,"div",48),e.YNc(1,s,3,4,"ng-container",46),e.qZA()),2&T){const O=e.oxw();e.xp6(1),e.Q6J("ngForOf",O.filterTags(O.tagss))}}const E=function(T){return{$implicit:T}};function M(T,W){if(1&T&&e.GkF(0,52),2&T){const O=W.$implicit;e.oxw(2);const m=e.MAs(31);e.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",e.VKq(2,E,O))}}function l(T,W){if(1&T&&(e.TgZ(0,"div",50)(1,"ion-list",44)(2,"ul"),e.YNc(3,M,1,4,"ng-container",51),e.qZA()()()),2&T){const O=e.oxw();e.xp6(3),e.Q6J("ngForOf",O.filterTopic(O.topics))}}function _(T,W){1&T&&e._UZ(0,"ion-icon",59)}function h(T,W){1&T&&e._UZ(0,"ion-icon",60)}function K(T,W){if(1&T&&e.GkF(0,52),2&T){const O=W.$implicit;e.oxw(3);const m=e.MAs(31);e.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",e.VKq(2,E,O))}}function k(T,W){if(1&T&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,K,1,4,"ng-container",51),e.qZA(),e.BQk()),2&T){const O=e.oxw().$implicit,m=e.oxw();e.xp6(2),e.Q6J("ngForOf",m.filterTopic(m.topics,O.topic_id))}}function g(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const R=e.CHM(O).$implicit,Q=e.oxw();return e.KtG(Q.applyFilterTopic({topic_id:R.topic_id,topic_title:R.topic_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(D){const Q=e.CHM(O).$implicit,z=e.oxw();return e.KtG(z.expandTopic(D,Q.topic_id,Q.isexpanded))}),e.YNc(3,_,1,0,"ion-icon",55),e.YNc(4,h,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,k,3,1,"ng-container",58),e.qZA()}if(2&T){const O=W.$implicit,m=e.oxw();e.xp6(1),e.Tol(O.topic_id==m.filter.topic_id?"actived":""),e.xp6(1),e.uIk("style",O.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!O.isexpanded),e.xp6(1),e.Q6J("ngIf",O.isexpanded),e.xp6(1),e.Q6J("title",O.topic_title),e.xp6(1),e.Oqu(O.topic_title),e.xp6(1),e.Q6J("ngIf",O.isexpanded)}}function p(T,W){if(1&T&&e.GkF(0,52),2&T){const O=W.$implicit;e.oxw(2);const m=e.MAs(35);e.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",e.VKq(2,E,O))}}function U(T,W){if(1&T&&(e.TgZ(0,"div",61)(1,"ion-list",44)(2,"ul"),e.YNc(3,p,1,4,"ng-container",51),e.qZA()()()),2&T){const O=e.oxw();e.xp6(3),e.Q6J("ngForOf",O.filterCategory(O.categorys))}}function b(T,W){1&T&&e._UZ(0,"ion-icon",59)}function y(T,W){1&T&&e._UZ(0,"ion-icon",60)}function P(T,W){if(1&T&&e.GkF(0,52),2&T){const O=W.$implicit;e.oxw(3);const m=e.MAs(35);e.Q6J("ngTemplateOutlet",m)("ngTemplateOutletContext",e.VKq(2,E,O))}}function G(T,W){if(1&T&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,P,1,4,"ng-container",51),e.qZA(),e.BQk()),2&T){const O=e.oxw().$implicit,m=e.oxw();e.xp6(2),e.Q6J("ngForOf",m.filterCategory(m.categorys,O.category_id))}}function H(T,W){if(1&T){const O=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const R=e.CHM(O).$implicit,Q=e.oxw();return e.KtG(Q.applyFilterCategory({category_id:R.category_id,category_title:R.category_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(D){const Q=e.CHM(O).$implicit,z=e.oxw();return e.KtG(z.expandCategory(D,Q.category_id,Q.isexpanded))}),e.YNc(3,b,1,0,"ion-icon",55),e.YNc(4,y,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,G,3,1,"ng-container",58),e.qZA()}if(2&T){const O=W.$implicit,m=e.oxw();e.xp6(1),e.Tol(O.category_id==m.filter.category_id?"actived":""),e.xp6(1),e.uIk("style",O.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!O.isexpanded),e.xp6(1),e.Q6J("ngIf",O.isexpanded),e.xp6(1),e.Q6J("title",O.category_title),e.xp6(1),e.Oqu(O.category_title),e.xp6(1),e.Q6J("ngIf",O.isexpanded)}}let j=(()=>{var T;class W{constructor(m){this.modalController=m,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var m;null!==(m=this.filter.v_mediatypes)&&void 0!==m&&m.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,N.D)({params:{lookup_key:"v_mediatype"},callback:D=>{this.v_mediatypes=D||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let m=0;return this.filter.search&&(m+=1),this.filter.topic_id&&(m+=1),this.filter.category_id&&(m+=1),this.filter.tags_id&&(m+=1),this.filter.v_mediatypes&&(m+=this.filter.v_mediatypes.length),m}changeMediaType(m){let{value:D,checked:R}=m.detail;if(0==D)return void(this.filter.v_mediatypes=R?this.v_mediatypes.map(S=>({v_mediatype:S.lookup_value,v_mediatype_title:S.lookup_title})):[]);let Q=this.v_mediatypes.find(S=>S.lookup_value==D);var z;R?this.filter.v_mediatypes?this.filter.v_mediatypes.find(S=>S.v_mediatype==D)||this.filter.v_mediatypes.push({v_mediatype:null==Q?void 0:Q.lookup_value,v_mediatype_title:null==Q?void 0:Q.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==Q?void 0:Q.lookup_value,v_mediatype_title:null==Q?void 0:Q.lookup_title}]:this.filter.v_mediatypes=null===(z=this.filter.v_mediatypes)||void 0===z?void 0:z.filter(S=>S.v_mediatype!=D)}checkedMediaType(m){var D;return!(null===(D=this.filter.v_mediatypes)||void 0===D||!D.find(R=>R.v_mediatype==m))}clearSearch(m){Object.assign(this.filter,{search:null})}clearFilterMediaType(m,D){this.changeMediaType({detail:{value:D,checked:!1}})}refreshDataTags(m){this.loadTags(void 0,m,!0)}loadTags(m,D,R){var Q;(0,Y.GX)({params:{userid:null===(Q=this.user)||void 0===Q?void 0:Q.userid,tags_pid:m,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:z=>{var S,V;this.tagss=R?null!==(S=null==z?void 0:z.tags)&&void 0!==S?S:[]:this.tagss.concat(null!==(V=null==z?void 0:z.tags)&&void 0!==V?V:[]),D&&D()}})}filterTags(m,D){return m.filter(D?R=>R.tags_pid==D:R=>null==R.tags_pid||0==R.tags_pid)}expandTags(m,D,R){m.preventDefault(),m.stopPropagation(),this.tagss.filter(Q=>Q.tags_id==D).forEach(Q=>{Q.isexpanded=!R,Q.isloadedchild||(Q.isloadedchild=!0,this.loadTags(Q.tags_id))})}applyFilterTags(m){Object.assign(this.filter,this.filter.tags_id==m.tags_id?{tags_id:null,tags_key:null}:m)}clearFilterTags(m){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(m){this.loadTopic(void 0,m,!0)}loadTopic(m,D,R){var Q;(0,i.w)({params:{userid:null===(Q=this.user)||void 0===Q?void 0:Q.userid,topic_pid:m,active:!0,page:1,limit:-1},callback:z=>{this.topics=R?null!=z?z:[]:this.topics.concat(null!=z?z:[]),D&&D()}})}filterTopic(m,D){return m.filter(D?R=>R.topic_pid==D:R=>null==R.topic_pid||0==R.topic_pid)}expandTopic(m,D,R){m.preventDefault(),m.stopPropagation(),this.topics.filter(Q=>Q.topic_id==D).forEach(Q=>{Q.isexpanded=!R,Q.isloadedchild||(Q.isloadedchild=!0,this.loadTopic(Q.topic_id))})}applyFilterTopic(m){Object.assign(this.filter,this.filter.topic_id==m.topic_id?{topic_id:null,topic_title:null}:m)}clearFilterTopic(m){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(m){this.loadCategory(void 0,m,!0)}loadCategory(m,D,R){var Q;(0,Z.b)({params:{userid:null===(Q=this.user)||void 0===Q?void 0:Q.userid,category_pid:m,active:!0,page:1,limit:-1},callback:z=>{this.categorys=R?null!=z?z:[]:this.categorys.concat(null!=z?z:[]),D&&D()}})}filterCategory(m,D){return m.filter(D?R=>R.category_pid==D:R=>null==R.category_pid||0==R.category_pid)}expandCategory(m,D,R){m.preventDefault(),m.stopPropagation(),this.categorys.filter(Q=>Q.category_id==D).forEach(Q=>{Q.isexpanded=!R,Q.isloadedchild||(Q.isloadedchild=!0,this.loadCategory(Q.category_id))})}applyFilterCategory(m){Object.assign(this.filter,this.filter.category_id==m.category_id?{category_id:null,category_title:null}:m)}clearFilterCategory(m){Object.assign(this.filter,{category_id:null,category_title:null})}}return(T=W).\u0275fac=function(m){return new(m||T)(e.Y36(u.IN))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:36,vars:7,consts:[["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../../assets/icon-svg/arrow-right.svg"],["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../../assets/icon-svg/dashboard/category.svg"],["src","../../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"value","ionChange"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"value","checked","ionChange"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(m,D){1&m&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\u1ed9 l\u1ecdc"),e.qZA(),e.TgZ(4,"ion-label",1),e.NdJ("click",function(){return D.clean()}),e._uU(5,"X\xf3a t\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return D.close()}),e._UZ(8,"ion-icon",4),e.qZA()()()(),e._UZ(9,"hr",5),e.TgZ(10,"ion-content",6),e.YNc(11,F,1,1,"ng-container",7),e.TgZ(12,"ion-accordion-group",8),e.YNc(13,J,6,1,"ion-accordion",9),e.YNc(14,n,6,1,"ion-accordion",10),e.YNc(15,d,6,1,"ion-accordion",11),e.YNc(16,a,6,1,"ion-accordion",12),e.qZA()(),e.TgZ(17,"ion-footer")(18,"ion-item",13),e.NdJ("click",function(){return D.apply()}),e.TgZ(19,"ion-label",14),e._uU(20,"\xc1p d\u1ee5ng"),e.qZA(),e._UZ(21,"ion-icon",15),e.qZA()(),e.YNc(22,C,12,8,"ng-template",null,16,e.W1O),e.YNc(24,f,6,2,"ng-template",null,17,e.W1O),e.YNc(26,r,2,1,"ng-template",null,18,e.W1O),e.YNc(28,l,4,1,"ng-template",null,19,e.W1O),e.YNc(30,g,8,8,"ng-template",null,20,e.W1O),e.YNc(32,U,4,1,"ng-template",null,21,e.W1O),e.YNc(34,H,8,8,"ng-template",null,22,e.W1O)),2&m&&(e.xp6(11),e.Q6J("ngIf",D.filter.topic_id||D.filter.category_id||D.filter.tags_id||D.filter.v_mediatype||(null==D.filter.v_mediatypes?null:D.filter.v_mediatypes.length)||D.filter.search),e.xp6(1),e.Q6J("multiple",!0)("value",D.accordionValue),e.xp6(1),e.Q6J("ngIf",D.v_mediatypes.length),e.xp6(1),e.Q6J("ngIf",D.tagss.length),e.xp6(1),e.Q6J("ngIf",D.topics.length),e.xp6(1),e.Q6J("ngIf",D.categorys.length))},dependencies:[B.sg,B.O5,B.tP,u.We,u.eh,u.YG,u.Sm,u.nz,u.W2,u.fr,u.Gu,u.gu,u.Ie,u.Q$,u.q_,u.wd,u.sr,u.w],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),W})()},9403:(q,$,c)=>{"use strict";c.d($,{l:()=>w});var Z=c(5861),N=c(1461),Y=c(3377),i=c(9468),e=c(3536),u=c(6814);const B=function(x){return{$implicit:x}};function F(x,I){if(1&x&&i.GkF(0,3),2&x){const A=I.$implicit;i.oxw();const C=i.MAs(4);i.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",i.VKq(2,B,A))}}function J(x,I){1&x&&i._UZ(0,"ion-icon",10)}function n(x,I){1&x&&i._UZ(0,"ion-icon",11)}function d(x,I){if(1&x&&(i.TgZ(0,"ion-badge",12),i._uU(1),i.qZA()),2&x){const A=i.oxw().$implicit;i.xp6(1),i.Oqu(A.total_board)}}function a(x,I){if(1&x&&(i.TgZ(0,"ion-badge",12),i._uU(1),i.qZA()),2&x){const A=i.oxw().$implicit;i.xp6(1),i.Oqu(A.total_media)}}function t(x,I){if(1&x&&i.GkF(0,3),2&x){const A=I.$implicit;i.oxw(3);const C=i.MAs(4);i.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",i.VKq(2,B,A))}}function o(x,I){if(1&x&&(i.ynx(0),i.TgZ(1,"ul"),i.YNc(2,t,1,4,"ng-container",1),i.qZA(),i.BQk()),2&x){const A=i.oxw().$implicit,C=i.oxw();i.xp6(2),i.Q6J("ngForOf",C.filterCategory(C.categorys,A.category_id))}}function L(x,I){if(1&x){const A=i.EpF();i.TgZ(0,"li")(1,"ion-item",4),i.NdJ("click",function(){const f=i.CHM(A).$implicit,s=i.oxw();return i.KtG(s.filterChange(f.category_id))}),i.TgZ(2,"ion-button",5),i.NdJ("click",function(v){const s=i.CHM(A).$implicit,r=i.oxw();return i.KtG(r.expandCategory(v,s.category_id,s.isexpanded))}),i.YNc(3,J,1,0,"ion-icon",6),i.YNc(4,n,1,0,"ion-icon",7),i.qZA(),i.TgZ(5,"ion-label"),i._uU(6),i.qZA(),i.YNc(7,d,2,1,"ion-badge",8),i.YNc(8,a,2,1,"ion-badge",8),i.qZA(),i.YNc(9,o,3,1,"ng-container",9),i.qZA()}if(2&x){const A=I.$implicit,C=i.oxw();i.xp6(1),i.uIk("color",A.category_id==C.selectedId?"primary":""),i.xp6(1),i.uIk("style",A.ishaschild?"visibility:unset":"visibility:hidden",i.Ckj),i.xp6(1),i.Q6J("ngIf",!A.isexpanded),i.xp6(1),i.Q6J("ngIf",A.isexpanded),i.xp6(2),i.Oqu(A.category_title),i.xp6(1),i.Q6J("ngIf","board"==C.filterFor&&A.total_board),i.xp6(1),i.Q6J("ngIf","media"==C.filterFor&&A.total_media),i.xp6(1),i.Q6J("ngIf",A.isexpanded)}}let w=(()=>{var x;class I{constructor(C){this.popoverController=C,this.selectedId=0,this.categorys=[]}ngOnInit(){var C=this;(0,Z.Z)(function*(){C.user=yield(0,Y.iA)(),C.loadCategory()})()}loadCategory(C){var v;(0,N.b)({params:{userid:null===(v=this.user)||void 0===v?void 0:v.userid,category_pid:C,active:!0,page:1,limit:-1},callback:f=>{this.categorys=this.categorys.concat(f||[])}})}filterCategory(C,v){return C.filter(v?f=>f.category_pid==v:f=>null==f.category_pid||0==f.category_pid)}expandCategory(C,v,f){C.preventDefault(),C.stopPropagation(),this.categorys.filter(s=>s.category_id==v).forEach(s=>{s.isexpanded=!f,s.isloadedchild||(s.isloadedchild=!0,this.loadCategory(s.category_id))})}filterChange(C){this.popoverController.dismiss(this.categorys.find(v=>v.category_id==C),"confirm")}}return(x=I).\u0275fac=function(C){return new(C||x)(i.Y36(e.Dh))},x.\u0275cmp=i.Xpm({type:x,selectors:[["app-popover-category"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:5,vars:1,consts:[[1,"menu-category","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["treeNode",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","medium"]],template:function(C,v){1&C&&(i.TgZ(0,"div",0)(1,"ul"),i.YNc(2,F,1,4,"ng-container",1),i.qZA()(),i.YNc(3,L,10,8,"ng-template",null,2,i.W1O)),2&C&&(i.xp6(2),i.Q6J("ngForOf",v.filterCategory(v.categorys)))},dependencies:[u.sg,u.O5,u.tP,e.yp,e.YG,e.gu,e.Ie,e.Q$],styles:[".menu-category[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),I})()},8262:(q,$,c)=>{"use strict";c.d($,{W:()=>Y});var Z=c(9468),N=c(3536);let Y=(()=>{var i;class e{constructor(B){this.popoverController=B}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(i=e).\u0275fac=function(B){return new(B||i)(Z.Y36(N.Dh))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId"},decls:9,vars:0,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(B,F){1&B&&(Z.TgZ(0,"div",0)(1,"div",1)(2,"small"),Z._uU(3,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),Z.qZA()(),Z.TgZ(4,"div",2)(5,"button",3),Z.NdJ("click",function(){return F.cancel()}),Z._uU(6,"\u0110\xf3ng"),Z.qZA(),Z.TgZ(7,"button",4),Z.NdJ("click",function(){return F.confirm()}),Z._uU(8,"X\xf3a"),Z.qZA()()())},styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),e})()},5938:(q,$,c)=>{"use strict";c.d($,{a:()=>w});var Z=c(5861),N=c(4041),Y=c(3377),i=c(9468),e=c(3536),u=c(6814);const B=function(x){return{$implicit:x}};function F(x,I){if(1&x&&i.GkF(0,3),2&x){const A=I.$implicit;i.oxw();const C=i.MAs(4);i.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",i.VKq(2,B,A))}}function J(x,I){1&x&&i._UZ(0,"ion-icon",10)}function n(x,I){1&x&&i._UZ(0,"ion-icon",11)}function d(x,I){if(1&x&&(i.TgZ(0,"ion-badge",12),i._uU(1),i.qZA()),2&x){const A=i.oxw().$implicit;i.xp6(1),i.Oqu(A.total_board)}}function a(x,I){if(1&x&&(i.TgZ(0,"ion-badge",12),i._uU(1),i.qZA()),2&x){const A=i.oxw().$implicit;i.xp6(1),i.Oqu(A.total_media)}}function t(x,I){if(1&x&&i.GkF(0,3),2&x){const A=I.$implicit;i.oxw(3);const C=i.MAs(4);i.Q6J("ngTemplateOutlet",C)("ngTemplateOutletContext",i.VKq(2,B,A))}}function o(x,I){if(1&x&&(i.ynx(0),i.TgZ(1,"ul"),i.YNc(2,t,1,4,"ng-container",1),i.qZA(),i.BQk()),2&x){const A=i.oxw().$implicit,C=i.oxw();i.xp6(2),i.Q6J("ngForOf",C.filterTopic(C.topics,A.topic_id))}}function L(x,I){if(1&x){const A=i.EpF();i.TgZ(0,"li")(1,"ion-item",4),i.NdJ("click",function(){const f=i.CHM(A).$implicit,s=i.oxw();return i.KtG(s.filterChange(f.topic_id))}),i.TgZ(2,"ion-button",5),i.NdJ("click",function(v){const s=i.CHM(A).$implicit,r=i.oxw();return i.KtG(r.expandTopic(v,s.topic_id,s.isexpanded))}),i.YNc(3,J,1,0,"ion-icon",6),i.YNc(4,n,1,0,"ion-icon",7),i.qZA(),i.TgZ(5,"ion-label"),i._uU(6),i.qZA(),i.YNc(7,d,2,1,"ion-badge",8),i.YNc(8,a,2,1,"ion-badge",8),i.qZA(),i.YNc(9,o,3,1,"ng-container",9),i.qZA()}if(2&x){const A=I.$implicit,C=i.oxw();i.xp6(1),i.uIk("color",A.topic_id==C.selectedId?"primary":""),i.xp6(1),i.uIk("style",A.ishaschild?"visibility:unset":"visibility:hidden",i.Ckj),i.xp6(1),i.Q6J("ngIf",!A.isexpanded),i.xp6(1),i.Q6J("ngIf",A.isexpanded),i.xp6(2),i.Oqu(A.topic_title),i.xp6(1),i.Q6J("ngIf","board"==C.filterFor&&A.total_board),i.xp6(1),i.Q6J("ngIf","media"==C.filterFor&&A.total_media),i.xp6(1),i.Q6J("ngIf",A.isexpanded)}}let w=(()=>{var x;class I{constructor(C){this.popoverController=C,this.selectedId=0,this.topics=[]}ngOnInit(){var C=this;(0,Z.Z)(function*(){C.user=yield(0,Y.iA)(),C.loadTopic()})()}loadTopic(C){var v;(0,N.w)({params:{userid:null===(v=this.user)||void 0===v?void 0:v.userid,topic_pid:C,active:!0,page:1,limit:-1},callback:f=>{this.topics=this.topics.concat(f||[])}})}filterTopic(C,v){return C.filter(v?f=>f.topic_pid==v:f=>null==f.topic_pid||0==f.topic_pid)}expandTopic(C,v,f){C.preventDefault(),C.stopPropagation(),this.topics.filter(s=>s.topic_id==v).forEach(s=>{s.isexpanded=!f,s.isloadedchild||(s.isloadedchild=!0,this.loadTopic(s.topic_id))})}filterChange(C){this.popoverController.dismiss(this.topics.find(v=>v.topic_id==C),"confirm")}}return(x=I).\u0275fac=function(C){return new(C||x)(i.Y36(e.Dh))},x.\u0275cmp=i.Xpm({type:x,selectors:[["app-popover-topic"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:5,vars:1,consts:[[1,"menu-topic","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["treeNode",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","medium"]],template:function(C,v){1&C&&(i.TgZ(0,"div",0)(1,"ul"),i.YNc(2,F,1,4,"ng-container",1),i.qZA()(),i.YNc(3,L,10,8,"ng-template",null,2,i.W1O)),2&C&&(i.xp6(2),i.Q6J("ngForOf",v.filterTopic(v.topics)))},dependencies:[u.sg,u.O5,u.tP,e.yp,e.YG,e.gu,e.Ie,e.Q$],styles:[".menu-topic[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),I})()},5511:(q,$,c)=>{"use strict";c.d($,{R:()=>u});var Z=c(5861),N=c(3377),Y=c(2695),i=c(4459);const u=function(){var B=(0,Z.Z)(function*(F){let J=null!=F?F:yield(0,i.H0)(),n=yield(0,N.iA)();return(!J.madonvi||!n.userid||J.madonvi!=(null==n?void 0:n.madonvi))&&window.location.replace(Y.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),n});return function(J){return B.apply(this,arguments)}}()},3731:(q,$,c)=>{"use strict";c.d($,{T6:()=>n,ds:()=>F,zq:()=>J});var Z=c(8107),N=c.n(Z),Y=c(4981),i=c(8530),e=c(3589),u=c(6623);const B=(d,a)=>{var t=document.createElement("input");t.type="file",t.accept=d.accept,t.style.display="none",t.style.visibility="hidden",t.addEventListener("change",o=>{var L;o.preventDefault();let w=(null===(L=o.target)||void 0===L?void 0:L.files)||[];w.length>0&&a(w),document.body.removeChild(t)}),document.body.appendChild(t),t.click()},F=(d,a,t)=>{let o=null!=a?a:L=>console.log(L);B({accept:".lvb"},L=>{(0,e.z)({loading:t,params:{file:L[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:w=>{var x,I;0==(null==w?void 0:w.ReturnCode)?(x=x=>{var I;d.board_id?(0,i.UK)({loading:t,params:{userid:d.userid,board_id:d.board_id,filepath:w.path+"/"+(null===(I=w.file)||void 0===I?void 0:I.name)},callback:A=>{A&&(A.id=d.board_id),o(A)}}):o(x)},d.board_id?x():(0,i.Ux)({loading:t,params:{userid:d.userid,board_title:(null===(I=w.name)||void 0===I?void 0:I.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:A=>{0==(null==A?void 0:A.returncode)&&(d.board_id=null==A?void 0:A.id),x(A)}})):o({returncode:null==w?void 0:w.ReturnCode,returnmsg:null==w?void 0:w.ReturnName})}})})},J=(d,a)=>{(0,i.gK)({params:{userid:d.userid,board_id:d.board_id},callback:(t,o)=>{0==(null==t?void 0:t.returncode)&&N()(`${null==o?void 0:o.readfileuploadurl}${null==t?void 0:t.token}`),a&&a(t)},loading:t=>{}})},n=(d,a)=>{let t=null!=a?a:o=>console.log(o);B({accept:".json, application/json"},o=>{var L=new FileReader;L.onload=()=>{if(L.result){let x,w=JSON.parse(L.result.toString());w&&!w.modules?x=(0,u.w)(w):"icdtV2"==(null==w?void 0:w.modules)&&(x=w),x&&(Y.icdt.dataSource=x,Y.icdt.data.openSlide())}t()},L.readAsText(o[0])})}},8107:function(q,$){var c,N;void 0!==(N="function"==typeof(c=function(){return function Y(i,e,u){var w,x,B=window,F="application/octet-stream",J=u||F,n=i,d=!e&&!u&&n,a=document.createElement("a"),t=function(r){return String(r)},o=B.Blob||B.MozBlob||B.WebKitBlob||t,L=e||"download";if(o=o.call?o.bind(B):Blob,"true"===String(this)&&(J=(n=[n,J])[0],n=n[1]),d&&d.length<2048&&(L=d.split("/").pop().split("?")[0],a.href=d,-1!==a.href.indexOf(d))){var I=new XMLHttpRequest;return I.open("GET",d,!0),I.responseType="blob",I.onload=function(r){Y(r.target.response,L,F)},setTimeout(function(){I.send()},0),I}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(n)){if(!(n.length>2096103.424&&o!==t))return navigator.msSaveBlob?navigator.msSaveBlob(f(n),L):s(n);J=(n=f(n)).type||F}else if(/([\x80-\xff])/.test(n)){for(var A=0,C=new Uint8Array(n.length),v=C.length;A<v;++A)C[A]=n.charCodeAt(A);n=new o([C],{type:J})}function f(r){for(var E=r.split(/[:;,]/),M=E[1],_=("base64"==E[2]?atob:decodeURIComponent)(E.pop()),h=_.length,K=0,k=new Uint8Array(h);K<h;++K)k[K]=_.charCodeAt(K);return new o([k],{type:M})}function s(r,E){if("download"in a)return a.href=r,a.setAttribute("download",L),a.className="download-js-link",a.innerHTML="downloading...",a.style.display="none",document.body.appendChild(a),setTimeout(function(){a.click(),document.body.removeChild(a),!0===E&&setTimeout(function(){B.URL.revokeObjectURL(a.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(r)&&(r="data:"+r.replace(/^data:([\w\/\-\+]+)/,F)),window.open(r)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=r),!0;var M=document.createElement("iframe");document.body.appendChild(M),!E&&/^data:/.test(r)&&(r="data:"+r.replace(/^data:([\w\/\-\+]+)/,F)),M.src=r,setTimeout(function(){document.body.removeChild(M)},333)}if(w=n instanceof o?n:new o([n],{type:J}),navigator.msSaveBlob)return navigator.msSaveBlob(w,L);if(B.URL)s(B.URL.createObjectURL(w),!0);else{if("string"==typeof w||w.constructor===t)try{return s("data:"+J+";base64,"+B.btoa(w))}catch{return s("data:"+J+","+encodeURIComponent(w))}(x=new FileReader).onload=function(r){s(this.result)},x.readAsDataURL(w)}return!0}})?c.apply($,[]):c)&&(q.exports=N)}}]);