"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8688],{7090:(D,T,i)=>{i.d(T,{GW:()=>c,T6:()=>y,rM:()=>B});var u=i(4459);function c(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,u.cd)({url:"api/Board/Search",params:{getby:e.params.userid||null,board_id:e.params.board_id||null,board_ids:e.params.board_ids||null,board_title:e.params.board_title||null,size_width:e.params.size_width||null,size_height:e.params.size_height||null,topic_id:e.params.topic_id||null,category_id:e.params.category_id||null,createdby:e.params.createdby||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading})}function B(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,u.cd)({url:"api/Board/SearchTemplate",params:{getby:e.params.userid||null,board_id:e.params.board_id||null,board_title:e.params.board_title||null,size_width:e.params.size_width||null,size_height:e.params.size_height||null,topic_id:e.params.topic_id||null,category_id:e.params.category_id||null,createdby:e.params.createdby||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading})}function y(e){e.params=e.params||{},(0,u.cd)({url:"api/Board/Detail",params:{getby:e.params.userid||null,board_id:e.params.board_id||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading})}},8530:(D,T,i)=>{i.d(T,{Dc:()=>M,Ir:()=>p,JO:()=>O,KO:()=>k,UK:()=>o,Ux:()=>y,Yx:()=>r,Z6:()=>v,gK:()=>P,gj:()=>C,mD:()=>s});var u=i(5861),c=i(4459),B=i(1862);function y(a){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/AddUpdate",params:{board_id:a.params.board_id||null,board_title:a.params.board_title||null,board_description:a.params.board_description||null,board_content:a.params.board_content||null,cover:a.params.cover||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}function v(a){return e.apply(this,arguments)}function e(){return(e=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/CopyBoard",params:{board_id:a.params.board_id||null,board_title:a.params.board_title||null,board_description:a.params.board_description||null,board_content:a.params.board_content||null,cover:a.params.cover||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}function s(a){return U.apply(this,arguments)}function U(){return(U=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.tD)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,url:"api/BoardFile2/DeleteBoard",params:{deleteby:a.params.userid||null,board_id:a.params.board_id||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)}}))})).apply(this,arguments)}function p(a){return l.apply(this,arguments)}function l(){return(l=(0,u.Z)(function*(a){var t,n,h;let x=yield(0,c.H0)();x.madonvi&&(a.params=a.params||{},(0,B.ly)(`${null!==(t=x.readfileuploadurl)&&void 0!==t?t:""}${null!==(n=x.boardpathv1)&&void 0!==n?n:""}${a.params.board_id}/content.json`,"content.json","application/json",null!==(h=a.callback)&&void 0!==h?h:R=>console.log(R)))})).apply(this,arguments)}function r(a){return g.apply(this,arguments)}function g(){return(g=(0,u.Z)(function*(a){var t,n,h;let x=yield(0,c.H0)();x.madonvi&&(a.params=a.params||{},(0,B.ly)(`${null!==(t=x.readfileuploadurl)&&void 0!==t?t:""}${null!==(n=x.boardpath)&&void 0!==n?n:""}${a.params.board_id}/content.json`,"content.json","application/json",null!==(h=a.callback)&&void 0!==h?h:R=>console.log(R)))})).apply(this,arguments)}function C(a){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)(function*(a){var t,n,h;let x=yield(0,c.H0)();x.madonvi&&(a.params=a.params||{},(0,B.ly)(`${null!==(t=x.readfileuploadurl)&&void 0!==t?t:""}${null!==(n=x.boardpath)&&void 0!==n?n:""}${a.params.board_id}/setting.json`,"setting.json","application/json",null!==(h=a.callback)&&void 0!==h?h:R=>console.log(R)))})).apply(this,arguments)}function O(a){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/UpdateBoardCover",params:{board_id:a.params.board_id||null,filestring:a.params.filestring||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)}}))})).apply(this,arguments)}function k(a){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/UpdateBoardContent",params:{board_id:a.params.board_id||null,filestring:a.params.filestring||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}function M(a){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,url:"api/BoardFile2/UpdateBoardSetting",params:{board_id:a.params.board_id||null,filestring:a.params.filestring||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}function o(a){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/ImportLvb",params:{board_id:a.params.board_id||null,filepath:a.params.filepath||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}function P(a){return F.apply(this,arguments)}function F(){return(F=(0,u.Z)(function*(a){let t=yield(0,c.H0)();t.madonvi&&(a.params=a.params||{},(0,c.T1)({api_url:t.apifilereaderurl,api_auth:t.apifilereaderauth,path:"api/BoardFile2/ExportLvb",params:{board_id:a.params.board_id||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null,t)},error:n=>{"function"==typeof a.callback&&a.callback(null),console.error(n)},loading:a.loading}))})).apply(this,arguments)}},3377:(D,T,i)=>{i.d(T,{Kr:()=>v,LE:()=>s,iA:()=>w,lL:()=>e});var u=i(5861),c=i(2014),B=i(4459);const y=new c.K({name:"_userDB",driverOrder:[c.N.IndexedDB,c.N.LocalStorage]}),w=function(){var p=(0,u.Z)(function*(l){yield y.create();try{var r=(yield y.get("user-local"))||{};return"function"==typeof(null==l?void 0:l.callback)&&l.callback(Object.assign({},r||{})),r}catch(g){"function"==typeof(null==l?void 0:l.callback)&&l.callback(),console.error(g)}return{}});return function(r){return p.apply(this,arguments)}}(),v=function(){var p=(0,u.Z)(function*(l){yield y.create(),l.params=l.params||{};try{var r=Object.assign({},l.params);yield y.set("user-local",r),"function"==typeof l.callback&&l.callback(Object.assign({},r||{}))}catch(g){"function"==typeof l.callback&&l.callback(),console.error(g)}});return function(r){return p.apply(this,arguments)}}(),e=function(){var p=(0,u.Z)(function*(l){return l&&(l.params={}),v(null!=l?l:{})});return function(r){return p.apply(this,arguments)}}(),s=function(){var p=(0,u.Z)(function*(l,r){let g=yield(0,B.H0)();if(r){let C=[];l.params.profilephoto&&C.push(new Promise((b,O)=>{let _=new Image;_.onload=()=>{l.params.url_profilephoto=_.src,b(1)},_.onerror=()=>{l.params.url_profilephoto="assets/image/user-avatar-default.png",b(0)},_.src=g.readfileuploadurl+l.params.profilephoto})),l.params.banner&&C.push(new Promise((b,O)=>{let _=new Image;_.onload=()=>{l.params.url_banner=_.src,b(1)},_.onerror=()=>{l.params.url_banner="assets/image/user-banner-default.png",b(0)},_.src=g.readfileuploadurl+l.params.banner})),C.length>0?Promise.all(C).then(()=>{v(l)}):v(l)}else w({callback:C=>{if(C){let b=[];l.params.profilephoto&&b.push(new Promise((O,_)=>{let k=new Image;k.onload=()=>{l.params.url_profilephoto=k.src,O(1)},k.onerror=()=>{l.params.url_profilephoto="assets/image/user-avatar-default.png",O(0)},k.src=g.readfileuploadurl+l.params.profilephoto})),l.params.banner&&b.push(new Promise((O,_)=>{let k=new Image;k.onload=()=>{l.params.url_banner=k.src,O(1)},k.onerror=()=>{l.params.url_banner="assets/image/user-banner-default.png",O(0)},k.src=g.readfileuploadurl+l.params.banner})),b.length>0?Promise.all(b).then(()=>{v({params:Object.assign({},C,l.params),callback:l.callback})}):v({params:Object.assign({},C,l.params),callback:l.callback})}else"function"==typeof l.callback&&l.callback()}})});return function(r,g){return p.apply(this,arguments)}}()},8688:(D,T,i)=>{i.r(T),i.d(T,{ViewerPageModule:()=>k});var u=i(6814),c=i(95),B=i(3536),y=i(4487),w=i(5861),v=i(4981),e=i(4459),s=i(7090),U=i(8530),I=i(6623),p=i(1690),l=i(3377),r=i(9468),g=i(6593);function C(d,M){if(1&d){const m=r.EpF();r.ynx(0),r.TgZ(1,"div",15)(2,"ion-button",16),r.NdJ("click",function(){r.CHM(m);const f=r.oxw();return r.KtG(f.pageBack())}),r._UZ(3,"ion-img",17),r.qZA(),r.TgZ(4,"span"),r._uU(5),r.qZA(),r.TgZ(6,"ion-button",16),r.NdJ("click",function(){r.CHM(m);const f=r.oxw();return r.KtG(f.pageNext())}),r._UZ(7,"ion-img",18),r.qZA()(),r.BQk()}if(2&d){const m=r.oxw();r.xp6(2),r.Q6J("disabled",m.slideIdx<1),r.xp6(3),r.AsE("",m.slideIdx+1,"/",m.slideTotal,""),r.xp6(1),r.Q6J("disabled",m.slideIdx>=m.slideTotal-1)}}const O=[{path:"",component:(()=>{var d;class M{constructor(o,f,P){this.router=o,this.activatedRoute=f,this.titleService=P,this.b=0,this.slides=[],this.slideIdx=0,this.slideTotal=0,this.settings={},this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())}}ngOnInit(){var o=this;this.slideIdx=parseInt(this.activatedRoute.snapshot.queryParamMap.get("n")||"1")-1;let f=this.activatedRoute.snapshot.queryParamMap.get("b")||"";f?this.b=parseInt(f):window.location.replace("/"),v.icdt.container="#mainContainer",v.icdt.svg="#mainSvg",(0,w.Z)(function*(){v.icdt.config=yield(0,e.H0)(),o.user=yield(0,l.iA)(),o.refreshData()})()}refreshData(){var o,f;(0,s.T6)({params:{userid:null===(o=this.user)||void 0===o?void 0:o.userid,board_id:this.b},callback:P=>{var F;console.log(P),null!=P&&P.board_id?(this.titleService.setTitle(`${P.board_title}`),(0,U.Yx)({params:{userid:null===(F=this.user)||void 0===F?void 0:F.userid,board_id:this.b},callback:a=>{var t;let n;if(a&&!a.modules?n=(0,I.w)(a):"icdtV2"==(null==a?void 0:a.modules)&&(n=a),n)return p.$.data=n,p.$.changeSlide=(h,x,R,Z)=>{this.slideIdx=R,this.slideTotal=Z,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=p.$.slideTotal,void this.renderSlide();(0,U.Ir)({params:{userid:null===(t=this.user)||void 0===t?void 0:t.userid,board_id:this.b},callback:h=>{h&&(p.$.data=(0,I.w)(h),p.$.changeSlide=(x,R,Z,z)=>{this.slideIdx=Z,this.slideTotal=z,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=p.$.slideTotal,this.renderSlide())}})}})):window.location.replace("/")}}),(0,U.gj)({params:{board_id:this.b,userid:null===(f=this.user)||void 0===f?void 0:f.userid},callback:P=>{this.settings=P||{buttons:{paging:!0}}}})}renderSlide(){p.$.runSlide(this.slideIdx)}}return(d=M).\u0275fac=function(o){return new(o||d)(r.Y36(y.F0),r.Y36(y.gz),r.Y36(g.Dx))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-viewer"]],decls:16,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container",2,"overflow","auto"],["scroll-x","false","scroll-y","false"],["id","mainContainer",1,"svg-box"],["id","mainSvg",1,"viewer"],[1,"container-bottom"],[4,"ngIf"],[1,"container-right"],[1,"group-action-paging"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"disabled","click"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"]],template:function(o,f){1&o&&(r.TgZ(0,"ion-content",0)(1,"div",1),r._UZ(2,"div",2),r.TgZ(3,"div",3)(4,"div",4),r._UZ(5,"div",5),r.TgZ(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9)(11,"div",10),r.O4$(),r._UZ(12,"svg",11),r.qZA()()()(),r.kcU(),r.TgZ(13,"div",12),r.YNc(14,C,8,4,"ng-container",13),r.qZA()()(),r._UZ(15,"div",14),r.qZA()()()()),2&o&&(r.Q6J("fullscreen",!0),r.xp6(14),r.Q6J("ngIf",null==f.settings.buttons?null:f.settings.buttons.paging))},dependencies:[u.O5,B.YG,B.W2,B.Xz],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}"]}),M})()}];let _=(()=>{var d;class M{}return(d=M).\u0275fac=function(o){return new(o||d)},d.\u0275mod=r.oAB({type:d}),d.\u0275inj=r.cJS({imports:[y.Bz.forChild(O),y.Bz]}),M})(),k=(()=>{var d;class M{}return(d=M).\u0275fac=function(o){return new(o||d)},d.\u0275mod=r.oAB({type:d}),d.\u0275inj=r.cJS({imports:[u.ez,c.u5,B.Pc,_]}),M})()}}]);