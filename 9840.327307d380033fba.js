"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9840],{1461:(I,x,s)=>{s.d(x,{N:()=>b,b:()=>y});var M=s(4459);function b(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,M.cd)({url:"api/Category/Search",params:{category_id:e.params.category_id||null,category_title:e.params.category_title||null,createdby:e.params.createdby||null,level:e.params.level||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:_=>{"function"==typeof e.callback&&e.callback(_.data||null)},error:_=>{"function"==typeof e.callback&&e.callback(null),console.error(_)}})}function y(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,M.cd)({url:"api/Category/SearchTreeList",params:{getby:e.params.userid||null,category_id:e.params.category_id||null,category_pid:e.params.category_pid||null,category_title:e.params.category_title||null,active:e.params.active||null,topic_id:e.params.topic_id||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:_=>{"function"==typeof e.callback&&e.callback(_.data||null)},error:_=>{"function"==typeof e.callback&&e.callback(null),console.error(_)},loading:e.loading})}},203:(I,x,s)=>{s.d(x,{AY:()=>b,ef:()=>_,nC:()=>e,v9:()=>y});var M=s(4459);const b=r=>{var C,v,m,t;r.params=r.params||{},r.params.page=r.params.page||1,r.params.limit=r.params.limit||1,(0,M.cd)({url:"api/ProductPackage/Search",params:{getby:null!==(C=r.params.userid)&&void 0!==C?C:null,userid:null!==(v=r.params.userid)&&void 0!==v?v:null,productpackage_id:null!==(m=r.params.productpackage_id)&&void 0!==m?m:null,productpackage_key:null!==(t=r.params.productpackage_key)&&void 0!==t?t:null,iseffect:!0,ispublic:!0,sortfield:"ordinal",sorttype:"asc",posstart:(r.params.page-1)*r.params.limit,numofrow:r.params.limit},success:O=>{var n;"function"==typeof r.callback&&r.callback(null!==(n=O.data)&&void 0!==n?n:null)},error:O=>{"function"==typeof r.callback&&r.callback(),console.error(O)},loading:r.loading})},y=r=>{var C,v,m;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/Detail",params:{getby:null!==(C=r.params.userid)&&void 0!==C?C:null,productpackage_id:null!==(v=r.params.productpackage_id)&&void 0!==v?v:null,productpackage_key:null!==(m=r.params.productpackage_key)&&void 0!==m?m:null},success:t=>{var O;"function"==typeof r.callback&&r.callback(null!==(O=t.data)&&void 0!==O?O:null)},error:t=>{"function"==typeof r.callback&&r.callback(),console.error(t)},loading:r.loading})},e=r=>{var C;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/AppliedPackage",params:{userid:null!==(C=r.params.userid)&&void 0!==C?C:null},success:v=>{var m;"function"==typeof r.callback&&r.callback(null!==(m=v.data)&&void 0!==m?m:null)},error:v=>{"function"==typeof r.callback&&r.callback(),console.error(v)},loading:r.loading})},_=r=>{var C,v;r.params=r.params||{},(0,M.cd)({url:"api/ProductPackage/AppliedPackageContent",params:{userid:null!==(C=r.params.userid)&&void 0!==C?C:null,v_functionlimit:null!==(v=r.params.v_functionlimit)&&void 0!==v?v:null},success:m=>{var t;"function"==typeof r.callback&&r.callback(null!==(t=m.data)&&void 0!==t?t:null)},error:m=>{"function"==typeof r.callback&&r.callback(),console.error(m)},loading:r.loading})}},4041:(I,x,s)=>{s.d(x,{D:()=>b,w:()=>y});var M=s(4459);function b(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,M.cd)({url:"api/Topic/Search",params:{topic_id:e.params.topic_id||null,topic_title:e.params.topic_title||null,createdby:e.params.createdby||null,level:e.params.level||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:_=>{"function"==typeof e.callback&&e.callback(_.data||null)},error:_=>{"function"==typeof e.callback&&e.callback(null),console.error(_)}})}function y(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,M.cd)({url:"api/Topic/SearchTreeList",params:{getby:e.params.userid||null,topic_id:e.params.topic_id||null,topic_pid:e.params.topic_pid||null,topic_title:e.params.topic_title||null,active:e.params.active||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:_=>{"function"==typeof e.callback&&e.callback(_.data||null)},error:_=>{"function"==typeof e.callback&&e.callback(null),console.error(_)},loading:e.loading})}},3589:(I,x,s)=>{s.d(x,{w:()=>e,z:()=>y});var M=s(5861),b=s(4459);const y=function(){var _=(0,M.Z)(function*(r){r.params=r.params||{};let C=yield(0,b.H0)();var v=[];r.params.subFolder&&(r.params.subFolder=r.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),r.params.subFolder&&v.push(r.params.subFolder)),r.params.isconvertvideo=!!r.params.isconvertvideo,r.params.isconvertpdf2image=!!r.params.isconvertpdf2image,r.params.isconvertoffice2image=!!r.params.isconvertoffice2image,r.params.isresizeimage=!!r.params.isresizeimage;const m=new FormData;m.append("path",v.join("/")),m.append("types",r.params.fileType||null),m.append("file",r.params.file||null),m.append("base64",r.params.base64||!1),m.append("isconvertvideo",r.params.isconvertvideo),m.append("isconvertpdf2image",r.params.isconvertpdf2image),m.append("isconvertoffice2image",r.params.isconvertoffice2image),m.append("isresizeimage",r.params.isresizeimage),(0,b.tm)({api_url:C.fileuploadurl,authorization:!1,url:"Files",params:m,success:t=>{"function"==typeof r.callback&&r.callback(t.data||null)},error:t=>{"function"==typeof r.callback&&r.callback(),console.error(r,t)},loading:r.loading})});return function(C){return _.apply(this,arguments)}}(),e=function(){var _=(0,M.Z)(function*(r){r.params=r.params||{};let C=yield(0,b.H0)();(0,b.cd)({api_url:C.fileuploadurl,authorization:!1,url:"Zips/ExtractScorm",params:{pathFile:r.params.pathFile},success:v=>{"function"==typeof r.callback&&r.callback(v.data||null)},error:v=>{"function"==typeof r.callback&&r.callback(),console.error(r,v)},loading:r.loading})});return function(C){return _.apply(this,arguments)}}()},4531:(I,x,s)=>{s.d(x,{e:()=>d});var M=s(5861),b=s(4459),y=s(8530),e=s(1461),_=s(4041),r=s(5938),C=s(9403),v=s(8526),m=s(3377),t=s(8186),O=s(7090),n=s(5879),T=s(3536),A=s(6814),U=s(6223),B=s(3999);function L(o,l){if(1&o){const a=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(a);const c=n.oxw(2);return n.KtG(c.clearTopic())}),n._UZ(1,"ion-icon",24),n.qZA()}}function Z(o,l){if(1&o){const a=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(a);const c=n.oxw(2);return n.KtG(c.clearCategory())}),n._UZ(1,"ion-icon",24),n.qZA()}}function k(o,l){if(1&o){const a=n.EpF();n.TgZ(0,"div",15)(1,"ion-item")(2,"ion-input",16),n.NdJ("change",function(c){n.CHM(a);const g=n.oxw();return n.KtG(g.changeBoardTitle(c))}),n.ALo(3,"translate"),n.ALo(4,"translate"),n.qZA()()(),n.TgZ(5,"div",17)(6,"div",18),n._UZ(7,"input",19),n.ALo(8,"translate"),n.TgZ(9,"div",20),n.YNc(10,L,2,0,"button",21),n.TgZ(11,"button",22),n.NdJ("click",function(c){n.CHM(a);const g=n.oxw();return n.KtG(g.presentPopoverTopic(c))}),n._UZ(12,"ion-icon",23),n.qZA()()()(),n.TgZ(13,"div",17)(14,"div",18),n._UZ(15,"input",19),n.ALo(16,"translate"),n.TgZ(17,"div",20),n.YNc(18,Z,2,0,"button",21),n.TgZ(19,"button",22),n.NdJ("click",function(c){n.CHM(a);const g=n.oxw();return n.KtG(g.presentPopoverCategory(c))}),n._UZ(20,"ion-icon",23),n.qZA()()()()}if(2&o){const a=n.oxw();let i,c;n.xp6(2),n.MGl("placeholder","",n.lcZ(4,11,"LectureName")," *"),n.Q6J("ngModel",a.board.board_title),n.uIk("label",n.lcZ(3,9,"LectureName")),n.xp6(5),n.s9C("placeholder",n.lcZ(8,13,"GradeLevel")),n.Q6J("value",null!==(i=a.board.topic_title)&&void 0!==i?i:""),n.xp6(3),n.Q6J("ngIf",a.board.topic_id),n.xp6(5),n.s9C("placeholder",n.lcZ(16,15,"Subject")),n.Q6J("value",null!==(c=a.board.category_title)&&void 0!==c?c:""),n.xp6(3),n.Q6J("ngIf",a.board.category_id)}}function D(o,l){if(1&o){const a=n.EpF();n.ynx(0),n.TgZ(1,"div",35),n.NdJ("click",function(){const g=n.CHM(a).$implicit,h=n.oxw(2);return n.KtG(h.selectItem(g.board_id))}),n.TgZ(2,"div",36)(3,"div",29)(4,"div",30)(5,"ion-img",37),n.NdJ("ionImgDidLoad",function(c){const h=n.CHM(a).$implicit,P=n.oxw(2);return n.KtG(P.coverLoad(c,h))}),n.qZA()()()()(),n.BQk()}if(2&o){const a=l.$implicit,i=n.oxw(2);n.xp6(1),n.Tol(a.board_id==i.selectedId?"selected":a.board_id==i.currentId?"actived":""),n.xp6(4),n.Q6J("alt",a.board_title)}}function p(o,l){1&o&&(n.ynx(0),n.TgZ(1,"div",38)(2,"div",39)(3,"div",29)(4,"div",30),n._UZ(5,"ion-skeleton-text",40),n.qZA()()()(),n.BQk()),2&o&&(n.xp6(5),n.Q6J("animated",!0))}function u(o,l){if(1&o){const a=n.EpF();n.TgZ(0,"ion-infinite-scroll",41),n.NdJ("ionInfinite",function(c){n.CHM(a);const g=n.oxw(2);return n.KtG(g.onIonInfinite(c))}),n._UZ(1,"ion-infinite-scroll-content"),n.qZA()}}function f(o,l){if(1&o){const a=n.EpF();n.TgZ(0,"ion-content")(1,"div",25)(2,"div",26)(3,"div",27),n.NdJ("click",function(){n.CHM(a);const c=n.oxw();return n.KtG(c.selectItem())}),n.TgZ(4,"div")(5,"div",28)(6,"div",29)(7,"div",30)(8,"div",31)(9,"div")(10,"div"),n._uU(11),n.ALo(12,"translate"),n.qZA()()()()()()()(),n.YNc(13,D,6,3,"ng-container",32),n.YNc(14,p,6,1,"ng-container",33),n.qZA()(),n.YNc(15,u,2,0,"ion-infinite-scroll",34),n.qZA()}if(2&o){const a=n.oxw();n.xp6(3),n.Tol(a.selectedId?"":"selected"),n.xp6(8),n.Oqu(n.lcZ(12,6,"NewLecture")),n.xp6(2),n.Q6J("ngForOf",a.boards),n.xp6(1),n.Q6J("ngIf",a.paging.loading),n.xp6(1),n.Q6J("ngIf",a.paging.active)}}let d=(()=>{var o;class l{constructor(i,c,g){this.modalController=i,this.toastController=c,this.popoverController=g,this.board={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.fileurl="",this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.boards=[],this.topics=[],this.categorys=[],this.isloading=!1}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){var c,g,h,P;i.appsettings=yield(0,b.H0)(),i.appsettings.madonvi&&(i.user=yield(0,m.iA)(),i.readfileuploadurl=i.appsettings.readfileuploadurl||"",i.coverUrl=`${null!==(c=i.appsettings.readfileuploadurl)&&void 0!==c?c:""}${null!==(g=i.appsettings.boardpath)&&void 0!==g?g:""}`,i.coverv1Url=`${null!==(h=i.appsettings.readfileuploadurl)&&void 0!==h?h:""}${null!==(P=i.appsettings.boardpathv1)&&void 0!==P?P:""}`,i.refreshData())})()}refreshData(){(0,_.D)({params:{page:1,limit:20},callback:i=>{this.topics=i||[]}}),(0,e.N)({params:{page:1,limit:20},callback:i=>{this.categorys=i||[]}}),this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadData_Paging(i){var c;this.paging.loading=!0,(0,O.rM)({params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:g=>{this.boards=this.boards.concat(g||[]),this.paging.loading=!1,(!(null!=g&&g.length)||(null==g?void 0:g.length)<this.paging.limit)&&(this.paging.active=!1),i&&i()}})}loadMore(i){this.paging.page+=1,this.loadData_Paging(i)}onIonInfinite(i){this.loadMore(()=>{i.target.complete()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var i=this;if(!this.board.board_title)return void(0,t.B)(this.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(P=>{P.present()});let c=P=>{(0,t.B)(this.toastController,{},P).then(E=>{E.present()}),0==(null==P?void 0:P.returncode)&&(this.modalController.dismiss(null==P?void 0:P.id,"confirm"),"modal-board"==this.openFrom&&(0,M.Z)(function*(){const E=yield i.modalController.create({component:v.F,componentProps:{currentId:i.currentId,selectedId:null==P?void 0:P.id},mode:"ios",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});E.onDidDismiss().then(w=>{if("confirm"==w.role&&w.data){let J=w.data;var F;J.board_id&&window.open(`editor?b=${J.board_id}#${null===(F=J.board_title)||void 0===F?void 0:F.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),E.present()})())};var g,h;this.selectedId?(0,y.Z6)({loading:P=>{this.isloading=P},params:Object.assign({},this.board,{userid:null===(g=this.user)||void 0===g?void 0:g.userid,board_id:this.selectedId}),callback:c}):(0,y.Ux)({loading:P=>{this.isloading=P},params:Object.assign({},this.board,{userid:null===(h=this.user)||void 0===h?void 0:h.userid}),callback:c})}changeTopic(i,c){Object.assign(this.board,{topic_id:i,topic_title:c})}clearTopic(){Object.assign(this.board,{topic_id:null,topic_title:null})}presentPopoverTopic(i){var c=this;return(0,M.Z)(function*(){const g=yield c.popoverController.create({component:r.a,componentProps:{selectedId:c.board.topic_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(h=>{var P,E;"confirm"==h.role&&Object.assign(c.board,{topic_id:null===(P=h.data)||void 0===P?void 0:P.topic_id,topic_title:null===(E=h.data)||void 0===E?void 0:E.topic_title})}),g.present()})()}changeCategory(i,c){Object.assign(this.board,{category_id:i,category_title:c})}clearCategory(){Object.assign(this.board,{category_id:null,category_title:null})}presentPopoverCategory(i){var c=this;return(0,M.Z)(function*(){const g=yield c.popoverController.create({component:C.l,componentProps:{selectedId:c.board.category_id},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(h=>{var P,E;"confirm"==h.role&&Object.assign(c.board,{category_id:null===(P=h.data)||void 0===P?void 0:P.category_id,category_title:null===(E=h.data)||void 0===E?void 0:E.category_title})}),g.present()})()}changeBoardTitle(i){var c;this.board.board_title=null==i||null===(c=i.target)||void 0===c?void 0:c.value}changeBoardDescription(i){this.board.board_description=i}changeBoardContent(i){this.board.board_content=i}coverLoad(i,c){let g=[null!=c&&c.cover?this.readfileuploadurl+(null==c?void 0:c.cover):void 0,this.coverUrl+(null==c?void 0:c.board_id)+"/cover.svg",this.coverv1Url+(null==c?void 0:c.board_id)+"/cover.png"].filter(P=>!!P),h=P=>{if(!P)return;let E=new Image;E.onload=()=>{console.log(`onload -> ${E.src}`),i.target.setAttribute("src",P)},E.onerror=()=>{console.log(`onerror -> ${E.src}`),h(g.shift())},E.src=P};h(g.shift())}selectItem(i){this.selectedId=i}}return(o=l).\u0275fac=function(i){return new(i||o)(n.Y36(T.IN),n.Y36(T.yF),n.Y36(T.Dh))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-modal-board-add"]],inputs:{currentId:"currentId",openFrom:"openFrom",board:"board"},decls:36,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"disabled","click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","flex-column","flex-lg-row"],[1,"col-auto","col-lg-4","p-3","border-right"],[1,"ml-1","text-danger"],[3,"ngTemplateOutlet"],[1,"col","col-lg-8","p-3","flex-grow-1"],[1,"d-flex","h-100","flex-column"],[1,"flex-grow-1"],["tempForm",""],["tempTemplate",""],[1,"form-group","mb-4"],["label-placement","floating",3,"placeholder","ngModel","change"],[1,"form-group"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"placeholder","value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["name","close-outline"],[1,"py-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board",3,"click"],[1,"item-add"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-loading"],[1,"h-100",3,"animated"],[3,"ionInfinite"]],template:function(i,c){if(1&i&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ion-button",0),n.NdJ("click",function(){return c.save()}),n.TgZ(6,"ion-label"),n._uU(7),n.ALo(8,"translate"),n.qZA()(),n.TgZ(9,"ion-buttons",1)(10,"ion-button",2),n.NdJ("click",function(){return c.toggleFullScreen()}),n._UZ(11,"ion-icon",3),n.qZA(),n.TgZ(12,"ion-button",4),n.NdJ("click",function(){return c.close()}),n._UZ(13,"ion-icon",5),n.qZA()()()(),n.TgZ(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div")(18,"label"),n._uU(19),n.ALo(20,"translate"),n.TgZ(21,"span",8),n._uU(22,"*"),n.qZA()()(),n.GkF(23,9),n.qZA(),n.TgZ(24,"div",10)(25,"div",11)(26,"div")(27,"label"),n._uU(28),n.ALo(29,"translate"),n.qZA()(),n.TgZ(30,"div",12),n.GkF(31,9),n.qZA()()()()(),n.YNc(32,k,21,17,"ng-template",null,13,n.W1O),n.YNc(34,f,16,8,"ng-template",null,14,n.W1O)),2&i){const g=n.MAs(33),h=n.MAs(35);n.xp6(3),n.Oqu(n.lcZ(4,8,"CreateLecture")),n.xp6(2),n.Q6J("disabled",c.isloading),n.xp6(2),n.Oqu(n.lcZ(8,10,"CreateNew")),n.xp6(4),n.Q6J("src",c.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(8),n.hij("",n.lcZ(20,12,"LectureInfo"),": "),n.xp6(4),n.Q6J("ngTemplateOutlet",g),n.xp6(5),n.hij("",n.lcZ(29,14,"SelectTemplate"),":"),n.xp6(3),n.Q6J("ngTemplateOutlet",h)}},dependencies:[A.sg,A.O5,A.tP,U.JJ,U.On,T.YG,T.Sm,T.W2,T.Gu,T.gu,T.Xz,T.ju,T.MB,T.pK,T.Ie,T.Q$,T.CK,T.wd,T.sr,T.j9,B.X$],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:36px;font-size:14px;outline:none;box-shadow:none;border-color:#eee;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}"]}),l})()},5744:(I,x,s)=>{s.d(x,{E:()=>L});var M=s(5861),b=s(4459),y=s(7090),e=s(8530),_=s(3377),r=s(8186),C=s(5938),v=s(9403),m=s(3589),t=s(5879),O=s(3536),n=s(6814),T=s(6223),A=s(3999);function U(Z,k){if(1&Z){const D=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(u){t.CHM(D);const f=t.oxw();return t.KtG(f.clearTopic(u))}),t._UZ(1,"ion-icon",31),t.qZA()}}function B(Z,k){if(1&Z){const D=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(u){t.CHM(D);const f=t.oxw();return t.KtG(f.clearCategory(u))}),t._UZ(1,"ion-icon",31),t.qZA()}}let L=(()=>{var Z;class k{constructor(p,u,f,d){this.modalController=p,this.popoverController=u,this.toastController=f,this.loadingController=d,this.b=0,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var p=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){p.appsettings=yield(0,b.H0)(),p.appsettings.madonvi&&(p.user=yield(0,_.iA)(),p.readfileuploadurl=p.appsettings.readfileuploadurl||"",p.refreshData())})()}refreshData(){var p;(0,y.T6)({params:{userid:null===(p=this.user)||void 0===p?void 0:p.userid,board_id:this.b},callback:u=>{if((null==u?void 0:u.board_id)==this.b)return this.board=u,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var p=this;return(0,M.Z)(function*(){if(!p.board.board_title)return void(0,r.B)(p.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(d=>{d.present()});let u=[];p.boardCover&&u.push(new Promise((d,o)=>{var l;(0,m.z)({params:{file:p.boardCover,subFolder:`board-cover/${null!==(l=p.board.board_id)&&void 0!==l?l:0}`,fileType:"image"},callback:a=>{var i;0==(null==a?void 0:a.ReturnCode)&&(p.board.cover=a.path+"/"+(null===(i=a.file)||void 0===i?void 0:i.name)),d(!0)}})}));const f=yield p.loadingController.create({message:"\u0110ang t\u1ea3i..."});f.present(),Promise.all(u).then(d=>{var o;(0,e.Ux)({params:Object.assign({},p.board,{userid:null===(o=p.user)||void 0===o?void 0:o.userid}),callback:l=>{(0,r.B)(p.toastController,{},l).then(a=>{a.present()}),0==(null==l?void 0:l.returncode)&&p.modalController.dismiss(null==l?void 0:l.id,"confirm")},loading:l=>{l||f.dismiss()}})})})()}presentPopoverTopic(p){var u=this;return(0,M.Z)(function*(){const f=yield u.popoverController.create({component:C.a,componentProps:{selectedId:u.board.topic_id,filterFor:"board"},event:p,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(d=>{var o,l;"confirm"==d.role&&Object.assign(u.board,{topic_id:null===(o=d.data)||void 0===o?void 0:o.topic_id,topic_title:null===(l=d.data)||void 0===l?void 0:l.topic_title})}),f.present()})()}clearTopic(p){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(p){this.board.topic_id=p}presentPopoverCategory(p){var u=this;return(0,M.Z)(function*(){const f=yield u.popoverController.create({component:v.l,componentProps:{selectedId:u.board.category_id,filterFor:"board"},event:p,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(d=>{var o,l;"confirm"==d.role&&Object.assign(u.board,{category_id:null===(o=d.data)||void 0===o?void 0:o.category_id,category_title:null===(l=d.data)||void 0===l?void 0:l.category_title})}),f.present()})()}clearCategory(p){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(p){this.board.category_id=p}changeBoardTitle(p){var u;this.board.board_title=null==p||null===(u=p.target)||void 0===u?void 0:u.value}changeBoardDescription(p){var u;this.board.board_description=null==p||null===(u=p.target)||void 0===u?void 0:u.value}changeBoardContent(p){var u;this.board.board_content=null==p||null===(u=p.target)||void 0===u?void 0:u.value}changeBoardCover(p){this.boardCover=void 0,p.target.files.length&&(this.boardCover=p.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var p,u,f,d,o,l,a,i,c,g,h;let P=[null!==(p=this.board)&&void 0!==p&&p.cover?`${null!==(u=this.appsettings.readfileuploadurl)&&void 0!==u?u:""}${null===(f=this.board)||void 0===f?void 0:f.cover}`:void 0,null!==(d=this.board)&&void 0!==d&&d.board_id?`${null!==(o=this.appsettings.readfileuploadurl)&&void 0!==o?o:""}${null!==(l=this.appsettings.boardpath)&&void 0!==l?l:""}${null===(a=this.board)||void 0===a?void 0:a.board_id}/cover.svg`:void 0,null!==(i=this.board)&&void 0!==i&&i.board_id?`${null!==(c=this.appsettings.readfileuploadurl)&&void 0!==c?c:""}${null!==(g=this.appsettings.boardpathv1)&&void 0!==g?g:""}${null===(h=this.board)||void 0===h?void 0:h.board_id}/cover.png`:void 0].filter(w=>!!w),E=w=>{if(!w)return;let F=new Image;F.onload=()=>{console.log(`onload -> ${F.src}`),this.coverUrl=w},F.onerror=()=>{console.log(`onerror -> ${F.src}`),E(P.shift())},F.src=w};P.length&&E(P.shift())}}return(Z=k).\u0275fac=function(p){return new(p||Z)(t.Y36(O.IN),t.Y36(O.Dh),t.Y36(O.yF),t.Y36(O.HT))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-modal-board-update"]],inputs:{b:"b"},decls:76,vars:34,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","h-100","py-3"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","7",1,"form-control",3,"ngModel","change"],[1,"col-lg-6","col-cover"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"flex-grow-1"],[1,"input-group","h-100"],["rows","12",1,"form-control",3,"ngModel","change"],["name","close-outline"]],template:function(p,u){if(1&p&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-button",0),t.NdJ("click",function(){return u.save()}),t.TgZ(6,"ion-label"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"ion-buttons",1)(10,"ion-button",2),t.NdJ("click",function(){return u.toggleFullScreen()}),t._UZ(11,"ion-icon",3),t.qZA(),t.TgZ(12,"ion-button",4),t.NdJ("click",function(){return u.close()}),t._UZ(13,"ion-icon",5),t.qZA()()()(),t.TgZ(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div",8)(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"label",13),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"input",14),t.TgZ(26,"div",15),t.YNc(27,U,2,0,"button",16),t.TgZ(28,"button",17),t.NdJ("click",function(d){return u.presentPopoverTopic(d)}),t._UZ(29,"ion-icon",18),t.qZA()()()(),t.TgZ(30,"div",10)(31,"div",11)(32,"div",12)(33,"label",13),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t._UZ(36,"input",14),t.TgZ(37,"div",15),t.YNc(38,B,2,0,"button",16),t.TgZ(39,"button",17),t.NdJ("click",function(d){return u.presentPopoverCategory(d)}),t._UZ(40,"ion-icon",18),t.qZA()()()(),t.TgZ(41,"div",10)(42,"div",11)(43,"div",12)(44,"label",13),t._uU(45),t.ALo(46,"translate"),t.qZA()(),t.TgZ(47,"input",19),t.NdJ("change",function(d){return u.changeBoardTitle(d)}),t.qZA()()(),t.TgZ(48,"div",10)(49,"div",11)(50,"div",12)(51,"label",13),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"textarea",20),t.NdJ("change",function(d){return u.changeBoardDescription(d)}),t.qZA()()()(),t.TgZ(55,"div",21)(56,"div",10)(57,"div",11)(58,"div",12)(59,"label",13),t._uU(60),t.ALo(61,"translate"),t.qZA()(),t.TgZ(62,"div",22)(63,"input",23),t.NdJ("change",function(d){return u.changeBoardCover(d)}),t.qZA(),t._UZ(64,"label",24),t.qZA()()(),t.TgZ(65,"div",10)(66,"div",25)(67,"div",26),t._UZ(68,"ion-img",27),t.qZA()()()()(),t.TgZ(69,"div",28)(70,"div",29)(71,"div",12)(72,"label",13),t._uU(73),t.ALo(74,"translate"),t.qZA()(),t.TgZ(75,"textarea",30),t.NdJ("change",function(d){return u.changeBoardContent(d)}),t.qZA()()()()()()),2&p){let f,d;t.xp6(3),t.Oqu(t.lcZ(4,18,"UpdateLectureInformation")),t.xp6(4),t.Oqu(t.lcZ(8,20,"Update")),t.xp6(4),t.Q6J("src",u.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(12),t.Oqu(t.lcZ(24,22,"GradeLevel")),t.xp6(2),t.Q6J("value",null!==(f=u.board.topic_title)&&void 0!==f?f:""),t.xp6(2),t.Q6J("ngIf",u.board.topic_id),t.xp6(7),t.Oqu(t.lcZ(35,24,"Subject")),t.xp6(2),t.Q6J("value",null!==(d=u.board.category_title)&&void 0!==d?d:""),t.xp6(2),t.Q6J("ngIf",u.board.category_id),t.xp6(7),t.Oqu(t.lcZ(46,26,"LectureName")),t.xp6(2),t.Q6J("ngModel",u.board.board_title),t.xp6(5),t.Oqu(t.lcZ(53,28,"Description")),t.xp6(2),t.Q6J("ngModel",u.board.board_description),t.xp6(6),t.Oqu(t.lcZ(61,30,"Cover")),t.xp6(8),t.Q6J("src",u.fileurl||u.coverUrl||"assets/image/no-image.svg")("alt",u.board.board_title),t.xp6(5),t.Oqu(t.lcZ(74,32,"Content")),t.xp6(2),t.Q6J("ngModel",u.board.board_content)}},dependencies:[n.O5,T.Fj,T.JJ,T.On,O.YG,O.Sm,O.W2,O.Gu,O.gu,O.Xz,O.Q$,O.wd,O.sr,A.X$],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),k})()},7050:(I,x,s)=>{s.d(x,{z:()=>_});var M=s(9455),b=s(5879),y=s(3536),e=s(5470);let _=(()=>{var r;class C{constructor(m){this.modalController=m,this.b=0,this.w=1366,this.h=768,this.isfullscreen=!1,this.appversion=M.appversion}ngOnInit(){this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}load(m){this.iframe=m.target}}return(r=C).\u0275fac=function(m){return new(m||r)(b.Y36(y.IN))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-modal-board-viewer"]],inputs:{b:"b",w:"w",h:"h"},decls:10,vars:5,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"src","load"]],template:function(m,t){1&m&&(b.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),b.NdJ("click",function(){return t.toggleFullScreen()}),b._UZ(4,"ion-icon",2),b.qZA(),b.TgZ(5,"ion-button",3),b.NdJ("click",function(){return t.close()}),b._UZ(6,"ion-icon",4),b.qZA()()()(),b.TgZ(7,"ion-content")(8,"iframe",5),b.NdJ("load",function(n){return t.load(n)}),b.ALo(9,"safe"),b.qZA()()),2&m&&(b.xp6(4),b.Q6J("src",t.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),b.xp6(4),b.Q6J("src",b.xi3(9,2,"viewer?b="+t.b+"&v="+t.appversion,"resourceUrl"),b.uOi))},dependencies:[y.YG,y.Sm,y.W2,y.Gu,y.gu,y.sr,e.y],styles:["iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),C})()},8526:(I,x,s)=>{s.d(x,{F:()=>D});var M=s(5861),b=s(4459),y=s(7090),e=s(5938),_=s(9403),r=s(3377),C=s(4531),v=s(5744),m=s(7050),t=s(5879),O=s(6916),n=s(3536),T=s(6814),A=s(3999);function U(p,u){if(1&p){const f=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(o){t.CHM(f);const l=t.oxw();return t.KtG(l.clearFilterTopic(o))}),t._UZ(1,"ion-icon",31),t.qZA()}}function B(p,u){if(1&p){const f=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(o){t.CHM(f);const l=t.oxw();return t.KtG(l.clearFilterCategory(o))}),t._UZ(1,"ion-icon",31),t.qZA()}}function L(p,u){if(1&p){const f=t.EpF();t.ynx(0),t.TgZ(1,"div",32),t.NdJ("click",function(){const l=t.CHM(f).$implicit,a=t.oxw();return t.KtG(a.selectItem(l.board_id))})("dblclick",function(){const l=t.CHM(f).$implicit,a=t.oxw();return t.KtG(a.openEditor(l.board_id))}),t.TgZ(2,"div",33)(3,"div",34)(4,"div",21)(5,"div",22)(6,"ion-img",35),t.NdJ("ionImgDidLoad",function(o){const a=t.CHM(f).$implicit,i=t.oxw();return t.KtG(i.coverLoad(o,a))}),t.qZA()()()(),t.TgZ(7,"div",36)(8,"div",37)(9,"button",38),t.NdJ("click",function(){const l=t.CHM(f).$implicit,a=t.oxw();return t.KtG(a.openViewer(l.board_id))}),t._UZ(10,"ion-icon",39),t.qZA(),t.TgZ(11,"button",38),t.NdJ("click",function(){const l=t.CHM(f).$implicit,a=t.oxw();return t.KtG(a.openEditor(l.board_id))}),t._UZ(12,"ion-icon",40),t.qZA()()()(),t.TgZ(13,"div",41),t._uU(14),t.qZA()(),t.BQk()}if(2&p){const f=u.$implicit,d=t.oxw();t.xp6(1),t.Tol(f.board_id==d.selectedId?"selected":f.board_id==d.currentId?"actived":""),t.xp6(5),t.Q6J("alt",f.board_title),t.xp6(7),t.Q6J("title",f.board_title),t.xp6(1),t.Oqu(f.board_title)}}function Z(p,u){1&p&&(t.ynx(0),t.TgZ(1,"div",19)(2,"div",42)(3,"div",21)(4,"div",22),t._UZ(5,"ion-skeleton-text",43),t.qZA()()(),t.TgZ(6,"div",27),t._UZ(7,"ion-skeleton-text",44),t.qZA()(),t.BQk()),2&p&&(t.xp6(5),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}function k(p,u){if(1&p){const f=t.EpF();t.TgZ(0,"ion-infinite-scroll",45),t.NdJ("ionInfinite",function(o){t.CHM(f);const l=t.oxw();return t.KtG(l.onIonInfinite(o))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}let D=(()=>{var p;class u{constructor(d,o,l,a){this.router=d,this.activatedRoute=o,this.modalController=l,this.popoverController=a,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.paging={sortfield:null,sorttype:null,page:1,limit:50,loading:!1,active:!0},this.filter={},this.boards=[]}ngOnInit(){var d=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){var o,l,a,i,c;d.appsettings=yield(0,b.H0)(),d.appsettings.madonvi&&(d.user=yield(0,r.iA)(),d.readfileuploadurl=null!==(o=d.appsettings.readfileuploadurl)&&void 0!==o?o:"",d.coverUrl=`${null!==(l=d.appsettings.readfileuploadurl)&&void 0!==l?l:""}${null!==(a=d.appsettings.boardpath)&&void 0!==a?a:""}`,d.coverv1Url=`${null!==(i=d.appsettings.readfileuploadurl)&&void 0!==i?i:""}${null!==(c=d.appsettings.boardpathv1)&&void 0!==c?c:""}`,d.refreshData())})()}ngAfterViewInit(){}selectItem(d){this.currentId!=d&&(this.selectedId=d)}openViewer(d){var o=this;return(0,M.Z)(function*(){d&&(yield o.modalController.create({component:m.z,componentProps:{b:d},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0})).present()})()}openEditor(d){d&&this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{b:d,n:null},queryParamsHandling:"merge",replaceUrl:!0}).finally(()=>{window.location.reload()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){return this.modalController.dismiss(this.boards.find(d=>d.board_id==this.selectedId),"confirm")}coverLoad(d,o){let l=[null!=o&&o.cover?this.readfileuploadurl+(null==o?void 0:o.cover):void 0,this.coverUrl+(null==o?void 0:o.board_id)+"/cover.svg",this.coverv1Url+(null==o?void 0:o.board_id)+"/cover.png"].filter(i=>!!i),a=i=>{if(!i)return;let c=new Image;c.onload=()=>{console.log(`onload -> ${c.src}`),d.target.setAttribute("src",i)},c.onerror=()=>{console.log(`onerror -> ${c.src}`),a(l.shift())},c.src=i};a(l.shift())}onIonInfinite(d){this.loadMore(()=>{d.target.complete()})}loadData_Paging(d){var o;this.paging.loading=!0,(0,y.GW)({params:{userid:null===(o=this.user)||void 0===o?void 0:o.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:l=>{this.boards=this.boards.concat(l||[]),this.paging.loading=!1,(!(null!=l&&l.length)||(null==l?void 0:l.length)<this.paging.limit)&&(this.paging.active=!1),d&&d()}})}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadMore(d){this.paging.page+=1,this.loadData_Paging(d)}searchChange(d){this.filter.search=d.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}sortChange(d,o){this.paging.sortfield=d||null,this.paging.sorttype=o||null,this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}presentModalBoardAdd(d){var o=this;return(0,M.Z)(function*(){o.modalController.dismiss(null,"close2open-modal-add"),(yield o.modalController.create({component:C.e,componentProps:{currentId:o.currentId,openFrom:"modal-board"},mode:"md",cssClass:"ion-modal-xl",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardUpdate(d){var o=this;return(0,M.Z)(function*(){const l=yield o.modalController.create({component:v.E,mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});l.onDidDismiss().then(a=>{"confirm"==a.role&&a.data&&o.refreshData()}),l.present()})()}clearFilterTopic(d){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}presentPopoverTopic(d){var o=this;return(0,M.Z)(function*(){const l=yield o.popoverController.create({component:e.a,componentProps:{selectedId:o.filter.topic_id,filterFor:"board"},event:d,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(a=>{var i,c;"confirm"==a.role&&(Object.assign(o.filter,{topic_id:null===(i=a.data)||void 0===i?void 0:i.topic_id,topic_title:null===(c=a.data)||void 0===c?void 0:c.topic_title}),o.filterChange())}),l.present()})()}clearFilterCategory(d){Object.assign(this.filter,{category_id:null,category_title:null}),this.filterChange()}presentPopoverCategory(d){var o=this;return(0,M.Z)(function*(){const l=yield o.popoverController.create({component:_.l,componentProps:{selectedId:o.filter.category_id,filterFor:"board"},event:d,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(a=>{var i,c;"confirm"==a.role&&(Object.assign(o.filter,{category_id:null===(i=a.data)||void 0===i?void 0:i.category_id,category_title:null===(c=a.data)||void 0===c?void 0:c.category_title}),o.filterChange())}),l.present()})()}}return(p=u).\u0275fac=function(d){return new(d||p)(t.Y36(O.F0),t.Y36(O.gz),t.Y36(n.IN),t.Y36(n.Dh))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-modal-board"]],inputs:{currentId:"currentId",selectedId:"selectedId"},decls:54,vars:24,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"px-3"],[1,"row"],[1,"col-12","col-lg-4","my-3"],[1,"searchbox"],["mode","ios","inputmode","search","search-icon","","show-clear-button","never","show-cancel-button","never",3,"placeholder","debounce","ionInput"],[1,"col-6","col-lg-4","my-3"],[1,"input-group"],["type","text",1,"form-control",3,"placeholder","value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],[1,"py-3","p-lg-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-add",3,"click"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"text-center"],[1,"icon-add"],["src","../../../../assets/icon/16x16/add.svg"],[1,"item-name","line-clamp-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["name","close-outline"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click","dblclick"],[1,"position-relative"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"position-absolute","top-0","bottom-0","left-0","right-0","item-action"],[1,"position-absolute","bottom-0","right-0"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/view.svg"],["src","../../../../assets/icon/16x16/edit.svg"],[1,"item-name","line-clamp-2",3,"title"],[1,"item-loading"],[1,"h-100",3,"animated"],[2,"width","75%",3,"animated"],[3,"ionInfinite"]],template:function(d,o){if(1&d&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-buttons",0)(6,"ion-button",1),t.NdJ("click",function(){return o.toggleFullScreen()}),t._UZ(7,"ion-icon",2),t.qZA(),t.TgZ(8,"ion-button",3),t.NdJ("click",function(){return o.close()}),t._UZ(9,"ion-icon",4),t.qZA()()(),t.TgZ(10,"ion-toolbar")(11,"div",5)(12,"div",6)(13,"div",7)(14,"div",8)(15,"ion-searchbar",9),t.NdJ("ionInput",function(a){return o.searchChange(a)}),t.ALo(16,"translate"),t.qZA()()(),t.TgZ(17,"div",10)(18,"div",11),t._UZ(19,"input",12),t.ALo(20,"translate"),t.TgZ(21,"div",13),t.YNc(22,U,2,0,"button",14),t.TgZ(23,"button",15),t.NdJ("click",function(a){return o.presentPopoverTopic(a)}),t._UZ(24,"ion-icon",16),t.qZA()()()(),t.TgZ(25,"div",10)(26,"div",11),t._UZ(27,"input",12),t.ALo(28,"translate"),t.TgZ(29,"div",13),t.YNc(30,B,2,0,"button",14),t.TgZ(31,"button",15),t.NdJ("click",function(a){return o.presentPopoverCategory(a)}),t._UZ(32,"ion-icon",16),t.qZA()()()()()()()(),t.TgZ(33,"ion-content")(34,"div",17)(35,"div",18)(36,"div",19)(37,"div")(38,"div",20),t.NdJ("click",function(a){return o.presentModalBoardAdd(a)}),t.TgZ(39,"div",21)(40,"div",22)(41,"div",23)(42,"div")(43,"div",24)(44,"div",25),t._UZ(45,"ion-icon",26),t.qZA()(),t.TgZ(46,"div"),t._uU(47),t.ALo(48,"translate"),t.qZA()()()()()(),t.TgZ(49,"div",27),t._uU(50,"\xa0"),t.qZA()()(),t.YNc(51,L,15,5,"ng-container",28),t.YNc(52,Z,8,2,"ng-container",29),t.qZA()(),t.YNc(53,k,2,0,"ion-infinite-scroll",30),t.qZA()),2&d){let l,a;t.xp6(3),t.Oqu(t.lcZ(4,14,"MyLecture")),t.xp6(4),t.Q6J("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(8),t.MGl("placeholder","",t.lcZ(16,16,"Search")," ..."),t.Q6J("debounce",1e3),t.xp6(4),t.s9C("placeholder",t.lcZ(20,18,"GradeLevel")),t.Q6J("value",null!==(l=o.filter.topic_title)&&void 0!==l?l:""),t.xp6(3),t.Q6J("ngIf",o.filter.topic_id),t.xp6(5),t.s9C("placeholder",t.lcZ(28,20,"Subject")),t.Q6J("value",null!==(a=o.filter.category_title)&&void 0!==a?a:""),t.xp6(3),t.Q6J("ngIf",o.filter.category_id),t.xp6(17),t.Oqu(t.lcZ(48,22,"CreateLecture")),t.xp6(4),t.Q6J("ngForOf",o.boards),t.xp6(1),t.Q6J("ngIf",o.paging.loading),t.xp6(1),t.Q6J("ngIf",o.paging.active)}},dependencies:[T.sg,T.O5,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Xz,n.ju,n.MB,n.VI,n.CK,n.wd,n.sr,n.j9,A.X$],styles:[".item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #8F9BB3;background:#FFF}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{height:40px;padding:0;--color: #333;--background: transparent;--box-shadow: none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-size:14px;outline:none;box-shadow:none;border-color:#8f9bb3;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-primary-shade, #000)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium, #999)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}"]}),u})()},9403:(I,x,s)=>{s.d(x,{l:()=>d});var M=s(5861),b=s(1461),y=s(3377),e=s(5879),_=s(3536),r=s(6814),C=s(3999);function v(o,l){1&o&&e.GkF(0)}function m(o,l){1&o&&(e.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),e._UZ(3,"ion-spinner",8),e.qZA()()())}function t(o,l){1&o&&e.GkF(0)}function O(o,l){if(1&o&&e.YNc(0,t,1,0,"ng-container",0),2&o){const a=e.oxw(),i=e.MAs(6),c=e.MAs(8);e.Q6J("ngIf",!(null!=a.categorys&&a.categorys.length))("ngIfThen",i)("ngIfElse",c)}}function n(o,l){1&o&&(e.TgZ(0,"div",9)(1,"small",10),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"DataNotFound")))}const T=function(o){return{$implicit:o}};function A(o,l){if(1&o&&e.GkF(0,13),2&o){const a=l.$implicit;e.oxw(2);const i=e.MAs(10);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,T,a))}}function U(o,l){if(1&o&&(e.TgZ(0,"div",11)(1,"ul"),e.YNc(2,A,1,4,"ng-container",12),e.qZA()()),2&o){const a=e.oxw();e.xp6(2),e.Q6J("ngForOf",a.filterCategory(a.categorys))}}function B(o,l){1&o&&e._UZ(0,"ion-icon",21)}function L(o,l){1&o&&e._UZ(0,"ion-icon",22)}function Z(o,l){1&o&&e._UZ(0,"ion-spinner",23)}function k(o,l){if(1&o&&(e.TgZ(0,"ion-badge",24),e._uU(1),e.qZA()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.total_board)}}function D(o,l){if(1&o&&(e.TgZ(0,"ion-badge",24),e._uU(1),e.qZA()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.total_media)}}function p(o,l){if(1&o&&e.GkF(0,13),2&o){const a=l.$implicit;e.oxw(3);const i=e.MAs(10);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,T,a))}}function u(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,p,1,4,"ng-container",12),e.qZA(),e.BQk()),2&o){const a=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.filterCategory(i.categorys,a.category_id))}}function f(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"li")(1,"ion-item",14),e.NdJ("click",function(){const g=e.CHM(a).$implicit,h=e.oxw();return e.KtG(h.filterChange(g.category_id))}),e.TgZ(2,"ion-button",15),e.NdJ("click",function(c){const h=e.CHM(a).$implicit,P=e.oxw();return e.KtG(P.expandCategory(c,h.category_id,h.isexpanded))}),e.YNc(3,B,1,0,"ion-icon",16),e.YNc(4,L,1,0,"ion-icon",17),e.YNc(5,Z,1,0,"ion-spinner",18),e.qZA(),e.TgZ(6,"ion-label"),e._uU(7),e.qZA(),e.YNc(8,k,2,1,"ion-badge",19),e.YNc(9,D,2,1,"ion-badge",19),e.qZA(),e.YNc(10,u,3,1,"ng-container",20),e.qZA()}if(2&o){const a=l.$implicit,i=e.oxw();e.xp6(1),e.uIk("color",a.category_id==i.selectedId?"primary":""),e.xp6(1),e.uIk("style",a.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!a.isexpanded),e.xp6(1),e.Q6J("ngIf",a.isexpanded&&!1===a.loading),e.xp6(1),e.Q6J("ngIf",a.isexpanded&&!1!==a.loading),e.xp6(2),e.Oqu(a.category_title),e.xp6(1),e.Q6J("ngIf","board"==i.filterFor&&a.total_board),e.xp6(1),e.Q6J("ngIf","media"==i.filterFor&&a.total_media),e.xp6(1),e.Q6J("ngIf",a.isexpanded)}}let d=(()=>{var o;class l{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.categorys=[]}ngOnInit(){var i=this;(0,M.Z)(function*(){i.user=yield(0,y.iA)(),i.loadCategory()})()}loadCategory(i){var c;(0,b.b)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,category_pid:null==i?void 0:i.category_id,active:!0,page:1,limit:-1},callback:g=>{this.categorys=this.categorys.concat(g||[])}})}filterCategory(i,c){return i.filter(c?g=>g.category_pid==c:g=>null==g.category_pid||0==g.category_pid)}expandCategory(i,c,g){i.preventDefault(),i.stopPropagation(),this.categorys.filter(h=>h.category_id==c).forEach(h=>{h.isexpanded=!g,h.isloadedchild||(h.isloadedchild=!0,this.loadCategory(h))})}filterChange(i){this.popoverController.dismiss(this.categorys.find(c=>c.category_id==i),"confirm")}}return(o=l).\u0275fac=function(i){return new(i||o)(e.Y36(_.Dh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-popover-category"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-category","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,c){if(1&i&&(e.YNc(0,v,1,0,"ng-container",0),e.YNc(1,m,4,0,"ng-template",null,1,e.W1O),e.YNc(3,O,1,3,"ng-template",null,2,e.W1O),e.YNc(5,n,4,3,"ng-template",null,3,e.W1O),e.YNc(7,U,3,1,"ng-template",null,4,e.W1O),e.YNc(9,f,11,9,"ng-template",null,5,e.W1O)),2&i){const g=e.MAs(2),h=e.MAs(4);e.Q6J("ngIf",!(null!=c.categorys&&c.categorys.length)&&!1!==c.response.loading)("ngIfThen",g)("ngIfElse",h)}},dependencies:[r.sg,r.O5,r.tP,_.yp,_.YG,_.W2,_.gu,_.Ie,_.Q$,_.PQ,C.X$],styles:[".menu-category[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),l})()},5938:(I,x,s)=>{s.d(x,{a:()=>d});var M=s(5861),b=s(4041),y=s(3377),e=s(5879),_=s(3536),r=s(6814),C=s(3999);function v(o,l){1&o&&e.GkF(0)}function m(o,l){1&o&&(e.TgZ(0,"ion-content")(1,"div",6)(2,"div",7),e._UZ(3,"ion-spinner",8),e.qZA()()())}function t(o,l){1&o&&e.GkF(0)}function O(o,l){if(1&o&&e.YNc(0,t,1,0,"ng-container",0),2&o){const a=e.oxw(),i=e.MAs(6),c=e.MAs(8);e.Q6J("ngIf",!(null!=a.topics&&a.topics.length))("ngIfThen",i)("ngIfElse",c)}}function n(o,l){1&o&&(e.TgZ(0,"div",9)(1,"small",10),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"DataNotFound")))}const T=function(o){return{$implicit:o}};function A(o,l){if(1&o&&e.GkF(0,13),2&o){const a=l.$implicit;e.oxw(2);const i=e.MAs(10);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,T,a))}}function U(o,l){if(1&o&&(e.TgZ(0,"div",11)(1,"ul"),e.YNc(2,A,1,4,"ng-container",12),e.qZA()()),2&o){const a=e.oxw();e.xp6(2),e.Q6J("ngForOf",a.filterTopic(a.topics))}}function B(o,l){1&o&&e._UZ(0,"ion-icon",21)}function L(o,l){1&o&&e._UZ(0,"ion-icon",22)}function Z(o,l){1&o&&e._UZ(0,"ion-spinner",23)}function k(o,l){if(1&o&&(e.TgZ(0,"ion-badge",24),e._uU(1),e.qZA()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.total_board)}}function D(o,l){if(1&o&&(e.TgZ(0,"ion-badge",24),e._uU(1),e.qZA()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.total_media)}}function p(o,l){if(1&o&&e.GkF(0,13),2&o){const a=l.$implicit;e.oxw(3);const i=e.MAs(10);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,T,a))}}function u(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,p,1,4,"ng-container",12),e.qZA(),e.BQk()),2&o){const a=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.filterTopic(i.topics,a.topic_id))}}function f(o,l){if(1&o){const a=e.EpF();e.TgZ(0,"li")(1,"ion-item",14),e.NdJ("click",function(){const g=e.CHM(a).$implicit,h=e.oxw();return e.KtG(h.filterChange(g.topic_id))}),e.TgZ(2,"ion-button",15),e.NdJ("click",function(c){const h=e.CHM(a).$implicit,P=e.oxw();return e.KtG(P.expandTopic(c,h.topic_id,h.isexpanded))}),e.YNc(3,B,1,0,"ion-icon",16),e.YNc(4,L,1,0,"ion-icon",17),e.YNc(5,Z,1,0,"ion-spinner",18),e.qZA(),e.TgZ(6,"ion-label"),e._uU(7),e.qZA(),e.YNc(8,k,2,1,"ion-badge",19),e.YNc(9,D,2,1,"ion-badge",19),e.qZA(),e.YNc(10,u,3,1,"ng-container",20),e.qZA()}if(2&o){const a=l.$implicit,i=e.oxw();e.xp6(1),e.uIk("color",a.topic_id==i.selectedId?"primary":""),e.xp6(1),e.uIk("style",a.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!a.isexpanded),e.xp6(1),e.Q6J("ngIf",a.isexpanded&&!1===a.loading),e.xp6(1),e.Q6J("ngIf",a.isexpanded&&!1!==a.loading),e.xp6(2),e.Oqu(a.topic_title),e.xp6(1),e.Q6J("ngIf","board"==i.filterFor&&a.total_board),e.xp6(1),e.Q6J("ngIf","media"==i.filterFor&&a.total_media),e.xp6(1),e.Q6J("ngIf",a.isexpanded)}}let d=(()=>{var o;class l{constructor(i){this.popoverController=i,this.selectedId=0,this.response={},this.topics=[]}ngOnInit(){var i=this;(0,M.Z)(function*(){i.user=yield(0,y.iA)(),i.loadTopic()})()}loadTopic(i){var c;(0,b.w)({loading:g=>{this.response.loading=g,i&&(i.loading=g)},params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,topic_pid:null==i?void 0:i.topic_id,active:!0,page:1,limit:-1},callback:g=>{this.topics=this.topics.concat(g||[])}})}filterTopic(i,c){return i.filter(c?g=>g.topic_pid==c:g=>null==g.topic_pid||0==g.topic_pid)}expandTopic(i,c,g){i.preventDefault(),i.stopPropagation(),this.topics.filter(h=>h.topic_id==c).forEach(h=>{h.isexpanded=!g,h.isloadedchild||(h.isloadedchild=!0,this.loadTopic(h))})}filterChange(i){this.popoverController.dismiss(this.topics.find(c=>c.topic_id==i),"confirm")}}return(o=l).\u0275fac=function(i){return new(i||o)(e.Y36(_.Dh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-popover-topic"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:11,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-topic","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","dark",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","dark"],["color","medium"]],template:function(i,c){if(1&i&&(e.YNc(0,v,1,0,"ng-container",0),e.YNc(1,m,4,0,"ng-template",null,1,e.W1O),e.YNc(3,O,1,3,"ng-template",null,2,e.W1O),e.YNc(5,n,4,3,"ng-template",null,3,e.W1O),e.YNc(7,U,3,1,"ng-template",null,4,e.W1O),e.YNc(9,f,11,9,"ng-template",null,5,e.W1O)),2&i){const g=e.MAs(2),h=e.MAs(4);e.Q6J("ngIf",!(null!=c.topics&&c.topics.length)&&!1!==c.response.loading)("ngIfThen",g)("ngIfElse",h)}},dependencies:[r.sg,r.O5,r.tP,_.yp,_.YG,_.W2,_.gu,_.Ie,_.Q$,_.PQ,C.X$],styles:[".menu-topic[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),l})()},9018:(I,x,s)=>{s.d(x,{Be:()=>r,C0:()=>e,W6:()=>C,gk:()=>_,iD:()=>y});var M=s(5861),b=s(8526);const y=function(){var v=(0,M.Z)(function*(m,t){const O=yield m.create({component:b.F,componentProps:{currentId:null==t?void 0:t.board_id},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});O.onDidDismiss().then(n=>{if("confirm"==n.role&&n.data){let A=n.data;var T;A.board_id&&window.open(`editor?b=${A.board_id}#${null===(T=A.board_title)||void 0===T?void 0:T.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),O.present()});return function(t,O){return v.apply(this,arguments)}}(),e=(v,m)=>{const t=m.shadowRoot,O=v.create().addElement(null==t?void 0:t.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),n=v.create().addElement(null==t?void 0:t.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(-100%)"},{offset:1,transform:"translateX(0%)"}]);return v.create().addElement(m).easing("ease-out").duration(300).addAnimation([O,n])},_=(v,m)=>e(v,m).direction("reverse"),r=(v,m)=>{const t=m.shadowRoot,O=v.create().addElement(null==t?void 0:t.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),n=v.create().addElement(null==t?void 0:t.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(100%)"},{offset:1,transform:"translateX(0%)"}]);return v.create().addElement(m).easing("ease-out").duration(300).addAnimation([O,n])},C=(v,m)=>r(v,m).direction("reverse")},8186:(I,x,s)=>{s.d(x,{B:()=>b});var M=s(5861);const b=function(){var y=(0,M.Z)(function*(e,_,r){var C,v,m;r&&(_.message||(_.message=null!==(m=null==r?void 0:r.returnmsg)&&void 0!==m?m:0==(null==r?void 0:r.returncode)?"Th\xe0nh c\xf4ng!":null!=r&&r.returncode?`L\u1ed7i: #${null==r?void 0:r.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),_.icon||(_.icon=0==(null==r?void 0:r.returncode)?"checkmark-circle-sharp":null!=r&&r.returncode?"alert-circle-outline":"close-circle-sharp"),_.color||(_.color=0==(null==r?void 0:r.returncode)?"success":null!=r&&r.returncode?"warning":"danger"));return _.position||(_.position="bottom"),_.icon||(_.icon="bulb-outline"),_.color||(_.color="secondary"),_.duration=null!==(C=_.duration)&&void 0!==C?C:3e3,_.animated=null===(v=_.animated)||void 0===v||v,_.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield e.create(_)});return function(_,r,C){return y.apply(this,arguments)}}()},5470:(I,x,s)=>{s.d(x,{Z:()=>e,y:()=>y});var M=s(5879),b=s(6593);let y=(()=>{class _{constructor(C){this.sanitizer=C}transform(C,v){switch(v){case"html":return this.sanitizer.bypassSecurityTrustHtml(C);case"style":return this.sanitizer.bypassSecurityTrustStyle(C);case"script":return this.sanitizer.bypassSecurityTrustScript(C);case"url":return this.sanitizer.bypassSecurityTrustUrl(C);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(C);default:throw new Error(`SafePipe unable to bypass security for invalid type: ${v}`)}}}return _.\u0275fac=function(C){return new(C||_)(M.Y36(b.H7,16))},_.\u0275pipe=M.Yjl({name:"safe",type:_,pure:!0}),_})(),e=(()=>{class _{}return _.\u0275fac=function(C){return new(C||_)},_.\u0275mod=M.oAB({type:_}),_.\u0275inj=M.cJS({}),_})()}}]);