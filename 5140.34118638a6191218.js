(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5140],{1062:(q,R,u)=>{"use strict";u.d(R,{Z:()=>e,m:()=>l});var b=u(5861),J=u(2014);const D=new J.K({name:"_localDataDB",driverOrder:[J.N.IndexedDB,J.N.LocalStorage]}),F="ui-config",e=function(){var x=(0,b.Z)(function*(M){yield D.create();try{var E=(yield D.get(F))||{};"function"==typeof M.callback&&M.callback(E)}catch(T){"function"==typeof M.callback&&M.callback(null),console.error(T)}});return function(E){return x.apply(this,arguments)}}(),l=function(){var x=(0,b.Z)(function*(M){yield D.create(),M.params=M.params||{};try{var E=(yield D.get(F))||{};Object.assign(E,M.params),yield D.set(F,E),"function"==typeof M.callback&&M.callback(E)}catch(T){"function"==typeof M.callback&&M.callback(null),console.error(T)}});return function(E){return x.apply(this,arguments)}}()},8247:(q,R,u)=>{"use strict";u.d(R,{D:()=>J});var b=u(4459);function J(D){D.params=D.params||{},(0,b.cd)({url:"api/Lookup/get",params:{lookup_key:D.params.lookup_key||null},success:F=>{"function"==typeof D.callback&&D.callback(null==F?void 0:F.data)},error:F=>{"function"==typeof D.callback&&D.callback(null),console.error(D,F)},loading:D.loading})}},6240:(q,R,u)=>{"use strict";u.d(R,{Bm:()=>J,YM:()=>D,iS:()=>e,o5:()=>F});var b=u(4459);function J(l){var x,M,E,T,a,m,t,n,P,C,I;l.params=l.params||{},l.params.page=l.params.page||1,l.params.limit=l.params.limit||1,(0,b.cd)({url:"api/Media/Search",params:{getby:null!==(x=l.params.userid)&&void 0!==x?x:null,global:null!==(M=l.params.global)&&void 0!==M?M:null,media_id:null!==(E=l.params.media_id)&&void 0!==E?E:null,media_title:null!==(T=l.params.media_title)&&void 0!==T?T:null,v_mediatype:null!==(a=l.params.v_mediatype)&&void 0!==a?a:null,v_mediatypes:null!==(m=l.params.v_mediatypes)&&void 0!==m?m:null,topic_id:null!==(t=l.params.topic_id)&&void 0!==t?t:null,category_id:null!==(n=l.params.category_id)&&void 0!==n?n:null,tags:null!==(P=l.params.tags)&&void 0!==P?P:null,sortfield:null!==(C=l.params.sortfield)&&void 0!==C?C:null,sorttype:null!==(I=l.params.sorttype)&&void 0!==I?I:null,posstart:(l.params.page-1)*l.params.limit,numofrow:l.params.limit},success:w=>{var U;"function"==typeof l.callback&&l.callback(null!==(U=w.data)&&void 0!==U?U:null)},error:w=>{"function"==typeof l.callback&&l.callback(),console.error(w)},loading:l.loading})}function D(l){var x,M;l.params=l.params||{},(0,b.cd)({url:"api/Media/Detail",params:{getby:null!==(x=l.params.userid)&&void 0!==x?x:null,media_id:null!==(M=l.params.media_id)&&void 0!==M?M:null},success:E=>{var T;"function"==typeof l.callback&&l.callback(null!==(T=E.data)&&void 0!==T?T:null)},error:E=>{"function"==typeof l.callback&&l.callback(),console.error(E)},loading:l.loading})}function F(l){var x,M,E,T,a,m,t,n,P,C,I,w,U,K,W,j,G;l.params=l.params||{},(0,b.T1)({url:"api/Media/AddUpdate",params:{media_id:null!==(x=l.params.media_id)&&void 0!==x?x:null,media_title:null!==(M=l.params.media_title)&&void 0!==M?M:null,media_description:null!==(E=l.params.media_description)&&void 0!==E?E:null,media_content:null!==(T=l.params.media_content)&&void 0!==T?T:null,filepath:null!==(a=l.params.filepath)&&void 0!==a?a:null,filepath_extract:null!==(m=l.params.filepath_extract)&&void 0!==m?m:null,link_file:null!==(t=l.params.link_file)&&void 0!==t?t:null,link_share:null!==(n=l.params.link_share)&&void 0!==n?n:null,cover:null!==(P=l.params.cover)&&void 0!==P?P:null,v_mediatype:null!==(C=l.params.v_mediatype)&&void 0!==C?C:null,v_osstype:null!==(I=l.params.v_osstype)&&void 0!==I?I:null,v_sharingmode:null!==(w=l.params.v_sharingmode)&&void 0!==w?w:null,topic_id:null!==(U=l.params.topic_id)&&void 0!==U?U:null,category_id:null!==(K=l.params.category_id)&&void 0!==K?K:null,tags:null!==(W=l.params.tags)&&void 0!==W?W:null,createdby:null!==(j=l.params.userid)&&void 0!==j?j:null,modifiedby:null!==(G=l.params.userid)&&void 0!==G?G:null},success:B=>{var Y;"function"==typeof l.callback&&l.callback(null!==(Y=B.data)&&void 0!==Y?Y:null)},error:B=>{"function"==typeof l.callback&&l.callback(),console.error(B)},loading:l.loading})}function e(l){var x,M,E;l.params=l.params||{},(0,b.tD)({url:"api/Media/Delete",params:{deletedby:null!==(x=l.params.userid)&&void 0!==x?x:null,media_id:null!==(M=l.params.media_id)&&void 0!==M?M:null,createdby:null!==(E=l.params.userid)&&void 0!==E?E:null},success:T=>{var a;"function"==typeof l.callback&&l.callback(null!==(a=T.data)&&void 0!==a?a:null)},error:T=>{"function"==typeof l.callback&&l.callback(),console.error(T)},loading:l.loading})}},3938:(q,R,u)=>{"use strict";u.d(R,{GX:()=>J,IX:()=>F,hh:()=>D});var b=u(4459);function J(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,b.cd)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}function D(e){e.params=e.params||{},(0,b.T1)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}function F(e){e.params=e.params||{},(0,b.tD)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}},1529:(q,R,u)=>{"use strict";u.d(R,{G4:()=>e,NP:()=>M,r7:()=>F,u4:()=>l,zS:()=>x});var b=u(4459),J=u(3589),D=u(1862);function F(a){a.params=a.params||{},(0,b.OL)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/download-image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{url:a.params.url||null},success:m=>{var t;"function"==typeof a.callback&&(null!=m&&null!==(t=m.data)&&void 0!==t&&t.StatusCode?a.callback():a.callback(URL.createObjectURL(null==m?void 0:m.data)))},error:m=>{"function"==typeof a.callback&&a.callback(),console.error(m)},loading:a.loading})}function e(a){var m,t,n;a.params=a.params||{};let P=null!==(m=a.callback)&&void 0!==m?m:w=>{console.log(w)},C=null===(t=a.params.url)||void 0===t?void 0:t.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""),I=(null==C||null===(n=C.split("/"))||void 0===n||null===(n=n.pop())||void 0===n?void 0:n.toLocaleLowerCase())||"image.png";F({params:{url:C},callback:w=>{w?(0,D.d4)(w,I,"image/x-png",U=>{U?(0,J.z)({params:{file:U,subFolder:"material/aitool",fileType:"image"},callback:K=>{0==(null==K?void 0:K.ReturnCode)?P(K):P()}}):P()}):P()},loading:a.loading})}function l(a){if(a.params=a.params||{},"2.0"==a.params.version)return function E(a){if(a.params=a.params||{},a.params.size){let m=a.params.size.split("x");a.params.width=parseInt(m[0]),a.params.height=parseInt(m[1])}(0,b.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{prompt:a.params.prompt||"Superheroes flying in the sky with chibi style",width:a.params.width||512,height:a.params.height||512,steps:20},success:m=>{"function"==typeof a.callback&&a.callback(m.data||null)},error:m=>{"function"==typeof a.callback&&a.callback(),console.error(m)},loading:a.loading})}(a);(0,b.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{Prompt:a.params.prompt||"Superheroes flying in the sky with chibi style",Size:a.params.size||"256x256"},success:m=>{"function"==typeof a.callback&&a.callback(m.data||null)},error:m=>{"function"==typeof a.callback&&a.callback(),console.error(m)},loading:a.loading})}function x(a){if(a.params=a.params||{},"2.0"==a.params.version)return function T(a){a.params=a.params||{};const m=new FormData;if(m.append("prompt",a.params.prompt||null),m.append("file",a.params.file||null),a.params.size){let t=a.params.size.split("x");m.append("width",t[0]||512),m.append("height",t[1]||512)}(0,b.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof a.callback&&a.callback(t.data||null)},error:t=>{"function"==typeof a.callback&&a.callback(),console.error(t)},loading:a.loading})}(a);const m=new FormData;m.append("file",a.params.file||null),m.append("size",a.params.size||"256x256"),(0,b.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof a.callback&&a.callback(t.data||null)},error:t=>{"function"==typeof a.callback&&a.callback(),console.error(t)},loading:a.loading})}function M(a){a.params=a.params||{};const m=new FormData;m.append("prompt",a.params.prompt||null),m.append("sourceText",a.params.sourceText||null),m.append("temperature","1.0"),(0,b.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/get-gpt-action",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof a.callback&&a.callback(t.data||null)},error:t=>{"function"==typeof a.callback&&a.callback(),console.error(t)},loading:a.loading})}},865:(q,R,u)=>{"use strict";u.d(R,{s:()=>d});var b=u(5861),J=u(8107),D=u.n(J),F=u(6676),e=u.n(F),l=u(4459),x=u(6240),M=u(1529),E=u(3377),T=u(1862),a=u(8186),m=u(422),t=u(9468),n=u(3536),P=u(6814),C=u(95);function I(i,f){if(1&i&&t.GkF(0,19),2&i){t.oxw();const r=t.MAs(32);t.Q6J("ngTemplateOutlet",r)}}function w(i,f){if(1&i&&t.GkF(0,19),2&i){t.oxw();const r=t.MAs(34);t.Q6J("ngTemplateOutlet",r)}}function U(i,f){1&i&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",21),t.qZA())}function K(i,f){if(1&i){const r=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(r);const s=t.oxw(2);return t.KtG(s.download())}),t._UZ(2,"ion-icon",26),t.qZA()()}}function W(i,f){if(1&i&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",22),t.YNc(2,K,3,0,"div",23),t.qZA()),2&i){const r=t.oxw();let p;t.xp6(1),t.Tol(null!=r.response&&r.response.Data?"img-response":"img-default"),t.Q6J("src",null!==(p=null==r.response?null:r.response.Data)&&void 0!==p?p:"assets/image/no-image.svg"),t.xp6(1),t.Q6J("ngIf",null==r.response?null:r.response.Data)}}function j(i,f){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const r=f.$implicit;t.Q6J("value",r),t.xp6(1),t.Oqu(r)}}function G(i,f){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const r=f.$implicit;t.Q6J("value",r),t.xp6(1),t.Oqu(r)}}function B(i,f){if(1&i){const r=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(r);const s=t.oxw(2);return t.KtG(s.submitText2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function Y(i,f){1&i&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function $(i,f){if(1&i){const r=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1ee3i \xfd "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32)(9,"div",33)(10,"textarea",34),t.NdJ("change",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changePrompt(s))}),t.qZA()()()()(),t.TgZ(11,"div",29)(12,"div",35)(13,"div",36)(14,"label",37),t._uU(15,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(16,"select",38),t.NdJ("ngModelChange",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changeSize(s))}),t.YNc(17,j,2,2,"option",39),t.qZA()()(),t.TgZ(18,"div",29)(19,"div",35)(20,"div",36)(21,"label",37),t._uU(22,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(23,"select",38),t.NdJ("ngModelChange",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changeVersion(s))}),t.YNc(24,G,2,2,"option",39),t.qZA()()()(),t.TgZ(25,"div")(26,"div",40),t.YNc(27,B,5,0,"div",41),t.YNc(28,Y,2,0,"div",41),t.qZA()()()}if(2&i){const r=t.oxw();let p;t.xp6(10),t.Q6J("ngModel",null!==(p=r.dataForm.prompt)&&void 0!==p?p:""),t.xp6(6),t.Q6J("ngModel",r.dataForm.size),t.xp6(1),t.Q6J("ngForOf",r.sizes),t.xp6(6),t.Q6J("ngModel",r.dataForm.version),t.xp6(1),t.Q6J("ngForOf",r.versions),t.xp6(3),t.Q6J("ngIf",!r.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",r.dataForm.isloading)}}function H(i,f){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const r=f.$implicit;t.Q6J("value",r),t.xp6(1),t.Oqu(r)}}function S(i,f){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const r=f.$implicit;t.Q6J("value",r),t.xp6(1),t.Oqu(r)}}function Z(i,f){if(1&i){const r=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(r);const s=t.oxw(2);return t.KtG(s.submitImage2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function L(i,f){1&i&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function A(i,f){if(1&i){const r=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",46)(8,"div",47)(9,"div",32)(10,"div",33),t._UZ(11,"img",3),t.TgZ(12,"div",48)(13,"div",49)(14,"div")(15,"div",50),t._UZ(16,"ion-icon",51),t.qZA(),t.TgZ(17,"div",52)(18,"i"),t._uU(19,"C\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"),t.qZA()()()()()()()()()(),t.TgZ(20,"div",53)(21,"div",35)(22,"div",36)(23,"label",37),t._uU(24,"\u1ea2nh g\u1ed1c"),t.TgZ(25,"span",30),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"div",54)(28,"input",55),t.NdJ("change",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changeFile(s))}),t.qZA(),t.TgZ(29,"label",56),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",29)(32,"label"),t._uU(33,"G\u1ee3i \xfd"),t.qZA(),t.TgZ(34,"div",31)(35,"textarea",57),t.NdJ("change",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changePrompt(s))}),t.qZA()()(),t.TgZ(36,"div",29)(37,"div",35)(38,"div",36)(39,"label",37),t._uU(40,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(41,"select",38),t.NdJ("ngModelChange",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changeSize(s))}),t.YNc(42,H,2,2,"option",39),t.qZA()()(),t.TgZ(43,"div",29)(44,"div",35)(45,"div",36)(46,"label",37),t._uU(47,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(48,"select",38),t.NdJ("ngModelChange",function(s){t.CHM(r);const O=t.oxw();return t.KtG(O.changeVersion(s))}),t.YNc(49,S,2,2,"option",39),t.qZA()()()(),t.TgZ(50,"div")(51,"div",40),t.YNc(52,Z,5,0,"div",41),t.YNc(53,L,2,0,"div",41),t.qZA()()()}if(2&i){const r=t.oxw();let p,s;t.xp6(11),t.Q6J("src",null!==(p=r.dataForm.fileUrlViewer)&&void 0!==p?p:"",t.LSH),t.xp6(19),t.Oqu(null==r.dataForm.file?null:r.dataForm.file.name),t.xp6(5),t.Q6J("ngModel",null!==(s=r.dataForm.prompt)&&void 0!==s?s:""),t.xp6(6),t.Q6J("ngModel",r.dataForm.size),t.xp6(1),t.Q6J("ngForOf",r.sizes),t.xp6(6),t.Q6J("ngModel",r.dataForm.version),t.xp6(1),t.Q6J("ngForOf",r.versions),t.xp6(3),t.Q6J("ngIf",!r.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",r.dataForm.isloading)}}let d=(()=>{var i;class f{constructor(p,s,O){this.modalController=p,this.toastController=s,this.loadingController=O,this.versions=["1.0","2.0"],this.sizes=["256x256","512x512","1024x1024","1024x1792","1792x1024"],this.dataForm={version:"2.0",size:"512x512"},this.response={},this.appsettings={}}ngOnInit(){var p=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,b.Z)(function*(){p.appsettings=yield(0,l.H0)(),p.appsettings.madonvi&&(p.user=yield(0,E.iA)())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeIsFile(p){this.dataForm.isloading||(this.isFile=p)}download(){var p=this;return(0,b.Z)(function*(){var s,O;null!==(s=p.response)&&void 0!==s&&s.Data&&(0,M.r7)({params:{url:null===(O=p.response)||void 0===O?void 0:O.Data},callback:Q=>{if(Q){var k;let _=(null===(k=p.response)||void 0===k||null===(k=k.Data)||void 0===k||null===(k=k.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""))||void 0===k||null===(k=k.split("/"))||void 0===k||null===(k=k.pop())||void 0===k?void 0:k.toLocaleLowerCase())||"image.png";(0,T.d4)(Q,_,"image/x-png",y=>{y?D()(y,_,"image/x-png"):(0,a.B)(p.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(c=>{c.present()})})}else(0,a.B)(p.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(_=>{_.present()})}})})()}save(){var p=this;return(0,b.Z)(function*(){var s,O;if(p.dataForm.isloading)return(0,a.B)(p.toastController,{message:"H\xe3y \u0111\u1ee3i h\u1ec7 th\u1ed1ng ho\xe0n t\u1ea5t qu\xe1 tr\xecnh t\u1ea1o d\u1eef li\u1ec7u!"}).then(k=>{k.present()});if(null===(s=p.response)||void 0===s||!s.Data)return(0,a.B)(p.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u kh\u1edfi t\u1ea1o!"}).then(k=>{k.present()});const Q=yield p.loadingController.create({message:"\u0110ang t\u1ea3i..."});(0,M.G4)({loading:k=>{k?Q.present():Q.dismiss()},params:{url:null===(O=p.response)||void 0===O?void 0:O.Data},callback:k=>{if(k){var _,y,c;let o={};return o.filepath=k.path+"/"+(null===(_=k.file)||void 0===_?void 0:_.name),o.link_file=p.appsettings.readfileuploadurl+k.path+"/"+(null===(y=k.file)||void 0===y?void 0:y.name),o.media_title=`AI-${e()(new Date).format("YYYYMMDDHHmm(SSS)")}`,o.media_description=p.dataForm.size,o.media_content=p.isFile?void 0:p.dataForm.prompt,o.v_mediatype=m.t.IMAGE,void(0,x.o5)({loading:g=>{g?Q.present():Q.dismiss()},params:Object.assign(o,{userid:null===(c=p.user)||void 0===c?void 0:c.userid}),callback:g=>{(0,a.B)(p.toastController,{},g).then(v=>{v.present()}),0==(null==g?void 0:g.returncode)&&p.modalController.dismiss(null==g?void 0:g.id,"confirm")}})}(0,a.B)(p.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i l\xean t\u1eadp tin!"}).then(o=>{o.present()})}})})()}changeSize(p){this.dataForm.size=p}changeVersion(p){this.dataForm.version=p}changePrompt(p){var s;this.dataForm.prompt=null==p||null===(s=p.target)||void 0===s||null===(s=s.value)||void 0===s?void 0:s.trim().replace(/\s+/g," ")}changeFile(p){this.dataForm.file=void 0,p.target.files.length&&(this.dataForm.file=p.target.files[0]),this.dataForm.fileUrlViewer=this.dataForm.file?URL.createObjectURL(this.dataForm.file):void 0}submitText2Image(){var p=this;return(0,b.Z)(function*(){if(!p.dataForm.prompt)return(0,a.B)(p.toastController,{message:"H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(s=>{s.present()});(0,M.u4)({loading:s=>{p.dataForm.isloading=s},params:p.dataForm,callback:s=>{p.response=s}})})()}submitImage2Image(){var p=this;return(0,b.Z)(function*(){if(!p.dataForm.file)return(0,a.B)(p.toastController,{message:"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(s=>{s.present()});(0,M.zS)({loading:s=>{p.dataForm.isloading=s},params:p.dataForm,callback:s=>{p.response=s}})})()}}return(i=f).\u0275fac=function(p){return new(p||i)(t.Y36(n.IN),t.Y36(n.yF),t.Y36(n.HT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-modal-ai-image"]],decls:35,vars:9,consts:[["slot","end","mode","ios","color","light","fill","outline",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch","user-select-none"],[1,"col-12","col-lg-5","p-3","pr-lg-0"],[1,"prompt"],[1,"d-flex","h-100","flex-column"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"flex-grow-1","overflow-auto"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col-12","col-lg-7","p-3"],["class","response",4,"ngIf"],["typelink",""],["typefile",""],[3,"ngTemplateOutlet"],[1,"response"],["src","../../../../assets/image/gif/ai-loading.gif",1,"w-100","h-100","no-fit"],[1,"w-100","h-100",3,"src"],["class","download-box",4,"ngIf"],[1,"download-box"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/download.svg"],[1,"d-flex","h-100","flex-column","justify-content-between"],[1,"px-3","mt-2"],[1,"form-group"],[1,"ml-1","text-danger"],[1,"prompt-box"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item"],["placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","text-center"],[4,"ngIf"],[3,"value"],[1,"btn",3,"click"],["src","../../../../assets/icon/16x16/magic.svg"],["name","dots","color","dark",1,"align-middle"],[1,"ondrop-image"],["onclick","document.getElementById('inputFileAiImage').click()",1,"media-box"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-icon"],["src","../../../../assets/image-svg/uploadImage2.svg"],[1,"placeholder-text"],[1,"form-group","hide"],[1,"custom-file"],["type","file","id","inputFileAiImage","multiple","",1,"custom-file-input",3,"change"],["for","inputFileAiImage",1,"custom-file-label"],["rows","3","placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"]],template:function(p,s){1&p&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"T\u1ea1o \u1ea3nh b\u1eb1ng c\xf4ng ngh\u1ec7 AI"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return s.save()}),t.TgZ(5,"ion-label"),t._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return s.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return s.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),t.NdJ("click",function(){return s.changeIsFile(!1)}),t._uU(21,"V\u1ebd \u1ea3nh AI"),t.qZA()(),t.TgZ(22,"li",11)(23,"a",12),t.NdJ("click",function(){return s.changeIsFile(!0)}),t._uU(24,"AI - T\u1ea1o \u1ea3nh t\u01b0\u01a1ng \u0111\u1ed3ng"),t.qZA()()()(),t.TgZ(25,"div",13),t.YNc(26,I,1,1,"ng-container",14),t.YNc(27,w,1,1,"ng-container",14),t.qZA()()()(),t.TgZ(28,"div",15),t.YNc(29,U,2,0,"div",16),t.YNc(30,W,3,4,"div",16),t.qZA()()(),t.YNc(31,$,29,7,"ng-template",null,17,t.W1O),t.YNc(33,A,54,9,"ng-template",null,18,t.W1O)),2&p&&(t.xp6(9),t.Q6J("src",s.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(11),t.Tol(s.isFile?"":"active"),t.xp6(3),t.Tol(s.isFile?"active":""),t.xp6(3),t.Q6J("ngIf",!s.isFile),t.xp6(1),t.Q6J("ngIf",s.isFile),t.xp6(2),t.Q6J("ngIf",s.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",!s.dataForm.isloading))},dependencies:[P.sg,P.O5,P.tP,C.YN,C.Kr,C.Fj,C.EJ,C.JJ,C.On,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Xz,n.Q$,n.PQ,n.wd,n.sr],styles:['button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.hide[_ngcontent-%COMP%]{display:none!important}.ondrop-image[_ngcontent-%COMP%]{--color: #eee}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]{border-radius:4px;border:1px dashed rgba(51,53,74,.2);background:#FFF}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:60px}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#33333380}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]), .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%]{display:none}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]) + .placeholder[_ngcontent-%COMP%], .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{display:block}.prompt[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;color:#333;box-shadow:0 0 12px #0000001a}.prompt[_ngcontent-%COMP%]   .prompt-box[_ngcontent-%COMP%]{border:1px solid transparent}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{min-width:33%}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;background:transparent;padding-left:0}.prompt[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#eee}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade, #000)}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:160px;height:3rem;padding:0;border-radius:1.5rem;vertical-align:middle;text-align:center;font-size:14px;font-weight:400;text-transform:initial;background:#FF6A61;color:#fff}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:0;color:inherit}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){background-color:#e9e8e9}.response[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;box-shadow:0 0 12px #0000001a;line-height:0}.response[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.response[_ngcontent-%COMP%]   ion-img.no-fit[_ngcontent-%COMP%]{object-fit:none}.response[_ngcontent-%COMP%]   ion-img.img-default[_ngcontent-%COMP%]{object-fit:cover}.response[_ngcontent-%COMP%]   ion-img.img-response[_ngcontent-%COMP%]{object-fit:contain}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:1rem;width:3rem;height:3rem;margin-left:-1.5rem;line-height:0;border-radius:50%;box-shadow:0 4px 4px #00000026}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:inherit}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;font-size:26px}']}),f})()},6115:(q,R,u)=>{"use strict";u.d(R,{b:()=>S});var b=u(5861),J=u(4459),D=u(8247),F=u(6240),e=u(3589),l=u(3377),x=u(1862),M=u(422),E=u(3130),T=u(9455),a=u(8186),m=u(9403),t=u(5938),n=u(9468),P=u(3536),C=u(6814),I=u(95);function w(Z,L){if(1&Z){const A=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){n.CHM(A);const i=n.oxw();return n.KtG(i.switchModal("ai-image"))}),n._uU(1,"T\u1ea1o b\u1eb1ng AI"),n.qZA()}2&Z&&n.Tol("btn-light")}function U(Z,L){if(1&Z&&n.GkF(0,34),2&Z){n.oxw();const A=n.MAs(74);n.Q6J("ngTemplateOutlet",A)}}function K(Z,L){if(1&Z&&n.GkF(0,34),2&Z){n.oxw();const A=n.MAs(76);n.Q6J("ngTemplateOutlet",A)}}function W(Z,L){if(1&Z){const A=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.clearTopic(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function j(Z,L){if(1&Z){const A=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.clearCategory(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function G(Z,L){if(1&Z&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&Z){const A=L.$implicit;n.Q6J("value",A.lookup_value),n.xp6(1),n.Oqu(A.lookup_title)}}function B(Z,L){if(1&Z&&(n.ynx(0),n.TgZ(1,"option",41),n._uU(2,"Ch\u1ecdn lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA(),n.YNc(3,G,2,2,"option",42),n.BQk()),2&Z){const A=n.oxw(2);n.xp6(3),n.Q6J("ngForOf",A.v_mediatypes)}}function Y(Z,L){if(1&Z){const A=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"T\u1eadp tin"),n.qZA()(),n.TgZ(5,"div",26)(6,"input",36),n.NdJ("change",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.changeMediaFile(i))}),n.qZA(),n.TgZ(7,"label",37),n._uU(8),n.qZA()()()(),n.TgZ(9,"div",9)(10,"div",15)(11,"div",16)(12,"label",17),n._uU(13,"Lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA()(),n.TgZ(14,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.changeMediaType(i))}),n.YNc(15,B,4,1,"ng-container",39),n.ynx(16),n.TgZ(17,"option",40),n._uU(18,"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn theo lo\u1ea1i t\u1eadp tin"),n.qZA(),n.BQk(),n.qZA()()()}if(2&Z){const A=n.oxw();let d,i;n.xp6(8),n.Oqu(A.mediaFiles.length?"\u0110\xe3 ch\u1ecdn "+A.mediaFiles.length+" t\u1eadp tin":(null!==(d=A.media.filepath)&&void 0!==d?d:"").split("/").pop()),n.xp6(6),n.Q6J("ngModel",null!==(i=A.media.v_mediatype)&&void 0!==i?i:0),n.xp6(1),n.Q6J("ngIf",A.mediaFiles.length<=1)}}function $(Z,L){if(1&Z&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&Z){const A=L.$implicit;n.Q6J("value",A.lookup_value),n.xp6(1),n.Oqu(A.lookup_title)}}function H(Z,L){if(1&Z){const A=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"\u0110\u01b0\u1eddng d\u1eabn"),n.qZA()(),n.TgZ(5,"input",44),n.NdJ("ngModelChange",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.changeLinkShare(i))}),n.qZA()()(),n.TgZ(6,"div",9)(7,"div",15)(8,"div",16)(9,"label",17),n._uU(10,"Lo\u1ea1i li\xean k\u1ebft"),n.qZA()(),n.TgZ(11,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(A);const f=n.oxw();return n.KtG(f.changeOssType(i))}),n.TgZ(12,"option",41),n._uU(13,"Ch\u1ecdn lo\u1ea1i li\xean k\u1ebft"),n.qZA(),n.YNc(14,$,2,2,"option",42),n.qZA()()()}if(2&Z){const A=n.oxw();let d;n.xp6(5),n.Q6J("ngModel",A.media.link_share),n.xp6(6),n.Q6J("ngModel",null!==(d=A.media.v_osstype)&&void 0!==d?d:0),n.xp6(3),n.Q6J("ngForOf",A.v_osstypes)}}let S=(()=>{var Z;class L{constructor(d,i,f,r){this.modalController=d,this.toastController=i,this.loadingController=f,this.popoverController=r,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[],this.isAI=T.isai}ngOnInit(){var d=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,b.Z)(function*(){d.appsettings=yield(0,J.H0)(),d.appsettings.madonvi&&(d.user=yield(0,l.iA)(),d.readfileuploadurl=d.appsettings.readfileuploadurl||"",d.refreshData())})()}refreshData(){(0,D.D)({params:{lookup_key:"v_mediatype"},callback:d=>{this.v_mediatypes=d||[]}}),(0,D.D)({params:{lookup_key:"v_osstype"},callback:d=>{this.v_osstypes=d||[]}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(d){return this.modalController.dismiss({modalName:d},"switch")}save(){var d=this;return(0,b.Z)(function*(){let i=[];if(d.mediaCover&&i.push(new Promise((r,p)=>{(0,e.z)({params:{file:d.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:s=>{var O;0==(null==s?void 0:s.ReturnCode)&&(d.media.cover=s.path+"/"+(null===(O=s.file)||void 0===O?void 0:O.name)),r(!0)}})})),d.isLink){if(d.media.v_mediatype=M.t.LINK,!d.media.link_share)return void(0,a.B)(d.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(r=>{r.present()})}else if(!d.media.link_file){if(d.mediaFiles.length>=2){const r=yield d.loadingController.create({message:"\u0110ang t\u1ea3i..."});return r.present(),void d.recursiveUpload(p=>{p||r.dismiss()})}if(1!=d.mediaFiles.length)return void(0,a.B)(d.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(r=>{r.present()});i.push(new Promise((r,p)=>{let s=d.mediaFiles.pop();(0,e.z)({params:{file:s,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:O=>{var Q,k;0==(null==O?void 0:O.ReturnCode)&&(d.media.filepath=O.path+"/"+(null===(Q=O.file)||void 0===Q?void 0:Q.name),d.media.link_file=d.readfileuploadurl+O.path+"/"+(null===(k=O.file)||void 0===k?void 0:k.name),d.media.media_title||(d.media.media_title=O.name.replace(/.[a-zA-Z0-9]+$/,"")),d.media.v_mediatype||d.v_mediatypes.every(_=>{var y,c;return null===(y=_.lookup_note)||void 0===y||null===(y=y.replace(/\s+/g,""))||void 0===y||!y.split(",").includes(null===(c=O.file)||void 0===c?void 0:c.extension)||(d.media.v_mediatype=_.lookup_value,!1)})),r(!0)}})}))}const f=yield d.loadingController.create({message:"\u0110ang t\u1ea3i..."});f.present(),Promise.all(i).then(r=>{var p;(0,F.o5)({params:Object.assign({},d.media,{userid:null===(p=d.user)||void 0===p?void 0:p.userid}),callback:s=>{(0,a.B)(d.toastController,{},s).then(O=>{O.present()}),0==(null==s?void 0:s.returncode)&&d.modalController.dismiss(null==s?void 0:s.id,"confirm")},loading:s=>{s||f.dismiss()}})})})()}recursiveUpload(d){if(this.mediaFiles.length){let i={topic_id:this.media.topic_id,category_id:this.media.category_id},f=this.mediaFiles.pop();(0,e.z)({params:{file:f,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:r=>{var p,s,O;0==(null==r?void 0:r.ReturnCode)?(i.filepath=r.path+"/"+(null===(p=r.file)||void 0===p?void 0:p.name),i.link_file=this.readfileuploadurl+r.path+"/"+(null===(s=r.file)||void 0===s?void 0:s.name),i.media_title=r.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(Q=>{var k,_;return null===(k=Q.lookup_note)||void 0===k||null===(k=k.replace(/\s+/g,""))||void 0===k||!k.split(",").includes(null===(_=r.file)||void 0===_?void 0:_.extension)||(i.v_mediatype=Q.lookup_value,!1)}),(0,F.o5)({params:Object.assign(i,{userid:null===(O=this.user)||void 0===O?void 0:O.userid}),callback:Q=>{this.recursiveUpload(d)}})):this.recursiveUpload(d)}})}else d(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(d){var i=this;return(0,b.Z)(function*(){const f=yield i.popoverController.create({component:t.a,componentProps:{selectedId:i.media.topic_id,filterFor:"media"},event:d,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(r=>{var p,s;"confirm"==r.role&&Object.assign(i.media,{topic_id:null===(p=r.data)||void 0===p?void 0:p.topic_id,topic_title:null===(s=r.data)||void 0===s?void 0:s.topic_title})}),f.present()})()}clearTopic(d){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(d){var i;this.media.topic_id=null!==(i=parseInt(d))&&void 0!==i?i:0}presentPopoverCategory(d){var i=this;return(0,b.Z)(function*(){const f=yield i.popoverController.create({component:m.l,componentProps:{selectedId:i.media.category_id,filterFor:"media"},event:d,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(r=>{var p,s;"confirm"==r.role&&Object.assign(i.media,{category_id:null===(p=r.data)||void 0===p?void 0:p.category_id,category_title:null===(s=r.data)||void 0===s?void 0:s.category_title})}),f.present()})()}clearCategory(d){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(d){var i;this.media.category_id=null!==(i=parseInt(d))&&void 0!==i?i:0}changeMediaTitle(d){var i;this.media.media_title=null==d||null===(i=d.target)||void 0===i?void 0:i.value}changeMediaDescription(d){var i;this.media.media_description=null==d||null===(i=d.target)||void 0===i?void 0:i.value}changeMediaContent(d){var i;this.media.media_content=null==d||null===(i=d.target)||void 0===i?void 0:i.value}changeMediaType(d){this.media.v_mediatype=d?parseInt(d):0}changeOssType(d){this.media.v_osstype=d?parseInt(d):0}changeLinkShare(d){this.media.link_share=d,(0,x.II)(d)?this.media.v_osstype=E.e.YOUTUBE:(0,x.VJ)(d)&&(this.media.v_osstype=E.e.PHET)}changeMediaFile(d){this.mediaFiles.length=0;for(let f=0,r=null===(i=d.target)||void 0===i?void 0:i.files.length;f<r;f++){var i;this.mediaFiles.push(d.target.files[f])}if(1==this.mediaFiles.length){let{fileName:f,fileExtension:r}=(0,x.yB)(this.mediaFiles[0].name);this.media.media_title=f,this.media.v_mediatype=void 0,this.v_mediatypes.every(p=>{var s;return null===(s=p.lookup_note)||void 0===s||null===(s=s.replace(/\s+/g,""))||void 0===s||!s.split(",").includes(r)||(this.media.v_mediatype=p.lookup_value,!1)}),!this.mediaCover&&this.media.v_mediatype==M.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaFiles[0]))}}changeMediaCover(d){var i;if(this.mediaCover=void 0,d.target.files.length&&(this.mediaCover=d.target.files[0]),!this.mediaCover)return;let p,{fileExtension:r}=(0,x.yB)(null===(i=this.mediaCover)||void 0===i?void 0:i.name);r&&(this.v_mediatypes.every(s=>{var O;return null===(O=s.lookup_note)||void 0===O||null===(O=O.replace(/\s+/g,""))||void 0===O||!O.split(",").includes(r)||(p=s.lookup_value,!1)}),this.mediaCover&&p==M.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(d){this.isLink=d}}return(Z=L).\u0275fac=function(d){return new(d||Z)(n.Y36(P.IN),n.Y36(P.yF),n.Y36(P.HT),n.Y36(P.Dh))},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["app-modal-media-add"]],inputs:{filter:"filter"},decls:77,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"class","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","6",1,"form-control",3,"ngModel","change"],[1,"col-auto"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"w-100","h-100",3,"src"],["typefile",""],["typelink",""],[3,"ngTemplateOutlet"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModel","ngModelChange"]],template:function(d,i){if(1&d&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Th\xeam h\u1ecdc li\u1ec7u"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return i.save()}),n.TgZ(5,"ion-label"),n._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return i.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return i.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"button",11),n.NdJ("click",function(){return i.changeIsLink(!1)}),n._uU(19,"T\u1eadp tin"),n.qZA(),n.TgZ(20,"button",11),n.NdJ("click",function(){return i.changeIsLink(!0)}),n._uU(21,"Li\xean k\u1ebft"),n.qZA(),n.YNc(22,w,2,2,"button",12),n.qZA()(),n.YNc(23,U,1,1,"ng-container",13),n.YNc(24,K,1,1,"ng-container",13),n.qZA()(),n.TgZ(25,"div",7)(26,"div",14)(27,"div",9)(28,"div",15)(29,"div",16)(30,"label",17),n._uU(31,"C\u1ea5p l\u1edbp"),n.qZA()(),n._UZ(32,"input",18),n.TgZ(33,"div",19),n.YNc(34,W,2,0,"button",20),n.TgZ(35,"button",21),n.NdJ("click",function(r){return i.presentPopoverTopic(r)}),n._UZ(36,"ion-icon",22),n.qZA()()()(),n.TgZ(37,"div",9)(38,"div",15)(39,"div",16)(40,"label",17),n._uU(41,"M\xf4n h\u1ecdc"),n.qZA()(),n._UZ(42,"input",18),n.TgZ(43,"div",19),n.YNc(44,j,2,0,"button",20),n.TgZ(45,"button",21),n.NdJ("click",function(r){return i.presentPopoverCategory(r)}),n._UZ(46,"ion-icon",22),n.qZA()()()(),n.TgZ(47,"div",9)(48,"div",15)(49,"div",16)(50,"label",17),n._uU(51,"T\xean h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(52,"input",23),n.NdJ("change",function(r){return i.changeMediaTitle(r)}),n.qZA()()(),n.TgZ(53,"div",9)(54,"div",15)(55,"div",16)(56,"label",17),n._uU(57,"M\xf4 t\u1ea3"),n.qZA()(),n.TgZ(58,"textarea",24),n.NdJ("change",function(r){return i.changeMediaDescription(r)}),n.qZA()()()(),n.TgZ(59,"div",25)(60,"div",9)(61,"div",15)(62,"div",16)(63,"label",17),n._uU(64,"\u1ea2nh b\xeca"),n.qZA()(),n.TgZ(65,"div",26)(66,"input",27),n.NdJ("change",function(r){return i.changeMediaCover(r)}),n.qZA(),n.TgZ(67,"label",28),n._uU(68),n.qZA()()()(),n.TgZ(69,"div",9)(70,"div",29)(71,"div",30),n._UZ(72,"ion-img",31),n.qZA()()()()()()(),n.YNc(73,Y,19,3,"ng-template",null,32,n.W1O),n.YNc(75,H,15,3,"ng-template",null,33,n.W1O)),2&d){let f,r;n.xp6(9),n.Q6J("src",i.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(9),n.Tol(i.isLink?"btn-light":"btn-primary"),n.xp6(2),n.Tol(i.isLink?"btn-primary":"btn-light"),n.xp6(2),n.Q6J("ngIf",i.isAI),n.xp6(1),n.Q6J("ngIf",!i.isLink),n.xp6(1),n.Q6J("ngIf",i.isLink),n.xp6(8),n.Q6J("value",null!==(f=i.media.topic_title)&&void 0!==f?f:""),n.xp6(2),n.Q6J("ngIf",i.media.topic_id),n.xp6(8),n.Q6J("value",null!==(r=i.media.category_title)&&void 0!==r?r:""),n.xp6(2),n.Q6J("ngIf",i.media.category_id),n.xp6(8),n.Q6J("ngModel",i.media.media_title),n.xp6(6),n.Q6J("ngModel",i.media.media_description),n.xp6(10),n.Oqu(null==i.mediaCover?null:i.mediaCover.name),n.xp6(4),n.Q6J("src",i.fileurl||"assets/image-png/media-default.jpg")}},dependencies:[C.sg,C.O5,C.tP,I.YN,I.Kr,I.Fj,I.EJ,I.JJ,I.On,P.YG,P.Sm,P.W2,P.Gu,P.gu,P.Xz,P.Q$,P.wd,P.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),L})()},5630:(q,R,u)=>{"use strict";u.d(R,{M:()=>k});var b=u(1461),J=u(8247),D=u(3938),F=u(4041),e=u(9468),l=u(3536),x=u(6814);function M(_,y){if(1&_&&e.GkF(0,23),2&_){e.oxw();const c=e.MAs(23);e.Q6J("ngTemplateOutlet",c)}}function E(_,y){if(1&_&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Lo\u1ea1i t\u1eadp tin"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&_){e.oxw();const c=e.MAs(25);e.xp6(5),e.Q6J("ngTemplateOutlet",c)}}function T(_,y){if(1&_&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Th\u1ebb"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&_){e.oxw();const c=e.MAs(27);e.xp6(5),e.Q6J("ngTemplateOutlet",c)}}function a(_,y){if(1&_&&(e.TgZ(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"C\u1ea5p l\u1edbp"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&_){e.oxw();const c=e.MAs(29);e.xp6(5),e.Q6J("ngTemplateOutlet",c)}}function m(_,y){if(1&_&&(e.TgZ(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"M\xf4n h\u1ecdc"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&_){e.oxw();const c=e.MAs(33);e.xp6(5),e.Q6J("ngTemplateOutlet",c)}}function t(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",37),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.clearFilterTopic(g))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=c.filter.topic_title)&&void 0!==o?o:"C\u1ea5p l\u1edbp")}}function n(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",40),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.clearFilterCategory(g))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=c.filter.category_title)&&void 0!==o?o:"M\xf4n h\u1ecdc")}}function P(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",41),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.clearFilterTags(g))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=c.filter.tags_key)&&void 0!==o?o:"Th\u1ebb")}}function C(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.clearFilterMediaType(g,v.filter.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=c.filter.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function I(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){const h=e.CHM(c).$implicit,N=e.oxw(2);return e.KtG(N.clearFilterMediaType(g,h.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=y.$implicit;let o;e.xp6(4),e.Oqu(null!==(o=c.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function w(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",43),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.clearSearch(g))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&_){const c=e.oxw(2);e.xp6(4),e.Oqu(c.filter.search)}}const U=function(){return[]};function K(_,y){if(1&_&&(e.TgZ(0,"div",30)(1,"div",31)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,t,7,1,"div",33),e.YNc(6,n,7,1,"div",33),e.YNc(7,P,7,1,"div",33),e.YNc(8,C,7,1,"div",33),e.YNc(9,I,7,1,"div",34),e.YNc(10,w,7,1,"div",33),e.qZA()(),e._UZ(11,"hr")),2&_){const c=e.oxw();let o;e.xp6(3),e.hij("B\u1ed9 l\u1ecdc \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng (",c.counter(),")"),e.xp6(2),e.Q6J("ngIf",c.filter.topic_id),e.xp6(1),e.Q6J("ngIf",c.filter.category_id),e.xp6(1),e.Q6J("ngIf",c.filter.tags_id),e.xp6(1),e.Q6J("ngIf",c.filter.v_mediatype),e.xp6(1),e.Q6J("ngForOf",null!==(o=c.filter.v_mediatypes)&&void 0!==o?o:e.DdM(7,U)),e.xp6(1),e.Q6J("ngIf",c.filter.search)}}function W(_,y){if(1&_){const c=e.EpF();e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-checkbox",47),e.NdJ("ionChange",function(g){e.CHM(c);const v=e.oxw(2);return e.KtG(v.changeMediaType(g))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.BQk()}if(2&_){const c=y.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("value",c.lookup_value)("checked",o.checkedMediaType(c.lookup_value)),e.xp6(2),e.Oqu(c.lookup_title)}}function j(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.NdJ("ionChange",function(g){e.CHM(c);const v=e.oxw();return e.KtG(v.changeMediaType(g))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"T\u1ea5t c\u1ea3"),e.qZA()(),e.YNc(5,W,5,3,"ng-container",46),e.qZA()}if(2&_){const c=e.oxw();e.xp6(2),e.Q6J("value",0),e.xp6(3),e.Q6J("ngForOf",c.v_mediatypes)}}function G(_,y){if(1&_){const c=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){const v=e.CHM(c).$implicit,h=e.oxw(2);return e.KtG(h.applyFilterTags({tags_id:v.tags_id,tags_key:v.tags_key}))}),e._uU(2),e.qZA(),e.BQk()}if(2&_){const c=y.$implicit,o=e.oxw(2);e.xp6(1),e.Tol(c.tags_id==o.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.uIk("data-id",c.tags_id),e.xp6(1),e.Oqu(c.tags_key)}}function B(_,y){if(1&_&&(e.TgZ(0,"div",48),e.YNc(1,G,3,4,"ng-container",46),e.qZA()),2&_){const c=e.oxw();e.xp6(1),e.Q6J("ngForOf",c.filterTags(c.tagss))}}const Y=function(_){return{$implicit:_}};function $(_,y){if(1&_&&e.GkF(0,52),2&_){const c=y.$implicit;e.oxw(2);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,c))}}function H(_,y){if(1&_&&(e.TgZ(0,"div",50)(1,"ion-list",44)(2,"ul"),e.YNc(3,$,1,4,"ng-container",51),e.qZA()()()),2&_){const c=e.oxw();e.xp6(3),e.Q6J("ngForOf",c.filterTopic(c.topics))}}function S(_,y){1&_&&e._UZ(0,"ion-icon",59)}function Z(_,y){1&_&&e._UZ(0,"ion-icon",60)}function L(_,y){if(1&_&&e.GkF(0,52),2&_){const c=y.$implicit;e.oxw(3);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,c))}}function A(_,y){if(1&_&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,L,1,4,"ng-container",51),e.qZA(),e.BQk()),2&_){const c=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterTopic(o.topics,c.topic_id))}}function d(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const v=e.CHM(c).$implicit,h=e.oxw();return e.KtG(h.applyFilterTopic({topic_id:v.topic_id,topic_title:v.topic_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(g){const h=e.CHM(c).$implicit,N=e.oxw();return e.KtG(N.expandTopic(g,h.topic_id,h.isexpanded))}),e.YNc(3,S,1,0,"ion-icon",55),e.YNc(4,Z,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,A,3,1,"ng-container",58),e.qZA()}if(2&_){const c=y.$implicit,o=e.oxw();e.xp6(1),e.Tol(c.topic_id==o.filter.topic_id?"actived":""),e.xp6(1),e.uIk("style",c.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!c.isexpanded),e.xp6(1),e.Q6J("ngIf",c.isexpanded),e.xp6(1),e.Q6J("title",c.topic_title),e.xp6(1),e.Oqu(c.topic_title),e.xp6(1),e.Q6J("ngIf",c.isexpanded)}}function i(_,y){if(1&_&&e.GkF(0,52),2&_){const c=y.$implicit;e.oxw(2);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,c))}}function f(_,y){if(1&_&&(e.TgZ(0,"div",61)(1,"ion-list",44)(2,"ul"),e.YNc(3,i,1,4,"ng-container",51),e.qZA()()()),2&_){const c=e.oxw();e.xp6(3),e.Q6J("ngForOf",c.filterCategory(c.categorys))}}function r(_,y){1&_&&e._UZ(0,"ion-icon",59)}function p(_,y){1&_&&e._UZ(0,"ion-icon",60)}function s(_,y){if(1&_&&e.GkF(0,52),2&_){const c=y.$implicit;e.oxw(3);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,c))}}function O(_,y){if(1&_&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,s,1,4,"ng-container",51),e.qZA(),e.BQk()),2&_){const c=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterCategory(o.categorys,c.category_id))}}function Q(_,y){if(1&_){const c=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const v=e.CHM(c).$implicit,h=e.oxw();return e.KtG(h.applyFilterCategory({category_id:v.category_id,category_title:v.category_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(g){const h=e.CHM(c).$implicit,N=e.oxw();return e.KtG(N.expandCategory(g,h.category_id,h.isexpanded))}),e.YNc(3,r,1,0,"ion-icon",55),e.YNc(4,p,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,O,3,1,"ng-container",58),e.qZA()}if(2&_){const c=y.$implicit,o=e.oxw();e.xp6(1),e.Tol(c.category_id==o.filter.category_id?"actived":""),e.xp6(1),e.uIk("style",c.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!c.isexpanded),e.xp6(1),e.Q6J("ngIf",c.isexpanded),e.xp6(1),e.Q6J("title",c.category_title),e.xp6(1),e.Oqu(c.category_title),e.xp6(1),e.Q6J("ngIf",c.isexpanded)}}let k=(()=>{var _;class y{constructor(o){this.modalController=o,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var o;null!==(o=this.filter.v_mediatypes)&&void 0!==o&&o.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,J.D)({params:{lookup_key:"v_mediatype"},callback:g=>{this.v_mediatypes=g||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let o=0;return this.filter.search&&(o+=1),this.filter.topic_id&&(o+=1),this.filter.category_id&&(o+=1),this.filter.tags_id&&(o+=1),this.filter.v_mediatypes&&(o+=this.filter.v_mediatypes.length),o}changeMediaType(o){let{value:g,checked:v}=o.detail;if(0==g)return void(this.filter.v_mediatypes=v?this.v_mediatypes.map(z=>({v_mediatype:z.lookup_value,v_mediatype_title:z.lookup_title})):[]);let h=this.v_mediatypes.find(z=>z.lookup_value==g);var N;v?this.filter.v_mediatypes?this.filter.v_mediatypes.find(z=>z.v_mediatype==g)||this.filter.v_mediatypes.push({v_mediatype:null==h?void 0:h.lookup_value,v_mediatype_title:null==h?void 0:h.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==h?void 0:h.lookup_value,v_mediatype_title:null==h?void 0:h.lookup_title}]:this.filter.v_mediatypes=null===(N=this.filter.v_mediatypes)||void 0===N?void 0:N.filter(z=>z.v_mediatype!=g)}checkedMediaType(o){var g;return!(null===(g=this.filter.v_mediatypes)||void 0===g||!g.find(v=>v.v_mediatype==o))}clearSearch(o){Object.assign(this.filter,{search:null})}clearFilterMediaType(o,g){this.changeMediaType({detail:{value:g,checked:!1}})}refreshDataTags(o){this.loadTags(void 0,o,!0)}loadTags(o,g,v){var h;(0,D.GX)({params:{userid:null===(h=this.user)||void 0===h?void 0:h.userid,tags_pid:o,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:N=>{var z,V;this.tagss=v?null!==(z=null==N?void 0:N.tags)&&void 0!==z?z:[]:this.tagss.concat(null!==(V=null==N?void 0:N.tags)&&void 0!==V?V:[]),g&&g()}})}filterTags(o,g){return o.filter(g?v=>v.tags_pid==g:v=>null==v.tags_pid||0==v.tags_pid)}expandTags(o,g,v){o.preventDefault(),o.stopPropagation(),this.tagss.filter(h=>h.tags_id==g).forEach(h=>{h.isexpanded=!v,h.isloadedchild||(h.isloadedchild=!0,this.loadTags(h.tags_id))})}applyFilterTags(o){Object.assign(this.filter,this.filter.tags_id==o.tags_id?{tags_id:null,tags_key:null}:o)}clearFilterTags(o){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(o){this.loadTopic(void 0,o,!0)}loadTopic(o,g,v){var h;(0,F.w)({params:{userid:null===(h=this.user)||void 0===h?void 0:h.userid,topic_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.topics=v?null!=N?N:[]:this.topics.concat(null!=N?N:[]),g&&g()}})}filterTopic(o,g){return o.filter(g?v=>v.topic_pid==g:v=>null==v.topic_pid||0==v.topic_pid)}expandTopic(o,g,v){o.preventDefault(),o.stopPropagation(),this.topics.filter(h=>h.topic_id==g).forEach(h=>{h.isexpanded=!v,h.isloadedchild||(h.isloadedchild=!0,this.loadTopic(h.topic_id))})}applyFilterTopic(o){Object.assign(this.filter,this.filter.topic_id==o.topic_id?{topic_id:null,topic_title:null}:o)}clearFilterTopic(o){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(o){this.loadCategory(void 0,o,!0)}loadCategory(o,g,v){var h;(0,b.b)({params:{userid:null===(h=this.user)||void 0===h?void 0:h.userid,category_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.categorys=v?null!=N?N:[]:this.categorys.concat(null!=N?N:[]),g&&g()}})}filterCategory(o,g){return o.filter(g?v=>v.category_pid==g:v=>null==v.category_pid||0==v.category_pid)}expandCategory(o,g,v){o.preventDefault(),o.stopPropagation(),this.categorys.filter(h=>h.category_id==g).forEach(h=>{h.isexpanded=!v,h.isloadedchild||(h.isloadedchild=!0,this.loadCategory(h.category_id))})}applyFilterCategory(o){Object.assign(this.filter,this.filter.category_id==o.category_id?{category_id:null,category_title:null}:o)}clearFilterCategory(o){Object.assign(this.filter,{category_id:null,category_title:null})}}return(_=y).\u0275fac=function(o){return new(o||_)(e.Y36(l.IN))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:36,vars:7,consts:[["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../../assets/icon-svg/arrow-right.svg"],["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../../assets/icon-svg/dashboard/category.svg"],["src","../../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"value","ionChange"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"value","checked","ionChange"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(o,g){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\u1ed9 l\u1ecdc"),e.qZA(),e.TgZ(4,"ion-label",1),e.NdJ("click",function(){return g.clean()}),e._uU(5,"X\xf3a t\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return g.close()}),e._UZ(8,"ion-icon",4),e.qZA()()()(),e._UZ(9,"hr",5),e.TgZ(10,"ion-content",6),e.YNc(11,M,1,1,"ng-container",7),e.TgZ(12,"ion-accordion-group",8),e.YNc(13,E,6,1,"ion-accordion",9),e.YNc(14,T,6,1,"ion-accordion",10),e.YNc(15,a,6,1,"ion-accordion",11),e.YNc(16,m,6,1,"ion-accordion",12),e.qZA()(),e.TgZ(17,"ion-footer")(18,"ion-item",13),e.NdJ("click",function(){return g.apply()}),e.TgZ(19,"ion-label",14),e._uU(20,"\xc1p d\u1ee5ng"),e.qZA(),e._UZ(21,"ion-icon",15),e.qZA()(),e.YNc(22,K,12,8,"ng-template",null,16,e.W1O),e.YNc(24,j,6,2,"ng-template",null,17,e.W1O),e.YNc(26,B,2,1,"ng-template",null,18,e.W1O),e.YNc(28,H,4,1,"ng-template",null,19,e.W1O),e.YNc(30,d,8,8,"ng-template",null,20,e.W1O),e.YNc(32,f,4,1,"ng-template",null,21,e.W1O),e.YNc(34,Q,8,8,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(11),e.Q6J("ngIf",g.filter.topic_id||g.filter.category_id||g.filter.tags_id||g.filter.v_mediatype||(null==g.filter.v_mediatypes?null:g.filter.v_mediatypes.length)||g.filter.search),e.xp6(1),e.Q6J("multiple",!0)("value",g.accordionValue),e.xp6(1),e.Q6J("ngIf",g.v_mediatypes.length),e.xp6(1),e.Q6J("ngIf",g.tagss.length),e.xp6(1),e.Q6J("ngIf",g.topics.length),e.xp6(1),e.Q6J("ngIf",g.categorys.length))},dependencies:[x.sg,x.O5,x.tP,l.We,l.eh,l.YG,l.Sm,l.nz,l.W2,l.fr,l.Gu,l.gu,l.Ie,l.Q$,l.q_,l.wd,l.sr,l.w],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),y})()},8262:(q,R,u)=>{"use strict";u.d(R,{W:()=>D});var b=u(9468),J=u(3536);let D=(()=>{var F;class e{constructor(x){this.popoverController=x}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(F=e).\u0275fac=function(x){return new(x||F)(b.Y36(J.Dh))},F.\u0275cmp=b.Xpm({type:F,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId"},decls:9,vars:0,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(x,M){1&x&&(b.TgZ(0,"div",0)(1,"div",1)(2,"small"),b._uU(3,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),b.qZA()(),b.TgZ(4,"div",2)(5,"button",3),b.NdJ("click",function(){return M.cancel()}),b._uU(6,"\u0110\xf3ng"),b.qZA(),b.TgZ(7,"button",4),b.NdJ("click",function(){return M.confirm()}),b._uU(8,"X\xf3a"),b.qZA()()())},styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),e})()},5511:(q,R,u)=>{"use strict";u.d(R,{R:()=>l,v:()=>e});var b=u(5861),J=u(3377),D=u(2695),F=u(4459);const e=function(){var x=(0,b.Z)(function*(){return yield(0,J.iA)()});return function(){return x.apply(this,arguments)}}(),l=function(){var x=(0,b.Z)(function*(M){let E=null!=M?M:yield(0,F.H0)(),T=yield(0,J.iA)();return(!E.madonvi||!T.userid||E.madonvi!=(null==T?void 0:T.madonvi))&&window.location.replace(D.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),T});return function(E){return x.apply(this,arguments)}}()},3731:(q,R,u)=>{"use strict";u.d(R,{T6:()=>T,ds:()=>M,zq:()=>E});var b=u(8107),J=u.n(b),D=u(4981),F=u(8530),e=u(3589),l=u(6623);const x=(a,m)=>{var t=document.createElement("input");t.type="file",t.accept=a.accept,t.style.display="none",t.style.visibility="hidden",t.addEventListener("change",n=>{var P;n.preventDefault();let C=(null===(P=n.target)||void 0===P?void 0:P.files)||[];C.length>0&&m(C),document.body.removeChild(t)}),document.body.appendChild(t),t.click()},M=(a,m,t)=>{let n=null!=m?m:P=>console.log(P);x({accept:".lvb"},P=>{(0,e.z)({loading:t,params:{file:P[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:C=>{var I,w;0==(null==C?void 0:C.ReturnCode)?(I=I=>{var w;a.board_id?(0,F.UK)({loading:t,params:{userid:a.userid,board_id:a.board_id,filepath:C.path+"/"+(null===(w=C.file)||void 0===w?void 0:w.name)},callback:U=>{U&&(U.id=a.board_id),n(U)}}):n(I)},a.board_id?I():(0,F.Ux)({loading:t,params:{userid:a.userid,board_title:(null===(w=C.name)||void 0===w?void 0:w.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:U=>{0==(null==U?void 0:U.returncode)&&(a.board_id=null==U?void 0:U.id),I(U)}})):n({returncode:null==C?void 0:C.ReturnCode,returnmsg:null==C?void 0:C.ReturnName})}})})},E=(a,m)=>{(0,F.gK)({params:{userid:a.userid,board_id:a.board_id},callback:(t,n)=>{0==(null==t?void 0:t.returncode)&&J()(`${null==n?void 0:n.readfileuploadurl}${null==t?void 0:t.token}`),m&&m(t)},loading:t=>{}})},T=(a,m)=>{let t=null!=m?m:n=>console.log(n);x({accept:".json, application/json"},n=>{var P=new FileReader;P.onload=()=>{if(P.result){let I,C=JSON.parse(P.result.toString());C&&!C.modules?I=(0,l.w)(C):"icdtV2"==(null==C?void 0:C.modules)&&(I=C),I&&(D.icdt.dataSource=I,D.icdt.data.openSlide())}t()},P.readAsText(n[0])})}},8107:function(q,R){var u,J;void 0!==(J="function"==typeof(u=function(){return function D(F,e,l){var C,I,x=window,M="application/octet-stream",E=l||M,T=F,a=!e&&!l&&T,m=document.createElement("a"),t=function(B){return String(B)},n=x.Blob||x.MozBlob||x.WebKitBlob||t,P=e||"download";if(n=n.call?n.bind(x):Blob,"true"===String(this)&&(E=(T=[T,E])[0],T=T[1]),a&&a.length<2048&&(P=a.split("/").pop().split("?")[0],m.href=a,-1!==m.href.indexOf(a))){var w=new XMLHttpRequest;return w.open("GET",a,!0),w.responseType="blob",w.onload=function(B){D(B.target.response,P,M)},setTimeout(function(){w.send()},0),w}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(T)){if(!(T.length>2096103.424&&n!==t))return navigator.msSaveBlob?navigator.msSaveBlob(j(T),P):G(T);E=(T=j(T)).type||M}else if(/([\x80-\xff])/.test(T)){for(var U=0,K=new Uint8Array(T.length),W=K.length;U<W;++U)K[U]=T.charCodeAt(U);T=new n([K],{type:E})}function j(B){for(var Y=B.split(/[:;,]/),$=Y[1],S=("base64"==Y[2]?atob:decodeURIComponent)(Y.pop()),Z=S.length,L=0,A=new Uint8Array(Z);L<Z;++L)A[L]=S.charCodeAt(L);return new n([A],{type:$})}function G(B,Y){if("download"in m)return m.href=B,m.setAttribute("download",P),m.className="download-js-link",m.innerHTML="downloading...",m.style.display="none",document.body.appendChild(m),setTimeout(function(){m.click(),document.body.removeChild(m),!0===Y&&setTimeout(function(){x.URL.revokeObjectURL(m.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(B)&&(B="data:"+B.replace(/^data:([\w\/\-\+]+)/,M)),window.open(B)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=B),!0;var $=document.createElement("iframe");document.body.appendChild($),!Y&&/^data:/.test(B)&&(B="data:"+B.replace(/^data:([\w\/\-\+]+)/,M)),$.src=B,setTimeout(function(){document.body.removeChild($)},333)}if(C=T instanceof n?T:new n([T],{type:E}),navigator.msSaveBlob)return navigator.msSaveBlob(C,P);if(x.URL)G(x.URL.createObjectURL(C),!0);else{if("string"==typeof C||C.constructor===t)try{return G("data:"+E+";base64,"+x.btoa(C))}catch{return G("data:"+E+","+encodeURIComponent(C))}(I=new FileReader).onload=function(B){G(this.result)},I.readAsDataURL(C)}return!0}})?u.apply(R,[]):u)&&(q.exports=J)}}]);