"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4981],{1814:(se,Ct,c)=>{c.d(Ct,{In:()=>dt,MA:()=>x,Mo:()=>T,NV:()=>S,S3:()=>L,dt:()=>U,h8:()=>h,k0:()=>y});const L={fill:"transparent",stroke:"#129bff",strokeWidth:1},S={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},dt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},T={fill:"transparent",stroke:"transparent",strokeWidth:1},U={fill:"none",stroke:"#5F6CE1",strokeWidth:1},h={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},x={fill:"transparent"},y={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4447:(se,Ct,c)=>{c.d(Ct,{I:()=>h});var L=c(4981);c(9054);const h=O=>x(null==O?void 0:O.url,null==O?void 0:O.path,null==O?void 0:O.src);var x=(O,E,G)=>{var M,J;let Q,W,Z,b;var A,ht;return O&&(Q=O.replace(/\\/g,"/")),E&&(W=E.replace(/\\/g,"/")),G&&(Z=G.replace(/\\/g,"/")),W&&!Q&&(Q=(null===(A=L.icdt.config)||void 0===A?void 0:A.readfileuploadurl)+W),!Z||W||Q||(W=Z.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),Q=(null===(ht=L.icdt.config)||void 0===ht?void 0:ht.readfileuploadurl)+W),b=(null!==(M=Q)&&void 0!==M?M:"").split("/").pop()||(null!==(J=W)&&void 0!==J?J:"").split("/").pop()||"",{url:Q,path:W,name:b}}},644:(se,Ct,c)=>{c.d(Ct,{Dx:()=>h,aY:()=>O,qp:()=>y,qz:()=>U,sV:()=>x,yR:()=>E});var L=c(5861),S=c(9422),dt=c.n(S);dt().config({driver:[dt().INDEXEDDB,dt().LOCALSTORAGE,dt().WEBSQL],name:"_localDataDB",version:1});const T={create:(G=(0,L.Z)(function*(){return dt()}),function(){return G.apply(this,arguments)}),get:function(){var G=(0,L.Z)(function*(M){return dt().getItem(M)});return function(J){return G.apply(this,arguments)}}(),set:function(){var G=(0,L.Z)(function*(M,J){return dt().setItem(M,J)});return function(J,Q){return G.apply(this,arguments)}}()},U=function(){var G=(0,L.Z)(function*(M){yield T.create();var J=(yield T.get("icdt-data"))||[];"function"==typeof M.callback&&M.callback(J)});return function(J){return G.apply(this,arguments)}}(),h=function(){var G=(0,L.Z)(function*(M){yield T.create(),M.params=M.params||{};try{yield T.set("icdt-data",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(J){"function"==typeof M.callback&&M.callback(null),console.error(J)}});return function(J){return G.apply(this,arguments)}}(),x=function(){var G=(0,L.Z)(function*(M){yield T.create();try{var J=(yield T.get("icdt-config"))||{};"function"==typeof M.callback&&M.callback(J)}catch(Q){"function"==typeof M.callback&&M.callback(null),console.error(Q)}});return function(J){return G.apply(this,arguments)}}(),y=function(){var G=(0,L.Z)(function*(M){yield T.create(),M.params=M.params||{};try{yield T.set("icdt-config",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(J){"function"==typeof M.callback&&M.callback(null),console.error(J)}});return function(J){return G.apply(this,arguments)}}(),O=function(){var G=(0,L.Z)(function*(M){yield T.create();try{var J=(yield T.get("icdt-clipboard"))||{};"function"==typeof M.callback&&M.callback(J)}catch(Q){"function"==typeof M.callback&&M.callback(null),console.error(Q)}});return function(J){return G.apply(this,arguments)}}(),E=function(){var G=(0,L.Z)(function*(M){yield T.create(),M.params=M.params||{};try{yield T.set("icdt-clipboard",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(J){"function"==typeof M.callback&&M.callback(null),console.error(J)}});return function(J){return G.apply(this,arguments)}}();var G},1687:(se,Ct,c)=>{c.d(Ct,{O:()=>L});const L={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(se,Ct,c)=>{c.d(Ct,{D:()=>L});const L={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(se,Ct,c)=>{c.d(Ct,{_:()=>L});const L={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(se,Ct,c)=>{c.d(Ct,{D:()=>L});const L={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(se,Ct,c)=>{c.d(Ct,{$:()=>L});const L={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(se,Ct,c)=>{c.d(Ct,{icdt:()=>mt});var L=c(968),S=c(4080),dt=c(1687),T=c(9054),U=c(4318),h=c(6816),x=c(666),y=c(2966);const G=k=>{var i,n,l,a,s;let v=(null===(i=k.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=k.touchEvent)||void 0===n?void 0:n.target),p=(null==v?void 0:v.getAttribute("id"))||"",w=null==v?void 0:v.nodeName,j=(null==v||null===(l=v.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var m,D;if([dt.O.RESIZE_GROUP,dt.O.SELECT_GROUP].includes(j))return null===(m=k.mouseEvent)||void 0===m||m.stopPropagation(),void(null===(D=k.mouseEvent)||void 0===D||D.preventDefault());if(null!==(a=k.mouseEvent)&&void 0!==a&&a.altKey||null!==(s=k.touchEvent)&&void 0!==s&&s.altKey||!p||p.match(/[^0-9]/)||!mt.dataSelect.nodeName.includes(w)){var N;mt.dataSelect.ids.length&&(mt.dataSelect.ids=[]),(0==(null===(N=k.mouseEvent)||void 0===N?void 0:N.button)||k.touchEvent)&&(k=>{let s=(0,S.g1)(dt.O.SCAN_GROUP,"g"),v=(0,U.bH)(0,0,1,1);(0,S.vl)(s,v),((k,i,n)=>{(0,h.A)(k,{start:s=>{},move:(s,v)=>{((s,v,p,w)=>{i=(0,U.bH)(s,v,p,w),(0,S.vl)(n,i)})(v[0][0],v[0][1],s.x,s.y)},end:(s,v)=>{null==n||n.remove(),mt.dataSelect.ids=mt.data.getNodeInArea(Math.min(v[0][0],s.x),Math.min(v[0][1],s.y),Math.max(v[0][0],s.x),Math.max(v[0][1],s.y));let p=mt.dataSelect.nodes;1==p.length?(0,x.y)(p[0]):p.length>1&&(0,y.Q)(p)}})})(k,v,s)})(k)}else{var F,tt;let q=parseFloat(p||"0");mt.dataSelect.ids=null!==(F=k.mouseEvent)&&void 0!==F&&F.shiftKey||null!==(tt=k.touchEvent)&&void 0!==tt&&tt.shiftKey?[q].concat(mt.dataSelect.ids).filter((re,he,ve)=>ve.indexOf(re)==he):[q];let zt=mt.dataSelect.nodes;zt.length>1||1==zt.length&&zt[0].type==T.$.PATH?(0,y.Q)(zt):1==zt.length&&(0,x.y)(zt[0])}};class J{constructor(){let{x:i,y:n}=mt.screen.dislocation;var l=(a,s,v,p)=>{mt.screen.move({x:i,y:n},{x:v-a,y:p-s})};return{start:a=>{},move:(a,s)=>{l(s[0][0],s[0][1],a.x,a.y)},end:(a,s)=>{l(s[0][0],s[0][1],a.x,a.y)}}}}var Q=c(4714);const W=[{name:"tam gi\xe1c vu\xf4ng",type:Q.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:Q.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:Q.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:Q.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:Q.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:Q.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:Q.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:Q.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:Q.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:Q.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:Q.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:Q.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:Q.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var Z=c(8619),b=c(5811);class A{constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,attribute:a,size:s}=(0,Z._)(Math.ceil(1e9*Math.random())),v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m,{ratio:1}),s.x=(0,b.q)(s.x),s.y=(0,b.q)(s.y),s.width=(0,b.q)(s.width),s.height=(0,b.q)(s.height),Object.assign(a,(0,U.sg)(T.$.CIRCLE,s)),(0,S.__)(l,a),(0,S.g$)(i,s)};return{start:p=>{l.setAttribute("cx",p.x.toString()),l.setAttribute("cy",p.y.toString()),l.setAttribute("r","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.CIRCLE,name:"Circle"},{size:s,attribute:a}),null==i||i.remove()}}}}var ht=c(8785);class vt{constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,attribute:a,size:s}=(0,ht.r)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,b.q)(s.x),s.y=(0,b.q)(s.y),s.width=(0,b.q)(s.width),s.height=(0,b.q)(s.height),Object.assign(a,(0,U.sg)(T.$.ELLIPSE,s)),(0,S.__)(l,a),(0,S.g$)(i,s)};return{start:p=>{l.setAttribute("cx",p.x.toString()),l.setAttribute("cy",p.y.toString()),l.setAttribute("rx","1"),l.setAttribute("ry","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.ELLIPSE,name:"Ellipse"},{size:s,attribute:a}),null==i||i.remove()}}}}var yt=c(8054);class ft{constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,attribute:a,size:s}=(0,yt.f)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,b.q)(s.x),s.y=(0,b.q)(s.y),s.width=(0,b.q)(s.width),s.height=(0,b.q)(s.height),Object.assign(a,(0,U.sg)(T.$.RECT,s)),(0,S.__)(l,a),(0,S.g$)(i,s)};return{start:p=>{v(p.x,p.y,p.x+s.width,p.y+s.height)},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.RECT,name:"Rect"},{size:s,attribute:a}):null==l||l.remove(),null==i||i.remove()}}}}var at=c(2282);class Lt{constructor(i){let n=(0,S.g1)(dt.O.CREATE_GROUP,"g"),l=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:s,attribute:v,size:p}=(0,at.l)(Math.ceil(1e9*Math.random()));p.ratios=l;var w=(j,m,D,N)=>{p=(0,U.bH)(j,m,D,N,{ratios:l}),p.x=(0,b.q)(p.x),p.y=(0,b.q)(p.y),p.width=(0,b.q)(p.width),p.height=(0,b.q)(p.height),Object.assign(v,(0,U.sg)(T.$.POLYGON,p)),(0,S.__)(s,v),(0,S.g$)(n,p)};return{start:j=>{},move:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y)},end:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y),mt.data.node=Object.assign({id:a,type:T.$.POLYGON,name:"Polygon"},{size:p,attribute:v}),null==n||n.remove()}}}}var st=c(4921);class Ot{constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,attribute:a,size:s}=(0,st.W)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,b.q)(s.x),s.y=(0,b.q)(s.y),s.width=(0,b.q)(s.width),s.height=(0,b.q)(s.height),Object.assign(a,(0,U.sg)(T.$.LINE,s)),(0,S.__)(l,a),(0,S.g$)(i,s)};return{start:p=>{},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.LINE,name:"Line"},{size:s,attribute:a}),null==i||i.remove()}}}}var ct=c(8419);class wt{constructor(){let{nodeId:i,element:n,attribute:l,size:a}=(0,ct.G)(Math.ceil(1e9*Math.random())),v="";var p=(w,j)=>{v+=` ${w} ${j}`,n.setAttribute("d",v)};return{start:w=>{v=`M ${w.x} ${w.y} L ${w.x} ${w.y}`},move:(w,j)=>{p(w.x,w.y)},end:(w,j)=>{p(w.x,w.y),(w=>{let j=9999,m=9999,D=-9999,N=-9999;w.forEach(F=>{j=Math.min(j,F[0]),m=Math.min(m,F[1]),D=Math.max(D,F[0]),N=Math.max(N,F[1])}),a=(0,U.bH)(j,m,D,N,{points:w}),Object.assign(l,(0,U.sg)(T.$.PATH,a)),(0,S.__)(n,l)})(j),mt.data.node=Object.assign({id:i,type:T.$.PATH,name:"Path"},{size:a,attribute:l})}}}}var it=c(2875);class ${constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,size:a,attribute:s,style:v,source:p}=(0,it.e)(Math.ceil(1e9*Math.random()));var w=(j,m,D,N)=>{a=(0,U.bH)(j,m,D,N),a.x=(0,b.q)(a.x),a.y=(0,b.q)(a.y),a.width=(0,b.q)(a.width),a.height=(0,b.q)(a.height),Object.assign(s,(0,U.sg)(T.$.FOREIGNOBJECT,a)),(0,S.__)(l,s),(0,S.g$)(i,a)};return{start:j=>{w(j.x,j.y,j.x+a.width,j.y+a.height)},move:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y)},end:(j,m)=>{a.width>=10&&a.height>=10?mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p}):null==l||l.remove(),null==i||i.remove()}}}}var _t=c(7210);class kt{constructor(){var i,n;let l=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,_t.G)(Math.ceil(1e9*Math.random())),j=1;(D=>{if(!D)return;let N=new Image;N.onload=()=>{j=(0,b.q)(N.naturalWidth/N.naturalHeight,100)},N.onerror=F=>{console.error(`ImgSrc load failed -> ${D}`,F)},N.src=D})(null!==(i=null===(n=w.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var m=(D,N,F,tt)=>{v=(0,U.bH)(D,N,F,tt,{ratio:j}),v.x=(0,b.q)(v.x),v.y=(0,b.q)(v.y),v.width=(0,b.q)(v.width),v.height=(0,b.q)(v.height),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,S.__)(s,p),(0,S.g$)(l,v)};return{start:D=>{m(D.x,D.y,D.x+v.width,D.y+v.height)},move:(D,N)=>{m(N[0][0],N[0][1],D.x,D.y)},end:(D,N)=>{v.width>=10&&v.height>=10?mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w}):null==s||s.remove(),null==l||l.remove()}}}}var ee=c(4578),Yt=c(9623);function d(k,i,n,l){return Math.sqrt(Math.pow(n-k,2)+Math.pow(l-i,2))}function X(k,i,n,l,a){return d(k,i,n,l)<a?1:0}function Y(k,i,n,l,a,s,v){var p=[];return p.push(X(k,i,n,l,v)),p.push(X(k,i,a,s,v)),p.push(function H(k,i,n,l,a,s,v){var p=[a-n,s-l],w=[k-n,i-l],j=[-p[1],p[0]],m=Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)),D=[j[0]/m,j[1]/m],N=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),F=[p[0]/N,p[1]/N],tt=w[0]*F[0]+w[1]*F[1];if(tt<=0||tt>=N)return 0;var q=w[0]*D[0]+w[1]*D[1];return q>=v||q<=-v?0:1}(k,i,n,l,a,s,v)),p}function At(k,i,n,l,a){var s=[n-k,l-i],v=[-s[1],s[0]],p=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),w=[v[0]/p,v[1]/p];return[[k+a*w[0],i+a*w[1]],[k-a*w[0],i-a*w[1]],[n-a*w[0],l-a*w[1]],[n+a*w[0],l+a*w[1]]]}function Qt(k,i,n,l,a,s,v){var tt,p=[a-k,s-i],w=[n-k,l-i],j=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),m=[w[0]/j,w[1]/j],D=p[0]*m[0]+p[1]*m[1],N=[k+D*m[0],i+D*m[1]],F=Math.sqrt(Math.pow(a-N[0],2)+Math.pow(s-N[1],2));tt=0===F?v:Math.sqrt(Math.pow(v,2)-Math.pow(F,2));var q=[k+D*m[0]+tt*m[0],i+D*m[1]+tt*m[1]];return q[0]===k&&q[1]===i?null:q}function Ft(k,i,n,l,a,s,v){var p=[a-k,s-i],w=[n-k,l-i],j=[-w[1],w[0]],m=Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)),D=[j[0]/m,j[1]/m],N=p[0]*D[0]+p[1]*D[1],F=ge([k,i],[n,l],[a,s]);if(de([F[0]-a,F[1]-s])>=v)return null;var q=Math.sqrt(Math.pow(v,2)-Math.pow(N,2)),zt=[a-N*D[0],s-N*D[1]],re=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),he=[w[0]/re,w[1]/re],ve=[[zt[0]-he[0]*q,zt[1]-he[1]*q],[zt[0]+he[0]*q,zt[1]+he[1]*q]];return ve[0][0]===k&&ve[0][1]===i?null:ve}function Dt(k,i,n,l,a,s,v,p){var w,j,m,D,N,F;return-(m=v-a)*(j=l-i)+(w=n-k)*(D=p-s)==0?null:(F=(m*(i-s)-D*(k-a))/(-m*j+w*D),(N=(-j*(k-a)+w*(i-s))/(-m*j+w*D))>=0&&N<=1&&F>=0&&F<=1?[k+F*w,i+F*j]:null)}function qt(k,i,n,l,a,s,v,p,w,j){var m=At(s,v,p,w,j),D=[];if(n[0]&&!n[1])D.push(Qt(k,i,l,a,s,v,j)),D.push(Dt(k,i,l,a,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Dt(k,i,l,a,m[1][0],m[1][1],m[2][0],m[2][1])),(N=Ft(k,i,l,a,p,w,j))&&D.push(N[0],N[1]);else if(!n[0]&&n[1])D.push(Qt(k,i,l,a,p,w,j)),D.push(Dt(k,i,l,a,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Dt(k,i,l,a,m[1][0],m[1][1],m[2][0],m[2][1])),(N=Ft(k,i,l,a,s,v,j))&&D.push(N[0],N[1]);else if(n[0]&&n[1])D.push(Qt(k,i,l,a,s,v,j)),D.push(Dt(k,i,l,a,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Dt(k,i,l,a,m[1][0],m[1][1],m[2][0],m[2][1])),D.push(Qt(k,i,l,a,p,w,j));else{var N=Ft(k,i,l,a,p,w,j),F=Ft(k,i,l,a,s,v,j);N&&D.push(N[0],N[1]),F&&D.push(F[0],F[1]),D.push(Dt(k,i,l,a,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Dt(k,i,l,a,m[1][0],m[1][1],m[2][0],m[2][1]))}for(var tt=[k,i],q=0;q<D.length;q++)D[q]&&d(D[q][0],D[q][1],l,a)<d(tt[0],tt[1],l,a)&&(tt=D[q]);return tt[0]===k&&tt[1]===i?null:tt}function ce(k,i,n,l,a,s,v,p,w){var j=At(a,s,v,p,w),m=[],D=Ft(k,i,n,l,a,s,w);D&&m.push(D[0],D[1]),(D=Ft(k,i,n,l,v,p,w))&&m.push(D[0],D[1]),m.push(Dt(k,i,n,l,j[0][0],j[0][1],j[3][0],j[3][1])),m.push(Dt(k,i,n,l,j[1][0],j[1][1],j[2][0],j[2][1]));for(var N=[n,l],F=[k,i],tt=0;tt<m.length;tt++)m[tt]&&d(m[tt][0],m[tt][1],k,i)<d(N[0],N[1],k,i)&&(N=m[tt]);for(var q=0;q<m.length;q++)m[q]&&d(m[q][0],m[q][1],n,l)<d(F[0],F[1],n,l)&&(F=m[q]);return N[0]===n&&N[1]===l||F[0]===k&&F[1]===i?null:[N,F]}var de=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},ge=function(k,i,n){var l=[i[0]-k[0],i[1]-k[1]],a=de(l);if(a<1e-6)return k;var s=[n[0]-k[0],n[1]-k[1]],v=(l[0]*s[0]+l[1]*s[1])/a;return v<0?k:v>a?i:[k[0]+l[0]*v/a,k[1]+l[1]*v/a]};class nt{constructor(){let{element:l,size:s}=(0,ct.G)(Math.ceil(1e9*Math.random()));(0,S.__)(l,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:j=>{v=`M ${j.x} ${j.y} L ${j.x} ${j.y}`},move:(j,m)=>{((j,m)=>{v+=` ${j} ${m}`,l.setAttribute("d",v)})(j.x,j.y)},end:(j,m)=>{l.remove(),(j=>{let m=9999,D=9999,N=-9999,F=-9999;j.forEach(q=>{m=Math.min(m,q[0]),D=Math.min(D,q[1]),N=Math.max(N,q[0]),F=Math.max(F,q[1])}),s=(0,U.bH)(m,D,N,F,{points:j}),mt.data.getNodeInArea(0,0,1920,1920,T.$.PATH).forEach(q=>{let re=((k,i,n)=>{n=n||20;var l=[],a=function(m){var D=i[0][0],N=i[0][1],F=0,tt=0;if(1!==m.length||X(m[0][0],m[0][1],D,N,n)){for(var q;F<m.length-1;){var zt=m[F],re=m[F+1],he=X(zt[0],zt[1],D,N,n),ve=X(re[0],re[1],D,N,n);if(he&&ve)tt=++F;else if(he&&!ve)(we=Qt(zt[0],zt[1],re[0],re[1],D,N,n))?(m[F]=we,tt=F):F++;else if(!he&&ve){var we;(we=Qt(re[0],re[1],zt[0],zt[1],D,N,n))&&((q=m.slice(tt,F+1)).push(we),l.push(q)),tt=++F}else{var ye=Ft(zt[0],zt[1],re[0],re[1],D,N,n);ye?(((q=m.slice(tt,F+1))[q.length-1][0]!==ye[0][0]||q[q.length-1][1]!==ye[0][1])&&q.push(ye[0]),q.length>1&&l.push(q),m[F]=ye[1],m[F+1]&&m[F+1][0]==ye[1][0]&&m[F+1][1]==ye[1][1]&&F++,tt=F):F++}}tt!==F&&(q=m.slice(tt,m.length))&&l.push(q)}else l.push(m)},s=function(m,D){var re,N=i[D],F=i[D+1],tt=0,q=0;if(1!==m.length||-1!==(zt=Y(m[0][0],m[0][1],N[0],N[1],F[0],F[1],n)).indexOf(1)){for(;tt<m.length-1;){var he=m[tt],ve=m[tt+1],zt=Y(he[0],he[1],N[0],N[1],F[0],F[1],n),we=Y(ve[0],ve[1],N[0],N[1],F[0],F[1],n);if(-1!==zt.indexOf(1)&&-1!==we.indexOf(1))q=++tt;else if(-1!==zt.indexOf(1)&&-1===we.indexOf(1))(ye=qt(he[0],he[1],zt,ve[0],ve[1],N[0],N[1],F[0],F[1],n))?(m[tt]=ye,q=tt):tt++;else if(-1===zt.indexOf(1)&&-1!==we.indexOf(1)){var ye;(ye=qt(ve[0],ve[1],we,he[0],he[1],N[0],N[1],F[0],F[1],n))?((re=m.slice(q,tt+1)).push(ye),l.push(re),q=++tt):tt++}else{var Ee=ce(he[0],he[1],ve[0],ve[1],N[0],N[1],F[0],F[1],n);Ee?(((re=m.slice(q,tt+1))[re.length-1][0]!==Ee[0][0]||re[re.length-1][1]!==Ee[0][1])&&re.push(Ee[0]),re.length>1&&l.push(re),m[tt]=Ee[1],m[tt+1]&&m[tt+1][0]==Ee[1][0]&&m[tt+1][1]==Ee[1][1]&&tt++,q=tt):tt++}}q!==tt&&(re=m.slice(q,m.length))&&l.push(re)}else l.push(m)};if(i=function K(k){var i=[];if(1===k.length)i=k;else{for(var n=0;n<k.length-1;)(k[n][0]!==k[n+1][0]||k[n][1]!==k[n+1][1])&&i.push(k[n]),n++;0!==k.length&&0===i.length&&i.push(k[0]),(k[k.length-1][0]!==k[i.length-1][0]||k[k.length-1][1]!==k[i.length-1][1])&&i.push(k[n])}return i}(i),1===i.length){for(var v=0;v<k.length;v++)a(k[v]);k=l}else for(var p=0;p<i.length-1;p++){for(v=0;v<k.length;v++)s(k[v],p);k=l,l=[]}for(var w=0;w<k.length;w++)for(var j=0;j<k[w].length;j++)k[w][j][0]=Math.round(k[w][j][0]),k[w][j][1]=Math.round(k[w][j][1]);return k})(mt.data.getNode(q).size.points,j,2);console.log(re)})})(m)}}}}var V=c(1105);class ut{constructor(){let i=(0,S.g1)(dt.O.CREATE_GROUP,"g"),{nodeId:n,element:l,attribute:a,size:s,source:v}=(0,V.$)(Math.ceil(1e9*Math.random())),p=(w,j,m,D)=>{s=(0,U.bH)(w,j,m,D),s.x=(0,b.q)(s.x),s.y=(0,b.q)(s.y),s.width=(0,b.q)(s.width),s.height=(0,b.q)(s.height),Object.assign(a,(0,U.sg)(T.$.TEXT,s)),(0,S.__)(l,a),(0,S.g$)(i,s)};return{start:w=>{p(w.x,w.y,w.x+s.width,w.y+s.height)},move:(w,j)=>{p(j[0][0],j[0][1],w.x,w.y)},end:(w,j)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.TEXT,name:"Text"},{size:s,attribute:a,source:v}):null==l||l.remove(),null==i||i.remove()}}}}var lt=c(4113),gt=c(9125),xt=c(7797);var Et=c(6358);class jt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>mt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,l,a,s,v;null===(n=window.document.getElementById(dt.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===l||l.remove(),null===(a=window.document.getElementById(dt.O.SCAN_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(dt.O.CREATE_GROUP))||void 0===s||s.remove(),null===(v=window.document.getElementById(dt.O.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=mt.data.deleteNode(i);mt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}mt.dataSelect.ids=[]}groupNode(){let i=[];if(mt.dataSelect.ids.length>=2){let n=mt.data.getNode(mt.dataSelect.ids[0]),{nodeId:l,attribute:a,size:s}=(0,Et.m)(Math.ceil(1e9*Math.random()),void 0,n.pid);mt.data.node=Object.assign({id:l,type:T.$.GROUP,name:"G"},{size:s,attribute:a});for(let v of mt.dataSelect.ids)i.push(mt.data.addGroup(v,l))}if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,x.y)(n[0]):n.length>1&&(0,y.Q)(n)}}ungroupNode(){let i=[];for(let n of mt.dataSelect.ids)i.push(mt.data.unGroup(n));if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,x.y)(n[0]):n.length>1&&(0,y.Q)(n)}}}var Xt=c(4447);class Bt{createNodeImage(i){var n,l;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,_t.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Xt.I)(i)}}),j=1;(N=>{if(!N)return;let F=new Image;F.onload=()=>{var tt;j=(0,b.q)(F.naturalHeight/F.naturalWidth,100);let q=(null===(tt=mt.data.slide)||void 0===tt||null===(tt=tt.svg)||void 0===tt?void 0:tt.viewBox)||{x:0,y:0,width:100,height:100};((N,F,tt,q)=>{v=(0,U.bH)(N,F,tt,q,{ratio:j}),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,S.__)(s,p)})(q.width/2-F.naturalWidth/2,q.height/2-F.naturalHeight/2,q.width/2+F.naturalWidth/2,q.height/2+F.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w})},F.onerror=tt=>{console.error(`ImgSrc load failed -> ${N}`,tt)},F.src=N})(null!==(n=null===(l=w.image)||void 0===l?void 0:l.url)&&void 0!==n?n:"")}createNodeIframe(i){let{nodeId:n,element:l,size:a,attribute:s,style:v,source:p}=(0,it.e)(Math.ceil(1e9*Math.random()),{style:{},source:{type:"iframe",iframe:(0,Xt.I)(i)}});(m=>{let D=(null===(m=mt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,D,N,F)=>{a=(0,U.bH)(m,D,N,F),Object.assign(s,(0,U.sg)(T.$.IMAGE,a)),(0,S.__)(l,s)})(D.width/2-a.width/2,D.height/2-a.height/2,D.width/2+a.width/2,D.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeEmbed(i){let{nodeId:n,element:l,size:a,attribute:s,style:v,source:p}=(0,it.e)(Math.ceil(1e9*Math.random()),{size:{x:0,y:0,width:640,height:360},style:{},source:{type:"embed",embed:Object.assign(i,(0,Xt.I)(i))}});(m=>{let D=(null===(m=mt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,D,N,F)=>{a=(0,U.bH)(m,D,N,F),Object.assign(s,(0,U.sg)(T.$.IMAGE,a)),(0,S.__)(l,s)})(D.width/2-a.width/2,D.height/2-a.height/2,D.width/2+a.width/2,D.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeMedia(i){var n,l;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,_t.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Xt.I)(i.cover)}}),j={click:{media:i.media}},m=1;(F=>{if(!F)return;let tt=new Image;tt.onload=()=>{var q;m=(0,b.q)(tt.naturalHeight/tt.naturalWidth,100);let zt=(null===(q=mt.data.slide)||void 0===q||null===(q=q.svg)||void 0===q?void 0:q.viewBox)||{x:0,y:0,width:100,height:100};((F,tt,q,zt)=>{v=(0,U.bH)(F,tt,q,zt,{ratio:m}),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,S.__)(s,p)})(zt.width/2-tt.naturalWidth/2,zt.height/2-tt.naturalHeight/2,zt.width/2+tt.naturalWidth/2,zt.height/2+tt.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w,interactive:j})},tt.onerror=q=>{console.error(`ImgSrc load failed -> ${F}`,q)},tt.src=F})(null!==(n=null===(l=w.image)||void 0===l?void 0:l.url)&&void 0!==n?n:"")}insert(i){var n;if(mt.data.insertSlide(mt.data.slideId,1),i.title){let{nodeId:l,size:a,attribute:s,style:v,source:p}=(0,it.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});mt.data.node=Object.assign({id:l,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}if(i.description){let{nodeId:l,size:a,attribute:s,style:v,source:p}=(0,it.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});mt.data.node=Object.assign({id:l,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:l,size:a,attribute:s}=(0,yt.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});mt.data.node=Object.assign({id:l,type:T.$.RECT,name:"Rect"},{size:a,attribute:s})})(),(l=>{let{nodeId:a,size:s,attribute:v,style:p,source:w}=(0,it.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(l=i.media)||void 0===l?void 0:l.prompt}</i></span>`}}});mt.data.node=Object.assign({id:a,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:s,attribute:v,style:p,source:w})})())}}var Wt=c(5226);class Ht{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:mt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((s,v)=>v==this._slideIdx),l=null==n?void 0:n.svg,a=s=>{let v=[];return s.filter(p=>!p.isdeleted).forEach(p=>{p.type==T.$.GROUP?v=v.concat(a(p.nodes||[])):v.push(p.id)}),v};return a((null==l?void 0:l.nodes)||[])}}get get(){var i;let n=l=>{var a,s;return null===(a=l)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(l=null===(s=l)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=T.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(l=>{var a;l.svg&&(l.svg.nodes=n(null===(a=l.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(l=>{var a,s,v,p,w,j,m,D;n.push(null===(a=l.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(s=l.svg)||void 0===s||s.nodes.forEach(N=>{var F,tt,q,zt,re,he,ve,we,ye,Ee;n.push(null===(F=N.source)||void 0===F||null===(F=F.image)||void 0===F?void 0:F.path),n.push(null===(tt=N.source)||void 0===tt||null===(tt=tt.audio)||void 0===tt?void 0:tt.path),n.push(null===(q=N.source)||void 0===q||null===(q=q.video)||void 0===q?void 0:q.path),n.push(null===(zt=N.source)||void 0===zt||null===(zt=zt.file)||void 0===zt?void 0:zt.path),n.push(null===(re=N.source)||void 0===re||null===(re=re.iframe)||void 0===re?void 0:re.path),n.push(null===(he=N.source)||void 0===he||null===(he=he.track)||void 0===he?void 0:he.path),n.push(null===(ve=N.interactive)||void 0===ve||null===(ve=ve.show)||void 0===ve||null===(ve=ve.audio)||void 0===ve||null===(ve=ve.source)||void 0===ve?void 0:ve.path),n.push(null===(we=N.interactive)||void 0===we||null===(we=we.click)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),n.push(null===(ye=N.interactive)||void 0===ye||null===(ye=ye.click)||void 0===ye||null===(ye=ye.image)||void 0===ye||null===(ye=ye.source)||void 0===ye?void 0:ye.path),n.push(null===(Ee=N.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.video)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path)}),n.push(null===(v=l.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),n.push(null===(p=l.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(w=l.test)||void 0===w||null===(w=w.effecttrue)||void 0===w?void 0:w.path),n.push(null===(j=l.test)||void 0===j||null===(j=j.effectfalse)||void 0===j?void 0:j.path),n.push(null===(m=l.test)||void 0===m||null===(m=m.icontrue)||void 0===m?void 0:m.path),n.push(null===(D=l.test)||void 0===D||null===(D=D.iconfalse)||void 0===D?void 0:D.path)}),n.filter(l=>l).map(l=>l.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((l,a,s)=>s.indexOf(l)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,S.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=l=>{var a,s;return null===(a=l)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(l=null===(s=l)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=T.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(l=>{var a;l.svg&&(l.svg.nodes=n(null===(a=l.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,S.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,l)=>l==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}openSlide(i,n){var l,a,s,v;if(i)for(let D=0,N=null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0;D<N;D++){var p,w,j;if((null!==(j=this._dataSource.slides)&&void 0!==j?j:[])[D].id==i){this._slideIdx=D;break}}else if(n&&n>=0&&n<(null!==(l=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==l?l:0))this._slideIdx=null!=n?n:0;else{var m;this._slideIdx=0,null!==(m=this._dataSource.slides)&&void 0!==m&&m.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,S.wM)(),(0,Wt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==s?s:0,this.slide)}addSlide(){var i,n,l;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,l){var a,s,v,p,w;let j=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.find(N=>N.id==i))&&void 0!==a?a:this._defaultSlide,m=(null!==(v=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(j))&&void 0!==v?v:0)+n;var D;l?(l.id=this.newSlideId,l.code=void 0,l.name="Trang m\u1edbi",null!==(D=l.svg)&&void 0!==D&&D.viewBox||l.svg&&(l.svg.viewBox=mt.screen.frameSize)):l=this._defaultSlide,null===(w=this._dataSource.slides)||void 0===w||w.splice(m,0,l),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,l,a,s,v,p,w;let j=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,m=(null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(j))&&void 0!==a?a:0)+1,D=Object.assign(JSON.parse(JSON.stringify(j)),{id:this.newSlideId,code:void 0,name:`${j.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(m,0,D),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var l,a,s,v,p,w;let j=null!==(l=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(D=>D.id==i))&&void 0!==l?l:this._defaultSlide,m=null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(j))&&void 0!==s?s:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(m+n,0,null===(w=this._dataSource.slides)||void 0===w?void 0:w.splice(m,1)[0])}deleteSlide(i){var n,l,a,s,v,p;let w=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,j=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(w))&&void 0!==a?a:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(j,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(j<this._slideIdx){var m,D;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(D=this._dataSource.slides)||void 0===D?void 0:D.length)&&void 0!==m?m:0,this.slide)}else j==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,l,a,s,v;let p=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(j=>j.id==i))&&void 0!==n?n:this._defaultSlide,w=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(p))&&void 0!==a?a:0;if(p.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(j=>!j.isdeleted))&&void 0!==v&&v.length){let j=!0;for(;p.isdeleted;)j?w++:w--,this._dataSource.slides[w]?p=this._dataSource.slides[w]:j=!j;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,l,a){this._fnChangeSlides.forEach(s=>s(i,n,l,a))}set node(i){var n,l;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((v,p)=>p==this._slideIdx),s=null==a?void 0:a.svg;null!=s&&s.nodes&&(null==s||s.nodes.push(i)),mt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Wt.E)(this.slide,null===(l=this.slide)||void 0===l?void 0:l.id)}findNode(i){var n;let l=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((N,F)=>F==this._slideIdx),a=null==l?void 0:l.svg,s=(N,F)=>{let tt=null==N?void 0:N.find(re=>re.id==i);if(tt)return tt.pid=F,tt;let q=0,zt=N.length||0;for(;q<zt&&!tt&&(tt=s(N[q].nodes||[],N[q].id),!tt);)q++;return tt},v=s((null==a?void 0:a.nodes)||[]);var p,w,j,m,D;return v?(v.style=null!==(p=v.style)&&void 0!==p?p:{},v.source=null!==(w=v.source)&&void 0!==w?w:{},v.animate=null!==(j=v.animate)&&void 0!==j?j:{},v.interactive=null!==(m=v.interactive)&&void 0!==m?m:{},v.variable=null!==(D=v.variable)&&void 0!==D?D:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let l=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,w)=>w==this._slideIdx),a=null==l?void 0:l.svg,v=p=>{let w=(null==p?void 0:p.find(tt=>tt.id==i))||(p=>{let w=null,j=0,m=p.length||0;for(;j<m&&!w;){if(w=v(p[j].nodes),w){w.pid=p[j].id;break}j++}var D,N,F,tt,q;return w&&(w.style=null!==(D=w.style)&&void 0!==D?D:{},w.source=null!==(N=w.source)&&void 0!==N?N:{},w.animate=null!==(F=w.animate)&&void 0!==F?F:{},w.interactive=null!==(tt=w.interactive)&&void 0!==tt?tt:{},w.variable=null!==(q=w.variable)&&void 0!==q?q:{}),w})((null==p?void 0:p.filter(tt=>tt.type==T.$.GROUP))||[]);var j,m,D,N,F;return w&&(w.style=null!==(j=w.style)&&void 0!==j?j:{},w.source=null!==(m=w.source)&&void 0!==m?m:{},w.animate=null!==(D=w.animate)&&void 0!==D?D:{},w.interactive=null!==(N=w.interactive)&&void 0!==N?N:{},w.variable=null!==(F=w.variable)&&void 0!==F?F:{}),w};return v((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,l,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,D)=>D==this._slideIdx),w=null==p?void 0:p.svg,j=m=>{let D=[];return m.filter(N=>!N.isdeleted).forEach(N=>{N.type==T.$.GROUP?D=D.concat(j(N.nodes||[])):i>N.size.x||n>N.size.y||l<N.size.x+N.size.width||a<N.size.y+N.size.height||(s?N.type==s&&D.push(N.id):D.push(N.id))}),D};return j((null==w?void 0:w.nodes)||[])}getNodeOnArea(i,n,l,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,D)=>D==this._slideIdx),w=null==p?void 0:p.svg,j=m=>{let D=[];return m.filter(N=>!N.isdeleted).forEach(N=>{N.type==T.$.GROUP?D=D.concat(j(N.nodes||[])):N.size.x+N.size.width<i||N.size.y+N.size.height<n||N.size.x>l||N.size.y>a||(s?N.type==s&&D.push(N.id):D.push(N.id))}),D};return j((null==w?void 0:w.nodes)||[])}deleteNode(i,n){var l;return this.getNode(i).isdeleted=null==n||n,(0,Wt.E)(this.slide),(0,Wt.E)(this.slide,null===(l=this.slide)||void 0===l?void 0:l.id),i}unGroup(i){var n,l;let a=this.getNode(i),s=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:s})),Object.assign(a,{isdeleted:!0}),(0,Wt.E)(this.slide),(0,Wt.E)(this.slide,null===(l=this.slide)||void 0===l?void 0:l.id),s}addGroup(i,n){var l;let a=this.getNode(i),s=this.getNode(n);s.nodes=s.nodes||[];let v=Math.ceil(1e9*Math.random());return s.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:v})),Object.assign(a,{isdeleted:!0}),(0,Wt.E)(this.slide),(0,Wt.E)(this.slide,null===(l=this.slide)||void 0===l?void 0:l.id),v}setNodeP(i,n){var l;let a=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.find(s=>s.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,l,a;let s=i.map(F=>mt.data.getNode(F)).filter(F=>!F.isfake),{x1:v,y1:p,x2:w,y2:j}=ue(s),m=this.getNodeOnArea(v,p,w,j);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((F,tt)=>{F.idx=tt+1});let D=m.map(F=>{var tt,q;return null!==(tt=null===(q=this.slide)||void 0===q||null===(q=q.svg)||void 0===q||null===(q=q.nodes.find(zt=>zt.id==F))||void 0===q?void 0:q.idx)&&void 0!==tt?tt:0}),N=Math.max.apply(null,D);i.forEach((F,tt)=>{var q;null===(q=this.slide)||void 0===q||null===(q=q.svg)||void 0===q||q.nodes.filter(zt=>zt.id==F).forEach(zt=>{zt.idx=N+(tt+1)/100})}),null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.sort((F,tt)=>{var q,zt;return(null!==(q=F.idx)&&void 0!==q?q:0)-(null!==(zt=tt.idx)&&void 0!==zt?zt:0)}),(0,Wt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}sendToBack(i){var n,l,a;let s=i.map(F=>mt.data.getNode(F)).filter(F=>!F.isfake),{x1:v,y1:p,x2:w,y2:j}=ue(s),m=this.getNodeOnArea(v,p,w,j);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((F,tt)=>{F.idx=tt+1});let D=m.map(F=>{var tt,q;return null!==(tt=null===(q=this.slide)||void 0===q||null===(q=q.svg)||void 0===q||null===(q=q.nodes.find(zt=>zt.id==F))||void 0===q?void 0:q.idx)&&void 0!==tt?tt:0}),N=Math.min.apply(null,D)-1;i.forEach((F,tt)=>{var q;null===(q=this.slide)||void 0===q||null===(q=q.svg)||void 0===q||q.nodes.filter(zt=>zt.id==F).forEach(zt=>{zt.idx=N+(tt+1)/100})}),null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.sort((F,tt)=>{var q,zt;return(null!==(q=F.idx)&&void 0!==q?q:0)-(null!==(zt=tt.idx)&&void 0!==zt?zt:0)}),(0,Wt.T)(this.slide),null===(a=window.document.getElementById(dt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}}const ue=k=>{let i=999999,n=999999,l=-999999,a=-999999;return k.forEach(s=>{i=Math.min(i,s.size.x),n=Math.min(n,s.size.y),l=Math.max(l,s.size.x+s.size.width),a=Math.max(a,s.size.y+s.size.height)}),{x1:i,y1:n,x2:l,y2:a}};class ie{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":mt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:l,type:a,size:s,attribute:v}=mt.data.getNode(n.from.id);Object.assign(s,n.from.size),Object.assign(v,(0,U.sg)(a,s)),(0,S.__)(window.document.getElementById(l),v);break}case"attribute":{let{id:l,attribute:a}=mt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,S.__)(window.document.getElementById(l),a);break}case"style":{let{id:l,style:a}=mt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,S.DB)(window.document.getElementById(l),a);break}case"source":{let{id:l,type:a,source:s}=mt.data.getNode(n.from.id);Object.assign(null!=s?s:{},n.from.source),(0,S.QI)(window.document.getElementById(l),a,null!=s?s:{});break}case"animate":{let{animate:l}=mt.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.animate);break}case"interactive":{let{interactive:l}=mt.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.interactive);break}case"variable":{let{variable:l}=mt.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.variable);break}}}),mt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":mt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:l,type:a,size:s,attribute:v}=mt.data.getNode(n.to.id);Object.assign(s,n.to.size),Object.assign(v,(0,U.sg)(a,s)),(0,S.__)(window.document.getElementById(l),v);break}case"attribute":{let{id:l,attribute:a}=mt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,S.__)(window.document.getElementById(l),a);break}case"style":{let{id:l,style:a}=mt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,S.DB)(window.document.getElementById(l),a);break}case"source":{let{id:l,type:a,source:s}=mt.data.getNode(n.to.id);Object.assign(null!=s?s:{},n.to.source),(0,S.QI)(window.document.getElementById(l),a,null!=s?s:{});break}case"animate":{let{animate:l}=mt.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.animate);break}case"interactive":{let{interactive:l}=mt.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.interactive);break}case"variable":{let{variable:l}=mt.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.variable);break}}}),mt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class ne{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,l;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(l=null==i?void 0:i.height)&&void 0!==l?l:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,l){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},l)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var s={x:Math.max(0,Math.min((0,b.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,b.q)(n.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*s.x,y:(this._height/i-this._height/this._scale)*s.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,S.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var pe=c(644);class Ye{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=null,this._fontSize=20,this._textLength=null,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,pe.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,pe.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Ke=c(1690),ii=c(5973),ni=c(4787),Me=function(k){return k&&JSON.parse(JSON.stringify(k))},We=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Je=[],li={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},ai={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class qe{constructor(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(l=>{l(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(l=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{l=l.concat(a)}),l))([]),We.forEach(l=>{var a=this._data_variables.filter(s=>s.key==l.key);a.length?a.forEach(function(s,v,p){s.type=l.type,s.readonly=l.readonly,s.system=l.system}):this._data_variables.push(l)})}getVariableTemp(){return Me(li)}getConditionTemp(){return Me(ai)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Me((k=this._data_variables,i="key",function(n){for(var l of k.map(function(a){return a[i]}).sort())k.filter(function(a){return a[i]==l}).forEach(function(a){n.push(a)}),k=k.filter(function(a){return a[i]!=l});return n}([]))):Me(We).concat(Me(Je));var k,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),We.forEach(n=>{var l=this._data_variables.filter(a=>a.key==n.key);l.length?l.forEach((a,s,v)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,l){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),l||(l=(this._data_variables.filter(s=>s.key==i)[0]||{}).type||null),l){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(s=>s.key==i);a.length?a.forEach(function(s,v,p){s.value=n,s.type=l}):this._data_variables.push({key:i,value:n,type:l})}}getValue(i,n){if(!i)return"";var l=this._data_variables.filter(function(v){return v.key==i});if(l.length){var s,a=l[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?s=!1:"boolean"==typeof a.value?s=a.value:(s=(a.value+"").toLowerCase(),s="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),s}return null}setValue(i,n,l){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),l||(l=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),l){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(v){return v.key==i});if(a.length){var s=a[0];this.OnSetActionExecuting(s),s&&(s.value=n),this.OnSetActionExecuted(s)}}}getConditionAll(){return Me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,l){return n.idx-l.idx})):{}}switchCondition(i,n,l){switch(i){case"==":return"string"==typeof l?(l=l.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),l.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})>0):n==l;case"!=":return"string"==typeof l?(l=l.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==l.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})):n!=l;case">=":return n>=l;case"<=":return n<=l;case">":return n>l;case"<":return n<l;case"\u2208":return l=(l+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),l.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s})>0;case"\u2209":return l=(l+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==l.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s});default:return!1}}switchOperator(i,n,l){switch(i){case"+":return n+l;case"-":return n-l;case"*":return n*l;case"/":return n/l;case"=":return l;case"=!":return!l;case"==":return n==l;case"!=":return n!=l}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,s){return a+s});case"sub":return n.reduce(function(a,s){return a-s});case"pro":return n.reduce(function(a,s){return a*s});case"div":return n.reduce(function(a,s){return a/s});case"avg":var l=n.reduce(function(a,s){return a+s})/(n.length||1);return Math.round(1e4*(l+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,s){return a&&s});case"or":return n.reduce(function(a,s){return a||s});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(l=>this.getValue(l)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(l=>this.switchValueType_Condition(Object.assign(Me(n),{variable:l}))?0:1).reduce(function(l,a){return l+a})?0:1;default:return 0}}).reduce((n,l)=>(null!=n?n:0)+(null!=l?l:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var l of n.variables)this.setValue(l,this.getValueOperator(Object.assign(Me(n),{variable:l})));break;case"slide":Ke.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ni.L5)({id:n.node,nodeStatus:Ke.$.nodeStatus,slideStatus:Ke.$.slideStatus});let s=Ke.$.findNode(n.node);null!=s&&null!==(a=s.interactive)&&void 0!==a&&a.click&&(0,ii.F)(s,Ke.$.nodeStatus,Ke.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ve{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,l){if(this._pointer_type=i,n)switch(i){case L._.PEN:this._pen_type=n;break;case L._.SHAPE:this._shape_type=n,l&&n===T.$.POLYGON&&(this._polygon_type=l)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,l){this._fnChangePointerTypes.forEach(a=>a(i,n,l))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,l){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,l))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,l){this._fnChangePenTypes.forEach(a=>a(i,n,l))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,l){this._fnChangeShapeTypes.forEach(a=>a(i,n,l))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,l){this._fnChangePolygonTypes.forEach(a=>a(i,n,l))}set onchange(i){this._fnChanges.push(i)}change(i,n,l){this._fnChanges.forEach(a=>a(i,n,l))}}const mt=new class oi{constructor(){this._container="",this._svg="",this._screen=ne.prototype,this._data=Ht.prototype,this._dataSelect=jt.prototype,this._slide=Bt.prototype,this._history=ie.prototype,this._attribute=Ye.prototype,this._pointer=Ve.prototype,this._variable=qe.prototype,this._data=new Ht,this._dataSelect=new jt,this._slide=new Bt,this._history=new ie,this._attribute=new Ye,this._pointer=new Ve,this._variable=new qe,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,l,a,s;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),l=jQuery(this._container).height(),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(s=null==i?void 0:i.top)&&void 0!==s?s:0},width:null!=n?n:0,height:null!=l?l:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new ne,(k=>{new S.Mh(k.container,k.target),mt.pointer.onchange=(l,a,s)=>{switch(l){case L._.POINTER:jQuery(k.target).css({cursor:"auto"});break;case L._.HAND:jQuery(k.target).css({cursor:"grab"});break;case L._.PEN:switch(a){case gt.D.DRAW:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case gt.D.HIGHTLIGH:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case L._.ERASER:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case L._.SHAPE:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case L._.TEXT:case L._.FOREIGNOBJECT:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(k.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",l=>{mt.pointer.pointer_type==L._.HAND&&jQuery(k.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",l=>{mt.pointer.pointer_type==L._.HAND&&jQuery(k.target).css({cursor:"grab"})}),jQuery(k.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",l=>{var a;l.preventDefault();var s=mt.screen.scale,v=(null!==(a=l.originalEvent)&&void 0!==a?a:l).deltaY>0?1:-1;mt.screen.scaleTo(s-.04*s*v,(0,xt.p)({x:l.clientX,y:l.clientY},1,{x:0,y:0},mt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",l=>{mt.screen.actived=!!jQuery(l.target).parents("app-main").length}),jQuery(k.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",l=>{mt.screen.actived=!0}),jQuery(k.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",l=>{mt.screen.actived=!1}),jQuery(k.container).off("mousedown.icdt-init").on("mousedown.icdt-init",l=>{0==l.button&&(k.container.includes("#")&&k.container.includes(l.target.getAttribute("id"))||k.container.includes(".")&&k.container.includes(l.target.getAttribute("class"))||k.container.includes(l.target.nodeName))&&(mt.pointer.pointer_type_temp||mt.pointer.pointer_type)===L._.POINTER&&(mt.dataSelect.ids=[])}),jQuery(k.container).off("touchmove.icdt-init").on("touchmove.icdt-init",l=>{l.preventDefault()});const i=l=>{switch(mt.pointer.pointer_type_temp||mt.pointer.pointer_type){case L._.POINTER:G(l);break;case L._.HAND:(k=>{(0,h.A)(k,new J,1,{x:0,y:0})})(l);break;case L._.PEN:(0,Yt.i)(l);break;case L._.SHAPE:(k=>{var i=null;switch(mt.pointer.shape_type){case T.$.CIRCLE:i=new A;break;case T.$.ELLIPSE:i=new vt;break;case T.$.LINE:i=new Ot;break;case T.$.RECT:i=new ft;break;case T.$.POLYGON:var n;i=new Lt(null===(n=W.find(l=>l.type==mt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case T.$.FOREIGNOBJECT:i=new $;break;case T.$.IMAGE:i=new kt;break;case T.$.TEXT:case T.$.PATH:i=new wt}i&&(0,h.A)(k,i)})(l);break;case L._.FOREIGNOBJECT:(k=>{(0,h.A)(k,new $)})(l);break;case L._.IMAGE:(k=>{(0,h.A)(k,new kt)})(l);break;case L._.TEXT:(k=>{(0,h.A)(k,new ut)})(l);break;case L._.ERASER:(k=>{(0,h.A)(k,new nt)})(l);break;case L._.INDEX:(0,lt.s)(l)}};let n=!1;jQuery(k.target).off("touchstart.icdt-init").on("touchstart.icdt-init",l=>{n=!0,i({touchEvent:l})}),jQuery(k.target).off("mousedown.icdt-init").on("mousedown.icdt-init",l=>{if(1!=l.button){if(n)return void(n=!1);i({mouseEvent:l})}}),k.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",l=>{mt.screen.actived&&((l.ctrlKey||l.altKey)&&(l.stopPropagation(),l.preventDefault()),(0,ee.t)(l))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",l=>{mt.screen.actived&&((l.ctrlKey||l.altKey)&&(l.stopPropagation(),l.preventDefault()),(0,ee.t)(l))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(se,Ct,c)=>{c.d(Ct,{s:()=>y,Q:()=>E});var L=c(1687),S=c(4981),dt=c(4318),T=c(6816),U=c(4080);const y=G=>{var M,J;let Q=(null===(M=G.mouseEvent)||void 0===M?void 0:M.target)||(null===(J=G.touchEvent)||void 0===J?void 0:J.target),W=(null==Q?void 0:Q.getAttribute("id"))||"",Z=null==Q?void 0:Q.nodeName,b=jQuery(Q).parents("g[id]").attr("id")||"";if(![L.O.INDEX_GROUP].includes(b))if(W&&!W.match(/[^0-9]/)&&S.icdt.dataSelect.nodeName.includes(Z)){var ht,vt;let yt=parseFloat(W||"0");S.icdt.dataSelect.ids=null!==(ht=G.mouseEvent)&&void 0!==ht&&ht.shiftKey||null!==(vt=G.touchEvent)&&void 0!==vt&&vt.shiftKey?[yt].concat(S.icdt.dataSelect.ids).filter((at,Lt,st)=>st.indexOf(at)==Lt):[yt],O(S.icdt.dataSelect.nodes)}else{var A;S.icdt.dataSelect.ids.length&&(S.icdt.dataSelect.ids=[]),(0==(null===(A=G.mouseEvent)||void 0===A?void 0:A.button)||G.touchEvent)&&((G,M)=>{let b=(0,U.g1)(L.O.SCAN_GROUP,"g"),A=(0,dt.bH)(0,0,1,1);(0,U.vl)(b,A),((G,M,J,Q)=>{(0,T.A)(G,{start:b=>{},move:(b,A)=>{((b,A,ht,vt)=>{M=(0,dt.bH)(b,A,ht,vt),(0,U.vl)(J,M)})(A[0][0],A[0][1],b.x,b.y)},end:(b,A)=>{null==J||J.remove(),S.icdt.dataSelect.ids=S.icdt.data.getNodeInArea(Math.min(A[0][0],b.x),Math.min(A[0][1],b.y),Math.max(A[0][0],b.x),Math.max(A[0][1],b.y)),Q(S.icdt.dataSelect.nodes)}})})(G,A,b,M)})(G,O)}},O=G=>{var M,J;let Q=1;var W,Z;if(G.length&&(Q=Math.max.apply(null,null!==(W=null===(Z=S.icdt.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.nodes.map(A=>{var ht;return null!==(ht=A.idx)&&void 0!==ht?ht:0}))&&void 0!==W?W:[0])+1),1==G.length)G[0].idx||(G[0].idx=Q,G[0].time=0);else if(G.length>=0){let A=G.map(vt=>{var yt;return null!==(yt=vt.idx)&&void 0!==yt?yt:0}).filter(vt=>vt>0),ht=A.length?Math.min.apply(null,A):Q;G.forEach(vt=>{var yt;vt.idx=ht,vt.time=null!==(yt=vt.time)&&void 0!==yt?yt:0})}let b=(0,U.g1)(L.O.INDEX_GROUP,"g");(0,U.mo)(b,null!==(M=null===(J=S.icdt.data.slide)||void 0===J||null===(J=J.svg)||void 0===J?void 0:J.nodes)&&void 0!==M?M:[])},E=G=>{var M,J,Q;null!=G&&null!==(M=G.svg)&&void 0!==M&&M.nodes&&G.svg.nodes.forEach(Z=>{Z.idx=0});let W=(0,U.g1)(L.O.INDEX_GROUP,"g");(0,U.mo)(W,null!==(J=null===(Q=S.icdt.data.slide)||void 0===Q||null===(Q=Q.svg)||void 0===Q?void 0:Q.nodes)&&void 0!==J?J:[])}},4578:(se,Ct,c)=>{c.d(Ct,{h:()=>M,t:()=>J});var L=c(644),S=c(7308),dt=c(968),T=c(4981),U=c(666),h=c(2966),x=c(5226),y=c(3423),O=c(5811),E=c(3385);const M=new class G{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:S.s.Escape,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:S.s.Delete,fn:()=>{T.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:S.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=dt._.HAND}},this.onchange={type:"keyup",key:S.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=dt._.POINTER}},this.onchange={type:"keydown",key:S.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.backSlide()}},this.onchange={type:"keydown",key:S.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:S.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(W=>{(0,E.k6)(W,(0,O.q)(W.size.x-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(W=>{(0,E.k6)(W,(0,O.q)(W.size.x+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.s.ArrowUp,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(W=>{(0,E.co)(W,(0,O.q)(W.size.y-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.s.ArrowDown,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(W=>{(0,E.co)(W,(0,O.q)(W.size.y+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.s.Digit1,fn:W=>{W.shiftKey&&(T.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:S.s.KeyA,fn:W=>{if(W.ctrlKey){T.icdt.dataSelect.ids=T.icdt.data.getNodeAll();let Z=T.icdt.dataSelect.nodes;1==Z.length?(0,U.y)(Z[0]):Z.length>1&&(0,h.Q)(Z)}}},this.onchange={type:"keydown",key:S.s.KeyC,fn:W=>{if(W.ctrlKey){let Z=T.icdt.dataSelect.nodes;Z&&(0,L.yR)({params:{type:"nodes",nodes:Z}})}}},this.onchange={type:"keydown",key:S.s.KeyV,fn:W=>{W.ctrlKey&&(0,L.aY)({callback:Z=>{var b,A;"nodes"==(null==Z?void 0:Z.type)&&null!=Z&&null!==(b=Z.nodes)&&void 0!==b&&b.length&&(null==Z||null===(A=Z.nodes)||void 0===A||A.forEach(ht=>{ht.id=Math.ceil(1e9*Math.random()),T.icdt.data.node=ht}),(0,x.E)(T.icdt.data.slide))}})}},this.onchange={type:"keydown",key:S.s.KeyZ,fn:W=>{W.ctrlKey&&W.shiftKey?T.icdt.history.redo():W.ctrlKey&&T.icdt.history.undo()}}}set onchange(W){let Z=this._fnChanges.find(b=>b.eventType==W.type&&b.eventKey==W.key);Z?Z.fns.push(W.fn):this._fnChanges.push({eventType:W.type,eventKey:W.key,fns:[W.fn]})}change(W,Z,b){var A;null===(A=this._fnChanges.find(ht=>ht.eventType==W&&ht.eventKey==Z))||void 0===A||A.fns.forEach(ht=>ht(b))}},J=Q=>{M.change(Q.type,Q.keyCode||Q.which||Q.charCode||0,Q)}},410:(se,Ct,c)=>{c.d(Ct,{a:()=>y});var L=c(4318),S=c(8419),dt=c(9054),T=c(4080),U=c(511),h=c(3423),x=c(1687);class y{constructor(E){var G;let M={stroke:"#FF0000",strokeWidth:(0,h.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,h.v)(8)},{element:Q,attribute:W,size:Z}=(0,S.G)(Math.ceil(1e9*Math.random()),{size:E});window.document.getElementById(x.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(yt=>null==yt?void 0:yt.remove()),null===(G=window.document.getElementById(x.O.INTERACTIVE_GROUP))||void 0===G||G.appendChild(Q),(0,T.__)(Q,M);let A="";return{start:yt=>{A=`M ${yt.x} ${yt.y} L ${yt.x} ${yt.y}`},move:(yt,ft)=>{((yt,ft)=>{A+=` ${yt} ${ft}`,Q.setAttribute("d",A)})(yt.x,yt.y)},end:(yt,ft)=>{(yt=>{let at=U.jvg().x(Lt=>Lt[0]).y(Lt=>Lt[1]).curve(U.$0Z)(yt);Q.setAttribute("d",at),yt.length>=2&&(window.interactivePoints=yt)})(ft),(yt=>{let ft=9999,at=9999,Lt=-9999,st=-9999;yt.forEach(Ot=>{ft=Math.min(ft,Ot[0]),at=Math.min(at,Ot[1]),Lt=Math.max(Lt,Ot[0]),st=Math.max(st,Ot[1])}),Z=(0,L.bH)(ft,at,Lt,st,{points:yt}),Object.assign(W,(0,L.sg)(dt.$.PATH,Z),M)})(ft)}}}}},9623:(se,Ct,c)=>{c.d(Ct,{U:()=>Q,i:()=>J});var L=c(1687),S=c(9125),dt=c(4981),T=c(6816),U=c(4080),h=c(4318),x=c(8419),y=c(9054),O=c(511);class E{constructor(){let Z={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:b,element:A,attribute:ht,size:vt}=(0,x.G)(Math.ceil(1e9*Math.random()));(0,U.__)(A,ht);let ft="";return{start:st=>{ft=`M ${st.x} ${st.y} L ${st.x} ${st.y}`},move:(st,Ot)=>{((st,Ot)=>{ft+=` ${st} ${Ot}`,A.setAttribute("d",ft)})(st.x,st.y)},end:(st,Ot)=>{(st=>{let ct=O.jvg().x(wt=>wt[0]).y(wt=>wt[1]).curve(O.$0Z)(st);A.setAttribute("d",ct)})(Ot),(st=>{let Ot=9999,ct=9999,wt=-9999,it=-9999;st.forEach($=>{Ot=Math.min(Ot,$[0]),ct=Math.min(ct,$[1]),wt=Math.max(wt,$[0]),it=Math.max(it,$[1])}),vt=(0,h.bH)(Ot,ct,wt,it,{points:st}),Object.assign(ht,(0,h.sg)(y.$.PATH,vt),Z)})(Ot),dt.icdt.data.node=Object.assign({id:b,type:y.$.PATH,name:"Path"},{size:vt,attribute:ht})}}}}class G{constructor(){let Z={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:b,element:A,attribute:ht,size:vt}=(0,x.G)(Math.ceil(1e9*Math.random()));(0,U.__)(A,ht);let ft="";var at=(Lt,st)=>{ft+=` ${Lt} ${st}`,A.setAttribute("d",ft)};return{start:Lt=>{ft=`M ${Lt.x} ${Lt.y} L ${Lt.x} ${Lt.y}`},move:(Lt,st)=>{at(Lt.x,Lt.y)},end:(Lt,st)=>{at(Lt.x,Lt.y),(Lt=>{let st=9999,Ot=9999,ct=-9999,wt=-9999;Lt.forEach(it=>{st=Math.min(st,it[0]),Ot=Math.min(Ot,it[1]),ct=Math.max(ct,it[0]),wt=Math.max(wt,it[1])}),vt=(0,h.bH)(st,Ot,ct,wt,{points:Lt}),Object.assign(ht,(0,h.sg)(y.$.PATH,vt),Z)})(st),dt.icdt.data.node=Object.assign({id:b,type:y.$.PATH,name:"Path"},{size:vt,attribute:ht})}}}}var M=c(410);const J=W=>{switch(dt.icdt.pointer.pen_type){case S.D.DRAW:(0,T.A)(W,new E);break;case S.D.HIGHTLIGH:(0,T.A)(W,new G);break;case S.D.INTERACTIVE:Q(W)}},Q=W=>{var Z,b;let A=(0,U.g1)(L.O.INTERACTIVE_GROUP,"g"),ht=null!==(Z=null===(b=dt.icdt.data.slide)||void 0===b||null===(b=b.svg)||void 0===b?void 0:b.viewBox)&&void 0!==Z?Z:(()=>{let{width:vt,height:yt}=dt.icdt.screen.get;return{x:0,y:0,width:vt,height:yt}})();(0,U.XH)(A,ht),W&&(0,T.A)(W,new M.a)}},666:(se,Ct,c)=>{c.d(Ct,{y:()=>x});var L=c(1687),S=c(4981),dt=c(4318),T=c(6816),U=c(4080),h=c(5811);const x=E=>{let G=(0,U.g1)(L.O.RESIZE_GROUP,"g");(0,U.hJ)(G,E).forEach(M=>{y(M.element,M.posType,E,G)})},y=(E,G,M,J)=>{let Q=!1;null==E||E.addEventListener("touchstart",W=>{Q=!0,O({touchEvent:W},G,M,J)}),null==E||E.addEventListener("mousedown",W=>{if(0==W.button){if(Q)return void(Q=!1);O({mouseEvent:W},G,M,J)}})},O=(E,G,M,J)=>{let at,{id:Q,type:W,size:Z,attribute:b}=M,{x:A,y:ht,width:vt,height:yt}=Z,ft=(vt||1)/(yt||1),st=null,wt=!1;(0,T.A)(E,{start:$=>{st=JSON.parse(JSON.stringify({id:Q,size:Z,attribute:b}))},move:($,_t)=>{(($,_t,kt,Tt)=>{switch(G){case"rect-center":var ee,Yt;at=null!==(ee=E.mouseEvent)&&void 0!==ee&&ee.shiftKey||null!==(Yt=E.touchEvent)&&void 0!==Yt&&Yt.shiftKey?Math.abs(kt-$)>=Math.abs(Tt-_t)?{x:A+kt-$,y:ht,width:vt,height:yt}:{x:A,y:ht+Tt-_t,width:vt,height:yt}:{x:A+kt-$,y:ht+Tt-_t,width:vt,height:yt};break;case"rect-top-left":var R,K,d,X,H,Y,At,Qt;at=(null!==(R=E.mouseEvent)&&void 0!==R&&R.shiftKey||null!==(K=E.touchEvent)&&void 0!==K&&K.shiftKey)&&(null!==(d=E.mouseEvent)&&void 0!==d&&d.altKey||null!==(X=E.touchEvent)&&void 0!==X&&X.altKey)?ft>=1?{x:A+(kt-$),y:ht+(kt-$)/ft,width:vt-2*(kt-$),height:yt-2*(kt-$)/ft}:{x:A+(Tt-_t)*ft,y:ht+(Tt-_t),width:vt-2*(Tt-_t)*ft,height:yt-2*(Tt-_t)}:null!==(H=E.mouseEvent)&&void 0!==H&&H.shiftKey||null!==(Y=E.touchEvent)&&void 0!==Y&&Y.shiftKey?ft>=1?{x:A+(kt-$),y:ht+(kt-$)/ft,width:vt-(kt-$),height:yt-(kt-$)/ft}:{x:A+(Tt-_t)*ft,y:ht+(Tt-_t),width:vt-(Tt-_t)*ft,height:yt-(Tt-_t)}:null!==(At=E.mouseEvent)&&void 0!==At&&At.altKey||null!==(Qt=E.touchEvent)&&void 0!==Qt&&Qt.altKey?{x:A+(kt-$),y:ht+(Tt-_t),width:vt-2*(kt-$),height:yt-2*(Tt-_t)}:{x:A+(kt-$),y:ht+(Tt-_t),width:vt-(kt-$),height:yt-(Tt-_t)};break;case"rect-top-right":var Ft,Dt,qt,ce,de,Rt,ge,nt;at=(null!==(Ft=E.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(Dt=E.touchEvent)&&void 0!==Dt&&Dt.shiftKey)&&(null!==(qt=E.mouseEvent)&&void 0!==qt&&qt.altKey||null!==(ce=E.touchEvent)&&void 0!==ce&&ce.altKey)?ft>=1?{x:A-(kt-$),y:ht-(kt-$)/ft,width:vt+2*(kt-$),height:yt+2*(kt-$)/ft}:{x:A+(Tt-_t)*ft,y:ht+(Tt-_t),width:vt-2*(Tt-_t)*ft,height:yt-2*(Tt-_t)}:null!==(de=E.mouseEvent)&&void 0!==de&&de.shiftKey||null!==(Rt=E.touchEvent)&&void 0!==Rt&&Rt.shiftKey?ft>=1?{x:A,y:ht-(kt-$)/ft,width:vt+(kt-$),height:yt+(kt-$)/ft}:{x:A,y:ht+(Tt-_t),width:vt-(Tt-_t)*ft,height:yt-(Tt-_t)}:null!==(ge=E.mouseEvent)&&void 0!==ge&&ge.altKey||null!==(nt=E.touchEvent)&&void 0!==nt&&nt.altKey?{x:A-(kt-$),y:ht+(Tt-_t),width:vt+2*(kt-$),height:yt-2*(Tt-_t)}:{x:A,y:ht+(Tt-_t),width:vt+(kt-$),height:yt-(Tt-_t)};break;case"rect-bottom-left":var f,V,ut,C,B,z,lt,gt;at=(null!==(f=E.mouseEvent)&&void 0!==f&&f.shiftKey||null!==(V=E.touchEvent)&&void 0!==V&&V.shiftKey)&&(null!==(ut=E.mouseEvent)&&void 0!==ut&&ut.altKey||null!==(C=E.touchEvent)&&void 0!==C&&C.altKey)?ft>=1?{x:A+(kt-$),y:ht+(kt-$)/ft,width:vt-2*(kt-$),height:yt-2*(kt-$)/ft}:{x:A-(Tt-_t)*ft,y:ht-(Tt-_t),width:vt+2*(Tt-_t)*ft,height:yt+2*(Tt-_t)}:null!==(B=E.mouseEvent)&&void 0!==B&&B.shiftKey||null!==(z=E.touchEvent)&&void 0!==z&&z.shiftKey?ft>=1?{x:A+(kt-$),y:ht,width:vt-(kt-$),height:yt-(kt-$)/ft}:{x:A-(Tt-_t)*ft,y:ht,width:vt+(Tt-_t)*ft,height:yt+(Tt-_t)}:null!==(lt=E.mouseEvent)&&void 0!==lt&&lt.altKey||null!==(gt=E.touchEvent)&&void 0!==gt&&gt.altKey?{x:A+(kt-$),y:ht-(Tt-_t),width:vt-2*(kt-$),height:yt+2*(Tt-_t)}:{x:A+(kt-$),y:ht,width:vt-(kt-$),height:yt+(Tt-_t)};break;case"rect-bottom-right":var xt,St,Et,jt,Xt,Bt,Wt,Ht;at=(null!==(xt=E.mouseEvent)&&void 0!==xt&&xt.shiftKey||null!==(St=E.touchEvent)&&void 0!==St&&St.shiftKey)&&(null!==(Et=E.mouseEvent)&&void 0!==Et&&Et.altKey||null!==(jt=E.touchEvent)&&void 0!==jt&&jt.altKey)?ft>=1?{x:A-(kt-$),y:ht-(kt-$)/ft,width:vt+2*(kt-$),height:yt+2*(kt-$)/ft}:{x:A-(Tt-_t)*ft,y:ht-(Tt-_t),width:vt+2*(Tt-_t)*ft,height:yt+2*(Tt-_t)}:null!==(Xt=E.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(Bt=E.touchEvent)&&void 0!==Bt&&Bt.shiftKey?ft>=1?{x:A,y:ht,width:vt+(kt-$),height:yt+(kt-$)/ft}:{x:A,y:ht,width:vt+(Tt-_t)*ft,height:yt+(Tt-_t)}:null!==(Wt=E.mouseEvent)&&void 0!==Wt&&Wt.altKey||null!==(Ht=E.touchEvent)&&void 0!==Ht&&Ht.altKey?{x:A-(kt-$),y:ht-(Tt-_t),width:vt+2*(kt-$),height:yt+2*(Tt-_t)}:{x:A,y:ht,width:vt+(kt-$),height:yt+(Tt-_t)};break;default:at={x:A+kt-$,y:ht+Tt-_t,width:vt,height:yt}}at.width<0&&(at.width=0),at.height<0&&(at.height=0),at.x=(0,h.q)(at.x),at.y=(0,h.q)(at.y),at.width=(0,h.q)(at.width),at.height=(0,h.q)(at.height),Object.assign(Z,at),Object.assign(b,(0,dt.sg)(W,Z)),(0,U.__)(window.document.getElementById(Q),b),(0,U.hJ)(J,M)})(_t[0][0],_t[0][1],$.x,$.y),wt=!0},end:($,_t)=>{wt&&st&&S.icdt.history.push([{type:"size",from:st,to:JSON.parse(JSON.stringify({id:Q,size:Z,attribute:b}))}])}})}},2966:(se,Ct,c)=>{c.d(Ct,{Q:()=>y});var L=c(1687),S=c(4981),dt=c(4318),T=c(6816),U=c(4080),h=c(3423),x=c(5811);const y=G=>{let M=999999,J=999999,Q=-999999,W=-999999;null==G||G.forEach(A=>{M=Math.min(M,A.size.x),J=Math.min(J,A.size.y),Q=Math.max(Q,A.size.x+A.size.width),W=Math.max(W,A.size.y+A.size.height)});let Z=(0,U.g1)(L.O.SELECT_GROUP,"g"),b=(0,dt.bH)(M,J,Q,W);(0,U.yD)(Z,G,b).forEach(A=>{O(A.element,A.posType,b,G,Z)})},O=(G,M,J,Q,W)=>{let Z=!1;null==G||G.addEventListener("touchstart",b=>{Z=!0,E({touchEvent:b},M,J,Q,W)}),null==G||G.addEventListener("mousedown",b=>{if(0==b.button){if(Z)return void(Z=!1);E({mouseEvent:b},M,J,Q,W)}})},E=(G,M,J,Q,W)=>{let{x:Z,y:b,width:A,height:ht}=J,vt=Q.map(Ot=>Object.assign({},Ot.size)),ft=[];(0,T.A)(G,{start:Ot=>{Q.forEach((Ot,ct)=>{let{id:wt,size:$,attribute:_t}=Ot;ft.push(JSON.parse(JSON.stringify({id:wt,size:$,attribute:_t})))})},move:(Ot,ct)=>{((Ot,ct,wt,it)=>{(()=>{let $;$="rect-center"===M?{x:Z+wt-Ot,y:b+it-ct,width:A,height:ht}:{x:Z,y:b,width:A,height:ht},(0,h.v)(S.icdt.screen.width),(0,h.v)(S.icdt.screen.height),$.width<0&&($.width=0),$.height<0&&($.height=0),Object.assign(J,$),(0,U.yD)(W,Q,J)})(),Q.forEach(($,_t)=>{let H,{x:kt,y:Tt,width:ee,height:Yt}=vt[_t],{id:R,type:K,size:d,attribute:X}=$;H="rect-center"===M?{x:kt+wt-Ot,y:Tt+it-ct,width:ee,height:Yt}:{x:kt,y:Tt,width:ee,height:Yt},(0,h.v)(S.icdt.screen.width),(0,h.v)(S.icdt.screen.height),H.width<0&&(H.width=0),H.height<0&&(H.height=0),H.x=(0,x.q)(H.x),H.y=(0,x.q)(H.y),H.width=(0,x.q)(H.width),H.height=(0,x.q)(H.height),Object.assign(d,H),Object.assign(X,(0,dt.sg)(K,d)),(0,U.__)(window.document.getElementById(R),X)})})(ct[0][0],ct[0][1],Ot.x,Ot.y)},end:(Ot,ct)=>{ft.length&&S.icdt.history.push(Q.map((Ot,ct)=>{let{id:wt,size:$,attribute:_t}=Ot;return{type:"size",from:ft[ct],to:JSON.parse(JSON.stringify({id:wt,size:$,attribute:_t}))}}))}})}},5226:(se,Ct,c)=>{c.d(Ct,{E:()=>W,T:()=>Z});var L=c(1687),S=c(8619),dt=c(8785),T=c(2282),U=c(8054),h=c(4921),x=c(6358),y=c(9054),O=c(8419),E=c(1105),G=c(2875),M=c(7210),J=c(4981),Q=c(4080);const W=(b,A)=>{var ht;if(A&&!window.document.getElementById(A))return;if(A){let yt=window.document.getElementById(A);jQuery(yt).find("#"+L.O.BACKGROUND_GROUP).empty();let ft=(0,Q.g1)(L.O.BACKGROUND_GROUP,"g",void 0,yt);(0,Q.x0)(ft,b)}else{jQuery(J.icdt.target).find("#"+L.O.BACKGROUND_GROUP).empty();let yt=(0,Q.g1)(L.O.BACKGROUND_GROUP,"g",void 0,J.icdt.target);(0,Q.x0)(yt,b)}let vt=(yt,ft)=>{ft=ft?parseFloat(`${A}0${ft}`):A,null==yt||yt.forEach(at=>{let Lt=A?parseFloat(`${A}0${at.id}`):at.id;var st;if(at.isdeleted)null===(st=window.document.getElementById(Lt))||void 0===st||st.remove();else switch(at.type){case y.$.GROUP:(0,x.m)(Lt,{},ft),vt(at.nodes,at.id);break;case y.$.CIRCLE:(0,S._)(Lt,{size:at.size,attribute:at.attribute},ft?window.document.getElementById(ft):null);break;case y.$.ELLIPSE:(0,dt.r)(Lt,{size:at.size,attribute:at.attribute},ft);break;case y.$.LINE:(0,h.W)(Lt,{size:at.size,attribute:at.attribute},ft);break;case y.$.RECT:(0,U.f)(Lt,{size:at.size,attribute:at.attribute},ft?window.document.getElementById(ft):null);break;case y.$.POLYGON:(0,T.l)(Lt,{size:at.size,attribute:at.attribute},ft);break;case y.$.FOREIGNOBJECT:(0,G.e)(Lt,{size:at.size,attribute:at.attribute,style:at.style,source:at.source},ft?window.document.getElementById(ft):null);break;case y.$.IMAGE:(0,M.G)(Lt,{size:at.size,attribute:at.attribute,source:at.source},ft?window.document.getElementById(ft):null);break;case y.$.TEXT:(0,E.$)(Lt,{size:at.size,attribute:at.attribute,source:at.source},ft);break;case y.$.PATH:(0,O.G)(Lt,{size:at.size,attribute:at.attribute},ft)}})};vt(null==b||null===(ht=b.svg)||void 0===ht?void 0:ht.nodes)},Z=(b,A)=>{var ht;if(A&&!window.document.getElementById(A))return;let vt=(yt,ft)=>{ft=ft?parseFloat(`${A}0${ft}`):A,null==yt||yt.forEach(at=>{let Lt=A?parseFloat(`${A}0${at.id}`):at.id;jQuery("#"+Lt).appendTo(ft?window.document.getElementById(ft):J.icdt.target),at.type==y.$.GROUP&&vt(at.nodes,at.id)})};vt(null==b||null===(ht=b.svg)||void 0===ht?void 0:ht.nodes)}},8619:(se,Ct,c)=>{c.d(Ct,{_:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{fill:S.icdt.attribute.fill,stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth};return Object.assign(E,(0,dt.sg)(L.$.CIRCLE,O)),{nodeId:h,element:(0,T.it)(h,L.$.CIRCLE,"circle",{size:O,attribute:E},y),size:O,attribute:E}}},8785:(se,Ct,c)=>{c.d(Ct,{r:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{fill:S.icdt.attribute.fill,stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth};return Object.assign(E,(0,dt.sg)(L.$.ELLIPSE,O)),{nodeId:h,element:(0,T.it)(h,L.$.ELLIPSE,"ellipse",{size:O,attribute:E},y?window.document.getElementById(y):null),size:O,attribute:E}}},2875:(se,Ct,c)=>{c.d(Ct,{e:()=>T});var L=c(9054),S=c(4318),dt=c(4080);const T=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:180,height:180},O=(null==h?void 0:h.attribute)||{};Object.assign(O,(0,S.sg)(L.$.FOREIGNOBJECT,y));let E=(null==h?void 0:h.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},G=(null==h?void 0:h.style)||{};return{nodeId:U,element:(0,dt.it)(U,L.$.FOREIGNOBJECT,"foreignObject",{size:y,attribute:O,style:G,source:E},x),size:y,attribute:O,style:G,source:E}}},6358:(se,Ct,c)=>{c.d(Ct,{m:()=>T});var L=c(9054),S=c(4318),dt=c(4080);const T=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},O=(null==h?void 0:h.attribute)||{};return Object.assign(O,(0,S.sg)(L.$.GROUP,y)),{nodeId:U,element:(0,dt.it)(U,L.$.GROUP,"g",{size:y,attribute:O},x?window.document.getElementById(x):null),size:y,attribute:O}}},7210:(se,Ct,c)=>{c.d(Ct,{G:()=>T});var L=c(9054),S=c(4318),dt=c(4080);const T=(U,h,x)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:200,height:100},O=(null==h?void 0:h.attribute)||{preserveAspectRatio:"none"};Object.assign(O,(0,S.sg)(L.$.IMAGE,y));let E=(null==h?void 0:h.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:U,element:(0,dt.it)(U,L.$.IMAGE,"image",{size:y,attribute:O,source:E},x),size:y,attribute:O,source:E}}},4921:(se,Ct,c)=>{c.d(Ct,{W:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth,strokeLinecap:S.icdt.attribute.strokeLinecap};return Object.assign(E,(0,dt.sg)(L.$.LINE,O)),{nodeId:h,element:(0,T.it)(h,L.$.LINE,"line",{size:O,attribute:E},y?window.document.getElementById(y):null),size:O,attribute:E}}},8419:(se,Ct,c)=>{c.d(Ct,{G:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth};return Object.assign(E,(0,dt.sg)(L.$.PATH,O)),{nodeId:h,element:(0,T.it)(h,L.$.PATH,"path",{size:O,attribute:E},y?window.document.getElementById(y):null),size:O,attribute:E}}},2282:(se,Ct,c)=>{c.d(Ct,{l:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{fill:S.icdt.attribute.fill,stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth};return Object.assign(E,(0,dt.sg)(L.$.POLYGON,O)),{nodeId:h,element:(0,T.it)(h,L.$.POLYGON,"polygon",{size:O,attribute:E},y?window.document.getElementById(y):null),size:O,attribute:E}}},8054:(se,Ct,c)=>{c.d(Ct,{f:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},E=(null==x?void 0:x.attribute)||{fill:S.icdt.attribute.fill,stroke:S.icdt.attribute.stroke,strokeWidth:S.icdt.attribute.strokeWidth};return Object.assign(E,(0,dt.sg)(L.$.RECT,O)),{nodeId:h,element:(0,T.it)(h,L.$.RECT,"rect",{size:O,attribute:E},y),size:O,attribute:E}}},1105:(se,Ct,c)=>{c.d(Ct,{$:()=>U});var L=c(9054),S=c(4981),dt=c(4318),T=c(4080);const U=(h,x,y)=>{let O=(null==x?void 0:x.size)||{x:0,y:0,width:100,height:50},E=(null==x?void 0:x.attribute)||{fill:S.icdt.attribute.stroke,fontFamily:S.icdt.attribute.fontFamily,fontSize:S.icdt.attribute.fontSize,textLength:S.icdt.attribute.textLength};Object.assign(E,(0,dt.sg)(L.$.TEXT,O));let G=(null==x?void 0:x.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:h,element:(0,T.it)(h,L.$.TEXT,"text",{size:O,attribute:E,source:G},y?window.document.getElementById(y):null),size:O,attribute:E,source:G}}},4318:(se,Ct,c)=>{c.d(Ct,{bH:()=>S,sg:()=>dt});var L=c(9054);const S=(U,h,x,y,O)=>{let E={x:Math.min(U,x),y:Math.min(h,y),width:Math.abs(x-U)||1,height:Math.abs(y-h)||1};return null!=O&&O.ratio&&(E.width<=E.height?E.height=E.width*(null==O?void 0:O.ratio):E.width=E.height/(null==O?void 0:O.ratio)),Object.assign(E,{ratios:(null==O?void 0:O.ratios)||[[(U-E.x)/(E.width||1),(h-E.y)/(E.height||1)],[(x-E.x)/(E.width||1),(y-E.y)/(E.height||1)]]}),null!=O&&O.points&&(E.points=null==O?void 0:O.points),E},dt=(U,h,x)=>{var y=(()=>{switch(U){case L.$.CIRCLE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,r:Math.min(h.width/2,h.height/2)};case L.$.ELLIPSE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2};case L.$.LINE:{var O;let J={};return null===(O=h.ratios)||void 0===O||O.forEach((Q,W)=>{J[`x${W+1}`]=h.x+h.width*Q[0],J[`y${W+1}`]=h.y+h.height*Q[1]}),J}case L.$.RECT:return{x:h.x,y:h.y,width:h.width,height:h.height,rx:h.rx,ry:h.ry};case L.$.POLYGON:var E;return{points:((null===(E=h.ratios)||void 0===E?void 0:E.map(J=>[h.x+h.width*J[0],h.y+h.height*J[1]]))||[]).map(J=>J.join(" ")).join(",")};case L.$.FOREIGNOBJECT:case L.$.IMAGE:return{x:h.x,y:h.y,width:h.width,height:h.height};case L.$.TEXT:var G;return{x:h.x,y:h.y+(null!==(G=null==x?void 0:x.fontSize)&&void 0!==G?G:20)-4};case L.$.PATH:{var M;let J=null!==(M=h.points)&&void 0!==M?M:[];return J.length?{d:`M ${J[0][0]} ${J[0][1]} L `+(J.map(Q=>[Q[0],Q[1]])||[]).map(Q=>Q.join(" ")).join(" ")}:{d:""}}}return{}})();return h.rotate?(y.transform=`rotate(${h.rotate})`,y.transformOrigin=`${h.x+h.width/2} ${h.y+h.height/2}`):(y.transform=null,y.transformOrigin=null),y}},5811:(se,Ct,c)=>{c.d(Ct,{q:()=>L});const L=(S,dt)=>{var T;return dt=null!==(T=dt)&&void 0!==T?T:100,Math.round((S+Number.EPSILON)*dt)/dt}},3423:(se,Ct,c)=>{c.d(Ct,{v:()=>dt});var L=c(4981),S=c(5811);const dt=T=>(0,S.q)(T/L.icdt.screen.scale)},3385:(se,Ct,c)=>{c.d(Ct,{NC:()=>E,SM:()=>O,VW:()=>G,Vs:()=>y,co:()=>h,k6:()=>U,lO:()=>x,mr:()=>M});var L=c(4981),S=c(4080),dt=c(4318),T=c(5811);const U=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.x=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])},h=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.y=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])},x=(J,Q,W)=>{let{id:Z,type:b,size:A,attribute:ht}=J,vt=JSON.parse(JSON.stringify({id:Z,size:A,attribute:ht}));W&&(A.height=(0,T.q)(Q*A.height/A.width)),A.width=(0,T.q)(Q),Object.assign(ht,(0,dt.sg)(b,A)),(0,S.__)(window.document.getElementById(Z),ht),L.icdt.history.push([{type:"size",from:vt,to:JSON.parse(JSON.stringify({id:Z,size:A,attribute:ht}))}])},y=(J,Q,W)=>{let{id:Z,type:b,size:A,attribute:ht}=J,vt=JSON.parse(JSON.stringify({id:Z,size:A,attribute:ht}));W&&(A.width=(0,T.q)(Q*A.width/A.height)),A.height=(0,T.q)(Q),Object.assign(ht,(0,dt.sg)(b,A)),(0,S.__)(window.document.getElementById(Z),ht),L.icdt.history.push([{type:"size",from:vt,to:JSON.parse(JSON.stringify({id:Z,size:A,attribute:ht}))}])},O=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.r=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])},E=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.rx=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])},G=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.ry=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])},M=(J,Q)=>{let{id:W,type:Z,size:b,attribute:A}=J,ht=JSON.parse(JSON.stringify({id:W,size:b,attribute:A}));b.rotate=(0,T.q)(Q),Object.assign(A,(0,dt.sg)(Z,b)),(0,S.__)(window.document.getElementById(W),A),L.icdt.history.push([{type:"size",from:ht,to:JSON.parse(JSON.stringify({id:W,size:b,attribute:A}))}])}},6816:(se,Ct,c)=>{c.d(Ct,{A:()=>h});var L=c(968),S=c(4981);class dt{constructor(y){this._points=[],this._options=y}start(y){this._points.length=0,this._points.push([y.x,y.y]),this._options.start(y)}move(y){this._points.push([y.x,y.y]),this._options.move(y,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(y=this._points[0])[0],y:y[1]}:{x:0,y:0};var y}get offsetLast(){return this._points.length>=1?{x:(y=this._points[this._points.length-1])[0],y:y[1]}:{x:0,y:0};var y}}var T=c(7797);const h=(x,y,O,E,G)=>{var M,J,Q;let W=null,Z=0,b=0;x.mouseEvent?(W=x.mouseEvent.target,Z=x.mouseEvent.offsetX,b=x.mouseEvent.offsetY):x.touchEvent&&(W=x.touchEvent.target,x.touchEvent.touches.length&&(Z=x.touchEvent.touches[0].clientX,b=x.touchEvent.touches[0].clientY));let A=null!=O?O:S.icdt.screen.scale,ht=null!=E?E:S.icdt.screen.dislocation,vt=null!=G?G:S.icdt.screen.offset,yt=()=>{};var ft=new dt({start:null!==(M=null==y?void 0:y.start)&&void 0!==M?M:yt,move:null!==(J=null==y?void 0:y.move)&&void 0!==J?J:yt,end:null!==(Q=null==y?void 0:y.end)&&void 0!==Q?Q:yt});x.mouseEvent?ft.start((0,T.p)({x:Z,y:b},A,ht,{x:0,y:0})):x.touchEvent&&ft.start((0,T.p)({x:Z,y:b},A,ht,vt));let at=$=>{ft.move((0,T.p)({x:$.clientX,y:$.clientY},A,ht,vt))},Lt=$=>{ft.end(),[L._.SHAPE,L._.FOREIGNOBJECT,L._.IMAGE,L._.TEXT].includes(S.icdt.pointer.pointer_type)&&($.shiftKey||(S.icdt.pointer.pointer_type=L._.POINTER))},st=$=>{$.touches.length&&at({clientX:$.touches[0].clientX,clientY:$.touches[0].clientY})},Ot=$=>{Lt({shiftKey:$.shiftKey,ctrlKey:$.ctrlKey,altKey:$.altKey}),window.removeEventListener("touchmove",st,!1),window.removeEventListener("touchend",Ot,!1)},ct=$=>{0==$.button&&at({clientX:$.clientX,clientY:$.clientY})},wt=$=>{0==$.button&&(Lt({shiftKey:$.shiftKey,ctrlKey:$.ctrlKey,altKey:$.altKey}),window.removeEventListener("mousemove",ct,!1),window.removeEventListener("mouseup",wt,!1))};if(x.mouseEvent)window.addEventListener("mousemove",ct,!1),window.addEventListener("mouseup",wt,!1);else if(x.touchEvent){var it;window.addEventListener("touchmove",st,!1),window.addEventListener("touchend",Ot,!1),null===(it=W)||void 0===it||it.addEventListener("touchmove",function($){$.preventDefault()})}}},7797:(se,Ct,c)=>{c.d(Ct,{p:()=>S});var L=c(5811);const S=(dt,T,U,h)=>(dt.x-=h.x,dt.y-=h.y,dt.x/=T,dt.y/=T,dt.x-=U.x,dt.y-=U.y,dt.x=(0,L.q)(dt.x),dt.y=(0,L.q)(dt.y),dt)},1690:(se,Ct,c)=>{c.d(Ct,{$:()=>Rt});var L=c(4981),S=c(9054),dt=c(5973),T=c(2336),U=c(861),h=c(157),x=c(4787),O=c(1105),E=c(6358);const b=function(nt){var f,V,ut=jQuery("#"+nt),C=null===(f=ut.attr("class"))||void 0===f?void 0:f.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),B=null===(V=ut.attr("class"))||void 0===V?void 0:V.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);C&&C.forEach(function(lt){jQuery(ut).removeClass(lt)}),B&&B.forEach(function(lt){jQuery(ut).removeClass(lt)});let z=ut.attr("data-class");z&&(ut.attr("class",z),ut.removeAttr("data-class")),jQuery(ut).data("animation-running",!1)};var A=c(7210),ht=c(5811);const vt=(nt,f,V)=>{var ut,C,B,z;let lt=1,gt=new Image;gt.onload=()=>{var xt,St,Et,jt;lt=(0,ht.q)(gt.naturalWidth/gt.naturalHeight,100);let Xt=0,Bt=0,Wt=0,Ht=0;var ue,ie,ne,pe;lt>=1?(Wt=Math.min(gt.naturalWidth,null!==(ue=null===(ie=Rt.slide.svg)||void 0===ie||null===(ie=ie.viewBox)||void 0===ie?void 0:ie.width)&&void 0!==ue?ue:0),Ht=Wt/lt):(Ht=Math.min(gt.naturalHeight,null!==(ne=null===(pe=Rt.slide.svg)||void 0===pe||null===(pe=pe.viewBox)||void 0===pe?void 0:pe.height)&&void 0!==ne?ne:0),Wt=Ht/lt),Xt=((null!==(xt=null===(St=Rt.slide.svg)||void 0===St||null===(St=St.viewBox)||void 0===St?void 0:St.width)&&void 0!==xt?xt:0)-Wt)/2,Bt=((null!==(Et=null===(jt=Rt.slide.svg)||void 0===jt||null===(jt=jt.viewBox)||void 0===jt?void 0:jt.height)&&void 0!==Et?Et:0)-Ht)/2,f.size={x:Xt,y:Bt,width:Wt,height:Ht},yt(f,V)},gt.onerror=xt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(f.source)}`,xt)},gt.src=null!==(ut=null!==(C=null===(B=f.source)||void 0===B?void 0:B.url)&&void 0!==C?C:null===(z=f.source)||void 0===z?void 0:z.path)&&void 0!==ut?ut:""},yt=(nt,f)=>{if(nt.slideStatus!=Rt.slideStatus)return void f();let{element:V}=(0,A.G)(Math.ceil(1e9*Math.random()),{size:nt.size,source:{type:"image",image:null==nt?void 0:nt.source}});setTimeout(()=>{null==V||V.remove(),f()},3e3)},ft=(nt,f,V)=>{var ut,C,B,z;let lt=new Image;lt.onload=()=>{at(nt,{width:lt.naturalWidth,height:lt.naturalHeight},f,V)},lt.onerror=gt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(f.source)}`,gt),V()},lt.src=null!==(ut=null!==(C=null===(B=f.source)||void 0===B?void 0:B.url)&&void 0!==C?C:null===(z=f.source)||void 0===z?void 0:z.path)&&void 0!==ut?ut:""},at=(nt,f,V,ut)=>{if(V.slideStatus!=Rt.slideStatus)return void ut();let C=(0,ht.q)(f.width/f.height,100),B=0,z=0,lt=0,gt=0;C>=1?(lt=f.width,lt=Math.max(lt,40),lt=Math.min(lt,100),gt=lt/C):(gt=f.height,gt=Math.max(gt,40),gt=Math.min(gt,100),lt=gt/C);let{size:xt}=nt;B=xt.x+xt.width/2-lt/2,z=xt.y+xt.height/2-gt/2;let{element:St}=(0,A.G)(Math.ceil(1e9*Math.random()),{size:{x:B,y:z,width:lt,height:gt},source:{type:"image",image:null==V?void 0:V.source}});setTimeout(()=>{null==St||St.remove(),ut()},3e3)};var Lt=c(4080);const st=(nt,f,V)=>{var ut,C,B;if(f.slideStatus!=Rt.slideStatus)return void V();if(null===(ut=f.source)||void 0===ut||!ut.url)return console.warn(`${nt.id} -> audio no source!`),void V();var z=jQuery("#"+nt.id);let lt=null!==(C=f.iteration)&&void 0!==C?C:0;if(lt<0&&(V(),V=function(){}),!(z.data("audio-running")&&lt<0)){z.data("audio-running",!0);var gt=new Audio;return gt.autoplay=!0,gt.loop=0!=lt,gt.preload="auto",gt.controls=!0,gt.setAttributeNode(document.createAttribute("playsinline")),gt.addEventListener("canplay",function(){var xt=gt.play();xt&&xt.then(function(St){z.data("audio-running",!0)}).catch(function(St){z.data("audio-running",!1),f.slideStatus===Rt.slideStatus&&V()})}),gt.addEventListener("timeupdate",function(){var St;f.slideStatus!==Rt.slideStatus&&((St=this).pause(),St.remove(),z.data("audio-running",!1))}),gt.addEventListener("canplaythrough",function(){this.loop&&(lt>0?lt--:0==lt&&(this.loop=!1))}),gt.addEventListener("play",function(){}),gt.addEventListener("pause",function(){}),gt.addEventListener("ended",function(){this.remove(),z.data("audio-running",!1),f.slideStatus===Rt.slideStatus&&V()}),gt.onerror=function(){this.remove(),z.data("audio-running",!1),f.slideStatus===Rt.slideStatus&&V()},gt.src=(null===(B=f.source)||void 0===B?void 0:B.url)||"",gt}};var Ot=c(1687),ct=c(4447);const Tt=(nt,f,V)=>{var ut;null===(ut=f.test)||void 0===ut||null===(ut=ut.answer)||void 0===ut||null===(ut=ut.matching)||void 0===ut||ut.filter(C=>C.value==V.key).forEach(C=>C.value="")},Yt=(nt,f,V,ut,C,B)=>{var z,lt,gt,xt,St,Et,jt,Xt,Bt,Wt,Ht,ue;C.iscorrect?(null!==(z=f.test)&&void 0!==z&&null!==(z=z.audiotrue)&&void 0!==z&&z.path&&st(nt,{source:(0,ct.I)(null===(xt=f.test)||void 0===xt?void 0:xt.audiotrue),iteration:0,nodeStatus:V,slideStatus:ut},B),null!==(lt=f.test)&&void 0!==lt&&null!==(lt=lt.icontrue)&&void 0!==lt&&lt.path&&ft(nt,{source:(0,ct.I)(null===(St=f.test)||void 0===St?void 0:St.icontrue),iteration:0,nodeStatus:V,slideStatus:ut},B),null!==(gt=f.test)&&void 0!==gt&&null!==(gt=gt.effecttrue)&&void 0!==gt&&gt.path&&vt(0,{source:(0,ct.I)(null===(Et=f.test)||void 0===Et?void 0:Et.effecttrue),iteration:0,nodeStatus:V,slideStatus:ut},B)):(null!==(jt=f.test)&&void 0!==jt&&null!==(jt=jt.audiofalse)&&void 0!==jt&&jt.path&&st(nt,{source:(0,ct.I)(null===(Wt=f.test)||void 0===Wt?void 0:Wt.audiofalse),iteration:0,nodeStatus:V,slideStatus:ut},B),null!==(Xt=f.test)&&void 0!==Xt&&null!==(Xt=Xt.iconfalse)&&void 0!==Xt&&Xt.path&&ft(nt,{source:(0,ct.I)(null===(Ht=f.test)||void 0===Ht?void 0:Ht.iconfalse),iteration:0,nodeStatus:V,slideStatus:ut},B),null!==(Bt=f.test)&&void 0!==Bt&&null!==(Bt=Bt.effectfalse)&&void 0!==Bt&&Bt.path&&vt(0,{source:(0,ct.I)(null===(ue=f.test)||void 0===ue?void 0:ue.effectfalse),iteration:0,nodeStatus:V,slideStatus:ut},B))},R=(nt,f,V,ut)=>{var C,B,z,lt,gt,xt;null!==(C=f.animate)&&void 0!==C&&C.value&&((nt,f,V)=>{var ut;let{value:B}=null!==(ut=nt.animate)&&void 0!==ut?ut:{};((nt,f,V)=>{var ut;let C=jQuery("#"+nt),B="",z=null!==(ut=f.iteration)&&void 0!==ut?ut:0,lt=[];(f.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?lt.push(f.value):f.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(f.value)?(lt.push("animation"),lt.push(`animation-${f.value}`)):(lt.push("animate__animated"),lt.push(`animate__${f.value}`)):(lt.push("animation"),lt.push("animation-fadein")),z<0?(lt.push("animation-iteration-infinite"),V(),V=function(){}):z>0&&lt.push("animation-iteration-"+(z+1)),B=lt.join(" "),function(xt){let St=function(){C.data("animate-running")?C.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){C.data("animate-running",!1),setTimeout(function(){xt()},100)}):xt()};C.hasClass("animation")?setTimeout(function(){St()}):St()}(function(){var xt;b(nt),(z>0||z<0)&&C.one("animationiteration",function(){f.slideStatus===Rt.slideStatus||(C.data("animate-running",!1),b(nt),f.slideStatus===Rt.slideStatus&&V())}),C.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(C.data("animate-running",!1),b(nt),f.finish){default:case 0:case 1:break;case 2:C.addClass("hide")}f.slideStatus===Rt.slideStatus&&V()}),C.attr("data-class",null!==(xt=C.attr("class"))&&void 0!==xt?xt:""),C.addClass(B),C.data("animate-running",!0)})})(nt.id,{value:B,nodeStatus:f,slideStatus:V},()=>{})})(f,V.nodeStatus,V.slideStatus),null!==(B=f.interactive)&&void 0!==B&&B.show?((nt,f,V,ut)=>{var C,B,z;console.log("icdt_Run_Interactive_NodeShow",nt,f,V);let lt={total:0,counter:0},{triggershow:gt,triggerrun:xt,triggerhide:St,action:Et,audio:jt}=null!==(C=null===(B=nt.interactive)||void 0===B?void 0:B.show)&&void 0!==C?C:{};if(gt){let{id:Bt,ids:Wt,time:Ht,async:ue}=gt;"asynctrue"==ue?(0,x.L5)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V}):"time"==ue&&setTimeout(()=>{(0,x.L5)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})},1e3*(null!=Ht?Ht:0))}if(xt){let{id:Bt,ids:Wt,time:Ht,async:ue}=xt;"asynctrue"==ue?(0,x.Ar)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V}):"time"==ue&&setTimeout(()=>{(0,x.Ar)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})},1e3*(null!=Ht?Ht:0))}if(St){let{id:Bt,ids:Wt,time:Ht,async:ue}=St;"asynctrue"==ue?(0,x.WT)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V}):"time"==ue&&setTimeout(()=>{(0,x.WT)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})},1e3*(null!=Ht?Ht:0))}let Xt=()=>{setTimeout(()=>{if(lt.counter>=lt.total){if(ut&&ut(),gt){let{id:Bt,ids:Wt,async:Ht}=gt;"asyncfalse"==Ht&&(0,x.L5)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})}if(xt){let{id:Bt,ids:Wt,async:Ht}=xt;"asyncfalse"==Ht&&(0,x.Ar)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})}if(St){let{id:Bt,ids:Wt,async:Ht}=St;"asyncfalse"==Ht&&(0,x.WT)({id:Bt,ids:Wt,nodeStatus:f,slideStatus:V})}}})};if(null!=Et&&Et.value){lt.total+=1;let Bt=()=>{lt.counter+=1,Xt()};switch(null==Et?void 0:Et.value){case"hide":jQuery("#"+nt.id).addClass("hide"),Bt();break;case"points":{let{points:Wt,time:Ht,iteration:ue,finish:ie}=Et;(0,U.G)(nt.id,{points:Wt,time:Ht,iteration:ue,finish:ie,nodeStatus:f,slideStatus:V},Bt);break}default:{let{value:Wt,time:Ht,iteration:ue,finish:ie}=Et;(0,T.Q)(nt.id,{value:Wt,time:Ht,iteration:ue,finish:ie,nodeStatus:f,slideStatus:V},Bt);break}}}if(null!=jt&&null!==(z=jt.source)&&void 0!==z&&z.path){lt.total+=1;let Bt=()=>{lt.counter+=1,Xt()};(0,h.R)(nt.id,jt,lt,{nodeStatus:f,slideStatus:V},Bt)}lt.total||Xt()})(f,V.nodeStatus,V.slideStatus,ut):ut&&ut(),null!==(z=f.interactive)&&void 0!==z&&z.click&&jQuery("#"+f.id).click(St=>{var Et;St.preventDefault(),null!==(Et=f.interactive)&&void 0!==Et&&null!==(Et=Et.click)&&void 0!==Et&&Et.action&&jQuery("#"+f.id).addClass("interactive-click"),V.nodeStatus=Rt.refreshNodeStatus(),(0,dt.F)(f,V.nodeStatus,V.slideStatus)}),null!==(lt=f.variable)&&void 0!==lt&&lt.input&&jQuery("#"+f.id).on("change","input,textarea",St=>{St.preventDefault(),((nt,f,V)=>{var ut,C;L.icdt.variable.setValue(null!==(ut=null===(C=f.variable)||void 0===C||null===(C=C.input)||void 0===C?void 0:C.variable)&&void 0!==ut?ut:"",nt),(nt=>{var f;let V=(ut,C)=>{null==ut||ut.forEach(B=>{switch(B.type){case S.$.GROUP:(0,E.m)(B.id,{},C),V(B.nodes,B.id);break;case S.$.POLYGON:break;case S.$.TEXT:(0,O.$)(B.id,{size:B.size,attribute:B.attribute,source:B.source},C)}})};V(null===(f=nt.svg)||void 0===f?void 0:f.nodes)})(V)})(St.target.value,f,nt)}),null!==(gt=f.variable)&&void 0!==gt&&gt.click&&jQuery("#"+f.id).click(St=>{var Et;St.preventDefault(),null!==(Et=f.variable)&&void 0!==Et&&null!==(Et=Et.click)&&void 0!==Et&&Et.variable&&jQuery("#"+f.id).addClass("variable-click"),((nt,f)=>{var V;L.icdt.variable.setValueOperator(null===(V=nt.variable)||void 0===V?void 0:V.click),(nt=>{var f;let V=(ut,C)=>{null==ut||ut.forEach(B=>{switch(B.type){case S.$.GROUP:(0,E.m)(B.id,{},C),V(B.nodes,B.id);break;case S.$.POLYGON:break;case S.$.TEXT:(0,O.$)(B.id,{size:B.size,attribute:B.attribute,source:B.source},C)}})};V(null===(f=nt.svg)||void 0===f?void 0:f.nodes)})(f)})(f,nt)}),"test"==(null===(xt=f.source)||void 0===xt?void 0:xt.type)&&((nt,f)=>{var V;let ut=()=>{};switch(null===(V=nt.source)||void 0===V||null===(V=V.test)||void 0===V?void 0:V.type){case"singlechoice":jQuery("#"+nt.id).click(C=>{C.preventDefault(),((nt,f,V,ut,C)=>{var B,z;let lt=null===(B=nt.source)||void 0===B||null===(B=B.test)||void 0===B||null===(B=B.singlechoice)||void 0===B?void 0:B.iscorrect;null!==(z=f.svg)&&void 0!==z&&z.nodes.find(xt=>{var St;return"submit"==(null===(St=xt.source)||void 0===St||null===(St=St.test)||void 0===St?void 0:St.type)})||Yt(nt,f,V,ut,{iscorrect:lt},C),f.test?f.test.answer?f.test.answer.singlechoice={value:nt.id,iscorrect:lt}:f.test.answer={singlechoice:{value:nt.id,iscorrect:lt}}:f.test={answer:{singlechoice:{value:nt.id,iscorrect:lt}}};let gt=(0,Lt.g1)(Ot.O.TEST_GROUP,"g",void 0,L.icdt.target);(0,Lt.Yw)(gt,f),console.log("node source ->",nt.source),console.log("slide test ->",f.test)})(nt,f,Rt.nodeStatus,Rt.slideStatus,ut)});break;case"multichoice":jQuery("#"+nt.id).click(C=>{C.preventDefault(),((nt,f,V,ut,C)=>{var B,z;let gt,lt=null===(B=nt.source)||void 0===B||null===(B=B.test)||void 0===B||null===(B=B.multichoice)||void 0===B?void 0:B.iscorrect;null!==(z=f.svg)&&void 0!==z&&z.nodes.find(St=>{var Et;return"submit"==(null===(Et=St.source)||void 0===Et||null===(Et=Et.test)||void 0===Et?void 0:Et.type)})||Yt(nt,f,V,ut,{iscorrect:lt},C),f.test?f.test.answer?f.test.answer.multichoice?f.test.answer.multichoice.find(St=>St.value==nt.id)?(f.test.answer.multichoice=f.test.answer.multichoice.filter(St=>St.value!=nt.id),gt=!0):f.test.answer.multichoice.push({value:nt.id,iscorrect:lt}):f.test.answer.multichoice=[{value:nt.id,iscorrect:lt}]:f.test.answer={multichoice:[{value:nt.id,iscorrect:lt}]}:f.test={answer:{multichoice:[{value:nt.id,iscorrect:lt}]}};let xt=(0,Lt.g1)(Ot.O.TEST_GROUP,"g",void 0,L.icdt.target);(0,Lt.Yw)(xt,f),console.log("node source ->",nt.source),console.log("slide test ->",f.test)})(nt,f,Rt.nodeStatus,Rt.slideStatus,ut)});break;case"fill":jQuery("#"+nt.id).on("keyup",'input[type="text"]',C=>{var B;let z=jQuery("<div/>").css({"font-size":jQuery(C.target).css("font-size"),visibility:"hidden",float:"left"}).text(C.target.value).appendTo(window.document.body);jQuery(C.target).css({width:(null!==(B=z.width())&&void 0!==B?B:0)+30})}).on("keypress",'input[type="text"]',C=>{13===(C.keyCode||C.charCode||C.which)&&(C.preventDefault(),C.stopPropagation(),jQuery(C.target).blur())}).on("change",'input[type="text"]',C=>{var B,z;let lt=Rt.nodeStatus,gt=Rt.slideStatus,xt=null===(B=C.target)||void 0===B?void 0:B.getAttribute("data-key"),St=null===(z=C.target)||void 0===z||null===(z=z.value)||void 0===z||null===(z=z.toLowerCase())||void 0===z?void 0:z.trim();((nt,f,V,ut,C,B)=>{var z,lt,gt;let{value:xt}=null!==(z=null===(lt=nt.source)||void 0===lt||null===(lt=lt.test)||void 0===lt||null===(lt=lt.fill)||void 0===lt?void 0:lt.find(Et=>Et.key==`[[${C.key}]]`))&&void 0!==z?z:{},St=xt&&xt.includes(C.value);null!==(gt=f.svg)&&void 0!==gt&&gt.nodes.find(Et=>{var jt;return"submit"==(null===(jt=Et.source)||void 0===jt||null===(jt=jt.test)||void 0===jt?void 0:jt.type)})||Yt(nt,f,V,ut,{iscorrect:St},B),C.iscorrect=St,f.test?f.test.answer?f.test.answer.fill?f.test.answer.fill.find(Et=>Et.key==C.key)?f.test.answer.fill.filter(Et=>Et.key==C.key).forEach(Et=>{Et.value=C.value,Et.iscorrect=C.iscorrect}):f.test.answer.fill.push(C):f.test.answer.fill=[C]:f.test.answer={fill:[C]}:f.test={answer:{fill:[C]}},console.log("node source ->",nt.source),console.log("slide test ->",f.test)})(nt,f,lt,gt,{key:xt,value:St},ut),jQuery("#"+nt.id).find(`input[type="text"][data-key="${xt}"]`).val(St)});break;case"matching-empty":jQuery("#"+nt.id).on("touchmove",".ondrag-item",function(C){C.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(C){return`<div style="width:64px;height:${nt.size.height/nt.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.4);">${C.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(C){jQuery('svg foreignObject .ondrop-here[data-type="matching"]:empty').addClass("actived")},drag:function(C){},dragend:function(C){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${nt.id} .ondrop-here`).kendoDropTarget({dragenter:function(C){C.dropTarget.hasClass("actived")&&C.dropTarget.addClass("focused")},dragleave:function(C){C.dropTarget.hasClass("actived")&&C.dropTarget.removeClass("focused")},drop:function(C){if(!C.dropTarget.hasClass("actived"))return;C.dropTarget.removeClass("focused");let z=C.draggable.currentTarget;z.appendTo(C.dropTarget),((nt,f,V,ut,C,B)=>{var z,lt,gt;let{key:xt}=null!==(z=null===(lt=nt.source)||void 0===lt||null===(lt=lt.test)||void 0===lt?void 0:lt.matching)&&void 0!==z?z:{key:"KIEN"},St=C.key==xt;null!==(gt=f.svg)&&void 0!==gt&&gt.nodes.find(jt=>{var Xt;return"submit"==(null===(Xt=jt.source)||void 0===Xt||null===(Xt=Xt.test)||void 0===Xt?void 0:Xt.type)})||Yt(nt,f,V,ut,{iscorrect:St},B),Tt(nt,f,C);let Et={key:null!=xt?xt:"",value:C.key};f.test?f.test.answer?f.test.answer.matching?f.test.answer.matching.find(jt=>jt.key==xt)?f.test.answer.matching.filter(jt=>jt.key==xt).forEach(jt=>jt.value=Et.value):f.test.answer.matching.push(Et):f.test.answer.matching=[Et]:f.test.answer={matching:[Et]}:f.test={answer:{matching:[Et]}},console.log("node source ->",nt.source),console.log("slide test ->",f.test)})(nt,f,Rt.nodeStatus,Rt.slideStatus,{key:z.data("key")},ut)}});break;case"matching-content":jQuery("#"+nt.id).on("touchmove",".ondrag-item",function(C){C.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(C){return`<div style="width:64px;height:${nt.size.height/nt.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.4);">${C.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(C){jQuery('svg foreignObject .ondrop-here[data-type="matching"]:empty').addClass("actived")},drag:function(C){},dragend:function(C){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${nt.id} .ondrop-here`).kendoDropTarget({dragenter:function(C){C.dropTarget.hasClass("actived")&&C.dropTarget.addClass("focused")},dragleave:function(C){C.dropTarget.hasClass("actived")&&C.dropTarget.removeClass("focused")},drop:function(C){if(!C.dropTarget.hasClass("actived"))return;C.dropTarget.removeClass("focused");let z=C.draggable.currentTarget;z.appendTo(C.dropTarget),Tt(nt,f,{key:z.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+nt.id).click(C=>{C.preventDefault(),((nt,f,V,ut,C)=>{var B,z,lt,gt;let xt;var St;if(null!=f&&null!==(B=f.test)&&void 0!==B&&null!==(B=B.answer)&&void 0!==B&&B.singlechoice)xt=null==f||null===(St=f.test)||void 0===St||null===(St=St.answer)||void 0===St||null===(St=St.singlechoice)||void 0===St?void 0:St.iscorrect;else if(null!=f&&null!==(z=f.test)&&void 0!==z&&null!==(z=z.answer)&&void 0!==z&&z.multichoice){var Et,jt,Xt;xt=1==[null==f||null===(Et=f.test)||void 0===Et||null===(Et=Et.answer)||void 0===Et||null===(Et=Et.multichoice)||void 0===Et?void 0:Et.length,null==f||null===(jt=f.test)||void 0===jt||null===(jt=jt.answer)||void 0===jt||null===(jt=jt.multichoice)||void 0===jt||null===(jt=jt.map(ie=>ie.iscorrect?1:0))||void 0===jt?void 0:jt.reduce((ie,ne)=>ie+ne),null==f||null===(Xt=f.svg)||void 0===Xt||null===(Xt=Xt.nodes)||void 0===Xt||null===(Xt=Xt.filter(ie=>{var ne,pe;return"multichoice"==(null===(ne=ie.source)||void 0===ne||null===(ne=ne.test)||void 0===ne?void 0:ne.type)&&(null===(pe=ie.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===Xt?void 0:Xt.length].filter((ie,ne,pe)=>pe.indexOf(ie)==ne).length}else if(null!=f&&null!==(lt=f.test)&&void 0!==lt&&null!==(lt=lt.answer)&&void 0!==lt&&lt.fill){var Bt,Wt;xt=(null==f||null===(Bt=f.test)||void 0===Bt||null===(Bt=Bt.answer)||void 0===Bt||null===(Bt=Bt.fill)||void 0===Bt||null===(Bt=Bt.map(ie=>ie.iscorrect?1:0))||void 0===Bt?void 0:Bt.reduce((ie,ne)=>ie+ne))==(null===(Wt=f.svg)||void 0===Wt||null===(Wt=Wt.nodes)||void 0===Wt||null===(Wt=Wt.filter(ie=>{var ne;return"fill"==(null===(ne=ie.source)||void 0===ne||null===(ne=ne.test)||void 0===ne?void 0:ne.type)}))||void 0===Wt?void 0:Wt.length)}else if(null!=f&&null!==(gt=f.test)&&void 0!==gt&&null!==(gt=gt.answer)&&void 0!==gt&&gt.matching){var Ht,ue;xt=(null===(Ht=f.svg)||void 0===Ht||null===(Ht=Ht.nodes)||void 0===Ht||null===(Ht=Ht.filter(ie=>{var ne;return"matching-empty"==(null===(ne=ie.source)||void 0===ne||null===(ne=ne.test)||void 0===ne?void 0:ne.type)}))||void 0===Ht?void 0:Ht.length)==((null==f||null===(ue=f.test)||void 0===ue||null===(ue=ue.answer)||void 0===ue?void 0:ue.matching)||[]).map(ie=>ie.key==ie.value?1:0).reduce((ie,ne)=>ie+ne)}Yt(nt,f,V,ut,{iscorrect:xt},C),console.log("node source ->",nt.source),console.log("slide test ->",f.test)})(nt,f,Rt.nodeStatus,Rt.slideStatus,ut)})}})(f,nt)};var K=c(8619),d=c(8785),X=c(4921),H=c(8054),Y=c(2282),At=c(2875),Qt=c(8419);const qt=(nt,f,V)=>{if(V.slideStatus!=Rt.slideStatus||!f.length)return;let ut=f.shift(),C=nt.filter(gt=>gt.idx==ut);if(!C.length)return;let B=Math.max.apply(null,C.map(gt=>{var xt;return null!==(xt=gt.time)&&void 0!==xt?xt:0})),z=!1,lt=B<.5?0:setTimeout(()=>{z||(z=!0,qt(nt,f,V))},1e3*B);ce(nt,f,C,0,V,{idx:ut,total:C.length,counter:0,isRecursive:z,timeoutRecursive:lt,maxTimeCoundown:B,uid:Math.floor(1e9*Math.random())})},ce=(nt,f,V,ut,C,B)=>{if(C.slideStatus!=Rt.slideStatus)return;let z=V[ut];if(z){switch(z.type){case S.$.GROUP:break;case S.$.CIRCLE:(0,K._)(z.id,{size:z.size,attribute:z.attribute},C.pId?window.document.getElementById(C.pId):null);break;case S.$.ELLIPSE:(0,d.r)(z.id,{size:z.size,attribute:z.attribute},C.pId);break;case S.$.LINE:(0,X.W)(z.id,{size:z.size,attribute:z.attribute},C.pId);break;case S.$.RECT:(0,H.f)(z.id,{size:z.size,attribute:z.attribute},C.pId?window.document.getElementById(C.pId):null);break;case S.$.POLYGON:(0,Y.l)(z.id,{size:z.size,attribute:z.attribute},C.pId);break;case S.$.FOREIGNOBJECT:(0,At.e)(z.id,{size:z.size,attribute:z.attribute,style:z.style,source:z.source},C.pId?window.document.getElementById(C.pId):null);break;case S.$.IMAGE:(0,A.G)(z.id,{size:z.size,attribute:z.attribute,source:z.source},C.pId?window.document.getElementById(C.pId):null);break;case S.$.TEXT:(0,O.$)(z.id,{size:z.size,attribute:z.attribute,source:z.source},C.pId);break;case S.$.PATH:(0,Qt.G)(z.id,{size:z.size,attribute:z.attribute},C.pId)}R(C.slide,z,C,()=>{B.counter+=1,B.maxTimeCoundown<.5&&B.counter>=B.total&&(B.total=B.counter=0,B.isRecursive||(clearTimeout(B.timeoutRecursive),B.isRecursive=!0,setTimeout(()=>{qt(nt,f,C)},250)))}),ce(nt,f,V,++ut,C,B)}},Rt=new class de{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(f){this._dataSource=f.data||{},L.icdt.variable.set=f.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var f,V;return null!==(f=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.length)&&void 0!==f?f:0}get slides(){var f;return(null===(f=this._dataSource)||void 0===f?void 0:f.slides)||[]}get slide(){var f;return((null===(f=this._dataSource)||void 0===f?void 0:f.slides)||[])[this._slideIdx]||{}}findNode(f){var V;let ut=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.find((jt,Xt)=>Xt==this._slideIdx),C=null==ut?void 0:ut.svg,B=(jt,Xt)=>{let Bt=null==jt?void 0:jt.find(ue=>ue.id==f);if(Bt)return Bt.pid=Xt,Bt;let Wt=0,Ht=jt.length||0;for(;Wt<Ht&&!Bt&&(Bt=B(jt[Wt].nodes||[],jt[Wt].id),!Bt);)Wt++;return Bt},z=B((null==C?void 0:C.nodes)||[]);var lt,gt,xt,St,Et;return z?(z.style=null!==(lt=z.style)&&void 0!==lt?lt:{},z.source=null!==(gt=z.source)&&void 0!==gt?gt:{},z.animate=null!==(xt=z.animate)&&void 0!==xt?xt:{},z.interactive=null!==(St=z.interactive)&&void 0!==St?St:{},z.variable=null!==(Et=z.variable)&&void 0!==Et?Et:{},z):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(f,V,ut){var C;let B;var z,lt;if(this.refreshNodeStatus(),this.refreshSlideStatus(),ut)B=null===(z=this._dataSource)||void 0===z||null===(z=z.slides)||void 0===z?void 0:z.find(Et=>Et.code==ut||Et.id==ut),B&&(this._slideIdx=(null===(lt=this._dataSource)||void 0===lt||null===(lt=lt.slides)||void 0===lt?void 0:lt.indexOf(B))||0);else if(V){var gt,xt;B=null===(gt=this._dataSource)||void 0===gt||null===(gt=gt.slides)||void 0===gt?void 0:gt.find(Et=>Et.id==V),B&&(this._slideIdx=(null===(xt=this._dataSource)||void 0===xt||null===(xt=xt.slides)||void 0===xt?void 0:xt.indexOf(B))||0)}else this._slideIdx=Math.min(Math.max(f||0,0),this.slideTotal-1),B=this.slide;if(B){var St;ge(L.icdt.container,L.icdt.svg,B),null===(St=jQuery(L.icdt.svg).find("#"+Ot.O.BACKGROUND_GROUP))||void 0===St||St.empty();let Et=(0,Lt.g1)(Ot.O.BACKGROUND_GROUP,"g",void 0,L.icdt.svg);(0,Lt.x0)(Et,B),(nt=>{var f,V,ut;let C=Rt.nodeStatus,B=Rt.slideStatus,z=null===(f=nt.svg)||void 0===f||null===(f=f.nodes)||void 0===f?void 0:f.map(lt=>lt.idx).filter((lt,gt,xt)=>xt.indexOf(lt)==gt).sort((lt,gt)=>(null!=lt?lt:0)-(null!=gt?gt:0));qt(null!==(V=null===(ut=nt.svg)||void 0===ut?void 0:ut.nodes)&&void 0!==V?V:[],null!=z?z:[],{slide:nt,nodeStatus:C,slideStatus:B})})(B)}this.changeSlide(this.slides,null===(C=this.slide)||void 0===C?void 0:C.id,this.slideIdx,this.slides.length)}set onChangeSlide(f){this._fnChangeSlides.push(f)}changeSlide(f,V,ut,C){this._fnChangeSlides.forEach(B=>B(f,V,ut,C))}},ge=(nt,f,V)=>{var ut,C;let B=window.document.querySelector(f);var z;B||(B=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(z=window.document.querySelector(nt))||void 0===z||z.appendChild(B)),B.textContent=null;let{x:lt,y:gt,width:xt,height:St}=null!==(ut=null==V||null===(C=V.svg)||void 0===C?void 0:C.viewBox)&&void 0!==ut?ut:L.icdt.screen.frameSize;B.setAttributeNS(null,"viewBox",lt+" "+gt+" "+xt+" "+St),B.setAttribute("id",f.replace("#",""))}},2336:(se,Ct,c)=>{c.d(Ct,{Q:()=>S});var L=c(1690);const S=(T,U,h)=>{var x;if(!U.value)return void h();let y=jQuery("#"+T),O="",E=null!==(x=U.iteration)&&void 0!==x?x:0,G=[];(U.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?G.push(U.value):(G.push("animation"),G.push(U.value?"animation-"+U.value:"animation-fadein")),E<0?(G.push("animation-iteration-infinite"),h(),h=function(){}):E>0&&G.push("animation-iteration-"+(E+1)),O=G.join(" "),function(J){let Q=function(){y.data("animate-running")?y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){y.data("animate-running",!1),setTimeout(function(){J()},100)}):J()};y.hasClass("animation")?setTimeout(function(){Q()}):Q()}(function(){var J;dt(T),(E>0||E<0)&&y.one("animationiteration",function(){U.slideStatus===L.$.slideStatus||(y.data("animate-running",!1),dt(T),U.slideStatus===L.$.slideStatus&&h())}),y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(y.data("animate-running",!1),dt(T),U.finish){default:case 0:case 1:break;case 2:y.addClass("hide")}U.slideStatus===L.$.slideStatus&&h()}),y.attr("data-class",null!==(J=y.attr("class"))&&void 0!==J?J:""),y.addClass(O),y.data("animate-running",!0)})},dt=function(T){var U,h=jQuery("#"+T),x=null===(U=h.attr("class"))||void 0===U?void 0:U.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);x&&x.forEach(function(O){jQuery(h).removeClass(O)});let y=h.attr("data-class");y&&(h.attr("class",y),h.removeAttr("data-class")),jQuery(h).data("animation-running",!1)}},861:(se,Ct,c)=>{c.d(Ct,{G:()=>T});var L=c(4318),S=c(1690),dt=c(4080);const T=(h,x,y)=>{var O;if(!x.points||!x.points.length)return void y();let E=jQuery("#"+h),G=function U(h){let x=[];2===h.length&&h.splice(1,0,[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);let M,J,Q,y=1,O=h.length;for(;y<O;){if(M=h[y-1],J=h[y],Q=h[y+1],(Math.abs(M[0]-J[0])>=15||Math.abs(M[1]-J[1])>=15)&&Math.pow(M[0]-J[0],2)+Math.pow(M[1]-J[1],2)>=Math.pow(15,2)&&Q&&(Math.abs(M[0]-Q[0])<=20||Math.abs(M[1]-Q[1])<=20)&&Math.pow(M[0]-Q[0],2)+Math.pow(M[1]-Q[1],2)<=Math.pow(20,2))x.push(J);else{let Z=J[0]-M[0],b=J[1]-M[1],A=Math.max(Math.abs(Z),Math.abs(b));for(var W=0;W<A;W+=15)x.push([M[0]+Z*W/A,M[1]+b*W/A])}y++}return O>0&&(x.splice(0,0,h[0]),x.push(h[O-1])),x}(x.points||[]),M=null!==(O=x.iteration)&&void 0!==O?O:0;if(M<0&&(y(),y=function(){}),E.data("work-running")&&M<0)return;E.data("work-running",!0);let ht,J=G.length,Q=Math.max(20,1e3*(x.time||3)/J),{id:W,type:Z,size:b,attribute:A}=S.$.findNode(h),vt=function(yt){if(x.slideStatus!==S.$.slideStatus)return E.data("work-running",!1),void(x.slideStatus===S.$.slideStatus&&y());if(yt<J){let ft=G[yt];ft&&(ht=Object.assign({},b,{x:ft[0]-b.width/2,y:ft[1]-b.height/2}),Object.assign(A,(0,L.sg)(Z,ht)),(0,dt.__)(window.document.getElementById(W),A),setTimeout(function(){vt(++yt)},Q))}else if(M>0)M--,vt(1);else if(M<0)vt(1);else switch(E.data("work-running",!1),x.slideStatus===S.$.slideStatus&&y(),x.finish){default:case 0:break;case 1:Object.assign(A,(0,L.sg)(Z,b)),(0,dt.__)(window.document.getElementById(W),A);break;case 2:E.addClass("hide")}};vt(1)}},157:(se,Ct,c)=>{c.d(Ct,{R:()=>S});var L=c(1690);const S=(T,U,h,x,y)=>{var O,E,G;if(x.slideStatus!=L.$.slideStatus)return U.async&&"change-slide"!=U.async?void 0:void y();if(x.nodeStatus!=L.$.nodeStatus&&(!U.async||"change-node"==U.async))return void y();if(null===(O=U.source)||void 0===O||!O.url)return console.warn(`${T} -> audio no source!`),y(),void(y=()=>{});var M=jQuery("#"+T);let J=null!==(E=U.iteration)&&void 0!==E?E:0;if(J<0&&(y(),y=function(){}),!(M.data("audio-running")&&J<0)){M.data("audio-running",!0);var Q=function(Z){Z.pause(),Z.remove(),M.data("audio-running",!1)},W=new Audio;return W.autoplay=!0,W.loop=0!=J,W.preload="auto",W.controls=!0,W.setAttributeNode(document.createAttribute("playsinline")),W.addEventListener("canplay",function(){var Z=W.play();Z&&Z.then(function(b){var A;M.data("audio-running",!0),"time"==U.async?setTimeout(()=>{Q(W),y(),y=()=>{}},1e3*(null!==(A=U.time)&&void 0!==A?A:1)):"non-stop"==U.async&&(y(),y=()=>{})}).catch(function(b){M.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})})}),W.addEventListener("timeupdate",function(){switch(U.async){case"time":case"non-stop":break;case"finish-action":h.total>=2&&h.total-h.counter==1&&(Q(this),y(),y=()=>{});break;default:case"change-node":x.nodeStatus!==L.$.nodeStatus&&(Q(this),y(),y=()=>{});break;case"change-slide":x.slideStatus!==L.$.slideStatus&&(Q(this),y(),y=()=>{})}}),W.addEventListener("canplaythrough",function(){this.loop&&(J>0?J--:0==J&&(this.loop=!1))}),W.addEventListener("play",function(){}),W.addEventListener("pause",function(){}),W.addEventListener("ended",function(){this.remove(),M.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})}),W.onerror=function(){this.remove(),M.data("audio-running",!1),x.slideStatus===L.$.slideStatus&&(y(),y=()=>{})},W.src=(null===(G=U.source)||void 0===G?void 0:G.url)||"",W}}},5973:(se,Ct,c)=>{c.d(Ct,{F:()=>y});var L=c(4981),S=c(1690),dt=c(2336),T=c(861),U=c(157),h=c(4787),x=c(370);const y=(O,E,G,M)=>{var J,Q,W;let Z={total:0,counter:0},{triggershow:b,triggerrun:A,triggerhide:ht,action:vt,audio:yt,slide:ft,media:at}=null!==(J=null===(Q=O.interactive)||void 0===Q?void 0:Q.click)&&void 0!==J?J:{};if(b){let{id:ct,ids:wt,time:it,async:$}=b;"asynctrue"==$?(0,h.L5)({id:ct,ids:wt,nodeStatus:E,slideStatus:G}):"time"==$&&setTimeout(()=>{(0,h.L5)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})},1e3*(null!=it?it:0))}if(A){let{id:ct,ids:wt,time:it,async:$}=A;"asynctrue"==$?(0,h.Ar)({id:ct,ids:wt,nodeStatus:E,slideStatus:G}):"time"==$&&setTimeout(()=>{(0,h.Ar)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})},1e3*(null!=it?it:0))}if(ht){let{id:ct,ids:wt,time:it,async:$}=ht;"asynctrue"==$?(0,h.WT)({id:ct,ids:wt,nodeStatus:E,slideStatus:G}):"time"==$&&setTimeout(()=>{(0,h.WT)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})},1e3*(null!=it?it:0))}let Lt=()=>{setTimeout(()=>{if(Z.counter>=Z.total){if(M&&M(),b){let{id:ct,ids:wt,async:it}=b;"asyncfalse"==it&&(0,h.L5)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})}if(A){let{id:ct,ids:wt,async:it}=A;"asyncfalse"==it&&(0,h.Ar)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})}if(ht){let{id:ct,ids:wt,async:it}=ht;"asyncfalse"==it&&(0,h.WT)({id:ct,ids:wt,nodeStatus:E,slideStatus:G})}}})};if(null!=vt&&vt.value){Z.total+=1;let ct=()=>{Z.counter+=1,Lt()};switch(vt.value){case"hide":jQuery("#"+O.id).addClass("hide"),ct();break;case"points":{let{points:wt,time:it,iteration:$,finish:_t}=vt;wt&&(0,T.G)(O.id,{points:wt,time:it,iteration:$,finish:_t,nodeStatus:E,slideStatus:G},ct);break}default:{let{value:wt,time:it,iteration:$,finish:_t}=vt;(0,dt.Q)(O.id,{value:wt,time:it,iteration:$,finish:_t,nodeStatus:E,slideStatus:G},ct);break}}}if(null!=yt&&null!==(W=yt.source)&&void 0!==W&&W.path){Z.total+=1;let ct=()=>{Z.counter+=1,Lt()};(0,U.R)(O.id,yt,Z,{nodeStatus:E,slideStatus:G},ct)}if(Z.total||Lt(),null!=ft&&ft.id)switch(console.log(`InteractiveNode #${O.id} slide(undefined,${ft.id},${ft.code}) success!`),ft.id){case-1:S.$.runSlide(S.$.slideIdx-1);break;case-2:S.$.runSlide(S.$.slideIdx+1);break;default:var st;S.$.runSlide(void 0,ft.id,null===(st=ft.code)||void 0===st?void 0:st.toString())}if(null!=at&&at.type){var Ot;let wt=`<div class="popup-media-viewer"><iframe src="${(0,x.e)({readfileuploadurl:null===(Ot=L.icdt.config)||void 0===Ot?void 0:Ot.readfileuploadurl,type:null==at?void 0:at.type,oss:null==at?void 0:at.oss,path:null==at?void 0:at.path,pathExtract:null==at?void 0:at.pathExtract,url:null==at?void 0:at.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,it=jQuery(wt).appendTo(window.document.body);it.find(".btn-close").click(function($){$.preventDefault(),it.remove()})}}},4787:(se,Ct,c)=>{c.d(Ct,{Ar:()=>T,L5:()=>dt,WT:()=>U});var L=c(1690),S=c(5973);const dt=h=>{console.log("icdt_Run_Interactive_TriggerShow",h),h.id?jQuery("#"+h.id).removeClass("hide"):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).removeClass("hide")})},T=h=>{console.log("icdt_Run_Interactive_TriggerRun",h),h.id?(jQuery("#"+h.id).removeClass("hide"),(0,S.F)(L.$.findNode(h.id),h.nodeStatus,h.slideStatus)):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).removeClass("hide"),(0,S.F)(L.$.findNode(x),h.nodeStatus,h.slideStatus)})},U=h=>{console.log("icdt_Run_Interactive_TriggerHide",h),h.id?jQuery("#"+h.id).addClass("hide"):h.ids&&h.ids.forEach(x=>{jQuery("#"+x).addClass("hide")})}},4080:(se,Ct,c)=>{c.d(Ct,{Mh:()=>A,wM:()=>yt,x_:()=>ht,it:()=>ft,g1:()=>ct,__:()=>at,QI:()=>st,DB:()=>Lt,eb:()=>vt,x0:()=>ee,g$:()=>wt,mo:()=>Tt,XH:()=>kt,hJ:()=>it,vl:()=>_t,yD:()=>$,Yw:()=>Yt});var L=c(9054),T=/^#?[a-fA-F0-9]+$/;const x=(R,K)=>{var d;if("none"==(R=null!==(d=R)&&void 0!==d?d:""))return"none";if("transparent"==R)return"rgba(0,0,0,0)";if(R.includes("rgba("))return R;if(R.includes("rgb(")&&(R=((R,K)=>{if(!R)return"";let d=R.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),X=(d&&d[4]||"").trim(),H=d?(256|d[1]).toString(16).slice(1)+(256|d[2]).toString(16).slice(1)+(256|d[3]).toString(16).slice(1):R;return"0"==X?"transparent":`#${H}`})(R)),!(R=R.replace(/[^0-9a-fA-F]/g,"")))return"";if(!T.test(R))return console.error(`hex2rgba -> ${R}: first argument has invalid hexadecimal characters`),"";if("#"===R[0]&&(R=R.slice(1)),3===R.length){let H=R.split("");H.splice(2,0,R[2]),H.splice(1,0,R[1]),H.splice(0,0,R[0]),R=H.join("")}if(6!==R.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var X=[parseInt(R.slice(0,2),16),parseInt(R.slice(2,4),16),parseInt(R.slice(4,6),16)];return K="number"==typeof K?K:parseFloat(K),X.push(K>=0&&K<=1?K:1),"rgba("+X.join(",")+")"};var y=c(1814),O=c(4981),E=c(3423),G=c(8054),M=c(7210),J=c(8619),Q=c(1690),W=c(2875),Z=c(1687),b=c(370);class A{constructor(K,d){let X=window.document.querySelector(d);var H;X||(X=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(H=window.document.querySelector(K))||void 0===H||H.appendChild(X));let{svgViewBox:Y,svgSize:At}=O.icdt.screen.init();X.setAttributeNS(null,"viewBox",`${Y.x} ${Y.y} ${Y.width} ${Y.height}`),X.setAttribute("id",d.replace("#","")),X.style.display="block",X.style.position="absolute",X.style.left=`${At.x}px`,X.style.top=`${At.y}px`,X.style.width=`${At.width}px`,X.style.height=`${At.height}px`,X.style.backgroundColor="#fafafa",X.style.cursor="default"}}const ht=R=>{var K,d,X,H,Y,At;O.icdt.target.setAttributeNS(null,"viewBox",`${null!==(K=null==R||null===(d=R.svg)||void 0===d?void 0:d.viewBox.x)&&void 0!==K?K:0} ${null!==(X=null==R||null===(H=R.svg)||void 0===H?void 0:H.viewBox.y)&&void 0!==X?X:0} ${null==R||null===(Y=R.svg)||void 0===Y?void 0:Y.viewBox.width} ${null==R||null===(At=R.svg)||void 0===At?void 0:At.viewBox.height}`),jQuery(O.icdt.target).find("#"+Z.O.BACKGROUND_GROUP).empty();let Qt=ct(Z.O.BACKGROUND_GROUP,"g",void 0,O.icdt.target);ee(Qt,R),(()=>{let Ft=window.document.getElementById(null==R?void 0:R.id);jQuery(Ft).find("#"+Z.O.BACKGROUND_GROUP).empty();let Dt=ct(Z.O.BACKGROUND_GROUP,"g",void 0,Ft);ee(Dt,R)})()},vt=()=>{let R=O.icdt.screen.svgViewBox,K=O.icdt.screen.svgSize;O.icdt.target&&(O.icdt.target.setAttributeNS(null,"viewBox",`${R.x} ${R.y} ${R.width} ${R.height}`),O.icdt.target.style.left=`${K.x}px`,O.icdt.target.style.top=`${K.y}px`,O.icdt.target.style.width=`${K.width}px`,O.icdt.target.style.height=`${K.height}px`)},yt=()=>{jQuery(O.icdt.target).find(">*:not(defs)").remove()},ft=(R,K,d,X,H)=>{let Y;return R?(Y=jQuery(H||O.icdt.target).find("#"+R).get(0),Y||(Y=window.document.createElementNS("http://www.w3.org/2000/svg",d),Y.setAttribute("id",R),jQuery(Y).appendTo(H||O.icdt.target))):(Y=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(Y).appendTo(H||O.icdt.target)),null!=X&&X.attribute&&at(Y,null==X?void 0:X.attribute),null!=X&&X.style&&Lt(Y,null==X?void 0:X.style),null!=X&&X.source&&st(Y,K,null==X?void 0:X.source),Y},at=(R,K)=>{return jQuery(R).attr((d=Object.assign({},K||{}),null===(X=Object.keys(d))||void 0===X||X.forEach(At=>{switch(At){case"fill":break;case"stroke":var Qt;Object.assign(d,{"stroke-width":null!==(Qt=d.strokeWidth)&&void 0!==Qt?Qt:null,strokeWidth:null});break;case"strokeLinecap":var Ft;Object.assign(d,{"stroke-linecap":null!==(Ft=d.strokeLinecap)&&void 0!==Ft?Ft:null,strokeLinecap:null});break;case"strokeLinejoin":var Dt;Object.assign(d,{"stroke-linejoin":null!==(Dt=d.strokeLinejoin)&&void 0!==Dt?Dt:null,strokeLinejoin:null});break;case"strokeDasharray":var qt;Object.assign(d,{"stroke-dasharray":null!==(qt=d.strokeDasharray)&&void 0!==qt?qt:null,strokeDasharray:null});break;case"strokeDasharrays":var ce,de;Object.assign(d,{"stroke-dasharray":null!==(ce=null===(de=d.strokeDasharrays)||void 0===de?void 0:de.join(" "))&&void 0!==ce?ce:null,strokeDasharrays:null});break;case"fontFamily":var Rt;Object.assign(d,{"font-family":null!==(Rt=d.fontFamily)&&void 0!==Rt?Rt:null,fontFamily:null});break;case"fontSize":var ge;Object.assign(d,{"font-size":null!==(ge=d.fontSize)&&void 0!==ge?ge:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"transformOrigin":var nt;Object.assign(d,{"transform-origin":null!==(nt=d.transformOrigin)&&void 0!==nt?nt:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?x(d.fill,null!==(H=null==d?void 0:d.fillOpacity)&&void 0!==H?H:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?x(d.stroke,null!==(Y=null==d?void 0:d.strokeOpacity)&&void 0!==Y?Y:1):"rgba(0,0,0,0)",strokeOpacity:null}))),R;var d,X,H,Y},Lt=(R,K)=>{return jQuery(R).css((d=Object.assign({},K||{}),null===(X=Object.keys(d))||void 0===X||X.forEach(H=>{switch(H){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var Y;Object.assign(d,d.borderWidth&&d.borderStyle&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle,"border-color":x(d.borderColor,null!==(Y=d.borderOpacity)&&void 0!==Y?Y:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var At;d.backgroundColor&&Object.assign(d,{"background-color":x(d.backgroundColor,null!==(At=d.backgroundOpacity)&&void 0!==At?At:1)}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),R;var d,X},st=(R,K,d)=>{switch(K){case L.$.TEXT:var X,H;jQuery(R).text(null!==(X=null==d||null===(H=d.text)||void 0===H?void 0:H.textContent)&&void 0!==X?X:"");break;case L.$.IMAGE:var Y,At,Qt,Ft,Dt,qt,ce;jQuery(R).attr("href",(null==d||null===(Y=d.image)||void 0===Y?void 0:Y.base64)||(null!=d&&null!==(At=d.image)&&void 0!==At&&At.path?`${null!==(Qt=null===(Ft=O.icdt.config)||void 0===Ft?void 0:Ft.readfileuploadurl)&&void 0!==Qt?Qt:""}${null!==(Dt=null==d||null===(qt=d.image)||void 0===qt?void 0:qt.path)&&void 0!==Dt?Dt:""}`:"")||(null==d||null===(ce=d.image)||void 0===ce?void 0:ce.url)||"");break;case L.$.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var de,Rt;if(null!==(de=d.text)&&void 0!==de&&de.variableKeywords&&null!==(Rt=d.text)&&void 0!==Rt&&Rt.variableKeywords.length){var ge;let m=O.icdt.variable.getKeys(),D=(null===(ge=d.text)||void 0===ge?void 0:ge.textContent)||"";d.text.variableKeywords.forEach(N=>{var F=N.replace(/[^a-zA-Z0-9_]/gm,"");if(m.indexOf(F)>=0){var tt=O.icdt.variable.getValue(F);D=D.replace(N,tt)}}),jQuery(R).text(D)}else{var nt;jQuery(R).text((null===(nt=d.text)||void 0===nt?void 0:nt.textContent)||"")}break;case"html":{var f,V,ut;let m=(null==d||null===(f=d.html)||void 0===f?void 0:f.htmlContent)||"";if(null!==(V=d.html)&&void 0!==V&&V.variableKeywords&&null!==(ut=d.html)&&void 0!==ut&&ut.variableKeywords.length){let D=O.icdt.variable.getKeys();d.html.variableKeywords.forEach(N=>{var F=N.replace(/[^a-zA-Z0-9_]/gm,"");if(D.indexOf(F)>=0){var tt=O.icdt.variable.getValue(F);m=m.replace(N,tt)}})}jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${m}</div>`).find("img[path],video[path],iframe[path]").each((D,N)=>{var F,tt,q;N.setAttribute("src",(null!==(F=null===(tt=O.icdt.config)||void 0===tt?void 0:tt.readfileuploadurl)&&void 0!==F?F:"")+(null!==(q=N.getAttribute("path"))&&void 0!==q?q:"")),N.removeAttribute("path")});break}case"input":var C,B,z,lt;if(null!==(C=d.input)&&void 0!==C&&C.input)jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(z=null===(lt=d.input)||void 0===lt?void 0:lt.placeholder)&&void 0!==z?z:""}" maxlength="100" /></div>`);else if(null!==(B=d.input)&&void 0!==B&&B.textarea){var gt,xt;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(gt=null===(xt=d.input)||void 0===xt?void 0:xt.placeholder)&&void 0!==gt?gt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var St,Et,jt,Xt,Bt,Wt,Ht;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(St=d.image)||void 0===St?void 0:St.base64)||(null!==(Et=d.image)&&void 0!==Et&&Et.path?`${null!==(jt=null===(Xt=O.icdt.config)||void 0===Xt?void 0:Xt.readfileuploadurl)&&void 0!==jt?jt:""}${null!==(Bt=null===(Wt=d.image)||void 0===Wt?void 0:Wt.path)&&void 0!==Bt?Bt:""}`:"")||(null===(Ht=d.image)||void 0===Ht?void 0:Ht.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var ue,ie,ne,pe,Ye,Ke,ii;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${null!==(ue=d.iframe)&&void 0!==ue&&ue.path?`${null!==(ie=null===(ne=O.icdt.config)||void 0===ne?void 0:ne.readfileuploadurl)&&void 0!==ie?ie:""}${null!==(pe=null===(Ye=d.iframe)||void 0===Ye?void 0:Ye.path)&&void 0!==pe?pe:""}`:null!==(Ke=null===(ii=d.iframe)||void 0===ii?void 0:ii.url)&&void 0!==Ke?Ke:""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ni,fi,Me,ri,We,Je;let m=(0,b.e)({readfileuploadurl:null===(ni=O.icdt.config)||void 0===ni?void 0:ni.readfileuploadurl,type:null===(fi=d.embed)||void 0===fi?void 0:fi.type,oss:null===(Me=d.embed)||void 0===Me?void 0:Me.oss,path:null===(ri=d.embed)||void 0===ri?void 0:ri.path,pathExtract:null===(We=d.embed)||void 0===We?void 0:We.pathExtract,url:null===(Je=d.embed)||void 0===Je?void 0:Je.url});jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${m}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var li,ai;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(li=null===(ai=d.svg)||void 0===ai?void 0:ai.svgContent)&&void 0!==li?li:""}</div>`);break;case"test":{var qe,Ve,oi,mt;let m=(null==d||null===(qe=d.html)||void 0===qe?void 0:qe.htmlContent)||"";if(null!==(Ve=d.html)&&void 0!==Ve&&Ve.variableKeywords&&null!==(oi=d.html)&&void 0!==oi&&oi.variableKeywords.length){let D=O.icdt.variable.getKeys();d.html.variableKeywords.forEach(N=>{var F=N.replace(/[^a-zA-Z0-9_]/gm,"");if(D.indexOf(F)>=0){var tt=O.icdt.variable.getValue(F);m=m.replace(N,tt)}})}switch(null==d||null===(mt=d.test)||void 0===mt?void 0:mt.type){case"matching-empty":jQuery(R).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching"></div>');break;case"matching-content":var k,i;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching"><div class="ondrag-item" data-key="${null!==(k=null==d||null===(i=d.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==k?k:"KIEN"}" style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"singlechoice":case"multichoice":jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"fill":var n;((null===(n=d.html)||void 0===n?void 0:n.fillKeywords)||[]).forEach(D=>{var N=`<input type="text" maxlength="128" style="display:inline-block;width:80px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:content-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:left;" data-key="${D.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;m=m.replace(new RegExp(D.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),N)}),jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:start;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"speech":jQuery(R).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var l,a,s,v,p,w,j;jQuery(R).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(l=null!==(a=null===(s=d.image)||void 0===s?void 0:s.url)&&void 0!==a?a:`${null!==(v=null===(p=O.icdt.config)||void 0===p?void 0:p.readfileuploadurl)&&void 0!==v?v:""}${null!==(w=null===(j=d.image)||void 0===j?void 0:j.path)&&void 0!==w?w:""}`)&&void 0!==l?l:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(R).find("img[path],video[path],iframe[path]").each((D,N)=>{var F,tt,q;N.setAttribute("src",(null!==(F=null===(tt=O.icdt.config)||void 0===tt?void 0:tt.readfileuploadurl)&&void 0!==F?F:"")+(null!==(q=N.getAttribute("path"))&&void 0!==q?q:"")),N.removeAttribute("path")})}}}},ct=(R,K,d,X)=>{let H=jQuery(X||O.icdt.target).find("#"+R).get(0);return H||(H=window.document.createElementNS("http://www.w3.org/2000/svg",K),H.setAttribute("id",R),jQuery(H).appendTo(X||O.icdt.target)),jQuery(H).attr((null==d?void 0:d.attribute)||{}),jQuery(H).css((null==d?void 0:d.style)||{}),H},wt=(R,K)=>{let d=(0,E.v)(2),X={fill:y.S3.fill,stroke:y.S3.stroke,"stroke-width":(0,E.v)(y.S3.strokeWidth)};return[{element:ct("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:K.x-d,y:K.y-d,width:K.width+2*d,height:K.height+2*d},X)},R),posType:"rect-center"}]},it=(R,K)=>{let{size:d}=K,X=(0,E.v)(1),H=(0,E.v)(2),Y=(0,E.v)(5),At={stroke:y.NV.stroke,"stroke-width":(0,E.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Qt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,E.v)(y.Mo.strokeWidth)},Ft={fill:y.In.fill,stroke:y.In.stroke,"stroke-width":(0,E.v)(y.In.strokeWidth),width:(0,E.v)(y.In.width),height:(0,E.v)(y.In.height)};return ct("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-X,y1:d.y,x2:d.x-X,y2:d.y+d.height},At)},R),ct("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-X,x2:d.x+d.width,y2:d.y-X},At)},R),ct("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+X,y1:d.y,x2:d.x+d.width+X,y2:d.y+d.height},At)},R),ct("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+X,x2:d.x+d.width,y2:d.y+d.height+X},At)},R),[{element:ct("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Qt),style:{cursor:"move"}},R),posType:"rect-center"},{element:ct("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-Y,y:d.y-Y},Ft),style:{cursor:"nw-resize"}},R),posType:"rect-top-left"},{element:ct("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-H,y:d.y-Y},Ft),style:{cursor:"ne-resize"}},R),posType:"rect-top-right"},{element:ct("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-Y,y:d.y+d.height-H},Ft),style:{cursor:"sw-resize"}},R),posType:"rect-bottom-left"},{element:ct("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-H,y:d.y+d.height-H},Ft),style:{cursor:"se-resize"}},R),posType:"rect-bottom-right"}]},$=(R,K,d)=>{let X=(0,E.v)(1),H={stroke:y.NV.stroke,"stroke-width":(0,E.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Y={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,E.v)(y.Mo.strokeWidth)},At={fill:y.dt.fill,stroke:y.dt.stroke,"stroke-width":(0,E.v)(y.dt.strokeWidth)},ce=(ct("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:d.x-X,y1:d.y,x2:d.x-X,y2:d.y+d.height},H)},R),ct("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-X,x2:d.x+d.width,y2:d.y-X},H)},R),ct("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:d.x+d.width+X,y1:d.y,x2:d.x+d.width+X,y2:d.y+d.height},H)},R),ct("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+X,x2:d.x+d.width,y2:d.y+d.height+X},H)},R),ct("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Y)},R));return K.forEach(de=>{let{size:Rt}=de;ct("icdt-temp-select-rect-node-"+de.id,"rect",{attribute:Object.assign({x:Rt.x,y:Rt.y,width:Rt.width,height:Rt.height},At)},R)}),[{element:ce,posType:"rect-center"}]},_t=(R,K)=>{let d=(0,E.v)(1),X={stroke:y.NV.stroke,"stroke-width":(0,E.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},H={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,E.v)(y.Mo.strokeWidth)};return ct("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:K.x-d,y1:K.y,x2:K.x-d,y2:K.y+K.height},X)},R),ct("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:K.x,y1:K.y-d,x2:K.x+K.width,y2:K.y-d},X)},R),ct("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:K.x+K.width+d,y1:K.y,x2:K.x+K.width+d,y2:K.y+K.height},X)},R),ct("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:K.x,y1:K.y+K.height+d,x2:K.x+K.width,y2:K.y+K.height+d},X)},R),[{element:ct("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:K.x,y:K.y,width:K.width,height:K.height},H)},R),posType:"rect-center"}]},kt=(R,K)=>{let d=(0,E.v)(-1),X={stroke:y.h8.stroke,"stroke-width":(0,E.v)(y.h8.strokeWidth),"stroke-linecap":y.h8.strokeLinecap,"stroke-dasharray":(0,E.v)(y.h8.strokeDasharray)},H={fill:y.MA.fill};return ct("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:K.x-d,y1:K.y,x2:K.x-d,y2:K.y+K.height},X)},R),ct("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:K.x,y1:K.y-d,x2:K.x+K.width,y2:K.y-d},X)},R),ct("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:K.x+K.width+d,y1:K.y,x2:K.x+K.width+d,y2:K.y+K.height},X)},R),ct("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:K.x,y1:K.y+K.height+d,x2:K.x+K.width,y2:K.y+K.height+d},X)},R),ct("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:K.x,y:K.y,width:K.width,height:K.height},H)},R),[]},Tt=(R,K)=>{let d={fill:y.k0.fill,stroke:y.k0.stroke,"stroke-width":(0,E.v)(y.k0.strokeWidth),"stroke-dasharray":(0,E.v)(y.k0.strokeDasharray)};jQuery(R).empty(),K.forEach(X=>{var H,Y;let{size:At}=X;if(!X.idx)return;ct("icdt-temp-index-rect-node-"+X.id,"rect",{attribute:Object.assign({x:At.x-5,y:At.y-5,width:At.width+10,height:At.height+10},d)},R);let{element:Qt}=(0,W.e)(Math.ceil(1e9*Math.random()),{size:{x:At.x-76,y:At.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(H=X.idx)&&void 0!==H?H:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Y=X.time)&&void 0!==Y?Y:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},R);Qt.classList.add("node-input"),jQuery(Qt).on("change",'input[name="idx"]',Ft=>{var Dt;X.idx=parseInt(null!==(Dt=Ft.target.value)&&void 0!==Dt?Dt:"0")}).on("change",'input[name="time"]',Ft=>{var Dt;X.time=parseFloat(null!==(Dt=Ft.target.value)&&void 0!==Dt?Dt:"0")}).on("click",'button[name="remove"]',Ft=>{X.idx=0,X.time=null,Tt(R,K)})})},ee=(R,K)=>{var d,X,H,Y;let{color:At,opacity:Qt,path:Ft,url:Dt,base64:qt}=null!==(d=null==K||null===(X=K.svg)||void 0===X?void 0:X.background)&&void 0!==d?d:{},{x:ce,y:de,width:Rt,height:ge}=null!==(H=null==K||null===(Y=K.svg)||void 0===Y?void 0:Y.viewBox)&&void 0!==H?H:{x:0,y:0,width:0,height:0};(0,G.f)(void 0,{size:{x:ce,y:de,width:Rt,height:ge},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},R),At&&(0,G.f)(void 0,{size:{x:ce,y:de,width:Rt,height:ge},attribute:{fill:At,fillOpacity:Qt}},R),Ft&&(0,M.G)(void 0,{size:{x:ce,y:de,width:Rt,height:ge},source:{type:"image",image:{path:Ft,url:Dt,base64:qt}}},R)},Yt=(R,K)=>{var d,X,Qt;if(jQuery(R).empty(),null!=K&&null!==(d=K.test)&&void 0!==d&&null!==(d=d.answer)&&void 0!==d&&d.singlechoice){var Y,At;let Ft=Q.$.findNode(null==K||null===(Y=K.test)||void 0===Y||null===(Y=Y.answer)||void 0===Y||null===(Y=Y.singlechoice)||void 0===Y?void 0:Y.value),{x:Dt,y:qt,width:ce,height:de}=null!==(At=null==Ft?void 0:Ft.size)&&void 0!==At?At:{x:0,y:0,width:0,height:0};(0,J._)(Math.ceil(1e9*Math.random()),{size:{x:Dt-2,y:qt-2,width:ce+4,height:de+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},R)}null!=K&&null!==(X=K.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.multichoice&&(null==K||null===(Qt=K.test)||void 0===Qt||null===(Qt=Qt.answer)||void 0===Qt||Qt.multichoice.forEach(Ft=>{var Dt;let qt=Q.$.findNode(Ft.value),{x:ce,y:de,width:Rt,height:ge}=null!==(Dt=null==qt?void 0:qt.size)&&void 0!==Dt?Dt:{x:0,y:0,width:0,height:0};(0,G.f)(Math.ceil(1e9*Math.random()),{size:{x:ce-2,y:de-2,width:Rt+4,height:ge+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},R)}))}},370:(se,Ct,c)=>{c.d(Ct,{e:()=>dt});const dt=h=>{switch(null==h?void 0:h.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+h.readfileuploadurl+h.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+h.readfileuploadurl+h.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+h.readfileuploadurl+h.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+h.readfileuploadurl+h.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+h.readfileuploadurl+h.path;case 906:case 911:case 910:return""+h.readfileuploadurl+h.path;case 905:var x;return"imsmanifest.xml"==(null===(x=h.pathExtract)||void 0===x||null===(x=x.split("/"))||void 0===x?void 0:x.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+h.readfileuploadurl+h.pathExtract:""+h.readfileuploadurl+h.path;case 907:case 900:return""+h.readfileuploadurl+h.path;case 904:switch(h.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+h.url;case 1002:var y;return null!==(y=T(h.url))&&void 0!==y?y:"";case 1005:var O;return null!==(O=h.url)&&void 0!==O?O:"";default:var E;return null!==(E=h.url)&&void 0!==E?E:""}default:return""+h.readfileuploadurl+h.path}},T=h=>{let x=U(h);return x?"https://www.youtube.com/embed/"+x+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},U=h=>{let x=null==h?void 0:h.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return x&&x.length>=2?x[1]:null}},511:(se,Ct,c)=>{function L(){}function S(t){return null==t?L:function(){return this.querySelector(t)}}function U(){return[]}function h(t){return null==t?U:function(){return this.querySelectorAll(t)}}function O(t){return function(){return this.matches(t)}}function E(t){return function(e){return e.matches(t)}}c.d(Ct,{$0Z:()=>la,jvg:()=>ra});var G=Array.prototype.find;function J(){return this.firstElementChild}var W=Array.prototype.filter;function Z(){return Array.from(this.children)}function vt(t){return new Array(t.length)}function ft(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Lt(t,e,r,o,u,g){for(var I,_=0,P=e.length,rt=g.length;_<rt;++_)(I=e[_])?(I.__data__=g[_],o[_]=I):r[_]=new ft(t,g[_]);for(;_<P;++_)(I=e[_])&&(u[_]=I)}function st(t,e,r,o,u,g,_){var I,P,Ut,rt=new Map,ot=e.length,It=g.length,Nt=new Array(ot);for(I=0;I<ot;++I)(P=e[I])&&(Nt[I]=Ut=_.call(P,P.__data__,I,e)+"",rt.has(Ut)?u[I]=P:rt.set(Ut,P));for(I=0;I<It;++I)Ut=_.call(t,g[I],I,g)+"",(P=rt.get(Ut))?(o[I]=P,P.__data__=g[I],rt.delete(Ut)):r[I]=new ft(t,g[I]);for(I=0;I<ot;++I)(P=e[I])&&rt.get(Nt[I])===P&&(u[I]=P)}function Ot(t){return t.__data__}function wt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ee(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ft.prototype={constructor:ft,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Y="http://www.w3.org/1999/xhtml";const At={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qt(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),At.hasOwnProperty(e)?{space:At[e],local:t}:t}function Ft(t){return function(){this.removeAttribute(t)}}function Dt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qt(t,e){return function(){this.setAttribute(t,e)}}function ce(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function de(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function Rt(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function nt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function f(t){return function(){this.style.removeProperty(t)}}function V(t,e,r){return function(){this.style.setProperty(t,e,r)}}function ut(t,e,r){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,r)}}function B(t,e){return t.style.getPropertyValue(e)||nt(t).getComputedStyle(t,null).getPropertyValue(e)}function z(t){return function(){delete this[t]}}function lt(t,e){return function(){this[t]=e}}function gt(t,e){return function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}}function St(t){return t.trim().split(/^|\s+/)}function Et(t){return t.classList||new jt(t)}function jt(t){this._node=t,this._names=St(t.getAttribute("class")||"")}function Xt(t,e){for(var r=Et(t),o=-1,u=e.length;++o<u;)r.add(e[o])}function Bt(t,e){for(var r=Et(t),o=-1,u=e.length;++o<u;)r.remove(e[o])}function Wt(t){return function(){Xt(this,t)}}function Ht(t){return function(){Bt(this,t)}}function ue(t,e){return function(){(e.apply(this,arguments)?Xt:Bt)(this,t)}}function ne(){this.textContent=""}function pe(t){return function(){this.textContent=t}}function Ye(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ii(){this.innerHTML=""}function ni(t){return function(){this.innerHTML=t}}function fi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ri(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ai(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Y&&e.documentElement.namespaceURI===Y?e.createElement(t):e.createElementNS(r,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Qt(t);return(e.local?qe:ai)(e)}function mt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function l(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j(t){return function(){var e=this.__on;if(e){for(var g,r=0,o=-1,u=e.length;r<u;++r)g=e[r],t.type&&g.type!==t.type||g.name!==t.name?e[++o]=g:this.removeEventListener(g.type,g.listener,g.options);++o?e.length=o:delete this.__on}}}function m(t,e,r){return function(){var u,o=this.__on,g=function p(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var _=0,I=o.length;_<I;++_)if((u=o[_]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=g,u.options=r),void(u.value=e);this.addEventListener(t.type,g,r),u={type:t.type,name:t.name,value:e,listener:g,options:r},o?o.push(u):this.__on=[u]}}function N(t,e,r){var o=nt(t),u=o.CustomEvent;"function"==typeof u?u=new u(e,r):(u=o.document.createEvent("Event"),r?(u.initEvent(e,r.bubbles,r.cancelable),u.detail=r.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function F(t,e){return function(){return N(this,t,e)}}function tt(t,e){return function(){return N(this,t,e.apply(this,arguments))}}jt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var re=[null];function he(t,e){this._groups=t,this._parents=e}function ve(){return new he([[document.documentElement]],re)}he.prototype=ve.prototype={constructor:he,select:function dt(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,r=e.length,o=new Array(r),u=0;u<r;++u)for(var P,rt,g=e[u],_=g.length,I=o[u]=new Array(_),ot=0;ot<_;++ot)(P=g[ot])&&(rt=t.call(P,P.__data__,ot,g))&&("__data__"in P&&(rt.__data__=P.__data__),I[ot]=rt);return new he(o,this._parents)},selectAll:function y(t){t="function"==typeof t?function x(t){return function(){return function T(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,r=e.length,o=[],u=[],g=0;g<r;++g)for(var P,_=e[g],I=_.length,rt=0;rt<I;++rt)(P=_[rt])&&(o.push(t.call(P,P.__data__,rt,_)),u.push(P));return new he(o,u)},selectChild:function Q(t){return this.select(null==t?J:function M(t){return function(){return G.call(this.children,t)}}("function"==typeof t?t:E(t)))},selectChildren:function A(t){return this.selectAll(null==t?Z:function b(t){return function(){return W.call(this.children,t)}}("function"==typeof t?t:E(t)))},filter:function ht(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,r=e.length,o=new Array(r),u=0;u<r;++u)for(var P,g=e[u],_=g.length,I=o[u]=[],rt=0;rt<_;++rt)(P=g[rt])&&t.call(P,P.__data__,rt,g)&&I.push(P);return new he(o,this._parents)},data:function ct(t,e){if(!arguments.length)return Array.from(this,Ot);var r=e?st:Lt,o=this._parents,u=this._groups;"function"!=typeof t&&(t=function at(t){return function(){return t}}(t));for(var g=u.length,_=new Array(g),I=new Array(g),P=new Array(g),rt=0;rt<g;++rt){var ot=o[rt],It=u[rt],Nt=It.length,Ut=wt(t.call(ot,ot&&ot.__data__,rt,o)),me=Ut.length,xe=I[rt]=new Array(me),Mt=_[rt]=new Array(me);r(ot,It,xe,Mt,P[rt]=new Array(Nt),Ut,e);for(var le,fe,Zt=0,Gt=0;Zt<me;++Zt)if(le=xe[Zt]){for(Zt>=Gt&&(Gt=Zt+1);!(fe=Mt[Gt])&&++Gt<me;);le._next=fe||null}}return(_=new he(_,o))._enter=I,_._exit=P,_},enter:function yt(){return new he(this._enter||this._groups.map(vt),this._parents)},exit:function it(){return new he(this._exit||this._groups.map(vt),this._parents)},join:function $(t,e,r){var o=this.enter(),u=this,g=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(u=e(u))&&(u=u.selection()),null==r?g.remove():r(g),o&&u?o.merge(u).order():u},merge:function _t(t){for(var e=t.selection?t.selection():t,r=this._groups,o=e._groups,u=r.length,_=Math.min(u,o.length),I=new Array(u),P=0;P<_;++P)for(var Ut,rt=r[P],ot=o[P],It=rt.length,Nt=I[P]=new Array(It),me=0;me<It;++me)(Ut=rt[me]||ot[me])&&(Nt[me]=Ut);for(;P<u;++P)I[P]=r[P];return new he(I,this._parents)},selection:function we(){return this},order:function kt(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var _,o=t[e],u=o.length-1,g=o[u];--u>=0;)(_=o[u])&&(g&&4^_.compareDocumentPosition(g)&&g.parentNode.insertBefore(_,g),g=_);return this},sort:function Tt(t){function e(It,Nt){return It&&Nt?t(It.__data__,Nt.__data__):!It-!Nt}t||(t=ee);for(var r=this._groups,o=r.length,u=new Array(o),g=0;g<o;++g){for(var rt,_=r[g],I=_.length,P=u[g]=new Array(I),ot=0;ot<I;++ot)(rt=_[ot])&&(P[ot]=rt);P.sort(e)}return new he(u,this._parents).order()},call:function Yt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function R(){return Array.from(this)},node:function K(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var o=t[e],u=0,g=o.length;u<g;++u){var _=o[u];if(_)return _}return null},size:function d(){let t=0;for(const e of this)++t;return t},empty:function X(){return!this.node()},each:function H(t){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var I,u=e[r],g=0,_=u.length;g<_;++g)(I=u[g])&&t.call(I,I.__data__,g,u);return this},attr:function ge(t,e){var r=Qt(t);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((null==e?r.local?Dt:Ft:"function"==typeof e?r.local?Rt:de:r.local?ce:qt)(r,e))},style:function C(t,e,r){return arguments.length>1?this.each((null==e?f:"function"==typeof e?ut:V)(t,e,null==r?"":r)):B(this.node(),t)},property:function xt(t,e){return arguments.length>1?this.each((null==e?z:"function"==typeof e?gt:lt)(t,e)):this.node()[t]},classed:function ie(t,e){var r=St(t+"");if(arguments.length<2){for(var o=Et(this.node()),u=-1,g=r.length;++u<g;)if(!o.contains(r[u]))return!1;return!0}return this.each(("function"==typeof e?ue:e?Wt:Ht)(r,e))},text:function Ke(t){return arguments.length?this.each(null==t?ne:("function"==typeof t?Ye:pe)(t)):this.node().textContent},html:function Me(t){return arguments.length?this.each(null==t?ii:("function"==typeof t?fi:ni)(t)):this.node().innerHTML},raise:function We(){return this.each(ri)},lower:function li(){return this.each(Je)},append:function oi(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function k(t,e){var r="function"==typeof t?t:Ve(t),o=null==e?mt:"function"==typeof e?e:S(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function s(t){return this.select(t?a:l)},datum:function v(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function D(t,e,r){var u,_,o=function w(t){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");return o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),{type:e,name:r}})}(t+""),g=o.length;if(!(arguments.length<2)){for(I=e?m:j,u=0;u<g;++u)this.each(I(o[u],e,r));return this}var I=this.node().__on;if(I)for(var ot,P=0,rt=I.length;P<rt;++P)for(u=0,ot=I[P];u<g;++u)if((_=o[u]).type===ot.type&&_.name===ot.name)return ot.value},dispatch:function q(t,e){return this.each(("function"==typeof e?tt:F)(t,e))},[Symbol.iterator]:function*zt(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var _,o=t[e],u=0,g=o.length;u<g;++u)(_=o[u])&&(yield _)}};const ye=ve;var Ee={value:()=>{}};function fn(){for(var o,t=0,e=arguments.length,r={};t<e;++t){if(!(o=arguments[t]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new Ni(r)}function Ni(t){this._=t}function lr(t,e){for(var u,r=0,o=t.length;r<o;++r)if((u=t[r]).name===e)return u.value}function vn(t,e,r){for(var o=0,u=t.length;o<u;++o)if(t[o].name===e){t[o]=Ee,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=r&&t.push({name:e,value:r}),t}Ni.prototype=fn.prototype={constructor:Ni,on:function(t,e){var u,r=this._,o=function rr(t,e){return t.trim().split(/^|\s+/).map(function(r){var o="",u=r.indexOf(".");if(u>=0&&(o=r.slice(u+1),r=r.slice(0,u)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}(t+"",r),g=-1,_=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++g<_;)if(u=(t=o[g]).type)r[u]=vn(r[u],t.name,e);else if(null==e)for(u in r)r[u]=vn(r[u],t.name,null);return this}for(;++g<_;)if((u=(t=o[g]).type)&&(u=lr(r[u],t.name)))return u},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Ni(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var u,g,r=new Array(u),o=0;o<u;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,u=(g=this._[t]).length;o<u;++o)g[o].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],u=0,g=o.length;u<g;++u)o[u].value.apply(e,r)}};const ar=fn;var Pi,Ei,vi=0,bi=0,xi=0,gn=1e3,Ri=0,si=0,Li=0,Oi="object"==typeof performance&&performance.now?performance:Date,yn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zi(){return si||(yn(or),si=Oi.now()+Li)}function or(){si=0}function Di(){this._call=this._time=this._next=null}function pn(t,e,r){var o=new Di;return o.restart(t,e,r),o}function mn(){si=(Ri=Oi.now())+Li,vi=bi=0;try{!function sr(){Zi(),++vi;for(var e,t=Pi;t;)(e=si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vi}()}finally{vi=0,function ur(){for(var t,r,e=Pi,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Pi=r);Ei=t,Xi(o)}(),si=0}}function dr(){var t=Oi.now(),e=t-Ri;e>gn&&(Li-=e,Ri=t)}function Xi(t){vi||(bi&&(bi=clearTimeout(bi)),t-si>24?(t<1/0&&(bi=setTimeout(mn,t-Oi.now()-Li)),xi&&(xi=clearInterval(xi))):(xi||(Ri=Oi.now(),xi=setInterval(dr,gn)),vi=1,yn(mn)))}function _n(t,e,r){var o=new Di;return o.restart(u=>{o.stop(),t(u+e)},e=null==e?0:+e,r),o}Di.prototype=pn.prototype={constructor:Di,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?Zi():+r)+(null==e?0:+e),!this._next&&Ei!==this&&(Ei?Ei._next=this:Pi=this,Ei=this),this._call=t,this._time=r,Xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xi())}};var hr=ar("start","end","cancel","interrupt"),cr=[],wn=0,ji=3;function Bi(t,e,r,o,u,g){var _=t.__transition;if(_){if(r in _)return}else t.__transition={};!function fr(t,e,r){var u,o=t.__transition;function _(rt){var ot,It,Nt,Ut;if(1!==r.state)return P();for(ot in o)if((Ut=o[ot]).name===r.name){if(Ut.state===ji)return _n(_);4===Ut.state?(Ut.state=6,Ut.timer.stop(),Ut.on.call("interrupt",t,t.__data__,Ut.index,Ut.group),delete o[ot]):+ot<e&&(Ut.state=6,Ut.timer.stop(),Ut.on.call("cancel",t,t.__data__,Ut.index,Ut.group),delete o[ot])}if(_n(function(){r.state===ji&&(r.state=4,r.timer.restart(I,r.delay,r.time),I(rt))}),r.state=2,r.on.call("start",t,t.__data__,r.index,r.group),2===r.state){for(r.state=ji,u=new Array(Nt=r.tween.length),ot=0,It=-1;ot<Nt;++ot)(Ut=r.tween[ot].value.call(t,t.__data__,r.index,r.group))&&(u[++It]=Ut);u.length=It+1}}function I(rt){for(var ot=rt<r.duration?r.ease.call(null,rt/r.duration):(r.timer.restart(P),r.state=5,1),It=-1,Nt=u.length;++It<Nt;)u[It].call(t,ot);5===r.state&&(r.on.call("end",t,t.__data__,r.index,r.group),P())}function P(){for(var rt in r.state=6,r.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=r,r.timer=pn(function g(rt){r.state=1,r.timer.restart(_,r.delay,r.time),r.delay<=rt&&_(rt-r.delay)},0,r.time)}(t,r,{name:e,index:o,group:u,on:hr,tween:cr,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:wn})}function qi(t,e){var r=Ue(t,e);if(r.state>wn)throw new Error("too late; already scheduled");return r}function Fe(t,e){var r=Ue(t,e);if(r.state>ji)throw new Error("too late; already running");return r}function Ue(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ti(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Ki,En=180/Math.PI,tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function On(t,e,r,o,u,g){var _,I,P;return(_=Math.sqrt(t*t+e*e))&&(t/=_,e/=_),(P=t*r+e*o)&&(r-=t*P,o-=e*P),(I=Math.sqrt(r*r+o*o))&&(r/=I,o/=I,P/=I),t*o<e*r&&(t=-t,e=-e,P=-P,_=-_),{translateX:u,translateY:g,rotate:Math.atan2(e,t)*En,skewX:Math.atan(P)*En,scaleX:_,scaleY:I}}function Sn(t,e,r,o){function u(rt){return rt.length?rt.pop()+" ":""}return function(rt,ot){var It=[],Nt=[];return rt=t(rt),ot=t(ot),function g(rt,ot,It,Nt,Ut,me){if(rt!==It||ot!==Nt){var xe=Ut.push("translate(",null,e,null,r);me.push({i:xe-4,x:ti(rt,It)},{i:xe-2,x:ti(ot,Nt)})}else(It||Nt)&&Ut.push("translate("+It+e+Nt+r)}(rt.translateX,rt.translateY,ot.translateX,ot.translateY,It,Nt),function _(rt,ot,It,Nt){rt!==ot?(rt-ot>180?ot+=360:ot-rt>180&&(rt+=360),Nt.push({i:It.push(u(It)+"rotate(",null,o)-2,x:ti(rt,ot)})):ot&&It.push(u(It)+"rotate("+ot+o)}(rt.rotate,ot.rotate,It,Nt),function I(rt,ot,It,Nt){rt!==ot?Nt.push({i:It.push(u(It)+"skewX(",null,o)-2,x:ti(rt,ot)}):ot&&It.push(u(It)+"skewX("+ot+o)}(rt.skewX,ot.skewX,It,Nt),function P(rt,ot,It,Nt,Ut,me){if(rt!==It||ot!==Nt){var xe=Ut.push(u(Ut)+"scale(",null,",",null,")");me.push({i:xe-4,x:ti(rt,It)},{i:xe-2,x:ti(ot,Nt)})}else(1!==It||1!==Nt)&&Ut.push(u(Ut)+"scale("+It+","+Nt+")")}(rt.scaleX,rt.scaleY,ot.scaleX,ot.scaleY,It,Nt),rt=ot=null,function(Ut){for(var Mt,me=-1,xe=Nt.length;++me<xe;)It[(Mt=Nt[me]).i]=Mt.x(Ut);return It.join("")}}}var mr=Sn(function yr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tn:On(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),_r=Sn(function pr(t){return null!=t&&(Ki||(Ki=document.createElementNS("http://www.w3.org/2000/svg","g")),Ki.setAttribute("transform",t),t=Ki.transform.baseVal.consolidate())?On((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):tn},", ",")",")");function wr(t,e){var r,o;return function(){var u=Fe(this,t),g=u.tween;if(g!==r)for(var _=0,I=(o=r=g).length;_<I;++_)if(o[_].name===e){(o=o.slice()).splice(_,1);break}u.tween=o}}function br(t,e,r){var o,u;if("function"!=typeof r)throw new Error;return function(){var g=Fe(this,t),_=g.tween;if(_!==o){u=(o=_).slice();for(var I={name:e,value:r},P=0,rt=u.length;P<rt;++P)if(u[P].name===e){u[P]=I;break}P===rt&&u.push(I)}g.tween=u}}function en(t,e,r){var o=t._id;return t.each(function(){var u=Fe(this,o);(u.value||(u.value={}))[e]=r.apply(this,arguments)}),function(u){return Ue(u,o).value[e]}}function nn(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function kn(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}function Si(){}var Wi=1/.7,gi="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Er=/^#([0-9a-f]{3,8})$/,Or=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),Sr=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),kr=new RegExp(`^rgba\\(${gi},${gi},${gi},${Mi}\\)$`),Mr=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${Mi}\\)$`),Tr=new RegExp(`^hsl\\(${Mi},${Qe},${Qe}\\)$`),Cr=new RegExp(`^hsla\\(${Mi},${Qe},${Qe},${Mi}\\)$`),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Tn(){return this.rgb().formatHex()}function Cn(){return this.rgb().formatRgb()}function Ti(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Er.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?An(e):3===r?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?Ui(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?Ui(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Or.exec(t))?new Le(e[1],e[2],e[3],1):(e=Sr.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=kr.exec(t))?Ui(e[1],e[2],e[3],e[4]):(e=Mr.exec(t))?Ui(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Tr.exec(t))?Pn(e[1],e[2]/100,e[3]/100,1):(e=Cr.exec(t))?Pn(e[1],e[2]/100,e[3]/100,e[4]):Mn.hasOwnProperty(t)?An(Mn[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function An(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Ui(t,e,r,o){return o<=0&&(t=e=r=NaN),new Le(t,e,r,o)}function Gi(t,e,r,o){return 1===arguments.length?function Nr(t){return t instanceof Si||(t=Ti(t)),t?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}(t):new Le(t,e,r,null==o?1:o)}function Le(t,e,r,o){this.r=+t,this.g=+e,this.b=+r,this.opacity=+o}function In(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function Nn(){const t=Fi(this.opacity);return`${1===t?"rgb(":"rgba("}${di(this.r)}, ${di(this.g)}, ${di(this.b)}${1===t?")":`, ${t})`}`}function Fi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function di(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ui(t){return((t=di(t))<16?"0":"")+t.toString(16)}function Pn(t,e,r,o){return o<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,r,o)}function Rn(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof Si||(t=Ti(t)),!t)return new Ge;if(t instanceof Ge)return t;var e=(t=t.rgb()).r/255,r=t.g/255,o=t.b/255,u=Math.min(e,r,o),g=Math.max(e,r,o),_=NaN,I=g-u,P=(g+u)/2;return I?(_=e===g?(r-o)/I+6*(r<o):r===g?(o-e)/I+2:(e-r)/I+4,I/=P<.5?g+u:2-g-u,_*=60):I=P>0&&P<1?0:_,new Ge(_,I,P,t.opacity)}function Ge(t,e,r,o){this.h=+t,this.s=+e,this.l=+r,this.opacity=+o}function Ln(t){return(t=(t||0)%360)<0?t+360:t}function Qi(t){return Math.max(0,Math.min(1,t||0))}function rn(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function Dn(t,e,r,o,u){var g=t*t,_=g*t;return((1-3*t+3*g-_)*e+(4-6*g+3*_)*r+(1+3*t+3*g-3*_)*o+_*u)/6}nn(Si,Ti,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tn,formatHex:Tn,formatHex8:function Ar(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Rn(this).formatHsl()},formatRgb:Cn,toString:Cn}),nn(Le,Gi,kn(Si,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(di(this.r),di(this.g),di(this.b),Fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Pr(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Nn,toString:Nn})),nn(Ge,function Rr(t,e,r,o){return 1===arguments.length?Rn(t):new Ge(t,e,r,null==o?1:o)},kn(Si,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*e,u=2*r-o;return new Le(rn(t>=240?t-240:t+120,u,o),rn(t,u,o),rn(t<120?t+240:t-120,u,o),this.opacity)},clamp(){return new Ge(Ln(this.h),Qi(this.s),Qi(this.l),Fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fi(this.opacity);return`${1===t?"hsl(":"hsla("}${Ln(this.h)}, ${100*Qi(this.s)}%, ${100*Qi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function Bn(t,e){var r=e-t;return r?function zn(t,e){return function(r){return t+r*e}}(t,r):jn(isNaN(t)?e:t)}const Kn=function t(e){var r=function zr(t){return 1==(t=+t)?Bn:function(e,r){return r-e?function jr(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(o){return Math.pow(t+o*e,r)}}(e,r,t):jn(isNaN(e)?r:e)}}(e);function o(u,g){var _=r((u=Gi(u)).r,(g=Gi(g)).r),I=r(u.g,g.g),P=r(u.b,g.b),rt=Bn(u.opacity,g.opacity);return function(ot){return u.r=_(ot),u.g=I(ot),u.b=P(ot),u.opacity=rt(ot),u+""}}return o.gamma=t,o}(1);function Wn(t){return function(e){var _,I,r=e.length,o=new Array(r),u=new Array(r),g=new Array(r);for(_=0;_<r;++_)I=Gi(e[_]),o[_]=I.r||0,u[_]=I.g||0,g[_]=I.b||0;return o=t(o),u=t(u),g=t(g),I.opacity=1,function(P){return I.r=o(P),I.g=u(P),I.b=g(P),I+""}}}Wn(function Lr(t){var e=t.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),u=t[o],g=t[o+1];return Dn((r-o/e)*e,o>0?t[o-1]:2*u-g,u,g,o<e-1?t[o+2]:2*g-u)}}),Wn(function Dr(t){var e=t.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*e);return Dn((r-o/e)*e,t[(o+e-1)%e],t[o%e],t[(o+1)%e],t[(o+2)%e])}});var ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,an=new RegExp(ln.source,"g");function Wr(t,e){var o,u,g,r=ln.lastIndex=an.lastIndex=0,_=-1,I=[],P=[];for(t+="",e+="";(o=ln.exec(t))&&(u=an.exec(e));)(g=u.index)>r&&(g=e.slice(r,g),I[_]?I[_]+=g:I[++_]=g),(o=o[0])===(u=u[0])?I[_]?I[_]+=u:I[++_]=u:(I[++_]=null,P.push({i:_,x:ti(o,u)})),r=an.lastIndex;return r<e.length&&(g=e.slice(r),I[_]?I[_]+=g:I[++_]=g),I.length<2?P[0]?function Kr(t){return function(e){return t(e)+""}}(P[0].x):function Br(t){return function(){return t}}(e):(e=P.length,function(rt){for(var It,ot=0;ot<e;++ot)I[(It=P[ot]).i]=It.x(rt);return I.join("")})}function Un(t,e){var r;return("number"==typeof e?ti:e instanceof Ti?Kn:(r=Ti(e))?(e=r,Kn):Wr)(t,e)}function Ur(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fr(t,e,r){var o,g,u=r+"";return function(){var _=this.getAttribute(t);return _===u?null:_===o?g:g=e(o=_,r)}}function Qr(t,e,r){var o,g,u=r+"";return function(){var _=this.getAttributeNS(t.space,t.local);return _===u?null:_===o?g:g=e(o=_,r)}}function Hr(t,e,r){var o,u,g;return function(){var _,P,I=r(this);return null==I?void this.removeAttribute(t):(_=this.getAttribute(t))===(P=I+"")?null:_===o&&P===u?g:(u=P,g=e(o=_,I))}}function Jr(t,e,r){var o,u,g;return function(){var _,P,I=r(this);return null==I?void this.removeAttributeNS(t.space,t.local):(_=this.getAttributeNS(t.space,t.local))===(P=I+"")?null:_===o&&P===u?g:(u=P,g=e(o=_,I))}}function $r(t,e){var r,o;function u(){var g=e.apply(this,arguments);return g!==o&&(r=(o=g)&&function Xr(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}(t,g)),r}return u._value=e,u}function Yr(t,e){var r,o;function u(){var g=e.apply(this,arguments);return g!==o&&(r=(o=g)&&function Zr(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}(t,g)),r}return u._value=e,u}function tl(t,e){return function(){qi(this,t).delay=+e.apply(this,arguments)}}function el(t,e){return e=+e,function(){qi(this,t).delay=e}}function nl(t,e){return function(){Fe(this,t).duration=+e.apply(this,arguments)}}function rl(t,e){return e=+e,function(){Fe(this,t).duration=e}}var _l=ye.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function Ze(t,e,r,o){this._groups=t,this._parents=e,this._name=r,this._id=o}function Fn(){return++jl}var Xe=ye.prototype;Ze.prototype=function zl(t){return ye().transition(t)}.prototype={constructor:Ze,select:function pl(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=S(t));for(var o=this._groups,u=o.length,g=new Array(u),_=0;_<u;++_)for(var ot,It,I=o[_],P=I.length,rt=g[_]=new Array(P),Nt=0;Nt<P;++Nt)(ot=I[Nt])&&(It=t.call(ot,ot.__data__,Nt,I))&&("__data__"in ot&&(It.__data__=ot.__data__),rt[Nt]=It,Bi(rt[Nt],e,r,Nt,rt,Ue(ot,r)));return new Ze(g,this._parents,e,r)},selectAll:function ml(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=h(t));for(var o=this._groups,u=o.length,g=[],_=[],I=0;I<u;++I)for(var ot,P=o[I],rt=P.length,It=0;It<rt;++It)if(ot=P[It]){for(var Ut,Nt=t.call(ot,ot.__data__,It,P),me=Ue(ot,r),xe=0,Mt=Nt.length;xe<Mt;++xe)(Ut=Nt[xe])&&Bi(Ut,e,r,xe,Nt,me);g.push(Nt),_.push(ot)}return new Ze(g,_,e,r)},selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:function ul(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,r=e.length,o=new Array(r),u=0;u<r;++u)for(var P,g=e[u],_=g.length,I=o[u]=[],rt=0;rt<_;++rt)(P=g[rt])&&t.call(P,P.__data__,rt,g)&&I.push(P);return new Ze(o,this._parents,this._name,this._id)},merge:function hl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,o=e.length,g=Math.min(o,r.length),_=new Array(o),I=0;I<g;++I)for(var Nt,P=e[I],rt=r[I],ot=P.length,It=_[I]=new Array(ot),Ut=0;Ut<ot;++Ut)(Nt=P[Ut]||rt[Ut])&&(It[Ut]=Nt);for(;I<o;++I)_[I]=e[I];return new Ze(_,this._parents,this._name,this._id)},selection:function wl(){return new _l(this._groups,this._parents)},transition:function Ll(){for(var t=this._name,e=this._id,r=Fn(),o=this._groups,u=o.length,g=0;g<u;++g)for(var P,_=o[g],I=_.length,rt=0;rt<I;++rt)if(P=_[rt]){var ot=Ue(P,e);Bi(P,t,r,rt,_,{time:ot.time+ot.delay+ot.duration,delay:0,duration:ot.duration,ease:ot.ease})}return new Ze(o,this._parents,t,r)},call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:function vl(t,e){var r=this._id;return arguments.length<2?Ue(this.node(),r).on.on(t):this.each(function fl(t,e,r){var o,u,g=function cl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||"start"===e})}(e)?qi:Fe;return function(){var _=g(this,t),I=_.on;I!==o&&(u=(o=I).copy()).on(e,r),_.on=u}}(r,t,e))},attr:function Vr(t,e){var r=Qt(t),o="transform"===r?_r:Un;return this.attrTween(t,"function"==typeof e?(r.local?Jr:Hr)(r,o,en(this,"attr."+t,e)):null==e?(r.local?Gr:Ur)(r):(r.local?Qr:Fr)(r,o,e))},attrTween:function qr(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var o=Qt(t);return this.tween(r,(o.local?$r:Yr)(o,e))},style:function Sl(t,e,r){var o="transform"==(t+="")?mr:Un;return null==e?this.styleTween(t,function bl(t,e){var r,o,u;return function(){var g=B(this,t),_=(this.style.removeProperty(t),B(this,t));return g===_?null:g===r&&_===o?u:u=e(r=g,o=_)}}(t,o)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function El(t,e,r){var o,u,g;return function(){var _=B(this,t),I=r(this),P=I+"";return null==I&&(this.style.removeProperty(t),P=I=B(this,t)),_===P?null:_===o&&P===u?g:(u=P,g=e(o=_,I))}}(t,o,en(this,"style."+t,e))).each(function Ol(t,e){var r,o,u,I,g="style."+e,_="end."+g;return function(){var P=Fe(this,t),rt=P.on,ot=null==P.value[g]?I||(I=Gn(e)):void 0;(rt!==r||u!==ot)&&(o=(r=rt).copy()).on(_,u=ot),P.on=o}}(this._id,t)):this.styleTween(t,function xl(t,e,r){var o,g,u=r+"";return function(){var _=B(this,t);return _===u?null:_===o?g:g=e(o=_,r)}}(t,o,e),r).on("end.style."+t,null)},styleTween:function Tl(t,e,r){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function Ml(t,e,r){var o,u;function g(){var _=e.apply(this,arguments);return _!==u&&(o=(u=_)&&function kl(t,e,r){return function(o){this.style.setProperty(t,e.call(this,o),r)}}(t,_,r)),o}return g._value=e,g}(t,e,null==r?"":r))},text:function Il(t){return this.tween("text","function"==typeof t?function Al(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(en(this,"text",t)):function Cl(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Rl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Pl(t){var e,r;function o(){var u=t.apply(this,arguments);return u!==r&&(e=(r=u)&&function Nl(t){return function(e){this.textContent=t.call(this,e)}}(u)),e}return o._value=t,o}(t))},remove:function yl(){return this.on("end.remove",function gl(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function xr(t,e){var r=this._id;if(t+="",arguments.length<2){for(var _,o=Ue(this.node(),r).tween,u=0,g=o.length;u<g;++u)if((_=o[u]).name===t)return _.value;return null}return this.each((null==e?wr:br)(r,t,e))},delay:function il(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?tl:el)(e,t)):Ue(this.node(),e).delay},duration:function ll(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?nl:rl)(e,t)):Ue(this.node(),e).duration},ease:function ol(t){var e=this._id;return arguments.length?this.each(function al(t,e){if("function"!=typeof e)throw new Error;return function(){Fe(this,t).ease=e}}(e,t)):Ue(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function sl(t,e){return function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw new Error;Fe(this,t).ease=r}}(this._id,t))},end:function Dl(){var t,e,r=this,o=r._id,u=r.size();return new Promise(function(g,_){var I={value:_},P={value:function(){0==--u&&g()}};r.each(function(){var rt=Fe(this,o),ot=rt.on;ot!==t&&((e=(t=ot).copy())._.cancel.push(I),e._.interrupt.push(I),e._.end.push(P)),rt.on=e}),0===u&&g()})},[Symbol.iterator]:Xe[Symbol.iterator]};var Kl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Wl(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}ye.prototype.interrupt=function gr(t){return this.each(function(){!function vr(t,e){var o,u,_,r=t.__transition,g=!0;if(r){for(_ in e=null==e?null:e+"",r)(o=r[_]).name===e?(u=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(u?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete r[_]):g=!1;g&&delete t.__transition}}(this,t)})},ye.prototype.transition=function Ul(t){var e,r;t instanceof Ze?(e=t._id,t=t._name):(e=Fn(),(r=Kl).time=Zi(),t=null==t?null:t+"");for(var o=this._groups,u=o.length,g=0;g<u;++g)for(var P,_=o[g],I=_.length,rt=0;rt<I;++rt)(P=_[rt])&&Bi(P,t,e,rt,_,r||Wl(P,e));return new Ze(o,this._parents,t,e)};Math;function Ci(t){return{type:t}}function mi(t){return function(){return t}}function Xn(t){this._context=t}function $l(t){return new Xn(t)}["w","e"].map(Ci),["n","s"].map(Ci),["n","w","e","s","nw","ne","sw","se"].map(Ci),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const hn=Math.PI,cn=2*hn,hi=1e-6,Yl=cn-hi;function $n(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class Vi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function ql(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const r=10**e;return function(o){this._+=o[0];for(let u=1,g=o.length;u<g;++u)this._+=Math.round(arguments[u]*r)/r+o[u]}}(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,o,u){this._append`Q${+e},${+r},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(e,r,o,u,g,_){this._append`C${+e},${+r},${+o},${+u},${this._x1=+g},${this._y1=+_}`}arcTo(e,r,o,u,g){if(e=+e,r=+r,o=+o,u=+u,(g=+g)<0)throw new Error(`negative radius: ${g}`);let _=this._x1,I=this._y1,P=o-e,rt=u-r,ot=_-e,It=I-r,Nt=ot*ot+It*It;if(null===this._x1)this._append`M${this._x1=e},${this._y1=r}`;else if(Nt>hi)if(Math.abs(It*P-rt*ot)>hi&&g){let Ut=o-_,me=u-I,xe=P*P+rt*rt,Mt=Ut*Ut+me*me,bt=Math.sqrt(xe),Zt=Math.sqrt(Nt),Gt=g*Math.tan((hn-Math.acos((xe+Nt-Mt)/(2*bt*Zt)))/2),le=Gt/Zt,fe=Gt/bt;Math.abs(le-1)>hi&&this._append`L${e+le*ot},${r+le*It}`,this._append`A${g},${g},0,0,${+(It*Ut>ot*me)},${this._x1=e+fe*P},${this._y1=r+fe*rt}`}else this._append`L${this._x1=e},${this._y1=r}`}arc(e,r,o,u,g,_){if(e=+e,r=+r,_=!!_,(o=+o)<0)throw new Error(`negative radius: ${o}`);let I=o*Math.cos(u),P=o*Math.sin(u),rt=e+I,ot=r+P,It=1^_,Nt=_?u-g:g-u;null===this._x1?this._append`M${rt},${ot}`:(Math.abs(this._x1-rt)>hi||Math.abs(this._y1-ot)>hi)&&this._append`L${rt},${ot}`,o&&(Nt<0&&(Nt=Nt%cn+cn),Nt>Yl?this._append`A${o},${o},0,1,${It},${e-I},${r-P}A${o},${o},0,1,${It},${this._x1=rt},${this._y1=ot}`:Nt>hi&&this._append`A${o},${o},0,${+(Nt>=hn)},${It},${this._x1=e+o*Math.cos(g)},${this._y1=r+o*Math.sin(g)}`)}rect(e,r,o,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}}function ia(t){return t[0]}function na(t){return t[1]}function ra(t,e){var r=mi(!0),o=null,u=$l,g=null,_=function ea(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{const o=Math.floor(r);if(!(o>=0))throw new RangeError(`invalid digits: ${r}`);e=o}return t},()=>new Vi(e)}(I);function I(P){var rt,It,Ut,ot=(P=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(P)).length,Nt=!1;for(null==o&&(g=u(Ut=_())),rt=0;rt<=ot;++rt)!(rt<ot&&r(It=P[rt],rt,P))===Nt&&((Nt=!Nt)?g.lineStart():g.lineEnd()),Nt&&g.point(+t(It,rt,P),+e(It,rt,P));if(Ut)return g=null,Ut+""||null}return t="function"==typeof t?t:void 0===t?ia:mi(t),e="function"==typeof e?e:void 0===e?na:mi(e),I.x=function(P){return arguments.length?(t="function"==typeof P?P:mi(+P),I):t},I.y=function(P){return arguments.length?(e="function"==typeof P?P:mi(+P),I):e},I.defined=function(P){return arguments.length?(r="function"==typeof P?P:mi(!!P),I):r},I.curve=function(P){return arguments.length?(u=P,null!=o&&(g=u(o)),I):u},I.context=function(P){return arguments.length?(null==P?o=g=null:g=u(o=P),I):o},I}function Yn(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function qn(t){this._context=t}function la(t){return new qn(t)}function _i(t,e,r){this.k=t,this.x=e,this.y=r}qn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);