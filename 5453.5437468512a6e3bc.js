"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5453],{1814:(he,At,f)=>{f.d(At,{In:()=>st,MA:()=>E,Mo:()=>T,NV:()=>O,S3:()=>D,dt:()=>U,h8:()=>h,k0:()=>y});const D={fill:"transparent",stroke:"#129bff",strokeWidth:1},O={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},st={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},T={fill:"transparent",stroke:"transparent",strokeWidth:1},U={fill:"none",stroke:"#5F6CE1",strokeWidth:1},h={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},E={fill:"transparent"},y={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(he,At,f)=>{f.d(At,{w:()=>Y,I:()=>z});var D=f(4981),O=f(9054),st=f(5811),T=/^#[a-fA-F0-9]+$/i,U=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,h=/^rgb\((\d+),(\d+),(\d+)\)$/i;const E=C=>{let G=null,at=null;if(C)if("transparent"==C)G="#000000",at=0;else if(C.match(T))G=C;else{let K=(C=C.replace(/\s+/g,"")).match(U);if(K)G="#"+(256|K[1]).toString(16).slice(1)+(256|K[2]).toString(16).slice(1)+(256|K[3]).toString(16).slice(1),at=(0,st.q)(parseFloat(K[4]),100);else{let et=C.match(h);et&&(G="#"+(256|et[1]).toString(16).slice(1)+(256|et[2]).toString(16).slice(1)+(256|et[3]).toString(16).slice(1))}}return{hex:G,alpha:at}},z=C=>S(null==C?void 0:C.url,null==C?void 0:C.path,null==C?void 0:C.src);var S=(C,G,at)=>{var K,et;let gt,_t,ct,rt;var L,Rt;return C&&(gt=C.replace(/\\/g,"/")),G&&(_t=G.replace(/\\/g,"/")),at&&(ct=at.replace(/\\/g,"/")),_t&&!gt&&(gt=(null===(L=D.icdt.config)||void 0===L?void 0:L.readfileuploadurl)+_t),!ct||_t||gt||(_t=ct.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Rt=D.icdt.config)||void 0===Rt?void 0:Rt.readfileuploadurl)+_t),rt=(null!==(K=gt)&&void 0!==K?K:"").split("/").pop()||(null!==(et=_t)&&void 0!==et?et:"").split("/").pop()||"",{url:gt,path:_t,name:rt}};const Y=C=>{let G={x:0,y:0,width:C.screen.w,height:C.screen.h},at=[];return C.data.forEach((K,et)=>{var gt,_t;let ct={id:"number"==typeof K.id?K.id:D.icdt.data.newSlideId,code:null===(gt=K.id)||void 0===gt?void 0:gt.toString(),name:"string"==typeof K.id?K.id:`Trang ${et+1}`,svg:{viewBox:G,nodes:[]},test:(rt=K.test2,rt?(rt.audiotrue&&(rt.audiotrue=z({path:rt.audiotrue.path})),rt.audiofalse&&(rt.audiofalse=z({path:rt.audiofalse.path})),rt.effecttrue&&(rt.effecttrue=z({path:rt.effecttrue.path})),rt.effectfalse&&(rt.effectfalse=z({path:rt.effectfalse.path})),rt.icontrue&&(rt.icontrue=z({path:rt.icontrue.path})),rt.iconfalse&&(rt.iconfalse=z({path:rt.iconfalse.path})),rt):{})};var rt;K.background&&ct.svg&&(ct.svg.background=function(C){return C&&(null!==C.match(/#([a-zA-Z0-9]+)/)||null!==C.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==C.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(K.background)?{color:K.background}:function(C){return C&&null!==C.match(/data:[^;]+;base64,/)}(K.background)?{base64:K.background}:function(C){return C&&null!==C.match(/http(s)?:\/\//)}(K.background)?S(K.background):S(void 0,K.background)),jQuery(null!==(_t=K.svg)&&void 0!==_t?_t:"").find(".svg-node").each((rt,L)=>{var Rt,Ht;let jt=jQuery(L).parents(".indexs"),Et=jt.attr("data-index"),Zt=jt.attr("data-time"),Kt=null!==(Rt=L.getAttribute("id"))&&void 0!==Rt?Rt:"0",ut={id:parseInt(Kt),code:`${L.nodeName}-${L.getAttribute("id")}`,name:L.nodeName,idx:Et?parseInt(Et):0,time:Zt?parseFloat(Zt):0,type:(()=>{switch(L.nodeName){case"polygon":return O.$.POLYGON;case"circle":return O.$.CIRCLE;case"ellipse":return O.$.ELLIPSE;case"line":return O.$.LINE;case"rect":return O.$.RECT;case"foreignObject":return O.$.FOREIGNOBJECT}return 0})(),size:(it=>{let bt=0,xt=0,Xt=0,pt=0,B=null,F=null,d=parseFloat((null===(it=L.getAttribute("transform"))||void 0===it?void 0:it.replace("rotate(","").replace(")",""))||"0")||null;switch(L.nodeName){case"polygon":{var J,ht;let ft=[],kt=[],Pt=999999999,Dt=999999999,zt=0,Ot=0;B=JSON.parse(L.getAttribute("ratios")||"[]"),F=null!==(J=null===(ht=L.getAttribute("points"))||void 0===ht?void 0:ht.split(",").map(function(wt){return wt.split(" ").map(function($t){return parseFloat($t)})}))&&void 0!==J?J:[],F.forEach(function(wt){ft.push(wt[0]),kt.push(wt[1])}),Pt=Math.min.apply(null,ft),Dt=Math.min.apply(null,kt),zt=Math.max.apply(null,ft),Ot=Math.max.apply(null,kt),bt=Pt,xt=Dt,Xt=zt-bt,pt=Ot-xt;break}case"circle":{let ft=parseFloat(L.getAttribute("cx")||"0"),kt=parseFloat(L.getAttribute("cy")||"0"),Pt=parseFloat(L.getAttribute("r")||"0");bt=ft-Pt,xt=kt-Pt,Xt=2*Pt,pt=2*Pt;break}case"ellipse":{let ft=parseFloat(L.getAttribute("cx")||"0"),kt=parseFloat(L.getAttribute("cy")||"0"),Pt=parseFloat(L.getAttribute("rx")||"0"),Dt=parseFloat(L.getAttribute("ry")||"0");bt=ft-Pt,xt=kt-Dt,Xt=2*Pt,pt=2*Dt;break}case"line":{let ft=parseFloat(L.getAttribute("x1")||"0"),kt=parseFloat(L.getAttribute("y1")||"0"),Pt=parseFloat(L.getAttribute("x2")||"0"),Dt=parseFloat(L.getAttribute("y2")||"0"),zt=999999999,Ot=999999999,wt=0,$t=0;zt=Math.min(ft,Pt),Ot=Math.min(kt,Dt),wt=Math.max(ft,Pt),$t=Math.max(kt,Dt),bt=zt,xt=Ot,Xt=wt-bt,pt=$t-xt,B=[[(ft-bt)/(Xt||1),(kt-xt)/(pt||1)],[(Pt-bt)/(Xt||1),(Dt-xt)/(pt||1)]];break}case"rect":case"foreignObject":bt=parseFloat(L.getAttribute("x")||"0"),xt=parseFloat(L.getAttribute("y")||"0"),Xt=parseFloat(L.getAttribute("width")||"0"),pt=parseFloat(L.getAttribute("height")||"0")}return Object.assign({},{x:bt,y:xt,width:Xt,height:pt,ratios:B,points:F,rotate:d})})(),attribute:(()=>{let it={};switch(L.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var bt,xt,Xt,pt,B,F;let d=null!==(bt=L.getAttribute("fill"))&&void 0!==bt?bt:null,J=null!==(xt=L.getAttribute("stroke"))&&void 0!==xt?xt:null,ht=null!==(Xt=parseFloat(L.getAttribute("stroke-width")||"0"))&&void 0!==Xt?Xt:null,ft=null!==(pt=L.getAttribute("stroke-linecap"))&&void 0!==pt?pt:null,kt=null!==(B=L.getAttribute("stroke-linejoin"))&&void 0!==B?B:null,Pt=null!==(F=parseFloat(L.getAttribute("stroke-dasharray")||"0"))&&void 0!==F?F:null;Object.assign(it,{fill:d,stroke:J,strokeWidth:ht,strokeLinecap:ft,strokeLinejoin:kt,strokeDasharray:Pt});break}}return it})(),style:(()=>{let it={};switch(L.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let B=jQuery(L).find(".svg-container");if(B.length){var bt,xt;let d=null!==(bt=parseFloat(B.css("border-width")||"0"))&&void 0!==bt?bt:null,J=null!==(xt=B.css("border-style"))&&void 0!==xt?xt:null,ht=B.css("border-color")||null,ft=null,kt=B.css("background-color")||null,Pt=null;(()=>{let{hex:Dt,alpha:zt}=E(ht);ht=Dt,ft=zt})(),(()=>{let{hex:Dt,alpha:zt}=E(kt);kt=Dt,Pt=zt})(),Object.assign(it,{borderWidth:d,borderStyle:J,borderColor:ht,borderOpacity:ft,backgroundColor:kt,backgroundOpacity:Pt})}let F=jQuery(L).find(".svg-editor-content");if(F.length){var Xt,pt;let d=JSON.parse((F.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:J,alpha:ht}=E(d.TextColor);Object.assign(it,{fontFamily:null!==(Xt=d.FontFamily)&&void 0!==Xt?Xt:null,fontSize:null!==(pt=d.FontSize)&&void 0!==pt?pt:null,color:J,opacity:ht})}break}}return it})(),source:(()=>{let it={};switch(L.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(jt.hasClass("editors")){let Ot=jQuery(L).find(".svg-editor-content");if(Ot.length){var bt;let wt=Ot.html(),$t=null!==(bt=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==bt?bt:[];Object.assign(it,{type:"html",html:{htmlContent:wt,variableKeywords:$t}})}}else if(jt.hasClass("inputs")||jt.hasClass("textareas"))Object.assign(it,{type:"input",input:{input:!!jQuery(L).find("input").length,textarea:!!jQuery(L).find("textarea").length}});else if(jt.hasClass("tests")){let Ot=jQuery(L).find(".svg-test");if(jt.hasClass("tests-truefalse")){var xt,Xt;let wt=Ot.find(".svg-editor-content").html(),$t=null!==(xt=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==xt?xt:[];Object.assign(it,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(Xt=K.test2.truefalse)||void 0===Xt?void 0:Xt.includes(Kt)}},html:{htmlContent:wt,variableKeywords:$t}})}else if(jt.hasClass("tests-singlechoice")){var pt,B;let wt=Ot.find(".svg-editor-content").html(),$t=null!==(pt=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==pt?pt:[];Object.assign(it,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(B=K.test2.singlechoice)||void 0===B?void 0:B.includes(Kt)}},html:{htmlContent:wt,variableKeywords:$t}})}else if(jt.hasClass("tests-multichoice")){var F,d;let wt=Ot.find(".svg-editor-content").html(),$t=null!==(F=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==F?F:[];Object.assign(it,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(d=K.test2.multichoice)||void 0===d?void 0:d.includes(Kt)}},html:{htmlContent:wt,variableKeywords:$t}})}else if(jt.hasClass("tests-fill")){var J,ht;let wt=Ot.find(".svg-editor-content").html(),$t=null!==(J=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==J?J:[],Lt=null!==(ht=(null!=wt?wt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==ht?ht:[];Lt=Lt.filter((ve,H,c)=>c.indexOf(ve)==H),Object.assign(it,{type:"test",test:{type:"fill",fill:Lt.map(ve=>{var H;return{key:ve,value:null===(H=K.test2.fill)||void 0===H||null===(H=H.find(c=>c.id==Kt))||void 0===H||null===(H=H.vals)||void 0===H?void 0:H.map(c=>c.text).filter(c=>!["",null,void 0,NaN].includes(c))}})},html:{htmlContent:wt,variableKeywords:$t,fillKeywords:Lt}})}else if(jt.hasClass("tests-matching")){if(Ot.hasClass("svg-test-empty"))Object.assign(it,{type:"test",test:{type:"matching-empty",matching:{key:Ot.attr("data-name")||null}}});else if(Ot.hasClass("svg-test-content")){var ft;let wt=Ot.find(".svg-editor-content").html(),$t=null!==(ft=(null!=wt?wt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(it,{type:"test",test:{type:"matching-content",matching:{key:Ot.attr("data-name")||null}},html:{htmlContent:wt,variableKeywords:$t}})}}else if(jt.hasClass("tests-speech")){var kt;Object.assign(it,{type:"speech",speech:{value:null===(kt=K.test2.speech)||void 0===kt||null===(kt=kt.find(wt=>wt.id==Kt))||void 0===kt||null===(kt=kt.vals)||void 0===kt?void 0:kt.map(wt=>wt.text).filter(wt=>!["",null,void 0,NaN].includes(wt))}})}else if(jt.hasClass("tests-submit")){let wt=jQuery(L).find(".svg-container img");Object.assign(it,{type:"test",test:{type:"submit"},image:S(wt.attr("url"),wt.attr("path"),wt.attr("src"))})}}else if(jt.hasClass("images")){let Ot=jQuery(L).find(".svg-editor-content img");if(Ot.length)Object.assign(it,{type:"image",image:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});else{let wt=jQuery(L).find("iframe");Object.assign(it,{type:"iframe",iframe:S(wt.attr("url"),wt.attr("path"),wt.attr("src"))})}}else if(jt.hasClass("sounds")){let Ot=jQuery(L).find(".svg-editor-content img");Ot.length&&Object.assign(it,{type:"image",image:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))})}else if(jt.hasClass("htmls")){let Ot=jQuery(L).find("iframe");Ot.length&&Object.assign(it,{type:"iframe",iframe:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))})}else if(jt.hasClass("svgs")){let Ot=jQuery(L).find("svg");var Pt,Dt;Ot.length&&Object.assign(it,{type:"svg",svg:Object.assign(S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src")),{svgContent:null!==(Pt=null===(Dt=Ot.get(0))||void 0===Dt?void 0:Dt.outerHTML)&&void 0!==Pt?Pt:null})})}else if(jt.hasClass("medias")){let Ot=jQuery(L).find(".media-item");if(Ot.length)switch(Ot.attr("type")){case"audio":Object.assign(it,{type:"audio",audio:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;case"video":Object.assign(it,{type:"video",video:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;case"file":Object.assign(it,{type:"file",file:S(Ot.attr("url"),Ot.attr("path"),Ot.attr("src"))});break;default:var zt;Object.assign(it,{type:"link",link:{url:null!==(zt=Ot.attr("url"))&&void 0!==zt?zt:null}})}let wt=jQuery(L).find("img");wt.length&&(Object.assign(it,{image:S(wt.attr("url"),wt.attr("path"),wt.attr("src"))}),it.type||Object.assign(it,{type:"image"}))}}return it})(),animate:(it=>{let bt={},xt=null===(it=K.animates)||void 0===it?void 0:it.find(Xt=>Xt.elementId==Kt);return xt&&Object.assign(bt,{value:xt.value}),bt})(),interactive:(()=>{let it={},bt=K.actions.show.filter(Xt=>Xt.elementId==Kt&&Xt.active);bt.length&&(it.show={},bt.forEach(Xt=>{let{source:pt}=Xt;switch(null==pt?void 0:pt.type){case"work":var B,F,d,J,ht;it.show.action={},Object.assign(it.show.action,{value:null!==(B=pt.value)&&void 0!==B?B:null,iteration:null!==(F=pt.iteration)&&void 0!==F?F:null,finish:null!==(d=pt.end)&&void 0!==d?d:null,time:null!==(J=pt.time)&&void 0!==J?J:null,points:null!==(ht=pt.points)&&void 0!==ht?ht:null});break;case"audio":var ft,kt,Pt;it.show.audio={},Object.assign(it.show.audio,{source:S(null,null,pt.url),iteration:null!==(ft=pt.iteration)&&void 0!==ft?ft:null,finish:null!==(kt=pt.end)&&void 0!==kt?kt:null,time:null!==(Pt=pt.time)&&void 0!==Pt?Pt:null,async:-1==pt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Dt,zt,Ot,wt,$t,Lt,ve,H,c,V,ot,Z,x,M,W;pt.options.includes("show")&&(it.show.triggershow={},Object.assign(it.show.triggershow,{id:null!==(Dt=parseInt(null!==(zt=pt.id)&&void 0!==zt?zt:"0"))&&void 0!==Dt?Dt:null,ids:null===(Ot=pt.ids)||void 0===Ot?void 0:Ot.map(dt=>parseInt(dt)),async:null!==(wt=pt.async)&&void 0!==wt?wt:null,time:null!==($t=pt.time)&&void 0!==$t?$t:null})),pt.options.includes("run")&&(it.show.triggerrun={},Object.assign(it.show.triggerrun,{id:null!==(Lt=parseInt(null!==(ve=pt.id)&&void 0!==ve?ve:"0"))&&void 0!==Lt?Lt:null,ids:null===(H=pt.ids)||void 0===H?void 0:H.map(dt=>parseInt(dt)),async:null!==(c=pt.async)&&void 0!==c?c:null,time:null!==(V=pt.time)&&void 0!==V?V:null})),pt.options.includes("hide")&&(it.show.triggerhide={},Object.assign(it.show.triggerhide,{id:null!==(ot=parseInt(null!==(Z=pt.id)&&void 0!==Z?Z:"0"))&&void 0!==ot?ot:null,ids:null===(x=pt.ids)||void 0===x?void 0:x.map(dt=>parseInt(dt)),async:null!==(M=pt.async)&&void 0!==M?M:null,time:null!==(W=pt.time)&&void 0!==W?W:null}))}}));let xt=K.actions.click.filter(Xt=>Xt.elementId==Kt&&Xt.active);return xt&&(it.click={},xt.forEach(Xt=>{let{source:pt}=Xt;switch(null==pt?void 0:pt.type){case"work":var B,F,d,J,ht;it.click.action={},Object.assign(it.click.action,{value:null!==(B=pt.value)&&void 0!==B?B:null,iteration:null!==(F=pt.iteration)&&void 0!==F?F:null,finish:null!==(d=pt.end)&&void 0!==d?d:null,time:null!==(J=pt.time)&&void 0!==J?J:null,points:null!==(ht=pt.points)&&void 0!==ht?ht:null});break;case"audio":var ft,kt,Pt;it.click.audio={},Object.assign(it.click.audio,{source:S(null,null,pt.url),iteration:null!==(ft=pt.iteration)&&void 0!==ft?ft:null,finish:null!==(kt=pt.end)&&void 0!==kt?kt:null,time:null!==(Pt=pt.time)&&void 0!==Pt?Pt:null,async:-1==pt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Dt,zt,Ot,wt,$t,Lt,ve,H,c,V,ot,Z,x,M,W;pt.options.includes("show")&&(it.click.triggershow={},Object.assign(it.click.triggershow,{id:null!==(Dt=parseInt(null!==(zt=pt.id)&&void 0!==zt?zt:"0"))&&void 0!==Dt?Dt:null,ids:null===(Ot=pt.ids)||void 0===Ot?void 0:Ot.map(vt=>parseInt(vt)),async:null!==(wt=pt.async)&&void 0!==wt?wt:null,time:null!==($t=pt.time)&&void 0!==$t?$t:null})),pt.options.includes("run")&&(it.click.triggerrun={},Object.assign(it.click.triggerrun,{id:null!==(Lt=parseInt(null!==(ve=pt.id)&&void 0!==ve?ve:"0"))&&void 0!==Lt?Lt:null,ids:null===(H=pt.ids)||void 0===H?void 0:H.map(vt=>parseInt(vt)),async:null!==(c=pt.async)&&void 0!==c?c:null,time:null!==(V=pt.time)&&void 0!==V?V:null})),pt.options.includes("hide")&&(it.click.triggerhide={},Object.assign(it.click.triggerhide,{id:null!==(ot=parseInt(null!==(Z=pt.id)&&void 0!==Z?Z:"0"))&&void 0!==ot?ot:null,ids:null===(x=pt.ids)||void 0===x?void 0:x.map(vt=>parseInt(vt)),async:null!==(M=pt.async)&&void 0!==M?M:null,time:null!==(W=pt.time)&&void 0!==W?W:null}));break;case"slide":var dt;it.click.slide={},Object.assign(it.click.slide,{id:parseInt(null!==(dt=pt.id)&&void 0!==dt?dt:"0")||pt.num||null,code:pt.id})}})),it})(),variable:(it=>{let bt={};var xt;L.getAttribute("data-variable")&&(bt.input={},Object.assign(bt.input,{variable:null!==(xt=L.getAttribute("data-variable"))&&void 0!==xt?xt:null}));let Xt=null===(it=K.nodes)||void 0===it||null===(it=it.find(J=>J.id==Kt))||void 0===it?void 0:it.variable;var pt,B,F,d;return Xt&&(bt.click={},Object.assign(bt.click,{variable:null!==(pt=Xt.variable)&&void 0!==pt?pt:null,operator:null!==(B=Xt.operator)&&void 0!==B?B:null,valuetype:null!==(F=Xt.valuetype)&&void 0!==F?F:null,value:null!==(d=Xt.value)&&void 0!==d?d:null})),bt})()};null===(Ht=ct.svg)||void 0===Ht||Ht.nodes.push(ut)}),at.push(ct)}),console.log(at),{screen:{width:C.screen.w,height:C.screen.h},data:{slides:at},variable:C.variable}}},644:(he,At,f)=>{f.d(At,{Dx:()=>h,aY:()=>R,qp:()=>y,qz:()=>U,sV:()=>E,yR:()=>b});var D=f(5861),O=f(9422),st=f.n(O);st().config({driver:[st().INDEXEDDB,st().LOCALSTORAGE,st().WEBSQL],name:"_localDataDB",version:1});const T={create:(z=(0,D.Z)(function*(){return st()}),function(){return z.apply(this,arguments)}),get:function(){var z=(0,D.Z)(function*(S){return st().getItem(S)});return function(Y){return z.apply(this,arguments)}}(),set:function(){var z=(0,D.Z)(function*(S,Y){return st().setItem(S,Y)});return function(Y,C){return z.apply(this,arguments)}}()},U=function(){var z=(0,D.Z)(function*(S){yield T.create();var Y=(yield T.get("icdt-data"))||[];"function"==typeof S.callback&&S.callback(Y)});return function(Y){return z.apply(this,arguments)}}(),h=function(){var z=(0,D.Z)(function*(S){yield T.create(),S.params=S.params||{};try{yield T.set("icdt-data",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(Y){"function"==typeof S.callback&&S.callback(null),console.error(Y)}});return function(Y){return z.apply(this,arguments)}}(),E=function(){var z=(0,D.Z)(function*(S){yield T.create();try{var Y=(yield T.get("icdt-config"))||{};"function"==typeof S.callback&&S.callback(Y)}catch(C){"function"==typeof S.callback&&S.callback(null),console.error(C)}});return function(Y){return z.apply(this,arguments)}}(),y=function(){var z=(0,D.Z)(function*(S){yield T.create(),S.params=S.params||{};try{yield T.set("icdt-config",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(Y){"function"==typeof S.callback&&S.callback(null),console.error(Y)}});return function(Y){return z.apply(this,arguments)}}(),R=function(){var z=(0,D.Z)(function*(S){yield T.create();try{var Y=(yield T.get("icdt-clipboard"))||{};"function"==typeof S.callback&&S.callback(Y)}catch(C){"function"==typeof S.callback&&S.callback(null),console.error(C)}});return function(Y){return z.apply(this,arguments)}}(),b=function(){var z=(0,D.Z)(function*(S){yield T.create(),S.params=S.params||{};try{yield T.set("icdt-clipboard",S.params),"function"==typeof S.callback&&S.callback(S.params)}catch(Y){"function"==typeof S.callback&&S.callback(null),console.error(Y)}});return function(Y){return z.apply(this,arguments)}}();var z},1687:(he,At,f)=>{f.d(At,{O:()=>D});const D={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(he,At,f)=>{f.d(At,{D:()=>D});const D={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(he,At,f)=>{f.d(At,{_:()=>D});const D={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(he,At,f)=>{f.d(At,{D:()=>D});const D={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(he,At,f)=>{f.d(At,{$:()=>D});const D={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(he,At,f)=>{f.d(At,{icdt:()=>mt});var D=f(968),O=f(4080),st=f(1687),T=f(9054),U=f(4318),h=f(6816),E=f(666),y=f(2966);const z=k=>{var i,n,r,a,s;let v=(null===(i=k.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=k.touchEvent)||void 0===n?void 0:n.target),p=(null==v?void 0:v.getAttribute("id"))||"",w=null==v?void 0:v.nodeName,j=(null==v||null===(r=v.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var m,P;if([st.O.RESIZE_GROUP,st.O.SELECT_GROUP].includes(j))return null===(m=k.mouseEvent)||void 0===m||m.stopPropagation(),void(null===(P=k.mouseEvent)||void 0===P||P.preventDefault());if(null!==(a=k.mouseEvent)&&void 0!==a&&a.altKey||null!==(s=k.touchEvent)&&void 0!==s&&s.altKey||!p||p.match(/[^0-9]/)||!mt.dataSelect.nodeName.includes(w)){var I;mt.dataSelect.ids.length&&(mt.dataSelect.ids=[]),(0==(null===(I=k.mouseEvent)||void 0===I?void 0:I.button)||k.touchEvent)&&(k=>{let s=(0,O.g1)(st.O.SCAN_GROUP,"g"),v=(0,U.bH)(0,0,1,1);(0,O.vl)(s,v),((k,i,n)=>{(0,h.A)(k,{start:s=>{},move:(s,v)=>{((s,v,p,w)=>{i=(0,U.bH)(s,v,p,w),(0,O.vl)(n,i)})(v[0][0],v[0][1],s.x,s.y)},end:(s,v)=>{null==n||n.remove(),mt.dataSelect.ids=mt.data.getNodeInArea(Math.min(v[0][0],s.x),Math.min(v[0][1],s.y),Math.max(v[0][0],s.x),Math.max(v[0][1],s.y));let p=mt.dataSelect.nodes;1==p.length?(0,E.y)(p[0]):p.length>1&&(0,y.Q)(p)}})})(k,v,s)})(k)}else{var Q,q;let X=parseFloat(p||"0");mt.dataSelect.ids=null!==(Q=k.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(q=k.touchEvent)&&void 0!==q&&q.shiftKey?[X].concat(mt.dataSelect.ids).filter((oe,fe,ye)=>ye.indexOf(oe)==fe):[X];let Ut=mt.dataSelect.nodes;Ut.length>1||1==Ut.length&&Ut[0].type==T.$.PATH?(0,y.Q)(Ut):1==Ut.length&&(0,E.y)(Ut[0])}};class Y{constructor(){let{x:i,y:n}=mt.screen.dislocation;var r=(a,s,v,p)=>{mt.screen.move({x:i,y:n},{x:v-a,y:p-s})};return{start:a=>{},move:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)},end:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)}}}}var C=f(4714);const G=[{name:"tam gi\xe1c vu\xf4ng",type:C.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:C.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:C.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:C.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:C.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:C.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:C.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:C.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:C.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:C.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:C.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:C.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:C.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var at=f(8619),K=f(5811);class et{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,at._)(Math.ceil(1e9*Math.random())),v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m,{ratio:1}),s.x=(0,K.q)(s.x),s.y=(0,K.q)(s.y),s.width=(0,K.q)(s.width),s.height=(0,K.q)(s.height),Object.assign(a,(0,U.sg)(T.$.CIRCLE,s)),(0,O.__)(r,a),(0,O.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("r","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.CIRCLE,name:"Circle"},{size:s,attribute:a}),null==i||i.remove()}}}}var gt=f(8785);class _t{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,gt.r)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,K.q)(s.x),s.y=(0,K.q)(s.y),s.width=(0,K.q)(s.width),s.height=(0,K.q)(s.height),Object.assign(a,(0,U.sg)(T.$.ELLIPSE,s)),(0,O.__)(r,a),(0,O.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.ELLIPSE,name:"Ellipse"},{size:s,attribute:a}),null==i||i.remove()}}}}var ct=f(8054);class rt{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ct.f)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,K.q)(s.x),s.y=(0,K.q)(s.y),s.width=(0,K.q)(s.width),s.height=(0,K.q)(s.height),Object.assign(a,(0,U.sg)(T.$.RECT,s)),(0,O.__)(r,a),(0,O.g$)(i,s)};return{start:p=>{v(p.x,p.y,p.x+s.width,p.y+s.height)},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.RECT,name:"Rect"},{size:s,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var L=f(2282);class Rt{constructor(i){let n=(0,O.g1)(st.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:s,attribute:v,size:p}=(0,L.l)(Math.ceil(1e9*Math.random()));p.ratios=r;var w=(j,m,P,I)=>{p=(0,U.bH)(j,m,P,I,{ratios:r}),p.x=(0,K.q)(p.x),p.y=(0,K.q)(p.y),p.width=(0,K.q)(p.width),p.height=(0,K.q)(p.height),Object.assign(v,(0,U.sg)(T.$.POLYGON,p)),(0,O.__)(s,v),(0,O.g$)(n,p)};return{start:j=>{},move:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y)},end:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y),mt.data.node=Object.assign({id:a,type:T.$.POLYGON,name:"Polygon"},{size:p,attribute:v}),null==n||n.remove()}}}}var Ht=f(4921);class jt{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,Ht.W)(Math.ceil(1e9*Math.random()));var v=(p,w,j,m)=>{s=(0,U.bH)(p,w,j,m),s.x=(0,K.q)(s.x),s.y=(0,K.q)(s.y),s.width=(0,K.q)(s.width),s.height=(0,K.q)(s.height),Object.assign(a,(0,U.sg)(T.$.LINE,s)),(0,O.__)(r,a),(0,O.g$)(i,s)};return{start:p=>{},move:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y)},end:(p,w)=>{v(w[0][0],w[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.LINE,name:"Line"},{size:s,attribute:a}),null==i||i.remove()}}}}var Et=f(8419);class Zt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,Et.G)(Math.ceil(1e9*Math.random())),v="";var p=(w,j)=>{v+=` ${w} ${j}`,n.setAttribute("d",v)};return{start:w=>{v=`M ${w.x} ${w.y} L ${w.x} ${w.y}`},move:(w,j)=>{p(w.x,w.y)},end:(w,j)=>{p(w.x,w.y),(w=>{let j=9999,m=9999,P=-9999,I=-9999;w.forEach(Q=>{j=Math.min(j,Q[0]),m=Math.min(m,Q[1]),P=Math.max(P,Q[0]),I=Math.max(I,Q[1])}),a=(0,U.bH)(j,m,P,I,{points:w}),Object.assign(r,(0,U.sg)(T.$.PATH,a)),(0,O.__)(n,r)})(j),mt.data.node=Object.assign({id:i,type:T.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var Kt=f(2875);class ut{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Kt.e)(Math.ceil(1e9*Math.random()));var w=(j,m,P,I)=>{a=(0,U.bH)(j,m,P,I),a.x=(0,K.q)(a.x),a.y=(0,K.q)(a.y),a.width=(0,K.q)(a.width),a.height=(0,K.q)(a.height),Object.assign(s,(0,U.sg)(T.$.FOREIGNOBJECT,a)),(0,O.__)(r,s),(0,O.g$)(i,a)};return{start:j=>{w(j.x,j.y,j.x+a.width,j.y+a.height)},move:(j,m)=>{w(m[0][0],m[0][1],j.x,j.y)},end:(j,m)=>{a.width>=10&&a.height>=10?mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p}):null==r||r.remove(),null==i||i.remove()}}}}var it=f(7210);class bt{constructor(){var i,n;let r=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,it.G)(Math.ceil(1e9*Math.random())),j=1;(P=>{if(!P)return;let I=new Image;I.onload=()=>{j=(0,K.q)(I.naturalWidth/I.naturalHeight,100)},I.onerror=Q=>{console.error(`ImgSrc load failed -> ${P}`,Q)},I.src=P})(null!==(i=null===(n=w.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var m=(P,I,Q,q)=>{v=(0,U.bH)(P,I,Q,q,{ratio:j}),v.x=(0,K.q)(v.x),v.y=(0,K.q)(v.y),v.width=(0,K.q)(v.width),v.height=(0,K.q)(v.height),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,O.__)(s,p),(0,O.g$)(r,v)};return{start:P=>{m(P.x,P.y,P.x+v.width,P.y+v.height)},move:(P,I)=>{m(I[0][0],I[0][1],P.x,P.y)},end:(P,I)=>{v.width>=10&&v.height>=10?mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w}):null==s||s.remove(),null==r||r.remove()}}}}var Xt=f(4578),pt=f(9623);function d(k,i,n,r){return Math.sqrt(Math.pow(n-k,2)+Math.pow(r-i,2))}function J(k,i,n,r,a){return d(k,i,n,r)<a?1:0}function ft(k,i,n,r,a,s,v){var p=[];return p.push(J(k,i,n,r,v)),p.push(J(k,i,a,s,v)),p.push(function ht(k,i,n,r,a,s,v){var p=[a-n,s-r],w=[k-n,i-r],j=[-p[1],p[0]],m=Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)),P=[j[0]/m,j[1]/m],I=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),Q=[p[0]/I,p[1]/I],q=w[0]*Q[0]+w[1]*Q[1];if(q<=0||q>=I)return 0;var X=w[0]*P[0]+w[1]*P[1];return X>=v||X<=-v?0:1}(k,i,n,r,a,s,v)),p}function kt(k,i,n,r,a){var s=[n-k,r-i],v=[-s[1],s[0]],p=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),w=[v[0]/p,v[1]/p];return[[k+a*w[0],i+a*w[1]],[k-a*w[0],i-a*w[1]],[n-a*w[0],r-a*w[1]],[n+a*w[0],r+a*w[1]]]}function Pt(k,i,n,r,a,s,v){var q,p=[a-k,s-i],w=[n-k,r-i],j=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),m=[w[0]/j,w[1]/j],P=p[0]*m[0]+p[1]*m[1],I=[k+P*m[0],i+P*m[1]],Q=Math.sqrt(Math.pow(a-I[0],2)+Math.pow(s-I[1],2));q=0===Q?v:Math.sqrt(Math.pow(v,2)-Math.pow(Q,2));var X=[k+P*m[0]+q*m[0],i+P*m[1]+q*m[1]];return X[0]===k&&X[1]===i?null:X}function Dt(k,i,n,r,a,s,v){var p=[a-k,s-i],w=[n-k,r-i],j=[-w[1],w[0]],m=Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)),P=[j[0]/m,j[1]/m],I=p[0]*P[0]+p[1]*P[1],Q=ve([k,i],[n,r],[a,s]);if($t([Q[0]-a,Q[1]-s])>=v)return null;var X=Math.sqrt(Math.pow(v,2)-Math.pow(I,2)),Ut=[a-I*P[0],s-I*P[1]],oe=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),fe=[w[0]/oe,w[1]/oe],ye=[[Ut[0]-fe[0]*X,Ut[1]-fe[1]*X],[Ut[0]+fe[0]*X,Ut[1]+fe[1]*X]];return ye[0][0]===k&&ye[0][1]===i?null:ye}function zt(k,i,n,r,a,s,v,p){var w,j,m,P,I,Q;return-(m=v-a)*(j=r-i)+(w=n-k)*(P=p-s)==0?null:(Q=(m*(i-s)-P*(k-a))/(-m*j+w*P),(I=(-j*(k-a)+w*(i-s))/(-m*j+w*P))>=0&&I<=1&&Q>=0&&Q<=1?[k+Q*w,i+Q*j]:null)}function Ot(k,i,n,r,a,s,v,p,w,j){var m=kt(s,v,p,w,j),P=[];if(n[0]&&!n[1])P.push(Pt(k,i,r,a,s,v,j)),P.push(zt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),P.push(zt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),(I=Dt(k,i,r,a,p,w,j))&&P.push(I[0],I[1]);else if(!n[0]&&n[1])P.push(Pt(k,i,r,a,p,w,j)),P.push(zt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),P.push(zt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),(I=Dt(k,i,r,a,s,v,j))&&P.push(I[0],I[1]);else if(n[0]&&n[1])P.push(Pt(k,i,r,a,s,v,j)),P.push(zt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),P.push(zt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1])),P.push(Pt(k,i,r,a,p,w,j));else{var I=Dt(k,i,r,a,p,w,j),Q=Dt(k,i,r,a,s,v,j);I&&P.push(I[0],I[1]),Q&&P.push(Q[0],Q[1]),P.push(zt(k,i,r,a,m[0][0],m[0][1],m[3][0],m[3][1])),P.push(zt(k,i,r,a,m[1][0],m[1][1],m[2][0],m[2][1]))}for(var q=[k,i],X=0;X<P.length;X++)P[X]&&d(P[X][0],P[X][1],r,a)<d(q[0],q[1],r,a)&&(q=P[X]);return q[0]===k&&q[1]===i?null:q}function wt(k,i,n,r,a,s,v,p,w){var j=kt(a,s,v,p,w),m=[],P=Dt(k,i,n,r,a,s,w);P&&m.push(P[0],P[1]),(P=Dt(k,i,n,r,v,p,w))&&m.push(P[0],P[1]),m.push(zt(k,i,n,r,j[0][0],j[0][1],j[3][0],j[3][1])),m.push(zt(k,i,n,r,j[1][0],j[1][1],j[2][0],j[2][1]));for(var I=[n,r],Q=[k,i],q=0;q<m.length;q++)m[q]&&d(m[q][0],m[q][1],k,i)<d(I[0],I[1],k,i)&&(I=m[q]);for(var X=0;X<m.length;X++)m[X]&&d(m[X][0],m[X][1],n,r)<d(Q[0],Q[1],n,r)&&(Q=m[X]);return I[0]===n&&I[1]===r||Q[0]===k&&Q[1]===i?null:[I,Q]}var $t=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},ve=function(k,i,n){var r=[i[0]-k[0],i[1]-k[1]],a=$t(r);if(a<1e-6)return k;var s=[n[0]-k[0],n[1]-k[1]],v=(r[0]*s[0]+r[1]*s[1])/a;return v<0?k:v>a?i:[k[0]+r[0]*v/a,k[1]+r[1]*v/a]};class H{constructor(){let{element:r,size:s}=(0,Et.G)(Math.ceil(1e9*Math.random()));(0,O.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:j=>{v=`M ${j.x} ${j.y} L ${j.x} ${j.y}`},move:(j,m)=>{((j,m)=>{v+=` ${j} ${m}`,r.setAttribute("d",v)})(j.x,j.y)},end:(j,m)=>{r.remove(),(j=>{let m=9999,P=9999,I=-9999,Q=-9999;j.forEach(X=>{m=Math.min(m,X[0]),P=Math.min(P,X[1]),I=Math.max(I,X[0]),Q=Math.max(Q,X[1])}),s=(0,U.bH)(m,P,I,Q,{points:j}),mt.data.getNodeInArea(0,0,1920,1920,T.$.PATH).forEach(X=>{let oe=((k,i,n)=>{n=n||20;var r=[],a=function(m){var P=i[0][0],I=i[0][1],Q=0,q=0;if(1!==m.length||J(m[0][0],m[0][1],P,I,n)){for(var X;Q<m.length-1;){var Ut=m[Q],oe=m[Q+1],fe=J(Ut[0],Ut[1],P,I,n),ye=J(oe[0],oe[1],P,I,n);if(fe&&ye)q=++Q;else if(fe&&!ye)(be=Pt(Ut[0],Ut[1],oe[0],oe[1],P,I,n))?(m[Q]=be,q=Q):Q++;else if(!fe&&ye){var be;(be=Pt(oe[0],oe[1],Ut[0],Ut[1],P,I,n))&&((X=m.slice(q,Q+1)).push(be),r.push(X)),q=++Q}else{var pe=Dt(Ut[0],Ut[1],oe[0],oe[1],P,I,n);pe?(((X=m.slice(q,Q+1))[X.length-1][0]!==pe[0][0]||X[X.length-1][1]!==pe[0][1])&&X.push(pe[0]),X.length>1&&r.push(X),m[Q]=pe[1],m[Q+1]&&m[Q+1][0]==pe[1][0]&&m[Q+1][1]==pe[1][1]&&Q++,q=Q):Q++}}q!==Q&&(X=m.slice(q,m.length))&&r.push(X)}else r.push(m)},s=function(m,P){var oe,I=i[P],Q=i[P+1],q=0,X=0;if(1!==m.length||-1!==(Ut=ft(m[0][0],m[0][1],I[0],I[1],Q[0],Q[1],n)).indexOf(1)){for(;q<m.length-1;){var fe=m[q],ye=m[q+1],Ut=ft(fe[0],fe[1],I[0],I[1],Q[0],Q[1],n),be=ft(ye[0],ye[1],I[0],I[1],Q[0],Q[1],n);if(-1!==Ut.indexOf(1)&&-1!==be.indexOf(1))X=++q;else if(-1!==Ut.indexOf(1)&&-1===be.indexOf(1))(pe=Ot(fe[0],fe[1],Ut,ye[0],ye[1],I[0],I[1],Q[0],Q[1],n))?(m[q]=pe,X=q):q++;else if(-1===Ut.indexOf(1)&&-1!==be.indexOf(1)){var pe;(pe=Ot(ye[0],ye[1],be,fe[0],fe[1],I[0],I[1],Q[0],Q[1],n))?((oe=m.slice(X,q+1)).push(pe),r.push(oe),X=++q):q++}else{var Oe=wt(fe[0],fe[1],ye[0],ye[1],I[0],I[1],Q[0],Q[1],n);Oe?(((oe=m.slice(X,q+1))[oe.length-1][0]!==Oe[0][0]||oe[oe.length-1][1]!==Oe[0][1])&&oe.push(Oe[0]),oe.length>1&&r.push(oe),m[q]=Oe[1],m[q+1]&&m[q+1][0]==Oe[1][0]&&m[q+1][1]==Oe[1][1]&&q++,X=q):q++}}X!==q&&(oe=m.slice(X,m.length))&&r.push(oe)}else r.push(m)};if(i=function F(k){var i=[];if(1===k.length)i=k;else{for(var n=0;n<k.length-1;)(k[n][0]!==k[n+1][0]||k[n][1]!==k[n+1][1])&&i.push(k[n]),n++;0!==k.length&&0===i.length&&i.push(k[0]),(k[k.length-1][0]!==k[i.length-1][0]||k[k.length-1][1]!==k[i.length-1][1])&&i.push(k[n])}return i}(i),1===i.length){for(var v=0;v<k.length;v++)a(k[v]);k=r}else for(var p=0;p<i.length-1;p++){for(v=0;v<k.length;v++)s(k[v],p);k=r,r=[]}for(var w=0;w<k.length;w++)for(var j=0;j<k[w].length;j++)k[w][j][0]=Math.round(k[w][j][0]),k[w][j][1]=Math.round(k[w][j][1]);return k})(mt.data.getNode(X).size.points,j,2);console.log(oe)})})(m)}}}}var V=f(1105);class ot{constructor(){let i=(0,O.g1)(st.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s,source:v}=(0,V.$)(Math.ceil(1e9*Math.random())),p=(w,j,m,P)=>{s=(0,U.bH)(w,j,m,P),s.x=(0,K.q)(s.x),s.y=(0,K.q)(s.y),s.width=(0,K.q)(s.width),s.height=(0,K.q)(s.height),Object.assign(a,(0,U.sg)(T.$.TEXT,s)),(0,O.__)(r,a),(0,O.g$)(i,s)};return{start:w=>{p(w.x,w.y,w.x+s.width,w.y+s.height)},move:(w,j)=>{p(j[0][0],j[0][1],w.x,w.y)},end:(w,j)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.TEXT,name:"Text"},{size:s,attribute:a,source:v}):null==r||r.remove(),null==i||i.remove()}}}}var W=f(4113),dt=f(9125),vt=f(7797);var Tt=f(6358);class Wt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>mt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,s,v;null===(n=window.document.getElementById(st.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(st.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(st.O.SCAN_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(st.O.CREATE_GROUP))||void 0===s||s.remove(),null===(v=window.document.getElementById(st.O.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=mt.data.deleteNode(i);mt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}mt.dataSelect.ids=[]}groupNode(){let i=[];if(mt.dataSelect.ids.length>=2){let n=mt.data.getNode(mt.dataSelect.ids[0]),{nodeId:r,attribute:a,size:s}=(0,Tt.m)(Math.ceil(1e9*Math.random()),void 0,n.pid);mt.data.node=Object.assign({id:r,type:T.$.GROUP,name:"G"},{size:s,attribute:a});for(let v of mt.dataSelect.ids)i.push(mt.data.addGroup(v,r))}if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,E.y)(n[0]):n.length>1&&(0,y.Q)(n)}}ungroupNode(){let i=[];for(let n of mt.dataSelect.ids)i.push(mt.data.unGroup(n));if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,E.y)(n[0]):n.length>1&&(0,y.Q)(n)}}}var ie=f(9942);class Gt{createNodeImage(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,it.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,ie.I)(i)}}),j=1;(I=>{if(!I)return;let Q=new Image;Q.onload=()=>{var q;j=(0,K.q)(Q.naturalHeight/Q.naturalWidth,100);let X=(null===(q=mt.data.slide)||void 0===q||null===(q=q.svg)||void 0===q?void 0:q.viewBox)||{x:0,y:0,width:100,height:100};((I,Q,q,X)=>{v=(0,U.bH)(I,Q,q,X,{ratio:j}),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,O.__)(s,p)})(X.width/2-Q.naturalWidth/2,X.height/2-Q.naturalHeight/2,X.width/2+Q.naturalWidth/2,X.height/2+Q.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w})},Q.onerror=q=>{console.error(`ImgSrc load failed -> ${I}`,q)},Q.src=I})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}createNodeIframe(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Kt.e)(Math.ceil(1e9*Math.random()),{style:{},source:{type:"iframe",iframe:(0,ie.I)(i)}});(m=>{let P=(null===(m=mt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,P,I,Q)=>{a=(0,U.bH)(m,P,I,Q),Object.assign(s,(0,U.sg)(T.$.IMAGE,a)),(0,O.__)(r,s)})(P.width/2-a.width/2,P.height/2-a.height/2,P.width/2+a.width/2,P.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeEmbed(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,Kt.e)(Math.ceil(1e9*Math.random()),{size:{x:0,y:0,width:640,height:360},style:{},source:{type:"embed",embed:Object.assign(i,(0,ie.I)(i))}});(m=>{let P=(null===(m=mt.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)||{x:0,y:0,width:100,height:100};((m,P,I,Q)=>{a=(0,U.bH)(m,P,I,Q),Object.assign(s,(0,U.sg)(T.$.IMAGE,a)),(0,O.__)(r,s)})(P.width/2-a.width/2,P.height/2-a.height/2,P.width/2+a.width/2,P.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeMedia(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:w}=(0,it.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,ie.I)(i.cover)}}),j={click:{media:i.media}},m=1;(Q=>{if(!Q)return;let q=new Image;q.onload=()=>{var X;m=(0,K.q)(q.naturalHeight/q.naturalWidth,100);let Ut=(null===(X=mt.data.slide)||void 0===X||null===(X=X.svg)||void 0===X?void 0:X.viewBox)||{x:0,y:0,width:100,height:100};((Q,q,X,Ut)=>{v=(0,U.bH)(Q,q,X,Ut,{ratio:m}),Object.assign(p,(0,U.sg)(T.$.IMAGE,v)),(0,O.__)(s,p)})(Ut.width/2-q.naturalWidth/2,Ut.height/2-q.naturalHeight/2,Ut.width/2+q.naturalWidth/2,Ut.height/2+q.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:w,interactive:j})},q.onerror=X=>{console.error(`ImgSrc load failed -> ${Q}`,X)},q.src=Q})(null!==(n=null===(r=w.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}insert(i){var n;if(mt.data.insertSlide(mt.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,Kt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});mt.data.node=Object.assign({id:r,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}if(i.description){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,Kt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});mt.data.node=Object.assign({id:r,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:s}=(0,ct.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});mt.data.node=Object.assign({id:r,type:T.$.RECT,name:"Rect"},{size:a,attribute:s})})(),(r=>{let{nodeId:a,size:s,attribute:v,style:p,source:w}=(0,Kt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});mt.data.node=Object.assign({id:a,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:s,attribute:v,style:p,source:w})})())}}var Qt=f(5226);class Yt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:mt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((s,v)=>v==this._slideIdx),r=null==n?void 0:n.svg,a=s=>{let v=[];return s.filter(p=>!p.isdeleted).forEach(p=>{p.type==T.$.GROUP?v=v.concat(a(p.nodes||[])):v.push(p.id)}),v};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=T.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,s,v,p,w,j,m,P;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(s=r.svg)||void 0===s||s.nodes.forEach(I=>{var Q,q,X,Ut,oe,fe,ye,be,pe,Oe;n.push(null===(Q=I.source)||void 0===Q||null===(Q=Q.image)||void 0===Q?void 0:Q.path),n.push(null===(q=I.source)||void 0===q||null===(q=q.audio)||void 0===q?void 0:q.path),n.push(null===(X=I.source)||void 0===X||null===(X=X.video)||void 0===X?void 0:X.path),n.push(null===(Ut=I.source)||void 0===Ut||null===(Ut=Ut.file)||void 0===Ut?void 0:Ut.path),n.push(null===(oe=I.source)||void 0===oe||null===(oe=oe.iframe)||void 0===oe?void 0:oe.path),n.push(null===(fe=I.source)||void 0===fe||null===(fe=fe.track)||void 0===fe?void 0:fe.path),n.push(null===(ye=I.interactive)||void 0===ye||null===(ye=ye.show)||void 0===ye||null===(ye=ye.audio)||void 0===ye||null===(ye=ye.source)||void 0===ye?void 0:ye.path),n.push(null===(be=I.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.audio)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),n.push(null===(pe=I.interactive)||void 0===pe||null===(pe=pe.click)||void 0===pe||null===(pe=pe.image)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),n.push(null===(Oe=I.interactive)||void 0===Oe||null===(Oe=Oe.click)||void 0===Oe||null===(Oe=Oe.video)||void 0===Oe||null===(Oe=Oe.source)||void 0===Oe?void 0:Oe.path)}),n.push(null===(v=r.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(w=r.test)||void 0===w||null===(w=w.effecttrue)||void 0===w?void 0:w.path),n.push(null===(j=r.test)||void 0===j||null===(j=j.effectfalse)||void 0===j?void 0:j.path),n.push(null===(m=r.test)||void 0===m||null===(m=m.icontrue)||void 0===m?void 0:m.path),n.push(null===(P=r.test)||void 0===P||null===(P=P.iconfalse)||void 0===P?void 0:P.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,s)=>s.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,O.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(w=>!w.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,w;return v.type!=T.$.GROUP||(null!==(p=null===(w=v.nodes)||void 0===w?void 0:w.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,O.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}openSlide(i,n){var r,a,s,v;if(i)for(let P=0,I=null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0;P<I;P++){var p,w,j;if((null!==(j=this._dataSource.slides)&&void 0!==j?j:[])[P].id==i){this._slideIdx=P;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var m;this._slideIdx=0,null!==(m=this._dataSource.slides)&&void 0!==m&&m.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,O.wM)(),(0,Qt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==s?s:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,s,v,p,w;let j=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.find(I=>I.id==i))&&void 0!==a?a:this._defaultSlide,m=(null!==(v=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(j))&&void 0!==v?v:0)+n;var P;r?(r.id=this.newSlideId,r.code=void 0,r.name="Trang m\u1edbi",null!==(P=r.svg)&&void 0!==P&&P.viewBox||r.svg&&(r.svg.viewBox=mt.screen.frameSize)):r=this._defaultSlide,null===(w=this._dataSource.slides)||void 0===w||w.splice(m,0,r),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,s,v,p,w;let j=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(I=>I.id==i))&&void 0!==n?n:this._defaultSlide,m=(null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(j))&&void 0!==a?a:0)+1,P=Object.assign(JSON.parse(JSON.stringify(j)),{id:this.newSlideId,code:void 0,name:`${j.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(m,0,P),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var r,a,s,v,p,w;let j=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(P=>P.id==i))&&void 0!==r?r:this._defaultSlide,m=null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(j))&&void 0!==s?s:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(m+n,0,null===(w=this._dataSource.slides)||void 0===w?void 0:w.splice(m,1)[0])}deleteSlide(i){var n,r,a,s,v,p;let w=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(I=>I.id==i))&&void 0!==n?n:this._defaultSlide,j=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(w))&&void 0!==a?a:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(j,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(j<this._slideIdx){var m,P;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(P=this._dataSource.slides)||void 0===P?void 0:P.length)&&void 0!==m?m:0,this.slide)}else j==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,s,v;let p=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(j=>j.id==i))&&void 0!==n?n:this._defaultSlide,w=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(p))&&void 0!==a?a:0;if(p.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(j=>!j.isdeleted))&&void 0!==v&&v.length){let j=!0;for(;p.isdeleted;)j?w++:w--,this._dataSource.slides[w]?p=this._dataSource.slides[w]:j=!j;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(s=>s(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((v,p)=>p==this._slideIdx),s=null==a?void 0:a.svg;null!=s&&s.nodes&&(null==s||s.nodes.push(i)),mt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((I,Q)=>Q==this._slideIdx),a=null==r?void 0:r.svg,s=(I,Q)=>{let q=null==I?void 0:I.find(oe=>oe.id==i);if(q)return q.pid=Q,q;let X=0,Ut=I.length||0;for(;X<Ut&&!q&&(q=s(I[X].nodes||[],I[X].id),!q);)X++;return q},v=s((null==a?void 0:a.nodes)||[]);var p,w,j,m,P;return v?(v.style=null!==(p=v.style)&&void 0!==p?p:{},v.source=null!==(w=v.source)&&void 0!==w?w:{},v.animate=null!==(j=v.animate)&&void 0!==j?j:{},v.interactive=null!==(m=v.interactive)&&void 0!==m?m:{},v.variable=null!==(P=v.variable)&&void 0!==P?P:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,w)=>w==this._slideIdx),a=null==r?void 0:r.svg,v=p=>{let w=(null==p?void 0:p.find(q=>q.id==i))||(p=>{let w=null,j=0,m=p.length||0;for(;j<m&&!w;){if(w=v(p[j].nodes),w){w.pid=p[j].id;break}j++}var P,I,Q,q,X;return w&&(w.style=null!==(P=w.style)&&void 0!==P?P:{},w.source=null!==(I=w.source)&&void 0!==I?I:{},w.animate=null!==(Q=w.animate)&&void 0!==Q?Q:{},w.interactive=null!==(q=w.interactive)&&void 0!==q?q:{},w.variable=null!==(X=w.variable)&&void 0!==X?X:{}),w})((null==p?void 0:p.filter(q=>q.type==T.$.GROUP))||[]);var j,m,P,I,Q;return w&&(w.style=null!==(j=w.style)&&void 0!==j?j:{},w.source=null!==(m=w.source)&&void 0!==m?m:{},w.animate=null!==(P=w.animate)&&void 0!==P?P:{},w.interactive=null!==(I=w.interactive)&&void 0!==I?I:{},w.variable=null!==(Q=w.variable)&&void 0!==Q?Q:{}),w};return v((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,P)=>P==this._slideIdx),w=null==p?void 0:p.svg,j=m=>{let P=[];return m.filter(I=>!I.isdeleted).forEach(I=>{I.type==T.$.GROUP?P=P.concat(j(I.nodes||[])):i>I.size.x||n>I.size.y||r<I.size.x+I.size.width||a<I.size.y+I.size.height||(s?I.type==s&&P.push(I.id):P.push(I.id))}),P};return j((null==w?void 0:w.nodes)||[])}getNodeOnArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((m,P)=>P==this._slideIdx),w=null==p?void 0:p.svg,j=m=>{let P=[];return m.filter(I=>!I.isdeleted).forEach(I=>{I.type==T.$.GROUP?P=P.concat(j(I.nodes||[])):I.size.x+I.size.width<i||I.size.y+I.size.height<n||I.size.x>r||I.size.y>a||(s?I.type==s&&P.push(I.id):P.push(I.id))}),P};return j((null==w?void 0:w.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),s=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:s})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),s}addGroup(i,n){var r;let a=this.getNode(i),s=this.getNode(n);s.nodes=s.nodes||[];let v=Math.ceil(1e9*Math.random());return s.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:v})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),v}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(s=>s.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let s=i.map(Q=>mt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:w,y2:j}=ce(s),m=this.getNodeOnArea(v,p,w,j);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,q)=>{Q.idx=q+1});let P=m.map(Q=>{var q,X;return null!==(q=null===(X=this.slide)||void 0===X||null===(X=X.svg)||void 0===X||null===(X=X.nodes.find(Ut=>Ut.id==Q))||void 0===X?void 0:X.idx)&&void 0!==q?q:0}),I=Math.max.apply(null,P);i.forEach((Q,q)=>{var X;null===(X=this.slide)||void 0===X||null===(X=X.svg)||void 0===X||X.nodes.filter(Ut=>Ut.id==Q).forEach(Ut=>{Ut.idx=I+(q+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,q)=>{var X,Ut;return(null!==(X=Q.idx)&&void 0!==X?X:0)-(null!==(Ut=q.idx)&&void 0!==Ut?Ut:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(st.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}sendToBack(i){var n,r,a;let s=i.map(Q=>mt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:w,y2:j}=ce(s),m=this.getNodeOnArea(v,p,w,j);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,q)=>{Q.idx=q+1});let P=m.map(Q=>{var q,X;return null!==(q=null===(X=this.slide)||void 0===X||null===(X=X.svg)||void 0===X||null===(X=X.nodes.find(Ut=>Ut.id==Q))||void 0===X?void 0:X.idx)&&void 0!==q?q:0}),I=Math.min.apply(null,P)-1;i.forEach((Q,q)=>{var X;null===(X=this.slide)||void 0===X||null===(X=X.svg)||void 0===X||X.nodes.filter(Ut=>Ut.id==Q).forEach(Ut=>{Ut.idx=I+(q+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,q)=>{var X,Ut;return(null!==(X=Q.idx)&&void 0!==X?X:0)-(null!==(Ut=q.idx)&&void 0!==Ut?Ut:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(st.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}}const ce=k=>{let i=999999,n=999999,r=-999999,a=-999999;return k.forEach(s=>{i=Math.min(i,s.size.x),n=Math.min(n,s.size.y),r=Math.max(r,s.size.x+s.size.width),a=Math.max(a,s.size.y+s.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class le{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":mt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:s,attribute:v}=mt.data.getNode(n.from.id);Object.assign(s,n.from.size),Object.assign(v,(0,U.sg)(a,s)),(0,O.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=mt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,O.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=mt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,O.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=mt.data.getNode(n.from.id);Object.assign(null!=s?s:{},n.from.source),(0,O.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),mt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":mt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:s,attribute:v}=mt.data.getNode(n.to.id);Object.assign(s,n.to.size),Object.assign(v,(0,U.sg)(a,s)),(0,O.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=mt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,O.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=mt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,O.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=mt.data.getNode(n.to.id);Object.assign(null!=s?s:{},n.to.source),(0,O.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),mt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class ae{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var s={x:Math.max(0,Math.min((0,K.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,K.q)(n.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*s.x,y:(this._height/i-this._height/this._scale)*s.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,O.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var me=f(644);class qe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=null,this._fontSize=20,this._textLength=null,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,me.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,me.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var We=f(1690),ni=f(5973),ri=f(4787),Me=function(k){return k&&JSON.parse(JSON.stringify(k))},Ue=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ve=[],ai={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},oi={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ti{constructor(){this._data_variables=Me(Ue).concat(Me(Ve)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Me(Ue).concat(Me(Ve)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),Ue.forEach(r=>{var a=this._data_variables.filter(s=>s.key==r.key);a.length?a.forEach(function(s,v,p){s.type=r.type,s.readonly=r.readonly,s.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Me(ai)}getConditionTemp(){return Me(oi)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Me((k=this._data_variables,i="key",function(n){for(var r of k.map(function(a){return a[i]}).sort())k.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),k=k.filter(function(a){return a[i]!=r});return n}([]))):Me(Ue).concat(Me(Ve));var k,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ue.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,s,v)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(s=>s.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(s=>s.key==i);a.length?a.forEach(function(s,v,p){s.value=n,s.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(v){return v.key==i});if(r.length){var s,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?s=!1:"boolean"==typeof a.value?s=a.value:(s=(a.value+"").toLowerCase(),s="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),s}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(v){return v.key==i});if(a.length){var s=a[0];this.OnSetActionExecuting(s),s&&(s.value=n),this.OnSetActionExecuted(s)}}}getConditionAll(){return Me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,s){return a+s});case"sub":return n.reduce(function(a,s){return a-s});case"pro":return n.reduce(function(a,s){return a*s});case"div":return n.reduce(function(a,s){return a/s});case"avg":var r=n.reduce(function(a,s){return a+s})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,s){return a&&s});case"or":return n.reduce(function(a,s){return a||s});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Me(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Me(n),{variable:r})));break;case"slide":We.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ri.L5)({id:n.node,nodeStatus:We.$.nodeStatus,slideStatus:We.$.slideStatus});let s=We.$.findNode(n.node);null!=s&&null!==(a=s.interactive)&&void 0!==a&&a.click&&(0,ni.F)(s,We.$.nodeStatus,We.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ze{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case D._.PEN:this._pen_type=n;break;case D._.SHAPE:this._shape_type=n,r&&n===T.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const mt=new class si{constructor(){this._container="",this._svg="",this._screen=ae.prototype,this._data=Yt.prototype,this._dataSelect=Wt.prototype,this._slide=Gt.prototype,this._history=le.prototype,this._attribute=qe.prototype,this._pointer=Ze.prototype,this._variable=ti.prototype,this._data=new Yt,this._dataSelect=new Wt,this._slide=new Gt,this._history=new le,this._attribute=new qe,this._pointer=new Ze,this._variable=new ti,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,s;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(s=null==i?void 0:i.top)&&void 0!==s?s:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new ae,(k=>{new O.Mh(k.container,k.target),mt.pointer.onchange=(r,a,s)=>{switch(r){case D._.POINTER:jQuery(k.target).css({cursor:"auto"});break;case D._.HAND:jQuery(k.target).css({cursor:"grab"});break;case D._.PEN:switch(a){case dt.D.DRAW:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case dt.D.HIGHTLIGH:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case D._.ERASER:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case D._.SHAPE:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case D._.TEXT:case D._.FOREIGNOBJECT:jQuery(k.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(k.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{mt.pointer.pointer_type==D._.HAND&&jQuery(k.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{mt.pointer.pointer_type==D._.HAND&&jQuery(k.target).css({cursor:"grab"})}),jQuery(k.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var s=mt.screen.scale,v=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;mt.screen.scaleTo(s-.04*s*v,(0,vt.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},mt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{mt.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(k.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{mt.screen.actived=!0}),jQuery(k.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{mt.screen.actived=!1}),jQuery(k.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(k.container.includes("#")&&k.container.includes(r.target.getAttribute("id"))||k.container.includes(".")&&k.container.includes(r.target.getAttribute("class"))||k.container.includes(r.target.nodeName))&&(mt.pointer.pointer_type_temp||mt.pointer.pointer_type)===D._.POINTER&&(mt.dataSelect.ids=[])}),jQuery(k.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(mt.pointer.pointer_type_temp||mt.pointer.pointer_type){case D._.POINTER:z(r);break;case D._.HAND:(k=>{(0,h.A)(k,new Y,1,{x:0,y:0})})(r);break;case D._.PEN:(0,pt.i)(r);break;case D._.SHAPE:(k=>{var i=null;switch(mt.pointer.shape_type){case T.$.CIRCLE:i=new et;break;case T.$.ELLIPSE:i=new _t;break;case T.$.LINE:i=new jt;break;case T.$.RECT:i=new rt;break;case T.$.POLYGON:var n;i=new Rt(null===(n=G.find(r=>r.type==mt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case T.$.FOREIGNOBJECT:i=new ut;break;case T.$.IMAGE:i=new bt;break;case T.$.TEXT:case T.$.PATH:i=new Zt}i&&(0,h.A)(k,i)})(r);break;case D._.FOREIGNOBJECT:(k=>{(0,h.A)(k,new ut)})(r);break;case D._.IMAGE:(k=>{(0,h.A)(k,new bt)})(r);break;case D._.TEXT:(k=>{(0,h.A)(k,new ot)})(r);break;case D._.ERASER:(k=>{(0,h.A)(k,new H)})(r);break;case D._.INDEX:(0,W.s)(r)}};let n=!1;jQuery(k.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(k.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),k.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{mt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Xt.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{mt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Xt.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(he,At,f)=>{f.d(At,{s:()=>y,Q:()=>b});var D=f(1687),O=f(4981),st=f(4318),T=f(6816),U=f(4080);const y=z=>{var S,Y;let C=(null===(S=z.mouseEvent)||void 0===S?void 0:S.target)||(null===(Y=z.touchEvent)||void 0===Y?void 0:Y.target),G=(null==C?void 0:C.getAttribute("id"))||"",at=null==C?void 0:C.nodeName,K=jQuery(C).parents("g[id]").attr("id")||"";if(![D.O.INDEX_GROUP].includes(K))if(G&&!G.match(/[^0-9]/)&&O.icdt.dataSelect.nodeName.includes(at)){var gt,_t;let ct=parseFloat(G||"0");O.icdt.dataSelect.ids=null!==(gt=z.mouseEvent)&&void 0!==gt&&gt.shiftKey||null!==(_t=z.touchEvent)&&void 0!==_t&&_t.shiftKey?[ct].concat(O.icdt.dataSelect.ids).filter((L,Rt,Ht)=>Ht.indexOf(L)==Rt):[ct],R(O.icdt.dataSelect.nodes)}else{var et;O.icdt.dataSelect.ids.length&&(O.icdt.dataSelect.ids=[]),(0==(null===(et=z.mouseEvent)||void 0===et?void 0:et.button)||z.touchEvent)&&((z,S)=>{let K=(0,U.g1)(D.O.SCAN_GROUP,"g"),et=(0,st.bH)(0,0,1,1);(0,U.vl)(K,et),((z,S,Y,C)=>{(0,T.A)(z,{start:K=>{},move:(K,et)=>{((K,et,gt,_t)=>{S=(0,st.bH)(K,et,gt,_t),(0,U.vl)(Y,S)})(et[0][0],et[0][1],K.x,K.y)},end:(K,et)=>{null==Y||Y.remove(),O.icdt.dataSelect.ids=O.icdt.data.getNodeInArea(Math.min(et[0][0],K.x),Math.min(et[0][1],K.y),Math.max(et[0][0],K.x),Math.max(et[0][1],K.y)),C(O.icdt.dataSelect.nodes)}})})(z,et,K,S)})(z,R)}},R=z=>{var S,Y;let C=1;var G,at;if(z.length&&(C=Math.max.apply(null,null!==(G=null===(at=O.icdt.data.slide)||void 0===at||null===(at=at.svg)||void 0===at?void 0:at.nodes.map(et=>{var gt;return null!==(gt=et.idx)&&void 0!==gt?gt:0}))&&void 0!==G?G:[0])+1),1==z.length)z[0].idx||(z[0].idx=C,z[0].time=0);else if(z.length>=0){let et=z.map(_t=>{var ct;return null!==(ct=_t.idx)&&void 0!==ct?ct:0}).filter(_t=>_t>0),gt=et.length?Math.min.apply(null,et):C;z.forEach(_t=>{var ct;_t.idx=gt,_t.time=null!==(ct=_t.time)&&void 0!==ct?ct:0})}let K=(0,U.g1)(D.O.INDEX_GROUP,"g");(0,U.mo)(K,null!==(S=null===(Y=O.icdt.data.slide)||void 0===Y||null===(Y=Y.svg)||void 0===Y?void 0:Y.nodes)&&void 0!==S?S:[])},b=z=>{var S,Y,C;null!=z&&null!==(S=z.svg)&&void 0!==S&&S.nodes&&z.svg.nodes.forEach(at=>{at.idx=0});let G=(0,U.g1)(D.O.INDEX_GROUP,"g");(0,U.mo)(G,null!==(Y=null===(C=O.icdt.data.slide)||void 0===C||null===(C=C.svg)||void 0===C?void 0:C.nodes)&&void 0!==Y?Y:[])}},4578:(he,At,f)=>{f.d(At,{h:()=>S,t:()=>Y});var D=f(644),O=f(7308),st=f(968),T=f(4981),U=f(666),h=f(2966),E=f(5226),y=f(3423),R=f(5811),b=f(3385);const S=new class z{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:O.s.Escape,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:O.s.Delete,fn:()=>{T.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:O.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=st._.HAND}},this.onchange={type:"keyup",key:O.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=st._.POINTER}},this.onchange={type:"keydown",key:O.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.backSlide()}},this.onchange={type:"keydown",key:O.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:O.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(G=>{(0,b.k6)(G,(0,R.q)(G.size.x-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(G=>{(0,b.k6)(G,(0,R.q)(G.size.x+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.s.ArrowUp,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(G=>{(0,b.co)(G,(0,R.q)(G.size.y-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.s.ArrowDown,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(G=>{(0,b.co)(G,(0,R.q)(G.size.y+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,U.y)(T.icdt.dataSelect.nodes[0]):(0,h.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.s.Digit1,fn:G=>{G.shiftKey&&(T.icdt.reloadView(),T.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:O.s.KeyA,fn:G=>{if(G.ctrlKey){T.icdt.dataSelect.ids=T.icdt.data.getNodeAll();let at=T.icdt.dataSelect.nodes;1==at.length?(0,U.y)(at[0]):at.length>1&&(0,h.Q)(at)}}},this.onchange={type:"keydown",key:O.s.KeyC,fn:G=>{if(G.ctrlKey){let at=T.icdt.dataSelect.nodes;at&&(0,D.yR)({params:{type:"nodes",nodes:at}})}}},this.onchange={type:"keydown",key:O.s.KeyV,fn:G=>{G.ctrlKey&&(0,D.aY)({callback:at=>{var K,et;"nodes"==(null==at?void 0:at.type)&&null!=at&&null!==(K=at.nodes)&&void 0!==K&&K.length&&(null==at||null===(et=at.nodes)||void 0===et||et.forEach(gt=>{gt.id=Math.ceil(1e9*Math.random()),T.icdt.data.node=gt}),(0,E.E)(T.icdt.data.slide))}})}},this.onchange={type:"keydown",key:O.s.KeyZ,fn:G=>{G.ctrlKey&&G.shiftKey?T.icdt.history.redo():G.ctrlKey&&T.icdt.history.undo()}}}set onchange(G){let at=this._fnChanges.find(K=>K.eventType==G.type&&K.eventKey==G.key);at?at.fns.push(G.fn):this._fnChanges.push({eventType:G.type,eventKey:G.key,fns:[G.fn]})}change(G,at,K){var et;null===(et=this._fnChanges.find(gt=>gt.eventType==G&&gt.eventKey==at))||void 0===et||et.fns.forEach(gt=>gt(K))}},Y=C=>{S.change(C.type,C.keyCode||C.which||C.charCode||0,C)}},410:(he,At,f)=>{f.d(At,{a:()=>y});var D=f(4318),O=f(8419),st=f(9054),T=f(4080),U=f(511),h=f(3423),E=f(1687);class y{constructor(b){var z;let S={stroke:"#FF0000",strokeWidth:(0,h.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,h.v)(8)},{element:C,attribute:G,size:at}=(0,O.G)(Math.ceil(1e9*Math.random()),{size:b});window.document.getElementById(E.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ct=>null==ct?void 0:ct.remove()),null===(z=window.document.getElementById(E.O.INTERACTIVE_GROUP))||void 0===z||z.appendChild(C),(0,T.__)(C,S);let et="";return{start:ct=>{et=`M ${ct.x} ${ct.y} L ${ct.x} ${ct.y}`},move:(ct,rt)=>{((ct,rt)=>{et+=` ${ct} ${rt}`,C.setAttribute("d",et)})(ct.x,ct.y)},end:(ct,rt)=>{(ct=>{let L=U.jvg().x(Rt=>Rt[0]).y(Rt=>Rt[1]).curve(U.$0Z)(ct);C.setAttribute("d",L),ct.length>=2&&(window.interactivePoints=ct)})(rt),(ct=>{let rt=9999,L=9999,Rt=-9999,Ht=-9999;ct.forEach(jt=>{rt=Math.min(rt,jt[0]),L=Math.min(L,jt[1]),Rt=Math.max(Rt,jt[0]),Ht=Math.max(Ht,jt[1])}),at=(0,D.bH)(rt,L,Rt,Ht,{points:ct}),Object.assign(G,(0,D.sg)(st.$.PATH,at),S)})(rt)}}}}},9623:(he,At,f)=>{f.d(At,{U:()=>C,i:()=>Y});var D=f(1687),O=f(9125),st=f(4981),T=f(6816),U=f(4080),h=f(4318),E=f(8419),y=f(9054),R=f(511);class b{constructor(){let at={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:K,element:et,attribute:gt,size:_t}=(0,E.G)(Math.ceil(1e9*Math.random()));(0,U.__)(et,gt);let rt="";return{start:Ht=>{rt=`M ${Ht.x} ${Ht.y} L ${Ht.x} ${Ht.y}`},move:(Ht,jt)=>{((Ht,jt)=>{rt+=` ${Ht} ${jt}`,et.setAttribute("d",rt)})(Ht.x,Ht.y)},end:(Ht,jt)=>{(Ht=>{let Et=R.jvg().x(Zt=>Zt[0]).y(Zt=>Zt[1]).curve(R.$0Z)(Ht);et.setAttribute("d",Et)})(jt),(Ht=>{let jt=9999,Et=9999,Zt=-9999,Kt=-9999;Ht.forEach(ut=>{jt=Math.min(jt,ut[0]),Et=Math.min(Et,ut[1]),Zt=Math.max(Zt,ut[0]),Kt=Math.max(Kt,ut[1])}),_t=(0,h.bH)(jt,Et,Zt,Kt,{points:Ht}),Object.assign(gt,(0,h.sg)(y.$.PATH,_t),at)})(jt),st.icdt.data.node=Object.assign({id:K,type:y.$.PATH,name:"Path"},{size:_t,attribute:gt})}}}}class z{constructor(){let at={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:K,element:et,attribute:gt,size:_t}=(0,E.G)(Math.ceil(1e9*Math.random()));(0,U.__)(et,gt);let rt="";var L=(Rt,Ht)=>{rt+=` ${Rt} ${Ht}`,et.setAttribute("d",rt)};return{start:Rt=>{rt=`M ${Rt.x} ${Rt.y} L ${Rt.x} ${Rt.y}`},move:(Rt,Ht)=>{L(Rt.x,Rt.y)},end:(Rt,Ht)=>{L(Rt.x,Rt.y),(Rt=>{let Ht=9999,jt=9999,Et=-9999,Zt=-9999;Rt.forEach(Kt=>{Ht=Math.min(Ht,Kt[0]),jt=Math.min(jt,Kt[1]),Et=Math.max(Et,Kt[0]),Zt=Math.max(Zt,Kt[1])}),_t=(0,h.bH)(Ht,jt,Et,Zt,{points:Rt}),Object.assign(gt,(0,h.sg)(y.$.PATH,_t),at)})(Ht),st.icdt.data.node=Object.assign({id:K,type:y.$.PATH,name:"Path"},{size:_t,attribute:gt})}}}}var S=f(410);const Y=G=>{switch(st.icdt.pointer.pen_type){case O.D.DRAW:(0,T.A)(G,new b);break;case O.D.HIGHTLIGH:(0,T.A)(G,new z);break;case O.D.INTERACTIVE:C(G)}},C=G=>{var at,K;let et=(0,U.g1)(D.O.INTERACTIVE_GROUP,"g"),gt=null!==(at=null===(K=st.icdt.data.slide)||void 0===K||null===(K=K.svg)||void 0===K?void 0:K.viewBox)&&void 0!==at?at:(()=>{let{width:_t,height:ct}=st.icdt.screen.get;return{x:0,y:0,width:_t,height:ct}})();(0,U.XH)(et,gt),G&&(0,T.A)(G,new S.a)}},666:(he,At,f)=>{f.d(At,{y:()=>E});var D=f(1687),O=f(4981),st=f(4318),T=f(6816),U=f(4080),h=f(5811);const E=b=>{let z=(0,U.g1)(D.O.RESIZE_GROUP,"g");(0,U.hJ)(z,b).forEach(S=>{y(S.element,S.posType,b,z)})},y=(b,z,S,Y)=>{let C=!1;null==b||b.addEventListener("touchstart",G=>{C=!0,R({touchEvent:G},z,S,Y)}),null==b||b.addEventListener("mousedown",G=>{if(0==G.button){if(C)return void(C=!1);R({mouseEvent:G},z,S,Y)}})},R=(b,z,S,Y)=>{let L,{id:C,type:G,size:at,attribute:K}=S,{x:et,y:gt,width:_t,height:ct}=at,rt=(_t||1)/(ct||1),Ht=null,Zt=!1;(0,T.A)(b,{start:ut=>{Ht=JSON.parse(JSON.stringify({id:C,size:at,attribute:K}))},move:(ut,it)=>{((ut,it,bt,xt)=>{switch(z){case"rect-center":var Xt,pt;L=null!==(Xt=b.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(pt=b.touchEvent)&&void 0!==pt&&pt.shiftKey?Math.abs(bt-ut)>=Math.abs(xt-it)?{x:et+bt-ut,y:gt,width:_t,height:ct}:{x:et,y:gt+xt-it,width:_t,height:ct}:{x:et+bt-ut,y:gt+xt-it,width:_t,height:ct};break;case"rect-top-left":var B,F,d,J,ht,ft,kt,Pt;L=(null!==(B=b.mouseEvent)&&void 0!==B&&B.shiftKey||null!==(F=b.touchEvent)&&void 0!==F&&F.shiftKey)&&(null!==(d=b.mouseEvent)&&void 0!==d&&d.altKey||null!==(J=b.touchEvent)&&void 0!==J&&J.altKey)?rt>=1?{x:et+(bt-ut),y:gt+(bt-ut)/rt,width:_t-2*(bt-ut),height:ct-2*(bt-ut)/rt}:{x:et+(xt-it)*rt,y:gt+(xt-it),width:_t-2*(xt-it)*rt,height:ct-2*(xt-it)}:null!==(ht=b.mouseEvent)&&void 0!==ht&&ht.shiftKey||null!==(ft=b.touchEvent)&&void 0!==ft&&ft.shiftKey?rt>=1?{x:et+(bt-ut),y:gt+(bt-ut)/rt,width:_t-(bt-ut),height:ct-(bt-ut)/rt}:{x:et+(xt-it)*rt,y:gt+(xt-it),width:_t-(xt-it)*rt,height:ct-(xt-it)}:null!==(kt=b.mouseEvent)&&void 0!==kt&&kt.altKey||null!==(Pt=b.touchEvent)&&void 0!==Pt&&Pt.altKey?{x:et+(bt-ut),y:gt+(xt-it),width:_t-2*(bt-ut),height:ct-2*(xt-it)}:{x:et+(bt-ut),y:gt+(xt-it),width:_t-(bt-ut),height:ct-(xt-it)};break;case"rect-top-right":var Dt,zt,Ot,wt,$t,Lt,ve,H;L=(null!==(Dt=b.mouseEvent)&&void 0!==Dt&&Dt.shiftKey||null!==(zt=b.touchEvent)&&void 0!==zt&&zt.shiftKey)&&(null!==(Ot=b.mouseEvent)&&void 0!==Ot&&Ot.altKey||null!==(wt=b.touchEvent)&&void 0!==wt&&wt.altKey)?rt>=1?{x:et-(bt-ut),y:gt-(bt-ut)/rt,width:_t+2*(bt-ut),height:ct+2*(bt-ut)/rt}:{x:et+(xt-it)*rt,y:gt+(xt-it),width:_t-2*(xt-it)*rt,height:ct-2*(xt-it)}:null!==($t=b.mouseEvent)&&void 0!==$t&&$t.shiftKey||null!==(Lt=b.touchEvent)&&void 0!==Lt&&Lt.shiftKey?rt>=1?{x:et,y:gt-(bt-ut)/rt,width:_t+(bt-ut),height:ct+(bt-ut)/rt}:{x:et,y:gt+(xt-it),width:_t-(xt-it)*rt,height:ct-(xt-it)}:null!==(ve=b.mouseEvent)&&void 0!==ve&&ve.altKey||null!==(H=b.touchEvent)&&void 0!==H&&H.altKey?{x:et-(bt-ut),y:gt+(xt-it),width:_t+2*(bt-ut),height:ct-2*(xt-it)}:{x:et,y:gt+(xt-it),width:_t+(bt-ut),height:ct-(xt-it)};break;case"rect-bottom-left":var c,V,ot,Z,x,M,W,dt;L=(null!==(c=b.mouseEvent)&&void 0!==c&&c.shiftKey||null!==(V=b.touchEvent)&&void 0!==V&&V.shiftKey)&&(null!==(ot=b.mouseEvent)&&void 0!==ot&&ot.altKey||null!==(Z=b.touchEvent)&&void 0!==Z&&Z.altKey)?rt>=1?{x:et+(bt-ut),y:gt+(bt-ut)/rt,width:_t-2*(bt-ut),height:ct-2*(bt-ut)/rt}:{x:et-(xt-it)*rt,y:gt-(xt-it),width:_t+2*(xt-it)*rt,height:ct+2*(xt-it)}:null!==(x=b.mouseEvent)&&void 0!==x&&x.shiftKey||null!==(M=b.touchEvent)&&void 0!==M&&M.shiftKey?rt>=1?{x:et+(bt-ut),y:gt,width:_t-(bt-ut),height:ct-(bt-ut)/rt}:{x:et-(xt-it)*rt,y:gt,width:_t+(xt-it)*rt,height:ct+(xt-it)}:null!==(W=b.mouseEvent)&&void 0!==W&&W.altKey||null!==(dt=b.touchEvent)&&void 0!==dt&&dt.altKey?{x:et+(bt-ut),y:gt-(xt-it),width:_t-2*(bt-ut),height:ct+2*(xt-it)}:{x:et+(bt-ut),y:gt,width:_t-(bt-ut),height:ct+(xt-it)};break;case"rect-bottom-right":var vt,Ct,Tt,Wt,ie,Gt,Qt,Yt;L=(null!==(vt=b.mouseEvent)&&void 0!==vt&&vt.shiftKey||null!==(Ct=b.touchEvent)&&void 0!==Ct&&Ct.shiftKey)&&(null!==(Tt=b.mouseEvent)&&void 0!==Tt&&Tt.altKey||null!==(Wt=b.touchEvent)&&void 0!==Wt&&Wt.altKey)?rt>=1?{x:et-(bt-ut),y:gt-(bt-ut)/rt,width:_t+2*(bt-ut),height:ct+2*(bt-ut)/rt}:{x:et-(xt-it)*rt,y:gt-(xt-it),width:_t+2*(xt-it)*rt,height:ct+2*(xt-it)}:null!==(ie=b.mouseEvent)&&void 0!==ie&&ie.shiftKey||null!==(Gt=b.touchEvent)&&void 0!==Gt&&Gt.shiftKey?rt>=1?{x:et,y:gt,width:_t+(bt-ut),height:ct+(bt-ut)/rt}:{x:et,y:gt,width:_t+(xt-it)*rt,height:ct+(xt-it)}:null!==(Qt=b.mouseEvent)&&void 0!==Qt&&Qt.altKey||null!==(Yt=b.touchEvent)&&void 0!==Yt&&Yt.altKey?{x:et-(bt-ut),y:gt-(xt-it),width:_t+2*(bt-ut),height:ct+2*(xt-it)}:{x:et,y:gt,width:_t+(bt-ut),height:ct+(xt-it)};break;default:L={x:et+bt-ut,y:gt+xt-it,width:_t,height:ct}}L.width<0&&(L.width=0),L.height<0&&(L.height=0),L.x=(0,h.q)(L.x),L.y=(0,h.q)(L.y),L.width=(0,h.q)(L.width),L.height=(0,h.q)(L.height),Object.assign(at,L),Object.assign(K,(0,st.sg)(G,at)),(0,U.__)(window.document.getElementById(C),K),(0,U.hJ)(Y,S)})(it[0][0],it[0][1],ut.x,ut.y),Zt=!0},end:(ut,it)=>{Zt&&Ht&&O.icdt.history.push([{type:"size",from:Ht,to:JSON.parse(JSON.stringify({id:C,size:at,attribute:K}))}])}})}},2966:(he,At,f)=>{f.d(At,{Q:()=>y});var D=f(1687),O=f(4981),st=f(4318),T=f(6816),U=f(4080),h=f(3423),E=f(5811);const y=z=>{let S=999999,Y=999999,C=-999999,G=-999999;null==z||z.forEach(et=>{S=Math.min(S,et.size.x),Y=Math.min(Y,et.size.y),C=Math.max(C,et.size.x+et.size.width),G=Math.max(G,et.size.y+et.size.height)});let at=(0,U.g1)(D.O.SELECT_GROUP,"g"),K=(0,st.bH)(S,Y,C,G);(0,U.yD)(at,z,K).forEach(et=>{R(et.element,et.posType,K,z,at)})},R=(z,S,Y,C,G)=>{let at=!1;null==z||z.addEventListener("touchstart",K=>{at=!0,b({touchEvent:K},S,Y,C,G)}),null==z||z.addEventListener("mousedown",K=>{if(0==K.button){if(at)return void(at=!1);b({mouseEvent:K},S,Y,C,G)}})},b=(z,S,Y,C,G)=>{let{x:at,y:K,width:et,height:gt}=Y,_t=C.map(jt=>Object.assign({},jt.size)),rt=[];(0,T.A)(z,{start:jt=>{C.forEach((jt,Et)=>{let{id:Zt,size:ut,attribute:it}=jt;rt.push(JSON.parse(JSON.stringify({id:Zt,size:ut,attribute:it})))})},move:(jt,Et)=>{((jt,Et,Zt,Kt)=>{(()=>{let ut;ut="rect-center"===S?{x:at+Zt-jt,y:K+Kt-Et,width:et,height:gt}:{x:at,y:K,width:et,height:gt},(0,h.v)(O.icdt.screen.width),(0,h.v)(O.icdt.screen.height),ut.width<0&&(ut.width=0),ut.height<0&&(ut.height=0),Object.assign(Y,ut),(0,U.yD)(G,C,Y)})(),C.forEach((ut,it)=>{let ht,{x:bt,y:xt,width:Xt,height:pt}=_t[it],{id:B,type:F,size:d,attribute:J}=ut;ht="rect-center"===S?{x:bt+Zt-jt,y:xt+Kt-Et,width:Xt,height:pt}:{x:bt,y:xt,width:Xt,height:pt},(0,h.v)(O.icdt.screen.width),(0,h.v)(O.icdt.screen.height),ht.width<0&&(ht.width=0),ht.height<0&&(ht.height=0),ht.x=(0,E.q)(ht.x),ht.y=(0,E.q)(ht.y),ht.width=(0,E.q)(ht.width),ht.height=(0,E.q)(ht.height),Object.assign(d,ht),Object.assign(J,(0,st.sg)(F,d)),(0,U.__)(window.document.getElementById(B),J)})})(Et[0][0],Et[0][1],jt.x,jt.y)},end:(jt,Et)=>{rt.length&&O.icdt.history.push(C.map((jt,Et)=>{let{id:Zt,size:ut,attribute:it}=jt;return{type:"size",from:rt[Et],to:JSON.parse(JSON.stringify({id:Zt,size:ut,attribute:it}))}}))}})}},5226:(he,At,f)=>{f.d(At,{E:()=>G,T:()=>at});var D=f(1687),O=f(8619),st=f(8785),T=f(2282),U=f(8054),h=f(4921),E=f(6358),y=f(9054),R=f(8419),b=f(1105),z=f(2875),S=f(7210),Y=f(4981),C=f(4080);const G=(K,et)=>{var gt;if(et&&!window.document.getElementById(et))return;if(et){let ct=window.document.getElementById(et);jQuery(ct).find("#"+D.O.BACKGROUND_GROUP).empty();let rt=(0,C.g1)(D.O.BACKGROUND_GROUP,"g",void 0,ct);(0,C.x0)(rt,K)}else{jQuery(Y.icdt.target).find("#"+D.O.BACKGROUND_GROUP).empty();let ct=(0,C.g1)(D.O.BACKGROUND_GROUP,"g",void 0,Y.icdt.target);(0,C.x0)(ct,K)}let _t=(ct,rt)=>{rt=rt?parseFloat(`${et}0${rt}`):et,null==ct||ct.forEach(L=>{let Rt=et?parseFloat(`${et}0${L.id}`):L.id;var Ht;if(L.isdeleted)null===(Ht=window.document.getElementById(Rt))||void 0===Ht||Ht.remove();else switch(L.type){case y.$.GROUP:(0,E.m)(Rt,{},rt),_t(L.nodes,L.id);break;case y.$.CIRCLE:(0,O._)(Rt,{size:L.size,attribute:L.attribute},rt?window.document.getElementById(rt):null);break;case y.$.ELLIPSE:(0,st.r)(Rt,{size:L.size,attribute:L.attribute},rt);break;case y.$.LINE:(0,h.W)(Rt,{size:L.size,attribute:L.attribute},rt);break;case y.$.RECT:(0,U.f)(Rt,{size:L.size,attribute:L.attribute},rt?window.document.getElementById(rt):null);break;case y.$.POLYGON:(0,T.l)(Rt,{size:L.size,attribute:L.attribute},rt);break;case y.$.FOREIGNOBJECT:(0,z.e)(Rt,{size:L.size,attribute:L.attribute,style:L.style,source:L.source},rt?window.document.getElementById(rt):null);break;case y.$.IMAGE:(0,S.G)(Rt,{size:L.size,attribute:L.attribute,source:L.source},rt?window.document.getElementById(rt):null);break;case y.$.TEXT:(0,b.$)(Rt,{size:L.size,attribute:L.attribute,source:L.source},rt);break;case y.$.PATH:(0,R.G)(Rt,{size:L.size,attribute:L.attribute},rt)}})};_t(null==K||null===(gt=K.svg)||void 0===gt?void 0:gt.nodes)},at=(K,et)=>{var gt;if(et&&!window.document.getElementById(et))return;let _t=(ct,rt)=>{rt=rt?parseFloat(`${et}0${rt}`):et,null==ct||ct.forEach(L=>{let Rt=et?parseFloat(`${et}0${L.id}`):L.id;jQuery("#"+Rt).appendTo(rt?window.document.getElementById(rt):Y.icdt.target),L.type==y.$.GROUP&&_t(L.nodes,L.id)})};_t(null==K||null===(gt=K.svg)||void 0===gt?void 0:gt.nodes)}},8619:(he,At,f)=>{f.d(At,{_:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{fill:O.icdt.attribute.fill,stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth};return Object.assign(b,(0,st.sg)(D.$.CIRCLE,R)),{nodeId:h,element:(0,T.it)(h,D.$.CIRCLE,"circle",{size:R,attribute:b},y),size:R,attribute:b}}},8785:(he,At,f)=>{f.d(At,{r:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{fill:O.icdt.attribute.fill,stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth};return Object.assign(b,(0,st.sg)(D.$.ELLIPSE,R)),{nodeId:h,element:(0,T.it)(h,D.$.ELLIPSE,"ellipse",{size:R,attribute:b},y?window.document.getElementById(y):null),size:R,attribute:b}}},2875:(he,At,f)=>{f.d(At,{e:()=>T});var D=f(9054),O=f(4318),st=f(4080);const T=(U,h,E)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:180,height:180},R=(null==h?void 0:h.attribute)||{};Object.assign(R,(0,O.sg)(D.$.FOREIGNOBJECT,y));let b=(null==h?void 0:h.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},z=(null==h?void 0:h.style)||{};return{nodeId:U,element:(0,st.it)(U,D.$.FOREIGNOBJECT,"foreignObject",{size:y,attribute:R,style:z,source:b},E),size:y,attribute:R,style:z,source:b}}},6358:(he,At,f)=>{f.d(At,{m:()=>T});var D=f(9054),O=f(4318),st=f(4080);const T=(U,h,E)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},R=(null==h?void 0:h.attribute)||{};return Object.assign(R,(0,O.sg)(D.$.GROUP,y)),{nodeId:U,element:(0,st.it)(U,D.$.GROUP,"g",{size:y,attribute:R},E?window.document.getElementById(E):null),size:y,attribute:R}}},7210:(he,At,f)=>{f.d(At,{G:()=>T});var D=f(9054),O=f(4318),st=f(4080);const T=(U,h,E)=>{let y=(null==h?void 0:h.size)||{x:0,y:0,width:200,height:100},R=(null==h?void 0:h.attribute)||{preserveAspectRatio:"none"};Object.assign(R,(0,O.sg)(D.$.IMAGE,y));let b=(null==h?void 0:h.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:U,element:(0,st.it)(U,D.$.IMAGE,"image",{size:y,attribute:R,source:b},E),size:y,attribute:R,source:b}}},4921:(he,At,f)=>{f.d(At,{W:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth,strokeLinecap:O.icdt.attribute.strokeLinecap};return Object.assign(b,(0,st.sg)(D.$.LINE,R)),{nodeId:h,element:(0,T.it)(h,D.$.LINE,"line",{size:R,attribute:b},y?window.document.getElementById(y):null),size:R,attribute:b}}},8419:(he,At,f)=>{f.d(At,{G:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth};return Object.assign(b,(0,st.sg)(D.$.PATH,R)),{nodeId:h,element:(0,T.it)(h,D.$.PATH,"path",{size:R,attribute:b},y?window.document.getElementById(y):null),size:R,attribute:b}}},2282:(he,At,f)=>{f.d(At,{l:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{fill:O.icdt.attribute.fill,stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth};return Object.assign(b,(0,st.sg)(D.$.POLYGON,R)),{nodeId:h,element:(0,T.it)(h,D.$.POLYGON,"polygon",{size:R,attribute:b},y?window.document.getElementById(y):null),size:R,attribute:b}}},8054:(he,At,f)=>{f.d(At,{f:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:10,height:10},b=(null==E?void 0:E.attribute)||{fill:O.icdt.attribute.fill,stroke:O.icdt.attribute.stroke,strokeWidth:O.icdt.attribute.strokeWidth};return Object.assign(b,(0,st.sg)(D.$.RECT,R)),{nodeId:h,element:(0,T.it)(h,D.$.RECT,"rect",{size:R,attribute:b},y),size:R,attribute:b}}},1105:(he,At,f)=>{f.d(At,{$:()=>U});var D=f(9054),O=f(4981),st=f(4318),T=f(4080);const U=(h,E,y)=>{let R=(null==E?void 0:E.size)||{x:0,y:0,width:100,height:50},b=(null==E?void 0:E.attribute)||{fill:O.icdt.attribute.stroke,fontFamily:O.icdt.attribute.fontFamily,fontSize:O.icdt.attribute.fontSize,textLength:O.icdt.attribute.textLength};Object.assign(b,(0,st.sg)(D.$.TEXT,R));let z=(null==E?void 0:E.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:h,element:(0,T.it)(h,D.$.TEXT,"text",{size:R,attribute:b,source:z},y?window.document.getElementById(y):null),size:R,attribute:b,source:z}}},4318:(he,At,f)=>{f.d(At,{bH:()=>O,sg:()=>st});var D=f(9054);const O=(U,h,E,y,R)=>{let b={x:Math.min(U,E),y:Math.min(h,y),width:Math.abs(E-U)||1,height:Math.abs(y-h)||1};return null!=R&&R.ratio&&(b.width<=b.height?b.height=b.width*(null==R?void 0:R.ratio):b.width=b.height/(null==R?void 0:R.ratio)),Object.assign(b,{ratios:(null==R?void 0:R.ratios)||[[(U-b.x)/(b.width||1),(h-b.y)/(b.height||1)],[(E-b.x)/(b.width||1),(y-b.y)/(b.height||1)]]}),null!=R&&R.points&&(b.points=null==R?void 0:R.points),b},st=(U,h,E)=>{var y=(()=>{switch(U){case D.$.CIRCLE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,r:Math.min(h.width/2,h.height/2)};case D.$.ELLIPSE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2};case D.$.LINE:{var R;let Y={};return null===(R=h.ratios)||void 0===R||R.forEach((C,G)=>{Y[`x${G+1}`]=h.x+h.width*C[0],Y[`y${G+1}`]=h.y+h.height*C[1]}),Y}case D.$.RECT:return{x:h.x,y:h.y,width:h.width,height:h.height};case D.$.POLYGON:var b;return{points:((null===(b=h.ratios)||void 0===b?void 0:b.map(Y=>[h.x+h.width*Y[0],h.y+h.height*Y[1]]))||[]).map(Y=>Y.join(" ")).join(",")};case D.$.FOREIGNOBJECT:case D.$.IMAGE:return{x:h.x,y:h.y,width:h.width,height:h.height};case D.$.TEXT:var z;return{x:h.x,y:h.y+(null!==(z=null==E?void 0:E.fontSize)&&void 0!==z?z:20)-4};case D.$.PATH:{var S;let Y=null!==(S=h.points)&&void 0!==S?S:[];return Y.length?{d:`M ${Y[0][0]} ${Y[0][1]} L `+(Y.map(C=>[C[0],C[1]])||[]).map(C=>C.join(" ")).join(" ")}:{d:""}}}return{}})();return h.rotate?(y.transform=`rotate(${h.rotate})`,y.transformOrigin=`${h.x+h.width/2} ${h.y+h.height/2}`):(y.transform=null,y.transformOrigin=null),y}},5811:(he,At,f)=>{f.d(At,{q:()=>D});const D=(O,st)=>{var T;return st=null!==(T=st)&&void 0!==T?T:100,Math.round((O+Number.EPSILON)*st)/st}},3423:(he,At,f)=>{f.d(At,{v:()=>st});var D=f(4981),O=f(5811);const st=T=>(0,O.q)(T/D.icdt.screen.scale)},3385:(he,At,f)=>{f.d(At,{Vs:()=>y,co:()=>h,k6:()=>U,lO:()=>E,mr:()=>R});var D=f(4981),O=f(4080),st=f(4318),T=f(5811);const U=(b,z)=>{let{id:S,type:Y,size:C,attribute:G}=b,at=JSON.parse(JSON.stringify({id:S,size:C,attribute:G}));C.x=(0,T.q)(z),Object.assign(G,(0,st.sg)(Y,C)),(0,O.__)(window.document.getElementById(S),G),D.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:S,size:C,attribute:G}))}])},h=(b,z)=>{let{id:S,type:Y,size:C,attribute:G}=b,at=JSON.parse(JSON.stringify({id:S,size:C,attribute:G}));C.y=(0,T.q)(z),Object.assign(G,(0,st.sg)(Y,C)),(0,O.__)(window.document.getElementById(S),G),D.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:S,size:C,attribute:G}))}])},E=(b,z,S)=>{let{id:Y,type:C,size:G,attribute:at}=b,K=JSON.parse(JSON.stringify({id:Y,size:G,attribute:at}));S&&(G.height=(0,T.q)(z*G.height/G.width)),G.width=(0,T.q)(z),Object.assign(at,(0,st.sg)(C,G)),(0,O.__)(window.document.getElementById(Y),at),D.icdt.history.push([{type:"size",from:K,to:JSON.parse(JSON.stringify({id:Y,size:G,attribute:at}))}])},y=(b,z,S)=>{let{id:Y,type:C,size:G,attribute:at}=b,K=JSON.parse(JSON.stringify({id:Y,size:G,attribute:at}));S&&(G.width=(0,T.q)(z*G.width/G.height)),G.height=(0,T.q)(z),Object.assign(at,(0,st.sg)(C,G)),(0,O.__)(window.document.getElementById(Y),at),D.icdt.history.push([{type:"size",from:K,to:JSON.parse(JSON.stringify({id:Y,size:G,attribute:at}))}])},R=(b,z)=>{let{id:S,type:Y,size:C,attribute:G}=b,at=JSON.parse(JSON.stringify({id:S,size:C,attribute:G}));C.rotate=(0,T.q)(z),Object.assign(G,(0,st.sg)(Y,C)),(0,O.__)(window.document.getElementById(S),G),D.icdt.history.push([{type:"size",from:at,to:JSON.parse(JSON.stringify({id:S,size:C,attribute:G}))}])}},6816:(he,At,f)=>{f.d(At,{A:()=>h});var D=f(968),O=f(4981);class st{constructor(y){this._points=[],this._options=y}start(y){this._points.length=0,this._points.push([y.x,y.y]),this._options.start(y)}move(y){this._points.push([y.x,y.y]),this._options.move(y,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(y=this._points[0])[0],y:y[1]}:{x:0,y:0};var y}get offsetLast(){return this._points.length>=1?{x:(y=this._points[this._points.length-1])[0],y:y[1]}:{x:0,y:0};var y}}var T=f(7797);const h=(E,y,R,b,z)=>{var S,Y,C;let G=null,at=0,K=0;E.mouseEvent?(G=E.mouseEvent.target,at=E.mouseEvent.offsetX,K=E.mouseEvent.offsetY):E.touchEvent&&(G=E.touchEvent.target,E.touchEvent.touches.length&&(at=E.touchEvent.touches[0].clientX,K=E.touchEvent.touches[0].clientY));let et=null!=R?R:O.icdt.screen.scale,gt=null!=b?b:O.icdt.screen.dislocation,_t=null!=z?z:O.icdt.screen.offset,ct=()=>{};var rt=new st({start:null!==(S=null==y?void 0:y.start)&&void 0!==S?S:ct,move:null!==(Y=null==y?void 0:y.move)&&void 0!==Y?Y:ct,end:null!==(C=null==y?void 0:y.end)&&void 0!==C?C:ct});E.mouseEvent?rt.start((0,T.p)({x:at,y:K},et,gt,{x:0,y:0})):E.touchEvent&&rt.start((0,T.p)({x:at,y:K},et,gt,_t));let L=ut=>{rt.move((0,T.p)({x:ut.clientX,y:ut.clientY},et,gt,_t))},Rt=ut=>{rt.end(),[D._.SHAPE,D._.FOREIGNOBJECT,D._.IMAGE,D._.TEXT].includes(O.icdt.pointer.pointer_type)&&(ut.shiftKey||(O.icdt.pointer.pointer_type=D._.POINTER))},Ht=ut=>{ut.touches.length&&L({clientX:ut.touches[0].clientX,clientY:ut.touches[0].clientY})},jt=ut=>{Rt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("touchmove",Ht,!1),window.removeEventListener("touchend",jt,!1)},Et=ut=>{0==ut.button&&L({clientX:ut.clientX,clientY:ut.clientY})},Zt=ut=>{0==ut.button&&(Rt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("mousemove",Et,!1),window.removeEventListener("mouseup",Zt,!1))};if(E.mouseEvent)window.addEventListener("mousemove",Et,!1),window.addEventListener("mouseup",Zt,!1);else if(E.touchEvent){var Kt;window.addEventListener("touchmove",Ht,!1),window.addEventListener("touchend",jt,!1),null===(Kt=G)||void 0===Kt||Kt.addEventListener("touchmove",function(ut){ut.preventDefault()})}}},7797:(he,At,f)=>{f.d(At,{p:()=>O});var D=f(5811);const O=(st,T,U,h)=>(st.x-=h.x,st.y-=h.y,st.x/=T,st.y/=T,st.x-=U.x,st.y-=U.y,st.x=(0,D.q)(st.x),st.y=(0,D.q)(st.y),st)},1690:(he,At,f)=>{f.d(At,{$:()=>Lt});var D=f(4981),O=f(9054),st=f(5973),T=f(2336),U=f(861),h=f(157),E=f(4787),R=f(1105),b=f(6358);const K=function(H){var c,V,ot=jQuery("#"+H),Z=null===(c=ot.attr("class"))||void 0===c?void 0:c.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),x=null===(V=ot.attr("class"))||void 0===V?void 0:V.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);Z&&Z.forEach(function(W){jQuery(ot).removeClass(W)}),x&&x.forEach(function(W){jQuery(ot).removeClass(W)});let M=ot.attr("data-class");M&&(ot.attr("class",M),ot.removeAttr("data-class")),jQuery(ot).data("animation-running",!1)};var et=f(7210),gt=f(5811);const _t=(H,c,V)=>{var ot,Z,x,M;let W=1,dt=new Image;dt.onload=()=>{var vt,Ct,Tt,Wt;W=(0,gt.q)(dt.naturalWidth/dt.naturalHeight,100);let ie=0,Gt=0,Qt=0,Yt=0;var ce,le,ae,me;W>=1?(Qt=Math.min(dt.naturalWidth,null!==(ce=null===(le=Lt.slide.svg)||void 0===le||null===(le=le.viewBox)||void 0===le?void 0:le.width)&&void 0!==ce?ce:0),Yt=Qt/W):(Yt=Math.min(dt.naturalHeight,null!==(ae=null===(me=Lt.slide.svg)||void 0===me||null===(me=me.viewBox)||void 0===me?void 0:me.height)&&void 0!==ae?ae:0),Qt=Yt/W),ie=((null!==(vt=null===(Ct=Lt.slide.svg)||void 0===Ct||null===(Ct=Ct.viewBox)||void 0===Ct?void 0:Ct.width)&&void 0!==vt?vt:0)-Qt)/2,Gt=((null!==(Tt=null===(Wt=Lt.slide.svg)||void 0===Wt||null===(Wt=Wt.viewBox)||void 0===Wt?void 0:Wt.height)&&void 0!==Tt?Tt:0)-Yt)/2,c.size={x:ie,y:Gt,width:Qt,height:Yt},ct(c,V)},dt.onerror=vt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,vt)},dt.src=null!==(ot=null!==(Z=null===(x=c.source)||void 0===x?void 0:x.url)&&void 0!==Z?Z:null===(M=c.source)||void 0===M?void 0:M.path)&&void 0!==ot?ot:""},ct=(H,c)=>{if(H.slideStatus!=Lt.slideStatus)return void c();let{element:V}=(0,et.G)(Math.ceil(1e9*Math.random()),{size:H.size,source:{type:"image",image:null==H?void 0:H.source}});setTimeout(()=>{null==V||V.remove(),c()},3e3)},rt=(H,c,V)=>{var ot,Z,x,M;let W=new Image;W.onload=()=>{L(H,{width:W.naturalWidth,height:W.naturalHeight},c,V)},W.onerror=dt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,dt),V()},W.src=null!==(ot=null!==(Z=null===(x=c.source)||void 0===x?void 0:x.url)&&void 0!==Z?Z:null===(M=c.source)||void 0===M?void 0:M.path)&&void 0!==ot?ot:""},L=(H,c,V,ot)=>{if(V.slideStatus!=Lt.slideStatus)return void ot();let Z=(0,gt.q)(c.width/c.height,100),x=0,M=0,W=0,dt=0;Z>=1?(W=c.width,W=Math.max(W,40),W=Math.min(W,100),dt=W/Z):(dt=c.height,dt=Math.max(dt,40),dt=Math.min(dt,100),W=dt/Z);let{size:vt}=H;x=vt.x+vt.width/2-W/2,M=vt.y+vt.height/2-dt/2;let{element:Ct}=(0,et.G)(Math.ceil(1e9*Math.random()),{size:{x,y:M,width:W,height:dt},source:{type:"image",image:null==V?void 0:V.source}});setTimeout(()=>{null==Ct||Ct.remove(),ot()},3e3)};var Rt=f(4080);const Ht=(H,c,V)=>{var ot,Z,x;if(c.slideStatus!=Lt.slideStatus)return void V();if(null===(ot=c.source)||void 0===ot||!ot.url)return console.warn(`${H.id} -> audio no source!`),void V();var M=jQuery("#"+H.id);let W=null!==(Z=c.iteration)&&void 0!==Z?Z:0;if(W<0&&(V(),V=function(){}),!(M.data("audio-running")&&W<0)){M.data("audio-running",!0);var dt=new Audio;return dt.autoplay=!0,dt.loop=0!=W,dt.preload="auto",dt.controls=!0,dt.setAttributeNode(document.createAttribute("playsinline")),dt.addEventListener("canplay",function(){var vt=dt.play();vt&&vt.then(function(Ct){M.data("audio-running",!0)}).catch(function(Ct){M.data("audio-running",!1),c.slideStatus===Lt.slideStatus&&V()})}),dt.addEventListener("timeupdate",function(){var Ct;c.slideStatus!==Lt.slideStatus&&((Ct=this).pause(),Ct.remove(),M.data("audio-running",!1))}),dt.addEventListener("canplaythrough",function(){this.loop&&(W>0?W--:0==W&&(this.loop=!1))}),dt.addEventListener("play",function(){}),dt.addEventListener("pause",function(){}),dt.addEventListener("ended",function(){this.remove(),M.data("audio-running",!1),c.slideStatus===Lt.slideStatus&&V()}),dt.onerror=function(){this.remove(),M.data("audio-running",!1),c.slideStatus===Lt.slideStatus&&V()},dt.src=(null===(x=c.source)||void 0===x?void 0:x.url)||"",dt}};var jt=f(1687),Et=f(9942);const xt=(H,c,V)=>{var ot;null===(ot=c.test)||void 0===ot||null===(ot=ot.answer)||void 0===ot||null===(ot=ot.matching)||void 0===ot||ot.filter(Z=>Z.value==V.key).forEach(Z=>Z.value="")},pt=(H,c,V,ot,Z,x)=>{var M,W,dt,vt,Ct,Tt,Wt,ie,Gt,Qt,Yt,ce;Z.iscorrect?(null!==(M=c.test)&&void 0!==M&&null!==(M=M.audiotrue)&&void 0!==M&&M.path&&Ht(H,{source:(0,Et.I)(null===(vt=c.test)||void 0===vt?void 0:vt.audiotrue),iteration:0,nodeStatus:V,slideStatus:ot},x),null!==(W=c.test)&&void 0!==W&&null!==(W=W.icontrue)&&void 0!==W&&W.path&&rt(H,{source:(0,Et.I)(null===(Ct=c.test)||void 0===Ct?void 0:Ct.icontrue),iteration:0,nodeStatus:V,slideStatus:ot},x),null!==(dt=c.test)&&void 0!==dt&&null!==(dt=dt.effecttrue)&&void 0!==dt&&dt.path&&_t(0,{source:(0,Et.I)(null===(Tt=c.test)||void 0===Tt?void 0:Tt.effecttrue),iteration:0,nodeStatus:V,slideStatus:ot},x)):(null!==(Wt=c.test)&&void 0!==Wt&&null!==(Wt=Wt.audiofalse)&&void 0!==Wt&&Wt.path&&Ht(H,{source:(0,Et.I)(null===(Qt=c.test)||void 0===Qt?void 0:Qt.audiofalse),iteration:0,nodeStatus:V,slideStatus:ot},x),null!==(ie=c.test)&&void 0!==ie&&null!==(ie=ie.iconfalse)&&void 0!==ie&&ie.path&&rt(H,{source:(0,Et.I)(null===(Yt=c.test)||void 0===Yt?void 0:Yt.iconfalse),iteration:0,nodeStatus:V,slideStatus:ot},x),null!==(Gt=c.test)&&void 0!==Gt&&null!==(Gt=Gt.effectfalse)&&void 0!==Gt&&Gt.path&&_t(0,{source:(0,Et.I)(null===(ce=c.test)||void 0===ce?void 0:ce.effectfalse),iteration:0,nodeStatus:V,slideStatus:ot},x))},B=(H,c,V,ot)=>{var Z,x,M,W,dt,vt;null!==(Z=c.animate)&&void 0!==Z&&Z.value&&((H,c,V)=>{var ot;let{value:x}=null!==(ot=H.animate)&&void 0!==ot?ot:{};((H,c,V)=>{var ot;let Z=jQuery("#"+H),x="",M=null!==(ot=c.iteration)&&void 0!==ot?ot:0,W=[];(c.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?W.push(c.value):c.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(c.value)?(W.push("animation"),W.push(`animation-${c.value}`)):(W.push("animate__animated"),W.push(`animate__${c.value}`)):(W.push("animation"),W.push("animation-fadein")),M<0?(W.push("animation-iteration-infinite"),V(),V=function(){}):M>0&&W.push("animation-iteration-"+(M+1)),x=W.join(" "),function(vt){let Ct=function(){Z.data("animate-running")?Z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){Z.data("animate-running",!1),setTimeout(function(){vt()},100)}):vt()};Z.hasClass("animation")?setTimeout(function(){Ct()}):Ct()}(function(){var vt;K(H),(M>0||M<0)&&Z.one("animationiteration",function(){c.slideStatus===Lt.slideStatus||(Z.data("animate-running",!1),K(H),c.slideStatus===Lt.slideStatus&&V())}),Z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(Z.data("animate-running",!1),K(H),c.finish){default:case 0:case 1:break;case 2:Z.addClass("hide")}c.slideStatus===Lt.slideStatus&&V()}),Z.attr("data-class",null!==(vt=Z.attr("class"))&&void 0!==vt?vt:""),Z.addClass(x),Z.data("animate-running",!0)})})(H.id,{value:x,nodeStatus:c,slideStatus:V},()=>{})})(c,V.nodeStatus,V.slideStatus),null!==(x=c.interactive)&&void 0!==x&&x.show?((H,c,V,ot)=>{var Z,x,M;console.log("icdt_Run_Interactive_NodeShow",H,c,V);let W={total:0,counter:0},{triggershow:dt,triggerrun:vt,triggerhide:Ct,action:Tt,audio:Wt}=null!==(Z=null===(x=H.interactive)||void 0===x?void 0:x.show)&&void 0!==Z?Z:{};if(dt){let{id:Gt,ids:Qt,time:Yt,async:ce}=dt;"asynctrue"==ce?setTimeout(()=>{(0,E.L5)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}):"time"==ce&&setTimeout(()=>{(0,E.L5)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})},1e3*(null!=Yt?Yt:0))}if(vt){let{id:Gt,ids:Qt,time:Yt,async:ce}=vt;"asynctrue"==ce?setTimeout(()=>{(0,E.Ar)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}):"time"==ce&&setTimeout(()=>{(0,E.Ar)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})},1e3*(null!=Yt?Yt:0))}if(Ct){let{id:Gt,ids:Qt,time:Yt,async:ce}=Ct;"asynctrue"==ce?setTimeout(()=>{(0,E.WT)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}):"time"==ce&&setTimeout(()=>{(0,E.WT)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})},1e3*(null!=Yt?Yt:0))}let ie=()=>{setTimeout(()=>{if(W.counter>=W.total){if(ot&&ot(),dt){let{id:Gt,ids:Qt,async:Yt}=dt;"asyncfalse"==Yt&&(0,E.L5)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}if(vt){let{id:Gt,ids:Qt,async:Yt}=vt;"asyncfalse"==Yt&&(0,E.Ar)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}if(Ct){let{id:Gt,ids:Qt,async:Yt}=Ct;"asyncfalse"==Yt&&(0,E.WT)({id:Gt,ids:Qt,nodeStatus:c,slideStatus:V})}}})};if(null!=Tt&&Tt.value){W.total+=1;let Gt=()=>{W.counter+=1,ie()};switch(null==Tt?void 0:Tt.value){case"hide":jQuery("#"+H.id).addClass("hide"),Gt();break;case"points":{let{points:Qt,time:Yt,iteration:ce,finish:le}=Tt;(0,U.G)(H.id,{points:Qt,time:Yt,iteration:ce,finish:le,nodeStatus:c,slideStatus:V},Gt);break}default:{let{value:Qt,time:Yt,iteration:ce,finish:le}=Tt;(0,T.Q)(H.id,{value:Qt,time:Yt,iteration:ce,finish:le,nodeStatus:c,slideStatus:V},Gt);break}}}if(null!=Wt&&null!==(M=Wt.source)&&void 0!==M&&M.path){W.total+=1;let Gt=()=>{W.counter+=1,ie()};(0,h.R)(H.id,Wt,W,{nodeStatus:c,slideStatus:V},Gt)}W.total||ie()})(c,V.nodeStatus,V.slideStatus,ot):ot&&ot(),null!==(M=c.interactive)&&void 0!==M&&M.click&&jQuery("#"+c.id).click(Ct=>{var Tt;Ct.preventDefault(),null!==(Tt=c.interactive)&&void 0!==Tt&&null!==(Tt=Tt.click)&&void 0!==Tt&&Tt.action&&jQuery("#"+c.id).addClass("interactive-click"),V.nodeStatus=Lt.refreshNodeStatus(),(0,st.F)(c,V.nodeStatus,V.slideStatus)}),null!==(W=c.variable)&&void 0!==W&&W.input&&jQuery("#"+c.id).on("change","input,textarea",Ct=>{Ct.preventDefault(),((H,c,V)=>{var ot,Z;D.icdt.variable.setValue(null!==(ot=null===(Z=c.variable)||void 0===Z||null===(Z=Z.input)||void 0===Z?void 0:Z.variable)&&void 0!==ot?ot:"",H),(H=>{var c;let V=(ot,Z)=>{null==ot||ot.forEach(x=>{switch(x.type){case O.$.GROUP:(0,b.m)(x.id,{},Z),V(x.nodes,x.id);break;case O.$.POLYGON:break;case O.$.TEXT:(0,R.$)(x.id,{size:x.size,attribute:x.attribute,source:x.source},Z)}})};V(null===(c=H.svg)||void 0===c?void 0:c.nodes)})(V)})(Ct.target.value,c,H)}),null!==(dt=c.variable)&&void 0!==dt&&dt.click&&jQuery("#"+c.id).click(Ct=>{var Tt;Ct.preventDefault(),null!==(Tt=c.variable)&&void 0!==Tt&&null!==(Tt=Tt.click)&&void 0!==Tt&&Tt.variable&&jQuery("#"+c.id).addClass("variable-click"),((H,c)=>{var V;D.icdt.variable.setValueOperator(null===(V=H.variable)||void 0===V?void 0:V.click),(H=>{var c;let V=(ot,Z)=>{null==ot||ot.forEach(x=>{switch(x.type){case O.$.GROUP:(0,b.m)(x.id,{},Z),V(x.nodes,x.id);break;case O.$.POLYGON:break;case O.$.TEXT:(0,R.$)(x.id,{size:x.size,attribute:x.attribute,source:x.source},Z)}})};V(null===(c=H.svg)||void 0===c?void 0:c.nodes)})(c)})(c,H)}),"test"==(null===(vt=c.source)||void 0===vt?void 0:vt.type)&&((H,c)=>{var V;let ot=()=>{};switch(null===(V=H.source)||void 0===V||null===(V=V.test)||void 0===V?void 0:V.type){case"singlechoice":jQuery("#"+H.id).click(x=>{x.preventDefault(),((H,c,V,ot,Z)=>{var x,M;let W=null===(x=H.source)||void 0===x||null===(x=x.test)||void 0===x||null===(x=x.singlechoice)||void 0===x?void 0:x.iscorrect;if(null!==(M=c.svg)&&void 0!==M&&M.nodes.find(dt=>{var vt;return"submit"==(null===(vt=dt.source)||void 0===vt||null===(vt=vt.test)||void 0===vt?void 0:vt.type)})||pt(H,c,V,ot,{iscorrect:W},Z),c.test?c.test.answer?c.test.answer.singlechoice={value:H.id,iscorrect:W}:c.test.answer={singlechoice:{value:H.id,iscorrect:W}}:c.test={answer:{singlechoice:{value:H.id,iscorrect:W}}},c.test.showselection){let dt=(0,Rt.g1)(jt.O.TEST_GROUP,"g",void 0,D.icdt.target);(0,Rt.Yw)(dt,c)}console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Lt.nodeStatus,Lt.slideStatus,ot)});break;case"multichoice":jQuery("#"+H.id).click(x=>{x.preventDefault(),((H,c,V,ot,Z)=>{var x,M;let dt,W=null===(x=H.source)||void 0===x||null===(x=x.test)||void 0===x||null===(x=x.multichoice)||void 0===x?void 0:x.iscorrect;if(null!==(M=c.svg)&&void 0!==M&&M.nodes.find(vt=>{var Ct;return"submit"==(null===(Ct=vt.source)||void 0===Ct||null===(Ct=Ct.test)||void 0===Ct?void 0:Ct.type)})||pt(H,c,V,ot,{iscorrect:W},Z),c.test?c.test.answer?c.test.answer.multichoice?c.test.answer.multichoice.find(vt=>vt.value==H.id)?(c.test.answer.multichoice=c.test.answer.multichoice.filter(vt=>vt.value!=H.id),dt=!0):c.test.answer.multichoice.push({value:H.id,iscorrect:W}):c.test.answer.multichoice=[{value:H.id,iscorrect:W}]:c.test.answer={multichoice:[{value:H.id,iscorrect:W}]}:c.test={answer:{multichoice:[{value:H.id,iscorrect:W}]}},c.test.showselection){let vt=(0,Rt.g1)(jt.O.TEST_GROUP,"g",void 0,D.icdt.target);(0,Rt.Yw)(vt,c)}console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Lt.nodeStatus,Lt.slideStatus,ot)});break;case"fill":var Z;jQuery("#"+H.id).on("keyup",'input[type="text"]',x=>{var M;let W=jQuery("<div/>").css({"font-size":jQuery(x.target).css("font-size"),visibility:"hidden",float:"left"}).text(x.target.value).appendTo(window.document.body);jQuery(x.target).css({width:(null!==(M=W.width())&&void 0!==M?M:0)+30})}).on("keypress",'input[type="text"]',x=>{13===(x.keyCode||x.charCode||x.which)&&(x.preventDefault(),x.stopPropagation(),jQuery(x.target).blur())}).on("change",'input[type="text"]',x=>{var M,W;let dt=Lt.nodeStatus,vt=Lt.slideStatus,Ct=null===(M=x.target)||void 0===M?void 0:M.getAttribute("data-key"),Tt=null===(W=x.target)||void 0===W||null===(W=W.value)||void 0===W||null===(W=W.toLowerCase())||void 0===W?void 0:W.trim();((H,c,V,ot,Z,x)=>{var M,W,dt;let{value:vt}=null!==(M=null===(W=H.source)||void 0===W||null===(W=W.test)||void 0===W||null===(W=W.fill)||void 0===W?void 0:W.find(Tt=>Tt.key==`[[${Z.key}]]`))&&void 0!==M?M:{},Ct=vt&&vt.includes(Z.value);null!==(dt=c.svg)&&void 0!==dt&&dt.nodes.find(Tt=>{var Wt;return"submit"==(null===(Wt=Tt.source)||void 0===Wt||null===(Wt=Wt.test)||void 0===Wt?void 0:Wt.type)})||pt(H,c,V,ot,{iscorrect:Ct},x),Z.iscorrect=Ct,c.test?c.test.answer?c.test.answer.fill?c.test.answer.fill.find(Tt=>Tt.key==Z.key)?c.test.answer.fill.filter(Tt=>Tt.key==Z.key).forEach(Tt=>{Tt.value=Z.value,Tt.iscorrect=Z.iscorrect}):c.test.answer.fill.push(Z):c.test.answer.fill=[Z]:c.test.answer={fill:[Z]}:c.test={answer:{fill:[Z]}},console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,dt,vt,{key:Ct,value:Tt},ot),jQuery("#"+H.id).find(`input[type="text"][data-key="${Ct}"]`).val(Tt)}),null!==(Z=c.test)&&void 0!==Z&&Z.showselection||jQuery("#"+H.id).addClass("hide-selection");break;case"matching-empty":jQuery("#"+H.id).on("touchmove",".ondrag-item",function(x){x.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(x){return`<div class="ondrag-hint" style="width:64px;height:${H.size.height/H.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${x.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(x){var M;jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(M=c.test)&&void 0!==M&&M.showselection||jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("hide-selection")},drag:function(x){},dragend:function(x){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${H.id} .ondrop-here`).kendoDropTarget({dragenter:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.addClass("focused")},dragleave:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.removeClass("focused")},drop:function(x){if(!x.dropTarget.hasClass("actived"))return;x.dropTarget.removeClass("focused");let M=x.dropTarget,W=x.draggable.currentTarget;M.is(":empty")||M.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),W.appendTo(M),((H,c,V,ot,Z,x)=>{var M,W,dt;let{key:vt}=null!==(M=null===(W=H.source)||void 0===W||null===(W=W.test)||void 0===W?void 0:W.matching)&&void 0!==M?M:{key:"KIEN"},Ct=Z.key==vt;null!==(dt=c.svg)&&void 0!==dt&&dt.nodes.find(Wt=>{var ie;return"submit"==(null===(ie=Wt.source)||void 0===ie||null===(ie=ie.test)||void 0===ie?void 0:ie.type)})||pt(H,c,V,ot,{iscorrect:Ct},x),xt(H,c,Z);let Tt={key:null!=vt?vt:"",value:Z.key};c.test?c.test.answer?c.test.answer.matching?c.test.answer.matching.find(Wt=>Wt.key==vt)?c.test.answer.matching.filter(Wt=>Wt.key==vt).forEach(Wt=>Wt.value=Tt.value):c.test.answer.matching.push(Tt):c.test.answer.matching=[Tt]:c.test.answer={matching:[Tt]}:c.test={answer:{matching:[Tt]}},console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Lt.nodeStatus,Lt.slideStatus,{key:W.data("key")},ot)}});break;case"matching-content":jQuery("#"+H.id).on("touchmove",".ondrag-item",function(x){x.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(x){return`<div class="ondrag-hint" style="width:64px;height:${H.size.height/H.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${x.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(x){var M;jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(M=c.test)&&void 0!==M&&M.showselection||jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("hide-selection")},drag:function(x){},dragend:function(x){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${H.id} .ondrop-here`).kendoDropTarget({dragenter:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.addClass("focused")},dragleave:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.removeClass("focused")},drop:function(x){if(!x.dropTarget.hasClass("actived"))return;x.dropTarget.removeClass("focused");let W=x.draggable.currentTarget;W.appendTo(x.dropTarget),xt(H,c,{key:W.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+H.id).click(x=>{x.preventDefault(),((H,c,V,ot,Z)=>{var x,M,W,dt;let vt;var Ct;if(null!=c&&null!==(x=c.test)&&void 0!==x&&null!==(x=x.answer)&&void 0!==x&&x.singlechoice)vt=null==c||null===(Ct=c.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||null===(Ct=Ct.singlechoice)||void 0===Ct?void 0:Ct.iscorrect;else if(null!=c&&null!==(M=c.test)&&void 0!==M&&null!==(M=M.answer)&&void 0!==M&&M.multichoice){var Tt,Wt,ie;vt=1==[null==c||null===(Tt=c.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||null===(Tt=Tt.multichoice)||void 0===Tt?void 0:Tt.length,null==c||null===(Wt=c.test)||void 0===Wt||null===(Wt=Wt.answer)||void 0===Wt||null===(Wt=Wt.multichoice)||void 0===Wt||null===(Wt=Wt.map(le=>le.iscorrect?1:0))||void 0===Wt?void 0:Wt.reduce((le,ae)=>le+ae),null==c||null===(ie=c.svg)||void 0===ie||null===(ie=ie.nodes)||void 0===ie||null===(ie=ie.filter(le=>{var ae,me;return"multichoice"==(null===(ae=le.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(me=le.source)||void 0===me||null===(me=me.test)||void 0===me||null===(me=me.multichoice)||void 0===me?void 0:me.iscorrect)}))||void 0===ie?void 0:ie.length].filter((le,ae,me)=>me.indexOf(le)==ae).length}else if(null!=c&&null!==(W=c.test)&&void 0!==W&&null!==(W=W.answer)&&void 0!==W&&W.fill){var Gt,Qt;vt=(null==c||null===(Gt=c.test)||void 0===Gt||null===(Gt=Gt.answer)||void 0===Gt||null===(Gt=Gt.fill)||void 0===Gt||null===(Gt=Gt.map(le=>le.iscorrect?1:0))||void 0===Gt?void 0:Gt.reduce((le,ae)=>le+ae))==(null===(Qt=c.svg)||void 0===Qt||null===(Qt=Qt.nodes)||void 0===Qt||null===(Qt=Qt.filter(le=>{var ae;return"fill"==(null===(ae=le.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Qt?void 0:Qt.length)}else if(null!=c&&null!==(dt=c.test)&&void 0!==dt&&null!==(dt=dt.answer)&&void 0!==dt&&dt.matching){var Yt,ce;vt=(null===(Yt=c.svg)||void 0===Yt||null===(Yt=Yt.nodes)||void 0===Yt||null===(Yt=Yt.filter(le=>{var ae;return"matching-empty"==(null===(ae=le.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Yt?void 0:Yt.length)==((null==c||null===(ce=c.test)||void 0===ce||null===(ce=ce.answer)||void 0===ce?void 0:ce.matching)||[]).map(le=>le.key==le.value?1:0).reduce((le,ae)=>le+ae)}pt(H,c,V,ot,{iscorrect:vt},Z),console.log("node source ->",H.source),console.log("slide test ->",c.test)})(H,c,Lt.nodeStatus,Lt.slideStatus,ot)})}})(c,H)};var F=f(8619),d=f(8785),J=f(4921),ht=f(8054),ft=f(2282),kt=f(2875),Pt=f(8419);const Ot=(H,c,V)=>{if(V.slideStatus!=Lt.slideStatus||!c.length)return;let ot=c.shift(),Z=H.filter(dt=>dt.idx==ot);if(!Z.length)return;let x=Math.max.apply(null,Z.map(dt=>{var vt;return null!==(vt=dt.time)&&void 0!==vt?vt:0})),M=!1,W=x<.5?0:setTimeout(()=>{M||(M=!0,Ot(H,c,V))},1e3*x);wt(H,c,Z,0,V,{idx:ot,total:Z.length,counter:0,isRecursive:M,timeoutRecursive:W,maxTimeCoundown:x,uid:Math.floor(1e9*Math.random())})},wt=(H,c,V,ot,Z,x)=>{if(Z.slideStatus!=Lt.slideStatus)return;let M=V[ot];if(M){switch(M.type){case O.$.GROUP:break;case O.$.CIRCLE:(0,F._)(M.id,{size:M.size,attribute:M.attribute},Z.pId?window.document.getElementById(Z.pId):null);break;case O.$.ELLIPSE:(0,d.r)(M.id,{size:M.size,attribute:M.attribute},Z.pId);break;case O.$.LINE:(0,J.W)(M.id,{size:M.size,attribute:M.attribute},Z.pId);break;case O.$.RECT:(0,ht.f)(M.id,{size:M.size,attribute:M.attribute},Z.pId?window.document.getElementById(Z.pId):null);break;case O.$.POLYGON:(0,ft.l)(M.id,{size:M.size,attribute:M.attribute},Z.pId);break;case O.$.FOREIGNOBJECT:(0,kt.e)(M.id,{size:M.size,attribute:M.attribute,style:M.style,source:M.source},Z.pId?window.document.getElementById(Z.pId):null);break;case O.$.IMAGE:(0,et.G)(M.id,{size:M.size,attribute:M.attribute,source:M.source},Z.pId?window.document.getElementById(Z.pId):null);break;case O.$.TEXT:(0,R.$)(M.id,{size:M.size,attribute:M.attribute,source:M.source},Z.pId);break;case O.$.PATH:(0,Pt.G)(M.id,{size:M.size,attribute:M.attribute},Z.pId)}B(Z.slide,M,Z,()=>{x.counter+=1,x.maxTimeCoundown<.5&&x.counter>=x.total&&(x.total=x.counter=0,x.isRecursive||(clearTimeout(x.timeoutRecursive),x.isRecursive=!0,setTimeout(()=>{Ot(H,c,Z)},250)))}),wt(H,c,V,++ot,Z,x)}},Lt=new class $t{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(c){this._dataSource=c.data||{},D.icdt.variable.set=c.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var c,V;return null!==(c=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.length)&&void 0!==c?c:0}get slides(){var c;return(null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[]}get slide(){var c;return((null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[])[this._slideIdx]||{}}findNode(c){var V;let ot=null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.find((Wt,ie)=>ie==this._slideIdx),Z=null==ot?void 0:ot.svg,x=(Wt,ie)=>{let Gt=null==Wt?void 0:Wt.find(ce=>ce.id==c);if(Gt)return Gt.pid=ie,Gt;let Qt=0,Yt=Wt.length||0;for(;Qt<Yt&&!Gt&&(Gt=x(Wt[Qt].nodes||[],Wt[Qt].id),!Gt);)Qt++;return Gt},M=x((null==Z?void 0:Z.nodes)||[]);var W,dt,vt,Ct,Tt;return M?(M.style=null!==(W=M.style)&&void 0!==W?W:{},M.source=null!==(dt=M.source)&&void 0!==dt?dt:{},M.animate=null!==(vt=M.animate)&&void 0!==vt?vt:{},M.interactive=null!==(Ct=M.interactive)&&void 0!==Ct?Ct:{},M.variable=null!==(Tt=M.variable)&&void 0!==Tt?Tt:{},M):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(c,V,ot){var Z;let x;var M,W;if(this.refreshNodeStatus(),this.refreshSlideStatus(),ot)x=null===(M=this._dataSource)||void 0===M||null===(M=M.slides)||void 0===M?void 0:M.find(Tt=>Tt.code==ot||Tt.id==ot),x&&(this._slideIdx=(null===(W=this._dataSource)||void 0===W||null===(W=W.slides)||void 0===W?void 0:W.indexOf(x))||0);else if(V){var dt,vt;x=null===(dt=this._dataSource)||void 0===dt||null===(dt=dt.slides)||void 0===dt?void 0:dt.find(Tt=>Tt.id==V),x&&(this._slideIdx=(null===(vt=this._dataSource)||void 0===vt||null===(vt=vt.slides)||void 0===vt?void 0:vt.indexOf(x))||0)}else this._slideIdx=Math.min(Math.max(c||0,0),this.slideTotal-1),x=this.slide;if(x){var Ct;ve(D.icdt.container,D.icdt.svg,x),null===(Ct=jQuery(D.icdt.svg).find("#"+jt.O.BACKGROUND_GROUP))||void 0===Ct||Ct.empty();let Tt=(0,Rt.g1)(jt.O.BACKGROUND_GROUP,"g",void 0,D.icdt.svg);(0,Rt.x0)(Tt,x),(H=>{var c,V,ot;let Z=Lt.nodeStatus,x=Lt.slideStatus,M=null===(c=H.svg)||void 0===c||null===(c=c.nodes)||void 0===c?void 0:c.map(W=>W.idx).filter((W,dt,vt)=>vt.indexOf(W)==dt).sort((W,dt)=>(null!=W?W:0)-(null!=dt?dt:0));Ot(null!==(V=null===(ot=H.svg)||void 0===ot?void 0:ot.nodes)&&void 0!==V?V:[],null!=M?M:[],{slide:H,nodeStatus:Z,slideStatus:x})})(x)}this.changeSlide(this.slides,null===(Z=this.slide)||void 0===Z?void 0:Z.id,this.slideIdx,this.slides.length)}set onChangeSlide(c){this._fnChangeSlides.push(c)}changeSlide(c,V,ot,Z){this._fnChangeSlides.forEach(x=>x(c,V,ot,Z))}},ve=(H,c,V)=>{var ot,Z;let x=window.document.querySelector(c);var M;x||(x=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(M=window.document.querySelector(H))||void 0===M||M.appendChild(x)),x.textContent=null;let{x:W,y:dt,width:vt,height:Ct}=null!==(ot=null==V||null===(Z=V.svg)||void 0===Z?void 0:Z.viewBox)&&void 0!==ot?ot:D.icdt.screen.frameSize;x.setAttributeNS(null,"viewBox",W+" "+dt+" "+vt+" "+Ct),x.setAttribute("id",c.replace("#",""))}},2336:(he,At,f)=>{f.d(At,{Q:()=>O});var D=f(1690);const O=(T,U,h)=>{var E;if(!U.value)return void h();let y=jQuery("#"+T),R="",b=null!==(E=U.iteration)&&void 0!==E?E:0,z=[];(U.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?z.push(U.value):(z.push("animation"),z.push(U.value?"animation-"+U.value:"animation-fadein")),b<0?(z.push("animation-iteration-infinite"),h(),h=function(){}):b>0&&z.push("animation-iteration-"+(b+1)),R=z.join(" "),function(Y){let C=function(){y.data("animate-running")?y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){y.data("animate-running",!1),setTimeout(function(){Y()},100)}):Y()};y.hasClass("animation")?setTimeout(function(){C()}):C()}(function(){var Y;st(T),(b>0||b<0)&&y.one("animationiteration",function(){U.slideStatus===D.$.slideStatus||(y.data("animate-running",!1),st(T),U.slideStatus===D.$.slideStatus&&h())}),y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(y.data("animate-running",!1),st(T),U.finish){default:case 0:case 1:break;case 2:y.addClass("hide")}U.slideStatus===D.$.slideStatus&&h()}),y.attr("data-class",null!==(Y=y.attr("class"))&&void 0!==Y?Y:""),y.addClass(R),y.data("animate-running",!0)})},st=function(T){var U,h=jQuery("#"+T),E=null===(U=h.attr("class"))||void 0===U?void 0:U.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);E&&E.forEach(function(R){jQuery(h).removeClass(R)});let y=h.attr("data-class");y&&(h.attr("class",y),h.removeAttr("data-class")),jQuery(h).data("animation-running",!1)}},861:(he,At,f)=>{f.d(At,{G:()=>T});var D=f(4318),O=f(1690),st=f(4080);const T=(h,E,y)=>{var R;if(!E.points||!E.points.length)return void y();let b=jQuery("#"+h),z=function U(h){let E=[];2===h.length&&h.splice(1,0,[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);let S,Y,C,y=1,R=h.length;for(;y<R;){if(S=h[y-1],Y=h[y],C=h[y+1],(Math.abs(S[0]-Y[0])>=15||Math.abs(S[1]-Y[1])>=15)&&Math.pow(S[0]-Y[0],2)+Math.pow(S[1]-Y[1],2)>=Math.pow(15,2)&&C&&(Math.abs(S[0]-C[0])<=20||Math.abs(S[1]-C[1])<=20)&&Math.pow(S[0]-C[0],2)+Math.pow(S[1]-C[1],2)<=Math.pow(20,2))E.push(Y);else{let at=Y[0]-S[0],K=Y[1]-S[1],et=Math.max(Math.abs(at),Math.abs(K));for(var G=0;G<et;G+=15)E.push([S[0]+at*G/et,S[1]+K*G/et])}y++}return R>0&&(E.splice(0,0,h[0]),E.push(h[R-1])),E}(E.points||[]),S=null!==(R=E.iteration)&&void 0!==R?R:0;if(S<0&&(y(),y=function(){}),b.data("work-running")&&S<0)return;b.data("work-running",!0);let gt,Y=z.length,C=Math.max(20,1e3*(E.time||3)/Y),{id:G,type:at,size:K,attribute:et}=O.$.findNode(h),_t=function(ct){if(E.slideStatus!==O.$.slideStatus)return b.data("work-running",!1),void(E.slideStatus===O.$.slideStatus&&y());if(ct<Y){let rt=z[ct];rt&&(gt=Object.assign({},K,{x:rt[0]-K.width/2,y:rt[1]-K.height/2}),Object.assign(et,(0,D.sg)(at,gt)),(0,st.__)(window.document.getElementById(G),et),setTimeout(function(){_t(++ct)},C))}else if(S>0)S--,_t(1);else if(S<0)_t(1);else switch(b.data("work-running",!1),E.slideStatus===O.$.slideStatus&&y(),E.finish){default:case 0:break;case 1:Object.assign(et,(0,D.sg)(at,K)),(0,st.__)(window.document.getElementById(G),et);break;case 2:b.addClass("hide")}};_t(1)}},157:(he,At,f)=>{f.d(At,{R:()=>O});var D=f(1690);const O=(T,U,h,E,y)=>{var R,b,z;if(E.slideStatus!=D.$.slideStatus)return U.async&&"change-slide"!=U.async?void 0:void y();if(E.nodeStatus!=D.$.nodeStatus&&(!U.async||"change-node"==U.async))return void y();if(null===(R=U.source)||void 0===R||!R.url)return console.warn(`${T} -> audio no source!`),y(),void(y=()=>{});var S=jQuery("#"+T);let Y=null!==(b=U.iteration)&&void 0!==b?b:0;if(Y<0&&(y(),y=function(){}),!(S.data("audio-running")&&Y<0)){S.data("audio-running",!0);var C=function(at){at.pause(),at.remove(),S.data("audio-running",!1)},G=new Audio;return G.autoplay=!0,G.loop=0!=Y,G.preload="auto",G.controls=!0,G.setAttributeNode(document.createAttribute("playsinline")),G.addEventListener("canplay",function(){var at=G.play();at&&at.then(function(K){var et;S.data("audio-running",!0),"time"==U.async?setTimeout(()=>{C(G),y(),y=()=>{}},1e3*(null!==(et=U.time)&&void 0!==et?et:1)):"non-stop"==U.async&&(y(),y=()=>{})}).catch(function(K){S.data("audio-running",!1),E.slideStatus===D.$.slideStatus&&(y(),y=()=>{})})}),G.addEventListener("timeupdate",function(){switch(U.async){case"time":case"non-stop":break;case"finish-action":h.total>=2&&h.total-h.counter==1&&(C(this),y(),y=()=>{});break;default:case"change-node":E.nodeStatus!==D.$.nodeStatus&&(C(this),y(),y=()=>{});break;case"change-slide":E.slideStatus!==D.$.slideStatus&&(C(this),y(),y=()=>{})}}),G.addEventListener("canplaythrough",function(){this.loop&&(Y>0?Y--:0==Y&&(this.loop=!1))}),G.addEventListener("play",function(){}),G.addEventListener("pause",function(){}),G.addEventListener("ended",function(){this.remove(),S.data("audio-running",!1),E.slideStatus===D.$.slideStatus&&(y(),y=()=>{})}),G.onerror=function(){this.remove(),S.data("audio-running",!1),E.slideStatus===D.$.slideStatus&&(y(),y=()=>{})},G.src=(null===(z=U.source)||void 0===z?void 0:z.url)||"",G}}},5973:(he,At,f)=>{f.d(At,{F:()=>y});var D=f(4981),O=f(1690),st=f(2336),T=f(861),U=f(157),h=f(4787),E=f(370);const y=(R,b,z,S)=>{var Y,C,G;let at={total:0,counter:0},{triggershow:K,triggerrun:et,triggerhide:gt,action:_t,audio:ct,slide:rt,media:L}=null!==(Y=null===(C=R.interactive)||void 0===C?void 0:C.click)&&void 0!==Y?Y:{};if(K){let{id:Et,ids:Zt,time:Kt,async:ut}=K;"asynctrue"==ut?(0,h.L5)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,h.L5)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})},1e3*(null!=Kt?Kt:0))}if(et){let{id:Et,ids:Zt,time:Kt,async:ut}=et;"asynctrue"==ut?(0,h.Ar)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,h.Ar)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})},1e3*(null!=Kt?Kt:0))}if(gt){let{id:Et,ids:Zt,time:Kt,async:ut}=gt;"asynctrue"==ut?(0,h.WT)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,h.WT)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})},1e3*(null!=Kt?Kt:0))}let Rt=()=>{setTimeout(()=>{if(at.counter>=at.total){if(S&&S(),K){let{id:Et,ids:Zt,async:Kt}=K;"asyncfalse"==Kt&&(0,h.L5)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})}if(et){let{id:Et,ids:Zt,async:Kt}=et;"asyncfalse"==Kt&&(0,h.Ar)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})}if(gt){let{id:Et,ids:Zt,async:Kt}=gt;"asyncfalse"==Kt&&(0,h.WT)({id:Et,ids:Zt,nodeStatus:b,slideStatus:z})}}})};if(null!=_t&&_t.value){at.total+=1;let Et=()=>{at.counter+=1,Rt()};switch(_t.value){case"hide":jQuery("#"+R.id).addClass("hide"),Et();break;case"points":{let{points:Zt,time:Kt,iteration:ut,finish:it}=_t;Zt&&(0,T.G)(R.id,{points:Zt,time:Kt,iteration:ut,finish:it,nodeStatus:b,slideStatus:z},Et);break}default:{let{value:Zt,time:Kt,iteration:ut,finish:it}=_t;(0,st.Q)(R.id,{value:Zt,time:Kt,iteration:ut,finish:it,nodeStatus:b,slideStatus:z},Et);break}}}if(null!=ct&&null!==(G=ct.source)&&void 0!==G&&G.path){at.total+=1;let Et=()=>{at.counter+=1,Rt()};(0,U.R)(R.id,ct,at,{nodeStatus:b,slideStatus:z},Et)}if(at.total||Rt(),null!=rt&&rt.id)switch(console.log(`InteractiveNode #${R.id} slide(undefined,${rt.id},${rt.code}) success!`),rt.id){case-1:O.$.runSlide(O.$.slideIdx-1);break;case-2:O.$.runSlide(O.$.slideIdx+1);break;default:var Ht;O.$.runSlide(void 0,rt.id,null===(Ht=rt.code)||void 0===Ht?void 0:Ht.toString())}if(null!=L&&L.type){var jt;let Zt=`<div class="popup-media-viewer"><iframe src="${(0,E.e)({readfileuploadurl:null===(jt=D.icdt.config)||void 0===jt?void 0:jt.readfileuploadurl,type:null==L?void 0:L.type,oss:null==L?void 0:L.oss,path:null==L?void 0:L.path,pathExtract:null==L?void 0:L.pathExtract,url:null==L?void 0:L.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Kt=jQuery(Zt).appendTo(window.document.body);Kt.find(".btn-close").click(function(ut){ut.preventDefault(),Kt.remove()})}}},4787:(he,At,f)=>{f.d(At,{Ar:()=>T,L5:()=>st,WT:()=>U});var D=f(1690),O=f(5973);const st=h=>{console.log("icdt_Run_Interactive_TriggerShow",h),h.id?jQuery("#"+h.id).removeClass("hide"):h.ids&&h.ids.forEach(E=>{jQuery("#"+E).removeClass("hide")})},T=h=>{console.log("icdt_Run_Interactive_TriggerRun",h),h.id?(jQuery("#"+h.id).removeClass("hide"),(0,O.F)(D.$.findNode(h.id),h.nodeStatus,h.slideStatus)):h.ids&&h.ids.forEach(E=>{jQuery("#"+E).removeClass("hide"),(0,O.F)(D.$.findNode(E),h.nodeStatus,h.slideStatus)})},U=h=>{console.log("icdt_Run_Interactive_TriggerHide",h),h.id?jQuery("#"+h.id).addClass("hide"):h.ids&&h.ids.forEach(E=>{jQuery("#"+E).addClass("hide")})}},4080:(he,At,f)=>{f.d(At,{Mh:()=>et,wM:()=>ct,x_:()=>gt,it:()=>rt,g1:()=>Et,__:()=>L,QI:()=>Ht,DB:()=>Rt,eb:()=>_t,x0:()=>Xt,g$:()=>Zt,mo:()=>xt,XH:()=>bt,hJ:()=>Kt,vl:()=>it,yD:()=>ut,Yw:()=>pt});var D=f(9054),T=/^#?[a-fA-F0-9]+$/;const E=(B,F)=>{var d;if("none"==(B=null!==(d=B)&&void 0!==d?d:""))return"none";if("transparent"==B)return"rgba(0,0,0,0)";if(B.includes("rgba("))return B;if(B.includes("rgb(")&&(B=((B,F)=>{if(!B)return"";let d=B.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),J=(d&&d[4]||"").trim(),ht=d?(256|d[1]).toString(16).slice(1)+(256|d[2]).toString(16).slice(1)+(256|d[3]).toString(16).slice(1):B;return"0"==J?"transparent":`#${ht}`})(B)),!(B=B.replace(/[^0-9a-fA-F]/g,"")))return"";if(!T.test(B))return console.error(`hex2rgba -> ${B}: first argument has invalid hexadecimal characters`),"";if("#"===B[0]&&(B=B.slice(1)),3===B.length){let ht=B.split("");ht.splice(2,0,B[2]),ht.splice(1,0,B[1]),ht.splice(0,0,B[0]),B=ht.join("")}if(6!==B.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var J=[parseInt(B.slice(0,2),16),parseInt(B.slice(2,4),16),parseInt(B.slice(4,6),16)];return F="number"==typeof F?F:parseFloat(F),J.push(F>=0&&F<=1?F:1),"rgba("+J.join(",")+")"};var y=f(1814),R=f(4981),b=f(3423),z=f(8054),S=f(7210),Y=f(8619),C=f(1690),G=f(2875),at=f(1687),K=f(370);class et{constructor(F,d){let J=window.document.querySelector(d);var ht;J||(J=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(ht=window.document.querySelector(F))||void 0===ht||ht.appendChild(J));let{svgViewBox:ft,svgSize:kt}=R.icdt.screen.init();J.setAttributeNS(null,"viewBox",`${ft.x} ${ft.y} ${ft.width} ${ft.height}`),J.setAttribute("id",d.replace("#","")),J.style.display="block",J.style.position="absolute",J.style.left=`${kt.x}px`,J.style.top=`${kt.y}px`,J.style.width=`${kt.width}px`,J.style.height=`${kt.height}px`,J.style.backgroundColor="#fafafa",J.style.cursor="default"}}const gt=B=>{var F,d,J,ht,ft,kt;R.icdt.target.setAttributeNS(null,"viewBox",`${null!==(F=null==B||null===(d=B.svg)||void 0===d?void 0:d.viewBox.x)&&void 0!==F?F:0} ${null!==(J=null==B||null===(ht=B.svg)||void 0===ht?void 0:ht.viewBox.y)&&void 0!==J?J:0} ${null==B||null===(ft=B.svg)||void 0===ft?void 0:ft.viewBox.width} ${null==B||null===(kt=B.svg)||void 0===kt?void 0:kt.viewBox.height}`),jQuery(R.icdt.target).find("#"+at.O.BACKGROUND_GROUP).empty();let Pt=Et(at.O.BACKGROUND_GROUP,"g",void 0,R.icdt.target);Xt(Pt,B),(()=>{let Dt=window.document.getElementById(null==B?void 0:B.id);jQuery(Dt).find("#"+at.O.BACKGROUND_GROUP).empty();let zt=Et(at.O.BACKGROUND_GROUP,"g",void 0,Dt);Xt(zt,B)})()},_t=()=>{let B=R.icdt.screen.svgViewBox,F=R.icdt.screen.svgSize;R.icdt.target&&(R.icdt.target.setAttributeNS(null,"viewBox",`${B.x} ${B.y} ${B.width} ${B.height}`),R.icdt.target.style.left=`${F.x}px`,R.icdt.target.style.top=`${F.y}px`,R.icdt.target.style.width=`${F.width}px`,R.icdt.target.style.height=`${F.height}px`)},ct=()=>{jQuery(R.icdt.target).find(">*:not(defs)").remove()},rt=(B,F,d,J,ht)=>{let ft;return B?(ft=jQuery(ht||R.icdt.target).find("#"+B).get(0),ft||(ft=window.document.createElementNS("http://www.w3.org/2000/svg",d),ft.setAttribute("id",B),jQuery(ft).appendTo(ht||R.icdt.target))):(ft=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(ft).appendTo(ht||R.icdt.target)),null!=J&&J.attribute&&L(ft,null==J?void 0:J.attribute),null!=J&&J.style&&Rt(ft,null==J?void 0:J.style),null!=J&&J.source&&Ht(ft,F,null==J?void 0:J.source),ft},L=(B,F)=>{return jQuery(B).attr((d=Object.assign({},F||{}),null===(J=Object.keys(d))||void 0===J||J.forEach(kt=>{switch(kt){case"fill":break;case"stroke":var Pt;Object.assign(d,{"stroke-width":null!==(Pt=d.strokeWidth)&&void 0!==Pt?Pt:null,strokeWidth:null});break;case"strokeLinecap":var Dt;Object.assign(d,{"stroke-linecap":null!==(Dt=d.strokeLinecap)&&void 0!==Dt?Dt:null,strokeLinecap:null});break;case"strokeLinejoin":var zt;Object.assign(d,{"stroke-linejoin":null!==(zt=d.strokeLinejoin)&&void 0!==zt?zt:null,strokeLinejoin:null});break;case"strokeDasharray":var Ot;Object.assign(d,{"stroke-dasharray":null!==(Ot=d.strokeDasharray)&&void 0!==Ot?Ot:null,strokeDasharray:null});break;case"strokeDasharrays":var wt,$t;Object.assign(d,{"stroke-dasharray":null!==(wt=null===($t=d.strokeDasharrays)||void 0===$t?void 0:$t.join(" "))&&void 0!==wt?wt:null,strokeDasharrays:null});break;case"fontFamily":var Lt;Object.assign(d,{"font-family":null!==(Lt=d.fontFamily)&&void 0!==Lt?Lt:null,fontFamily:null});break;case"fontSize":var ve;Object.assign(d,{"font-size":null!==(ve=d.fontSize)&&void 0!==ve?ve:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"transformOrigin":var H;Object.assign(d,{"transform-origin":null!==(H=d.transformOrigin)&&void 0!==H?H:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?E(d.fill,null!==(ht=null==d?void 0:d.fillOpacity)&&void 0!==ht?ht:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?E(d.stroke,null!==(ft=null==d?void 0:d.strokeOpacity)&&void 0!==ft?ft:1):"rgba(0,0,0,0)",strokeOpacity:null}))),B;var d,J,ht,ft},Rt=(B,F)=>{return jQuery(B).css((d=Object.assign({},F||{}),null===(J=Object.keys(d))||void 0===J||J.forEach(ht=>{switch(ht){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var ft;Object.assign(d,d.borderWidth&&d.borderStyle&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle,"border-color":E(d.borderColor,null!==(ft=d.borderOpacity)&&void 0!==ft?ft:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var kt;d.backgroundColor&&Object.assign(d,{"background-color":E(d.backgroundColor,null!==(kt=d.backgroundOpacity)&&void 0!==kt?kt:1)}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),B;var d,J},Ht=(B,F,d)=>{switch(F){case D.$.TEXT:var J,ht;jQuery(B).text(null!==(J=null==d||null===(ht=d.text)||void 0===ht?void 0:ht.textContent)&&void 0!==J?J:"");break;case D.$.IMAGE:var ft,kt,Pt,Dt,zt,Ot,wt;jQuery(B).attr("href",(null==d||null===(ft=d.image)||void 0===ft?void 0:ft.base64)||(null!=d&&null!==(kt=d.image)&&void 0!==kt&&kt.path?`${null!==(Pt=null===(Dt=R.icdt.config)||void 0===Dt?void 0:Dt.readfileuploadurl)&&void 0!==Pt?Pt:""}${null!==(zt=null==d||null===(Ot=d.image)||void 0===Ot?void 0:Ot.path)&&void 0!==zt?zt:""}`:"")||(null==d||null===(wt=d.image)||void 0===wt?void 0:wt.url)||"");break;case D.$.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var $t,Lt;if(null!==($t=d.text)&&void 0!==$t&&$t.variableKeywords&&null!==(Lt=d.text)&&void 0!==Lt&&Lt.variableKeywords.length){var ve;let m=R.icdt.variable.getKeys(),P=(null===(ve=d.text)||void 0===ve?void 0:ve.textContent)||"";d.text.variableKeywords.forEach(I=>{var Q=I.replace(/[^a-zA-Z0-9_]/gm,"");if(m.indexOf(Q)>=0){var q=R.icdt.variable.getValue(Q);P=P.replace(I,q)}}),jQuery(B).text(P)}else{var H;jQuery(B).text((null===(H=d.text)||void 0===H?void 0:H.textContent)||"")}break;case"html":{var c,V,ot;let m=(null==d||null===(c=d.html)||void 0===c?void 0:c.htmlContent)||"";if(null!==(V=d.html)&&void 0!==V&&V.variableKeywords&&null!==(ot=d.html)&&void 0!==ot&&ot.variableKeywords.length){let P=R.icdt.variable.getKeys();d.html.variableKeywords.forEach(I=>{var Q=I.replace(/[^a-zA-Z0-9_]/gm,"");if(P.indexOf(Q)>=0){var q=R.icdt.variable.getValue(Q);m=m.replace(I,q)}})}jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${m}</div>`).find("img[path],video[path],iframe[path]").each((P,I)=>{var Q,q,X;I.setAttribute("src",(null!==(Q=null===(q=R.icdt.config)||void 0===q?void 0:q.readfileuploadurl)&&void 0!==Q?Q:"")+(null!==(X=I.getAttribute("path"))&&void 0!==X?X:"")),I.removeAttribute("path")});break}case"input":var Z,x,M,W;if(null!==(Z=d.input)&&void 0!==Z&&Z.input)jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(M=null===(W=d.input)||void 0===W?void 0:W.placeholder)&&void 0!==M?M:""}" maxlength="100" /></div>`);else if(null!==(x=d.input)&&void 0!==x&&x.textarea){var dt,vt;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(dt=null===(vt=d.input)||void 0===vt?void 0:vt.placeholder)&&void 0!==dt?dt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Ct,Tt,Wt,ie,Gt,Qt,Yt;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Ct=d.image)||void 0===Ct?void 0:Ct.base64)||(null!==(Tt=d.image)&&void 0!==Tt&&Tt.path?`${null!==(Wt=null===(ie=R.icdt.config)||void 0===ie?void 0:ie.readfileuploadurl)&&void 0!==Wt?Wt:""}${null!==(Gt=null===(Qt=d.image)||void 0===Qt?void 0:Qt.path)&&void 0!==Gt?Gt:""}`:"")||(null===(Yt=d.image)||void 0===Yt?void 0:Yt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var ce,le,ae,me,qe,We,ni;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${null!==(ce=d.iframe)&&void 0!==ce&&ce.path?`${null!==(le=null===(ae=R.icdt.config)||void 0===ae?void 0:ae.readfileuploadurl)&&void 0!==le?le:""}${null!==(me=null===(qe=d.iframe)||void 0===qe?void 0:qe.path)&&void 0!==me?me:""}`:null!==(We=null===(ni=d.iframe)||void 0===ni?void 0:ni.url)&&void 0!==We?We:""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ri,vi,Me,li,Ue,Ve;let m=(0,K.e)({readfileuploadurl:null===(ri=R.icdt.config)||void 0===ri?void 0:ri.readfileuploadurl,type:null===(vi=d.embed)||void 0===vi?void 0:vi.type,oss:null===(Me=d.embed)||void 0===Me?void 0:Me.oss,path:null===(li=d.embed)||void 0===li?void 0:li.path,pathExtract:null===(Ue=d.embed)||void 0===Ue?void 0:Ue.pathExtract,url:null===(Ve=d.embed)||void 0===Ve?void 0:Ve.url});jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${m}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ai,oi;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ai=null===(oi=d.svg)||void 0===oi?void 0:oi.svgContent)&&void 0!==ai?ai:""}</div>`);break;case"test":{var ti,Ze,si,mt;let m=(null==d||null===(ti=d.html)||void 0===ti?void 0:ti.htmlContent)||"";if(null!==(Ze=d.html)&&void 0!==Ze&&Ze.variableKeywords&&null!==(si=d.html)&&void 0!==si&&si.variableKeywords.length){let P=R.icdt.variable.getKeys();d.html.variableKeywords.forEach(I=>{var Q=I.replace(/[^a-zA-Z0-9_]/gm,"");if(P.indexOf(Q)>=0){var q=R.icdt.variable.getValue(Q);m=m.replace(I,q)}})}switch(null==d||null===(mt=d.test)||void 0===mt?void 0:mt.type){case"matching-empty":jQuery(B).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty"></div>');break;case"matching-content":var k,i;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content"><div class="ondrag-item" data-key="${null!==(k=null==d||null===(i=d.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==k?k:"KIEN"}" style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"singlechoice":case"multichoice":jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"fill":var n;((null===(n=d.html)||void 0===n?void 0:n.fillKeywords)||[]).forEach(P=>{var I=`<input type="text" maxlength="128" style="display:inline-block;width:80px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:content-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:left;" data-key="${P.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;m=m.replace(new RegExp(P.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),I)}),jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:start;align-items:center;width:100%;height:100%;">${m}</div></div>`);break;case"speech":jQuery(B).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var r,a,s,v,p,w,j;jQuery(B).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(r=null!==(a=null===(s=d.image)||void 0===s?void 0:s.url)&&void 0!==a?a:`${null!==(v=null===(p=R.icdt.config)||void 0===p?void 0:p.readfileuploadurl)&&void 0!==v?v:""}${null!==(w=null===(j=d.image)||void 0===j?void 0:j.path)&&void 0!==w?w:""}`)&&void 0!==r?r:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(B).find("img[path],video[path],iframe[path]").each((P,I)=>{var Q,q,X;I.setAttribute("src",(null!==(Q=null===(q=R.icdt.config)||void 0===q?void 0:q.readfileuploadurl)&&void 0!==Q?Q:"")+(null!==(X=I.getAttribute("path"))&&void 0!==X?X:"")),I.removeAttribute("path")})}}}},Et=(B,F,d,J)=>{let ht=jQuery(J||R.icdt.target).find("#"+B).get(0);return ht||(ht=window.document.createElementNS("http://www.w3.org/2000/svg",F),ht.setAttribute("id",B),jQuery(ht).appendTo(J||R.icdt.target)),jQuery(ht).attr((null==d?void 0:d.attribute)||{}),jQuery(ht).css((null==d?void 0:d.style)||{}),ht},Zt=(B,F)=>{let d=(0,b.v)(2),J={fill:y.S3.fill,stroke:y.S3.stroke,"stroke-width":(0,b.v)(y.S3.strokeWidth)};return[{element:Et("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:F.x-d,y:F.y-d,width:F.width+2*d,height:F.height+2*d},J)},B),posType:"rect-center"}]},Kt=(B,F)=>{let{size:d}=F,J=(0,b.v)(1),ht=(0,b.v)(2),ft=(0,b.v)(5),kt={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Pt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},Dt={fill:y.In.fill,stroke:y.In.stroke,"stroke-width":(0,b.v)(y.In.strokeWidth),width:(0,b.v)(y.In.width),height:(0,b.v)(y.In.height)};return Et("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-J,y1:d.y,x2:d.x-J,y2:d.y+d.height},kt)},B),Et("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-J,x2:d.x+d.width,y2:d.y-J},kt)},B),Et("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+J,y1:d.y,x2:d.x+d.width+J,y2:d.y+d.height},kt)},B),Et("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+J,x2:d.x+d.width,y2:d.y+d.height+J},kt)},B),[{element:Et("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Pt),style:{cursor:"move"}},B),posType:"rect-center"},{element:Et("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-ft,y:d.y-ft},Dt),style:{cursor:"nw-resize"}},B),posType:"rect-top-left"},{element:Et("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-ht,y:d.y-ft},Dt),style:{cursor:"ne-resize"}},B),posType:"rect-top-right"},{element:Et("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-ft,y:d.y+d.height-ht},Dt),style:{cursor:"sw-resize"}},B),posType:"rect-bottom-left"},{element:Et("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-ht,y:d.y+d.height-ht},Dt),style:{cursor:"se-resize"}},B),posType:"rect-bottom-right"}]},ut=(B,F,d)=>{let J=(0,b.v)(1),ht={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ft={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},kt={fill:y.dt.fill,stroke:y.dt.stroke,"stroke-width":(0,b.v)(y.dt.strokeWidth)},wt=(Et("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:d.x-J,y1:d.y,x2:d.x-J,y2:d.y+d.height},ht)},B),Et("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-J,x2:d.x+d.width,y2:d.y-J},ht)},B),Et("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:d.x+d.width+J,y1:d.y,x2:d.x+d.width+J,y2:d.y+d.height},ht)},B),Et("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+J,x2:d.x+d.width,y2:d.y+d.height+J},ht)},B),Et("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},ft)},B));return F.forEach($t=>{let{size:Lt}=$t;Et("icdt-temp-select-rect-node-"+$t.id,"rect",{attribute:Object.assign({x:Lt.x,y:Lt.y,width:Lt.width,height:Lt.height},kt)},B)}),[{element:wt,posType:"rect-center"}]},it=(B,F)=>{let d=(0,b.v)(1),J={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ht={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)};return Et("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:F.x-d,y1:F.y,x2:F.x-d,y2:F.y+F.height},J)},B),Et("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-d,x2:F.x+F.width,y2:F.y-d},J)},B),Et("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:F.x+F.width+d,y1:F.y,x2:F.x+F.width+d,y2:F.y+F.height},J)},B),Et("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+d,x2:F.x+F.width,y2:F.y+F.height+d},J)},B),[{element:Et("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},ht)},B),posType:"rect-center"}]},bt=(B,F)=>{let d=(0,b.v)(-1),J={stroke:y.h8.stroke,"stroke-width":(0,b.v)(y.h8.strokeWidth),"stroke-linecap":y.h8.strokeLinecap,"stroke-dasharray":(0,b.v)(y.h8.strokeDasharray)},ht={fill:y.MA.fill};return Et("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:F.x-d,y1:F.y,x2:F.x-d,y2:F.y+F.height},J)},B),Et("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-d,x2:F.x+F.width,y2:F.y-d},J)},B),Et("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:F.x+F.width+d,y1:F.y,x2:F.x+F.width+d,y2:F.y+F.height},J)},B),Et("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+d,x2:F.x+F.width,y2:F.y+F.height+d},J)},B),Et("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},ht)},B),[]},xt=(B,F)=>{let d={fill:y.k0.fill,stroke:y.k0.stroke,"stroke-width":(0,b.v)(y.k0.strokeWidth),"stroke-dasharray":(0,b.v)(y.k0.strokeDasharray)};jQuery(B).empty(),F.forEach(J=>{var ht,ft;let{size:kt}=J;if(!J.idx)return;Et("icdt-temp-index-rect-node-"+J.id,"rect",{attribute:Object.assign({x:kt.x-5,y:kt.y-5,width:kt.width+10,height:kt.height+10},d)},B);let{element:Pt}=(0,G.e)(Math.ceil(1e9*Math.random()),{size:{x:kt.x-76,y:kt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(ht=J.idx)&&void 0!==ht?ht:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(ft=J.time)&&void 0!==ft?ft:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},B);Pt.classList.add("node-input"),jQuery(Pt).on("change",'input[name="idx"]',Dt=>{var zt;J.idx=parseInt(null!==(zt=Dt.target.value)&&void 0!==zt?zt:"0")}).on("change",'input[name="time"]',Dt=>{var zt;J.time=parseFloat(null!==(zt=Dt.target.value)&&void 0!==zt?zt:"0")}).on("click",'button[name="remove"]',Dt=>{J.idx=0,J.time=null,xt(B,F)})})},Xt=(B,F)=>{var d,J,ht,ft;let{color:kt,opacity:Pt,path:Dt,url:zt,base64:Ot}=null!==(d=null==F||null===(J=F.svg)||void 0===J?void 0:J.background)&&void 0!==d?d:{},{x:wt,y:$t,width:Lt,height:ve}=null!==(ht=null==F||null===(ft=F.svg)||void 0===ft?void 0:ft.viewBox)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,z.f)(void 0,{size:{x:wt,y:$t,width:Lt,height:ve},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},B),kt&&(0,z.f)(void 0,{size:{x:wt,y:$t,width:Lt,height:ve},attribute:{fill:kt,fillOpacity:Pt}},B),Dt&&(0,S.G)(void 0,{size:{x:wt,y:$t,width:Lt,height:ve},source:{type:"image",image:{path:Dt,url:zt,base64:Ot}}},B)},pt=(B,F)=>{var d,J,Pt;if(jQuery(B).empty(),null!=F&&null!==(d=F.test)&&void 0!==d&&null!==(d=d.answer)&&void 0!==d&&d.singlechoice){var ft,kt;let Dt=C.$.findNode(null==F||null===(ft=F.test)||void 0===ft||null===(ft=ft.answer)||void 0===ft||null===(ft=ft.singlechoice)||void 0===ft?void 0:ft.value),{x:zt,y:Ot,width:wt,height:$t}=null!==(kt=null==Dt?void 0:Dt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,Y._)(Math.ceil(1e9*Math.random()),{size:{x:zt-2,y:Ot-2,width:wt+4,height:$t+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},B)}null!=F&&null!==(J=F.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.multichoice&&(null==F||null===(Pt=F.test)||void 0===Pt||null===(Pt=Pt.answer)||void 0===Pt||Pt.multichoice.forEach(Dt=>{var zt;let Ot=C.$.findNode(Dt.value),{x:wt,y:$t,width:Lt,height:ve}=null!==(zt=null==Ot?void 0:Ot.size)&&void 0!==zt?zt:{x:0,y:0,width:0,height:0};(0,z.f)(Math.ceil(1e9*Math.random()),{size:{x:wt-2,y:$t-2,width:Lt+4,height:ve+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},B)}))}},370:(he,At,f)=>{f.d(At,{e:()=>st});const st=h=>{switch(null==h?void 0:h.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+h.readfileuploadurl+h.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+h.readfileuploadurl+h.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+h.readfileuploadurl+h.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+h.readfileuploadurl+h.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+h.readfileuploadurl+h.path;case 906:case 911:case 910:return""+h.readfileuploadurl+h.path;case 905:var E;return"imsmanifest.xml"==(null===(E=h.pathExtract)||void 0===E||null===(E=E.split("/"))||void 0===E?void 0:E.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+h.readfileuploadurl+h.pathExtract:""+h.readfileuploadurl+h.path;case 907:case 900:return""+h.readfileuploadurl+h.path;case 904:switch(h.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+h.url;case 1002:var y;return null!==(y=T(h.url))&&void 0!==y?y:"";case 1005:var R;return null!==(R=h.url)&&void 0!==R?R:"";default:var b;return null!==(b=h.url)&&void 0!==b?b:""}default:return""+h.readfileuploadurl+h.path}},T=h=>{let E=U(h);return E?"https://www.youtube.com/embed/"+E+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},U=h=>{let E=null==h?void 0:h.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return E&&E.length>=2?E[1]:null}},511:(he,At,f)=>{function D(){}function O(t){return null==t?D:function(){return this.querySelector(t)}}function U(){return[]}function h(t){return null==t?U:function(){return this.querySelectorAll(t)}}function R(t){return function(){return this.matches(t)}}function b(t){return function(e){return e.matches(t)}}f.d(At,{$0Z:()=>aa,jvg:()=>la});var z=Array.prototype.find;function Y(){return this.firstElementChild}var G=Array.prototype.filter;function at(){return Array.from(this.children)}function _t(t){return new Array(t.length)}function rt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Rt(t,e,l,o,u,g){for(var A,_=0,N=e.length,nt=g.length;_<nt;++_)(A=e[_])?(A.__data__=g[_],o[_]=A):l[_]=new rt(t,g[_]);for(;_<N;++_)(A=e[_])&&(u[_]=A)}function Ht(t,e,l,o,u,g,_){var A,N,Jt,nt=new Map,lt=e.length,It=g.length,Nt=new Array(lt);for(A=0;A<lt;++A)(N=e[A])&&(Nt[A]=Jt=_.call(N,N.__data__,A,e)+"",nt.has(Jt)?u[A]=N:nt.set(Jt,N));for(A=0;A<It;++A)Jt=_.call(t,g[A],A,g)+"",(N=nt.get(Jt))?(o[A]=N,N.__data__=g[A],nt.delete(Jt)):l[A]=new rt(t,g[A]);for(A=0;A<lt;++A)(N=e[A])&&nt.get(Nt[A])===N&&(u[A]=N)}function jt(t){return t.__data__}function Zt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Xt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}rt.prototype={constructor:rt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ft="http://www.w3.org/1999/xhtml";const kt={svg:"http://www.w3.org/2000/svg",xhtml:ft,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pt(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),kt.hasOwnProperty(e)?{space:kt[e],local:t}:t}function Dt(t){return function(){this.removeAttribute(t)}}function zt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ot(t,e){return function(){this.setAttribute(t,e)}}function wt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $t(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Lt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function H(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function c(t){return function(){this.style.removeProperty(t)}}function V(t,e,l){return function(){this.style.setProperty(t,e,l)}}function ot(t,e,l){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,l)}}function x(t,e){return t.style.getPropertyValue(e)||H(t).getComputedStyle(t,null).getPropertyValue(e)}function M(t){return function(){delete this[t]}}function W(t,e){return function(){this[t]=e}}function dt(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function Ct(t){return t.trim().split(/^|\s+/)}function Tt(t){return t.classList||new Wt(t)}function Wt(t){this._node=t,this._names=Ct(t.getAttribute("class")||"")}function ie(t,e){for(var l=Tt(t),o=-1,u=e.length;++o<u;)l.add(e[o])}function Gt(t,e){for(var l=Tt(t),o=-1,u=e.length;++o<u;)l.remove(e[o])}function Qt(t){return function(){ie(this,t)}}function Yt(t){return function(){Gt(this,t)}}function ce(t,e){return function(){(e.apply(this,arguments)?ie:Gt)(this,t)}}function ae(){this.textContent=""}function me(t){return function(){this.textContent=t}}function qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ni(){this.innerHTML=""}function ri(t){return function(){this.innerHTML=t}}function vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function Ve(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===ft&&e.documentElement.namespaceURI===ft?e.createElement(t):e.createElementNS(l,t)}}function ti(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ze(t){var e=Pt(t);return(e.local?ti:oi)(e)}function mt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j(t){return function(){var e=this.__on;if(e){for(var g,l=0,o=-1,u=e.length;l<u;++l)g=e[l],t.type&&g.type!==t.type||g.name!==t.name?e[++o]=g:this.removeEventListener(g.type,g.listener,g.options);++o?e.length=o:delete this.__on}}}function m(t,e,l){return function(){var u,o=this.__on,g=function p(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var _=0,A=o.length;_<A;++_)if((u=o[_]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=g,u.options=l),void(u.value=e);this.addEventListener(t.type,g,l),u={type:t.type,name:t.name,value:e,listener:g,options:l},o?o.push(u):this.__on=[u]}}function I(t,e,l){var o=H(t),u=o.CustomEvent;"function"==typeof u?u=new u(e,l):(u=o.document.createEvent("Event"),l?(u.initEvent(e,l.bubbles,l.cancelable),u.detail=l.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function Q(t,e){return function(){return I(this,t,e)}}function q(t,e){return function(){return I(this,t,e.apply(this,arguments))}}Wt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var oe=[null];function fe(t,e){this._groups=t,this._parents=e}function ye(){return new fe([[document.documentElement]],oe)}fe.prototype=ye.prototype={constructor:fe,select:function st(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,nt,g=e[u],_=g.length,A=o[u]=new Array(_),lt=0;lt<_;++lt)(N=g[lt])&&(nt=t.call(N,N.__data__,lt,g))&&("__data__"in N&&(nt.__data__=N.__data__),A[lt]=nt);return new fe(o,this._parents)},selectAll:function y(t){t="function"==typeof t?function E(t){return function(){return function T(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,l=e.length,o=[],u=[],g=0;g<l;++g)for(var N,_=e[g],A=_.length,nt=0;nt<A;++nt)(N=_[nt])&&(o.push(t.call(N,N.__data__,nt,_)),u.push(N));return new fe(o,u)},selectChild:function C(t){return this.select(null==t?Y:function S(t){return function(){return z.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function et(t){return this.selectAll(null==t?at:function K(t){return function(){return G.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function gt(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,g=e[u],_=g.length,A=o[u]=[],nt=0;nt<_;++nt)(N=g[nt])&&t.call(N,N.__data__,nt,g)&&A.push(N);return new fe(o,this._parents)},data:function Et(t,e){if(!arguments.length)return Array.from(this,jt);var l=e?Ht:Rt,o=this._parents,u=this._groups;"function"!=typeof t&&(t=function L(t){return function(){return t}}(t));for(var g=u.length,_=new Array(g),A=new Array(g),N=new Array(g),nt=0;nt<g;++nt){var lt=o[nt],It=u[nt],Nt=It.length,Jt=Zt(t.call(lt,lt&&lt.__data__,nt,o)),_e=Jt.length,Ee=A[nt]=new Array(_e),Mt=_[nt]=new Array(_e);l(lt,It,Ee,Mt,N[nt]=new Array(Nt),Jt,e);for(var se,ge,ee=0,Vt=0;ee<_e;++ee)if(se=Ee[ee]){for(ee>=Vt&&(Vt=ee+1);!(ge=Mt[Vt])&&++Vt<_e;);se._next=ge||null}}return(_=new fe(_,o))._enter=A,_._exit=N,_},enter:function ct(){return new fe(this._enter||this._groups.map(_t),this._parents)},exit:function Kt(){return new fe(this._exit||this._groups.map(_t),this._parents)},join:function ut(t,e,l){var o=this.enter(),u=this,g=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(u=e(u))&&(u=u.selection()),null==l?g.remove():l(g),o&&u?o.merge(u).order():u},merge:function it(t){for(var e=t.selection?t.selection():t,l=this._groups,o=e._groups,u=l.length,_=Math.min(u,o.length),A=new Array(u),N=0;N<_;++N)for(var Jt,nt=l[N],lt=o[N],It=nt.length,Nt=A[N]=new Array(It),_e=0;_e<It;++_e)(Jt=nt[_e]||lt[_e])&&(Nt[_e]=Jt);for(;N<u;++N)A[N]=l[N];return new fe(A,this._parents)},selection:function be(){return this},order:function bt(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var _,o=t[e],u=o.length-1,g=o[u];--u>=0;)(_=o[u])&&(g&&4^_.compareDocumentPosition(g)&&g.parentNode.insertBefore(_,g),g=_);return this},sort:function xt(t){function e(It,Nt){return It&&Nt?t(It.__data__,Nt.__data__):!It-!Nt}t||(t=Xt);for(var l=this._groups,o=l.length,u=new Array(o),g=0;g<o;++g){for(var nt,_=l[g],A=_.length,N=u[g]=new Array(A),lt=0;lt<A;++lt)(nt=_[lt])&&(N[lt]=nt);N.sort(e)}return new fe(u,this._parents).order()},call:function pt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function B(){return Array.from(this)},node:function F(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var o=t[e],u=0,g=o.length;u<g;++u){var _=o[u];if(_)return _}return null},size:function d(){let t=0;for(const e of this)++t;return t},empty:function J(){return!this.node()},each:function ht(t){for(var e=this._groups,l=0,o=e.length;l<o;++l)for(var A,u=e[l],g=0,_=u.length;g<_;++g)(A=u[g])&&t.call(A,A.__data__,g,u);return this},attr:function ve(t,e){var l=Pt(t);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((null==e?l.local?zt:Dt:"function"==typeof e?l.local?Lt:$t:l.local?wt:Ot)(l,e))},style:function Z(t,e,l){return arguments.length>1?this.each((null==e?c:"function"==typeof e?ot:V)(t,e,null==l?"":l)):x(this.node(),t)},property:function vt(t,e){return arguments.length>1?this.each((null==e?M:"function"==typeof e?dt:W)(t,e)):this.node()[t]},classed:function le(t,e){var l=Ct(t+"");if(arguments.length<2){for(var o=Tt(this.node()),u=-1,g=l.length;++u<g;)if(!o.contains(l[u]))return!1;return!0}return this.each(("function"==typeof e?ce:e?Qt:Yt)(l,e))},text:function We(t){return arguments.length?this.each(null==t?ae:("function"==typeof t?qe:me)(t)):this.node().textContent},html:function Me(t){return arguments.length?this.each(null==t?ni:("function"==typeof t?vi:ri)(t)):this.node().innerHTML},raise:function Ue(){return this.each(li)},lower:function ai(){return this.each(Ve)},append:function si(t){var e="function"==typeof t?t:Ze(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function k(t,e){var l="function"==typeof t?t:Ze(t),o=null==e?mt:"function"==typeof e?e:O(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function s(t){return this.select(t?a:r)},datum:function v(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function P(t,e,l){var u,_,o=function w(t){return t.trim().split(/^|\s+/).map(function(e){var l="",o=e.indexOf(".");return o>=0&&(l=e.slice(o+1),e=e.slice(0,o)),{type:e,name:l}})}(t+""),g=o.length;if(!(arguments.length<2)){for(A=e?m:j,u=0;u<g;++u)this.each(A(o[u],e,l));return this}var A=this.node().__on;if(A)for(var lt,N=0,nt=A.length;N<nt;++N)for(u=0,lt=A[N];u<g;++u)if((_=o[u]).type===lt.type&&_.name===lt.name)return lt.value},dispatch:function X(t,e){return this.each(("function"==typeof e?q:Q)(t,e))},[Symbol.iterator]:function*Ut(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var _,o=t[e],u=0,g=o.length;u<g;++u)(_=o[u])&&(yield _)}};const pe=ye;var Oe={value:()=>{}};function vn(){for(var o,t=0,e=arguments.length,l={};t<e;++t){if(!(o=arguments[t]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new Pi(l)}function Pi(t){this._=t}function ar(t,e){for(var u,l=0,o=t.length;l<o;++l)if((u=t[l]).name===e)return u.value}function gn(t,e,l){for(var o=0,u=t.length;o<u;++o)if(t[o].name===e){t[o]=Oe,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=l&&t.push({name:e,value:l}),t}Pi.prototype=vn.prototype={constructor:Pi,on:function(t,e){var u,l=this._,o=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var o="",u=l.indexOf(".");if(u>=0&&(o=l.slice(u+1),l=l.slice(0,u)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}(t+"",l),g=-1,_=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++g<_;)if(u=(t=o[g]).type)l[u]=gn(l[u],t.name,e);else if(null==e)for(u in l)l[u]=gn(l[u],t.name,null);return this}for(;++g<_;)if((u=(t=o[g]).type)&&(u=ar(l[u],t.name)))return u},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Pi(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var u,g,l=new Array(u),o=0;o<u;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,u=(g=this._[t]).length;o<u;++o)g[o].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],u=0,g=o.length;u<g;++u)o[u].value.apply(e,l)}};const or=vn;var Ri,Oi,gi=0,xi=0,Ei=0,yn=1e3,Li=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return di||(pn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,l){var o=new ji;return o.restart(t,e,l),o}function _n(){di=(Li=Si.now())+Di,gi=xi=0;try{!function dr(){Xi(),++gi;for(var e,t=Ri;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}()}finally{gi=0,function hr(){for(var t,l,e=Ri,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ri=l);Oi=t,$i(o)}(),di=0}}function ur(){var t=Si.now(),e=t-Li;e>yn&&(Di-=e,Li=t)}function $i(t){gi||(xi&&(xi=clearTimeout(xi)),t-di>24?(t<1/0&&(xi=setTimeout(_n,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Li=Si.now(),Ei=setInterval(ur,yn)),gi=1,pn(_n)))}function wn(t,e,l){var o=new ji;return o.restart(u=>{o.stop(),t(u+e)},e=null==e?0:+e,l),o}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Xi():+l)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ri=this,Oi=this),this._call=t,this._time=l,$i()},stop:function(){this._call&&(this._call=null,this._time=1/0,$i())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Bi=3;function Ki(t,e,l,o,u,g){var _=t.__transition;if(_){if(l in _)return}else t.__transition={};!function vr(t,e,l){var u,o=t.__transition;function _(nt){var lt,It,Nt,Jt;if(1!==l.state)return N();for(lt in o)if((Jt=o[lt]).name===l.name){if(Jt.state===Bi)return wn(_);4===Jt.state?(Jt.state=6,Jt.timer.stop(),Jt.on.call("interrupt",t,t.__data__,Jt.index,Jt.group),delete o[lt]):+lt<e&&(Jt.state=6,Jt.timer.stop(),Jt.on.call("cancel",t,t.__data__,Jt.index,Jt.group),delete o[lt])}if(wn(function(){l.state===Bi&&(l.state=4,l.timer.restart(A,l.delay,l.time),A(nt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=Bi,u=new Array(Nt=l.tween.length),lt=0,It=-1;lt<Nt;++lt)(Jt=l.tween[lt].value.call(t,t.__data__,l.index,l.group))&&(u[++It]=Jt);u.length=It+1}}function A(nt){for(var lt=nt<l.duration?l.ease.call(null,nt/l.duration):(l.timer.restart(N),l.state=5,1),It=-1,Nt=u.length;++It<Nt;)u[It].call(t,lt);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),N())}function N(){for(var nt in l.state=6,l.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=l,l.timer=mn(function g(nt){l.state=1,l.timer.restart(_,l.delay,l.time),l.delay<=nt&&_(nt-l.delay)},0,l.time)}(t,l,{name:e,index:o,group:u,on:cr,tween:fr,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:bn})}function tn(t,e){var l=Ge(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function Qe(t,e){var l=Ge(t,e);if(l.state>Bi)throw new Error("too late; already running");return l}function Ge(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ei(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Wi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,o,u,g){var _,A,N;return(_=Math.sqrt(t*t+e*e))&&(t/=_,e/=_),(N=t*l+e*o)&&(l-=t*N,o-=e*N),(A=Math.sqrt(l*l+o*o))&&(l/=A,o/=A,N/=A),t*o<e*l&&(t=-t,e=-e,N=-N,_=-_),{translateX:u,translateY:g,rotate:Math.atan2(e,t)*On,skewX:Math.atan(N)*On,scaleX:_,scaleY:A}}function kn(t,e,l,o){function u(nt){return nt.length?nt.pop()+" ":""}return function(nt,lt){var It=[],Nt=[];return nt=t(nt),lt=t(lt),function g(nt,lt,It,Nt,Jt,_e){if(nt!==It||lt!==Nt){var Ee=Jt.push("translate(",null,e,null,l);_e.push({i:Ee-4,x:ei(nt,It)},{i:Ee-2,x:ei(lt,Nt)})}else(It||Nt)&&Jt.push("translate("+It+e+Nt+l)}(nt.translateX,nt.translateY,lt.translateX,lt.translateY,It,Nt),function _(nt,lt,It,Nt){nt!==lt?(nt-lt>180?lt+=360:lt-nt>180&&(nt+=360),Nt.push({i:It.push(u(It)+"rotate(",null,o)-2,x:ei(nt,lt)})):lt&&It.push(u(It)+"rotate("+lt+o)}(nt.rotate,lt.rotate,It,Nt),function A(nt,lt,It,Nt){nt!==lt?Nt.push({i:It.push(u(It)+"skewX(",null,o)-2,x:ei(nt,lt)}):lt&&It.push(u(It)+"skewX("+lt+o)}(nt.skewX,lt.skewX,It,Nt),function N(nt,lt,It,Nt,Jt,_e){if(nt!==It||lt!==Nt){var Ee=Jt.push(u(Jt)+"scale(",null,",",null,")");_e.push({i:Ee-4,x:ei(nt,It)},{i:Ee-2,x:ei(lt,Nt)})}else(1!==It||1!==Nt)&&Jt.push(u(Jt)+"scale("+It+","+Nt+")")}(nt.scaleX,nt.scaleY,lt.scaleX,lt.scaleY,It,Nt),nt=lt=null,function(Jt){for(var Mt,_e=-1,Ee=Nt.length;++_e<Ee;)It[(Mt=Nt[_e]).i]=Mt.x(Jt);return It.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function br(t,e){var l,o;return function(){var u=Qe(this,t),g=u.tween;if(g!==l)for(var _=0,A=(o=l=g).length;_<A;++_)if(o[_].name===e){(o=o.slice()).splice(_,1);break}u.tween=o}}function xr(t,e,l){var o,u;if("function"!=typeof l)throw new Error;return function(){var g=Qe(this,t),_=g.tween;if(_!==o){u=(o=_).slice();for(var A={name:e,value:l},N=0,nt=u.length;N<nt;++N)if(u[N].name===e){u[N]=A;break}N===nt&&u.push(A)}g.tween=u}}function nn(t,e,l){var o=t._id;return t.each(function(){var u=Qe(this,o);(u.value||(u.value={}))[e]=l.apply(this,arguments)}),function(u){return Ge(u,o).value[e]}}function rn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Tn(t,e){var l=Object.create(t.prototype);for(var o in e)l[o]=e[o];return l}function ki(){}var Ui=1/.7,yi="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),kr=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),Tr=new RegExp(`^rgba\\(${yi},${yi},${yi},${Mi}\\)$`),Mr=new RegExp(`^rgba\\(${He},${He},${He},${Mi}\\)$`),Cr=new RegExp(`^hsl\\(${Mi},${He},${He}\\)$`),Ar=new RegExp(`^hsla\\(${Mi},${He},${He},${Mi}\\)$`),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?In(e):3===l?new De(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new De(e[1],e[2],e[3],1):(e=kr.exec(t))?new De(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Mr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Mn.hasOwnProperty(t)?In(Mn[t]):"transparent"===t?new De(NaN,NaN,NaN,0):null}function In(t){return new De(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,o){return o<=0&&(t=e=l=NaN),new De(t,e,l,o)}function Fi(t,e,l,o){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new De((t=t.rgb()).r,t.g,t.b,t.opacity):new De}(t):new De(t,e,l,null==o?1:o)}function De(t,e,l,o){this.r=+t,this.g=+e,this.b=+l,this.opacity=+o}function Nn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Qi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Rn(t,e,l,o){return o<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Fe(t,e,l,o)}function Ln(t){if(t instanceof Fe)return new Fe(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Fe;if(t instanceof Fe)return t;var e=(t=t.rgb()).r/255,l=t.g/255,o=t.b/255,u=Math.min(e,l,o),g=Math.max(e,l,o),_=NaN,A=g-u,N=(g+u)/2;return A?(_=e===g?(l-o)/A+6*(l<o):l===g?(o-e)/A+2:(e-l)/A+4,A/=N<.5?g+u:2-g-u,_*=60):A=N>0&&N<1?0:_,new Fe(_,A,N,t.opacity)}function Fe(t,e,l,o){this.h=+t,this.s=+e,this.l=+l,this.opacity=+o}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,o,u){var g=t*t,_=g*t;return((1-3*t+3*g-_)*e+(4-6*g+3*_)*l+(1+3*t+3*g-3*_)*o+_*u)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Nr(){return Ln(this).formatHsl()},formatRgb:An,toString:An}),rn(De,Fi,Tn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new De(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new De(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new De(ui(this.r),ui(this.g),ui(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:function Rr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Fe,function Lr(t,e,l,o){return 1===arguments.length?Ln(t):new Fe(t,e,l,null==o?1:o)},Tn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Fe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Fe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,o=l+(l<.5?l:1-l)*e,u=2*l-o;return new De(ln(t>=240?t-240:t+120,u,o),ln(t,u,o),ln(t<120?t+240:t-120,u,o),this.opacity)},clamp(){return new Fe(Dn(this.h),Hi(this.s),Hi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const Bn=t=>()=>t;function Kn(t,e){var l=e-t;return l?function zn(t,e){return function(l){return t+l*e}}(t,l):Bn(isNaN(t)?e:t)}const Wn=function t(e){var l=function zr(t){return 1==(t=+t)?Kn:function(e,l){return l-e?function Br(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(o){return Math.pow(t+o*e,l)}}(e,l,t):Bn(isNaN(e)?l:e)}}(e);function o(u,g){var _=l((u=Fi(u)).r,(g=Fi(g)).r),A=l(u.g,g.g),N=l(u.b,g.b),nt=Kn(u.opacity,g.opacity);return function(lt){return u.r=_(lt),u.g=A(lt),u.b=N(lt),u.opacity=nt(lt),u+""}}return o.gamma=t,o}(1);function Un(t){return function(e){var _,A,l=e.length,o=new Array(l),u=new Array(l),g=new Array(l);for(_=0;_<l;++_)A=Fi(e[_]),o[_]=A.r||0,u[_]=A.g||0,g[_]=A.b||0;return o=t(o),u=t(u),g=t(g),A.opacity=1,function(N){return A.r=o(N),A.g=u(N),A.b=g(N),A+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var o=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),u=t[o],g=t[o+1];return jn((l-o/e)*e,o>0?t[o-1]:2*u-g,u,g,o<e-1?t[o+2]:2*g-u)}}),Un(function jr(t){var e=t.length;return function(l){var o=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-o/e)*e,t[(o+e-1)%e],t[o%e],t[(o+1)%e],t[(o+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var o,u,g,l=an.lastIndex=on.lastIndex=0,_=-1,A=[],N=[];for(t+="",e+="";(o=an.exec(t))&&(u=on.exec(e));)(g=u.index)>l&&(g=e.slice(l,g),A[_]?A[_]+=g:A[++_]=g),(o=o[0])===(u=u[0])?A[_]?A[_]+=u:A[++_]=u:(A[++_]=null,N.push({i:_,x:ei(o,u)})),l=on.lastIndex;return l<e.length&&(g=e.slice(l),A[_]?A[_]+=g:A[++_]=g),A.length<2?N[0]?function Wr(t){return function(e){return t(e)+""}}(N[0].x):function Kr(t){return function(){return t}}(e):(e=N.length,function(nt){for(var It,lt=0;lt<e;++lt)A[(It=N[lt]).i]=It.x(nt);return A.join("")})}function Gn(t,e){var l;return("number"==typeof e?ei:e instanceof Ci?Wn:(l=Ci(e))?(e=l,Wn):Ur)(t,e)}function Gr(t){return function(){this.removeAttribute(t)}}function Fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var o,g,u=l+"";return function(){var _=this.getAttribute(t);return _===u?null:_===o?g:g=e(o=_,l)}}function Hr(t,e,l){var o,g,u=l+"";return function(){var _=this.getAttributeNS(t.space,t.local);return _===u?null:_===o?g:g=e(o=_,l)}}function Jr(t,e,l){var o,u,g;return function(){var _,N,A=l(this);return null==A?void this.removeAttribute(t):(_=this.getAttribute(t))===(N=A+"")?null:_===o&&N===u?g:(u=N,g=e(o=_,A))}}function Vr(t,e,l){var o,u,g;return function(){var _,N,A=l(this);return null==A?void this.removeAttributeNS(t.space,t.local):(_=this.getAttributeNS(t.space,t.local))===(N=A+"")?null:_===o&&N===u?g:(u=N,g=e(o=_,A))}}function Yr(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function $r(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,g)),l}return u._value=e,u}function qr(t,e){var l,o;function u(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Xr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,g)),l}return u._value=e,u}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){Qe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){Qe(this,t).duration=e}}var wl=pe.prototype.constructor;function Fn(t){return function(){this.style.removeProperty(t)}}var Bl=0;function Xe(t,e,l,o){this._groups=t,this._parents=e,this._name=l,this._id=o}function Qn(){return++Bl}var $e=pe.prototype;Xe.prototype=function zl(t){return pe().transition(t)}.prototype={constructor:Xe,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=O(t));for(var o=this._groups,u=o.length,g=new Array(u),_=0;_<u;++_)for(var lt,It,A=o[_],N=A.length,nt=g[_]=new Array(N),Nt=0;Nt<N;++Nt)(lt=A[Nt])&&(It=t.call(lt,lt.__data__,Nt,A))&&("__data__"in lt&&(It.__data__=lt.__data__),nt[Nt]=It,Ki(nt[Nt],e,l,Nt,nt,Ge(lt,l)));return new Xe(g,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=h(t));for(var o=this._groups,u=o.length,g=[],_=[],A=0;A<u;++A)for(var lt,N=o[A],nt=N.length,It=0;It<nt;++It)if(lt=N[It]){for(var Jt,Nt=t.call(lt,lt.__data__,It,N),_e=Ge(lt,l),Ee=0,Mt=Nt.length;Ee<Mt;++Ee)(Jt=Nt[Ee])&&Ki(Jt,e,l,Ee,Nt,_e);g.push(Nt),_.push(lt)}return new Xe(g,_,e,l)},selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,l=e.length,o=new Array(l),u=0;u<l;++u)for(var N,g=e[u],_=g.length,A=o[u]=[],nt=0;nt<_;++nt)(N=g[nt])&&t.call(N,N.__data__,nt,g)&&A.push(N);return new Xe(o,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,o=e.length,g=Math.min(o,l.length),_=new Array(o),A=0;A<g;++A)for(var Nt,N=e[A],nt=l[A],lt=N.length,It=_[A]=new Array(lt),Jt=0;Jt<lt;++Jt)(Nt=N[Jt]||nt[Jt])&&(It[Jt]=Nt);for(;A<o;++A)_[A]=e[A];return new Xe(_,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),o=this._groups,u=o.length,g=0;g<u;++g)for(var N,_=o[g],A=_.length,nt=0;nt<A;++nt)if(N=_[nt]){var lt=Ge(N,e);Ki(N,t,l,nt,_,{time:lt.time+lt.delay+lt.duration,delay:0,duration:lt.duration,ease:lt.ease})}return new Xe(o,this._parents,t,l)},call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:function gl(t,e){var l=this._id;return arguments.length<2?Ge(this.node(),l).on.on(t):this.each(function vl(t,e,l){var o,u,g=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?tn:Qe;return function(){var _=g(this,t),A=_.on;A!==o&&(u=(o=A).copy()).on(e,l),_.on=u}}(l,t,e))},attr:function Zr(t,e){var l=Pt(t),o="transform"===l?wr:Gn;return this.attrTween(t,"function"==typeof e?(l.local?Vr:Jr)(l,o,nn(this,"attr."+t,e)):null==e?(l.local?Fr:Gr)(l):(l.local?Hr:Qr)(l,o,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var o=Pt(t);return this.tween(l,(o.local?Yr:qr)(o,e))},style:function kl(t,e,l){var o="transform"==(t+="")?_r:Gn;return null==e?this.styleTween(t,function xl(t,e){var l,o,u;return function(){var g=x(this,t),_=(this.style.removeProperty(t),x(this,t));return g===_?null:g===l&&_===o?u:u=e(l=g,o=_)}}(t,o)).on("end.style."+t,Fn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var o,u,g;return function(){var _=x(this,t),A=l(this),N=A+"";return null==A&&(this.style.removeProperty(t),N=A=x(this,t)),_===N?null:_===o&&N===u?g:(u=N,g=e(o=_,A))}}(t,o,nn(this,"style."+t,e))).each(function Sl(t,e){var l,o,u,A,g="style."+e,_="end."+g;return function(){var N=Qe(this,t),nt=N.on,lt=null==N.value[g]?A||(A=Fn(e)):void 0;(nt!==l||u!==lt)&&(o=(l=nt).copy()).on(_,u=lt),N.on=o}}(this._id,t)):this.styleTween(t,function El(t,e,l){var o,g,u=l+"";return function(){var _=x(this,t);return _===u?null:_===o?g:g=e(o=_,l)}}(t,o,e),l).on("end.style."+t,null)},styleTween:function Cl(t,e,l){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function Ml(t,e,l){var o,u;function g(){var _=e.apply(this,arguments);return _!==u&&(o=(u=_)&&function Tl(t,e,l){return function(o){this.style.setProperty(t,e.call(this,o),l)}}(t,_,l)),o}return g._value=e,g}(t,e,null==l?"":l))},text:function Nl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,l;function o(){var u=t.apply(this,arguments);return u!==l&&(e=(l=u)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(u)),e}return o._value=t,o}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var _,o=Ge(this.node(),l).tween,u=0,g=o.length;u<g;++u)if((_=o[u]).name===t)return _.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ge(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ge(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){Qe(this,t).ease=e}}(e,t)):Ge(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;Qe(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,o=l._id,u=l.size();return new Promise(function(g,_){var A={value:_},N={value:function(){0==--u&&g()}};l.each(function(){var nt=Qe(this,o),lt=nt.on;lt!==t&&((e=(t=lt).copy())._.cancel.push(A),e._.interrupt.push(A),e._.end.push(N)),nt.on=e}),0===u&&g()})},[Symbol.iterator]:$e[Symbol.iterator]};var Wl={time:null,delay:0,duration:250,ease:function Kl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}pe.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var o,u,_,l=t.__transition,g=!0;if(l){for(_ in e=null==e?null:e+"",l)(o=l[_]).name===e?(u=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(u?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete l[_]):g=!1;g&&delete t.__transition}}(this,t)})},pe.prototype.transition=function Gl(t){var e,l;t instanceof Xe?(e=t._id,t=t._name):(e=Qn(),(l=Wl).time=Xi(),t=null==t?null:t+"");for(var o=this._groups,u=o.length,g=0;g<u;++g)for(var N,_=o[g],A=_.length,nt=0;nt<A;++nt)(N=_[nt])&&Ki(N,t,e,nt,_,l||Ul(N,e));return new Xe(o,this._parents,t,e)};Math;function Ai(t){return{type:t}}function _i(t){return function(){return t}}function $n(t){this._context=t}function Yl(t){return new $n(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),$n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,fn=2*cn,ci=1e-6,ql=fn-ci;function Yn(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Yn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Yn;const l=10**e;return function(o){this._+=o[0];for(let u=1,g=o.length;u<g;++u)this._+=Math.round(arguments[u]*l)/l+o[u]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,o,u){this._append`Q${+e},${+l},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(e,l,o,u,g,_){this._append`C${+e},${+l},${+o},${+u},${this._x1=+g},${this._y1=+_}`}arcTo(e,l,o,u,g){if(e=+e,l=+l,o=+o,u=+u,(g=+g)<0)throw new Error(`negative radius: ${g}`);let _=this._x1,A=this._y1,N=o-e,nt=u-l,lt=_-e,It=A-l,Nt=lt*lt+It*It;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Nt>ci)if(Math.abs(It*N-nt*lt)>ci&&g){let Jt=o-_,_e=u-A,Ee=N*N+nt*nt,Mt=Jt*Jt+_e*_e,St=Math.sqrt(Ee),ee=Math.sqrt(Nt),Vt=g*Math.tan((cn-Math.acos((Ee+Nt-Mt)/(2*St*ee)))/2),se=Vt/ee,ge=Vt/St;Math.abs(se-1)>ci&&this._append`L${e+se*lt},${l+se*It}`,this._append`A${g},${g},0,0,${+(It*Jt>lt*_e)},${this._x1=e+ge*N},${this._y1=l+ge*nt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,o,u,g,_){if(e=+e,l=+l,_=!!_,(o=+o)<0)throw new Error(`negative radius: ${o}`);let A=o*Math.cos(u),N=o*Math.sin(u),nt=e+A,lt=l+N,It=1^_,Nt=_?u-g:g-u;null===this._x1?this._append`M${nt},${lt}`:(Math.abs(this._x1-nt)>ci||Math.abs(this._y1-lt)>ci)&&this._append`L${nt},${lt}`,o&&(Nt<0&&(Nt=Nt%fn+fn),Nt>ql?this._append`A${o},${o},0,1,${It},${e-A},${l-N}A${o},${o},0,1,${It},${this._x1=nt},${this._y1=lt}`:Nt>ci&&this._append`A${o},${o},0,${+(Nt>=cn)},${It},${this._x1=e+o*Math.cos(g)},${this._y1=l+o*Math.sin(g)}`)}rect(e,l,o,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=_i(!0),o=null,u=Yl,g=null,_=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const o=Math.floor(l);if(!(o>=0))throw new RangeError(`invalid digits: ${l}`);e=o}return t},()=>new Zi(e)}(A);function A(N){var nt,It,Jt,lt=(N=function $l(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(N)).length,Nt=!1;for(null==o&&(g=u(Jt=_())),nt=0;nt<=lt;++nt)!(nt<lt&&l(It=N[nt],nt,N))===Nt&&((Nt=!Nt)?g.lineStart():g.lineEnd()),Nt&&g.point(+t(It,nt,N),+e(It,nt,N));if(Jt)return g=null,Jt+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),A.x=function(N){return arguments.length?(t="function"==typeof N?N:_i(+N),A):t},A.y=function(N){return arguments.length?(e="function"==typeof N?N:_i(+N),A):e},A.defined=function(N){return arguments.length?(l="function"==typeof N?N:_i(!!N),A):l},A.curve=function(N){return arguments.length?(u=N,null!=o&&(g=u(o)),A):u},A.context=function(N){return arguments.length?(null==N?o=g=null:g=u(o=N),A):o},A}function qn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);