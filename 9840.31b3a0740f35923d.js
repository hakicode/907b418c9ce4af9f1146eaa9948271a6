"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9840],{1461:(I,A,p)=>{p.d(A,{N:()=>x,b:()=>E});var f=p(4459);function x(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,f.cd)({url:"api/Category/Search",params:{category_id:e.params.category_id||null,category_title:e.params.category_title||null,createdby:e.params.createdby||null,level:e.params.level||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}function E(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,f.cd)({url:"api/Category/SearchTreeList",params:{getby:e.params.userid||null,category_id:e.params.category_id||null,category_pid:e.params.category_pid||null,category_title:e.params.category_title||null,active:e.params.active||null,topic_id:e.params.topic_id||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}},203:(I,A,p)=>{p.d(A,{AY:()=>x,ef:()=>l,nC:()=>e,v9:()=>E});var f=p(4459);const x=c=>{var h,v,b,t;c.params=c.params||{},c.params.page=c.params.page||1,c.params.limit=c.params.limit||1,(0,f.cd)({url:"api/ProductPackage/Search",params:{getby:null!==(h=c.params.userid)&&void 0!==h?h:null,userid:null!==(v=c.params.userid)&&void 0!==v?v:null,productpackage_id:null!==(b=c.params.productpackage_id)&&void 0!==b?b:null,productpackage_key:null!==(t=c.params.productpackage_key)&&void 0!==t?t:null,iseffect:!0,ispublic:!0,sortfield:"ordinal",sorttype:"asc",posstart:(c.params.page-1)*c.params.limit,numofrow:c.params.limit},success:O=>{var n;"function"==typeof c.callback&&c.callback(null!==(n=O.data)&&void 0!==n?n:null)},error:O=>{"function"==typeof c.callback&&c.callback(),console.error(O)},loading:c.loading})},E=c=>{var h,v,b;c.params=c.params||{},(0,f.cd)({url:"api/ProductPackage/Detail",params:{getby:null!==(h=c.params.userid)&&void 0!==h?h:null,productpackage_id:null!==(v=c.params.productpackage_id)&&void 0!==v?v:null,productpackage_key:null!==(b=c.params.productpackage_key)&&void 0!==b?b:null},success:t=>{var O;"function"==typeof c.callback&&c.callback(null!==(O=t.data)&&void 0!==O?O:null)},error:t=>{"function"==typeof c.callback&&c.callback(),console.error(t)},loading:c.loading})},e=c=>{var h;c.params=c.params||{},(0,f.cd)({url:"api/ProductPackage/AppliedPackage",params:{userid:null!==(h=c.params.userid)&&void 0!==h?h:null},success:v=>{var b;"function"==typeof c.callback&&c.callback(null!==(b=v.data)&&void 0!==b?b:null)},error:v=>{"function"==typeof c.callback&&c.callback(),console.error(v)},loading:c.loading})},l=c=>{var h,v;c.params=c.params||{},(0,f.cd)({url:"api/ProductPackage/AppliedPackageContent",params:{userid:null!==(h=c.params.userid)&&void 0!==h?h:null,v_functionlimit:null!==(v=c.params.v_functionlimit)&&void 0!==v?v:null},success:b=>{var t;"function"==typeof c.callback&&c.callback(null!==(t=b.data)&&void 0!==t?t:null)},error:b=>{"function"==typeof c.callback&&c.callback(),console.error(b)},loading:c.loading})}},4041:(I,A,p)=>{p.d(A,{D:()=>x,w:()=>E});var f=p(4459);function x(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,f.cd)({url:"api/Topic/Search",params:{topic_id:e.params.topic_id||null,topic_title:e.params.topic_title||null,createdby:e.params.createdby||null,level:e.params.level||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}function E(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,f.cd)({url:"api/Topic/SearchTreeList",params:{getby:e.params.userid||null,topic_id:e.params.topic_id||null,topic_pid:e.params.topic_pid||null,topic_title:e.params.topic_title||null,active:e.params.active||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(null),console.error(l)}})}},3589:(I,A,p)=>{p.d(A,{z:()=>E});var f=p(5861),x=p(4459);const E=function(){var e=(0,f.Z)(function*(l){l.params=l.params||{};let c=yield(0,x.H0)();var h=[];l.params.subFolder&&(l.params.subFolder=l.params.subFolder.replace(/[^a-zA-Z0-9\/]/gm,"").replace(/\/+/gm,"/").replace(/^\//,"").replace(/\/$/,""),l.params.subFolder&&h.push(l.params.subFolder)),l.params.isconvertvideo=!!l.params.isconvertvideo,l.params.isconvertpdf2image=!!l.params.isconvertpdf2image,l.params.isconvertoffice2image=!!l.params.isconvertoffice2image,l.params.isresizeimage=!!l.params.isresizeimage;const v=new FormData;v.append("path",h.join("/")),v.append("types",l.params.fileType||null),v.append("file",l.params.file||null),v.append("base64",l.params.base64||!1),v.append("isconvertvideo",l.params.isconvertvideo),v.append("isconvertpdf2image",l.params.isconvertpdf2image),v.append("isconvertoffice2image",l.params.isconvertoffice2image),v.append("isresizeimage",l.params.isresizeimage),(0,x.tm)({api_url:c.fileuploadurl,authorization:!1,url:"Files",params:v,success:b=>{"function"==typeof l.callback&&l.callback(b.data||null)},error:b=>{"function"==typeof l.callback&&l.callback(),console.error(l,b)},loading:l.loading})});return function(c){return e.apply(this,arguments)}}()},4531:(I,A,p)=>{p.d(A,{e:()=>i});var f=p(5861),x=p(4459),E=p(8530),e=p(1461),l=p(4041),c=p(5938),h=p(9403),v=p(8526),b=p(3377),t=p(8186),O=p(7090),n=p(9468),T=p(3536),k=p(6814),B=p(95);function U(o,g){if(1&o){const d=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(d);const u=n.oxw(2);return n.KtG(u.clearTopic())}),n._UZ(1,"ion-icon",25),n.qZA()}}function m(o,g){if(1&o){const d=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(d);const u=n.oxw(2);return n.KtG(u.clearCategory())}),n._UZ(1,"ion-icon",25),n.qZA()}}function M(o,g){if(1&o){const d=n.EpF();n.TgZ(0,"div",15)(1,"ion-item")(2,"ion-input",16),n.NdJ("change",function(u){n.CHM(d);const P=n.oxw();return n.KtG(P.changeBoardTitle(u))}),n.qZA()()(),n.TgZ(3,"div",17)(4,"div",18),n._UZ(5,"input",19),n.TgZ(6,"div",20),n.YNc(7,U,2,0,"button",21),n.TgZ(8,"button",22),n.NdJ("click",function(u){n.CHM(d);const P=n.oxw();return n.KtG(P.presentPopoverTopic(u))}),n._UZ(9,"ion-icon",23),n.qZA()()()(),n.TgZ(10,"div",17)(11,"div",18),n._UZ(12,"input",24),n.TgZ(13,"div",20),n.YNc(14,m,2,0,"button",21),n.TgZ(15,"button",22),n.NdJ("click",function(u){n.CHM(d);const P=n.oxw();return n.KtG(P.presentPopoverCategory(u))}),n._UZ(16,"ion-icon",23),n.qZA()()()()}if(2&o){const d=n.oxw();let s,u;n.xp6(2),n.Q6J("ngModel",d.board.board_title),n.xp6(3),n.Q6J("value",null!==(s=d.board.topic_title)&&void 0!==s?s:""),n.xp6(2),n.Q6J("ngIf",d.board.topic_id),n.xp6(5),n.Q6J("value",null!==(u=d.board.category_title)&&void 0!==u?u:""),n.xp6(2),n.Q6J("ngIf",d.board.category_id)}}function C(o,g){if(1&o){const d=n.EpF();n.ynx(0),n.TgZ(1,"div",36),n.NdJ("click",function(){const P=n.CHM(d).$implicit,D=n.oxw(2);return n.KtG(D.selectItem(P.board_id))}),n.TgZ(2,"div",37)(3,"div",30)(4,"div",31)(5,"ion-img",38),n.NdJ("ionImgDidLoad",function(u){const D=n.CHM(d).$implicit,y=n.oxw(2);return n.KtG(y.coverLoad(u,D))}),n.qZA()()()()(),n.BQk()}if(2&o){const d=g.$implicit,s=n.oxw(2);n.xp6(1),n.Tol(d.board_id==s.selectedId?"selected":d.board_id==s.currentId?"actived":""),n.xp6(4),n.Q6J("alt",d.board_title)}}function _(o,g){1&o&&(n.ynx(0),n.TgZ(1,"div",39)(2,"div",40)(3,"div",30)(4,"div",31),n._UZ(5,"ion-skeleton-text",41),n.qZA()()()(),n.BQk()),2&o&&(n.xp6(5),n.Q6J("animated",!0))}function r(o,g){if(1&o){const d=n.EpF();n.TgZ(0,"ion-infinite-scroll",42),n.NdJ("ionInfinite",function(u){n.CHM(d);const P=n.oxw(2);return n.KtG(P.onIonInfinite(u))}),n._UZ(1,"ion-infinite-scroll-content"),n.qZA()}}function a(o,g){if(1&o){const d=n.EpF();n.TgZ(0,"ion-content")(1,"div",26)(2,"div",27)(3,"div",28),n.NdJ("click",function(){n.CHM(d);const u=n.oxw();return n.KtG(u.selectItem())}),n.TgZ(4,"div")(5,"div",29)(6,"div",30)(7,"div",31)(8,"div",32)(9,"div")(10,"div"),n._uU(11,"B\xe0i m\u1edbi"),n.qZA()()()()()()()(),n.YNc(12,C,6,3,"ng-container",33),n.YNc(13,_,6,1,"ng-container",34),n.qZA()(),n.YNc(14,r,2,0,"ion-infinite-scroll",35),n.qZA()}if(2&o){const d=n.oxw();n.xp6(3),n.Tol(d.selectedId?"":"selected"),n.xp6(9),n.Q6J("ngForOf",d.boards),n.xp6(1),n.Q6J("ngIf",d.paging.loading),n.xp6(1),n.Q6J("ngIf",d.paging.active)}}let i=(()=>{var o;class g{constructor(s,u,P){this.modalController=s,this.toastController=u,this.popoverController=P,this.board={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.fileurl="",this.paging={sortfield:null,sorttype:null,page:1,limit:20,loading:!1,active:!0},this.filter={},this.boards=[],this.topics=[],this.categorys=[],this.isloading=!1}ngOnInit(){var s=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,f.Z)(function*(){var u,P,D,y;s.appsettings=yield(0,x.H0)(),s.appsettings.madonvi&&(s.user=yield(0,b.iA)(),s.readfileuploadurl=s.appsettings.readfileuploadurl||"",s.coverUrl=`${null!==(u=s.appsettings.readfileuploadurl)&&void 0!==u?u:""}${null!==(P=s.appsettings.boardpath)&&void 0!==P?P:""}`,s.coverv1Url=`${null!==(D=s.appsettings.readfileuploadurl)&&void 0!==D?D:""}${null!==(y=s.appsettings.boardpathv1)&&void 0!==y?y:""}`,s.refreshData())})()}refreshData(){(0,l.D)({params:{page:1,limit:20},callback:s=>{this.topics=s||[]}}),(0,e.N)({params:{page:1,limit:20},callback:s=>{this.categorys=s||[]}}),this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadData_Paging(s){var u;this.paging.loading=!0,(0,O.rM)({params:{userid:null===(u=this.user)||void 0===u?void 0:u.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:P=>{this.boards=this.boards.concat(P||[]),this.paging.loading=!1,(!(null!=P&&P.length)||(null==P?void 0:P.length)<this.paging.limit)&&(this.paging.active=!1),s&&s()}})}loadMore(s){this.paging.page+=1,this.loadData_Paging(s)}onIonInfinite(s){this.loadMore(()=>{s.target.complete()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var s=this;if(!this.board.board_title)return void(0,t.B)(this.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(y=>{y.present()});let u=y=>{(0,t.B)(this.toastController,{},y).then(Z=>{Z.present()}),0==(null==y?void 0:y.returncode)&&(this.modalController.dismiss(null==y?void 0:y.id,"confirm"),"modal-board"==this.openFrom&&(0,f.Z)(function*(){const Z=yield s.modalController.create({component:v.F,componentProps:{currentId:s.currentId,selectedId:null==y?void 0:y.id},mode:"ios",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});Z.onDidDismiss().then(F=>{if("confirm"==F.role&&F.data){let L=F.data;var w;L.board_id&&window.open(`editor?b=${L.board_id}#${null===(w=L.board_title)||void 0===w?void 0:w.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),Z.present()})())};var P,D;this.selectedId?(0,E.Z6)({loading:y=>{this.isloading=y},params:Object.assign({},this.board,{userid:null===(P=this.user)||void 0===P?void 0:P.userid,board_id:this.selectedId}),callback:u}):(0,E.Ux)({loading:y=>{this.isloading=y},params:Object.assign({},this.board,{userid:null===(D=this.user)||void 0===D?void 0:D.userid}),callback:u})}changeTopic(s,u){Object.assign(this.board,{topic_id:s,topic_title:u})}clearTopic(){Object.assign(this.board,{topic_id:null,topic_title:null})}presentPopoverTopic(s){var u=this;return(0,f.Z)(function*(){const P=yield u.popoverController.create({component:c.a,componentProps:{selectedId:u.board.topic_id},event:s,dismissOnSelect:!1,animated:!1});P.onDidDismiss().then(D=>{var y,Z;"confirm"==D.role&&Object.assign(u.board,{topic_id:null===(y=D.data)||void 0===y?void 0:y.topic_id,topic_title:null===(Z=D.data)||void 0===Z?void 0:Z.topic_title})}),P.present()})()}changeCategory(s,u){Object.assign(this.board,{category_id:s,category_title:u})}clearCategory(){Object.assign(this.board,{category_id:null,category_title:null})}presentPopoverCategory(s){var u=this;return(0,f.Z)(function*(){const P=yield u.popoverController.create({component:h.l,componentProps:{selectedId:u.board.category_id},event:s,dismissOnSelect:!1,animated:!1});P.onDidDismiss().then(D=>{var y,Z;"confirm"==D.role&&Object.assign(u.board,{category_id:null===(y=D.data)||void 0===y?void 0:y.category_id,category_title:null===(Z=D.data)||void 0===Z?void 0:Z.category_title})}),P.present()})()}changeBoardTitle(s){var u;this.board.board_title=null==s||null===(u=s.target)||void 0===u?void 0:u.value}changeBoardDescription(s){this.board.board_description=s}changeBoardContent(s){this.board.board_content=s}coverLoad(s,u){let P=[null!=u&&u.cover?this.readfileuploadurl+(null==u?void 0:u.cover):void 0,this.coverUrl+(null==u?void 0:u.board_id)+"/cover.svg",this.coverv1Url+(null==u?void 0:u.board_id)+"/cover.png"].filter(y=>!!y),D=y=>{if(!y)return;let Z=new Image;Z.onload=()=>{console.log(`onload -> ${Z.src}`),s.target.setAttribute("src",y)},Z.onerror=()=>{console.log(`onerror -> ${Z.src}`),D(P.shift())},Z.src=y};D(P.shift())}selectItem(s){this.selectedId=s}}return(o=g).\u0275fac=function(s){return new(s||o)(n.Y36(T.IN),n.Y36(T.yF),n.Y36(T.Dh))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-modal-board-add"]],inputs:{currentId:"currentId",openFrom:"openFrom",board:"board"},decls:32,vars:4,consts:[["slot","end","mode","ios","color","tertiary",3,"disabled","click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch"],[1,"col-12","col-lg-4","p-3","border-right"],[1,"ml-1","text-danger"],[3,"ngTemplateOutlet"],[1,"col-12","col-lg-8","p-3"],[1,"d-flex","h-100","flex-column"],[1,"flex-grow-1"],["tempForm",""],["tempTemplate",""],[1,"form-group","mb-4"],["label","T\xean b\xe0i gi\u1ea3ng *","label-placement","floating","placeholder","T\xean b\xe0i gi\u1ea3ng",3,"ngModel","change"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc","readonly","",1,"form-control",3,"value"],["name","close-outline"],[1,"py-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board",3,"click"],[1,"item-add"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-loading"],[1,"h-100",3,"animated"],[3,"ionInfinite"]],template:function(s,u){if(1&s&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"T\u1ea1o b\xe0i gi\u1ea3ng"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return u.save()}),n.TgZ(5,"ion-label"),n._uU(6,"T\u1ea1o b\xe0i gi\u1ea3ng"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return u.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return u.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div")(16,"label"),n._uU(17,"Th\xf4ng tin b\xe0i gi\u1ea3ng: "),n.TgZ(18,"span",8),n._uU(19,"*"),n.qZA()()(),n.GkF(20,9),n.qZA(),n.TgZ(21,"div",10)(22,"div",11)(23,"div")(24,"label"),n._uU(25,"Ch\u1ecdn m\u1eabu:"),n.qZA()(),n.TgZ(26,"div",12),n.GkF(27,9),n.qZA()()()()(),n.YNc(28,M,17,5,"ng-template",null,13,n.W1O),n.YNc(30,a,15,5,"ng-template",null,14,n.W1O)),2&s){const P=n.MAs(29),D=n.MAs(31);n.xp6(4),n.Q6J("disabled",u.isloading),n.xp6(5),n.Q6J("src",u.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(11),n.Q6J("ngTemplateOutlet",P),n.xp6(7),n.Q6J("ngTemplateOutlet",D)}},dependencies:[k.sg,k.O5,k.tP,B.JJ,B.On,T.YG,T.Sm,T.W2,T.Gu,T.gu,T.Xz,T.ju,T.MB,T.pK,T.Ie,T.Q$,T.CK,T.wd,T.sr,T.j9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:36px;font-size:14px;outline:none;box-shadow:none;border-color:#eee;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}"]}),g})()},5744:(I,A,p)=>{p.d(A,{E:()=>m});var f=p(5861),x=p(4459),E=p(7090),e=p(8530),l=p(3377),c=p(8186),h=p(5938),v=p(9403),b=p(3589),t=p(9468),O=p(3536),n=p(6814),T=p(95);function k(M,C){if(1&M){const _=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(a){t.CHM(_);const i=t.oxw();return t.KtG(i.clearTopic(a))}),t._UZ(1,"ion-icon",27),t.qZA()}}function B(M,C){if(1&M){const _=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(a){t.CHM(_);const i=t.oxw();return t.KtG(i.clearCategory(a))}),t._UZ(1,"ion-icon",27),t.qZA()}}function U(M,C){if(1&M){const _=t.EpF();t.TgZ(0,"img",28),t.NdJ("error",function(a){t.CHM(_);const i=t.oxw();return t.KtG(i.errorBoardCover(a,i.board))}),t.qZA()}if(2&M){const _=t.oxw();let r;t.Q6J("src",null!==(r=_.fileurl)&&void 0!==r?r:_.readfileuploadurl+_.board.cover,t.LSH)}}let m=(()=>{var M;class C{constructor(r,a,i,o){this.modalController=r,this.popoverController=a,this.toastController=i,this.loadingController=o,this.b=0,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var r=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,f.Z)(function*(){var a,i,o,g;r.appsettings=yield(0,x.H0)(),r.appsettings.madonvi&&(r.user=yield(0,l.iA)(),r.readfileuploadurl=r.appsettings.readfileuploadurl||"",r.coverUrl=`${null!==(a=r.appsettings.readfileuploadurl)&&void 0!==a?a:""}${null!==(i=r.appsettings.boardpath)&&void 0!==i?i:""}`,r.coverv1Url=`${null!==(o=r.appsettings.readfileuploadurl)&&void 0!==o?o:""}${null!==(g=r.appsettings.boardpathv1)&&void 0!==g?g:""}`,r.refreshData())})()}refreshData(){var r;(0,E.T6)({params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,board_id:this.b},callback:a=>{(null==a?void 0:a.board_id)!=this.b?this.modalController.dismiss():this.board=a}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var r=this;return(0,f.Z)(function*(){if(!r.board.board_title)return void(0,c.B)(r.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(o=>{o.present()});let a=[];r.boardCover&&a.push(new Promise((o,g)=>{var d;(0,b.z)({params:{file:r.boardCover,subFolder:`board-cover/${null!==(d=r.board.board_id)&&void 0!==d?d:0}`,fileType:"image"},callback:s=>{var u;0==(null==s?void 0:s.ReturnCode)&&(r.board.cover=s.path+"/"+(null===(u=s.file)||void 0===u?void 0:u.name)),o(!0)}})}));const i=yield r.loadingController.create({message:"\u0110ang t\u1ea3i..."});i.present(),Promise.all(a).then(o=>{var g;(0,e.Ux)({params:Object.assign({},r.board,{userid:null===(g=r.user)||void 0===g?void 0:g.userid}),callback:d=>{(0,c.B)(r.toastController,{},d).then(s=>{s.present()}),0==(null==d?void 0:d.returncode)&&r.modalController.dismiss(null==d?void 0:d.id,"confirm")},loading:d=>{d||i.dismiss()}})})})()}presentPopoverTopic(r){var a=this;return(0,f.Z)(function*(){const i=yield a.popoverController.create({component:h.a,componentProps:{selectedId:a.board.topic_id,filterFor:"board"},event:r,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(o=>{var g,d;"confirm"==o.role&&Object.assign(a.board,{topic_id:null===(g=o.data)||void 0===g?void 0:g.topic_id,topic_title:null===(d=o.data)||void 0===d?void 0:d.topic_title})}),i.present()})()}clearTopic(r){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(r){this.board.topic_id=r}presentPopoverCategory(r){var a=this;return(0,f.Z)(function*(){const i=yield a.popoverController.create({component:v.l,componentProps:{selectedId:a.board.category_id,filterFor:"board"},event:r,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(o=>{var g,d;"confirm"==o.role&&Object.assign(a.board,{category_id:null===(g=o.data)||void 0===g?void 0:g.category_id,category_title:null===(d=o.data)||void 0===d?void 0:d.category_title})}),i.present()})()}clearCategory(r){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(r){this.board.category_id=r}changeBoardTitle(r){var a;this.board.board_title=null==r||null===(a=r.target)||void 0===a?void 0:a.value}changeBoardDescription(r){var a;this.board.board_description=null==r||null===(a=r.target)||void 0===a?void 0:a.value}changeBoardContent(r){var a;this.board.board_content=null==r||null===(a=r.target)||void 0===a?void 0:a.value}changeBoardCover(r){this.boardCover=void 0,r.target.files.length&&(this.boardCover=r.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}errorBoardCover(r,a){let i=r.target,o=[a.cover?this.readfileuploadurl+a.cover:void 0,a.board_id?this.coverUrl+a.board_id+"/cover.svg":void 0,a.board_id?this.coverv1Url+a.board_id+"/cover.png":void 0,"assets/image-png/board-default.jpg"].filter(d=>!!d),g=d=>{if(!d)return;let s=new Image;s.onload=()=>{null==i||i.setAttribute("src",d)},s.onerror=()=>{g(o.shift())},s.src=d};g(o.shift())}}return(M=C).\u0275fac=function(r){return new(r||M)(t.Y36(O.IN),t.Y36(O.Dh),t.Y36(O.yF),t.Y36(O.HT))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-modal-board-update"]],inputs:{b:"b"},decls:67,vars:9,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","7",1,"form-control",3,"ngModel","change"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],["class","w-100 h-100",3,"src","error",4,"ngIf"],["rows","12",1,"form-control",3,"ngModel","change"],["name","close-outline"],[1,"w-100","h-100",3,"src","error"]],template:function(r,a){if(1&r&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"C\u1eadp nh\u1eadt th\xf4ng tin b\xe0i gi\u1ea3ng"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return a.save()}),t.TgZ(5,"ion-label"),t._uU(6,"C\u1eadp nh\u1eadt"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return a.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return a.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"label",12),t._uU(20,"C\u1ea5p l\u1edbp"),t.qZA()(),t._UZ(21,"input",13),t.TgZ(22,"div",14),t.YNc(23,k,2,0,"button",15),t.TgZ(24,"button",16),t.NdJ("click",function(o){return a.presentPopoverTopic(o)}),t._UZ(25,"ion-icon",17),t.qZA()()()(),t.TgZ(26,"div",9)(27,"div",10)(28,"div",11)(29,"label",12),t._uU(30,"M\xf4n h\u1ecdc"),t.qZA()(),t._UZ(31,"input",13),t.TgZ(32,"div",14),t.YNc(33,B,2,0,"button",15),t.TgZ(34,"button",16),t.NdJ("click",function(o){return a.presentPopoverCategory(o)}),t._UZ(35,"ion-icon",17),t.qZA()()()(),t.TgZ(36,"div",9)(37,"div",10)(38,"div",11)(39,"label",12),t._uU(40,"T\xean h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(41,"input",18),t.NdJ("change",function(o){return a.changeBoardTitle(o)}),t.qZA()()(),t.TgZ(42,"div",9)(43,"div",10)(44,"div",11)(45,"label",12),t._uU(46,"M\xf4 t\u1ea3"),t.qZA()(),t.TgZ(47,"textarea",19),t.NdJ("change",function(o){return a.changeBoardDescription(o)}),t.qZA()()()(),t.TgZ(48,"div",8)(49,"div",9)(50,"div",10)(51,"div",11)(52,"label",12),t._uU(53,"\u1ea2nh b\xeca"),t.qZA()(),t.TgZ(54,"div",20)(55,"input",21),t.NdJ("change",function(o){return a.changeBoardCover(o)}),t.qZA(),t._UZ(56,"label",22),t.qZA()()(),t.TgZ(57,"div",9)(58,"div",23)(59,"div",24),t.YNc(60,U,1,1,"img",25),t.qZA()()()()(),t.TgZ(61,"div",9)(62,"div",10)(63,"div",11)(64,"label",12),t._uU(65,"N\u1ed9i dung"),t.qZA()(),t.TgZ(66,"textarea",26),t.NdJ("change",function(o){return a.changeBoardContent(o)}),t.qZA()()()()()),2&r){let i,o;t.xp6(9),t.Q6J("src",a.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(12),t.Q6J("value",null!==(i=a.board.topic_title)&&void 0!==i?i:""),t.xp6(2),t.Q6J("ngIf",a.board.topic_id),t.xp6(8),t.Q6J("value",null!==(o=a.board.category_title)&&void 0!==o?o:""),t.xp6(2),t.Q6J("ngIf",a.board.category_id),t.xp6(8),t.Q6J("ngModel",a.board.board_title),t.xp6(6),t.Q6J("ngModel",a.board.board_description),t.xp6(13),t.Q6J("ngIf",a.board.board_id),t.xp6(6),t.Q6J("ngModel",a.board.board_content)}},dependencies:[n.O5,T.Fj,T.JJ,T.On,O.YG,O.Sm,O.W2,O.Gu,O.gu,O.Q$,O.wd,O.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),C})()},7050:(I,A,p)=>{p.d(A,{z:()=>e});var f=p(9468),x=p(3536),E=p(5470);let e=(()=>{var l;class c{constructor(v){this.modalController=v,this.b=0,this.w=1366,this.h=768,this.isfullscreen=!1}ngOnInit(){this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}load(v){this.iframe=v.target}}return(l=c).\u0275fac=function(v){return new(v||l)(f.Y36(x.IN))},l.\u0275cmp=f.Xpm({type:l,selectors:[["app-modal-board-viewer"]],inputs:{b:"b",w:"w",h:"h"},decls:10,vars:5,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"src","load"]],template:function(v,b){1&v&&(f.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),f.NdJ("click",function(){return b.toggleFullScreen()}),f._UZ(4,"ion-icon",2),f.qZA(),f.TgZ(5,"ion-button",3),f.NdJ("click",function(){return b.close()}),f._UZ(6,"ion-icon",4),f.qZA()()()(),f.TgZ(7,"ion-content")(8,"iframe",5),f.NdJ("load",function(O){return b.load(O)}),f.ALo(9,"safe"),f.qZA()()),2&v&&(f.xp6(4),f.Q6J("src",b.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),f.xp6(4),f.Q6J("src",f.xi3(9,2,"viewer?b="+b.b,"resourceUrl"),f.uOi))},dependencies:[x.YG,x.Sm,x.W2,x.Gu,x.gu,x.sr,E.y],styles:["iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),c})()},8526:(I,A,p)=>{p.d(A,{F:()=>C});var f=p(5861),x=p(4459),E=p(7090),e=p(5938),l=p(9403),c=p(3377),h=p(4531),v=p(5744),b=p(7050),t=p(9468),O=p(4487),n=p(3536),T=p(6814);function k(_,r){if(1&_){const a=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(o){t.CHM(a);const g=t.oxw();return t.KtG(g.clearFilterTopic(o))}),t._UZ(1,"ion-icon",32),t.qZA()}}function B(_,r){if(1&_){const a=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(o){t.CHM(a);const g=t.oxw();return t.KtG(g.clearFilterCategory(o))}),t._UZ(1,"ion-icon",32),t.qZA()}}function U(_,r){if(1&_){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",33),t.NdJ("click",function(){const g=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.selectItem(g.board_id))})("dblclick",function(){const g=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.openEditor(g.board_id))}),t.TgZ(2,"div",34)(3,"div",35)(4,"div",22)(5,"div",23)(6,"ion-img",36),t.NdJ("ionImgDidLoad",function(o){const d=t.CHM(a).$implicit,s=t.oxw();return t.KtG(s.coverLoad(o,d))}),t.qZA()()()(),t.TgZ(7,"div",37)(8,"div",38)(9,"button",39),t.NdJ("click",function(){const g=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.openViewer(g.board_id))}),t._UZ(10,"ion-icon",40),t.qZA(),t.TgZ(11,"button",39),t.NdJ("click",function(){const g=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.openEditor(g.board_id))}),t._UZ(12,"ion-icon",41),t.qZA()()()(),t.TgZ(13,"div",42),t._uU(14),t.qZA()(),t.BQk()}if(2&_){const a=r.$implicit,i=t.oxw();t.xp6(1),t.Tol(a.board_id==i.selectedId?"selected":a.board_id==i.currentId?"actived":""),t.xp6(5),t.Q6J("alt",a.board_title),t.xp6(7),t.Q6J("title",a.board_title),t.xp6(1),t.Oqu(a.board_title)}}function m(_,r){1&_&&(t.ynx(0),t.TgZ(1,"div",20)(2,"div",43)(3,"div",22)(4,"div",23),t._UZ(5,"ion-skeleton-text",44),t.qZA()()(),t.TgZ(6,"div",28),t._UZ(7,"ion-skeleton-text",45),t.qZA()(),t.BQk()),2&_&&(t.xp6(5),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}function M(_,r){if(1&_){const a=t.EpF();t.TgZ(0,"ion-infinite-scroll",46),t.NdJ("ionInfinite",function(o){t.CHM(a);const g=t.oxw();return t.KtG(g.onIonInfinite(o))}),t._UZ(1,"ion-infinite-scroll-content"),t.qZA()}}let C=(()=>{var _;class r{constructor(i,o,g,d){this.router=i,this.activatedRoute=o,this.modalController=g,this.popoverController=d,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.paging={sortfield:null,sorttype:null,page:1,limit:50,loading:!1,active:!0},this.filter={},this.boards=[]}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,f.Z)(function*(){var o,g,d,s,u;i.appsettings=yield(0,x.H0)(),i.appsettings.madonvi&&(i.user=yield(0,c.iA)(),i.readfileuploadurl=null!==(o=i.appsettings.readfileuploadurl)&&void 0!==o?o:"",i.coverUrl=`${null!==(g=i.appsettings.readfileuploadurl)&&void 0!==g?g:""}${null!==(d=i.appsettings.boardpath)&&void 0!==d?d:""}`,i.coverv1Url=`${null!==(s=i.appsettings.readfileuploadurl)&&void 0!==s?s:""}${null!==(u=i.appsettings.boardpathv1)&&void 0!==u?u:""}`,i.refreshData())})()}ngAfterViewInit(){}selectItem(i){this.currentId!=i&&(this.selectedId=i)}openViewer(i){var o=this;return(0,f.Z)(function*(){i&&(yield o.modalController.create({component:b.z,componentProps:{b:i},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0})).present()})()}openEditor(i){i&&this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{b:i,n:null},queryParamsHandling:"merge",replaceUrl:!0}).finally(()=>{window.location.reload()})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){return this.modalController.dismiss(this.boards.find(i=>i.board_id==this.selectedId),"confirm")}coverLoad(i,o){let g=[null!=o&&o.cover?this.readfileuploadurl+(null==o?void 0:o.cover):void 0,this.coverUrl+(null==o?void 0:o.board_id)+"/cover.svg",this.coverv1Url+(null==o?void 0:o.board_id)+"/cover.png"].filter(s=>!!s),d=s=>{if(!s)return;let u=new Image;u.onload=()=>{console.log(`onload -> ${u.src}`),i.target.setAttribute("src",s)},u.onerror=()=>{console.log(`onerror -> ${u.src}`),d(g.shift())},u.src=s};d(g.shift())}onIonInfinite(i){this.loadMore(()=>{i.target.complete()})}loadData_Paging(i){var o;this.paging.loading=!0,(0,E.GW)({params:{userid:null===(o=this.user)||void 0===o?void 0:o.userid,board_title:this.filter.search,topic_id:this.filter.topic_id,category_id:this.filter.category_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:g=>{this.boards=this.boards.concat(g||[]),this.paging.loading=!1,(!(null!=g&&g.length)||(null==g?void 0:g.length)<this.paging.limit)&&(this.paging.active=!1),i&&i()}})}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}loadMore(i){this.paging.page+=1,this.loadData_Paging(i)}searchChange(i){this.filter.search=i.target.value.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\"\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}sortChange(i,o){this.paging.sortfield=i||null,this.paging.sorttype=o||null,this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.boards.length=0,this.loadData_Paging()}presentModalBoardAdd(i){var o=this;return(0,f.Z)(function*(){o.modalController.dismiss(null,"close2open-modal-add"),(yield o.modalController.create({component:h.e,componentProps:{currentId:o.currentId,openFrom:"modal-board"},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardUpdate(i){var o=this;return(0,f.Z)(function*(){const g=yield o.modalController.create({component:v.E,mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});g.onDidDismiss().then(d=>{"confirm"==d.role&&d.data&&o.refreshData()}),g.present()})()}clearFilterTopic(i){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}presentPopoverTopic(i){var o=this;return(0,f.Z)(function*(){const g=yield o.popoverController.create({component:e.a,componentProps:{selectedId:o.filter.topic_id,filterFor:"board"},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(d=>{var s,u;"confirm"==d.role&&(Object.assign(o.filter,{topic_id:null===(s=d.data)||void 0===s?void 0:s.topic_id,topic_title:null===(u=d.data)||void 0===u?void 0:u.topic_title}),o.filterChange())}),g.present()})()}clearFilterCategory(i){Object.assign(this.filter,{category_id:null,category_title:null}),this.filterChange()}presentPopoverCategory(i){var o=this;return(0,f.Z)(function*(){const g=yield o.popoverController.create({component:l.l,componentProps:{selectedId:o.filter.category_id,filterFor:"board"},event:i,dismissOnSelect:!1,animated:!1});g.onDidDismiss().then(d=>{var s,u;"confirm"==d.role&&(Object.assign(o.filter,{category_id:null===(s=d.data)||void 0===s?void 0:s.category_id,category_title:null===(u=d.data)||void 0===u?void 0:u.category_title}),o.filterChange())}),g.present()})()}}return(_=r).\u0275fac=function(i){return new(i||_)(t.Y36(O.F0),t.Y36(O.gz),t.Y36(n.IN),t.Y36(n.Dh))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-modal-board"]],inputs:{currentId:"currentId",selectedId:"selectedId"},decls:49,vars:9,consts:[["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"px-3"],[1,"row"],[1,"col-12","col-lg-4","my-3"],[1,"searchbox"],["mode","ios","inputmode","search","placeholder","T\xecm ki\u1ebfm ...","search-icon","","show-clear-button","never","show-cancel-button","never",3,"debounce","ionInput"],[1,"col-6","col-lg-4","my-3"],[1,"input-group"],["type","text","placeholder","C\u1ea5p l\u1edbp",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text","placeholder","M\xf4n h\u1ecdc",1,"form-control",3,"value"],[1,"py-3","p-lg-3"],[1,"d-flex","flex-wrap"],[1,"col-12","col-md-4","col-lg-3","py-3"],[1,"item-add",3,"click"],[1,"embed-responsive","embed-responsive-16by9"],[1,"embed-responsive-item"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"text-center"],[1,"icon-add"],["src","../../../../assets/icon/16x16/add.svg"],[1,"item-name","line-clamp-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["name","close-outline"],[1,"col-12","col-md-4","col-lg-3","py-3","item-board","user-select-none",3,"click","dblclick"],[1,"position-relative"],[1,"item-thumbnail"],["src","../../../../assets/image/no-image.svg",3,"alt","ionImgDidLoad"],[1,"position-absolute","top-0","bottom-0","left-0","right-0","item-action"],[1,"position-absolute","bottom-0","right-0"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/view.svg"],["src","../../../../assets/icon/16x16/edit.svg"],[1,"item-name","line-clamp-2",3,"title"],[1,"item-loading"],[1,"h-100",3,"animated"],[2,"width","75%",3,"animated"],[3,"ionInfinite"]],template:function(i,o){if(1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"B\xe0i gi\u1ea3ng c\u1ee7a t\xf4i"),t.qZA(),t.TgZ(4,"ion-buttons",0)(5,"ion-button",1),t.NdJ("click",function(){return o.toggleFullScreen()}),t._UZ(6,"ion-icon",2),t.qZA(),t.TgZ(7,"ion-button",3),t.NdJ("click",function(){return o.close()}),t._UZ(8,"ion-icon",4),t.qZA()()(),t.TgZ(9,"ion-toolbar")(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"ion-searchbar",9),t.NdJ("ionInput",function(d){return o.searchChange(d)}),t.qZA()()(),t.TgZ(15,"div",10)(16,"div",11),t._UZ(17,"input",12),t.TgZ(18,"div",13),t.YNc(19,k,2,0,"button",14),t.TgZ(20,"button",15),t.NdJ("click",function(d){return o.presentPopoverTopic(d)}),t._UZ(21,"ion-icon",16),t.qZA()()()(),t.TgZ(22,"div",10)(23,"div",11),t._UZ(24,"input",17),t.TgZ(25,"div",13),t.YNc(26,B,2,0,"button",14),t.TgZ(27,"button",15),t.NdJ("click",function(d){return o.presentPopoverCategory(d)}),t._UZ(28,"ion-icon",16),t.qZA()()()()()()()(),t.TgZ(29,"ion-content")(30,"div",18)(31,"div",19)(32,"div",20)(33,"div")(34,"div",21),t.NdJ("click",function(d){return o.presentModalBoardAdd(d)}),t.TgZ(35,"div",22)(36,"div",23)(37,"div",24)(38,"div")(39,"div",25)(40,"div",26),t._UZ(41,"ion-icon",27),t.qZA()(),t.TgZ(42,"div"),t._uU(43,"T\u1ea1o b\xe0i gi\u1ea3ng"),t.qZA()()()()()(),t.TgZ(44,"div",28),t._uU(45,"\xa0"),t.qZA()()(),t.YNc(46,U,15,5,"ng-container",29),t.YNc(47,m,8,2,"ng-container",30),t.qZA()(),t.YNc(48,M,2,0,"ion-infinite-scroll",31),t.qZA()),2&i){let g,d;t.xp6(6),t.Q6J("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(8),t.Q6J("debounce",1e3),t.xp6(3),t.Q6J("value",null!==(g=o.filter.topic_title)&&void 0!==g?g:""),t.xp6(2),t.Q6J("ngIf",o.filter.topic_id),t.xp6(5),t.Q6J("value",null!==(d=o.filter.category_title)&&void 0!==d?d:""),t.xp6(2),t.Q6J("ngIf",o.filter.category_id),t.xp6(20),t.Q6J("ngForOf",o.boards),t.xp6(1),t.Q6J("ngIf",o.paging.loading),t.xp6(1),t.Q6J("ngIf",o.paging.active)}},dependencies:[T.sg,T.O5,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Xz,n.ju,n.MB,n.VI,n.CK,n.wd,n.sr,n.j9],styles:[".item-add[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1.5px dashed #DADADA;background:#FFF4FD;color:#333;cursor:pointer}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]{display:inline-block;padding:.75rem;margin-bottom:.5rem;border-radius:50%;background:#5359E5;line-height:0}.item-add[_ngcontent-%COMP%]   .icon-add[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff}.item-loading[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-loading[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{margin:0;--border-radius: 8px}.item-thumbnail[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px;border:1px solid #EEEEEE;background:#FAFAF0;color:#333;cursor:pointer}.item-thumbnail[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{line-height:0}.item-name[_ngcontent-%COMP%]{margin-top:.5rem;line-height:20px}.item-name[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:20px}.item-action[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(0,0,0,0) 65.42%,rgba(0,0,0,.5) 103.59%)}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;margin-right:1rem;margin-bottom:1rem;border-radius:50%;line-height:0;vertical-align:middle;background:#fff;color:#333;outline:none;box-shadow:none}.item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.item-board[_ngcontent-%COMP%]{border-radius:8px}.item-board[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:none}.item-board[_ngcontent-%COMP%]:hover{background:#FAFAF0}.item-board[_ngcontent-%COMP%]:hover   .item-action[_ngcontent-%COMP%]{display:block}.item-board.selected[_ngcontent-%COMP%]{background:#FFE4FA}.item-board.selected[_ngcontent-%COMP%]   .item-action[_ngcontent-%COMP%]{display:block}.item-board.actived[_ngcontent-%COMP%]{background:var(--ion-color-warning)}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #8F9BB3;background:#FFF}ion-header[_ngcontent-%COMP%]   .searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{height:40px;padding:0;--color: #333;--background: transparent;--box-shadow: none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-size:14px;outline:none;box-shadow:none;border-color:#8f9bb3;color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:42px;color:var(--ion-color-primary-shade, #000)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--ion-color-medium, #999)}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-left:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:first-child)   .btn[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]:not(:last-child)   .btn[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}"]}),r})()},9403:(I,A,p)=>{p.d(A,{l:()=>U});var f=p(5861),x=p(1461),E=p(3377),e=p(9468),l=p(3536),c=p(6814);const h=function(m){return{$implicit:m}};function v(m,M){if(1&m&&e.GkF(0,3),2&m){const C=M.$implicit;e.oxw();const _=e.MAs(4);e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(2,h,C))}}function b(m,M){1&m&&e._UZ(0,"ion-icon",10)}function t(m,M){1&m&&e._UZ(0,"ion-icon",11)}function O(m,M){if(1&m&&(e.TgZ(0,"ion-badge",12),e._uU(1),e.qZA()),2&m){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(C.total_board)}}function n(m,M){if(1&m&&(e.TgZ(0,"ion-badge",12),e._uU(1),e.qZA()),2&m){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(C.total_media)}}function T(m,M){if(1&m&&e.GkF(0,3),2&m){const C=M.$implicit;e.oxw(3);const _=e.MAs(4);e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(2,h,C))}}function k(m,M){if(1&m&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,T,1,4,"ng-container",1),e.qZA(),e.BQk()),2&m){const C=e.oxw().$implicit,_=e.oxw();e.xp6(2),e.Q6J("ngForOf",_.filterCategory(_.categorys,C.category_id))}}function B(m,M){if(1&m){const C=e.EpF();e.TgZ(0,"li")(1,"ion-item",4),e.NdJ("click",function(){const a=e.CHM(C).$implicit,i=e.oxw();return e.KtG(i.filterChange(a.category_id))}),e.TgZ(2,"ion-button",5),e.NdJ("click",function(r){const i=e.CHM(C).$implicit,o=e.oxw();return e.KtG(o.expandCategory(r,i.category_id,i.isexpanded))}),e.YNc(3,b,1,0,"ion-icon",6),e.YNc(4,t,1,0,"ion-icon",7),e.qZA(),e.TgZ(5,"ion-label"),e._uU(6),e.qZA(),e.YNc(7,O,2,1,"ion-badge",8),e.YNc(8,n,2,1,"ion-badge",8),e.qZA(),e.YNc(9,k,3,1,"ng-container",9),e.qZA()}if(2&m){const C=M.$implicit,_=e.oxw();e.xp6(1),e.uIk("color",C.category_id==_.selectedId?"primary":""),e.xp6(1),e.uIk("style",C.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!C.isexpanded),e.xp6(1),e.Q6J("ngIf",C.isexpanded),e.xp6(2),e.Oqu(C.category_title),e.xp6(1),e.Q6J("ngIf","board"==_.filterFor&&C.total_board),e.xp6(1),e.Q6J("ngIf","media"==_.filterFor&&C.total_media),e.xp6(1),e.Q6J("ngIf",C.isexpanded)}}let U=(()=>{var m;class M{constructor(_){this.popoverController=_,this.selectedId=0,this.categorys=[]}ngOnInit(){var _=this;(0,f.Z)(function*(){_.user=yield(0,E.iA)(),_.loadCategory()})()}loadCategory(_){var r;(0,x.b)({params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,category_pid:_,active:!0,page:1,limit:-1},callback:a=>{this.categorys=this.categorys.concat(a||[])}})}filterCategory(_,r){return _.filter(r?a=>a.category_pid==r:a=>null==a.category_pid||0==a.category_pid)}expandCategory(_,r,a){_.preventDefault(),_.stopPropagation(),this.categorys.filter(i=>i.category_id==r).forEach(i=>{i.isexpanded=!a,i.isloadedchild||(i.isloadedchild=!0,this.loadCategory(i.category_id))})}filterChange(_){this.popoverController.dismiss(this.categorys.find(r=>r.category_id==_),"confirm")}}return(m=M).\u0275fac=function(_){return new(_||m)(e.Y36(l.Dh))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-popover-category"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:5,vars:1,consts:[[1,"menu-category","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["treeNode",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","medium"]],template:function(_,r){1&_&&(e.TgZ(0,"div",0)(1,"ul"),e.YNc(2,v,1,4,"ng-container",1),e.qZA()(),e.YNc(3,B,10,8,"ng-template",null,2,e.W1O)),2&_&&(e.xp6(2),e.Q6J("ngForOf",r.filterCategory(r.categorys)))},dependencies:[c.sg,c.O5,c.tP,l.yp,l.YG,l.gu,l.Ie,l.Q$],styles:[".menu-category[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),M})()},5938:(I,A,p)=>{p.d(A,{a:()=>U});var f=p(5861),x=p(4041),E=p(3377),e=p(9468),l=p(3536),c=p(6814);const h=function(m){return{$implicit:m}};function v(m,M){if(1&m&&e.GkF(0,3),2&m){const C=M.$implicit;e.oxw();const _=e.MAs(4);e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(2,h,C))}}function b(m,M){1&m&&e._UZ(0,"ion-icon",10)}function t(m,M){1&m&&e._UZ(0,"ion-icon",11)}function O(m,M){if(1&m&&(e.TgZ(0,"ion-badge",12),e._uU(1),e.qZA()),2&m){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(C.total_board)}}function n(m,M){if(1&m&&(e.TgZ(0,"ion-badge",12),e._uU(1),e.qZA()),2&m){const C=e.oxw().$implicit;e.xp6(1),e.Oqu(C.total_media)}}function T(m,M){if(1&m&&e.GkF(0,3),2&m){const C=M.$implicit;e.oxw(3);const _=e.MAs(4);e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(2,h,C))}}function k(m,M){if(1&m&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,T,1,4,"ng-container",1),e.qZA(),e.BQk()),2&m){const C=e.oxw().$implicit,_=e.oxw();e.xp6(2),e.Q6J("ngForOf",_.filterTopic(_.topics,C.topic_id))}}function B(m,M){if(1&m){const C=e.EpF();e.TgZ(0,"li")(1,"ion-item",4),e.NdJ("click",function(){const a=e.CHM(C).$implicit,i=e.oxw();return e.KtG(i.filterChange(a.topic_id))}),e.TgZ(2,"ion-button",5),e.NdJ("click",function(r){const i=e.CHM(C).$implicit,o=e.oxw();return e.KtG(o.expandTopic(r,i.topic_id,i.isexpanded))}),e.YNc(3,b,1,0,"ion-icon",6),e.YNc(4,t,1,0,"ion-icon",7),e.qZA(),e.TgZ(5,"ion-label"),e._uU(6),e.qZA(),e.YNc(7,O,2,1,"ion-badge",8),e.YNc(8,n,2,1,"ion-badge",8),e.qZA(),e.YNc(9,k,3,1,"ng-container",9),e.qZA()}if(2&m){const C=M.$implicit,_=e.oxw();e.xp6(1),e.uIk("color",C.topic_id==_.selectedId?"primary":""),e.xp6(1),e.uIk("style",C.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!C.isexpanded),e.xp6(1),e.Q6J("ngIf",C.isexpanded),e.xp6(2),e.Oqu(C.topic_title),e.xp6(1),e.Q6J("ngIf","board"==_.filterFor&&C.total_board),e.xp6(1),e.Q6J("ngIf","media"==_.filterFor&&C.total_media),e.xp6(1),e.Q6J("ngIf",C.isexpanded)}}let U=(()=>{var m;class M{constructor(_){this.popoverController=_,this.selectedId=0,this.topics=[]}ngOnInit(){var _=this;(0,f.Z)(function*(){_.user=yield(0,E.iA)(),_.loadTopic()})()}loadTopic(_){var r;(0,x.w)({params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,topic_pid:_,active:!0,page:1,limit:-1},callback:a=>{this.topics=this.topics.concat(a||[])}})}filterTopic(_,r){return _.filter(r?a=>a.topic_pid==r:a=>null==a.topic_pid||0==a.topic_pid)}expandTopic(_,r,a){_.preventDefault(),_.stopPropagation(),this.topics.filter(i=>i.topic_id==r).forEach(i=>{i.isexpanded=!a,i.isloadedchild||(i.isloadedchild=!0,this.loadTopic(i.topic_id))})}filterChange(_){this.popoverController.dismiss(this.topics.find(r=>r.topic_id==_),"confirm")}}return(m=M).\u0275fac=function(_){return new(_||m)(e.Y36(l.Dh))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-popover-topic"]],inputs:{selectedId:"selectedId",filterFor:"filterFor"},decls:5,vars:1,consts:[[1,"menu-topic","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["treeNode",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],["color","medium",4,"ngIf"],[4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],["color","medium"]],template:function(_,r){1&_&&(e.TgZ(0,"div",0)(1,"ul"),e.YNc(2,v,1,4,"ng-container",1),e.qZA()(),e.YNc(3,B,10,8,"ng-template",null,2,e.W1O)),2&_&&(e.xp6(2),e.Q6J("ngForOf",r.filterTopic(r.topics)))},dependencies:[c.sg,c.O5,c.tP,l.yp,l.YG,l.gu,l.Ie,l.Q$],styles:[".menu-topic[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),M})()},9018:(I,A,p)=>{p.d(A,{Be:()=>c,C0:()=>e,W6:()=>h,gk:()=>l,iD:()=>E});var f=p(5861),x=p(8526);const E=function(){var v=(0,f.Z)(function*(b,t){const O=yield b.create({component:x.F,componentProps:{currentId:null==t?void 0:t.board_id},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});O.onDidDismiss().then(n=>{if("confirm"==n.role&&n.data){let k=n.data;var T;k.board_id&&window.open(`editor?b=${k.board_id}#${null===(T=k.board_title)||void 0===T?void 0:T.replace(/[^a-zA-Z0-9]/g,"-").replace(/(\-)+/g,"-").replace(/^(\-)/g,"").replace(/(\-)$/g,"")}`,"_blank")}}),O.present()});return function(t,O){return v.apply(this,arguments)}}(),e=(v,b)=>{const t=b.shadowRoot,O=v.create().addElement(null==t?void 0:t.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),n=v.create().addElement(null==t?void 0:t.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(-100%)"},{offset:1,transform:"translateX(0%)"}]);return v.create().addElement(b).easing("ease-out").duration(300).addAnimation([O,n])},l=(v,b)=>e(v,b).direction("reverse"),c=(v,b)=>{const t=b.shadowRoot,O=v.create().addElement(null==t?void 0:t.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),n=v.create().addElement(null==t?void 0:t.querySelector(".modal-wrapper")).keyframes([{offset:0,transform:"translateX(100%)"},{offset:1,transform:"translateX(0%)"}]);return v.create().addElement(b).easing("ease-out").duration(300).addAnimation([O,n])},h=(v,b)=>c(v,b).direction("reverse")},8186:(I,A,p)=>{p.d(A,{B:()=>x});var f=p(5861);const x=function(){var E=(0,f.Z)(function*(e,l,c){var h;c&&(l.message||(l.message=null!==(h=null==c?void 0:c.returnmsg)&&void 0!==h?h:0==(null==c?void 0:c.returncode)?"Th\xe0nh c\xf4ng!":null!=c&&c.returncode?`L\u1ed7i: #${null==c?void 0:c.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),l.icon||(l.icon=0==(null==c?void 0:c.returncode)?"checkmark-circle-sharp":null!=c&&c.returncode?"alert-circle-outline":"close-circle-sharp"),l.color||(l.color=0==(null==c?void 0:c.returncode)?"success":null!=c&&c.returncode?"warning":"danger"));return l.position||(l.position="bottom"),l.icon||(l.icon="bulb-outline"),l.color||(l.color="secondary"),l.duration=3e3,l.animated=!0,l.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield e.create(l)});return function(l,c,h){return E.apply(this,arguments)}}()},5470:(I,A,p)=>{p.d(A,{Z:()=>e,y:()=>E});var f=p(9468),x=p(6593);let E=(()=>{class l{constructor(h){this.sanitizer=h}transform(h,v){switch(v){case"html":return this.sanitizer.bypassSecurityTrustHtml(h);case"style":return this.sanitizer.bypassSecurityTrustStyle(h);case"script":return this.sanitizer.bypassSecurityTrustScript(h);case"url":return this.sanitizer.bypassSecurityTrustUrl(h);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(h);default:throw new Error(`SafePipe unable to bypass security for invalid type: ${v}`)}}}return l.\u0275fac=function(h){return new(h||l)(f.Y36(x.H7,16))},l.\u0275pipe=f.Yjl({name:"safe",type:l,pure:!0}),l})(),e=(()=>{class l{}return l.\u0275fac=function(h){return new(h||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({}),l})()}}]);