(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5140],{1062:(Q,B,u)=>{"use strict";u.d(B,{Z:()=>e,m:()=>c});var M=u(5861),w=u(2014);const E=new w.K({name:"_localDataDB",driverOrder:[w.N.IndexedDB,w.N.LocalStorage]}),k="ui-config",e=function(){var P=(0,M.Z)(function*(C){yield E.create();try{var F=(yield E.get(k))||{};"function"==typeof C.callback&&C.callback(F)}catch(O){"function"==typeof C.callback&&C.callback(null),console.error(O)}});return function(F){return P.apply(this,arguments)}}(),c=function(){var P=(0,M.Z)(function*(C){yield E.create(),C.params=C.params||{};try{var F=(yield E.get(k))||{};Object.assign(F,C.params),yield E.set(k,F),"function"==typeof C.callback&&C.callback(F)}catch(O){"function"==typeof C.callback&&C.callback(null),console.error(O)}});return function(F){return P.apply(this,arguments)}}()},8247:(Q,B,u)=>{"use strict";u.d(B,{D:()=>w});var M=u(4459);function w(E){E.params=E.params||{},(0,M.cd)({url:"api/Lookup/get",params:{lookup_key:E.params.lookup_key||null},success:k=>{"function"==typeof E.callback&&E.callback(null==k?void 0:k.data)},error:k=>{"function"==typeof E.callback&&E.callback(null),console.error(E,k)},loading:E.loading})}},6240:(Q,B,u)=>{"use strict";u.d(B,{Bm:()=>w,YM:()=>E,iS:()=>e,o5:()=>k});var M=u(4459);function w(c){var P,C,F,O,_,f,t,h,m,n,D;c.params=c.params||{},c.params.page=c.params.page||1,c.params.limit=c.params.limit||1,(0,M.cd)({url:"api/Media/Search",params:{getby:null!==(P=c.params.userid)&&void 0!==P?P:null,global:null!==(C=c.params.global)&&void 0!==C?C:null,media_id:null!==(F=c.params.media_id)&&void 0!==F?F:null,media_title:null!==(O=c.params.media_title)&&void 0!==O?O:null,v_mediatype:null!==(_=c.params.v_mediatype)&&void 0!==_?_:null,v_mediatypes:null!==(f=c.params.v_mediatypes)&&void 0!==f?f:null,topic_id:null!==(t=c.params.topic_id)&&void 0!==t?t:null,category_id:null!==(h=c.params.category_id)&&void 0!==h?h:null,tags:null!==(m=c.params.tags)&&void 0!==m?m:null,sortfield:null!==(n=c.params.sortfield)&&void 0!==n?n:null,sorttype:null!==(D=c.params.sorttype)&&void 0!==D?D:null,posstart:(c.params.page-1)*c.params.limit,numofrow:c.params.limit},success:A=>{var U;"function"==typeof c.callback&&c.callback(null!==(U=A.data)&&void 0!==U?U:null)},error:A=>{"function"==typeof c.callback&&c.callback(),console.error(A)},loading:c.loading})}function E(c){var P,C;c.params=c.params||{},(0,M.cd)({url:"api/Media/Detail",params:{getby:null!==(P=c.params.userid)&&void 0!==P?P:null,media_id:null!==(C=c.params.media_id)&&void 0!==C?C:null},success:F=>{var O;"function"==typeof c.callback&&c.callback(null!==(O=F.data)&&void 0!==O?O:null)},error:F=>{"function"==typeof c.callback&&c.callback(),console.error(F)},loading:c.loading})}function k(c){var P,C,F,O,_,f,t,h,m,n,D,A,U,L,R,q,G;c.params=c.params||{},(0,M.T1)({url:"api/Media/AddUpdate",params:{media_id:null!==(P=c.params.media_id)&&void 0!==P?P:null,media_title:null!==(C=c.params.media_title)&&void 0!==C?C:null,media_description:null!==(F=c.params.media_description)&&void 0!==F?F:null,media_content:null!==(O=c.params.media_content)&&void 0!==O?O:null,filepath:null!==(_=c.params.filepath)&&void 0!==_?_:null,filepath_extract:null!==(f=c.params.filepath_extract)&&void 0!==f?f:null,link_file:null!==(t=c.params.link_file)&&void 0!==t?t:null,link_share:null!==(h=c.params.link_share)&&void 0!==h?h:null,cover:null!==(m=c.params.cover)&&void 0!==m?m:null,v_mediatype:null!==(n=c.params.v_mediatype)&&void 0!==n?n:null,v_osstype:null!==(D=c.params.v_osstype)&&void 0!==D?D:null,v_sharingmode:null!==(A=c.params.v_sharingmode)&&void 0!==A?A:null,topic_id:null!==(U=c.params.topic_id)&&void 0!==U?U:null,category_id:null!==(L=c.params.category_id)&&void 0!==L?L:null,tags:null!==(R=c.params.tags)&&void 0!==R?R:null,createdby:null!==(q=c.params.userid)&&void 0!==q?q:null,modifiedby:null!==(G=c.params.userid)&&void 0!==G?G:null},success:J=>{var Y;"function"==typeof c.callback&&c.callback(null!==(Y=J.data)&&void 0!==Y?Y:null)},error:J=>{"function"==typeof c.callback&&c.callback(),console.error(J)},loading:c.loading})}function e(c){var P,C,F;c.params=c.params||{},(0,M.tD)({url:"api/Media/Delete",params:{deletedby:null!==(P=c.params.userid)&&void 0!==P?P:null,media_id:null!==(C=c.params.media_id)&&void 0!==C?C:null,createdby:null!==(F=c.params.userid)&&void 0!==F?F:null},success:O=>{var _;"function"==typeof c.callback&&c.callback(null!==(_=O.data)&&void 0!==_?_:null)},error:O=>{"function"==typeof c.callback&&c.callback(),console.error(O)},loading:c.loading})}},3938:(Q,B,u)=>{"use strict";u.d(B,{GX:()=>w,IX:()=>k,hh:()=>E});var M=u(4459);function w(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,M.cd)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}function E(e){e.params=e.params||{},(0,M.T1)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}function k(e){e.params=e.params||{},(0,M.tD)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(null),console.error(c)}})}},1529:(Q,B,u)=>{"use strict";u.d(B,{G4:()=>e,NP:()=>C,r7:()=>k,u4:()=>c,zS:()=>P});var M=u(4459),w=u(3589),E=u(1862);function k(_){_.params=_.params||{},(0,M.OL)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/download-image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{url:_.params.url||null},success:f=>{var t;"function"==typeof _.callback&&(null!=f&&null!==(t=f.data)&&void 0!==t&&t.StatusCode?_.callback():_.callback(URL.createObjectURL(null==f?void 0:f.data)))},error:f=>{"function"==typeof _.callback&&_.callback(),console.error(f)},loading:_.loading})}function e(_){var f,t,h;_.params=_.params||{};let m=null!==(f=_.callback)&&void 0!==f?f:A=>{console.log(A)},n=null===(t=_.params.url)||void 0===t?void 0:t.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""),D=(null==n||null===(h=n.split("/"))||void 0===h||null===(h=h.pop())||void 0===h?void 0:h.toLocaleLowerCase())||"image.png";k({params:{url:n},callback:A=>{A?(0,E.d4)(A,D,"image/x-png",U=>{U?(0,w.z)({params:{file:U,subFolder:"material/aitool",fileType:"image"},callback:L=>{0==(null==L?void 0:L.ReturnCode)?m(L):m()}}):m()}):m()},loading:_.loading})}function c(_){if(_.params=_.params||{},"2.0"==_.params.version)return function F(_){if(_.params=_.params||{},_.params.size){let f=_.params.size.split("x");_.params.width=parseInt(f[0]),_.params.height=parseInt(f[1])}(0,M.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{prompt:_.params.prompt||"Superheroes flying in the sky with chibi style",width:_.params.width||512,height:_.params.height||512,steps:20},success:f=>{"function"==typeof _.callback&&_.callback(f.data||null)},error:f=>{"function"==typeof _.callback&&_.callback(),console.error(f)},loading:_.loading})}(_);(0,M.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{Prompt:_.params.prompt||"Superheroes flying in the sky with chibi style",Size:_.params.size||"256x256"},success:f=>{"function"==typeof _.callback&&_.callback(f.data||null)},error:f=>{"function"==typeof _.callback&&_.callback(),console.error(f)},loading:_.loading})}function P(_){if(_.params=_.params||{},"2.0"==_.params.version)return function O(_){_.params=_.params||{};const f=new FormData;if(f.append("prompt",_.params.prompt||null),f.append("file",_.params.file||null),_.params.size){let t=_.params.size.split("x");f.append("width",t[0]||512),f.append("height",t[1]||512)}(0,M.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:f,success:t=>{"function"==typeof _.callback&&_.callback(t.data||null)},error:t=>{"function"==typeof _.callback&&_.callback(),console.error(t)},loading:_.loading})}(_);const f=new FormData;f.append("file",_.params.file||null),f.append("size",_.params.size||"256x256"),(0,M.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:f,success:t=>{"function"==typeof _.callback&&_.callback(t.data||null)},error:t=>{"function"==typeof _.callback&&_.callback(),console.error(t)},loading:_.loading})}function C(_){_.params=_.params||{};const f=new FormData;f.append("prompt",_.params.prompt||null),f.append("sourceText",_.params.sourceText||null),f.append("temperature","1.0"),(0,M.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/get-gpt-action",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:f,success:t=>{"function"==typeof _.callback&&_.callback(t.data||null)},error:t=>{"function"==typeof _.callback&&_.callback(),console.error(t)},loading:_.loading})}},865:(Q,B,u)=>{"use strict";u.d(B,{s:()=>K});var M=u(5861),w=u(8107),E=u.n(w),k=u(6676),e=u.n(k),c=u(4459),P=u(6240),C=u(1529),F=u(3377),O=u(1862),_=u(8186),f=u(422),t=u(9468),h=u(3536),m=u(6814),n=u(95);function D(g,a){if(1&g&&t.GkF(0,19),2&g){t.oxw();const i=t.MAs(32);t.Q6J("ngTemplateOutlet",i)}}function A(g,a){if(1&g&&t.GkF(0,19),2&g){t.oxw();const i=t.MAs(34);t.Q6J("ngTemplateOutlet",i)}}function U(g,a){1&g&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",21),t.qZA())}function L(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.download())}),t._UZ(2,"ion-icon",26),t.qZA()()}}function R(g,a){if(1&g&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",22),t.YNc(2,L,3,0,"div",23),t.qZA()),2&g){const i=t.oxw();let l;t.xp6(1),t.Tol(null!=i.response&&i.response.Data?"img-response":"img-default"),t.Q6J("src",null!==(l=null==i.response?null:i.response.Data)&&void 0!==l?l:"assets/image/no-image.svg"),t.xp6(1),t.Q6J("ngIf",null==i.response?null:i.response.Data)}}function q(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function G(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function J(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.submitText2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function Y(g,a){1&g&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function j(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1ee3i \xfd "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32)(9,"div",33)(10,"textarea",34),t.NdJ("change",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changePrompt(r))}),t.qZA()()()()(),t.TgZ(11,"div",29)(12,"div",35)(13,"div",36)(14,"label",37),t._uU(15,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(16,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changeSize(r))}),t.YNc(17,q,2,2,"option",39),t.qZA()()(),t.TgZ(18,"div",29)(19,"div",35)(20,"div",36)(21,"label",37),t._uU(22,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(23,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changeVersion(r))}),t.YNc(24,G,2,2,"option",39),t.qZA()()()(),t.TgZ(25,"div")(26,"div",40),t.YNc(27,J,5,0,"div",41),t.YNc(28,Y,2,0,"div",41),t.qZA()()()}if(2&g){const i=t.oxw();let l;t.xp6(10),t.Q6J("ngModel",null!==(l=i.dataForm.prompt)&&void 0!==l?l:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}function H(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function $(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function S(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.submitImage2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function W(g,a){1&g&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function I(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",46)(8,"div",47)(9,"div",32)(10,"div",33),t._UZ(11,"img",3),t.TgZ(12,"div",48)(13,"div",49)(14,"div")(15,"div",50),t._UZ(16,"ion-icon",51),t.qZA(),t.TgZ(17,"div",52)(18,"i"),t._uU(19,"C\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"),t.qZA()()()()()()()()()(),t.TgZ(20,"div",53)(21,"div",35)(22,"div",36)(23,"label",37),t._uU(24,"\u1ea2nh g\u1ed1c"),t.TgZ(25,"span",30),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"div",54)(28,"input",55),t.NdJ("change",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changeFile(r))}),t.qZA(),t.TgZ(29,"label",56),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",29)(32,"label"),t._uU(33,"G\u1ee3i \xfd"),t.qZA(),t.TgZ(34,"div",31)(35,"textarea",57),t.NdJ("change",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changePrompt(r))}),t.qZA()()(),t.TgZ(36,"div",29)(37,"div",35)(38,"div",36)(39,"label",37),t._uU(40,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(41,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changeSize(r))}),t.YNc(42,H,2,2,"option",39),t.qZA()()(),t.TgZ(43,"div",29)(44,"div",35)(45,"div",36)(46,"label",37),t._uU(47,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(48,"select",38),t.NdJ("ngModelChange",function(r){t.CHM(i);const y=t.oxw();return t.KtG(y.changeVersion(r))}),t.YNc(49,$,2,2,"option",39),t.qZA()()()(),t.TgZ(50,"div")(51,"div",40),t.YNc(52,S,5,0,"div",41),t.YNc(53,W,2,0,"div",41),t.qZA()()()}if(2&g){const i=t.oxw();let l,r;t.xp6(11),t.Q6J("src",null!==(l=i.dataForm.fileUrlViewer)&&void 0!==l?l:"",t.LSH),t.xp6(19),t.Oqu(null==i.dataForm.file?null:i.dataForm.file.name),t.xp6(5),t.Q6J("ngModel",null!==(r=i.dataForm.prompt)&&void 0!==r?r:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}let K=(()=>{var g;class a{constructor(l,r,y){this.modalController=l,this.toastController=r,this.loadingController=y,this.versions=["1.0","2.0"],this.sizes=["256x256","512x512","1024x1024","1024x1792","1792x1024"],this.dataForm={version:"2.0",size:"512x512"},this.response={},this.appsettings={}}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,M.Z)(function*(){l.appsettings=yield(0,c.H0)(),l.appsettings.madonvi&&(l.user=yield(0,F.iA)())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeIsFile(l){this.dataForm.isloading||(this.isFile=l)}download(){var l=this;return(0,M.Z)(function*(){var r,y;null!==(r=l.response)&&void 0!==r&&r.Data&&(0,C.r7)({params:{url:null===(y=l.response)||void 0===y?void 0:y.Data},callback:Z=>{if(Z){var x;let s=(null===(x=l.response)||void 0===x||null===(x=x.Data)||void 0===x||null===(x=x.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""))||void 0===x||null===(x=x.split("/"))||void 0===x||null===(x=x.pop())||void 0===x?void 0:x.toLocaleLowerCase())||"image.png";(0,O.d4)(Z,s,"image/x-png",T=>{T?E()(T,s,"image/x-png"):(0,_.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(d=>{d.present()})})}else(0,_.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(s=>{s.present()})}})})()}save(){var l=this;return(0,M.Z)(function*(){var r,y;if(l.dataForm.isloading)return(0,_.B)(l.toastController,{message:"H\xe3y \u0111\u1ee3i h\u1ec7 th\u1ed1ng ho\xe0n t\u1ea5t qu\xe1 tr\xecnh t\u1ea1o d\u1eef li\u1ec7u!"}).then(x=>{x.present()});if(null===(r=l.response)||void 0===r||!r.Data)return(0,_.B)(l.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u kh\u1edfi t\u1ea1o!"}).then(x=>{x.present()});const Z=yield l.loadingController.create({message:"\u0110ang t\u1ea3i..."});(0,C.G4)({loading:x=>{x?Z.present():Z.dismiss()},params:{url:null===(y=l.response)||void 0===y?void 0:y.Data},callback:x=>{if(x){var s,T,d;let o={};return o.filepath=x.path+"/"+(null===(s=x.file)||void 0===s?void 0:s.name),o.link_file=l.appsettings.readfileuploadurl+x.path+"/"+(null===(T=x.file)||void 0===T?void 0:T.name),o.media_title=`AI-${e()(new Date).format("YYYYMMDDHHmm(SSS)")}`,o.media_description=l.dataForm.size,o.media_content=l.isFile?void 0:l.dataForm.prompt,o.v_mediatype=f.t.IMAGE,void(0,P.o5)({loading:p=>{p?Z.present():Z.dismiss()},params:Object.assign(o,{userid:null===(d=l.user)||void 0===d?void 0:d.userid}),callback:p=>{(0,_.B)(l.toastController,{},p).then(v=>{v.present()}),0==(null==p?void 0:p.returncode)&&l.modalController.dismiss(null==p?void 0:p.id,"confirm")}})}(0,_.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i l\xean t\u1eadp tin!"}).then(o=>{o.present()})}})})()}changeSize(l){this.dataForm.size=l}changeVersion(l){this.dataForm.version=l}changePrompt(l){var r;this.dataForm.prompt=null==l||null===(r=l.target)||void 0===r||null===(r=r.value)||void 0===r?void 0:r.trim().replace(/\s+/g," ")}changeFile(l){this.dataForm.file=void 0,l.target.files.length&&(this.dataForm.file=l.target.files[0]),this.dataForm.fileUrlViewer=this.dataForm.file?URL.createObjectURL(this.dataForm.file):void 0}submitText2Image(){var l=this;return(0,M.Z)(function*(){if(!l.dataForm.prompt)return(0,_.B)(l.toastController,{message:"H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(r=>{r.present()});(0,C.u4)({loading:r=>{l.dataForm.isloading=r},params:l.dataForm,callback:r=>{l.response=r}})})()}submitImage2Image(){var l=this;return(0,M.Z)(function*(){if(!l.dataForm.file)return(0,_.B)(l.toastController,{message:"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(r=>{r.present()});(0,C.zS)({loading:r=>{l.dataForm.isloading=r},params:l.dataForm,callback:r=>{l.response=r}})})()}}return(g=a).\u0275fac=function(l){return new(l||g)(t.Y36(h.IN),t.Y36(h.yF),t.Y36(h.HT))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-modal-ai-image"]],decls:35,vars:9,consts:[["slot","end","mode","ios","color","light","fill","outline",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch","user-select-none"],[1,"col-12","col-lg-5","p-3","pr-lg-0"],[1,"prompt"],[1,"d-flex","h-100","flex-column"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"flex-grow-1","overflow-auto"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col-12","col-lg-7","p-3"],["class","response",4,"ngIf"],["typelink",""],["typefile",""],[3,"ngTemplateOutlet"],[1,"response"],["src","../../../../assets/image/gif/ai-loading.gif",1,"w-100","h-100","no-fit"],[1,"w-100","h-100",3,"src"],["class","download-box",4,"ngIf"],[1,"download-box"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/download.svg"],[1,"d-flex","h-100","flex-column","justify-content-between"],[1,"px-3","mt-2"],[1,"form-group"],[1,"ml-1","text-danger"],[1,"prompt-box"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item"],["placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","text-center"],[4,"ngIf"],[3,"value"],[1,"btn",3,"click"],["src","../../../../assets/icon/16x16/magic.svg"],["name","dots","color","dark",1,"align-middle"],[1,"ondrop-image"],["onclick","document.getElementById('inputFileAiImage').click()",1,"media-box"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-icon"],["src","../../../../assets/image-svg/uploadImage2.svg"],[1,"placeholder-text"],[1,"form-group","hide"],[1,"custom-file"],["type","file","id","inputFileAiImage","multiple","",1,"custom-file-input",3,"change"],["for","inputFileAiImage",1,"custom-file-label"],["rows","3","placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"]],template:function(l,r){1&l&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"T\u1ea1o \u1ea3nh b\u1eb1ng c\xf4ng ngh\u1ec7 AI"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return r.save()}),t.TgZ(5,"ion-label"),t._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return r.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return r.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),t.NdJ("click",function(){return r.changeIsFile(!1)}),t._uU(21,"V\u1ebd \u1ea3nh AI"),t.qZA()(),t.TgZ(22,"li",11)(23,"a",12),t.NdJ("click",function(){return r.changeIsFile(!0)}),t._uU(24,"AI - T\u1ea1o \u1ea3nh t\u01b0\u01a1ng \u0111\u1ed3ng"),t.qZA()()()(),t.TgZ(25,"div",13),t.YNc(26,D,1,1,"ng-container",14),t.YNc(27,A,1,1,"ng-container",14),t.qZA()()()(),t.TgZ(28,"div",15),t.YNc(29,U,2,0,"div",16),t.YNc(30,R,3,4,"div",16),t.qZA()()(),t.YNc(31,j,29,7,"ng-template",null,17,t.W1O),t.YNc(33,I,54,9,"ng-template",null,18,t.W1O)),2&l&&(t.xp6(9),t.Q6J("src",r.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(11),t.Tol(r.isFile?"":"active"),t.xp6(3),t.Tol(r.isFile?"active":""),t.xp6(3),t.Q6J("ngIf",!r.isFile),t.xp6(1),t.Q6J("ngIf",r.isFile),t.xp6(2),t.Q6J("ngIf",r.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",!r.dataForm.isloading))},dependencies:[m.sg,m.O5,m.tP,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,h.YG,h.Sm,h.W2,h.Gu,h.gu,h.Xz,h.Q$,h.PQ,h.wd,h.sr],styles:['button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.hide[_ngcontent-%COMP%]{display:none!important}.ondrop-image[_ngcontent-%COMP%]{--color: #eee}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]{border-radius:4px;border:1px dashed rgba(51,53,74,.2);background:#FFF}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:60px}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#33333380}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]), .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%]{display:none}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]) + .placeholder[_ngcontent-%COMP%], .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{display:block}.prompt[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;color:#333;box-shadow:0 0 12px #0000001a}.prompt[_ngcontent-%COMP%]   .prompt-box[_ngcontent-%COMP%]{border:1px solid transparent}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{min-width:33%}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;background:transparent;padding-left:0}.prompt[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#eee}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade, #000)}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:160px;height:3rem;padding:0;border-radius:1.5rem;vertical-align:middle;text-align:center;font-size:14px;font-weight:400;text-transform:initial;background:#FF6A61;color:#fff}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:0;color:inherit}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){background-color:#e9e8e9}.response[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;box-shadow:0 0 12px #0000001a;line-height:0}.response[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.response[_ngcontent-%COMP%]   ion-img.no-fit[_ngcontent-%COMP%]{object-fit:none}.response[_ngcontent-%COMP%]   ion-img.img-default[_ngcontent-%COMP%]{object-fit:cover}.response[_ngcontent-%COMP%]   ion-img.img-response[_ngcontent-%COMP%]{object-fit:contain}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:1rem;width:3rem;height:3rem;margin-left:-1.5rem;line-height:0;border-radius:50%;box-shadow:0 4px 4px #00000026}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:inherit}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;font-size:26px}']}),a})()},6115:(Q,B,u)=>{"use strict";u.d(B,{b:()=>W});var M=u(5861),w=u(4459),E=u(8247),k=u(6240),e=u(3589),c=u(3377),P=u(1862),C=u(422),F=u(3130),O=u(8186),_=u(9403),f=u(5938),t=u(203),h=u(6034),m=u(4260),n=u(9468),D=u(3536),A=u(6814),U=u(95);function L(I,K){if(1&I){const g=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){n.CHM(g);const i=n.oxw();return n.KtG(i.switchModal("ai-image"))}),n._uU(1,"T\u1ea1o b\u1eb1ng AI"),n.qZA()}2&I&&n.Tol("btn-light")}function R(I,K){if(1&I&&n.GkF(0,34),2&I){n.oxw();const g=n.MAs(74);n.Q6J("ngTemplateOutlet",g)}}function q(I,K){if(1&I&&n.GkF(0,34),2&I){n.oxw();const g=n.MAs(76);n.Q6J("ngTemplateOutlet",g)}}function G(I,K){if(1&I){const g=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.clearTopic(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function J(I,K){if(1&I){const g=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.clearCategory(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function Y(I,K){if(1&I&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&I){const g=K.$implicit;n.Q6J("value",g.lookup_value),n.xp6(1),n.Oqu(g.lookup_title)}}function j(I,K){if(1&I&&(n.ynx(0),n.TgZ(1,"option",41),n._uU(2,"Ch\u1ecdn lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA(),n.YNc(3,Y,2,2,"option",42),n.BQk()),2&I){const g=n.oxw(2);n.xp6(3),n.Q6J("ngForOf",g.v_mediatypes)}}function H(I,K){if(1&I){const g=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"T\u1eadp tin"),n.qZA()(),n.TgZ(5,"div",26)(6,"input",36),n.NdJ("change",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeMediaFile(i))}),n.qZA(),n.TgZ(7,"label",37),n._uU(8),n.qZA()()()(),n.TgZ(9,"div",9)(10,"div",15)(11,"div",16)(12,"label",17),n._uU(13,"Lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA()(),n.TgZ(14,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeMediaType(i))}),n.YNc(15,j,4,1,"ng-container",39),n.ynx(16),n.TgZ(17,"option",40),n._uU(18,"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn theo lo\u1ea1i t\u1eadp tin"),n.qZA(),n.BQk(),n.qZA()()()}if(2&I){const g=n.oxw();let a,i;n.xp6(8),n.Oqu(g.mediaFiles.length?"\u0110\xe3 ch\u1ecdn "+g.mediaFiles.length+" t\u1eadp tin":(null!==(a=g.media.filepath)&&void 0!==a?a:"").split("/").pop()),n.xp6(6),n.Q6J("ngModel",null!==(i=g.media.v_mediatype)&&void 0!==i?i:0),n.xp6(1),n.Q6J("ngIf",g.mediaFiles.length<=1)}}function $(I,K){if(1&I&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&I){const g=K.$implicit;n.Q6J("value",g.lookup_value),n.xp6(1),n.Oqu(g.lookup_title)}}function S(I,K){if(1&I){const g=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"\u0110\u01b0\u1eddng d\u1eabn"),n.qZA()(),n.TgZ(5,"input",44),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeLinkShare(i))}),n.qZA()()(),n.TgZ(6,"div",9)(7,"div",15)(8,"div",16)(9,"label",17),n._uU(10,"Lo\u1ea1i li\xean k\u1ebft"),n.qZA()(),n.TgZ(11,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeOssType(i))}),n.TgZ(12,"option",41),n._uU(13,"Ch\u1ecdn lo\u1ea1i li\xean k\u1ebft"),n.qZA(),n.YNc(14,$,2,2,"option",42),n.qZA()()()}if(2&I){const g=n.oxw();let a;n.xp6(5),n.Q6J("ngModel",g.media.link_share),n.xp6(6),n.Q6J("ngModel",null!==(a=g.media.v_osstype)&&void 0!==a?a:0),n.xp6(3),n.Q6J("ngForOf",g.v_osstypes)}}let W=(()=>{var I;class K{constructor(a,i,l,r){this.modalController=a,this.toastController=i,this.loadingController=l,this.popoverController=r,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[],this.membership={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,M.Z)(function*(){a.appsettings=yield(0,w.H0)(),a.appsettings.madonvi&&(a.user=yield(0,c.iA)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,E.D)({params:{lookup_key:"v_mediatype"},callback:i=>{this.v_mediatypes=i||[]}}),(0,E.D)({params:{lookup_key:"v_osstype"},callback:i=>{this.v_osstypes=i||[]}}),(0,t.ef)({params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,v_functionlimit:h.z.GenAITaoHinhAnh},callback:i=>{var l;this.membership.GenAITaoHinhAnh=(0,m.f)(null==i||null===(l=i.contents)||void 0===l?void 0:l.find(r=>r.v_functionlimit==h.z.GenAITaoHinhAnh))}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(a){return this.modalController.dismiss({modalName:a},"switch")}save(){var a=this;return(0,M.Z)(function*(){let i=[];if(a.mediaCover&&i.push(new Promise((r,y)=>{(0,e.z)({params:{file:a.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:Z=>{var x;0==(null==Z?void 0:Z.ReturnCode)&&(a.media.cover=Z.path+"/"+(null===(x=Z.file)||void 0===x?void 0:x.name)),r(!0)}})})),a.isLink){if(a.media.v_mediatype=C.t.LINK,!a.media.link_share)return void(0,O.B)(a.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(r=>{r.present()})}else if(!a.media.link_file){if(a.mediaFiles.length>=2){const r=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});return r.present(),void a.recursiveUpload(y=>{y||r.dismiss()})}if(1!=a.mediaFiles.length)return void(0,O.B)(a.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(r=>{r.present()});i.push(new Promise((r,y)=>{let Z=a.mediaFiles.pop();(0,e.z)({params:{file:Z,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:x=>{var s,T;0==(null==x?void 0:x.ReturnCode)&&(a.media.filepath=x.path+"/"+(null===(s=x.file)||void 0===s?void 0:s.name),a.media.link_file=a.readfileuploadurl+x.path+"/"+(null===(T=x.file)||void 0===T?void 0:T.name),a.media.media_title||(a.media.media_title=x.name.replace(/.[a-zA-Z0-9]+$/,"")),a.media.v_mediatype||a.v_mediatypes.every(d=>{var o,p;return null===(o=d.lookup_note)||void 0===o||null===(o=o.replace(/\s+/g,""))||void 0===o||!o.split(",").includes(null===(p=x.file)||void 0===p?void 0:p.extension)||(a.media.v_mediatype=d.lookup_value,!1)})),r(!0)}})}))}const l=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});l.present(),Promise.all(i).then(r=>{var y;(0,k.o5)({params:Object.assign({},a.media,{userid:null===(y=a.user)||void 0===y?void 0:y.userid}),callback:Z=>{(0,O.B)(a.toastController,{},Z).then(x=>{x.present()}),0==(null==Z?void 0:Z.returncode)&&a.modalController.dismiss(null==Z?void 0:Z.id,"confirm")},loading:Z=>{Z||l.dismiss()}})})})()}recursiveUpload(a){if(this.mediaFiles.length){let i={topic_id:this.media.topic_id,category_id:this.media.category_id},l=this.mediaFiles.pop();(0,e.z)({params:{file:l,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:r=>{var y,Z,x;0==(null==r?void 0:r.ReturnCode)?(i.filepath=r.path+"/"+(null===(y=r.file)||void 0===y?void 0:y.name),i.link_file=this.readfileuploadurl+r.path+"/"+(null===(Z=r.file)||void 0===Z?void 0:Z.name),i.media_title=r.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(s=>{var T,d;return null===(T=s.lookup_note)||void 0===T||null===(T=T.replace(/\s+/g,""))||void 0===T||!T.split(",").includes(null===(d=r.file)||void 0===d?void 0:d.extension)||(i.v_mediatype=s.lookup_value,!1)}),(0,k.o5)({params:Object.assign(i,{userid:null===(x=this.user)||void 0===x?void 0:x.userid}),callback:s=>{this.recursiveUpload(a)}})):this.recursiveUpload(a)}})}else a(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(a){var i=this;return(0,M.Z)(function*(){const l=yield i.popoverController.create({component:f.a,componentProps:{selectedId:i.media.topic_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var y,Z;"confirm"==r.role&&Object.assign(i.media,{topic_id:null===(y=r.data)||void 0===y?void 0:y.topic_id,topic_title:null===(Z=r.data)||void 0===Z?void 0:Z.topic_title})}),l.present()})()}clearTopic(a){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(a){var i;this.media.topic_id=null!==(i=parseInt(a))&&void 0!==i?i:0}presentPopoverCategory(a){var i=this;return(0,M.Z)(function*(){const l=yield i.popoverController.create({component:_.l,componentProps:{selectedId:i.media.category_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var y,Z;"confirm"==r.role&&Object.assign(i.media,{category_id:null===(y=r.data)||void 0===y?void 0:y.category_id,category_title:null===(Z=r.data)||void 0===Z?void 0:Z.category_title})}),l.present()})()}clearCategory(a){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(a){var i;this.media.category_id=null!==(i=parseInt(a))&&void 0!==i?i:0}changeMediaTitle(a){var i;this.media.media_title=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaDescription(a){var i;this.media.media_description=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaContent(a){var i;this.media.media_content=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaType(a){this.media.v_mediatype=a?parseInt(a):0}changeOssType(a){this.media.v_osstype=a?parseInt(a):0}changeLinkShare(a){this.media.link_share=a,(0,P.II)(a)?this.media.v_osstype=F.e.YOUTUBE:(0,P.VJ)(a)&&(this.media.v_osstype=F.e.PHET)}changeMediaFile(a){this.mediaFiles.length=0;for(let l=0,r=null===(i=a.target)||void 0===i?void 0:i.files.length;l<r;l++){var i;this.mediaFiles.push(a.target.files[l])}if(1==this.mediaFiles.length){let{fileName:l,fileExtension:r}=(0,P.yB)(this.mediaFiles[0].name);this.media.media_title=l,this.media.v_mediatype=void 0,this.v_mediatypes.every(y=>{var Z;return null===(Z=y.lookup_note)||void 0===Z||null===(Z=Z.replace(/\s+/g,""))||void 0===Z||!Z.split(",").includes(r)||(this.media.v_mediatype=y.lookup_value,!1)}),!this.mediaCover&&this.media.v_mediatype==C.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaFiles[0]))}}changeMediaCover(a){var i;if(this.mediaCover=void 0,a.target.files.length&&(this.mediaCover=a.target.files[0]),!this.mediaCover)return;let y,{fileExtension:r}=(0,P.yB)(null===(i=this.mediaCover)||void 0===i?void 0:i.name);r&&(this.v_mediatypes.every(Z=>{var x;return null===(x=Z.lookup_note)||void 0===x||null===(x=x.replace(/\s+/g,""))||void 0===x||!x.split(",").includes(r)||(y=Z.lookup_value,!1)}),this.mediaCover&&y==C.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(a){this.isLink=a}}return(I=K).\u0275fac=function(a){return new(a||I)(n.Y36(D.IN),n.Y36(D.yF),n.Y36(D.HT),n.Y36(D.Dh))},I.\u0275cmp=n.Xpm({type:I,selectors:[["app-modal-media-add"]],inputs:{filter:"filter"},decls:77,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"class","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","6",1,"form-control",3,"ngModel","change"],[1,"col-auto"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"w-100","h-100",3,"src"],["typefile",""],["typelink",""],[3,"ngTemplateOutlet"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModel","ngModelChange"]],template:function(a,i){if(1&a&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Th\xeam h\u1ecdc li\u1ec7u"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return i.save()}),n.TgZ(5,"ion-label"),n._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return i.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return i.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"button",11),n.NdJ("click",function(){return i.changeIsLink(!1)}),n._uU(19,"T\u1eadp tin"),n.qZA(),n.TgZ(20,"button",11),n.NdJ("click",function(){return i.changeIsLink(!0)}),n._uU(21,"Li\xean k\u1ebft"),n.qZA(),n.YNc(22,L,2,2,"button",12),n.qZA()(),n.YNc(23,R,1,1,"ng-container",13),n.YNc(24,q,1,1,"ng-container",13),n.qZA()(),n.TgZ(25,"div",7)(26,"div",14)(27,"div",9)(28,"div",15)(29,"div",16)(30,"label",17),n._uU(31,"C\u1ea5p l\u1edbp"),n.qZA()(),n._UZ(32,"input",18),n.TgZ(33,"div",19),n.YNc(34,G,2,0,"button",20),n.TgZ(35,"button",21),n.NdJ("click",function(r){return i.presentPopoverTopic(r)}),n._UZ(36,"ion-icon",22),n.qZA()()()(),n.TgZ(37,"div",9)(38,"div",15)(39,"div",16)(40,"label",17),n._uU(41,"M\xf4n h\u1ecdc"),n.qZA()(),n._UZ(42,"input",18),n.TgZ(43,"div",19),n.YNc(44,J,2,0,"button",20),n.TgZ(45,"button",21),n.NdJ("click",function(r){return i.presentPopoverCategory(r)}),n._UZ(46,"ion-icon",22),n.qZA()()()(),n.TgZ(47,"div",9)(48,"div",15)(49,"div",16)(50,"label",17),n._uU(51,"T\xean h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(52,"input",23),n.NdJ("change",function(r){return i.changeMediaTitle(r)}),n.qZA()()(),n.TgZ(53,"div",9)(54,"div",15)(55,"div",16)(56,"label",17),n._uU(57,"M\xf4 t\u1ea3"),n.qZA()(),n.TgZ(58,"textarea",24),n.NdJ("change",function(r){return i.changeMediaDescription(r)}),n.qZA()()()(),n.TgZ(59,"div",25)(60,"div",9)(61,"div",15)(62,"div",16)(63,"label",17),n._uU(64,"\u1ea2nh b\xeca"),n.qZA()(),n.TgZ(65,"div",26)(66,"input",27),n.NdJ("change",function(r){return i.changeMediaCover(r)}),n.qZA(),n.TgZ(67,"label",28),n._uU(68),n.qZA()()()(),n.TgZ(69,"div",9)(70,"div",29)(71,"div",30),n._UZ(72,"ion-img",31),n.qZA()()()()()()(),n.YNc(73,H,19,3,"ng-template",null,32,n.W1O),n.YNc(75,S,15,3,"ng-template",null,33,n.W1O)),2&a){let l,r;n.xp6(9),n.Q6J("src",i.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(9),n.Tol(i.isLink?"btn-light":"btn-primary"),n.xp6(2),n.Tol(i.isLink?"btn-primary":"btn-light"),n.xp6(2),n.Q6J("ngIf",null==i.membership?null:i.membership.GenAITaoHinhAnh),n.xp6(1),n.Q6J("ngIf",!i.isLink),n.xp6(1),n.Q6J("ngIf",i.isLink),n.xp6(8),n.Q6J("value",null!==(l=i.media.topic_title)&&void 0!==l?l:""),n.xp6(2),n.Q6J("ngIf",i.media.topic_id),n.xp6(8),n.Q6J("value",null!==(r=i.media.category_title)&&void 0!==r?r:""),n.xp6(2),n.Q6J("ngIf",i.media.category_id),n.xp6(8),n.Q6J("ngModel",i.media.media_title),n.xp6(6),n.Q6J("ngModel",i.media.media_description),n.xp6(10),n.Oqu(null==i.mediaCover?null:i.mediaCover.name),n.xp6(4),n.Q6J("src",i.fileurl||"assets/image-png/media-default.jpg")}},dependencies:[A.sg,A.O5,A.tP,U.YN,U.Kr,U.Fj,U.EJ,U.JJ,U.On,D.YG,D.Sm,D.W2,D.Gu,D.gu,D.Xz,D.Q$,D.wd,D.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),K})()},5630:(Q,B,u)=>{"use strict";u.d(B,{M:()=>x});var M=u(1461),w=u(8247),E=u(3938),k=u(4041),e=u(9468),c=u(3536),P=u(6814);function C(s,T){if(1&s&&e.GkF(0,23),2&s){e.oxw();const d=e.MAs(23);e.Q6J("ngTemplateOutlet",d)}}function F(s,T){if(1&s&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Lo\u1ea1i t\u1eadp tin"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const d=e.MAs(25);e.xp6(5),e.Q6J("ngTemplateOutlet",d)}}function O(s,T){if(1&s&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Th\u1ebb"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const d=e.MAs(27);e.xp6(5),e.Q6J("ngTemplateOutlet",d)}}function _(s,T){if(1&s&&(e.TgZ(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"C\u1ea5p l\u1edbp"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const d=e.MAs(29);e.xp6(5),e.Q6J("ngTemplateOutlet",d)}}function f(s,T){if(1&s&&(e.TgZ(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"M\xf4n h\u1ecdc"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const d=e.MAs(33);e.xp6(5),e.Q6J("ngTemplateOutlet",d)}}function t(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",37),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.clearFilterTopic(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=d.filter.topic_title)&&void 0!==o?o:"C\u1ea5p l\u1edbp")}}function h(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",40),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.clearFilterCategory(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=d.filter.category_title)&&void 0!==o?o:"M\xf4n h\u1ecdc")}}function m(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",41),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.clearFilterTags(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=d.filter.tags_key)&&void 0!==o?o:"Th\u1ebb")}}function n(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.clearFilterMediaType(p,v.filter.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=d.filter.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function D(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){const b=e.CHM(d).$implicit,N=e.oxw(2);return e.KtG(N.clearFilterMediaType(p,b.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=T.$implicit;let o;e.xp6(4),e.Oqu(null!==(o=d.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function A(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",43),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.clearSearch(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const d=e.oxw(2);e.xp6(4),e.Oqu(d.filter.search)}}const U=function(){return[]};function L(s,T){if(1&s&&(e.TgZ(0,"div",30)(1,"div",31)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,t,7,1,"div",33),e.YNc(6,h,7,1,"div",33),e.YNc(7,m,7,1,"div",33),e.YNc(8,n,7,1,"div",33),e.YNc(9,D,7,1,"div",34),e.YNc(10,A,7,1,"div",33),e.qZA()(),e._UZ(11,"hr")),2&s){const d=e.oxw();let o;e.xp6(3),e.hij("B\u1ed9 l\u1ecdc \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng (",d.counter(),")"),e.xp6(2),e.Q6J("ngIf",d.filter.topic_id),e.xp6(1),e.Q6J("ngIf",d.filter.category_id),e.xp6(1),e.Q6J("ngIf",d.filter.tags_id),e.xp6(1),e.Q6J("ngIf",d.filter.v_mediatype),e.xp6(1),e.Q6J("ngForOf",null!==(o=d.filter.v_mediatypes)&&void 0!==o?o:e.DdM(7,U)),e.xp6(1),e.Q6J("ngIf",d.filter.search)}}function R(s,T){if(1&s){const d=e.EpF();e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-checkbox",47),e.NdJ("ionChange",function(p){e.CHM(d);const v=e.oxw(2);return e.KtG(v.changeMediaType(p))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.BQk()}if(2&s){const d=T.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("value",d.lookup_value)("checked",o.checkedMediaType(d.lookup_value)),e.xp6(2),e.Oqu(d.lookup_title)}}function q(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.NdJ("ionChange",function(p){e.CHM(d);const v=e.oxw();return e.KtG(v.changeMediaType(p))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"T\u1ea5t c\u1ea3"),e.qZA()(),e.YNc(5,R,5,3,"ng-container",46),e.qZA()}if(2&s){const d=e.oxw();e.xp6(2),e.Q6J("value",0),e.xp6(3),e.Q6J("ngForOf",d.v_mediatypes)}}function G(s,T){if(1&s){const d=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){const v=e.CHM(d).$implicit,b=e.oxw(2);return e.KtG(b.applyFilterTags({tags_id:v.tags_id,tags_key:v.tags_key}))}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const d=T.$implicit,o=e.oxw(2);e.xp6(1),e.Tol(d.tags_id==o.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.uIk("data-id",d.tags_id),e.xp6(1),e.Oqu(d.tags_key)}}function J(s,T){if(1&s&&(e.TgZ(0,"div",48),e.YNc(1,G,3,4,"ng-container",46),e.qZA()),2&s){const d=e.oxw();e.xp6(1),e.Q6J("ngForOf",d.filterTags(d.tagss))}}const Y=function(s){return{$implicit:s}};function j(s,T){if(1&s&&e.GkF(0,52),2&s){const d=T.$implicit;e.oxw(2);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,d))}}function H(s,T){if(1&s&&(e.TgZ(0,"div",50)(1,"ion-list",44)(2,"ul"),e.YNc(3,j,1,4,"ng-container",51),e.qZA()()()),2&s){const d=e.oxw();e.xp6(3),e.Q6J("ngForOf",d.filterTopic(d.topics))}}function $(s,T){1&s&&e._UZ(0,"ion-icon",59)}function S(s,T){1&s&&e._UZ(0,"ion-icon",60)}function W(s,T){if(1&s&&e.GkF(0,52),2&s){const d=T.$implicit;e.oxw(3);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,d))}}function I(s,T){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,W,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const d=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterTopic(o.topics,d.topic_id))}}function K(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const v=e.CHM(d).$implicit,b=e.oxw();return e.KtG(b.applyFilterTopic({topic_id:v.topic_id,topic_title:v.topic_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(p){const b=e.CHM(d).$implicit,N=e.oxw();return e.KtG(N.expandTopic(p,b.topic_id,b.isexpanded))}),e.YNc(3,$,1,0,"ion-icon",55),e.YNc(4,S,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,I,3,1,"ng-container",58),e.qZA()}if(2&s){const d=T.$implicit,o=e.oxw();e.xp6(1),e.Tol(d.topic_id==o.filter.topic_id?"actived":""),e.xp6(1),e.uIk("style",d.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!d.isexpanded),e.xp6(1),e.Q6J("ngIf",d.isexpanded),e.xp6(1),e.Q6J("title",d.topic_title),e.xp6(1),e.Oqu(d.topic_title),e.xp6(1),e.Q6J("ngIf",d.isexpanded)}}function g(s,T){if(1&s&&e.GkF(0,52),2&s){const d=T.$implicit;e.oxw(2);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,d))}}function a(s,T){if(1&s&&(e.TgZ(0,"div",61)(1,"ion-list",44)(2,"ul"),e.YNc(3,g,1,4,"ng-container",51),e.qZA()()()),2&s){const d=e.oxw();e.xp6(3),e.Q6J("ngForOf",d.filterCategory(d.categorys))}}function i(s,T){1&s&&e._UZ(0,"ion-icon",59)}function l(s,T){1&s&&e._UZ(0,"ion-icon",60)}function r(s,T){if(1&s&&e.GkF(0,52),2&s){const d=T.$implicit;e.oxw(3);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Y,d))}}function y(s,T){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,r,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const d=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterCategory(o.categorys,d.category_id))}}function Z(s,T){if(1&s){const d=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const v=e.CHM(d).$implicit,b=e.oxw();return e.KtG(b.applyFilterCategory({category_id:v.category_id,category_title:v.category_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(p){const b=e.CHM(d).$implicit,N=e.oxw();return e.KtG(N.expandCategory(p,b.category_id,b.isexpanded))}),e.YNc(3,i,1,0,"ion-icon",55),e.YNc(4,l,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,y,3,1,"ng-container",58),e.qZA()}if(2&s){const d=T.$implicit,o=e.oxw();e.xp6(1),e.Tol(d.category_id==o.filter.category_id?"actived":""),e.xp6(1),e.uIk("style",d.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!d.isexpanded),e.xp6(1),e.Q6J("ngIf",d.isexpanded),e.xp6(1),e.Q6J("title",d.category_title),e.xp6(1),e.Oqu(d.category_title),e.xp6(1),e.Q6J("ngIf",d.isexpanded)}}let x=(()=>{var s;class T{constructor(o){this.modalController=o,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var o;null!==(o=this.filter.v_mediatypes)&&void 0!==o&&o.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,w.D)({params:{lookup_key:"v_mediatype"},callback:p=>{this.v_mediatypes=p||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let o=0;return this.filter.search&&(o+=1),this.filter.topic_id&&(o+=1),this.filter.category_id&&(o+=1),this.filter.tags_id&&(o+=1),this.filter.v_mediatypes&&(o+=this.filter.v_mediatypes.length),o}changeMediaType(o){let{value:p,checked:v}=o.detail;if(0==p)return void(this.filter.v_mediatypes=v?this.v_mediatypes.map(z=>({v_mediatype:z.lookup_value,v_mediatype_title:z.lookup_title})):[]);let b=this.v_mediatypes.find(z=>z.lookup_value==p);var N;v?this.filter.v_mediatypes?this.filter.v_mediatypes.find(z=>z.v_mediatype==p)||this.filter.v_mediatypes.push({v_mediatype:null==b?void 0:b.lookup_value,v_mediatype_title:null==b?void 0:b.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==b?void 0:b.lookup_value,v_mediatype_title:null==b?void 0:b.lookup_title}]:this.filter.v_mediatypes=null===(N=this.filter.v_mediatypes)||void 0===N?void 0:N.filter(z=>z.v_mediatype!=p)}checkedMediaType(o){var p;return!(null===(p=this.filter.v_mediatypes)||void 0===p||!p.find(v=>v.v_mediatype==o))}clearSearch(o){Object.assign(this.filter,{search:null})}clearFilterMediaType(o,p){this.changeMediaType({detail:{value:p,checked:!1}})}refreshDataTags(o){this.loadTags(void 0,o,!0)}loadTags(o,p,v){var b;(0,E.GX)({params:{userid:null===(b=this.user)||void 0===b?void 0:b.userid,tags_pid:o,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:N=>{var z,V;this.tagss=v?null!==(z=null==N?void 0:N.tags)&&void 0!==z?z:[]:this.tagss.concat(null!==(V=null==N?void 0:N.tags)&&void 0!==V?V:[]),p&&p()}})}filterTags(o,p){return o.filter(p?v=>v.tags_pid==p:v=>null==v.tags_pid||0==v.tags_pid)}expandTags(o,p,v){o.preventDefault(),o.stopPropagation(),this.tagss.filter(b=>b.tags_id==p).forEach(b=>{b.isexpanded=!v,b.isloadedchild||(b.isloadedchild=!0,this.loadTags(b.tags_id))})}applyFilterTags(o){Object.assign(this.filter,this.filter.tags_id==o.tags_id?{tags_id:null,tags_key:null}:o)}clearFilterTags(o){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(o){this.loadTopic(void 0,o,!0)}loadTopic(o,p,v){var b;(0,k.w)({params:{userid:null===(b=this.user)||void 0===b?void 0:b.userid,topic_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.topics=v?null!=N?N:[]:this.topics.concat(null!=N?N:[]),p&&p()}})}filterTopic(o,p){return o.filter(p?v=>v.topic_pid==p:v=>null==v.topic_pid||0==v.topic_pid)}expandTopic(o,p,v){o.preventDefault(),o.stopPropagation(),this.topics.filter(b=>b.topic_id==p).forEach(b=>{b.isexpanded=!v,b.isloadedchild||(b.isloadedchild=!0,this.loadTopic(b.topic_id))})}applyFilterTopic(o){Object.assign(this.filter,this.filter.topic_id==o.topic_id?{topic_id:null,topic_title:null}:o)}clearFilterTopic(o){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(o){this.loadCategory(void 0,o,!0)}loadCategory(o,p,v){var b;(0,M.b)({params:{userid:null===(b=this.user)||void 0===b?void 0:b.userid,category_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.categorys=v?null!=N?N:[]:this.categorys.concat(null!=N?N:[]),p&&p()}})}filterCategory(o,p){return o.filter(p?v=>v.category_pid==p:v=>null==v.category_pid||0==v.category_pid)}expandCategory(o,p,v){o.preventDefault(),o.stopPropagation(),this.categorys.filter(b=>b.category_id==p).forEach(b=>{b.isexpanded=!v,b.isloadedchild||(b.isloadedchild=!0,this.loadCategory(b.category_id))})}applyFilterCategory(o){Object.assign(this.filter,this.filter.category_id==o.category_id?{category_id:null,category_title:null}:o)}clearFilterCategory(o){Object.assign(this.filter,{category_id:null,category_title:null})}}return(s=T).\u0275fac=function(o){return new(o||s)(e.Y36(c.IN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:36,vars:7,consts:[["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../../assets/icon-svg/arrow-right.svg"],["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../../assets/icon-svg/dashboard/category.svg"],["src","../../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"value","ionChange"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"value","checked","ionChange"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(o,p){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\u1ed9 l\u1ecdc"),e.qZA(),e.TgZ(4,"ion-label",1),e.NdJ("click",function(){return p.clean()}),e._uU(5,"X\xf3a t\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return p.close()}),e._UZ(8,"ion-icon",4),e.qZA()()()(),e._UZ(9,"hr",5),e.TgZ(10,"ion-content",6),e.YNc(11,C,1,1,"ng-container",7),e.TgZ(12,"ion-accordion-group",8),e.YNc(13,F,6,1,"ion-accordion",9),e.YNc(14,O,6,1,"ion-accordion",10),e.YNc(15,_,6,1,"ion-accordion",11),e.YNc(16,f,6,1,"ion-accordion",12),e.qZA()(),e.TgZ(17,"ion-footer")(18,"ion-item",13),e.NdJ("click",function(){return p.apply()}),e.TgZ(19,"ion-label",14),e._uU(20,"\xc1p d\u1ee5ng"),e.qZA(),e._UZ(21,"ion-icon",15),e.qZA()(),e.YNc(22,L,12,8,"ng-template",null,16,e.W1O),e.YNc(24,q,6,2,"ng-template",null,17,e.W1O),e.YNc(26,J,2,1,"ng-template",null,18,e.W1O),e.YNc(28,H,4,1,"ng-template",null,19,e.W1O),e.YNc(30,K,8,8,"ng-template",null,20,e.W1O),e.YNc(32,a,4,1,"ng-template",null,21,e.W1O),e.YNc(34,Z,8,8,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(11),e.Q6J("ngIf",p.filter.topic_id||p.filter.category_id||p.filter.tags_id||p.filter.v_mediatype||(null==p.filter.v_mediatypes?null:p.filter.v_mediatypes.length)||p.filter.search),e.xp6(1),e.Q6J("multiple",!0)("value",p.accordionValue),e.xp6(1),e.Q6J("ngIf",p.v_mediatypes.length),e.xp6(1),e.Q6J("ngIf",p.tagss.length),e.xp6(1),e.Q6J("ngIf",p.topics.length),e.xp6(1),e.Q6J("ngIf",p.categorys.length))},dependencies:[P.sg,P.O5,P.tP,c.We,c.eh,c.YG,c.Sm,c.nz,c.W2,c.fr,c.Gu,c.gu,c.Ie,c.Q$,c.q_,c.wd,c.sr,c.w],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),T})()},8262:(Q,B,u)=>{"use strict";u.d(B,{W:()=>E});var M=u(9468),w=u(3536);let E=(()=>{var k;class e{constructor(P){this.popoverController=P}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(k=e).\u0275fac=function(P){return new(P||k)(M.Y36(w.Dh))},k.\u0275cmp=M.Xpm({type:k,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId"},decls:9,vars:0,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(P,C){1&P&&(M.TgZ(0,"div",0)(1,"div",1)(2,"small"),M._uU(3,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),M.qZA()(),M.TgZ(4,"div",2)(5,"button",3),M.NdJ("click",function(){return C.cancel()}),M._uU(6,"\u0110\xf3ng"),M.qZA(),M.TgZ(7,"button",4),M.NdJ("click",function(){return C.confirm()}),M._uU(8,"X\xf3a"),M.qZA()()())},styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),e})()},5511:(Q,B,u)=>{"use strict";u.d(B,{R:()=>c,v:()=>e});var M=u(5861),w=u(3377),E=u(2695),k=u(4459);const e=function(){var P=(0,M.Z)(function*(){return yield(0,w.iA)()});return function(){return P.apply(this,arguments)}}(),c=function(){var P=(0,M.Z)(function*(C){let F=null!=C?C:yield(0,k.H0)(),O=yield(0,w.iA)();return(!F.madonvi||!O.userid||F.madonvi!=(null==O?void 0:O.madonvi))&&window.location.replace(E.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),O});return function(F){return P.apply(this,arguments)}}()},3731:(Q,B,u)=>{"use strict";u.d(B,{FF:()=>O,T6:()=>f,ZI:()=>_,ds:()=>C,zq:()=>F});var M=u(8107),w=u.n(M),E=u(4981),k=u(8530),e=u(3589),c=u(6623);const P=(t,h)=>{var m=document.createElement("input");m.type="file",m.accept=t.accept,m.style.display="none",m.style.visibility="hidden",m.addEventListener("change",n=>{var D;n.preventDefault();let A=(null===(D=n.target)||void 0===D?void 0:D.files)||[];A.length>0&&h(A),document.body.removeChild(m)}),document.body.appendChild(m),m.click()},C=(t,h,m)=>{let n=null!=h?h:D=>console.log(D);P({accept:".lvb"},D=>{(0,e.z)({loading:m,params:{file:D[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:A=>{var U,L;0==(null==A?void 0:A.ReturnCode)?(U=U=>{var L;t.board_id?(0,k.UK)({loading:m,params:{userid:t.userid,board_id:t.board_id,filepath:A.path+"/"+(null===(L=A.file)||void 0===L?void 0:L.name)},callback:R=>{R&&(R.id=t.board_id),n(R)}}):n(U)},t.board_id?U():(0,k.Ux)({loading:m,params:{userid:t.userid,board_title:(null===(L=A.name)||void 0===L?void 0:L.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:R=>{0==(null==R?void 0:R.returncode)&&(t.board_id=null==R?void 0:R.id),U(R)}})):n({returncode:null==A?void 0:A.ReturnCode,returnmsg:null==A?void 0:A.ReturnName})}})})},F=(t,h)=>{(0,k.gK)({params:{userid:t.userid,board_id:t.board_id},callback:(m,n)=>{0==(null==m?void 0:m.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==m?void 0:m.token}`),h&&h(m)},loading:m=>{}})},O=(t,h)=>{(0,k.aX)({params:{userid:t.userid,board_id:t.board_id},callback:(m,n)=>{0==(null==m?void 0:m.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==m?void 0:m.token}`),h&&h(m)},loading:m=>{}})},_=(t,h)=>{(0,k.Bh)({params:{userid:t.userid,board_id:t.board_id},callback:(m,n)=>{0==(null==m?void 0:m.returncode)&&w()(`${null==n?void 0:n.readfileuploadurl}${null==m?void 0:m.token}`),h&&h(m)},loading:m=>{}})},f=(t,h)=>{let m=null!=h?h:n=>console.log(n);P({accept:".json, application/json"},n=>{var D=new FileReader;D.onload=()=>{if(D.result){let U,A=JSON.parse(D.result.toString());A&&!A.modules?U=(0,c.w)(A):"icdtV2"==(null==A?void 0:A.modules)&&(U=A),U&&(E.icdt.dataSource=U,E.icdt.data.openSlide())}m()},D.readAsText(n[0])})}},4260:(Q,B,u)=>{"use strict";u.d(B,{f:()=>w});const w=(E,k)=>{switch(null==E?void 0:E.v_datatype){case 800:if(null!=k&&E.datavalue==k)return!0;break;case 801:if(null!=k&&E.datavalue==k)return!0;if("1"==E.datavalue||"true"==E.datavalue||"TRUE"==E.datavalue||"True"==E.datavalue)return!0;break;case 802:if(null!=k&&E.datavalue==k)return!0;if(1==parseInt(E.datavalue))return!0}return!1}},6034:(Q,B,u)=>{"use strict";u.d(B,{z:()=>M});const M={XemTatCaBaiGiangDaDuocPheDuyet:10301,SoLuongBaiGiangToiDaTrongDanhMuc:10302,SoLuongHocLieuToiDaTrongDanhMuc:10303,VungLuuTruDuLieu:10304,GenAITaoNoiDungTuDongBangVanBan:10311,GenAITaoHinhAnh:10312,GenAITaoHinhAnhgioiHanSoLuongMoiNgay:10313,GenAITaoBaiKiemTra:10314,NhapXuatDuLieuBaiGiangLVB:10321,XuatDuLieuBaiGiangVoiDinhDangSCORM:10322,XuatDuLieuDongGoiBaiGiangVoiDinhDangZIP:10323}},8107:function(Q,B){var u,w;void 0!==(w="function"==typeof(u=function(){return function E(k,e,c){var n,D,P=window,C="application/octet-stream",F=c||C,O=k,_=!e&&!c&&O,f=document.createElement("a"),t=function(J){return String(J)},h=P.Blob||P.MozBlob||P.WebKitBlob||t,m=e||"download";if(h=h.call?h.bind(P):Blob,"true"===String(this)&&(F=(O=[O,F])[0],O=O[1]),_&&_.length<2048&&(m=_.split("/").pop().split("?")[0],f.href=_,-1!==f.href.indexOf(_))){var A=new XMLHttpRequest;return A.open("GET",_,!0),A.responseType="blob",A.onload=function(J){E(J.target.response,m,C)},setTimeout(function(){A.send()},0),A}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(O)){if(!(O.length>2096103.424&&h!==t))return navigator.msSaveBlob?navigator.msSaveBlob(q(O),m):G(O);F=(O=q(O)).type||C}else if(/([\x80-\xff])/.test(O)){for(var U=0,L=new Uint8Array(O.length),R=L.length;U<R;++U)L[U]=O.charCodeAt(U);O=new h([L],{type:F})}function q(J){for(var Y=J.split(/[:;,]/),j=Y[1],$=("base64"==Y[2]?atob:decodeURIComponent)(Y.pop()),S=$.length,W=0,I=new Uint8Array(S);W<S;++W)I[W]=$.charCodeAt(W);return new h([I],{type:j})}function G(J,Y){if("download"in f)return f.href=J,f.setAttribute("download",m),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),!0===Y&&setTimeout(function(){P.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(J)&&(J="data:"+J.replace(/^data:([\w\/\-\+]+)/,C)),window.open(J)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=J),!0;var j=document.createElement("iframe");document.body.appendChild(j),!Y&&/^data:/.test(J)&&(J="data:"+J.replace(/^data:([\w\/\-\+]+)/,C)),j.src=J,setTimeout(function(){document.body.removeChild(j)},333)}if(n=O instanceof h?O:new h([O],{type:F}),navigator.msSaveBlob)return navigator.msSaveBlob(n,m);if(P.URL)G(P.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===t)try{return G("data:"+F+";base64,"+P.btoa(n))}catch{return G("data:"+F+","+encodeURIComponent(n))}(D=new FileReader).onload=function(J){G(this.result)},D.readAsDataURL(n)}return!0}})?u.apply(B,[]):u)&&(Q.exports=w)}}]);