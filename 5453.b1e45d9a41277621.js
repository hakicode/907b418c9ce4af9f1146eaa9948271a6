"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5453],{1814:(ce,It,f)=>{f.d(It,{In:()=>lt,MA:()=>M,Mo:()=>T,NV:()=>k,S3:()=>B,dt:()=>F,h8:()=>c,k0:()=>y});const B={fill:"transparent",stroke:"#129bff",strokeWidth:1},k={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},lt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},T={fill:"transparent",stroke:"transparent",strokeWidth:1},F={fill:"none",stroke:"#5F6CE1",strokeWidth:1},c={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},M={fill:"transparent"},y={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},9942:(ce,It,f)=>{f.d(It,{w:()=>rt,I:()=>z});var B=f(4981),k=f(9054),lt=f(5811),T=/^#[a-fA-F0-9]+$/i,F=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,c=/^rgb\((\d+),(\d+),(\d+)\)$/i;const M=N=>{let V=null,ot=null;if(N)if("transparent"==N)V="#000000",ot=0;else if(N.match(T))V=N;else{let W=(N=N.replace(/\s+/g,"")).match(F);if(W)V="#"+(256|W[1]).toString(16).slice(1)+(256|W[2]).toString(16).slice(1)+(256|W[3]).toString(16).slice(1),ot=(0,lt.q)(parseFloat(W[4]),100);else{let tt=N.match(c);tt&&(V="#"+(256|tt[1]).toString(16).slice(1)+(256|tt[2]).toString(16).slice(1)+(256|tt[3]).toString(16).slice(1))}}return{hex:V,alpha:ot}},z=N=>x(null==N?void 0:N.url,null==N?void 0:N.path,null==N?void 0:N.src);var x=(N,V,ot)=>{var W,tt;let gt,wt,ht,Y;var P,Bt;return N&&(gt=N.replace(/\\/g,"/")),V&&(wt=V.replace(/\\/g,"/")),ot&&(ht=ot.replace(/\\/g,"/")),wt&&!gt&&(gt=(null===(P=B.icdt.config)||void 0===P?void 0:P.readfileuploadurl)+wt),!ht||wt||gt||(wt=ht.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Bt=B.icdt.config)||void 0===Bt?void 0:Bt.readfileuploadurl)+wt),Y=(null!==(W=gt)&&void 0!==W?W:"").split("/").pop()||(null!==(tt=wt)&&void 0!==tt?tt:"").split("/").pop()||"",{url:gt,path:wt,name:Y}};const rt=N=>{let V={x:0,y:0,width:N.screen.w,height:N.screen.h},ot=[];return N.data.forEach((W,tt)=>{var gt,wt;let ht={id:"number"==typeof W.id?W.id:B.icdt.data.newSlideId,code:null===(gt=W.id)||void 0===gt?void 0:gt.toString(),name:"string"==typeof W.id?W.id:`Trang ${tt+1}`,svg:{viewBox:V,nodes:[]},test:(Y=W.test2,Y?(Y.audiotrue&&(Y.audiotrue=z({path:Y.audiotrue.path})),Y.audiofalse&&(Y.audiofalse=z({path:Y.audiofalse.path})),Y.effecttrue&&(Y.effecttrue=z({path:Y.effecttrue.path})),Y.effectfalse&&(Y.effectfalse=z({path:Y.effectfalse.path})),Y.icontrue&&(Y.icontrue=z({path:Y.icontrue.path})),Y.iconfalse&&(Y.iconfalse=z({path:Y.iconfalse.path})),Y):{})};var Y;W.background&&ht.svg&&(ht.svg.background=function(N){return N&&(null!==N.match(/#([a-zA-Z0-9]+)/)||null!==N.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==N.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(W.background)?{color:W.background}:function(N){return N&&null!==N.match(/data:[^;]+;base64,/)}(W.background)?{base64:W.background}:function(N){return N&&null!==N.match(/http(s)?:\/\//)}(W.background)?x(W.background):x(void 0,W.background)),jQuery(null!==(wt=W.svg)&&void 0!==wt?wt:"").find(".svg-node").each((Y,P)=>{var Bt,Gt;let Dt=jQuery(P).parents(".indexs"),Ht=Dt.attr("data-index"),Mt=Dt.attr("data-time"),zt=null!==(Bt=P.getAttribute("id"))&&void 0!==Bt?Bt:"0",ut={id:parseInt(zt),code:`${P.nodeName}-${P.getAttribute("id")}`,name:P.nodeName,idx:Ht?parseInt(Ht):0,time:Mt?parseFloat(Mt):0,type:(()=>{switch(P.nodeName){case"polygon":return k.$.POLYGON;case"circle":return k.$.CIRCLE;case"ellipse":return k.$.ELLIPSE;case"line":return k.$.LINE;case"rect":return k.$.RECT;case"foreignObject":return k.$.FOREIGNOBJECT}return 0})(),size:(it=>{let bt=0,Et=0,$t=0,yt=0,ne=null,j=null,K=parseFloat((null===(it=P.getAttribute("transform"))||void 0===it?void 0:it.replace("rotate(","").replace(")",""))||"0")||null;switch(P.nodeName){case"polygon":{var u,H;let ft=[],vt=[],Ot=999999999,Kt=999999999,Rt=0,_t=0;ne=JSON.parse(P.getAttribute("ratios")||"[]"),j=null!==(u=null===(H=P.getAttribute("points"))||void 0===H?void 0:H.split(",").map(function(xt){return xt.split(" ").map(function(Tt){return parseFloat(Tt)})}))&&void 0!==u?u:[],j.forEach(function(xt){ft.push(xt[0]),vt.push(xt[1])}),Ot=Math.min.apply(null,ft),Kt=Math.min.apply(null,vt),Rt=Math.max.apply(null,ft),_t=Math.max.apply(null,vt),bt=Ot,Et=Kt,$t=Rt-bt,yt=_t-Et;break}case"circle":{let ft=parseFloat(P.getAttribute("cx")||"0"),vt=parseFloat(P.getAttribute("cy")||"0"),Ot=parseFloat(P.getAttribute("r")||"0");bt=ft-Ot,Et=vt-Ot,$t=2*Ot,yt=2*Ot;break}case"ellipse":{let ft=parseFloat(P.getAttribute("cx")||"0"),vt=parseFloat(P.getAttribute("cy")||"0"),Ot=parseFloat(P.getAttribute("rx")||"0"),Kt=parseFloat(P.getAttribute("ry")||"0");bt=ft-Ot,Et=vt-Kt,$t=2*Ot,yt=2*Kt;break}case"line":{let ft=parseFloat(P.getAttribute("x1")||"0"),vt=parseFloat(P.getAttribute("y1")||"0"),Ot=parseFloat(P.getAttribute("x2")||"0"),Kt=parseFloat(P.getAttribute("y2")||"0"),Rt=999999999,_t=999999999,xt=0,Tt=0;Rt=Math.min(ft,Ot),_t=Math.min(vt,Kt),xt=Math.max(ft,Ot),Tt=Math.max(vt,Kt),bt=Rt,Et=_t,$t=xt-bt,yt=Tt-Et,ne=[[(ft-bt)/($t||1),(vt-Et)/(yt||1)],[(Ot-bt)/($t||1),(Kt-Et)/(yt||1)]];break}case"rect":case"foreignObject":bt=parseFloat(P.getAttribute("x")||"0"),Et=parseFloat(P.getAttribute("y")||"0"),$t=parseFloat(P.getAttribute("width")||"0"),yt=parseFloat(P.getAttribute("height")||"0")}return Object.assign({},{x:bt,y:Et,width:$t,height:yt,ratios:ne,points:j,rotate:K})})(),attribute:(()=>{let it={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var bt,Et,$t,yt,ne,j;let K=null!==(bt=P.getAttribute("fill"))&&void 0!==bt?bt:null,u=null!==(Et=P.getAttribute("stroke"))&&void 0!==Et?Et:null,H=null!==($t=parseFloat(P.getAttribute("stroke-width")||"0"))&&void 0!==$t?$t:null,ft=null!==(yt=P.getAttribute("stroke-linecap"))&&void 0!==yt?yt:null,vt=null!==(ne=P.getAttribute("stroke-linejoin"))&&void 0!==ne?ne:null,Ot=null!==(j=parseFloat(P.getAttribute("stroke-dasharray")||"0"))&&void 0!==j?j:null;Object.assign(it,{fill:K,stroke:u,strokeWidth:H,strokeLinecap:ft,strokeLinejoin:vt,strokeDasharray:Ot});break}}return it})(),style:(()=>{let it={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ne=jQuery(P).find(".svg-container");if(ne.length){var bt,Et;let K=null!==(bt=parseFloat(ne.css("border-width")||"0"))&&void 0!==bt?bt:null,u=null!==(Et=ne.css("border-style"))&&void 0!==Et?Et:null,H=ne.css("border-color")||null,ft=null,vt=ne.css("background-color")||null,Ot=null;(()=>{let{hex:Kt,alpha:Rt}=M(H);H=Kt,ft=Rt})(),(()=>{let{hex:Kt,alpha:Rt}=M(vt);vt=Kt,Ot=Rt})(),Object.assign(it,{borderWidth:K,borderStyle:u,borderColor:H,borderOpacity:ft,backgroundColor:vt,backgroundOpacity:Ot})}let j=jQuery(P).find(".svg-editor-content");if(j.length){var $t,yt;let K=JSON.parse((j.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:u,alpha:H}=M(K.TextColor);Object.assign(it,{fontFamily:null!==($t=K.FontFamily)&&void 0!==$t?$t:null,fontSize:null!==(yt=K.FontSize)&&void 0!==yt?yt:null,color:u,opacity:H})}break}}return it})(),source:(()=>{let it={};switch(P.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Dt.hasClass("editors")){let _t=jQuery(P).find(".svg-editor-content");if(_t.length){var bt;let xt=_t.html(),Tt=null!==(bt=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==bt?bt:[];Object.assign(it,{type:"html",html:{htmlContent:xt,variableKeywords:Tt}})}}else if(Dt.hasClass("inputs")||Dt.hasClass("textareas"))Object.assign(it,{type:"input",input:{input:!!jQuery(P).find("input").length,textarea:!!jQuery(P).find("textarea").length}});else if(Dt.hasClass("tests")){let _t=jQuery(P).find(".svg-test");if(Dt.hasClass("tests-truefalse")){var Et,$t;let xt=_t.find(".svg-editor-content").html(),Tt=null!==(Et=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Et?Et:[];Object.assign(it,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===($t=W.test2.truefalse)||void 0===$t?void 0:$t.includes(zt)}},html:{htmlContent:xt,variableKeywords:Tt}})}else if(Dt.hasClass("tests-singlechoice")){var yt,ne;let xt=_t.find(".svg-editor-content").html(),Tt=null!==(yt=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==yt?yt:[];Object.assign(it,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(ne=W.test2.singlechoice)||void 0===ne?void 0:ne.includes(zt)}},html:{htmlContent:xt,variableKeywords:Tt}})}else if(Dt.hasClass("tests-multichoice")){var j,K;let xt=_t.find(".svg-editor-content").html(),Tt=null!==(j=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==j?j:[];Object.assign(it,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(K=W.test2.multichoice)||void 0===K?void 0:K.includes(zt)}},html:{htmlContent:xt,variableKeywords:Tt}})}else if(Dt.hasClass("tests-fill")){var u,H;let xt=_t.find(".svg-editor-content").html(),Tt=null!==(u=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==u?u:[],re=null!==(H=(null!=xt?xt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==H?H:[];re=re.filter((J,h,U)=>U.indexOf(J)==h),Object.assign(it,{type:"test",test:{type:"fill",fill:re.map(J=>{var h;return{key:J,value:null===(h=W.test2.fill)||void 0===h||null===(h=h.find(U=>U.id==zt))||void 0===h||null===(h=h.vals)||void 0===h?void 0:h.map(U=>U.text).filter(U=>!["",null,void 0,NaN].includes(U))}})},html:{htmlContent:xt,variableKeywords:Tt,fillKeywords:re}})}else if(Dt.hasClass("tests-matching")){if(_t.hasClass("svg-test-empty"))Object.assign(it,{type:"test",test:{type:"matching-empty",matching:{key:_t.attr("data-name")||null}}});else if(_t.hasClass("svg-test-content")){var ft;let xt=_t.find(".svg-editor-content").html(),Tt=null!==(ft=(null!=xt?xt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(it,{type:"test",test:{type:"matching-content",matching:{key:_t.attr("data-name")||null}},html:{htmlContent:xt,variableKeywords:Tt}})}}else if(Dt.hasClass("tests-speech")){var vt;Object.assign(it,{type:"speech",speech:{value:null===(vt=W.test2.speech)||void 0===vt||null===(vt=vt.find(xt=>xt.id==zt))||void 0===vt||null===(vt=vt.vals)||void 0===vt?void 0:vt.map(xt=>xt.text).filter(xt=>!["",null,void 0,NaN].includes(xt))}})}else if(Dt.hasClass("tests-submit")){let xt=jQuery(P).find(".svg-container img");Object.assign(it,{type:"test",test:{type:"submit"},image:x(xt.attr("url"),xt.attr("path"),xt.attr("src"))})}}else if(Dt.hasClass("images")){let _t=jQuery(P).find(".svg-editor-content img");if(_t.length)Object.assign(it,{type:"image",image:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))});else{let xt=jQuery(P).find("iframe");Object.assign(it,{type:"iframe",iframe:x(xt.attr("url"),xt.attr("path"),xt.attr("src"))})}}else if(Dt.hasClass("sounds")){let _t=jQuery(P).find(".svg-editor-content img");_t.length&&Object.assign(it,{type:"image",image:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))})}else if(Dt.hasClass("htmls")){let _t=jQuery(P).find("iframe");_t.length&&Object.assign(it,{type:"iframe",iframe:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))})}else if(Dt.hasClass("svgs")){let _t=jQuery(P).find("svg");var Ot,Kt;_t.length&&Object.assign(it,{type:"svg",svg:Object.assign(x(_t.attr("url"),_t.attr("path"),_t.attr("src")),{svgContent:null!==(Ot=null===(Kt=_t.get(0))||void 0===Kt?void 0:Kt.outerHTML)&&void 0!==Ot?Ot:null})})}else if(Dt.hasClass("medias")){let _t=jQuery(P).find(".media-item");if(_t.length)switch(_t.attr("type")){case"audio":Object.assign(it,{type:"audio",audio:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))});break;case"video":Object.assign(it,{type:"video",video:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))});break;case"file":Object.assign(it,{type:"file",file:x(_t.attr("url"),_t.attr("path"),_t.attr("src"))});break;default:var Rt;Object.assign(it,{type:"link",link:{url:null!==(Rt=_t.attr("url"))&&void 0!==Rt?Rt:null}})}let xt=jQuery(P).find("img");xt.length&&(Object.assign(it,{image:x(xt.attr("url"),xt.attr("path"),xt.attr("src"))}),it.type||Object.assign(it,{type:"image"}))}}return it})(),animate:(it=>{let bt={},Et=null===(it=W.animates)||void 0===it?void 0:it.find($t=>$t.elementId==zt);return Et&&Object.assign(bt,{value:Et.value}),bt})(),interactive:(()=>{let it={},bt=W.actions.show.filter($t=>$t.elementId==zt&&$t.active);bt.length&&(it.show={},bt.forEach($t=>{let{source:yt}=$t;switch(null==yt?void 0:yt.type){case"work":var ne,j,K,u,H;it.show.action={},Object.assign(it.show.action,{value:null!==(ne=yt.value)&&void 0!==ne?ne:null,iteration:null!==(j=yt.iteration)&&void 0!==j?j:null,finish:null!==(K=yt.end)&&void 0!==K?K:null,time:null!==(u=yt.time)&&void 0!==u?u:null,points:null!==(H=yt.points)&&void 0!==H?H:null});break;case"audio":var ft,vt,Ot;it.show.audio={},Object.assign(it.show.audio,{source:x(null,null,yt.url),iteration:null!==(ft=yt.iteration)&&void 0!==ft?ft:null,finish:null!==(vt=yt.end)&&void 0!==vt?vt:null,time:null!==(Ot=yt.time)&&void 0!==Ot?Ot:null,async:-1==yt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Kt,Rt,_t,xt,Tt,re,J,h,U,st,et,O,E,G,dt;yt.options.includes("show")&&(it.show.triggershow={},Object.assign(it.show.triggershow,{id:null!==(Kt=parseInt(null!==(Rt=yt.id)&&void 0!==Rt?Rt:"0"))&&void 0!==Kt?Kt:null,ids:null===(_t=yt.ids)||void 0===_t?void 0:_t.map(ct=>parseInt(ct)),async:null!==(xt=yt.async)&&void 0!==xt?xt:null,time:null!==(Tt=yt.time)&&void 0!==Tt?Tt:null})),yt.options.includes("run")&&(it.show.triggerrun={},Object.assign(it.show.triggerrun,{id:null!==(re=parseInt(null!==(J=yt.id)&&void 0!==J?J:"0"))&&void 0!==re?re:null,ids:null===(h=yt.ids)||void 0===h?void 0:h.map(ct=>parseInt(ct)),async:null!==(U=yt.async)&&void 0!==U?U:null,time:null!==(st=yt.time)&&void 0!==st?st:null})),yt.options.includes("hide")&&(it.show.triggerhide={},Object.assign(it.show.triggerhide,{id:null!==(et=parseInt(null!==(O=yt.id)&&void 0!==O?O:"0"))&&void 0!==et?et:null,ids:null===(E=yt.ids)||void 0===E?void 0:E.map(ct=>parseInt(ct)),async:null!==(G=yt.async)&&void 0!==G?G:null,time:null!==(dt=yt.time)&&void 0!==dt?dt:null}))}}));let Et=W.actions.click.filter($t=>$t.elementId==zt&&$t.active);return Et&&(it.click={},Et.forEach($t=>{let{source:yt}=$t;switch(null==yt?void 0:yt.type){case"work":var ne,j,K,u,H;it.click.action={},Object.assign(it.click.action,{value:null!==(ne=yt.value)&&void 0!==ne?ne:null,iteration:null!==(j=yt.iteration)&&void 0!==j?j:null,finish:null!==(K=yt.end)&&void 0!==K?K:null,time:null!==(u=yt.time)&&void 0!==u?u:null,points:null!==(H=yt.points)&&void 0!==H?H:null});break;case"audio":var ft,vt,Ot;it.click.audio={},Object.assign(it.click.audio,{source:x(null,null,yt.url),iteration:null!==(ft=yt.iteration)&&void 0!==ft?ft:null,finish:null!==(vt=yt.end)&&void 0!==vt?vt:null,time:null!==(Ot=yt.time)&&void 0!==Ot?Ot:null,async:-1==yt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Kt,Rt,_t,xt,Tt,re,J,h,U,st,et,O,E,G,dt;yt.options.includes("show")&&(it.click.triggershow={},Object.assign(it.click.triggershow,{id:null!==(Kt=parseInt(null!==(Rt=yt.id)&&void 0!==Rt?Rt:"0"))&&void 0!==Kt?Kt:null,ids:null===(_t=yt.ids)||void 0===_t?void 0:_t.map(kt=>parseInt(kt)),async:null!==(xt=yt.async)&&void 0!==xt?xt:null,time:null!==(Tt=yt.time)&&void 0!==Tt?Tt:null})),yt.options.includes("run")&&(it.click.triggerrun={},Object.assign(it.click.triggerrun,{id:null!==(re=parseInt(null!==(J=yt.id)&&void 0!==J?J:"0"))&&void 0!==re?re:null,ids:null===(h=yt.ids)||void 0===h?void 0:h.map(kt=>parseInt(kt)),async:null!==(U=yt.async)&&void 0!==U?U:null,time:null!==(st=yt.time)&&void 0!==st?st:null})),yt.options.includes("hide")&&(it.click.triggerhide={},Object.assign(it.click.triggerhide,{id:null!==(et=parseInt(null!==(O=yt.id)&&void 0!==O?O:"0"))&&void 0!==et?et:null,ids:null===(E=yt.ids)||void 0===E?void 0:E.map(kt=>parseInt(kt)),async:null!==(G=yt.async)&&void 0!==G?G:null,time:null!==(dt=yt.time)&&void 0!==dt?dt:null}));break;case"slide":var ct;it.click.slide={},Object.assign(it.click.slide,{id:parseInt(null!==(ct=yt.id)&&void 0!==ct?ct:"0")||yt.num||null,code:yt.id})}})),it})(),variable:(it=>{let bt={};var Et;P.getAttribute("data-variable")&&(bt.input={},Object.assign(bt.input,{variable:null!==(Et=P.getAttribute("data-variable"))&&void 0!==Et?Et:null}));let $t=null===(it=W.nodes)||void 0===it||null===(it=it.find(u=>u.id==zt))||void 0===it?void 0:it.variable;var yt,ne,j,K;return $t&&(bt.click={},Object.assign(bt.click,{variable:null!==(yt=$t.variable)&&void 0!==yt?yt:null,operator:null!==(ne=$t.operator)&&void 0!==ne?ne:null,valuetype:null!==(j=$t.valuetype)&&void 0!==j?j:null,value:null!==(K=$t.value)&&void 0!==K?K:null})),bt})()};null===(Gt=ht.svg)||void 0===Gt||Gt.nodes.push(ut)}),ot.push(ht)}),console.log(ot),{screen:{width:N.screen.w,height:N.screen.h},data:{slides:ot},variable:N.variable}}},644:(ce,It,f)=>{f.d(It,{Dx:()=>c,aY:()=>R,qp:()=>y,qz:()=>F,sV:()=>M,yR:()=>b});var B=f(5861),k=f(9422),lt=f.n(k);lt().config({driver:[lt().INDEXEDDB,lt().LOCALSTORAGE,lt().WEBSQL],name:"_localDataDB",version:1});const T={create:(z=(0,B.Z)(function*(){return lt()}),function(){return z.apply(this,arguments)}),get:function(){var z=(0,B.Z)(function*(x){return lt().getItem(x)});return function(rt){return z.apply(this,arguments)}}(),set:function(){var z=(0,B.Z)(function*(x,rt){return lt().setItem(x,rt)});return function(rt,N){return z.apply(this,arguments)}}()},F=function(){var z=(0,B.Z)(function*(x){yield T.create();var rt=(yield T.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(rt)});return function(rt){return z.apply(this,arguments)}}(),c=function(){var z=(0,B.Z)(function*(x){yield T.create(),x.params=x.params||{};try{yield T.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(rt){"function"==typeof x.callback&&x.callback(null),console.error(rt)}});return function(rt){return z.apply(this,arguments)}}(),M=function(){var z=(0,B.Z)(function*(x){yield T.create();try{var rt=(yield T.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(rt)}catch(N){"function"==typeof x.callback&&x.callback(null),console.error(N)}});return function(rt){return z.apply(this,arguments)}}(),y=function(){var z=(0,B.Z)(function*(x){yield T.create(),x.params=x.params||{};try{yield T.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(rt){"function"==typeof x.callback&&x.callback(null),console.error(rt)}});return function(rt){return z.apply(this,arguments)}}(),R=function(){var z=(0,B.Z)(function*(x){yield T.create();try{var rt=(yield T.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(rt)}catch(N){"function"==typeof x.callback&&x.callback(null),console.error(N)}});return function(rt){return z.apply(this,arguments)}}(),b=function(){var z=(0,B.Z)(function*(x){yield T.create(),x.params=x.params||{};try{yield T.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(rt){"function"==typeof x.callback&&x.callback(null),console.error(rt)}});return function(rt){return z.apply(this,arguments)}}();var z},1687:(ce,It,f)=>{f.d(It,{O:()=>B});const B={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(ce,It,f)=>{f.d(It,{D:()=>B});const B={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(ce,It,f)=>{f.d(It,{_:()=>B});const B={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(ce,It,f)=>{f.d(It,{D:()=>B});const B={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(ce,It,f)=>{f.d(It,{$:()=>B});const B={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(ce,It,f)=>{f.d(It,{icdt:()=>mt});var B=f(968),k=f(4080),lt=f(1687),T=f(9054),F=f(4318),c=f(6816),M=f(666),y=f(2966);const z=S=>{var i,n,r,a,s;let v=(null===(i=S.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=S.touchEvent)||void 0===n?void 0:n.target),p=(null==v?void 0:v.getAttribute("id"))||"",_=null==v?void 0:v.nodeName,L=(null==v||null===(r=v.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var w,C;if([lt.O.RESIZE_GROUP,lt.O.SELECT_GROUP].includes(L))return null===(w=S.mouseEvent)||void 0===w||w.stopPropagation(),void(null===(C=S.mouseEvent)||void 0===C||C.preventDefault());if(null!==(a=S.mouseEvent)&&void 0!==a&&a.altKey||null!==(s=S.touchEvent)&&void 0!==s&&s.altKey||!p||p.match(/[^0-9]/)||!mt.dataSelect.nodeName.includes(_)){var D;mt.dataSelect.ids.length&&(mt.dataSelect.ids=[]),(0==(null===(D=S.mouseEvent)||void 0===D?void 0:D.button)||S.touchEvent)&&(S=>{let s=(0,k.g1)(lt.O.SCAN_GROUP,"g"),v=(0,F.bH)(0,0,1,1);(0,k.vl)(s,v),((S,i,n)=>{(0,c.A)(S,{start:s=>{},move:(s,v)=>{((s,v,p,_)=>{i=(0,F.bH)(s,v,p,_),(0,k.vl)(n,i)})(v[0][0],v[0][1],s.x,s.y)},end:(s,v)=>{null==n||n.remove(),mt.dataSelect.ids=mt.data.getNodeInArea(Math.min(v[0][0],s.x),Math.min(v[0][1],s.y),Math.max(v[0][0],s.x),Math.max(v[0][1],s.y));let p=mt.dataSelect.nodes;1==p.length?(0,M.y)(p[0]):p.length>1&&(0,y.Q)(p)}})})(S,v,s)})(S)}else{var Q,X;let Z=parseFloat(p||"0");mt.dataSelect.ids=null!==(Q=S.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(X=S.touchEvent)&&void 0!==X&&X.shiftKey?[Z].concat(mt.dataSelect.ids).filter((se,fe,ge)=>ge.indexOf(se)==fe):[Z];let Lt=mt.dataSelect.nodes;Lt.length>1||1==Lt.length&&Lt[0].type==T.$.PATH?(0,y.Q)(Lt):1==Lt.length&&(0,M.y)(Lt[0])}};class rt{constructor(){let{x:i,y:n}=mt.screen.dislocation;var r=(a,s,v,p)=>{mt.screen.move({x:i,y:n},{x:v-a,y:p-s})};return{start:a=>{},move:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)},end:(a,s)=>{r(s[0][0],s[0][1],a.x,a.y)}}}}var N=f(4714);const V=[{name:"tam gi\xe1c vu\xf4ng",type:N.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:N.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:N.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:N.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:N.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:N.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:N.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:N.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:N.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:N.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:N.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:N.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:N.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var ot=f(8619),W=f(5811);class tt{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ot._)(Math.ceil(1e9*Math.random())),v=(p,_,L,w)=>{s=(0,F.bH)(p,_,L,w,{ratio:1}),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,F.sg)(T.$.CIRCLE,s)),(0,k.__)(r,a),(0,k.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("r","1")},move:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y)},end:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.CIRCLE,name:"Circle"},{size:s,attribute:a}),null==i||i.remove()}}}}var gt=f(8785);class wt{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,gt.r)(Math.ceil(1e9*Math.random()));var v=(p,_,L,w)=>{s=(0,F.bH)(p,_,L,w),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,F.sg)(T.$.ELLIPSE,s)),(0,k.__)(r,a),(0,k.g$)(i,s)};return{start:p=>{r.setAttribute("cx",p.x.toString()),r.setAttribute("cy",p.y.toString()),r.setAttribute("rx","1"),r.setAttribute("ry","1")},move:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y)},end:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.ELLIPSE,name:"Ellipse"},{size:s,attribute:a}),null==i||i.remove()}}}}var ht=f(8054);class Y{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,ht.f)(Math.ceil(1e9*Math.random()));var v=(p,_,L,w)=>{s=(0,F.bH)(p,_,L,w),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,F.sg)(T.$.RECT,s)),(0,k.__)(r,a),(0,k.g$)(i,s)};return{start:p=>{v(p.x,p.y,p.x+s.width,p.y+s.height)},move:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y)},end:(p,_)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.RECT,name:"Rect"},{size:s,attribute:a}):null==r||r.remove(),null==i||i.remove()}}}}var P=f(2282);class Bt{constructor(i){let n=(0,k.g1)(lt.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:a,element:s,attribute:v,size:p}=(0,P.l)(Math.ceil(1e9*Math.random()));p.ratios=r;var _=(L,w,C,D)=>{p=(0,F.bH)(L,w,C,D,{ratios:r}),p.x=(0,W.q)(p.x),p.y=(0,W.q)(p.y),p.width=(0,W.q)(p.width),p.height=(0,W.q)(p.height),Object.assign(v,(0,F.sg)(T.$.POLYGON,p)),(0,k.__)(s,v),(0,k.g$)(n,p)};return{start:L=>{},move:(L,w)=>{_(w[0][0],w[0][1],L.x,L.y)},end:(L,w)=>{_(w[0][0],w[0][1],L.x,L.y),mt.data.node=Object.assign({id:a,type:T.$.POLYGON,name:"Polygon"},{size:p,attribute:v}),null==n||n.remove()}}}}var Gt=f(4921);class Dt{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s}=(0,Gt.W)(Math.ceil(1e9*Math.random()));var v=(p,_,L,w)=>{s=(0,F.bH)(p,_,L,w),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,F.sg)(T.$.LINE,s)),(0,k.__)(r,a),(0,k.g$)(i,s)};return{start:p=>{},move:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y)},end:(p,_)=>{v(_[0][0],_[0][1],p.x,p.y),mt.data.node=Object.assign({id:n,type:T.$.LINE,name:"Line"},{size:s,attribute:a}),null==i||i.remove()}}}}var Ht=f(8419);class Mt{constructor(){let{nodeId:i,element:n,attribute:r,size:a}=(0,Ht.G)(Math.ceil(1e9*Math.random())),v="";var p=(_,L)=>{v+=` ${_} ${L}`,n.setAttribute("d",v)};return{start:_=>{v=`M ${_.x} ${_.y} L ${_.x} ${_.y}`},move:(_,L)=>{p(_.x,_.y)},end:(_,L)=>{p(_.x,_.y),(_=>{let L=9999,w=9999,C=-9999,D=-9999;_.forEach(Q=>{L=Math.min(L,Q[0]),w=Math.min(w,Q[1]),C=Math.max(C,Q[0]),D=Math.max(D,Q[1])}),a=(0,F.bH)(L,w,C,D,{points:_}),Object.assign(r,(0,F.sg)(T.$.PATH,a)),(0,k.__)(n,r)})(L),mt.data.node=Object.assign({id:i,type:T.$.PATH,name:"Path"},{size:a,attribute:r})}}}}var zt=f(2875);class ut{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()));var _=(L,w,C,D)=>{a=(0,F.bH)(L,w,C,D),a.x=(0,W.q)(a.x),a.y=(0,W.q)(a.y),a.width=(0,W.q)(a.width),a.height=(0,W.q)(a.height),Object.assign(s,(0,F.sg)(T.$.FOREIGNOBJECT,a)),(0,k.__)(r,s),(0,k.g$)(i,a)};return{start:L=>{_(L.x,L.y,L.x+a.width,L.y+a.height)},move:(L,w)=>{_(w[0][0],w[0][1],L.x,L.y)},end:(L,w)=>{a.width>=10&&a.height>=10?mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p}):null==r||r.remove(),null==i||i.remove()}}}}var it=f(7210);class bt{constructor(){var i,n;let r=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:a,element:s,size:v,attribute:p,source:_}=(0,it.G)(Math.ceil(1e9*Math.random())),L=1;(C=>{if(!C)return;let D=new Image;D.onload=()=>{L=(0,W.q)(D.naturalWidth/D.naturalHeight,100)},D.onerror=Q=>{console.error(`ImgSrc load failed -> ${C}`,Q)},D.src=C})(null!==(i=null===(n=_.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var w=(C,D,Q,X)=>{v=(0,F.bH)(C,D,Q,X,{ratio:L}),v.x=(0,W.q)(v.x),v.y=(0,W.q)(v.y),v.width=(0,W.q)(v.width),v.height=(0,W.q)(v.height),Object.assign(p,(0,F.sg)(T.$.IMAGE,v)),(0,k.__)(s,p),(0,k.g$)(r,v)};return{start:C=>{w(C.x,C.y,C.x+v.width,C.y+v.height)},move:(C,D)=>{w(D[0][0],D[0][1],C.x,C.y)},end:(C,D)=>{v.width>=10&&v.height>=10?mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:_}):null==s||s.remove(),null==r||r.remove()}}}}var $t=f(4578),yt=f(9623);function K(S,i,n,r){return Math.sqrt(Math.pow(n-S,2)+Math.pow(r-i,2))}function u(S,i,n,r,a){return K(S,i,n,r)<a?1:0}function ft(S,i,n,r,a,s,v){var p=[];return p.push(u(S,i,n,r,v)),p.push(u(S,i,a,s,v)),p.push(function H(S,i,n,r,a,s,v){var p=[a-n,s-r],_=[S-n,i-r],L=[-p[1],p[0]],w=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),C=[L[0]/w,L[1]/w],D=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),Q=[p[0]/D,p[1]/D],X=_[0]*Q[0]+_[1]*Q[1];if(X<=0||X>=D)return 0;var Z=_[0]*C[0]+_[1]*C[1];return Z>=v||Z<=-v?0:1}(S,i,n,r,a,s,v)),p}function vt(S,i,n,r,a){var s=[n-S,r-i],v=[-s[1],s[0]],p=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),_=[v[0]/p,v[1]/p];return[[S+a*_[0],i+a*_[1]],[S-a*_[0],i-a*_[1]],[n-a*_[0],r-a*_[1]],[n+a*_[0],r+a*_[1]]]}function Ot(S,i,n,r,a,s,v){var X,p=[a-S,s-i],_=[n-S,r-i],L=Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2)),w=[_[0]/L,_[1]/L],C=p[0]*w[0]+p[1]*w[1],D=[S+C*w[0],i+C*w[1]],Q=Math.sqrt(Math.pow(a-D[0],2)+Math.pow(s-D[1],2));X=0===Q?v:Math.sqrt(Math.pow(v,2)-Math.pow(Q,2));var Z=[S+C*w[0]+X*w[0],i+C*w[1]+X*w[1]];return Z[0]===S&&Z[1]===i?null:Z}function Kt(S,i,n,r,a,s,v){var p=[a-S,s-i],_=[n-S,r-i],L=[-_[1],_[0]],w=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),C=[L[0]/w,L[1]/w],D=p[0]*C[0]+p[1]*C[1],Q=J([S,i],[n,r],[a,s]);if(Tt([Q[0]-a,Q[1]-s])>=v)return null;var Z=Math.sqrt(Math.pow(v,2)-Math.pow(D,2)),Lt=[a-D*C[0],s-D*C[1]],se=Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2)),fe=[_[0]/se,_[1]/se],ge=[[Lt[0]-fe[0]*Z,Lt[1]-fe[1]*Z],[Lt[0]+fe[0]*Z,Lt[1]+fe[1]*Z]];return ge[0][0]===S&&ge[0][1]===i?null:ge}function Rt(S,i,n,r,a,s,v,p){var _,L,w,C,D,Q;return-(w=v-a)*(L=r-i)+(_=n-S)*(C=p-s)==0?null:(Q=(w*(i-s)-C*(S-a))/(-w*L+_*C),(D=(-L*(S-a)+_*(i-s))/(-w*L+_*C))>=0&&D<=1&&Q>=0&&Q<=1?[S+Q*_,i+Q*L]:null)}function _t(S,i,n,r,a,s,v,p,_,L){var w=vt(s,v,p,_,L),C=[];if(n[0]&&!n[1])C.push(Ot(S,i,r,a,s,v,L)),C.push(Rt(S,i,r,a,w[0][0],w[0][1],w[3][0],w[3][1])),C.push(Rt(S,i,r,a,w[1][0],w[1][1],w[2][0],w[2][1])),(D=Kt(S,i,r,a,p,_,L))&&C.push(D[0],D[1]);else if(!n[0]&&n[1])C.push(Ot(S,i,r,a,p,_,L)),C.push(Rt(S,i,r,a,w[0][0],w[0][1],w[3][0],w[3][1])),C.push(Rt(S,i,r,a,w[1][0],w[1][1],w[2][0],w[2][1])),(D=Kt(S,i,r,a,s,v,L))&&C.push(D[0],D[1]);else if(n[0]&&n[1])C.push(Ot(S,i,r,a,s,v,L)),C.push(Rt(S,i,r,a,w[0][0],w[0][1],w[3][0],w[3][1])),C.push(Rt(S,i,r,a,w[1][0],w[1][1],w[2][0],w[2][1])),C.push(Ot(S,i,r,a,p,_,L));else{var D=Kt(S,i,r,a,p,_,L),Q=Kt(S,i,r,a,s,v,L);D&&C.push(D[0],D[1]),Q&&C.push(Q[0],Q[1]),C.push(Rt(S,i,r,a,w[0][0],w[0][1],w[3][0],w[3][1])),C.push(Rt(S,i,r,a,w[1][0],w[1][1],w[2][0],w[2][1]))}for(var X=[S,i],Z=0;Z<C.length;Z++)C[Z]&&K(C[Z][0],C[Z][1],r,a)<K(X[0],X[1],r,a)&&(X=C[Z]);return X[0]===S&&X[1]===i?null:X}function xt(S,i,n,r,a,s,v,p,_){var L=vt(a,s,v,p,_),w=[],C=Kt(S,i,n,r,a,s,_);C&&w.push(C[0],C[1]),(C=Kt(S,i,n,r,v,p,_))&&w.push(C[0],C[1]),w.push(Rt(S,i,n,r,L[0][0],L[0][1],L[3][0],L[3][1])),w.push(Rt(S,i,n,r,L[1][0],L[1][1],L[2][0],L[2][1]));for(var D=[n,r],Q=[S,i],X=0;X<w.length;X++)w[X]&&K(w[X][0],w[X][1],S,i)<K(D[0],D[1],S,i)&&(D=w[X]);for(var Z=0;Z<w.length;Z++)w[Z]&&K(w[Z][0],w[Z][1],n,r)<K(Q[0],Q[1],n,r)&&(Q=w[Z]);return D[0]===n&&D[1]===r||Q[0]===S&&Q[1]===i?null:[D,Q]}var Tt=function(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])},J=function(S,i,n){var r=[i[0]-S[0],i[1]-S[1]],a=Tt(r);if(a<1e-6)return S;var s=[n[0]-S[0],n[1]-S[1]],v=(r[0]*s[0]+r[1]*s[1])/a;return v<0?S:v>a?i:[S[0]+r[0]*v/a,S[1]+r[1]*v/a]};class h{constructor(){let{element:r,size:s}=(0,Ht.G)(Math.ceil(1e9*Math.random()));(0,k.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:L=>{v=`M ${L.x} ${L.y} L ${L.x} ${L.y}`},move:(L,w)=>{((L,w)=>{v+=` ${L} ${w}`,r.setAttribute("d",v)})(L.x,L.y)},end:(L,w)=>{r.remove(),(L=>{let w=9999,C=9999,D=-9999,Q=-9999;L.forEach(Z=>{w=Math.min(w,Z[0]),C=Math.min(C,Z[1]),D=Math.max(D,Z[0]),Q=Math.max(Q,Z[1])}),s=(0,F.bH)(w,C,D,Q,{points:L}),mt.data.getNodeInArea(0,0,1920,1920,T.$.PATH).forEach(Z=>{let se=((S,i,n)=>{n=n||20;var r=[],a=function(w){var C=i[0][0],D=i[0][1],Q=0,X=0;if(1!==w.length||u(w[0][0],w[0][1],C,D,n)){for(var Z;Q<w.length-1;){var Lt=w[Q],se=w[Q+1],fe=u(Lt[0],Lt[1],C,D,n),ge=u(se[0],se[1],C,D,n);if(fe&&ge)X=++Q;else if(fe&&!ge)(we=Ot(Lt[0],Lt[1],se[0],se[1],C,D,n))?(w[Q]=we,X=Q):Q++;else if(!fe&&ge){var we;(we=Ot(se[0],se[1],Lt[0],Lt[1],C,D,n))&&((Z=w.slice(X,Q+1)).push(we),r.push(Z)),X=++Q}else{var ye=Kt(Lt[0],Lt[1],se[0],se[1],C,D,n);ye?(((Z=w.slice(X,Q+1))[Z.length-1][0]!==ye[0][0]||Z[Z.length-1][1]!==ye[0][1])&&Z.push(ye[0]),Z.length>1&&r.push(Z),w[Q]=ye[1],w[Q+1]&&w[Q+1][0]==ye[1][0]&&w[Q+1][1]==ye[1][1]&&Q++,X=Q):Q++}}X!==Q&&(Z=w.slice(X,w.length))&&r.push(Z)}else r.push(w)},s=function(w,C){var se,D=i[C],Q=i[C+1],X=0,Z=0;if(1!==w.length||-1!==(Lt=ft(w[0][0],w[0][1],D[0],D[1],Q[0],Q[1],n)).indexOf(1)){for(;X<w.length-1;){var fe=w[X],ge=w[X+1],Lt=ft(fe[0],fe[1],D[0],D[1],Q[0],Q[1],n),we=ft(ge[0],ge[1],D[0],D[1],Q[0],Q[1],n);if(-1!==Lt.indexOf(1)&&-1!==we.indexOf(1))Z=++X;else if(-1!==Lt.indexOf(1)&&-1===we.indexOf(1))(ye=_t(fe[0],fe[1],Lt,ge[0],ge[1],D[0],D[1],Q[0],Q[1],n))?(w[X]=ye,Z=X):X++;else if(-1===Lt.indexOf(1)&&-1!==we.indexOf(1)){var ye;(ye=_t(ge[0],ge[1],we,fe[0],fe[1],D[0],D[1],Q[0],Q[1],n))?((se=w.slice(Z,X+1)).push(ye),r.push(se),Z=++X):X++}else{var Ee=xt(fe[0],fe[1],ge[0],ge[1],D[0],D[1],Q[0],Q[1],n);Ee?(((se=w.slice(Z,X+1))[se.length-1][0]!==Ee[0][0]||se[se.length-1][1]!==Ee[0][1])&&se.push(Ee[0]),se.length>1&&r.push(se),w[X]=Ee[1],w[X+1]&&w[X+1][0]==Ee[1][0]&&w[X+1][1]==Ee[1][1]&&X++,Z=X):X++}}Z!==X&&(se=w.slice(Z,w.length))&&r.push(se)}else r.push(w)};if(i=function j(S){var i=[];if(1===S.length)i=S;else{for(var n=0;n<S.length-1;)(S[n][0]!==S[n+1][0]||S[n][1]!==S[n+1][1])&&i.push(S[n]),n++;0!==S.length&&0===i.length&&i.push(S[0]),(S[S.length-1][0]!==S[i.length-1][0]||S[S.length-1][1]!==S[i.length-1][1])&&i.push(S[n])}return i}(i),1===i.length){for(var v=0;v<S.length;v++)a(S[v]);S=r}else for(var p=0;p<i.length-1;p++){for(v=0;v<S.length;v++)s(S[v],p);S=r,r=[]}for(var _=0;_<S.length;_++)for(var L=0;L<S[_].length;L++)S[_][L][0]=Math.round(S[_][L][0]),S[_][L][1]=Math.round(S[_][L][1]);return S})(mt.data.getNode(Z).size.points,L,2);console.log(se)})})(w)}}}}var st=f(1105);class et{constructor(){let i=(0,k.g1)(lt.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:a,size:s,source:v}=(0,st.$)(Math.ceil(1e9*Math.random())),p=(_,L,w,C)=>{s=(0,F.bH)(_,L,w,C),s.x=(0,W.q)(s.x),s.y=(0,W.q)(s.y),s.width=(0,W.q)(s.width),s.height=(0,W.q)(s.height),Object.assign(a,(0,F.sg)(T.$.TEXT,s)),(0,k.__)(r,a),(0,k.g$)(i,s)};return{start:_=>{p(_.x,_.y,_.x+s.width,_.y+s.height)},move:(_,L)=>{p(L[0][0],L[0][1],_.x,_.y)},end:(_,L)=>{s.width>=10&&s.height>=10?mt.data.node=Object.assign({id:n,type:T.$.TEXT,name:"Text"},{size:s,attribute:a,source:v}):null==r||r.remove(),null==i||i.remove()}}}}var dt=f(4113),ct=f(9125),kt=f(7797);var Wt=f(6358);class ee{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","foreignObject","image"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>mt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,a,s,v;null===(n=window.document.getElementById(lt.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(lt.O.SELECT_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(lt.O.SCAN_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(lt.O.CREATE_GROUP))||void 0===s||s.remove(),null===(v=window.document.getElementById(lt.O.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=mt.data.deleteNode(i);mt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}mt.dataSelect.ids=[]}groupNode(){let i=[];if(mt.dataSelect.ids.length>=2){let n=mt.data.getNode(mt.dataSelect.ids[0]),{nodeId:r,attribute:a,size:s}=(0,Wt.m)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);mt.data.node=Object.assign({id:r,type:T.$.GROUP,name:"G"},{size:s,attribute:a});for(let v of mt.dataSelect.ids)i.push(mt.data.addGroup(v,r))}if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,M.y)(n[0]):n.length>1&&(0,y.Q)(n)}}ungroupNode(){let i=[];for(let n of mt.dataSelect.ids)i.push(mt.data.unGroup(n));if(i.length){mt.dataSelect.ids=i;let n=mt.dataSelect.nodes;1==n.length?(0,M.y)(n[0]):n.length>1&&(0,y.Q)(n)}}}var Ut=f(9942);class Zt{createNodeImage(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:_}=(0,it.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Ut.I)(i)}}),L=1;(D=>{if(!D)return;let Q=new Image;Q.onload=()=>{var X;L=(0,W.q)(Q.naturalHeight/Q.naturalWidth,100);let Z=(null===(X=mt.data.slide)||void 0===X||null===(X=X.svg)||void 0===X?void 0:X.viewBox)||{x:0,y:0,width:100,height:100};((D,Q,X,Z)=>{v=(0,F.bH)(D,Q,X,Z,{ratio:L}),Object.assign(p,(0,F.sg)(T.$.IMAGE,v)),(0,k.__)(s,p)})(Z.width/2-Q.naturalWidth/2,Z.height/2-Q.naturalHeight/2,Z.width/2+Q.naturalWidth/2,Z.height/2+Q.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:_})},Q.onerror=X=>{console.error(`ImgSrc load failed -> ${D}`,X)},Q.src=D})(null!==(n=null===(r=_.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}createNodeIframe(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{style:{},source:{type:"iframe",iframe:(0,Ut.I)(i)}});(w=>{let C=(null===(w=mt.data.slide)||void 0===w||null===(w=w.svg)||void 0===w?void 0:w.viewBox)||{x:0,y:0,width:100,height:100};((w,C,D,Q)=>{a=(0,F.bH)(w,C,D,Q),Object.assign(s,(0,F.sg)(T.$.IMAGE,a)),(0,k.__)(r,s)})(C.width/2-a.width/2,C.height/2-a.height/2,C.width/2+a.width/2,C.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeEmbed(i){let{nodeId:n,element:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:0,y:0,width:640,height:360},style:{},source:{type:"embed",embed:Object.assign(i,(0,Ut.I)(i))}});(w=>{let C=(null===(w=mt.data.slide)||void 0===w||null===(w=w.svg)||void 0===w?void 0:w.viewBox)||{x:0,y:0,width:100,height:100};((w,C,D,Q)=>{a=(0,F.bH)(w,C,D,Q),Object.assign(s,(0,F.sg)(T.$.IMAGE,a)),(0,k.__)(r,s)})(C.width/2-a.width/2,C.height/2-a.height/2,C.width/2+a.width/2,C.height/2+a.height/2),mt.data.node=Object.assign({id:n,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})})()}createNodeMedia(i){var n,r;let{nodeId:a,element:s,size:v,attribute:p,source:_}=(0,it.G)(Math.ceil(1e9*Math.random()),{source:{type:"image",image:(0,Ut.I)(i.cover)}}),L={click:{media:i.media}},w=1;(Q=>{if(!Q)return;let X=new Image;X.onload=()=>{var Z;w=(0,W.q)(X.naturalHeight/X.naturalWidth,100);let Lt=(null===(Z=mt.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.viewBox)||{x:0,y:0,width:100,height:100};((Q,X,Z,Lt)=>{v=(0,F.bH)(Q,X,Z,Lt,{ratio:w}),Object.assign(p,(0,F.sg)(T.$.IMAGE,v)),(0,k.__)(s,p)})(Lt.width/2-X.naturalWidth/2,Lt.height/2-X.naturalHeight/2,Lt.width/2+X.naturalWidth/2,Lt.height/2+X.naturalHeight/2),mt.data.node=Object.assign({id:a,type:T.$.IMAGE,name:"Image"},{size:v,attribute:p,source:_,interactive:L})},X.onerror=Z=>{console.error(`ImgSrc load failed -> ${Q}`,Z)},X.src=Q})(null!==(n=null===(r=_.image)||void 0===r?void 0:r.url)&&void 0!==n?n:"")}insert(i){var n;if(mt.data.insertSlide(mt.data.slideId,1),i.title){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});mt.data.node=Object.assign({id:r,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}if(i.description){let{nodeId:r,size:a,attribute:s,style:v,source:p}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});mt.data.node=Object.assign({id:r,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:s,style:v,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:a,attribute:s}=(0,ht.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});mt.data.node=Object.assign({id:r,type:T.$.RECT,name:"Rect"},{size:a,attribute:s})})(),(r=>{let{nodeId:a,size:s,attribute:v,style:p,source:_}=(0,zt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});mt.data.node=Object.assign({id:a,type:T.$.FOREIGNOBJECT,name:"ForeignObject"},{size:s,attribute:v,style:p,source:_})})())}}var Qt=f(5226);class le{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:mt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((s,v)=>v==this._slideIdx),r=null==n?void 0:n.svg,a=s=>{let v=[];return s.filter(p=>!p.isdeleted).forEach(p=>{p.type==T.$.GROUP?v=v.concat(a(p.nodes||[])):v.push(p.id)}),v};return a((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(_=>!_.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,_;return v.type!=T.$.GROUP||(null!==(p=null===(_=v.nodes)||void 0===_?void 0:_.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a,s,v,p,_,L,w,C;n.push(null===(a=r.svg)||void 0===a||null===(a=a.background)||void 0===a?void 0:a.path),null===(s=r.svg)||void 0===s||s.nodes.forEach(D=>{var Q,X,Z,Lt,se,fe,ge,we,ye,Ee;n.push(null===(Q=D.source)||void 0===Q||null===(Q=Q.image)||void 0===Q?void 0:Q.path),n.push(null===(X=D.source)||void 0===X||null===(X=X.audio)||void 0===X?void 0:X.path),n.push(null===(Z=D.source)||void 0===Z||null===(Z=Z.video)||void 0===Z?void 0:Z.path),n.push(null===(Lt=D.source)||void 0===Lt||null===(Lt=Lt.file)||void 0===Lt?void 0:Lt.path),n.push(null===(se=D.source)||void 0===se||null===(se=se.iframe)||void 0===se?void 0:se.path),n.push(null===(fe=D.source)||void 0===fe||null===(fe=fe.track)||void 0===fe?void 0:fe.path),n.push(null===(ge=D.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),n.push(null===(we=D.interactive)||void 0===we||null===(we=we.click)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),n.push(null===(ye=D.interactive)||void 0===ye||null===(ye=ye.click)||void 0===ye||null===(ye=ye.image)||void 0===ye||null===(ye=ye.source)||void 0===ye?void 0:ye.path),n.push(null===(Ee=D.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.video)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path)}),n.push(null===(v=r.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),n.push(null===(p=r.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(_=r.test)||void 0===_||null===(_=_.effecttrue)||void 0===_?void 0:_.path),n.push(null===(L=r.test)||void 0===L||null===(L=L.effectfalse)||void 0===L?void 0:L.path),n.push(null===(w=r.test)||void 0===w||null===(w=w.icontrue)||void 0===w?void 0:w.path),n.push(null===(C=r.test)||void 0===C||null===(C=C.iconfalse)||void 0===C?void 0:C.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,a,s)=>s.indexOf(r)==a)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,k.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var a,s;return null===(a=r)||void 0===a||a.filter(v=>v.type==T.$.GROUP).forEach(v=>{var p;v.nodes=n(null===(p=v.nodes)||void 0===p?void 0:p.filter(_=>!_.isdeleted))}),(r=null===(s=r)||void 0===s?void 0:s.filter(v=>{var p,_;return v.type!=T.$.GROUP||(null!==(p=null===(_=v.nodes)||void 0===_?void 0:_.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var a;r.svg&&(r.svg.nodes=n(null===(a=r.svg)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.filter(s=>!s.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,k.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}openSlide(i,n){var r,a,s,v;if(i)for(let C=0,D=null!==(p=null===(_=this._dataSource.slides)||void 0===_?void 0:_.length)&&void 0!==p?p:0;C<D;C++){var p,_,L;if((null!==(L=this._dataSource.slides)&&void 0!==L?L:[])[C].id==i){this._slideIdx=C;break}}else if(n&&n>=0&&n<(null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var w;this._slideIdx=0,null!==(w=this._dataSource.slides)&&void 0!==w&&w.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,k.wM)(),(0,Qt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.length)&&void 0!==s?s:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var a,s,v,p,_;let L=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.find(D=>D.id==i))&&void 0!==a?a:this._defaultSlide,w=(null!==(v=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(L))&&void 0!==v?v:0)+n;var C;r?(r.id=this.newSlideId,r.code=void 0,r.name="Trang m\u1edbi",null!==(C=r.svg)&&void 0!==C&&C.viewBox||r.svg&&(r.svg.viewBox=mt.screen.frameSize)):r=this._defaultSlide,null===(_=this._dataSource.slides)||void 0===_||_.splice(w,0,r),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,a,s,v,p,_;let L=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(D=>D.id==i))&&void 0!==n?n:this._defaultSlide,w=(null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(L))&&void 0!==a?a:0)+1,C=Object.assign(JSON.parse(JSON.stringify(L)),{id:this.newSlideId,code:void 0,name:`${L.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(w,0,C),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(_=this._dataSource.slides)||void 0===_?void 0:_.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var r,a,s,v,p,_;let L=null!==(r=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(C=>C.id==i))&&void 0!==r?r:this._defaultSlide,w=null!==(s=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(L))&&void 0!==s?s:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(w+n,0,null===(_=this._dataSource.slides)||void 0===_?void 0:_.splice(w,1)[0])}deleteSlide(i){var n,r,a,s,v,p;let _=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(D=>D.id==i))&&void 0!==n?n:this._defaultSlide,L=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(_))&&void 0!==a?a:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(L,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(L<this._slideIdx){var w,C;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(C=this._dataSource.slides)||void 0===C?void 0:C.length)&&void 0!==w?w:0,this.slide)}else L==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,a,s,v;let p=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(L=>L.id==i))&&void 0!==n?n:this._defaultSlide,_=null!==(a=null===(s=this._dataSource.slides)||void 0===s?void 0:s.indexOf(p))&&void 0!==a?a:0;if(p.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(L=>!L.isdeleted))&&void 0!==v&&v.length){let L=!0;for(;p.isdeleted;)L?_++:_--,this._dataSource.slides[_]?p=this._dataSource.slides[_]:L=!L;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,a){this._fnChangeSlides.forEach(s=>s(i,n,r,a))}set node(i){var n,r;let a=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((v,p)=>p==this._slideIdx),s=null==a?void 0:a.svg;null!=s&&s.nodes&&(null==s||s.nodes.push(i)),mt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((D,Q)=>Q==this._slideIdx),a=null==r?void 0:r.svg,s=(D,Q)=>{let X=null==D?void 0:D.find(se=>se.id==i);if(X)return X.pid=Q,X;let Z=0,Lt=D.length||0;for(;Z<Lt&&!X&&(X=s(D[Z].nodes||[],D[Z].id),!X);)Z++;return X},v=s((null==a?void 0:a.nodes)||[]);var p,_,L,w,C;return v?(v.style=null!==(p=v.style)&&void 0!==p?p:{},v.source=null!==(_=v.source)&&void 0!==_?_:{},v.animate=null!==(L=v.animate)&&void 0!==L?L:{},v.interactive=null!==(w=v.interactive)&&void 0!==w?w:{},v.variable=null!==(C=v.variable)&&void 0!==C?C:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,_)=>_==this._slideIdx),a=null==r?void 0:r.svg,v=p=>{let _=(null==p?void 0:p.find(X=>X.id==i))||(p=>{let _=null,L=0,w=p.length||0;for(;L<w&&!_;){if(_=v(p[L].nodes),_){_.pid=p[L].id;break}L++}var C,D,Q,X,Z;return _&&(_.style=null!==(C=_.style)&&void 0!==C?C:{},_.source=null!==(D=_.source)&&void 0!==D?D:{},_.animate=null!==(Q=_.animate)&&void 0!==Q?Q:{},_.interactive=null!==(X=_.interactive)&&void 0!==X?X:{},_.variable=null!==(Z=_.variable)&&void 0!==Z?Z:{}),_})((null==p?void 0:p.filter(X=>X.type==T.$.GROUP))||[]);var L,w,C,D,Q;return _&&(_.style=null!==(L=_.style)&&void 0!==L?L:{},_.source=null!==(w=_.source)&&void 0!==w?w:{},_.animate=null!==(C=_.animate)&&void 0!==C?C:{},_.interactive=null!==(D=_.interactive)&&void 0!==D?D:{},_.variable=null!==(Q=_.variable)&&void 0!==Q?Q:{}),_};return v((null==a?void 0:a.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((w,C)=>C==this._slideIdx),_=null==p?void 0:p.svg,L=w=>{let C=[];return w.filter(D=>!D.isdeleted).forEach(D=>{D.type==T.$.GROUP?C=C.concat(L(D.nodes||[])):i>D.size.x||n>D.size.y||r<D.size.x+D.size.width||a<D.size.y+D.size.height||(s?D.type==s&&C.push(D.id):C.push(D.id))}),C};return L((null==_?void 0:_.nodes)||[])}getNodeOnArea(i,n,r,a,s){var v;let p=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((w,C)=>C==this._slideIdx),_=null==p?void 0:p.svg,L=w=>{let C=[];return w.filter(D=>!D.isdeleted).forEach(D=>{D.type==T.$.GROUP?C=C.concat(L(D.nodes||[])):D.size.x+D.size.width<i||D.size.y+D.size.height<n||D.size.x>r||D.size.y>a||(s?D.type==s&&C.push(D.id):C.push(D.id))}),C};return L((null==_?void 0:_.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let a=this.getNode(i),s=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:s})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),s}addGroup(i,n){var r;let a=this.getNode(i),s=this.getNode(n);s.nodes=s.nodes||[];let v=Math.ceil(1e9*Math.random());return s.nodes.push(Object.assign(JSON.parse(JSON.stringify(a)),{id:v})),Object.assign(a,{isdeleted:!0}),(0,Qt.E)(this.slide),(0,Qt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),v}setNodeP(i,n){var r;let a=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(s=>s.id==i);a&&(a.pid=n||null)}bringToFront(i){var n,r,a;let s=i.map(Q=>mt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:_,y2:L}=ae(s),w=this.getNodeOnArea(v,p,_,L);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,X)=>{Q.index=X+1});let C=w.map(Q=>{var X,Z;return null!==(X=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Lt=>Lt.id==Q))||void 0===Z?void 0:Z.index)&&void 0!==X?X:0}),D=Math.max.apply(null,C);i.forEach((Q,X)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Lt=>Lt.id==Q).forEach(Lt=>{Lt.index=D+(X+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,X)=>{var Z,Lt;return(null!==(Z=Q.index)&&void 0!==Z?Z:0)-(null!==(Lt=X.index)&&void 0!==Lt?Lt:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(lt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}sendToBack(i){var n,r,a;let s=i.map(Q=>mt.data.getNode(Q)).filter(Q=>!Q.isfake),{x1:v,y1:p,x2:_,y2:L}=ae(s),w=this.getNodeOnArea(v,p,_,L);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Q,X)=>{Q.index=X+1});let C=w.map(Q=>{var X,Z;return null!==(X=null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||null===(Z=Z.nodes.find(Lt=>Lt.id==Q))||void 0===Z?void 0:Z.index)&&void 0!==X?X:0}),D=Math.min.apply(null,C)-1;i.forEach((Q,X)=>{var Z;null===(Z=this.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z||Z.nodes.filter(Lt=>Lt.id==Q).forEach(Lt=>{Lt.index=D+(X+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((Q,X)=>{var Z,Lt;return(null!==(Z=Q.index)&&void 0!==Z?Z:0)-(null!==(Lt=X.index)&&void 0!==Lt?Lt:0)}),(0,Qt.T)(this.slide),null===(a=window.document.getElementById(lt.O.SELECT_GROUP))||void 0===a||a.remove(),(0,y.Q)(s)}}const ae=S=>{let i=999999,n=999999,r=-999999,a=-999999;return S.forEach(s=>{i=Math.min(i,s.size.x),n=Math.min(n,s.size.y),r=Math.max(r,s.size.x+s.size.width),a=Math.max(a,s.size.y+s.size.height)}),{x1:i,y1:n,x2:r,y2:a}};class oe{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":mt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:a,size:s,attribute:v}=mt.data.getNode(n.from.id);Object.assign(s,n.from.size),Object.assign(v,(0,F.sg)(a,s)),(0,k.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=mt.data.getNode(n.from.id);Object.assign(a,n.from.attribute),(0,k.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=mt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.style),(0,k.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=mt.data.getNode(n.from.id);Object.assign(null!=s?s:{},n.from.source),(0,k.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=mt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),mt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":mt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":mt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:a,size:s,attribute:v}=mt.data.getNode(n.to.id);Object.assign(s,n.to.size),Object.assign(v,(0,F.sg)(a,s)),(0,k.__)(window.document.getElementById(r),v);break}case"attribute":{let{id:r,attribute:a}=mt.data.getNode(n.to.id);Object.assign(a,n.to.attribute),(0,k.__)(window.document.getElementById(r),a);break}case"style":{let{id:r,style:a}=mt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.style),(0,k.DB)(window.document.getElementById(r),a);break}case"source":{let{id:r,type:a,source:s}=mt.data.getNode(n.to.id);Object.assign(null!=s?s:{},n.to.source),(0,k.QI)(window.document.getElementById(r),a,null!=s?s:{});break}case"animate":{let{animate:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=mt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),mt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class pe{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var a;if(!(i<.1||i>10)){if(n=null!==(a=n)&&void 0!==a?a:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var s={x:Math.max(0,Math.min((0,W.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,W.q)(n.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*s.x,y:(this._height/i-this._height/this._scale)*s.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-60)/this._frameSize.width,(this._height-60)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,k.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var Ye=f(644);class qe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Ye.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Ye.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Ke=f(1690),ni=f(5973),ri=f(4787),Me=function(S){return S&&JSON.parse(JSON.stringify(S))},We=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Je=[],ai={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},oi={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ti{constructor(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Me(We).concat(Me(Je)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(a=>a.change||[]).forEach(a=>{r=r.concat(a)}),r))([]),We.forEach(r=>{var a=this._data_variables.filter(s=>s.key==r.key);a.length?a.forEach(function(s,v,p){s.type=r.type,s.readonly=r.readonly,s.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Me(ai)}getConditionTemp(){return Me(oi)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Me((S=this._data_variables,i="key",function(n){for(var r of S.map(function(a){return a[i]}).sort())S.filter(function(a){return a[i]==r}).forEach(function(a){n.push(a)}),S=S.filter(function(a){return a[i]!=r});return n}([]))):Me(We).concat(Me(Je));var S,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),We.forEach(n=>{var r=this._data_variables.filter(a=>a.key==n.key);r.length?r.forEach((a,s,v)=>{a.type=n.type,a.readonly=n.readonly,a.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(s=>s.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(s=>s.key==i);a.length?a.forEach(function(s,v,p){s.value=n,s.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(v){return v.key==i});if(r.length){var s,a=r[0]||{};switch(this.OnGetActionExecuting(a),n||(n=a.type||null),n){case"string":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":"string"==typeof a.value?a.value||"":a.value.toString().trim();break;case"number":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?0:"number"==typeof a.value?a.value||0:parseFloat(a.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(a.value)>=0?s=!1:"boolean"==typeof a.value?s=a.value:(s=(a.value+"").toLowerCase(),s="1"==a.value||"true"==a.value||"yes"==a.value||"dung"==a.value);break;case"audio-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></audio>`:"";break;case"video-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${a.value}"></source></video>`:"";break;case"img-src":s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value?`<img style="width:100%;vertical-align:middle;" src="${a.value}"/>`:"";break;default:s=[null,void 0,NaN,1/0].indexOf(a.value)>=0?"":a.value}return this.OnGetActionExecuted(a),s}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var a=this._data_variables.filter(function(v){return v.key==i});if(a.length){var s=a[0];this.OnSetActionExecuting(s),s&&(s.value=n),this.OnSetActionExecuted(s)}}}getConditionAll(){return Me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(a){return n==a.trim()?1:0}).reduce(function(a,s){return a+s})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(a){return n.indexOf(a.trim())>=0?1:0}).reduce(function(a,s){return a+s});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(a,s){return a+s});case"sub":return n.reduce(function(a,s){return a-s});case"pro":return n.reduce(function(a,s){return a*s});case"div":return n.reduce(function(a,s){return a/s});case"avg":var r=n.reduce(function(a,s){return a+s})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(a,s){return a&&s});case"or":return n.reduce(function(a,s){return a||s});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Me(n),{variable:r}))?0:1).reduce(function(r,a){return r+a})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Me(n),{variable:r})));break;case"slide":Ke.$.runSlide(void 0,void 0,n.slide);break;case"node":{var a;(0,ri.L5)({id:n.node,nodeStatus:Ke.$.nodeStatus,slideStatus:Ke.$.slideStatus});let s=Ke.$.findNode(n.node);null!=s&&null!==(a=s.interactive)&&void 0!==a&&a.click&&(0,ni.F)(s,Ke.$.nodeStatus,Ke.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ve{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case B._.PEN:this._pen_type=n;break;case B._.SHAPE:this._shape_type=n,r&&n===T.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){this._pointer_type=i,this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(a=>a(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(a=>a(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(a=>a(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(a=>a(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(a=>a(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(a=>a(i,n,r))}}const mt=new class si{constructor(){this._container="",this._svg="",this._screen=pe.prototype,this._data=le.prototype,this._dataSelect=ee.prototype,this._slide=Zt.prototype,this._history=oe.prototype,this._attribute=qe.prototype,this._pointer=Ve.prototype,this._variable=ti.prototype,this._data=new le,this._dataSelect=new ee,this._slide=new Zt,this._history=new oe,this._attribute=new qe,this._pointer=new Ve,this._variable=new ti,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,a,s;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(a=null==i?void 0:i.left)&&void 0!==a?a:0,y:null!==(s=null==i?void 0:i.top)&&void 0!==s?s:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new pe,(S=>{new k.Mh(S.container,S.target),mt.pointer.onchange=(r,a,s)=>{switch(r){case B._.POINTER:jQuery(S.target).css({cursor:"auto"});break;case B._.HAND:jQuery(S.target).css({cursor:"grab"});break;case B._.PEN:switch(a){case ct.D.DRAW:jQuery(S.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case ct.D.HIGHTLIGH:jQuery(S.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case B._.ERASER:jQuery(S.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case B._.SHAPE:jQuery(S.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case B._.TEXT:case B._.FOREIGNOBJECT:jQuery(S.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(S.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{mt.pointer.pointer_type==B._.HAND&&jQuery(S.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{mt.pointer.pointer_type==B._.HAND&&jQuery(S.target).css({cursor:"grab"})}),jQuery(S.container).off("mousewheel.icdt-init").on("mousewheel.icdt-init",r=>{var a;r.preventDefault();var s=mt.screen.scale,v=(null!==(a=r.originalEvent)&&void 0!==a?a:r).deltaY>0?1:-1;mt.screen.scaleTo(s-.04*s*v,(0,kt.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},mt.screen.offset))}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{mt.screen.actived=!!jQuery(r.target).parents("app-main").length}),jQuery(S.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{mt.screen.actived=!0}),jQuery(S.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{mt.screen.actived=!1}),jQuery(S.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(S.container.includes("#")&&S.container.includes(r.target.getAttribute("id"))||S.container.includes(".")&&S.container.includes(r.target.getAttribute("class"))||S.container.includes(r.target.nodeName))&&(mt.pointer.pointer_type_temp||mt.pointer.pointer_type)===B._.POINTER&&(mt.dataSelect.ids=[])}),jQuery(S.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(mt.pointer.pointer_type_temp||mt.pointer.pointer_type){case B._.POINTER:z(r);break;case B._.HAND:(S=>{(0,c.A)(S,new rt,1,{x:0,y:0})})(r);break;case B._.PEN:(0,yt.i)(r);break;case B._.SHAPE:(S=>{var i=null;switch(mt.pointer.shape_type){case T.$.CIRCLE:i=new tt;break;case T.$.ELLIPSE:i=new wt;break;case T.$.LINE:i=new Dt;break;case T.$.RECT:i=new Y;break;case T.$.POLYGON:var n;i=new Bt(null===(n=V.find(r=>r.type==mt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case T.$.FOREIGNOBJECT:i=new ut;break;case T.$.IMAGE:i=new bt;break;case T.$.TEXT:case T.$.PATH:i=new Mt}i&&(0,c.A)(S,i)})(r);break;case B._.FOREIGNOBJECT:(S=>{(0,c.A)(S,new ut)})(r);break;case B._.IMAGE:(S=>{(0,c.A)(S,new bt)})(r);break;case B._.TEXT:(S=>{(0,c.A)(S,new et)})(r);break;case B._.ERASER:(S=>{(0,c.A)(S,new h)})(r);break;case B._.INDEX:(0,dt.s)(r)}};let n=!1;jQuery(S.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(S.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),S.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{mt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,$t.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{mt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,$t.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4113:(ce,It,f)=>{f.d(It,{s:()=>y,Q:()=>b});var B=f(1687),k=f(4981),lt=f(4318),T=f(6816),F=f(4080);const y=z=>{var x,rt;let N=(null===(x=z.mouseEvent)||void 0===x?void 0:x.target)||(null===(rt=z.touchEvent)||void 0===rt?void 0:rt.target),V=(null==N?void 0:N.getAttribute("id"))||"",ot=null==N?void 0:N.nodeName,W=jQuery(N).parents("g[id]").attr("id")||"";if(![B.O.INDEX_GROUP].includes(W))if(V&&!V.match(/[^0-9]/)&&k.icdt.dataSelect.nodeName.includes(ot)){var gt,wt;let ht=parseFloat(V||"0");k.icdt.dataSelect.ids=null!==(gt=z.mouseEvent)&&void 0!==gt&&gt.shiftKey||null!==(wt=z.touchEvent)&&void 0!==wt&&wt.shiftKey?[ht].concat(k.icdt.dataSelect.ids).filter((P,Bt,Gt)=>Gt.indexOf(P)==Bt):[ht],R(k.icdt.dataSelect.nodes)}else{var tt;k.icdt.dataSelect.ids.length&&(k.icdt.dataSelect.ids=[]),(0==(null===(tt=z.mouseEvent)||void 0===tt?void 0:tt.button)||z.touchEvent)&&((z,x)=>{let W=(0,F.g1)(B.O.SCAN_GROUP,"g"),tt=(0,lt.bH)(0,0,1,1);(0,F.vl)(W,tt),((z,x,rt,N)=>{(0,T.A)(z,{start:W=>{},move:(W,tt)=>{((W,tt,gt,wt)=>{x=(0,lt.bH)(W,tt,gt,wt),(0,F.vl)(rt,x)})(tt[0][0],tt[0][1],W.x,W.y)},end:(W,tt)=>{null==rt||rt.remove(),k.icdt.dataSelect.ids=k.icdt.data.getNodeInArea(Math.min(tt[0][0],W.x),Math.min(tt[0][1],W.y),Math.max(tt[0][0],W.x),Math.max(tt[0][1],W.y)),N(k.icdt.dataSelect.nodes)}})})(z,tt,W,x)})(z,R)}},R=z=>{var x,rt;let N=1;var V,ot;if(z.length&&(N=Math.max.apply(null,null!==(V=null===(ot=k.icdt.data.slide)||void 0===ot||null===(ot=ot.svg)||void 0===ot?void 0:ot.nodes.map(tt=>{var gt;return null!==(gt=tt.idx)&&void 0!==gt?gt:0}))&&void 0!==V?V:[0])+1),1==z.length)z[0].idx||(z[0].idx=N,z[0].time=0);else if(z.length>=0){let tt=z.map(wt=>{var ht;return null!==(ht=wt.idx)&&void 0!==ht?ht:0}).filter(wt=>wt>0),gt=tt.length?Math.min.apply(null,tt):N;z.forEach(wt=>{var ht;wt.idx=gt,wt.time=null!==(ht=wt.time)&&void 0!==ht?ht:0})}let W=(0,F.g1)(B.O.INDEX_GROUP,"g");(0,F.mo)(W,null!==(x=null===(rt=k.icdt.data.slide)||void 0===rt||null===(rt=rt.svg)||void 0===rt?void 0:rt.nodes)&&void 0!==x?x:[])},b=z=>{var x,rt,N;null!=z&&null!==(x=z.svg)&&void 0!==x&&x.nodes&&z.svg.nodes.forEach(ot=>{ot.idx=0});let V=(0,F.g1)(B.O.INDEX_GROUP,"g");(0,F.mo)(V,null!==(rt=null===(N=k.icdt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.nodes)&&void 0!==rt?rt:[])}},4578:(ce,It,f)=>{f.d(It,{h:()=>x,t:()=>rt});var B=f(644),k=f(7308),lt=f(968),T=f(4981),F=f(666),c=f(2966),M=f(5226),y=f(3423),R=f(5811),b=f(3385);const x=new class z{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:k.s.Escape,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:k.s.Delete,fn:()=>{T.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:k.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=lt._.HAND}},this.onchange={type:"keyup",key:k.s.Space,fn:()=>{T.icdt.pointer.pointer_type_temp=lt._.POINTER}},this.onchange={type:"keydown",key:k.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.backSlide()}},this.onchange={type:"keydown",key:k.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length||T.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:k.s.ArrowLeft,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(V=>{(0,b.k6)(V,(0,R.q)(V.size.x-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,F.y)(T.icdt.dataSelect.nodes[0]):(0,c.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:k.s.ArrowRight,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(V=>{(0,b.k6)(V,(0,R.q)(V.size.x+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,F.y)(T.icdt.dataSelect.nodes[0]):(0,c.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:k.s.ArrowUp,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(V=>{(0,b.co)(V,(0,R.q)(V.size.y-(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,F.y)(T.icdt.dataSelect.nodes[0]):(0,c.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:k.s.ArrowDown,fn:()=>{T.icdt.dataSelect.ids.length&&(T.icdt.dataSelect.nodes.forEach(V=>{(0,b.co)(V,(0,R.q)(V.size.y+(0,y.v)(1)))}),1==T.icdt.dataSelect.ids.length?(0,F.y)(T.icdt.dataSelect.nodes[0]):(0,c.Q)(T.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:k.s.Digit1,fn:V=>{V.shiftKey&&(T.icdt.reloadView(),T.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:k.s.KeyA,fn:V=>{if(V.ctrlKey){T.icdt.dataSelect.ids=T.icdt.data.getNodeAll();let ot=T.icdt.dataSelect.nodes;1==ot.length?(0,F.y)(ot[0]):ot.length>1&&(0,c.Q)(ot)}}},this.onchange={type:"keydown",key:k.s.KeyC,fn:V=>{if(V.ctrlKey){let ot=T.icdt.dataSelect.nodes;ot&&(0,B.yR)({params:{type:"nodes",nodes:ot}})}}},this.onchange={type:"keydown",key:k.s.KeyV,fn:V=>{V.ctrlKey&&(0,B.aY)({callback:ot=>{var W,tt;"nodes"==(null==ot?void 0:ot.type)&&null!=ot&&null!==(W=ot.nodes)&&void 0!==W&&W.length&&(null==ot||null===(tt=ot.nodes)||void 0===tt||tt.forEach(gt=>{gt.id=Math.ceil(1e9*Math.random()),T.icdt.data.node=gt}),(0,M.E)(T.icdt.data.slide))}})}},this.onchange={type:"keydown",key:k.s.KeyZ,fn:V=>{V.ctrlKey&&V.shiftKey?T.icdt.history.redo():V.ctrlKey&&T.icdt.history.undo()}}}set onchange(V){let ot=this._fnChanges.find(W=>W.eventType==V.type&&W.eventKey==V.key);ot?ot.fns.push(V.fn):this._fnChanges.push({eventType:V.type,eventKey:V.key,fns:[V.fn]})}change(V,ot,W){var tt;null===(tt=this._fnChanges.find(gt=>gt.eventType==V&&gt.eventKey==ot))||void 0===tt||tt.fns.forEach(gt=>gt(W))}},rt=N=>{x.change(N.type,N.keyCode||N.which||N.charCode||0,N)}},410:(ce,It,f)=>{f.d(It,{a:()=>y});var B=f(4318),k=f(8419),lt=f(9054),T=f(4080),F=f(511),c=f(3423),M=f(1687);class y{constructor(b){var z;let x={stroke:"#FF0000",strokeWidth:(0,c.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,c.v)(8)},{element:N,attribute:V,size:ot}=(0,k.G)(Math.ceil(1e9*Math.random()),{size:b});window.document.getElementById(M.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(ht=>null==ht?void 0:ht.remove()),null===(z=window.document.getElementById(M.O.INTERACTIVE_GROUP))||void 0===z||z.appendChild(N),(0,T.__)(N,x);let tt="";return{start:ht=>{tt=`M ${ht.x} ${ht.y} L ${ht.x} ${ht.y}`},move:(ht,Y)=>{((ht,Y)=>{tt+=` ${ht} ${Y}`,N.setAttribute("d",tt)})(ht.x,ht.y)},end:(ht,Y)=>{(ht=>{let P=F.jvg().x(Bt=>Bt[0]).y(Bt=>Bt[1]).curve(F.$0Z)(ht);N.setAttribute("d",P),ht.length>=2&&(window.interactivePoints=ht)})(Y),(ht=>{let Y=9999,P=9999,Bt=-9999,Gt=-9999;ht.forEach(Dt=>{Y=Math.min(Y,Dt[0]),P=Math.min(P,Dt[1]),Bt=Math.max(Bt,Dt[0]),Gt=Math.max(Gt,Dt[1])}),ot=(0,B.bH)(Y,P,Bt,Gt,{points:ht}),Object.assign(V,(0,B.sg)(lt.$.PATH,ot),x)})(Y)}}}}},9623:(ce,It,f)=>{f.d(It,{U:()=>N,i:()=>rt});var B=f(1687),k=f(9125),lt=f(4981),T=f(6816),F=f(4080),c=f(4318),M=f(8419),y=f(9054),R=f(511);class b{constructor(){let ot={strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:W,element:tt,attribute:gt,size:wt}=(0,M.G)(Math.ceil(1e9*Math.random()));(0,F.__)(tt,gt);let Y="";return{start:Gt=>{Y=`M ${Gt.x} ${Gt.y} L ${Gt.x} ${Gt.y}`},move:(Gt,Dt)=>{((Gt,Dt)=>{Y+=` ${Gt} ${Dt}`,tt.setAttribute("d",Y)})(Gt.x,Gt.y)},end:(Gt,Dt)=>{(Gt=>{let Ht=R.jvg().x(Mt=>Mt[0]).y(Mt=>Mt[1]).curve(R.$0Z)(Gt);tt.setAttribute("d",Ht)})(Dt),(Gt=>{let Dt=9999,Ht=9999,Mt=-9999,zt=-9999;Gt.forEach(ut=>{Dt=Math.min(Dt,ut[0]),Ht=Math.min(Ht,ut[1]),Mt=Math.max(Mt,ut[0]),zt=Math.max(zt,ut[1])}),wt=(0,c.bH)(Dt,Ht,Mt,zt,{points:Gt}),Object.assign(gt,(0,c.sg)(y.$.PATH,wt),ot)})(Dt),lt.icdt.data.node=Object.assign({id:W,type:y.$.PATH,name:"Path"},{size:wt,attribute:gt})}}}}class z{constructor(){let ot={strokeOpacity:.4,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:W,element:tt,attribute:gt,size:wt}=(0,M.G)(Math.ceil(1e9*Math.random()));(0,F.__)(tt,gt);let Y="";var P=(Bt,Gt)=>{Y+=` ${Bt} ${Gt}`,tt.setAttribute("d",Y)};return{start:Bt=>{Y=`M ${Bt.x} ${Bt.y} L ${Bt.x} ${Bt.y}`},move:(Bt,Gt)=>{P(Bt.x,Bt.y)},end:(Bt,Gt)=>{P(Bt.x,Bt.y),(Bt=>{let Gt=9999,Dt=9999,Ht=-9999,Mt=-9999;Bt.forEach(zt=>{Gt=Math.min(Gt,zt[0]),Dt=Math.min(Dt,zt[1]),Ht=Math.max(Ht,zt[0]),Mt=Math.max(Mt,zt[1])}),wt=(0,c.bH)(Gt,Dt,Ht,Mt,{points:Bt}),Object.assign(gt,(0,c.sg)(y.$.PATH,wt),ot)})(Gt),lt.icdt.data.node=Object.assign({id:W,type:y.$.PATH,name:"Path"},{size:wt,attribute:gt})}}}}var x=f(410);const rt=V=>{switch(lt.icdt.pointer.pen_type){case k.D.DRAW:(0,T.A)(V,new b);break;case k.D.HIGHTLIGH:(0,T.A)(V,new z);break;case k.D.INTERACTIVE:N(V)}},N=V=>{var ot,W;let tt=(0,F.g1)(B.O.INTERACTIVE_GROUP,"g"),gt=null!==(ot=null===(W=lt.icdt.data.slide)||void 0===W||null===(W=W.svg)||void 0===W?void 0:W.viewBox)&&void 0!==ot?ot:(()=>{let{width:wt,height:ht}=lt.icdt.screen.get;return{x:0,y:0,width:wt,height:ht}})();(0,F.XH)(tt,gt),V&&(0,T.A)(V,new x.a)}},666:(ce,It,f)=>{f.d(It,{y:()=>M});var B=f(1687),k=f(4981),lt=f(4318),T=f(6816),F=f(4080),c=f(5811);const M=b=>{let z=(0,F.g1)(B.O.RESIZE_GROUP,"g");(0,F.hJ)(z,b).forEach(x=>{y(x.element,x.posType,b,z)})},y=(b,z,x,rt)=>{let N=!1;null==b||b.addEventListener("touchstart",V=>{N=!0,R({touchEvent:V},z,x,rt)}),null==b||b.addEventListener("mousedown",V=>{if(0==V.button){if(N)return void(N=!1);R({mouseEvent:V},z,x,rt)}})},R=(b,z,x,rt)=>{let P,{id:N,type:V,size:ot,attribute:W}=x,{x:tt,y:gt,width:wt,height:ht}=ot,Y=(wt||1)/(ht||1),Gt=null,Mt=!1;(0,T.A)(b,{start:ut=>{Gt=JSON.parse(JSON.stringify({id:N,size:ot,attribute:W}))},move:(ut,it)=>{((ut,it,bt,Et)=>{switch(z){case"rect-center":var $t,yt;P=null!==($t=b.mouseEvent)&&void 0!==$t&&$t.shiftKey||null!==(yt=b.touchEvent)&&void 0!==yt&&yt.shiftKey?Math.abs(bt-ut)>=Math.abs(Et-it)?{x:tt+bt-ut,y:gt,width:wt,height:ht}:{x:tt,y:gt+Et-it,width:wt,height:ht}:{x:tt+bt-ut,y:gt+Et-it,width:wt,height:ht};break;case"rect-top-left":var ne,j,K,u,H,ft,vt,Ot;P=(null!==(ne=b.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(j=b.touchEvent)&&void 0!==j&&j.shiftKey)&&(null!==(K=b.mouseEvent)&&void 0!==K&&K.altKey||null!==(u=b.touchEvent)&&void 0!==u&&u.altKey)?Y>=1?{x:tt+(bt-ut),y:gt+(bt-ut)/Y,width:wt-2*(bt-ut),height:ht-2*(bt-ut)/Y}:{x:tt+(Et-it)*Y,y:gt+(Et-it),width:wt-2*(Et-it)*Y,height:ht-2*(Et-it)}:null!==(H=b.mouseEvent)&&void 0!==H&&H.shiftKey||null!==(ft=b.touchEvent)&&void 0!==ft&&ft.shiftKey?Y>=1?{x:tt+(bt-ut),y:gt+(bt-ut)/Y,width:wt-(bt-ut),height:ht-(bt-ut)/Y}:{x:tt+(Et-it)*Y,y:gt+(Et-it),width:wt-(Et-it)*Y,height:ht-(Et-it)}:null!==(vt=b.mouseEvent)&&void 0!==vt&&vt.altKey||null!==(Ot=b.touchEvent)&&void 0!==Ot&&Ot.altKey?{x:tt+(bt-ut),y:gt+(Et-it),width:wt-2*(bt-ut),height:ht-2*(Et-it)}:{x:tt+(bt-ut),y:gt+(Et-it),width:wt-(bt-ut),height:ht-(Et-it)};break;case"rect-top-right":var Kt,Rt,_t,xt,Tt,re,J,h;P=(null!==(Kt=b.mouseEvent)&&void 0!==Kt&&Kt.shiftKey||null!==(Rt=b.touchEvent)&&void 0!==Rt&&Rt.shiftKey)&&(null!==(_t=b.mouseEvent)&&void 0!==_t&&_t.altKey||null!==(xt=b.touchEvent)&&void 0!==xt&&xt.altKey)?Y>=1?{x:tt-(bt-ut),y:gt-(bt-ut)/Y,width:wt+2*(bt-ut),height:ht+2*(bt-ut)/Y}:{x:tt+(Et-it)*Y,y:gt+(Et-it),width:wt-2*(Et-it)*Y,height:ht-2*(Et-it)}:null!==(Tt=b.mouseEvent)&&void 0!==Tt&&Tt.shiftKey||null!==(re=b.touchEvent)&&void 0!==re&&re.shiftKey?Y>=1?{x:tt,y:gt-(bt-ut)/Y,width:wt+(bt-ut),height:ht+(bt-ut)/Y}:{x:tt,y:gt+(Et-it),width:wt-(Et-it)*Y,height:ht-(Et-it)}:null!==(J=b.mouseEvent)&&void 0!==J&&J.altKey||null!==(h=b.touchEvent)&&void 0!==h&&h.altKey?{x:tt-(bt-ut),y:gt+(Et-it),width:wt+2*(bt-ut),height:ht-2*(Et-it)}:{x:tt,y:gt+(Et-it),width:wt+(bt-ut),height:ht-(Et-it)};break;case"rect-bottom-left":var U,st,et,O,E,G,dt,ct;P=(null!==(U=b.mouseEvent)&&void 0!==U&&U.shiftKey||null!==(st=b.touchEvent)&&void 0!==st&&st.shiftKey)&&(null!==(et=b.mouseEvent)&&void 0!==et&&et.altKey||null!==(O=b.touchEvent)&&void 0!==O&&O.altKey)?Y>=1?{x:tt+(bt-ut),y:gt+(bt-ut)/Y,width:wt-2*(bt-ut),height:ht-2*(bt-ut)/Y}:{x:tt-(Et-it)*Y,y:gt-(Et-it),width:wt+2*(Et-it)*Y,height:ht+2*(Et-it)}:null!==(E=b.mouseEvent)&&void 0!==E&&E.shiftKey||null!==(G=b.touchEvent)&&void 0!==G&&G.shiftKey?Y>=1?{x:tt+(bt-ut),y:gt,width:wt-(bt-ut),height:ht-(bt-ut)/Y}:{x:tt-(Et-it)*Y,y:gt,width:wt+(Et-it)*Y,height:ht+(Et-it)}:null!==(dt=b.mouseEvent)&&void 0!==dt&&dt.altKey||null!==(ct=b.touchEvent)&&void 0!==ct&&ct.altKey?{x:tt+(bt-ut),y:gt-(Et-it),width:wt-2*(bt-ut),height:ht+2*(Et-it)}:{x:tt+(bt-ut),y:gt,width:wt-(bt-ut),height:ht+(Et-it)};break;case"rect-bottom-right":var kt,Ct,Wt,ee,Ut,Zt,Qt,le;P=(null!==(kt=b.mouseEvent)&&void 0!==kt&&kt.shiftKey||null!==(Ct=b.touchEvent)&&void 0!==Ct&&Ct.shiftKey)&&(null!==(Wt=b.mouseEvent)&&void 0!==Wt&&Wt.altKey||null!==(ee=b.touchEvent)&&void 0!==ee&&ee.altKey)?Y>=1?{x:tt-(bt-ut),y:gt-(bt-ut)/Y,width:wt+2*(bt-ut),height:ht+2*(bt-ut)/Y}:{x:tt-(Et-it)*Y,y:gt-(Et-it),width:wt+2*(Et-it)*Y,height:ht+2*(Et-it)}:null!==(Ut=b.mouseEvent)&&void 0!==Ut&&Ut.shiftKey||null!==(Zt=b.touchEvent)&&void 0!==Zt&&Zt.shiftKey?Y>=1?{x:tt,y:gt,width:wt+(bt-ut),height:ht+(bt-ut)/Y}:{x:tt,y:gt,width:wt+(Et-it)*Y,height:ht+(Et-it)}:null!==(Qt=b.mouseEvent)&&void 0!==Qt&&Qt.altKey||null!==(le=b.touchEvent)&&void 0!==le&&le.altKey?{x:tt-(bt-ut),y:gt-(Et-it),width:wt+2*(bt-ut),height:ht+2*(Et-it)}:{x:tt,y:gt,width:wt+(bt-ut),height:ht+(Et-it)};break;default:P={x:tt+bt-ut,y:gt+Et-it,width:wt,height:ht}}P.width<0&&(P.width=0),P.height<0&&(P.height=0),P.x=(0,c.q)(P.x),P.y=(0,c.q)(P.y),P.width=(0,c.q)(P.width),P.height=(0,c.q)(P.height),Object.assign(ot,P),Object.assign(W,(0,lt.sg)(V,ot)),(0,F.__)(window.document.getElementById(N),W),(0,F.hJ)(rt,x)})(it[0][0],it[0][1],ut.x,ut.y),Mt=!0},end:(ut,it)=>{Mt&&Gt&&k.icdt.history.push([{type:"size",from:Gt,to:JSON.parse(JSON.stringify({id:N,size:ot,attribute:W}))}])}})}},2966:(ce,It,f)=>{f.d(It,{Q:()=>y});var B=f(1687),k=f(4981),lt=f(4318),T=f(6816),F=f(4080),c=f(3423),M=f(5811);const y=z=>{let x=999999,rt=999999,N=-999999,V=-999999;null==z||z.forEach(tt=>{x=Math.min(x,tt.size.x),rt=Math.min(rt,tt.size.y),N=Math.max(N,tt.size.x+tt.size.width),V=Math.max(V,tt.size.y+tt.size.height)});let ot=(0,F.g1)(B.O.SELECT_GROUP,"g"),W=(0,lt.bH)(x,rt,N,V);(0,F.yD)(ot,z,W).forEach(tt=>{R(tt.element,tt.posType,W,z,ot)})},R=(z,x,rt,N,V)=>{let ot=!1;null==z||z.addEventListener("touchstart",W=>{ot=!0,b({touchEvent:W},x,rt,N,V)}),null==z||z.addEventListener("mousedown",W=>{if(0==W.button){if(ot)return void(ot=!1);b({mouseEvent:W},x,rt,N,V)}})},b=(z,x,rt,N,V)=>{let{x:ot,y:W,width:tt,height:gt}=rt,wt=N.map(Dt=>Object.assign({},Dt.size)),Y=[];(0,T.A)(z,{start:Dt=>{N.forEach((Dt,Ht)=>{let{id:Mt,size:ut,attribute:it}=Dt;Y.push(JSON.parse(JSON.stringify({id:Mt,size:ut,attribute:it})))})},move:(Dt,Ht)=>{((Dt,Ht,Mt,zt)=>{(()=>{let ut;ut="rect-center"===x?{x:ot+Mt-Dt,y:W+zt-Ht,width:tt,height:gt}:{x:ot,y:W,width:tt,height:gt},(0,c.v)(k.icdt.screen.width),(0,c.v)(k.icdt.screen.height),ut.width<0&&(ut.width=0),ut.height<0&&(ut.height=0),Object.assign(rt,ut),(0,F.yD)(V,N,rt)})(),N.forEach((ut,it)=>{let H,{x:bt,y:Et,width:$t,height:yt}=wt[it],{id:ne,type:j,size:K,attribute:u}=ut;H="rect-center"===x?{x:bt+Mt-Dt,y:Et+zt-Ht,width:$t,height:yt}:{x:bt,y:Et,width:$t,height:yt},(0,c.v)(k.icdt.screen.width),(0,c.v)(k.icdt.screen.height),H.width<0&&(H.width=0),H.height<0&&(H.height=0),H.x=(0,M.q)(H.x),H.y=(0,M.q)(H.y),H.width=(0,M.q)(H.width),H.height=(0,M.q)(H.height),Object.assign(K,H),Object.assign(u,(0,lt.sg)(j,K)),(0,F.__)(window.document.getElementById(ne),u)})})(Ht[0][0],Ht[0][1],Dt.x,Dt.y)},end:(Dt,Ht)=>{Y.length&&k.icdt.history.push(N.map((Dt,Ht)=>{let{id:Mt,size:ut,attribute:it}=Dt;return{type:"size",from:Y[Ht],to:JSON.parse(JSON.stringify({id:Mt,size:ut,attribute:it}))}}))}})}},5226:(ce,It,f)=>{f.d(It,{E:()=>V,T:()=>ot});var B=f(1687),k=f(8619),lt=f(8785),T=f(2282),F=f(8054),c=f(4921),M=f(6358),y=f(9054),R=f(8419),b=f(1105),z=f(2875),x=f(7210),rt=f(4981),N=f(4080);const V=(W,tt)=>{var gt;if(tt&&!window.document.getElementById(tt))return;if(tt){let ht=window.document.getElementById(tt);jQuery(ht).find("#"+B.O.BACKGROUND_GROUP).empty();let Y=(0,N.g1)(B.O.BACKGROUND_GROUP,"g",void 0,ht);(0,N.x0)(Y,W)}else{jQuery(rt.icdt.target).find("#"+B.O.BACKGROUND_GROUP).empty();let ht=(0,N.g1)(B.O.BACKGROUND_GROUP,"g",void 0,rt.icdt.target);(0,N.x0)(ht,W)}let wt=(ht,Y)=>{Y=Y?parseFloat(`${tt}0${Y}`):tt,null==ht||ht.forEach(P=>{let Bt=tt?parseFloat(`${tt}0${P.id}`):P.id;var Gt;if(P.isdeleted)null===(Gt=window.document.getElementById(Bt))||void 0===Gt||Gt.remove();else switch(P.type){case y.$.GROUP:(0,M.m)(Bt,{},Y?window.document.getElementById(Y):null),wt(P.nodes,P.id);break;case y.$.CIRCLE:(0,k._)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null);break;case y.$.ELLIPSE:(0,lt.r)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null);break;case y.$.LINE:(0,c.W)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null);break;case y.$.RECT:(0,F.f)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null);break;case y.$.POLYGON:(0,T.l)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null);break;case y.$.FOREIGNOBJECT:(0,z.e)(Bt,{size:P.size,attribute:P.attribute,style:P.style,source:P.source},Y?window.document.getElementById(Y):null);break;case y.$.IMAGE:(0,x.G)(Bt,{size:P.size,attribute:P.attribute,source:P.source},Y?window.document.getElementById(Y):null);break;case y.$.TEXT:(0,b.$)(Bt,{size:P.size,attribute:P.attribute,source:P.source},Y?window.document.getElementById(Y):null);break;case y.$.PATH:(0,R.G)(Bt,{size:P.size,attribute:P.attribute},Y?window.document.getElementById(Y):null)}})};wt(null==W||null===(gt=W.svg)||void 0===gt?void 0:gt.nodes)},ot=(W,tt)=>{var gt;if(tt&&!window.document.getElementById(tt))return;let wt=(ht,Y)=>{Y=Y?parseFloat(`${tt}0${Y}`):tt,null==ht||ht.forEach(P=>{let Bt=tt?parseFloat(`${tt}0${P.id}`):P.id;jQuery("#"+Bt).appendTo(Y?window.document.getElementById(Y):rt.icdt.target),P.type==y.$.GROUP&&wt(P.nodes,P.id)})};wt(null==W||null===(gt=W.svg)||void 0===gt?void 0:gt.nodes)}},8619:(ce,It,f)=>{f.d(It,{_:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{fill:k.icdt.attribute.fill,stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth};return Object.assign(b,(0,lt.sg)(B.$.CIRCLE,R)),{nodeId:c,element:(0,T.it)(c,B.$.CIRCLE,"circle",{size:R,attribute:b},y),size:R,attribute:b}}},8785:(ce,It,f)=>{f.d(It,{r:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{fill:k.icdt.attribute.fill,stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth};return Object.assign(b,(0,lt.sg)(B.$.ELLIPSE,R)),{nodeId:c,element:(0,T.it)(c,B.$.ELLIPSE,"ellipse",{size:R,attribute:b},y),size:R,attribute:b}}},2875:(ce,It,f)=>{f.d(It,{e:()=>T});var B=f(9054),k=f(4318),lt=f(4080);const T=(F,c,M)=>{let y=(null==c?void 0:c.size)||{x:0,y:0,width:180,height:180},R=(null==c?void 0:c.attribute)||{};Object.assign(R,(0,k.sg)(B.$.FOREIGNOBJECT,y));let b=(null==c?void 0:c.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},z=(null==c?void 0:c.style)||{};return{nodeId:F,element:(0,lt.it)(F,B.$.FOREIGNOBJECT,"foreignObject",{size:y,attribute:R,style:z,source:b},M),size:y,attribute:R,style:z,source:b}}},6358:(ce,It,f)=>{f.d(It,{m:()=>T});var B=f(9054),k=f(4318),lt=f(4080);const T=(F,c,M)=>{let y=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},R=(null==c?void 0:c.attribute)||{};return Object.assign(R,(0,k.sg)(B.$.GROUP,y)),{nodeId:F,element:(0,lt.it)(F,B.$.GROUP,"g",{size:y,attribute:R},M),size:y,attribute:R}}},7210:(ce,It,f)=>{f.d(It,{G:()=>T});var B=f(9054),k=f(4318),lt=f(4080);const T=(F,c,M)=>{let y=(null==c?void 0:c.size)||{x:0,y:0,width:200,height:100},R=(null==c?void 0:c.attribute)||{preserveAspectRatio:"none"};Object.assign(R,(0,k.sg)(B.$.IMAGE,y));let b=(null==c?void 0:c.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:F,element:(0,lt.it)(F,B.$.IMAGE,"image",{size:y,attribute:R,source:b},M),size:y,attribute:R,source:b}}},4921:(ce,It,f)=>{f.d(It,{W:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth,strokeLinecap:k.icdt.attribute.strokeLinecap};return Object.assign(b,(0,lt.sg)(B.$.LINE,R)),{nodeId:c,element:(0,T.it)(c,B.$.LINE,"line",{size:R,attribute:b},y),size:R,attribute:b}}},8419:(ce,It,f)=>{f.d(It,{G:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth};return Object.assign(b,(0,lt.sg)(B.$.PATH,R)),{nodeId:c,element:(0,T.it)(c,B.$.PATH,"path",{size:R,attribute:b},y),size:R,attribute:b}}},2282:(ce,It,f)=>{f.d(It,{l:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{fill:k.icdt.attribute.fill,stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth};return Object.assign(b,(0,lt.sg)(B.$.POLYGON,R)),{nodeId:c,element:(0,T.it)(c,B.$.POLYGON,"polygon",{size:R,attribute:b},y),size:R,attribute:b}}},8054:(ce,It,f)=>{f.d(It,{f:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:10,height:10},b=(null==M?void 0:M.attribute)||{fill:k.icdt.attribute.fill,stroke:k.icdt.attribute.stroke,strokeWidth:k.icdt.attribute.strokeWidth};return Object.assign(b,(0,lt.sg)(B.$.RECT,R)),{nodeId:c,element:(0,T.it)(c,B.$.RECT,"rect",{size:R,attribute:b},y),size:R,attribute:b}}},1105:(ce,It,f)=>{f.d(It,{$:()=>F});var B=f(9054),k=f(4981),lt=f(4318),T=f(4080);const F=(c,M,y)=>{let R=(null==M?void 0:M.size)||{x:0,y:0,width:100,height:50},b=(null==M?void 0:M.attribute)||{fill:k.icdt.attribute.stroke,fontFamily:k.icdt.attribute.fontFamily,fontSize:k.icdt.attribute.fontSize,textLength:k.icdt.attribute.textLength};Object.assign(b,(0,lt.sg)(B.$.TEXT,R));let z=(null==M?void 0:M.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:c,element:(0,T.it)(c,B.$.TEXT,"text",{size:R,attribute:b,source:z},y),size:R,attribute:b,source:z}}},4318:(ce,It,f)=>{f.d(It,{bH:()=>k,sg:()=>lt});var B=f(9054);const k=(F,c,M,y,R)=>{let b={x:Math.min(F,M),y:Math.min(c,y),width:Math.abs(M-F)||1,height:Math.abs(y-c)||1};return null!=R&&R.ratio&&(b.width<=b.height?b.height=b.width*(null==R?void 0:R.ratio):b.width=b.height/(null==R?void 0:R.ratio)),Object.assign(b,{ratios:(null==R?void 0:R.ratios)||[[(F-b.x)/(b.width||1),(c-b.y)/(b.height||1)],[(M-b.x)/(b.width||1),(y-b.y)/(b.height||1)]]}),null!=R&&R.points&&(b.points=null==R?void 0:R.points),b},lt=(F,c,M)=>{var y=(()=>{switch(F){case B.$.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case B.$.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case B.$.LINE:{var R;let x={};return null===(R=c.ratios)||void 0===R||R.forEach((rt,N)=>{x[`x${N+1}`]=c.x+c.width*rt[0],x[`y${N+1}`]=c.y+c.height*rt[1]}),x}case B.$.RECT:return{x:c.x,y:c.y,width:c.width,height:c.height};case B.$.POLYGON:var b;return{points:((null===(b=c.ratios)||void 0===b?void 0:b.map(x=>[c.x+c.width*x[0],c.y+c.height*x[1]]))||[]).map(x=>x.join(" ")).join(",")};case B.$.FOREIGNOBJECT:case B.$.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case B.$.TEXT:return{x:c.x,y:c.y};case B.$.PATH:{var z;let x=null!==(z=c.points)&&void 0!==z?z:[];return x.length?{d:`M ${x[0][0]} ${x[0][1]} L `+(x.map(rt=>[rt[0],rt[1]])||[]).map(rt=>rt.join(" ")).join(" ")}:{d:""}}}return{}})();return c.rotate?(y.transform=`rotate(${c.rotate})`,y.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):(y.transform=null,y.transformOrigin=null),y}},5811:(ce,It,f)=>{f.d(It,{q:()=>B});const B=(k,lt)=>{var T;return lt=null!==(T=lt)&&void 0!==T?T:100,Math.round((k+Number.EPSILON)*lt)/lt}},3423:(ce,It,f)=>{f.d(It,{v:()=>lt});var B=f(4981),k=f(5811);const lt=T=>(0,k.q)(T/B.icdt.screen.scale)},3385:(ce,It,f)=>{f.d(It,{Vs:()=>y,co:()=>c,k6:()=>F,lO:()=>M,mr:()=>R});var B=f(4981),k=f(4080),lt=f(4318),T=f(5811);const F=(b,z)=>{let{id:x,type:rt,size:N,attribute:V}=b,ot=JSON.parse(JSON.stringify({id:x,size:N,attribute:V}));N.x=(0,T.q)(z),Object.assign(V,(0,lt.sg)(rt,N)),(0,k.__)(window.document.getElementById(x),V),B.icdt.history.push([{type:"size",from:ot,to:JSON.parse(JSON.stringify({id:x,size:N,attribute:V}))}])},c=(b,z)=>{let{id:x,type:rt,size:N,attribute:V}=b,ot=JSON.parse(JSON.stringify({id:x,size:N,attribute:V}));N.y=(0,T.q)(z),Object.assign(V,(0,lt.sg)(rt,N)),(0,k.__)(window.document.getElementById(x),V),B.icdt.history.push([{type:"size",from:ot,to:JSON.parse(JSON.stringify({id:x,size:N,attribute:V}))}])},M=(b,z,x)=>{let{id:rt,type:N,size:V,attribute:ot}=b,W=JSON.parse(JSON.stringify({id:rt,size:V,attribute:ot}));x&&(V.height=(0,T.q)(z*V.height/V.width)),V.width=(0,T.q)(z),Object.assign(ot,(0,lt.sg)(N,V)),(0,k.__)(window.document.getElementById(rt),ot),B.icdt.history.push([{type:"size",from:W,to:JSON.parse(JSON.stringify({id:rt,size:V,attribute:ot}))}])},y=(b,z,x)=>{let{id:rt,type:N,size:V,attribute:ot}=b,W=JSON.parse(JSON.stringify({id:rt,size:V,attribute:ot}));x&&(V.width=(0,T.q)(z*V.width/V.height)),V.height=(0,T.q)(z),Object.assign(ot,(0,lt.sg)(N,V)),(0,k.__)(window.document.getElementById(rt),ot),B.icdt.history.push([{type:"size",from:W,to:JSON.parse(JSON.stringify({id:rt,size:V,attribute:ot}))}])},R=(b,z)=>{let{id:x,type:rt,size:N,attribute:V}=b,ot=JSON.parse(JSON.stringify({id:x,size:N,attribute:V}));N.rotate=(0,T.q)(z),Object.assign(V,(0,lt.sg)(rt,N)),(0,k.__)(window.document.getElementById(x),V),B.icdt.history.push([{type:"size",from:ot,to:JSON.parse(JSON.stringify({id:x,size:N,attribute:V}))}])}},6816:(ce,It,f)=>{f.d(It,{A:()=>c});var B=f(968),k=f(4981);class lt{constructor(y){this._points=[],this._options=y}start(y){this._points.length=0,this._points.push([y.x,y.y]),this._options.start(y)}move(y){this._points.push([y.x,y.y]),this._options.move(y,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(y=this._points[0])[0],y:y[1]}:{x:0,y:0};var y}get offsetLast(){return this._points.length>=1?{x:(y=this._points[this._points.length-1])[0],y:y[1]}:{x:0,y:0};var y}}var T=f(7797);const c=(M,y,R,b,z)=>{var x,rt,N;let V=null,ot=0,W=0;M.mouseEvent?(V=M.mouseEvent.target,ot=M.mouseEvent.offsetX,W=M.mouseEvent.offsetY):M.touchEvent&&(V=M.touchEvent.target,M.touchEvent.touches.length&&(ot=M.touchEvent.touches[0].clientX,W=M.touchEvent.touches[0].clientY));let tt=null!=R?R:k.icdt.screen.scale,gt=null!=b?b:k.icdt.screen.dislocation,wt=null!=z?z:k.icdt.screen.offset,ht=()=>{};var Y=new lt({start:null!==(x=null==y?void 0:y.start)&&void 0!==x?x:ht,move:null!==(rt=null==y?void 0:y.move)&&void 0!==rt?rt:ht,end:null!==(N=null==y?void 0:y.end)&&void 0!==N?N:ht});M.mouseEvent?Y.start((0,T.p)({x:ot,y:W},tt,gt,{x:0,y:0})):M.touchEvent&&Y.start((0,T.p)({x:ot,y:W},tt,gt,wt));let P=ut=>{Y.move((0,T.p)({x:ut.clientX,y:ut.clientY},tt,gt,wt))},Bt=ut=>{Y.end(),[B._.SHAPE,B._.FOREIGNOBJECT,B._.IMAGE,B._.TEXT].includes(k.icdt.pointer.pointer_type)&&(ut.shiftKey||(k.icdt.pointer.pointer_type=B._.POINTER))},Gt=ut=>{ut.touches.length&&P({clientX:ut.touches[0].clientX,clientY:ut.touches[0].clientY})},Dt=ut=>{Bt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("touchmove",Gt,!1),window.removeEventListener("touchend",Dt,!1)},Ht=ut=>{0==ut.button&&P({clientX:ut.clientX,clientY:ut.clientY})},Mt=ut=>{0==ut.button&&(Bt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("mousemove",Ht,!1),window.removeEventListener("mouseup",Mt,!1))};if(M.mouseEvent)window.addEventListener("mousemove",Ht,!1),window.addEventListener("mouseup",Mt,!1);else if(M.touchEvent){var zt;window.addEventListener("touchmove",Gt,!1),window.addEventListener("touchend",Dt,!1),null===(zt=V)||void 0===zt||zt.addEventListener("touchmove",function(ut){ut.preventDefault()})}}},7797:(ce,It,f)=>{f.d(It,{p:()=>k});var B=f(5811);const k=(lt,T,F,c)=>(lt.x-=c.x,lt.y-=c.y,lt.x/=T,lt.y/=T,lt.x-=F.x,lt.y-=F.y,lt.x=(0,B.q)(lt.x),lt.y=(0,B.q)(lt.y),lt)},1690:(ce,It,f)=>{f.d(It,{$:()=>Tt});var B=f(1687),k=f(4981),lt=f(9054),T=f(5973),F=f(2336),c=f(861),M=f(157),y=f(4787),b=f(1105),z=f(6358);const tt=function(J){var h,U,st=jQuery("#"+J),et=null===(h=st.attr("class"))||void 0===h?void 0:h.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),O=null===(U=st.attr("class"))||void 0===U?void 0:U.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);et&&et.forEach(function(G){jQuery(st).removeClass(G)}),O&&O.forEach(function(G){jQuery(st).removeClass(G)});let E=st.attr("data-class");E&&(st.attr("class",E),st.removeAttr("data-class")),jQuery(st).data("animation-running",!1)};var gt=f(7210),wt=f(5811);const ht=(J,h,U)=>{var st,et,O,E;let G=1,dt=new Image;dt.onload=()=>{var ct,kt,Ct,Wt;G=(0,wt.q)(dt.naturalWidth/dt.naturalHeight,100);let ee=0,Ut=0,Zt=0,Qt=0;var le,ae,oe,pe;G>=1?(Zt=Math.min(dt.naturalWidth,null!==(le=null===(ae=Tt.slide.svg)||void 0===ae||null===(ae=ae.viewBox)||void 0===ae?void 0:ae.width)&&void 0!==le?le:0),Qt=Zt/G):(Qt=Math.min(dt.naturalHeight,null!==(oe=null===(pe=Tt.slide.svg)||void 0===pe||null===(pe=pe.viewBox)||void 0===pe?void 0:pe.height)&&void 0!==oe?oe:0),Zt=Qt/G),ee=((null!==(ct=null===(kt=Tt.slide.svg)||void 0===kt||null===(kt=kt.viewBox)||void 0===kt?void 0:kt.width)&&void 0!==ct?ct:0)-Zt)/2,Ut=((null!==(Ct=null===(Wt=Tt.slide.svg)||void 0===Wt||null===(Wt=Wt.viewBox)||void 0===Wt?void 0:Wt.height)&&void 0!==Ct?Ct:0)-Qt)/2,h.size={x:ee,y:Ut,width:Zt,height:Qt},Y(h,U)},dt.onerror=ct=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,ct)},dt.src=null!==(st=null!==(et=null===(O=h.source)||void 0===O?void 0:O.url)&&void 0!==et?et:null===(E=h.source)||void 0===E?void 0:E.path)&&void 0!==st?st:""},Y=(J,h)=>{if(J.slideStatus!=Tt.slideStatus)return void h();let{element:U}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:J.size,source:{type:"image",image:null==J?void 0:J.source}});setTimeout(()=>{null==U||U.remove(),h()},3e3)},P=(J,h,U)=>{var st,et,O,E;let G=new Image;G.onload=()=>{Bt(J,{width:G.naturalWidth,height:G.naturalHeight},h,U)},G.onerror=dt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,dt),U()},G.src=null!==(st=null!==(et=null===(O=h.source)||void 0===O?void 0:O.url)&&void 0!==et?et:null===(E=h.source)||void 0===E?void 0:E.path)&&void 0!==st?st:""},Bt=(J,h,U,st)=>{if(U.slideStatus!=Tt.slideStatus)return void st();let et=(0,wt.q)(h.width/h.height,100),O=0,E=0,G=0,dt=0;et>=1?(G=h.width,G=Math.max(G,40),G=Math.min(G,100),dt=G/et):(dt=h.height,dt=Math.max(dt,40),dt=Math.min(dt,100),G=dt/et);let{size:ct}=J;O=ct.x+ct.width/2-G/2,E=ct.y+ct.height/2-dt/2;let{element:kt}=(0,gt.G)(Math.ceil(1e9*Math.random()),{size:{x:O,y:E,width:G,height:dt},source:{type:"image",image:null==U?void 0:U.source}});setTimeout(()=>{null==kt||kt.remove(),st()},3e3)};var Gt=f(4080);const Dt=(J,h,U)=>{var st,et,O;if(h.slideStatus!=Tt.slideStatus)return void U();if(null===(st=h.source)||void 0===st||!st.url)return console.warn(`${J.id} -> audio no source!`),void U();var E=jQuery("#"+J.id);let G=null!==(et=h.iteration)&&void 0!==et?et:0;if(G<0&&(U(),U=function(){}),!(E.data("audio-running")&&G<0)){E.data("audio-running",!0);var dt=new Audio;return dt.autoplay=!0,dt.loop=0!=G,dt.preload="auto",dt.controls=!0,dt.setAttributeNode(document.createAttribute("playsinline")),dt.addEventListener("canplay",function(){var ct=dt.play();ct&&ct.then(function(kt){E.data("audio-running",!0)}).catch(function(kt){E.data("audio-running",!1),h.slideStatus===Tt.slideStatus&&U()})}),dt.addEventListener("timeupdate",function(){var kt;h.slideStatus!==Tt.slideStatus&&((kt=this).pause(),kt.remove(),E.data("audio-running",!1))}),dt.addEventListener("canplaythrough",function(){this.loop&&(G>0?G--:0==G&&(this.loop=!1))}),dt.addEventListener("play",function(){}),dt.addEventListener("pause",function(){}),dt.addEventListener("ended",function(){this.remove(),E.data("audio-running",!1),h.slideStatus===Tt.slideStatus&&U()}),dt.onerror=function(){this.remove(),E.data("audio-running",!1),h.slideStatus===Tt.slideStatus&&U()},dt.src=(null===(O=h.source)||void 0===O?void 0:O.url)||"",dt}};var Ht=f(9942);const Et=(J,h,U)=>{var st;null===(st=h.test)||void 0===st||null===(st=st.answer)||void 0===st||null===(st=st.matching)||void 0===st||st.filter(et=>et.value==U.key).forEach(et=>et.value="")},yt=(J,h,U,st,et,O)=>{var E,G,dt,ct,kt,Ct,Wt,ee,Ut,Zt,Qt,le;et.iscorrect?(null!==(E=h.test)&&void 0!==E&&null!==(E=E.audiotrue)&&void 0!==E&&E.path&&Dt(J,{source:(0,Ht.I)(null===(ct=h.test)||void 0===ct?void 0:ct.audiotrue),iteration:0,nodeStatus:U,slideStatus:st},O),null!==(G=h.test)&&void 0!==G&&null!==(G=G.icontrue)&&void 0!==G&&G.path&&P(J,{source:(0,Ht.I)(null===(kt=h.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:U,slideStatus:st},O),null!==(dt=h.test)&&void 0!==dt&&null!==(dt=dt.effecttrue)&&void 0!==dt&&dt.path&&ht(0,{source:(0,Ht.I)(null===(Ct=h.test)||void 0===Ct?void 0:Ct.effecttrue),iteration:0,nodeStatus:U,slideStatus:st},O)):(null!==(Wt=h.test)&&void 0!==Wt&&null!==(Wt=Wt.audiofalse)&&void 0!==Wt&&Wt.path&&Dt(J,{source:(0,Ht.I)(null===(Zt=h.test)||void 0===Zt?void 0:Zt.audiofalse),iteration:0,nodeStatus:U,slideStatus:st},O),null!==(ee=h.test)&&void 0!==ee&&null!==(ee=ee.iconfalse)&&void 0!==ee&&ee.path&&P(J,{source:(0,Ht.I)(null===(Qt=h.test)||void 0===Qt?void 0:Qt.iconfalse),iteration:0,nodeStatus:U,slideStatus:st},O),null!==(Ut=h.test)&&void 0!==Ut&&null!==(Ut=Ut.effectfalse)&&void 0!==Ut&&Ut.path&&ht(0,{source:(0,Ht.I)(null===(le=h.test)||void 0===le?void 0:le.effectfalse),iteration:0,nodeStatus:U,slideStatus:st},O))},ne=(J,h,U,st)=>{var et,O,E,G,dt,ct;null!==(et=h.animate)&&void 0!==et&&et.value&&((J,h,U)=>{var st;let{value:O}=null!==(st=J.animate)&&void 0!==st?st:{};((J,h,U)=>{var st;let et=jQuery("#"+J),O="",E=null!==(st=h.iteration)&&void 0!==st?st:0,G=[];(h.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?G.push(h.value):h.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(h.value)?(G.push("animation"),G.push(`animation-${h.value}`)):(G.push("animate__animated"),G.push(`animate__${h.value}`)):(G.push("animation"),G.push("animation-fadein")),E<0?(G.push("animation-iteration-infinite"),U(),U=function(){}):E>0&&G.push("animation-iteration-"+(E+1)),O=G.join(" "),function(ct){let kt=function(){et.data("animate-running")?et.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){et.data("animate-running",!1),setTimeout(function(){ct()},100)}):ct()};et.hasClass("animation")?setTimeout(function(){kt()}):kt()}(function(){var ct;tt(J),(E>0||E<0)&&et.one("animationiteration",function(){h.slideStatus===Tt.slideStatus||(et.data("animate-running",!1),tt(J),h.slideStatus===Tt.slideStatus&&U())}),et.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(et.data("animate-running",!1),tt(J),h.finish){default:case 0:case 1:break;case 2:et.addClass("hide")}h.slideStatus===Tt.slideStatus&&U()}),et.attr("data-class",null!==(ct=et.attr("class"))&&void 0!==ct?ct:""),et.addClass(O),et.data("animate-running",!0)})})(J.id,{value:O,nodeStatus:h,slideStatus:U},()=>{})})(h,U.nodeStatus,U.slideStatus),null!==(O=h.interactive)&&void 0!==O&&O.show?((J,h,U,st)=>{var et,O,E;console.log("icdt_Run_Interactive_NodeShow",J,h,U);let G={total:0,counter:0},{triggershow:dt,triggerrun:ct,triggerhide:kt,action:Ct,audio:Wt}=null!==(et=null===(O=J.interactive)||void 0===O?void 0:O.show)&&void 0!==et?et:{};if(dt){let{id:Ut,ids:Zt,time:Qt,async:le}=dt;"asynctrue"==le?setTimeout(()=>{(0,y.L5)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}):"time"==le&&setTimeout(()=>{(0,y.L5)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})},1e3*(null!=Qt?Qt:0))}if(ct){let{id:Ut,ids:Zt,time:Qt,async:le}=ct;"asynctrue"==le?setTimeout(()=>{(0,y.Ar)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}):"time"==le&&setTimeout(()=>{(0,y.Ar)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})},1e3*(null!=Qt?Qt:0))}if(kt){let{id:Ut,ids:Zt,time:Qt,async:le}=kt;"asynctrue"==le?setTimeout(()=>{(0,y.WT)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}):"time"==le&&setTimeout(()=>{(0,y.WT)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})},1e3*(null!=Qt?Qt:0))}let ee=()=>{setTimeout(()=>{if(G.counter>=G.total){if(st&&st(),dt){let{id:Ut,ids:Zt,async:Qt}=dt;"asyncfalse"==Qt&&(0,y.L5)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}if(ct){let{id:Ut,ids:Zt,async:Qt}=ct;"asyncfalse"==Qt&&(0,y.Ar)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}if(kt){let{id:Ut,ids:Zt,async:Qt}=kt;"asyncfalse"==Qt&&(0,y.WT)({id:Ut,ids:Zt,nodeStatus:h,slideStatus:U})}}})};if(null!=Ct&&Ct.value){G.total+=1;let Ut=()=>{G.counter+=1,ee()};switch(null==Ct?void 0:Ct.value){case"hide":jQuery("#"+J.id).addClass("hide"),Ut();break;case"points":{let{points:Zt,time:Qt,iteration:le,finish:ae}=Ct;(0,c.G)(J.id,{points:Zt,time:Qt,iteration:le,finish:ae,nodeStatus:h,slideStatus:U},Ut);break}default:{let{value:Zt,time:Qt,iteration:le,finish:ae}=Ct;(0,F.Q)(J.id,{value:Zt,time:Qt,iteration:le,finish:ae,nodeStatus:h,slideStatus:U},Ut);break}}}if(null!=Wt&&null!==(E=Wt.source)&&void 0!==E&&E.path){G.total+=1;let Ut=()=>{G.counter+=1,ee()};(0,M.R)(J.id,Wt,G,{nodeStatus:h,slideStatus:U},Ut)}G.total||ee()})(h,U.nodeStatus,U.slideStatus,st):st&&st(),null!==(E=h.interactive)&&void 0!==E&&E.click&&jQuery("#"+h.id).click(kt=>{var Ct;kt.preventDefault(),null!==(Ct=h.interactive)&&void 0!==Ct&&null!==(Ct=Ct.click)&&void 0!==Ct&&Ct.action&&jQuery("#"+h.id).addClass("interactive-click"),U.nodeStatus=Tt.refreshNodeStatus(),(0,T.F)(h,U.nodeStatus,U.slideStatus)}),null!==(G=h.variable)&&void 0!==G&&G.input&&jQuery("#"+h.id).on("change","input,textarea",kt=>{kt.preventDefault(),((J,h,U)=>{var st,et;k.icdt.variable.setValue(null!==(st=null===(et=h.variable)||void 0===et||null===(et=et.input)||void 0===et?void 0:et.variable)&&void 0!==st?st:"",J),(J=>{var h;let U=(st,et)=>{null==st||st.forEach(O=>{switch(O.type){case lt.$.GROUP:(0,z.m)(O.id,{},et?window.document.getElementById(et):null),U(O.nodes,O.id);break;case lt.$.POLYGON:break;case lt.$.TEXT:(0,b.$)(O.id,{size:O.size,attribute:O.attribute,source:O.source},et?window.document.getElementById(et):null)}})};U(null===(h=J.svg)||void 0===h?void 0:h.nodes)})(U)})(kt.target.value,h,J)}),null!==(dt=h.variable)&&void 0!==dt&&dt.click&&jQuery("#"+h.id).click(kt=>{var Ct;kt.preventDefault(),null!==(Ct=h.variable)&&void 0!==Ct&&null!==(Ct=Ct.click)&&void 0!==Ct&&Ct.variable&&jQuery("#"+h.id).addClass("variable-click"),((J,h)=>{var U;k.icdt.variable.setValueOperator(null===(U=J.variable)||void 0===U?void 0:U.click),(J=>{var h;let U=(st,et)=>{null==st||st.forEach(O=>{switch(O.type){case lt.$.GROUP:(0,z.m)(O.id,{},et?window.document.getElementById(et):null),U(O.nodes,O.id);break;case lt.$.POLYGON:break;case lt.$.TEXT:(0,b.$)(O.id,{size:O.size,attribute:O.attribute,source:O.source},et?window.document.getElementById(et):null)}})};U(null===(h=J.svg)||void 0===h?void 0:h.nodes)})(h)})(h,J)}),"test"==(null===(ct=h.source)||void 0===ct?void 0:ct.type)&&((J,h)=>{var U;let st=()=>{};switch(null===(U=J.source)||void 0===U||null===(U=U.test)||void 0===U?void 0:U.type){case"singlechoice":jQuery("#"+J.id).click(O=>{O.preventDefault(),((J,h,U,st,et)=>{var O,E;let G=null===(O=J.source)||void 0===O||null===(O=O.test)||void 0===O||null===(O=O.singlechoice)||void 0===O?void 0:O.iscorrect;if(null!==(E=h.svg)&&void 0!==E&&E.nodes.find(dt=>{var ct;return"submit"==(null===(ct=dt.source)||void 0===ct||null===(ct=ct.test)||void 0===ct?void 0:ct.type)})||yt(J,h,U,st,{iscorrect:G},et),h.test?h.test.answer?h.test.answer.singlechoice={value:J.id,iscorrect:G}:h.test.answer={singlechoice:{value:J.id,iscorrect:G}}:h.test={answer:{singlechoice:{value:J.id,iscorrect:G}}},h.test.showselection){let dt=(0,Gt.g1)(B.O.TEST_GROUP,"g",void 0,k.icdt.target);(0,Gt.Yw)(dt,h)}console.log("node source ->",J.source),console.log("slide test ->",h.test)})(J,h,Tt.nodeStatus,Tt.slideStatus,st)});break;case"multichoice":jQuery("#"+J.id).click(O=>{O.preventDefault(),((J,h,U,st,et)=>{var O,E;let dt,G=null===(O=J.source)||void 0===O||null===(O=O.test)||void 0===O||null===(O=O.multichoice)||void 0===O?void 0:O.iscorrect;if(null!==(E=h.svg)&&void 0!==E&&E.nodes.find(ct=>{var kt;return"submit"==(null===(kt=ct.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||yt(J,h,U,st,{iscorrect:G},et),h.test?h.test.answer?h.test.answer.multichoice?h.test.answer.multichoice.find(ct=>ct.value==J.id)?(h.test.answer.multichoice=h.test.answer.multichoice.filter(ct=>ct.value!=J.id),dt=!0):h.test.answer.multichoice.push({value:J.id,iscorrect:G}):h.test.answer.multichoice=[{value:J.id,iscorrect:G}]:h.test.answer={multichoice:[{value:J.id,iscorrect:G}]}:h.test={answer:{multichoice:[{value:J.id,iscorrect:G}]}},h.test.showselection){let ct=(0,Gt.g1)(B.O.TEST_GROUP,"g",void 0,k.icdt.target);(0,Gt.Yw)(ct,h)}console.log("node source ->",J.source),console.log("slide test ->",h.test)})(J,h,Tt.nodeStatus,Tt.slideStatus,st)});break;case"fill":var et;jQuery("#"+J.id).on("keyup",'input[type="text"]',O=>{var E;let G=jQuery("<div/>").css({"font-size":jQuery(O.target).css("font-size"),visibility:"hidden",float:"left"}).text(O.target.value).appendTo(window.document.body);jQuery(O.target).css({width:(null!==(E=G.width())&&void 0!==E?E:0)+30})}).on("keypress",'input[type="text"]',O=>{13===(O.keyCode||O.charCode||O.which)&&(O.preventDefault(),O.stopPropagation(),jQuery(O.target).blur())}).on("change",'input[type="text"]',O=>{var E,G;let dt=Tt.nodeStatus,ct=Tt.slideStatus,kt=null===(E=O.target)||void 0===E?void 0:E.getAttribute("data-key"),Ct=null===(G=O.target)||void 0===G||null===(G=G.value)||void 0===G||null===(G=G.toLowerCase())||void 0===G?void 0:G.trim();((J,h,U,st,et,O)=>{var E,G,dt;let{value:ct}=null!==(E=null===(G=J.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.fill)||void 0===G?void 0:G.find(Ct=>Ct.key==`[[${et.key}]]`))&&void 0!==E?E:{},kt=ct&&ct.includes(et.value);null!==(dt=h.svg)&&void 0!==dt&&dt.nodes.find(Ct=>{var Wt;return"submit"==(null===(Wt=Ct.source)||void 0===Wt||null===(Wt=Wt.test)||void 0===Wt?void 0:Wt.type)})||yt(J,h,U,st,{iscorrect:kt},O),et.iscorrect=kt,h.test?h.test.answer?h.test.answer.fill?h.test.answer.fill.find(Ct=>Ct.key==et.key)?h.test.answer.fill.filter(Ct=>Ct.key==et.key).forEach(Ct=>{Ct.value=et.value,Ct.iscorrect=et.iscorrect}):h.test.answer.fill.push(et):h.test.answer.fill=[et]:h.test.answer={fill:[et]}:h.test={answer:{fill:[et]}},console.log("node source ->",J.source),console.log("slide test ->",h.test)})(J,h,dt,ct,{key:kt,value:Ct},st),jQuery("#"+J.id).find(`input[type="text"][data-key="${kt}"]`).val(Ct)}),null!==(et=h.test)&&void 0!==et&&et.showselection||jQuery("#"+J.id).addClass("hide-selection");break;case"matching-empty":jQuery("#"+J.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="width:64px;height:${J.size.height/J.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var E;jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(E=h.test)&&void 0!==E&&E.showselection||jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("hide-selection")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${J.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let E=O.dropTarget,G=O.draggable.currentTarget;E.is(":empty")||E.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),G.appendTo(E),((J,h,U,st,et,O)=>{var E,G,dt;let{key:ct}=null!==(E=null===(G=J.source)||void 0===G||null===(G=G.test)||void 0===G?void 0:G.matching)&&void 0!==E?E:{key:"KIEN"},kt=et.key==ct;null!==(dt=h.svg)&&void 0!==dt&&dt.nodes.find(Wt=>{var ee;return"submit"==(null===(ee=Wt.source)||void 0===ee||null===(ee=ee.test)||void 0===ee?void 0:ee.type)})||yt(J,h,U,st,{iscorrect:kt},O),Et(J,h,et);let Ct={key:null!=ct?ct:"",value:et.key};h.test?h.test.answer?h.test.answer.matching?h.test.answer.matching.find(Wt=>Wt.key==ct)?h.test.answer.matching.filter(Wt=>Wt.key==ct).forEach(Wt=>Wt.value=Ct.value):h.test.answer.matching.push(Ct):h.test.answer.matching=[Ct]:h.test.answer={matching:[Ct]}:h.test={answer:{matching:[Ct]}},console.log("node source ->",J.source),console.log("slide test ->",h.test)})(J,h,Tt.nodeStatus,Tt.slideStatus,{key:G.data("key")},st)}});break;case"matching-content":jQuery("#"+J.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="width:64px;height:${J.size.height/J.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var E;jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(E=h.test)&&void 0!==E&&E.showselection||jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("hide-selection")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${J.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let G=O.draggable.currentTarget;G.appendTo(O.dropTarget),Et(J,h,{key:G.data("key")})}});break;case"speech":break;case"submit":jQuery("#"+J.id).click(O=>{O.preventDefault(),((J,h,U,st,et)=>{var O,E,G,dt;let ct;var kt;if(null!=h&&null!==(O=h.test)&&void 0!==O&&null!==(O=O.answer)&&void 0!==O&&O.singlechoice)ct=null==h||null===(kt=h.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.singlechoice)||void 0===kt?void 0:kt.iscorrect;else if(null!=h&&null!==(E=h.test)&&void 0!==E&&null!==(E=E.answer)&&void 0!==E&&E.multichoice){var Ct,Wt,ee;ct=1==[null==h||null===(Ct=h.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||null===(Ct=Ct.multichoice)||void 0===Ct?void 0:Ct.length,null==h||null===(Wt=h.test)||void 0===Wt||null===(Wt=Wt.answer)||void 0===Wt||null===(Wt=Wt.multichoice)||void 0===Wt||null===(Wt=Wt.map(ae=>ae.iscorrect?1:0))||void 0===Wt?void 0:Wt.reduce((ae,oe)=>ae+oe),null==h||null===(ee=h.svg)||void 0===ee||null===(ee=ee.nodes)||void 0===ee||null===(ee=ee.filter(ae=>{var oe,pe;return"multichoice"==(null===(oe=ae.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)&&(null===(pe=ae.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===ee?void 0:ee.length].filter((ae,oe,pe)=>pe.indexOf(ae)==oe).length}else if(null!=h&&null!==(G=h.test)&&void 0!==G&&null!==(G=G.answer)&&void 0!==G&&G.fill){var Ut,Zt;ct=(null==h||null===(Ut=h.test)||void 0===Ut||null===(Ut=Ut.answer)||void 0===Ut||null===(Ut=Ut.fill)||void 0===Ut||null===(Ut=Ut.map(ae=>ae.iscorrect?1:0))||void 0===Ut?void 0:Ut.reduce((ae,oe)=>ae+oe))==(null===(Zt=h.svg)||void 0===Zt||null===(Zt=Zt.nodes)||void 0===Zt||null===(Zt=Zt.filter(ae=>{var oe;return"fill"==(null===(oe=ae.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)}))||void 0===Zt?void 0:Zt.length)}else if(null!=h&&null!==(dt=h.test)&&void 0!==dt&&null!==(dt=dt.answer)&&void 0!==dt&&dt.matching){var Qt,le;ct=(null===(Qt=h.svg)||void 0===Qt||null===(Qt=Qt.nodes)||void 0===Qt||null===(Qt=Qt.filter(ae=>{var oe;return"matching-empty"==(null===(oe=ae.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)}))||void 0===Qt?void 0:Qt.length)==((null==h||null===(le=h.test)||void 0===le||null===(le=le.answer)||void 0===le?void 0:le.matching)||[]).map(ae=>ae.key==ae.value?1:0).reduce((ae,oe)=>ae+oe)}yt(J,h,U,st,{iscorrect:ct},et),console.log("node source ->",J.source),console.log("slide test ->",h.test)})(J,h,Tt.nodeStatus,Tt.slideStatus,st)})}})(h,J)};var j=f(8619),K=f(8785),u=f(4921),H=f(8054),ft=f(2282),vt=f(2875),Ot=f(8419);const Rt=(J,h,U)=>{if(U.slideStatus!=Tt.slideStatus||!h.length)return;let st=h.shift(),et=J.filter(dt=>dt.idx==st);if(!et.length)return;let O=Math.max.apply(null,et.map(dt=>{var ct;return null!==(ct=dt.time)&&void 0!==ct?ct:0})),E=!1,G=O<.5?0:setTimeout(()=>{E||(E=!0,Rt(J,h,U))},1e3*O);_t(J,h,et,0,U,{idx:st,total:et.length,counter:0,isRecursive:E,timeoutRecursive:G,maxTimeCoundown:O,uid:Math.floor(1e9*Math.random())})},_t=(J,h,U,st,et,O)=>{if(et.slideStatus!=Tt.slideStatus)return;let E=U[st];if(E){switch(E.type){case lt.$.GROUP:break;case lt.$.CIRCLE:(0,j._)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.ELLIPSE:(0,K.r)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.LINE:(0,u.W)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.RECT:(0,H.f)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.POLYGON:(0,ft.l)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.FOREIGNOBJECT:(0,vt.e)(E.id,{size:E.size,attribute:E.attribute,style:E.style,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.IMAGE:(0,gt.G)(E.id,{size:E.size,attribute:E.attribute,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.TEXT:(0,b.$)(E.id,{size:E.size,attribute:E.attribute,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.$.PATH:(0,Ot.G)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null)}ne(et.slide,E,et,()=>{O.counter+=1,O.maxTimeCoundown<.5&&O.counter>=O.total&&(O.total=O.counter=0,O.isRecursive||(clearTimeout(O.timeoutRecursive),O.isRecursive=!0,setTimeout(()=>{Rt(J,h,et)},250)))}),_t(J,h,U,++st,et,O)}},Tt=new class xt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(h){this._dataSource=h.data||{},k.icdt.variable.set=h.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var h,U;return null!==(h=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.length)&&void 0!==h?h:0}get slides(){var h;return(null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[]}get slide(){var h;return((null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[])[this._slideIdx]||{}}findNode(h){var U;let st=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.find((Wt,ee)=>ee==this._slideIdx),et=null==st?void 0:st.svg,O=(Wt,ee)=>{let Ut=null==Wt?void 0:Wt.find(le=>le.id==h);if(Ut)return Ut.pid=ee,Ut;let Zt=0,Qt=Wt.length||0;for(;Zt<Qt&&!Ut&&(Ut=O(Wt[Zt].nodes||[],Wt[Zt].id),!Ut);)Zt++;return Ut},E=O((null==et?void 0:et.nodes)||[]);var G,dt,ct,kt,Ct;return E?(E.style=null!==(G=E.style)&&void 0!==G?G:{},E.source=null!==(dt=E.source)&&void 0!==dt?dt:{},E.animate=null!==(ct=E.animate)&&void 0!==ct?ct:{},E.interactive=null!==(kt=E.interactive)&&void 0!==kt?kt:{},E.variable=null!==(Ct=E.variable)&&void 0!==Ct?Ct:{},E):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(h,U,st){var et;let O;var E,G;if(this.refreshNodeStatus(),this.refreshSlideStatus(),st)O=null===(E=this._dataSource)||void 0===E||null===(E=E.slides)||void 0===E?void 0:E.find(Ct=>Ct.code==st||Ct.id==st),O&&(this._slideIdx=(null===(G=this._dataSource)||void 0===G||null===(G=G.slides)||void 0===G?void 0:G.indexOf(O))||0);else if(U){var dt,ct;O=null===(dt=this._dataSource)||void 0===dt||null===(dt=dt.slides)||void 0===dt?void 0:dt.find(Ct=>Ct.id==U),O&&(this._slideIdx=(null===(ct=this._dataSource)||void 0===ct||null===(ct=ct.slides)||void 0===ct?void 0:ct.indexOf(O))||0)}else this._slideIdx=Math.min(Math.max(h||0,0),this.slideTotal-1),O=this.slide;if(O){var kt;re(k.icdt.container,k.icdt.svg,O),null===(kt=jQuery(k.icdt.svg).find("#"+B.O.BACKGROUND_GROUP))||void 0===kt||kt.empty();let Ct=(0,Gt.g1)(B.O.BACKGROUND_GROUP,"g",void 0,k.icdt.svg);(0,Gt.x0)(Ct,O),(J=>{var h,U,st,et;let O=Tt.nodeStatus,E=Tt.slideStatus;null===(h=J.svg)||void 0===h||h.nodes.forEach(dt=>{dt.pid=Math.ceil(1e9*Math.random()),(0,z.m)(dt.pid)});let G=null===(U=J.svg)||void 0===U||null===(U=U.nodes)||void 0===U?void 0:U.map(dt=>dt.idx).filter((dt,ct,kt)=>kt.indexOf(dt)==ct).sort((dt,ct)=>(null!=dt?dt:0)-(null!=ct?ct:0));Rt(null!==(st=null===(et=J.svg)||void 0===et?void 0:et.nodes)&&void 0!==st?st:[],null!=G?G:[],{slide:J,nodeStatus:O,slideStatus:E})})(O)}this.changeSlide(this.slides,null===(et=this.slide)||void 0===et?void 0:et.id,this.slideIdx,this.slides.length)}set onChangeSlide(h){this._fnChangeSlides.push(h)}changeSlide(h,U,st,et){this._fnChangeSlides.forEach(O=>O(h,U,st,et))}},re=(J,h,U)=>{var st,et;let O=window.document.querySelector(h);var E;O||(O=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(E=window.document.querySelector(J))||void 0===E||E.appendChild(O)),O.textContent=null;let{x:G,y:dt,width:ct,height:kt}=null!==(st=null==U||null===(et=U.svg)||void 0===et?void 0:et.viewBox)&&void 0!==st?st:k.icdt.screen.frameSize;O.setAttributeNS(null,"viewBox",G+" "+dt+" "+ct+" "+kt),O.setAttribute("id",h.replace("#",""))}},2336:(ce,It,f)=>{f.d(It,{Q:()=>k});var B=f(1690);const k=(T,F,c)=>{var M;if(!F.value)return void c();let y=jQuery("#"+T),R="",b=null!==(M=F.iteration)&&void 0!==M?M:0,z=[];(F.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?z.push(F.value):(z.push("animation"),z.push(F.value?"animation-"+F.value:"animation-fadein")),b<0?(z.push("animation-iteration-infinite"),c(),c=function(){}):b>0&&z.push("animation-iteration-"+(b+1)),R=z.join(" "),function(rt){let N=function(){y.data("animate-running")?y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){y.data("animate-running",!1),setTimeout(function(){rt()},100)}):rt()};y.hasClass("animation")?setTimeout(function(){N()}):N()}(function(){var rt;lt(T),(b>0||b<0)&&y.one("animationiteration",function(){F.slideStatus===B.$.slideStatus||(y.data("animate-running",!1),lt(T),F.slideStatus===B.$.slideStatus&&c())}),y.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(y.data("animate-running",!1),lt(T),F.finish){default:case 0:case 1:break;case 2:y.addClass("hide")}F.slideStatus===B.$.slideStatus&&c()}),y.attr("data-class",null!==(rt=y.attr("class"))&&void 0!==rt?rt:""),y.addClass(R),y.data("animate-running",!0)})},lt=function(T){var F,c=jQuery("#"+T),M=null===(F=c.attr("class"))||void 0===F?void 0:F.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);M&&M.forEach(function(R){jQuery(c).removeClass(R)});let y=c.attr("data-class");y&&(c.attr("class",y),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},861:(ce,It,f)=>{f.d(It,{G:()=>T});var B=f(4318),k=f(1690),lt=f(4080);const T=(c,M,y)=>{var R;if(!M.points||!M.points.length)return void y();let b=jQuery("#"+c),z=function F(c){let M=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let x,rt,N,y=1,R=c.length;for(;y<R;){if(x=c[y-1],rt=c[y],N=c[y+1],(Math.abs(x[0]-rt[0])>=15||Math.abs(x[1]-rt[1])>=15)&&Math.pow(x[0]-rt[0],2)+Math.pow(x[1]-rt[1],2)>=Math.pow(15,2)&&N&&(Math.abs(x[0]-N[0])<=20||Math.abs(x[1]-N[1])<=20)&&Math.pow(x[0]-N[0],2)+Math.pow(x[1]-N[1],2)<=Math.pow(20,2))M.push(rt);else{let ot=rt[0]-x[0],W=rt[1]-x[1],tt=Math.max(Math.abs(ot),Math.abs(W));for(var V=0;V<tt;V+=15)M.push([x[0]+ot*V/tt,x[1]+W*V/tt])}y++}return R>0&&(M.splice(0,0,c[0]),M.push(c[R-1])),M}(M.points||[]),x=null!==(R=M.iteration)&&void 0!==R?R:0;if(x<0&&(y(),y=function(){}),b.data("work-running")&&x<0)return;b.data("work-running",!0);let gt,rt=z.length,N=Math.max(20,1e3*(M.time||3)/rt),{id:V,type:ot,size:W,attribute:tt}=k.$.findNode(c),wt=function(ht){if(M.slideStatus!==k.$.slideStatus)return b.data("work-running",!1),void(M.slideStatus===k.$.slideStatus&&y());if(ht<rt){let Y=z[ht];Y&&(gt=Object.assign({},W,{x:Y[0]-W.width/2,y:Y[1]-W.height/2}),Object.assign(tt,(0,B.sg)(ot,gt)),(0,lt.__)(window.document.getElementById(V),tt),setTimeout(function(){wt(++ht)},N))}else if(x>0)x--,wt(1);else if(x<0)wt(1);else switch(b.data("work-running",!1),M.slideStatus===k.$.slideStatus&&y(),M.finish){default:case 0:break;case 1:Object.assign(tt,(0,B.sg)(ot,W)),(0,lt.__)(window.document.getElementById(V),tt);break;case 2:b.addClass("hide")}};wt(1)}},157:(ce,It,f)=>{f.d(It,{R:()=>k});var B=f(1690);const k=(T,F,c,M,y)=>{var R,b,z;if(M.slideStatus!=B.$.slideStatus)return F.async&&"change-slide"!=F.async?void 0:void y();if(M.nodeStatus!=B.$.nodeStatus&&(!F.async||"change-node"==F.async))return void y();if(null===(R=F.source)||void 0===R||!R.url)return console.warn(`${T} -> audio no source!`),y(),void(y=()=>{});var x=jQuery("#"+T);let rt=null!==(b=F.iteration)&&void 0!==b?b:0;if(rt<0&&(y(),y=function(){}),!(x.data("audio-running")&&rt<0)){x.data("audio-running",!0);var N=function(ot){ot.pause(),ot.remove(),x.data("audio-running",!1)},V=new Audio;return V.autoplay=!0,V.loop=0!=rt,V.preload="auto",V.controls=!0,V.setAttributeNode(document.createAttribute("playsinline")),V.addEventListener("canplay",function(){var ot=V.play();ot&&ot.then(function(W){var tt;x.data("audio-running",!0),"time"==F.async?setTimeout(()=>{N(V),y(),y=()=>{}},1e3*(null!==(tt=F.time)&&void 0!==tt?tt:1)):"non-stop"==F.async&&(y(),y=()=>{})}).catch(function(W){x.data("audio-running",!1),M.slideStatus===B.$.slideStatus&&(y(),y=()=>{})})}),V.addEventListener("timeupdate",function(){switch(F.async){case"time":case"non-stop":break;case"finish-action":c.total>=2&&c.total-c.counter==1&&(N(this),y(),y=()=>{});break;default:case"change-node":M.nodeStatus!==B.$.nodeStatus&&(N(this),y(),y=()=>{});break;case"change-slide":M.slideStatus!==B.$.slideStatus&&(N(this),y(),y=()=>{})}}),V.addEventListener("canplaythrough",function(){this.loop&&(rt>0?rt--:0==rt&&(this.loop=!1))}),V.addEventListener("play",function(){}),V.addEventListener("pause",function(){}),V.addEventListener("ended",function(){this.remove(),x.data("audio-running",!1),M.slideStatus===B.$.slideStatus&&(y(),y=()=>{})}),V.onerror=function(){this.remove(),x.data("audio-running",!1),M.slideStatus===B.$.slideStatus&&(y(),y=()=>{})},V.src=(null===(z=F.source)||void 0===z?void 0:z.url)||"",V}}},5973:(ce,It,f)=>{f.d(It,{F:()=>y});var B=f(4981),k=f(1690),lt=f(2336),T=f(861),F=f(157),c=f(4787),M=f(370);const y=(R,b,z,x)=>{var rt,N,V;let ot={total:0,counter:0},{triggershow:W,triggerrun:tt,triggerhide:gt,action:wt,audio:ht,slide:Y,media:P}=null!==(rt=null===(N=R.interactive)||void 0===N?void 0:N.click)&&void 0!==rt?rt:{};if(W){let{id:Ht,ids:Mt,time:zt,async:ut}=W;"asynctrue"==ut?(0,c.L5)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,c.L5)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})},1e3*(null!=zt?zt:0))}if(tt){let{id:Ht,ids:Mt,time:zt,async:ut}=tt;"asynctrue"==ut?(0,c.Ar)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,c.Ar)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})},1e3*(null!=zt?zt:0))}if(gt){let{id:Ht,ids:Mt,time:zt,async:ut}=gt;"asynctrue"==ut?(0,c.WT)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z}):"time"==ut&&setTimeout(()=>{(0,c.WT)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})},1e3*(null!=zt?zt:0))}let Bt=()=>{setTimeout(()=>{if(ot.counter>=ot.total){if(x&&x(),W){let{id:Ht,ids:Mt,async:zt}=W;"asyncfalse"==zt&&(0,c.L5)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})}if(tt){let{id:Ht,ids:Mt,async:zt}=tt;"asyncfalse"==zt&&(0,c.Ar)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})}if(gt){let{id:Ht,ids:Mt,async:zt}=gt;"asyncfalse"==zt&&(0,c.WT)({id:Ht,ids:Mt,nodeStatus:b,slideStatus:z})}}})};if(null!=wt&&wt.value){ot.total+=1;let Ht=()=>{ot.counter+=1,Bt()};switch(wt.value){case"hide":jQuery("#"+R.id).addClass("hide"),Ht();break;case"points":{let{points:Mt,time:zt,iteration:ut,finish:it}=wt;Mt&&(0,T.G)(R.id,{points:Mt,time:zt,iteration:ut,finish:it,nodeStatus:b,slideStatus:z},Ht);break}default:{let{value:Mt,time:zt,iteration:ut,finish:it}=wt;(0,lt.Q)(R.id,{value:Mt,time:zt,iteration:ut,finish:it,nodeStatus:b,slideStatus:z},Ht);break}}}if(null!=ht&&null!==(V=ht.source)&&void 0!==V&&V.path){ot.total+=1;let Ht=()=>{ot.counter+=1,Bt()};(0,F.R)(R.id,ht,ot,{nodeStatus:b,slideStatus:z},Ht)}if(ot.total||Bt(),null!=Y&&Y.id)switch(console.log(`InteractiveNode #${R.id} slide(undefined,${Y.id},${Y.code}) success!`),Y.id){case-1:k.$.runSlide(k.$.slideIdx-1);break;case-2:k.$.runSlide(k.$.slideIdx+1);break;default:var Gt;k.$.runSlide(void 0,Y.id,null===(Gt=Y.code)||void 0===Gt?void 0:Gt.toString())}if(null!=P&&P.type){var Dt;let Mt=`<div class="popup-media-viewer"><iframe src="${(0,M.e)({readfileuploadurl:null===(Dt=B.icdt.config)||void 0===Dt?void 0:Dt.readfileuploadurl,type:null==P?void 0:P.type,oss:null==P?void 0:P.oss,path:null==P?void 0:P.path,pathExtract:null==P?void 0:P.pathExtract,url:null==P?void 0:P.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,zt=jQuery(Mt).appendTo(window.document.body);zt.find(".btn-close").click(function(ut){ut.preventDefault(),zt.remove()})}}},4787:(ce,It,f)=>{f.d(It,{Ar:()=>T,L5:()=>lt,WT:()=>F});var B=f(1690),k=f(5973);const lt=c=>{console.log("icdt_Run_Interactive_TriggerShow",c),c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(M=>{jQuery("#"+M).removeClass("hide")})},T=c=>{console.log("icdt_Run_Interactive_TriggerRun",c),c.id?(jQuery("#"+c.id).removeClass("hide"),(0,k.F)(B.$.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(M=>{jQuery("#"+M).removeClass("hide"),(0,k.F)(B.$.findNode(M),c.nodeStatus,c.slideStatus)})},F=c=>{console.log("icdt_Run_Interactive_TriggerHide",c),c.id?jQuery("#"+c.id).addClass("hide"):c.ids&&c.ids.forEach(M=>{jQuery("#"+M).addClass("hide")})}},4080:(ce,It,f)=>{f.d(It,{Mh:()=>gt,wM:()=>Y,x_:()=>wt,it:()=>P,g1:()=>Mt,__:()=>Bt,QI:()=>Dt,DB:()=>Gt,eb:()=>ht,x0:()=>yt,g$:()=>zt,mo:()=>$t,XH:()=>Et,hJ:()=>ut,vl:()=>bt,yD:()=>it,Yw:()=>ne});var B=f(9054),T=/^#?[a-fA-F0-9]+$/;const M=(j,K)=>{var u;if("none"==(j=null!==(u=j)&&void 0!==u?u:""))return"none";if("transparent"==j)return"rgba(0,0,0,0)";if(j.includes("rgba("))return j;if(j.includes("rgb(")&&(j=((j,K)=>{if(!j)return"";let u=j.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),H=(u&&u[4]||"").trim(),ft=u?(256|u[1]).toString(16).slice(1)+(256|u[2]).toString(16).slice(1)+(256|u[3]).toString(16).slice(1):j;return"0"==H?"transparent":`#${ft}`})(j)),!(j=j.replace(/[^0-9a-fA-F]/g,"")))return"";if(!T.test(j))return console.error(`hex2rgba -> ${j}: first argument has invalid hexadecimal characters`),"";if("#"===j[0]&&(j=j.slice(1)),3===j.length){let ft=j.split("");ft.splice(2,0,j[2]),ft.splice(1,0,j[1]),ft.splice(0,0,j[0]),j=ft.join("")}if(6!==j.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var H=[parseInt(j.slice(0,2),16),parseInt(j.slice(2,4),16),parseInt(j.slice(4,6),16)];return K="number"==typeof K?K:parseFloat(K),H.push(K>=0&&K<=1?K:1),"rgba("+H.join(",")+")"};var y=f(1814),R=f(4981),b=f(3423),z=f(8054),x=f(7210),rt=f(8619),N=f(1690),V=f(2875),ot=f(1687),W=f(370),tt=f(1105);class gt{constructor(K,u){let H=window.document.querySelector(u);var ft;H||(H=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(ft=window.document.querySelector(K))||void 0===ft||ft.appendChild(H));let{svgViewBox:vt,svgSize:Ot}=R.icdt.screen.init();H.setAttributeNS(null,"viewBox",`${vt.x} ${vt.y} ${vt.width} ${vt.height}`),H.setAttribute("id",u.replace("#","")),H.style.display="block",H.style.position="absolute",H.style.left=`${Ot.x}px`,H.style.top=`${Ot.y}px`,H.style.width=`${Ot.width}px`,H.style.height=`${Ot.height}px`,H.style.backgroundColor="#fafafa",H.style.cursor="default"}}const wt=j=>{var K,u,H,ft,vt,Ot;R.icdt.target.setAttributeNS(null,"viewBox",`${null!==(K=null==j||null===(u=j.svg)||void 0===u?void 0:u.viewBox.x)&&void 0!==K?K:0} ${null!==(H=null==j||null===(ft=j.svg)||void 0===ft?void 0:ft.viewBox.y)&&void 0!==H?H:0} ${null==j||null===(vt=j.svg)||void 0===vt?void 0:vt.viewBox.width} ${null==j||null===(Ot=j.svg)||void 0===Ot?void 0:Ot.viewBox.height}`),jQuery(R.icdt.target).find("#"+ot.O.BACKGROUND_GROUP).empty();let Kt=Mt(ot.O.BACKGROUND_GROUP,"g",void 0,R.icdt.target);yt(Kt,j),(()=>{let Rt=window.document.getElementById(null==j?void 0:j.id);jQuery(Rt).find("#"+ot.O.BACKGROUND_GROUP).empty();let _t=Mt(ot.O.BACKGROUND_GROUP,"g",void 0,Rt);yt(_t,j)})()},ht=()=>{let j=R.icdt.screen.svgViewBox,K=R.icdt.screen.svgSize;R.icdt.target&&(R.icdt.target.setAttributeNS(null,"viewBox",`${j.x} ${j.y} ${j.width} ${j.height}`),R.icdt.target.style.left=`${K.x}px`,R.icdt.target.style.top=`${K.y}px`,R.icdt.target.style.width=`${K.width}px`,R.icdt.target.style.height=`${K.height}px`)},Y=()=>{jQuery(R.icdt.target).find(">*:not(defs)").remove()},P=(j,K,u,H,ft)=>{let vt;return j?(vt=jQuery(ft||R.icdt.target).find("#"+j).get(0),vt||(vt=window.document.createElementNS("http://www.w3.org/2000/svg",u),vt.setAttribute("id",j),jQuery(vt).appendTo(ft||R.icdt.target))):(vt=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(vt).appendTo(ft||R.icdt.target)),null!=H&&H.attribute&&Bt(vt,null==H?void 0:H.attribute),null!=H&&H.style&&Gt(vt,null==H?void 0:H.style),null!=H&&H.source&&Dt(vt,K,null==H?void 0:H.source),vt},Bt=(j,K)=>{return jQuery(j).attr((u=Object.assign({},K||{}),null===(H=Object.keys(u))||void 0===H||H.forEach(Ot=>{switch(Ot){case"fill":break;case"stroke":var Kt;Object.assign(u,{"stroke-width":null!==(Kt=u.strokeWidth)&&void 0!==Kt?Kt:null,strokeWidth:null});break;case"strokeLinecap":var Rt;Object.assign(u,{"stroke-linecap":null!==(Rt=u.strokeLinecap)&&void 0!==Rt?Rt:null,strokeLinecap:null});break;case"strokeLinejoin":var _t;Object.assign(u,{"stroke-linejoin":null!==(_t=u.strokeLinejoin)&&void 0!==_t?_t:null,strokeLinejoin:null});break;case"strokeDasharray":var xt;Object.assign(u,{"stroke-dasharray":null!==(xt=u.strokeDasharray)&&void 0!==xt?xt:null,strokeDasharray:null});break;case"strokeDasharrays":var Tt,re;Object.assign(u,{"stroke-dasharray":null!==(Tt=null===(re=u.strokeDasharrays)||void 0===re?void 0:re.join(" "))&&void 0!==Tt?Tt:null,strokeDasharrays:null});break;case"fontFamily":var J;Object.assign(u,{"font-family":null!==(J=u.fontFamily)&&void 0!==J?J:null,fontFamily:null});break;case"fontSize":var h;Object.assign(u,{"font-size":null!==(h=u.fontSize)&&void 0!==h?h:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var U;Object.assign(u,{"transform-origin":null!==(U=u.transformOrigin)&&void 0!==U?U:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?M(u.fill,null!==(ft=null==u?void 0:u.fillOpacity)&&void 0!==ft?ft:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?M(u.stroke,null!==(vt=null==u?void 0:u.strokeOpacity)&&void 0!==vt?vt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),j;var u,H,ft,vt},Gt=(j,K)=>{return jQuery(j).css((u=Object.assign({},K||{}),null===(H=Object.keys(u))||void 0===H||H.forEach(ft=>{switch(ft){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var vt;Object.assign(u,u.borderWidth&&u.borderStyle&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle,"border-color":M(u.borderColor,null!==(vt=u.borderOpacity)&&void 0!==vt?vt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Ot;u.backgroundColor&&Object.assign(u,{"background-color":M(u.backgroundColor,null!==(Ot=u.backgroundOpacity)&&void 0!==Ot?Ot:1)}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),j;var u,H},Dt=(j,K,u)=>{switch(K){case B.$.TEXT:var H,ft;jQuery(j).text(null!==(H=null==u||null===(ft=u.text)||void 0===ft?void 0:ft.textContent)&&void 0!==H?H:"");break;case B.$.IMAGE:var vt,Ot,Kt,Rt,_t,xt,Tt;jQuery(j).attr("href",(null==u||null===(vt=u.image)||void 0===vt?void 0:vt.base64)||(null!=u&&null!==(Ot=u.image)&&void 0!==Ot&&Ot.path?`${null!==(Kt=null===(Rt=R.icdt.config)||void 0===Rt?void 0:Rt.readfileuploadurl)&&void 0!==Kt?Kt:""}${null!==(_t=null==u||null===(xt=u.image)||void 0===xt?void 0:xt.path)&&void 0!==_t?_t:""}`:"")||(null==u||null===(Tt=u.image)||void 0===Tt?void 0:Tt.url)||"");break;case B.$.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var re,J;if(null!==(re=u.text)&&void 0!==re&&re.variableKeywords&&null!==(J=u.text)&&void 0!==J&&J.variableKeywords.length){var h;let C=R.icdt.variable.getKeys(),D=(null===(h=u.text)||void 0===h?void 0:h.textContent)||"";u.text.variableKeywords.forEach(Q=>{var X=Q.replace(/[^a-zA-Z0-9_]/gm,"");if(C.indexOf(X)>=0){var Z=R.icdt.variable.getValue(X);D=D.replace(Q,Z)}}),jQuery(j).text(D)}else{var U;jQuery(j).text((null===(U=u.text)||void 0===U?void 0:U.textContent)||"")}break;case"html":{var st,et,O;let C=(null==u||null===(st=u.html)||void 0===st?void 0:st.htmlContent)||"";if(null!==(et=u.html)&&void 0!==et&&et.variableKeywords&&null!==(O=u.html)&&void 0!==O&&O.variableKeywords.length){let D=R.icdt.variable.getKeys();u.html.variableKeywords.forEach(Q=>{var X=Q.replace(/[^a-zA-Z0-9_]/gm,"");if(D.indexOf(X)>=0){var Z=R.icdt.variable.getValue(X);C=C.replace(Q,Z)}})}jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${C}</div>`).find("img[path],video[path],iframe[path]").each((D,Q)=>{var X,Z,Lt;Q.setAttribute("src",(null!==(X=null===(Z=R.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)&&void 0!==X?X:"")+(null!==(Lt=Q.getAttribute("path"))&&void 0!==Lt?Lt:"")),Q.removeAttribute("path")});break}case"input":var E,G,dt,ct;if(null!==(E=u.input)&&void 0!==E&&E.input)jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(dt=null===(ct=u.input)||void 0===ct?void 0:ct.placeholder)&&void 0!==dt?dt:""}" maxlength="100" /></div>`);else if(null!==(G=u.input)&&void 0!==G&&G.textarea){var kt,Ct;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(kt=null===(Ct=u.input)||void 0===Ct?void 0:Ct.placeholder)&&void 0!==kt?kt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Wt,ee,Ut,Zt,Qt,le,ae;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Wt=u.image)||void 0===Wt?void 0:Wt.base64)||(null!==(ee=u.image)&&void 0!==ee&&ee.path?`${null!==(Ut=null===(Zt=R.icdt.config)||void 0===Zt?void 0:Zt.readfileuploadurl)&&void 0!==Ut?Ut:""}${null!==(Qt=null===(le=u.image)||void 0===le?void 0:le.path)&&void 0!==Qt?Qt:""}`:"")||(null===(ae=u.image)||void 0===ae?void 0:ae.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var oe,pe,Ye,qe,Ke,ni,ri;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${null!==(oe=u.iframe)&&void 0!==oe&&oe.path?`${null!==(pe=null===(Ye=R.icdt.config)||void 0===Ye?void 0:Ye.readfileuploadurl)&&void 0!==pe?pe:""}${null!==(qe=null===(Ke=u.iframe)||void 0===Ke?void 0:Ke.path)&&void 0!==qe?qe:""}`:null!==(ni=null===(ri=u.iframe)||void 0===ri?void 0:ri.url)&&void 0!==ni?ni:""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var vi,Me,li,We,Je,ai;let C=(0,W.e)({readfileuploadurl:null===(vi=R.icdt.config)||void 0===vi?void 0:vi.readfileuploadurl,type:null===(Me=u.embed)||void 0===Me?void 0:Me.type,oss:null===(li=u.embed)||void 0===li?void 0:li.oss,path:null===(We=u.embed)||void 0===We?void 0:We.path,pathExtract:null===(Je=u.embed)||void 0===Je?void 0:Je.pathExtract,url:null===(ai=u.embed)||void 0===ai?void 0:ai.url});jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${C}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var oi,ti;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(oi=null===(ti=u.svg)||void 0===ti?void 0:ti.svgContent)&&void 0!==oi?oi:""}</div>`);break;case"test":{var Ve,si,mt,S;let C=(null==u||null===(Ve=u.html)||void 0===Ve?void 0:Ve.htmlContent)||"";if(null!==(si=u.html)&&void 0!==si&&si.variableKeywords&&null!==(mt=u.html)&&void 0!==mt&&mt.variableKeywords.length){let D=R.icdt.variable.getKeys();u.html.variableKeywords.forEach(Q=>{var X=Q.replace(/[^a-zA-Z0-9_]/gm,"");if(D.indexOf(X)>=0){var Z=R.icdt.variable.getValue(X);C=C.replace(Q,Z)}})}switch(null==u||null===(S=u.test)||void 0===S?void 0:S.type){case"matching-empty":jQuery(j).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty"></div>');break;case"matching-content":var i,n;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content"><div class="ondrag-item" data-key="${null!==(i=null==u||null===(n=u.test)||void 0===n||null===(n=n.matching)||void 0===n?void 0:n.key)&&void 0!==i?i:"KIEN"}" style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${C}</div></div>`);break;case"singlechoice":case"multichoice":jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;">${C}</div></div>`);break;case"fill":var r;((null===(r=u.html)||void 0===r?void 0:r.fillKeywords)||[]).forEach(D=>{var Q=`<input type="text" maxlength="128" style="display:inline-block;width:80px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:content-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:left;" data-key="${D.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;C=C.replace(new RegExp(D.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),Q)}),jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:start;align-items:center;width:100%;height:100%;">${C}</div></div>`);break;case"speech":jQuery(j).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;justify-content:center;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var a,s,v,p,_,L,w;jQuery(j).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(a=null!==(s=null===(v=u.image)||void 0===v?void 0:v.url)&&void 0!==s?s:`${null!==(p=null===(_=R.icdt.config)||void 0===_?void 0:_.readfileuploadurl)&&void 0!==p?p:""}${null!==(L=null===(w=u.image)||void 0===w?void 0:w.path)&&void 0!==L?L:""}`)&&void 0!==a?a:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(j).find("img[path],video[path],iframe[path]").each((D,Q)=>{var X,Z,Lt;Q.setAttribute("src",(null!==(X=null===(Z=R.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)&&void 0!==X?X:"")+(null!==(Lt=Q.getAttribute("path"))&&void 0!==Lt?Lt:"")),Q.removeAttribute("path")})}}}},Mt=(j,K,u,H)=>{let ft=jQuery(H||R.icdt.target).find("#"+j).get(0);return ft||(ft=window.document.createElementNS("http://www.w3.org/2000/svg",K),ft.setAttribute("id",j),jQuery(ft).appendTo(H||R.icdt.target)),jQuery(ft).attr((null==u?void 0:u.attribute)||{}),jQuery(ft).css((null==u?void 0:u.style)||{}),ft},zt=(j,K)=>{let u=(0,b.v)(2),H={fill:y.S3.fill,stroke:y.S3.stroke,"stroke-width":(0,b.v)(y.S3.strokeWidth)};return[{element:Mt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:K.x-u,y:K.y-u,width:K.width+2*u,height:K.height+2*u},H)},j),posType:"rect-center"}]},ut=(j,K)=>{let{size:u}=K,H=(0,b.v)(1),ft=(0,b.v)(2),vt=(0,b.v)(5),Ot={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},Kt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},Rt={fill:y.In.fill,stroke:y.In.stroke,"stroke-width":(0,b.v)(y.In.strokeWidth),width:(0,b.v)(y.In.width),height:(0,b.v)(y.In.height)};return Mt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-H,y1:u.y,x2:u.x-H,y2:u.y+u.height},Ot)},j),Mt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-H,x2:u.x+u.width,y2:u.y-H},Ot)},j),Mt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+H,y1:u.y,x2:u.x+u.width+H,y2:u.y+u.height},Ot)},j),Mt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+H,x2:u.x+u.width,y2:u.y+u.height+H},Ot)},j),[{element:Mt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Kt),style:{cursor:"move"}},j),posType:"rect-center"},{element:Mt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-vt,y:u.y-vt},Rt),style:{cursor:"nw-resize"}},j),posType:"rect-top-left"},{element:Mt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-ft,y:u.y-vt},Rt),style:{cursor:"ne-resize"}},j),posType:"rect-top-right"},{element:Mt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-vt,y:u.y+u.height-ft},Rt),style:{cursor:"sw-resize"}},j),posType:"rect-bottom-left"},{element:Mt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-ft,y:u.y+u.height-ft},Rt),style:{cursor:"se-resize"}},j),posType:"rect-bottom-right"}]},it=(j,K,u)=>{let H=(0,b.v)(1),ft={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},vt={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)},Ot={fill:y.dt.fill,stroke:y.dt.stroke,"stroke-width":(0,b.v)(y.dt.strokeWidth)},Tt=(Mt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-H,y1:u.y,x2:u.x-H,y2:u.y+u.height},ft)},j),Mt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-H,x2:u.x+u.width,y2:u.y-H},ft)},j),Mt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+H,y1:u.y,x2:u.x+u.width+H,y2:u.y+u.height},ft)},j),Mt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+H,x2:u.x+u.width,y2:u.y+u.height+H},ft)},j),Mt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},vt)},j));return K.forEach(re=>{let{size:J}=re;Mt("icdt-temp-select-rect-node-"+re.id,"rect",{attribute:Object.assign({x:J.x,y:J.y,width:J.width,height:J.height},Ot)},j)}),[{element:Tt,posType:"rect-center"}]},bt=(j,K)=>{let u=(0,b.v)(1),H={stroke:y.NV.stroke,"stroke-width":(0,b.v)(y.NV.strokeWidth),"stroke-linecap":y.NV.strokeLinecap},ft={fill:y.Mo.fill,stroke:y.Mo.stroke,"stroke-width":(0,b.v)(y.Mo.strokeWidth)};return Mt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:K.x-u,y1:K.y,x2:K.x-u,y2:K.y+K.height},H)},j),Mt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:K.x,y1:K.y-u,x2:K.x+K.width,y2:K.y-u},H)},j),Mt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:K.x+K.width+u,y1:K.y,x2:K.x+K.width+u,y2:K.y+K.height},H)},j),Mt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:K.x,y1:K.y+K.height+u,x2:K.x+K.width,y2:K.y+K.height+u},H)},j),[{element:Mt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:K.x,y:K.y,width:K.width,height:K.height},ft)},j),posType:"rect-center"}]},Et=(j,K)=>{let u=(0,b.v)(-1),H={stroke:y.h8.stroke,"stroke-width":(0,b.v)(y.h8.strokeWidth),"stroke-linecap":y.h8.strokeLinecap,"stroke-dasharray":(0,b.v)(y.h8.strokeDasharray)},ft={fill:y.MA.fill};return Mt("icdt-temp-interactive-line-left","line",{attribute:Object.assign({x1:K.x-u,y1:K.y,x2:K.x-u,y2:K.y+K.height},H)},j),Mt("icdt-temp-interactive-line-top","line",{attribute:Object.assign({x1:K.x,y1:K.y-u,x2:K.x+K.width,y2:K.y-u},H)},j),Mt("icdt-temp-interactive-line-right","line",{attribute:Object.assign({x1:K.x+K.width+u,y1:K.y,x2:K.x+K.width+u,y2:K.y+K.height},H)},j),Mt("icdt-temp-interactive-line-bottom","line",{attribute:Object.assign({x1:K.x,y1:K.y+K.height+u,x2:K.x+K.width,y2:K.y+K.height+u},H)},j),Mt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:K.x,y:K.y,width:K.width,height:K.height},ft)},j),[]},$t=(j,K)=>{let u={fill:y.k0.fill,stroke:y.k0.stroke,"stroke-width":(0,b.v)(y.k0.strokeWidth),"stroke-dasharray":(0,b.v)(y.k0.strokeDasharray)};jQuery(j).empty(),K.forEach(H=>{var ft,vt;let{size:Ot}=H;if(!H.idx)return;Mt("icdt-temp-index-rect-node-"+H.id,"rect",{attribute:Object.assign({x:Ot.x-5,y:Ot.y-5,width:Ot.width+10,height:Ot.height+10},u)},j);let{element:Kt}=(0,V.e)(Math.ceil(1e9*Math.random()),{size:{x:Ot.x-76,y:Ot.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(ft=H.idx)&&void 0!==ft?ft:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(vt=H.time)&&void 0!==vt?vt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},j);Kt.classList.add("node-input"),jQuery(Kt).on("change",'input[name="idx"]',Rt=>{var _t;H.idx=parseInt(null!==(_t=Rt.target.value)&&void 0!==_t?_t:"0")}).on("change",'input[name="time"]',Rt=>{var _t;H.time=parseFloat(null!==(_t=Rt.target.value)&&void 0!==_t?_t:"0")}).on("click",'button[name="remove"]',Rt=>{H.idx=0,H.time=null,$t(j,K)})})},yt=(j,K)=>{var u,H,ft,vt;let{color:Ot,opacity:Kt,path:Rt,url:_t,base64:xt}=null!==(u=null==K||null===(H=K.svg)||void 0===H?void 0:H.background)&&void 0!==u?u:{},{x:Tt,y:re,width:J,height:h}=null!==(ft=null==K||null===(vt=K.svg)||void 0===vt?void 0:vt.viewBox)&&void 0!==ft?ft:{x:0,y:0,width:0,height:0};(0,tt.$)(void 0,{size:{x:0,y:-7,width:J,height:h},attribute:{fill:"#999",fontSize:14,class:"hide-on-viewer"},source:{type:"text",text:{textContent:null==K?void 0:K.name}}},j),(0,z.f)(void 0,{size:{x:Tt,y:re,width:J,height:h},attribute:{fill:"#fff",stroke:"#999",strokeWidth:1,strokeDasharray:10,class:"hide-on-viewer"}},j),Ot&&(0,z.f)(void 0,{size:{x:Tt,y:re,width:J,height:h},attribute:{fill:Ot,fillOpacity:Kt}},j),Rt&&(0,x.G)(void 0,{size:{x:Tt,y:re,width:J,height:h},source:{type:"image",image:{path:Rt,url:_t,base64:xt}}},j)},ne=(j,K)=>{var u,H,Kt;if(jQuery(j).empty(),null!=K&&null!==(u=K.test)&&void 0!==u&&null!==(u=u.answer)&&void 0!==u&&u.singlechoice){var vt,Ot;let Rt=N.$.findNode(null==K||null===(vt=K.test)||void 0===vt||null===(vt=vt.answer)||void 0===vt||null===(vt=vt.singlechoice)||void 0===vt?void 0:vt.value),{x:_t,y:xt,width:Tt,height:re}=null!==(Ot=null==Rt?void 0:Rt.size)&&void 0!==Ot?Ot:{x:0,y:0,width:0,height:0};(0,rt._)(Math.ceil(1e9*Math.random()),{size:{x:_t-2,y:xt-2,width:Tt+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},j)}null!=K&&null!==(H=K.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.multichoice&&(null==K||null===(Kt=K.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||Kt.multichoice.forEach(Rt=>{var _t;let xt=N.$.findNode(Rt.value),{x:Tt,y:re,width:J,height:h}=null!==(_t=null==xt?void 0:xt.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,z.f)(Math.ceil(1e9*Math.random()),{size:{x:Tt-2,y:re-2,width:J+4,height:h+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4,strokeDasharray:4}},j)}))}},370:(ce,It,f)=>{f.d(It,{e:()=>lt});const lt=c=>{switch(null==c?void 0:c.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+c.readfileuploadurl+c.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+c.readfileuploadurl+c.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+c.readfileuploadurl+c.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+c.readfileuploadurl+c.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+c.readfileuploadurl+c.path;case 906:case 911:case 910:return""+c.readfileuploadurl+c.path;case 905:var M;return"imsmanifest.xml"==(null===(M=c.pathExtract)||void 0===M||null===(M=M.split("/"))||void 0===M?void 0:M.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+c.readfileuploadurl+c.pathExtract:""+c.readfileuploadurl+c.path;case 907:case 900:return""+c.readfileuploadurl+c.path;case 904:switch(c.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+c.url;case 1002:var y;return null!==(y=T(c.url))&&void 0!==y?y:"";case 1005:var R;return null!==(R=c.url)&&void 0!==R?R:"";default:var b;return null!==(b=c.url)&&void 0!==b?b:""}default:return""+c.readfileuploadurl+c.path}},T=c=>{let M=F(c);return M?"https://www.youtube.com/embed/"+M+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},F=c=>{let M=null==c?void 0:c.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return M&&M.length>=2?M[1]:null}},511:(ce,It,f)=>{function B(){}function k(t){return null==t?B:function(){return this.querySelector(t)}}function F(){return[]}function c(t){return null==t?F:function(){return this.querySelectorAll(t)}}function R(t){return function(){return this.matches(t)}}function b(t){return function(e){return e.matches(t)}}f.d(It,{$0Z:()=>aa,jvg:()=>la});var z=Array.prototype.find;function rt(){return this.firstElementChild}var V=Array.prototype.filter;function ot(){return Array.from(this.children)}function wt(t){return new Array(t.length)}function Y(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Bt(t,e,l,o,d,g){for(var A,m=0,I=e.length,nt=g.length;m<nt;++m)(A=e[m])?(A.__data__=g[m],o[m]=A):l[m]=new Y(t,g[m]);for(;m<I;++m)(A=e[m])&&(d[m]=A)}function Gt(t,e,l,o,d,g,m){var A,I,Jt,nt=new Map,at=e.length,Nt=g.length,Pt=new Array(at);for(A=0;A<at;++A)(I=e[A])&&(Pt[A]=Jt=m.call(I,I.__data__,A,e)+"",nt.has(Jt)?d[A]=I:nt.set(Jt,I));for(A=0;A<Nt;++A)Jt=m.call(t,g[A],A,g)+"",(I=nt.get(Jt))?(o[A]=I,I.__data__=g[A],nt.delete(Jt)):l[A]=new Y(t,g[A]);for(A=0;A<at;++A)(I=e[A])&&nt.get(Pt[A])===I&&(d[A]=I)}function Dt(t){return t.__data__}function Mt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function $t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Y.prototype={constructor:Y,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ft="http://www.w3.org/1999/xhtml";const vt={svg:"http://www.w3.org/2000/svg",xhtml:ft,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),vt.hasOwnProperty(e)?{space:vt[e],local:t}:t}function Kt(t){return function(){this.removeAttribute(t)}}function Rt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _t(t,e){return function(){this.setAttribute(t,e)}}function xt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Tt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function re(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function h(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function U(t){return function(){this.style.removeProperty(t)}}function st(t,e,l){return function(){this.style.setProperty(t,e,l)}}function et(t,e,l){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,l)}}function E(t,e){return t.style.getPropertyValue(e)||h(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function dt(t,e){return function(){this[t]=e}}function ct(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function Ct(t){return t.trim().split(/^|\s+/)}function Wt(t){return t.classList||new ee(t)}function ee(t){this._node=t,this._names=Ct(t.getAttribute("class")||"")}function Ut(t,e){for(var l=Wt(t),o=-1,d=e.length;++o<d;)l.add(e[o])}function Zt(t,e){for(var l=Wt(t),o=-1,d=e.length;++o<d;)l.remove(e[o])}function Qt(t){return function(){Ut(this,t)}}function le(t){return function(){Zt(this,t)}}function ae(t,e){return function(){(e.apply(this,arguments)?Ut:Zt)(this,t)}}function pe(){this.textContent=""}function Ye(t){return function(){this.textContent=t}}function qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ni(){this.innerHTML=""}function ri(t){return function(){this.innerHTML=t}}function vi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===ft&&e.documentElement.namespaceURI===ft?e.createElement(t):e.createElementNS(l,t)}}function ti(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Ot(t);return(e.local?ti:oi)(e)}function mt(){return null}function i(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function L(t){return function(){var e=this.__on;if(e){for(var g,l=0,o=-1,d=e.length;l<d;++l)g=e[l],t.type&&g.type!==t.type||g.name!==t.name?e[++o]=g:this.removeEventListener(g.type,g.listener,g.options);++o?e.length=o:delete this.__on}}}function w(t,e,l){return function(){var d,o=this.__on,g=function p(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var m=0,A=o.length;m<A;++m)if((d=o[m]).type===t.type&&d.name===t.name)return this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=g,d.options=l),void(d.value=e);this.addEventListener(t.type,g,l),d={type:t.type,name:t.name,value:e,listener:g,options:l},o?o.push(d):this.__on=[d]}}function D(t,e,l){var o=h(t),d=o.CustomEvent;"function"==typeof d?d=new d(e,l):(d=o.document.createEvent("Event"),l?(d.initEvent(e,l.bubbles,l.cancelable),d.detail=l.detail):d.initEvent(e,!1,!1)),t.dispatchEvent(d)}function Q(t,e){return function(){return D(this,t,e)}}function X(t,e){return function(){return D(this,t,e.apply(this,arguments))}}ee.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var se=[null];function fe(t,e){this._groups=t,this._parents=e}function ge(){return new fe([[document.documentElement]],se)}fe.prototype=ge.prototype={constructor:fe,select:function lt(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,l=e.length,o=new Array(l),d=0;d<l;++d)for(var I,nt,g=e[d],m=g.length,A=o[d]=new Array(m),at=0;at<m;++at)(I=g[at])&&(nt=t.call(I,I.__data__,at,g))&&("__data__"in I&&(nt.__data__=I.__data__),A[at]=nt);return new fe(o,this._parents)},selectAll:function y(t){t="function"==typeof t?function M(t){return function(){return function T(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):c(t);for(var e=this._groups,l=e.length,o=[],d=[],g=0;g<l;++g)for(var I,m=e[g],A=m.length,nt=0;nt<A;++nt)(I=m[nt])&&(o.push(t.call(I,I.__data__,nt,m)),d.push(I));return new fe(o,d)},selectChild:function N(t){return this.select(null==t?rt:function x(t){return function(){return z.call(this.children,t)}}("function"==typeof t?t:b(t)))},selectChildren:function tt(t){return this.selectAll(null==t?ot:function W(t){return function(){return V.call(this.children,t)}}("function"==typeof t?t:b(t)))},filter:function gt(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,l=e.length,o=new Array(l),d=0;d<l;++d)for(var I,g=e[d],m=g.length,A=o[d]=[],nt=0;nt<m;++nt)(I=g[nt])&&t.call(I,I.__data__,nt,g)&&A.push(I);return new fe(o,this._parents)},data:function Ht(t,e){if(!arguments.length)return Array.from(this,Dt);var l=e?Gt:Bt,o=this._parents,d=this._groups;"function"!=typeof t&&(t=function P(t){return function(){return t}}(t));for(var g=d.length,m=new Array(g),A=new Array(g),I=new Array(g),nt=0;nt<g;++nt){var at=o[nt],Nt=d[nt],Pt=Nt.length,Jt=Mt(t.call(at,at&&at.__data__,nt,o)),me=Jt.length,xe=A[nt]=new Array(me),At=m[nt]=new Array(me);l(at,Nt,xe,At,I[nt]=new Array(Pt),Jt,e);for(var de,ve,qt=0,Vt=0;qt<me;++qt)if(de=xe[qt]){for(qt>=Vt&&(Vt=qt+1);!(ve=At[Vt])&&++Vt<me;);de._next=ve||null}}return(m=new fe(m,o))._enter=A,m._exit=I,m},enter:function ht(){return new fe(this._enter||this._groups.map(wt),this._parents)},exit:function zt(){return new fe(this._exit||this._groups.map(wt),this._parents)},join:function ut(t,e,l){var o=this.enter(),d=this,g=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(d=e(d))&&(d=d.selection()),null==l?g.remove():l(g),o&&d?o.merge(d).order():d},merge:function it(t){for(var e=t.selection?t.selection():t,l=this._groups,o=e._groups,d=l.length,m=Math.min(d,o.length),A=new Array(d),I=0;I<m;++I)for(var Jt,nt=l[I],at=o[I],Nt=nt.length,Pt=A[I]=new Array(Nt),me=0;me<Nt;++me)(Jt=nt[me]||at[me])&&(Pt[me]=Jt);for(;I<d;++I)A[I]=l[I];return new fe(A,this._parents)},selection:function we(){return this},order:function bt(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var m,o=t[e],d=o.length-1,g=o[d];--d>=0;)(m=o[d])&&(g&&4^m.compareDocumentPosition(g)&&g.parentNode.insertBefore(m,g),g=m);return this},sort:function Et(t){function e(Nt,Pt){return Nt&&Pt?t(Nt.__data__,Pt.__data__):!Nt-!Pt}t||(t=$t);for(var l=this._groups,o=l.length,d=new Array(o),g=0;g<o;++g){for(var nt,m=l[g],A=m.length,I=d[g]=new Array(A),at=0;at<A;++at)(nt=m[at])&&(I[at]=nt);I.sort(e)}return new fe(d,this._parents).order()},call:function yt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ne(){return Array.from(this)},node:function j(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var o=t[e],d=0,g=o.length;d<g;++d){var m=o[d];if(m)return m}return null},size:function K(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function H(t){for(var e=this._groups,l=0,o=e.length;l<o;++l)for(var A,d=e[l],g=0,m=d.length;g<m;++g)(A=d[g])&&t.call(A,A.__data__,g,d);return this},attr:function J(t,e){var l=Ot(t);if(arguments.length<2){var o=this.node();return l.local?o.getAttributeNS(l.space,l.local):o.getAttribute(l)}return this.each((null==e?l.local?Rt:Kt:"function"==typeof e?l.local?re:Tt:l.local?xt:_t)(l,e))},style:function O(t,e,l){return arguments.length>1?this.each((null==e?U:"function"==typeof e?et:st)(t,e,null==l?"":l)):E(this.node(),t)},property:function kt(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?ct:dt)(t,e)):this.node()[t]},classed:function oe(t,e){var l=Ct(t+"");if(arguments.length<2){for(var o=Wt(this.node()),d=-1,g=l.length;++d<g;)if(!o.contains(l[d]))return!1;return!0}return this.each(("function"==typeof e?ae:e?Qt:le)(l,e))},text:function Ke(t){return arguments.length?this.each(null==t?pe:("function"==typeof t?qe:Ye)(t)):this.node().textContent},html:function Me(t){return arguments.length?this.each(null==t?ni:("function"==typeof t?vi:ri)(t)):this.node().innerHTML},raise:function We(){return this.each(li)},lower:function ai(){return this.each(Je)},append:function si(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function S(t,e){var l="function"==typeof t?t:Ve(t),o=null==e?mt:"function"==typeof e?e:k(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function n(){return this.each(i)},clone:function s(t){return this.select(t?a:r)},datum:function v(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function C(t,e,l){var d,m,o=function _(t){return t.trim().split(/^|\s+/).map(function(e){var l="",o=e.indexOf(".");return o>=0&&(l=e.slice(o+1),e=e.slice(0,o)),{type:e,name:l}})}(t+""),g=o.length;if(!(arguments.length<2)){for(A=e?w:L,d=0;d<g;++d)this.each(A(o[d],e,l));return this}var A=this.node().__on;if(A)for(var at,I=0,nt=A.length;I<nt;++I)for(d=0,at=A[I];d<g;++d)if((m=o[d]).type===at.type&&m.name===at.name)return at.value},dispatch:function Z(t,e){return this.each(("function"==typeof e?X:Q)(t,e))},[Symbol.iterator]:function*Lt(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var m,o=t[e],d=0,g=o.length;d<g;++d)(m=o[d])&&(yield m)}};const ye=ge;var Ee={value:()=>{}};function vn(){for(var o,t=0,e=arguments.length,l={};t<e;++t){if(!(o=arguments[t]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new Pi(l)}function Pi(t){this._=t}function ar(t,e){for(var d,l=0,o=t.length;l<o;++l)if((d=t[l]).name===e)return d.value}function gn(t,e,l){for(var o=0,d=t.length;o<d;++o)if(t[o].name===e){t[o]=Ee,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=l&&t.push({name:e,value:l}),t}Pi.prototype=vn.prototype={constructor:Pi,on:function(t,e){var d,l=this._,o=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var o="",d=l.indexOf(".");if(d>=0&&(o=l.slice(d+1),l=l.slice(0,d)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:o}})}(t+"",l),g=-1,m=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++g<m;)if(d=(t=o[g]).type)l[d]=gn(l[d],t.name,e);else if(null==e)for(d in l)l[d]=gn(l[d],t.name,null);return this}for(;++g<m;)if((d=(t=o[g]).type)&&(d=ar(l[d],t.name)))return d},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Pi(t)},call:function(t,e){if((d=arguments.length-2)>0)for(var d,g,l=new Array(d),o=0;o<d;++o)l[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,d=(g=this._[t]).length;o<d;++o)g[o].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],d=0,g=o.length;d<g;++d)o[d].value.apply(e,l)}};const or=vn;var Ri,Oi,gi=0,xi=0,Ei=0,yn=1e3,Li=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $i(){return di||(pn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,l){var o=new ji;return o.restart(t,e,l),o}function _n(){di=(Li=Si.now())+Di,gi=xi=0;try{!function dr(){$i(),++gi;for(var e,t=Ri;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gi}()}finally{gi=0,function hr(){for(var t,l,e=Ri,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ri=l);Oi=t,Xi(o)}(),di=0}}function ur(){var t=Si.now(),e=t-Li;e>yn&&(Di-=e,Li=t)}function Xi(t){gi||(xi&&(xi=clearTimeout(xi)),t-di>24?(t<1/0&&(xi=setTimeout(_n,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Li=Si.now(),Ei=setInterval(ur,yn)),gi=1,pn(_n)))}function wn(t,e,l){var o=new ji;return o.restart(d=>{o.stop(),t(d+e)},e=null==e?0:+e,l),o}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?$i():+l)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ri=this,Oi=this),this._call=t,this._time=l,Xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Bi=3;function Ki(t,e,l,o,d,g){var m=t.__transition;if(m){if(l in m)return}else t.__transition={};!function vr(t,e,l){var d,o=t.__transition;function m(nt){var at,Nt,Pt,Jt;if(1!==l.state)return I();for(at in o)if((Jt=o[at]).name===l.name){if(Jt.state===Bi)return wn(m);4===Jt.state?(Jt.state=6,Jt.timer.stop(),Jt.on.call("interrupt",t,t.__data__,Jt.index,Jt.group),delete o[at]):+at<e&&(Jt.state=6,Jt.timer.stop(),Jt.on.call("cancel",t,t.__data__,Jt.index,Jt.group),delete o[at])}if(wn(function(){l.state===Bi&&(l.state=4,l.timer.restart(A,l.delay,l.time),A(nt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=Bi,d=new Array(Pt=l.tween.length),at=0,Nt=-1;at<Pt;++at)(Jt=l.tween[at].value.call(t,t.__data__,l.index,l.group))&&(d[++Nt]=Jt);d.length=Nt+1}}function A(nt){for(var at=nt<l.duration?l.ease.call(null,nt/l.duration):(l.timer.restart(I),l.state=5,1),Nt=-1,Pt=d.length;++Nt<Pt;)d[Nt].call(t,at);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),I())}function I(){for(var nt in l.state=6,l.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=l,l.timer=mn(function g(nt){l.state=1,l.timer.restart(m,l.delay,l.time),l.delay<=nt&&m(nt-l.delay)},0,l.time)}(t,l,{name:e,index:o,group:d,on:cr,tween:fr,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:bn})}function tn(t,e){var l=Ue(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function Fe(t,e){var l=Ue(t,e);if(l.state>Bi)throw new Error("too late; already running");return l}function Ue(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ei(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Wi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,o,d,g){var m,A,I;return(m=Math.sqrt(t*t+e*e))&&(t/=m,e/=m),(I=t*l+e*o)&&(l-=t*I,o-=e*I),(A=Math.sqrt(l*l+o*o))&&(l/=A,o/=A,I/=A),t*o<e*l&&(t=-t,e=-e,I=-I,m=-m),{translateX:d,translateY:g,rotate:Math.atan2(e,t)*On,skewX:Math.atan(I)*On,scaleX:m,scaleY:A}}function kn(t,e,l,o){function d(nt){return nt.length?nt.pop()+" ":""}return function(nt,at){var Nt=[],Pt=[];return nt=t(nt),at=t(at),function g(nt,at,Nt,Pt,Jt,me){if(nt!==Nt||at!==Pt){var xe=Jt.push("translate(",null,e,null,l);me.push({i:xe-4,x:ei(nt,Nt)},{i:xe-2,x:ei(at,Pt)})}else(Nt||Pt)&&Jt.push("translate("+Nt+e+Pt+l)}(nt.translateX,nt.translateY,at.translateX,at.translateY,Nt,Pt),function m(nt,at,Nt,Pt){nt!==at?(nt-at>180?at+=360:at-nt>180&&(nt+=360),Pt.push({i:Nt.push(d(Nt)+"rotate(",null,o)-2,x:ei(nt,at)})):at&&Nt.push(d(Nt)+"rotate("+at+o)}(nt.rotate,at.rotate,Nt,Pt),function A(nt,at,Nt,Pt){nt!==at?Pt.push({i:Nt.push(d(Nt)+"skewX(",null,o)-2,x:ei(nt,at)}):at&&Nt.push(d(Nt)+"skewX("+at+o)}(nt.skewX,at.skewX,Nt,Pt),function I(nt,at,Nt,Pt,Jt,me){if(nt!==Nt||at!==Pt){var xe=Jt.push(d(Jt)+"scale(",null,",",null,")");me.push({i:xe-4,x:ei(nt,Nt)},{i:xe-2,x:ei(at,Pt)})}else(1!==Nt||1!==Pt)&&Jt.push(d(Jt)+"scale("+Nt+","+Pt+")")}(nt.scaleX,nt.scaleY,at.scaleX,at.scaleY,Nt,Pt),nt=at=null,function(Jt){for(var At,me=-1,xe=Pt.length;++me<xe;)Nt[(At=Pt[me]).i]=At.x(Jt);return Nt.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function br(t,e){var l,o;return function(){var d=Fe(this,t),g=d.tween;if(g!==l)for(var m=0,A=(o=l=g).length;m<A;++m)if(o[m].name===e){(o=o.slice()).splice(m,1);break}d.tween=o}}function xr(t,e,l){var o,d;if("function"!=typeof l)throw new Error;return function(){var g=Fe(this,t),m=g.tween;if(m!==o){d=(o=m).slice();for(var A={name:e,value:l},I=0,nt=d.length;I<nt;++I)if(d[I].name===e){d[I]=A;break}I===nt&&d.push(A)}g.tween=d}}function nn(t,e,l){var o=t._id;return t.each(function(){var d=Fe(this,o);(d.value||(d.value={}))[e]=l.apply(this,arguments)}),function(d){return Ue(d,o).value[e]}}function rn(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Mn(t,e){var l=Object.create(t.prototype);for(var o in e)l[o]=e[o];return l}function ki(){}var Ui=1/.7,yi="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),kr=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),Mr=new RegExp(`^rgba\\(${yi},${yi},${yi},${Ti}\\)$`),Tr=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${Ti}\\)$`),Cr=new RegExp(`^hsl\\(${Ti},${Qe},${Qe}\\)$`),Ar=new RegExp(`^hsla\\(${Ti},${Qe},${Qe},${Ti}\\)$`),Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?In(e):3===l?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Le(e[1],e[2],e[3],1):(e=kr.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Tr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Tn.hasOwnProperty(t)?In(Tn[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function In(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,o){return o<=0&&(t=e=l=NaN),new Le(t,e,l,o)}function Fi(t,e,l,o){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}(t):new Le(t,e,l,null==o?1:o)}function Le(t,e,l,o){this.r=+t,this.g=+e,this.b=+l,this.opacity=+o}function Nn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Qi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Rn(t,e,l,o){return o<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,l,o)}function Ln(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Ge;if(t instanceof Ge)return t;var e=(t=t.rgb()).r/255,l=t.g/255,o=t.b/255,d=Math.min(e,l,o),g=Math.max(e,l,o),m=NaN,A=g-d,I=(g+d)/2;return A?(m=e===g?(l-o)/A+6*(l<o):l===g?(o-e)/A+2:(e-l)/A+4,A/=I<.5?g+d:2-g-d,m*=60):A=I>0&&I<1?0:m,new Ge(m,A,I,t.opacity)}function Ge(t,e,l,o){this.h=+t,this.s=+e,this.l=+l,this.opacity=+o}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,o,d){var g=t*t,m=g*t;return((1-3*t+3*g-m)*e+(4-6*g+3*m)*l+(1+3*t+3*g-3*m)*o+m*d)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Nr(){return Ln(this).formatHsl()},formatRgb:An,toString:An}),rn(Le,Fi,Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(ui(this.r),ui(this.g),ui(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:function Rr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Ge,function Lr(t,e,l,o){return 1===arguments.length?Ln(t):new Ge(t,e,l,null==o?1:o)},Mn(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,o=l+(l<.5?l:1-l)*e,d=2*l-o;return new Le(ln(t>=240?t-240:t+120,d,o),ln(t,d,o),ln(t<120?t+240:t-120,d,o),this.opacity)},clamp(){return new Ge(Dn(this.h),Hi(this.s),Hi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const Bn=t=>()=>t;function Kn(t,e){var l=e-t;return l?function zn(t,e){return function(l){return t+l*e}}(t,l):Bn(isNaN(t)?e:t)}const Wn=function t(e){var l=function zr(t){return 1==(t=+t)?Kn:function(e,l){return l-e?function Br(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(o){return Math.pow(t+o*e,l)}}(e,l,t):Bn(isNaN(e)?l:e)}}(e);function o(d,g){var m=l((d=Fi(d)).r,(g=Fi(g)).r),A=l(d.g,g.g),I=l(d.b,g.b),nt=Kn(d.opacity,g.opacity);return function(at){return d.r=m(at),d.g=A(at),d.b=I(at),d.opacity=nt(at),d+""}}return o.gamma=t,o}(1);function Un(t){return function(e){var m,A,l=e.length,o=new Array(l),d=new Array(l),g=new Array(l);for(m=0;m<l;++m)A=Fi(e[m]),o[m]=A.r||0,d[m]=A.g||0,g[m]=A.b||0;return o=t(o),d=t(d),g=t(g),A.opacity=1,function(I){return A.r=o(I),A.g=d(I),A.b=g(I),A+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var o=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),d=t[o],g=t[o+1];return jn((l-o/e)*e,o>0?t[o-1]:2*d-g,d,g,o<e-1?t[o+2]:2*g-d)}}),Un(function jr(t){var e=t.length;return function(l){var o=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-o/e)*e,t[(o+e-1)%e],t[o%e],t[(o+1)%e],t[(o+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var o,d,g,l=an.lastIndex=on.lastIndex=0,m=-1,A=[],I=[];for(t+="",e+="";(o=an.exec(t))&&(d=on.exec(e));)(g=d.index)>l&&(g=e.slice(l,g),A[m]?A[m]+=g:A[++m]=g),(o=o[0])===(d=d[0])?A[m]?A[m]+=d:A[++m]=d:(A[++m]=null,I.push({i:m,x:ei(o,d)})),l=on.lastIndex;return l<e.length&&(g=e.slice(l),A[m]?A[m]+=g:A[++m]=g),A.length<2?I[0]?function Wr(t){return function(e){return t(e)+""}}(I[0].x):function Kr(t){return function(){return t}}(e):(e=I.length,function(nt){for(var Nt,at=0;at<e;++at)A[(Nt=I[at]).i]=Nt.x(nt);return A.join("")})}function Gn(t,e){var l;return("number"==typeof e?ei:e instanceof Ci?Wn:(l=Ci(e))?(e=l,Wn):Ur)(t,e)}function Gr(t){return function(){this.removeAttribute(t)}}function Fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var o,g,d=l+"";return function(){var m=this.getAttribute(t);return m===d?null:m===o?g:g=e(o=m,l)}}function Hr(t,e,l){var o,g,d=l+"";return function(){var m=this.getAttributeNS(t.space,t.local);return m===d?null:m===o?g:g=e(o=m,l)}}function Jr(t,e,l){var o,d,g;return function(){var m,I,A=l(this);return null==A?void this.removeAttribute(t):(m=this.getAttribute(t))===(I=A+"")?null:m===o&&I===d?g:(d=I,g=e(o=m,A))}}function Vr(t,e,l){var o,d,g;return function(){var m,I,A=l(this);return null==A?void this.removeAttributeNS(t.space,t.local):(m=this.getAttributeNS(t.space,t.local))===(I=A+"")?null:m===o&&I===d?g:(d=I,g=e(o=m,A))}}function Yr(t,e){var l,o;function d(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function Xr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,g)),l}return d._value=e,d}function qr(t,e){var l,o;function d(){var g=e.apply(this,arguments);return g!==o&&(l=(o=g)&&function $r(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,g)),l}return d._value=e,d}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){Fe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){Fe(this,t).duration=e}}var wl=ye.prototype.constructor;function Fn(t){return function(){this.style.removeProperty(t)}}var Bl=0;function Ze(t,e,l,o){this._groups=t,this._parents=e,this._name=l,this._id=o}function Qn(){return++Bl}var $e=ye.prototype;Ze.prototype=function zl(t){return ye().transition(t)}.prototype={constructor:Ze,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=k(t));for(var o=this._groups,d=o.length,g=new Array(d),m=0;m<d;++m)for(var at,Nt,A=o[m],I=A.length,nt=g[m]=new Array(I),Pt=0;Pt<I;++Pt)(at=A[Pt])&&(Nt=t.call(at,at.__data__,Pt,A))&&("__data__"in at&&(Nt.__data__=at.__data__),nt[Pt]=Nt,Ki(nt[Pt],e,l,Pt,nt,Ue(at,l)));return new Ze(g,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=c(t));for(var o=this._groups,d=o.length,g=[],m=[],A=0;A<d;++A)for(var at,I=o[A],nt=I.length,Nt=0;Nt<nt;++Nt)if(at=I[Nt]){for(var Jt,Pt=t.call(at,at.__data__,Nt,I),me=Ue(at,l),xe=0,At=Pt.length;xe<At;++xe)(Jt=Pt[xe])&&Ki(Jt,e,l,xe,Pt,me);g.push(Pt),m.push(at)}return new Ze(g,m,e,l)},selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,l=e.length,o=new Array(l),d=0;d<l;++d)for(var I,g=e[d],m=g.length,A=o[d]=[],nt=0;nt<m;++nt)(I=g[nt])&&t.call(I,I.__data__,nt,g)&&A.push(I);return new Ze(o,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,o=e.length,g=Math.min(o,l.length),m=new Array(o),A=0;A<g;++A)for(var Pt,I=e[A],nt=l[A],at=I.length,Nt=m[A]=new Array(at),Jt=0;Jt<at;++Jt)(Pt=I[Jt]||nt[Jt])&&(Nt[Jt]=Pt);for(;A<o;++A)m[A]=e[A];return new Ze(m,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),o=this._groups,d=o.length,g=0;g<d;++g)for(var I,m=o[g],A=m.length,nt=0;nt<A;++nt)if(I=m[nt]){var at=Ue(I,e);Ki(I,t,l,nt,m,{time:at.time+at.delay+at.duration,delay:0,duration:at.duration,ease:at.ease})}return new Ze(o,this._parents,t,l)},call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:function gl(t,e){var l=this._id;return arguments.length<2?Ue(this.node(),l).on.on(t):this.each(function vl(t,e,l){var o,d,g=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?tn:Fe;return function(){var m=g(this,t),A=m.on;A!==o&&(d=(o=A).copy()).on(e,l),m.on=d}}(l,t,e))},attr:function Zr(t,e){var l=Ot(t),o="transform"===l?wr:Gn;return this.attrTween(t,"function"==typeof e?(l.local?Vr:Jr)(l,o,nn(this,"attr."+t,e)):null==e?(l.local?Fr:Gr)(l):(l.local?Hr:Qr)(l,o,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var o=Ot(t);return this.tween(l,(o.local?Yr:qr)(o,e))},style:function kl(t,e,l){var o="transform"==(t+="")?_r:Gn;return null==e?this.styleTween(t,function xl(t,e){var l,o,d;return function(){var g=E(this,t),m=(this.style.removeProperty(t),E(this,t));return g===m?null:g===l&&m===o?d:d=e(l=g,o=m)}}(t,o)).on("end.style."+t,Fn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var o,d,g;return function(){var m=E(this,t),A=l(this),I=A+"";return null==A&&(this.style.removeProperty(t),I=A=E(this,t)),m===I?null:m===o&&I===d?g:(d=I,g=e(o=m,A))}}(t,o,nn(this,"style."+t,e))).each(function Sl(t,e){var l,o,d,A,g="style."+e,m="end."+g;return function(){var I=Fe(this,t),nt=I.on,at=null==I.value[g]?A||(A=Fn(e)):void 0;(nt!==l||d!==at)&&(o=(l=nt).copy()).on(m,d=at),I.on=o}}(this._id,t)):this.styleTween(t,function El(t,e,l){var o,g,d=l+"";return function(){var m=E(this,t);return m===d?null:m===o?g:g=e(o=m,l)}}(t,o,e),l).on("end.style."+t,null)},styleTween:function Cl(t,e,l){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function Tl(t,e,l){var o,d;function g(){var m=e.apply(this,arguments);return m!==d&&(o=(d=m)&&function Ml(t,e,l){return function(o){this.style.setProperty(t,e.call(this,o),l)}}(t,m,l)),o}return g._value=e,g}(t,e,null==l?"":l))},text:function Nl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,l;function o(){var d=t.apply(this,arguments);return d!==l&&(e=(l=d)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(d)),e}return o._value=t,o}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var m,o=Ue(this.node(),l).tween,d=0,g=o.length;d<g;++d)if((m=o[d]).name===t)return m.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ue(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ue(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){Fe(this,t).ease=e}}(e,t)):Ue(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;Fe(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,o=l._id,d=l.size();return new Promise(function(g,m){var A={value:m},I={value:function(){0==--d&&g()}};l.each(function(){var nt=Fe(this,o),at=nt.on;at!==t&&((e=(t=at).copy())._.cancel.push(A),e._.interrupt.push(A),e._.end.push(I)),nt.on=e}),0===d&&g()})},[Symbol.iterator]:$e[Symbol.iterator]};var Wl={time:null,delay:0,duration:250,ease:function Kl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}ye.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var o,d,m,l=t.__transition,g=!0;if(l){for(m in e=null==e?null:e+"",l)(o=l[m]).name===e?(d=o.state>2&&o.state<5,o.state=6,o.timer.stop(),o.on.call(d?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete l[m]):g=!1;g&&delete t.__transition}}(this,t)})},ye.prototype.transition=function Gl(t){var e,l;t instanceof Ze?(e=t._id,t=t._name):(e=Qn(),(l=Wl).time=$i(),t=null==t?null:t+"");for(var o=this._groups,d=o.length,g=0;g<d;++g)for(var I,m=o[g],A=m.length,nt=0;nt<A;++nt)(I=m[nt])&&Ki(I,t,e,nt,m,l||Ul(I,e));return new Ze(o,this._parents,t,e)};Math;function Ai(t){return{type:t}}function _i(t){return function(){return t}}function Xn(t){this._context=t}function Yl(t){return new Xn(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,fn=2*cn,ci=1e-6,ql=fn-ci;function Yn(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Yn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Yn;const l=10**e;return function(o){this._+=o[0];for(let d=1,g=o.length;d<g;++d)this._+=Math.round(arguments[d]*l)/l+o[d]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,o,d){this._append`Q${+e},${+l},${this._x1=+o},${this._y1=+d}`}bezierCurveTo(e,l,o,d,g,m){this._append`C${+e},${+l},${+o},${+d},${this._x1=+g},${this._y1=+m}`}arcTo(e,l,o,d,g){if(e=+e,l=+l,o=+o,d=+d,(g=+g)<0)throw new Error(`negative radius: ${g}`);let m=this._x1,A=this._y1,I=o-e,nt=d-l,at=m-e,Nt=A-l,Pt=at*at+Nt*Nt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Pt>ci)if(Math.abs(Nt*I-nt*at)>ci&&g){let Jt=o-m,me=d-A,xe=I*I+nt*nt,At=Jt*Jt+me*me,St=Math.sqrt(xe),qt=Math.sqrt(Pt),Vt=g*Math.tan((cn-Math.acos((xe+Pt-At)/(2*St*qt)))/2),de=Vt/qt,ve=Vt/St;Math.abs(de-1)>ci&&this._append`L${e+de*at},${l+de*Nt}`,this._append`A${g},${g},0,0,${+(Nt*Jt>at*me)},${this._x1=e+ve*I},${this._y1=l+ve*nt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,o,d,g,m){if(e=+e,l=+l,m=!!m,(o=+o)<0)throw new Error(`negative radius: ${o}`);let A=o*Math.cos(d),I=o*Math.sin(d),nt=e+A,at=l+I,Nt=1^m,Pt=m?d-g:g-d;null===this._x1?this._append`M${nt},${at}`:(Math.abs(this._x1-nt)>ci||Math.abs(this._y1-at)>ci)&&this._append`L${nt},${at}`,o&&(Pt<0&&(Pt=Pt%fn+fn),Pt>ql?this._append`A${o},${o},0,1,${Nt},${e-A},${l-I}A${o},${o},0,1,${Nt},${this._x1=nt},${this._y1=at}`:Pt>ci&&this._append`A${o},${o},0,${+(Pt>=cn)},${Nt},${this._x1=e+o*Math.cos(g)},${this._y1=l+o*Math.sin(g)}`)}rect(e,l,o,d){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${o=+o}v${+d}h${-o}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=_i(!0),o=null,d=Yl,g=null,m=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const o=Math.floor(l);if(!(o>=0))throw new RangeError(`invalid digits: ${l}`);e=o}return t},()=>new Zi(e)}(A);function A(I){var nt,Nt,Jt,at=(I=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(I)).length,Pt=!1;for(null==o&&(g=d(Jt=m())),nt=0;nt<=at;++nt)!(nt<at&&l(Nt=I[nt],nt,I))===Pt&&((Pt=!Pt)?g.lineStart():g.lineEnd()),Pt&&g.point(+t(Nt,nt,I),+e(Nt,nt,I));if(Jt)return g=null,Jt+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),A.x=function(I){return arguments.length?(t="function"==typeof I?I:_i(+I),A):t},A.y=function(I){return arguments.length?(e="function"==typeof I?I:_i(+I),A):e},A.defined=function(I){return arguments.length?(l="function"==typeof I?I:_i(!!I),A):l},A.curve=function(I){return arguments.length?(d=I,null!=o&&(g=d(o)),A):d},A.context=function(I){return arguments.length?(null==I?o=g=null:g=d(o=I),A):o},A}function qn(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);