(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5140],{1062:(G,B,u)=>{"use strict";u.d(B,{Z:()=>e,m:()=>d});var v=u(5861),w=u(2014);const P=new w.K({name:"_localDataDB",driverOrder:[w.N.IndexedDB,w.N.LocalStorage]}),Z="ui-config",e=function(){var x=(0,v.Z)(function*(M){yield P.create();try{var A=(yield P.get(Z))||{};"function"==typeof M.callback&&M.callback(A)}catch(T){"function"==typeof M.callback&&M.callback(null),console.error(T)}});return function(A){return x.apply(this,arguments)}}(),d=function(){var x=(0,v.Z)(function*(M){yield P.create(),M.params=M.params||{};try{var A=(yield P.get(Z))||{};Object.assign(A,M.params),yield P.set(Z,A),"function"==typeof M.callback&&M.callback(A)}catch(T){"function"==typeof M.callback&&M.callback(null),console.error(T)}});return function(A){return x.apply(this,arguments)}}()},8247:(G,B,u)=>{"use strict";u.d(B,{D:()=>w});var v=u(4459);function w(P){P.params=P.params||{},(0,v.cd)({url:"api/Lookup/get",params:{lookup_key:P.params.lookup_key||null},success:Z=>{"function"==typeof P.callback&&P.callback(null==Z?void 0:Z.data)},error:Z=>{"function"==typeof P.callback&&P.callback(null),console.error(P,Z)},loading:P.loading})}},6240:(G,B,u)=>{"use strict";u.d(B,{Bm:()=>w,YM:()=>P,iS:()=>e,o5:()=>Z});var v=u(4459);function w(d){var x,M,A,T,r,m,t,O,D,n,k;d.params=d.params||{},d.params.page=d.params.page||1,d.params.limit=d.params.limit||1,(0,v.cd)({url:"api/Media/Search",params:{getby:null!==(x=d.params.userid)&&void 0!==x?x:null,global:null!==(M=d.params.global)&&void 0!==M?M:null,media_id:null!==(A=d.params.media_id)&&void 0!==A?A:null,media_title:null!==(T=d.params.media_title)&&void 0!==T?T:null,v_mediatype:null!==(r=d.params.v_mediatype)&&void 0!==r?r:null,v_mediatypes:null!==(m=d.params.v_mediatypes)&&void 0!==m?m:null,topic_id:null!==(t=d.params.topic_id)&&void 0!==t?t:null,category_id:null!==(O=d.params.category_id)&&void 0!==O?O:null,tags:null!==(D=d.params.tags)&&void 0!==D?D:null,sortfield:null!==(n=d.params.sortfield)&&void 0!==n?n:null,sorttype:null!==(k=d.params.sorttype)&&void 0!==k?k:null,posstart:(d.params.page-1)*d.params.limit,numofrow:d.params.limit},success:U=>{var I;"function"==typeof d.callback&&d.callback(null!==(I=U.data)&&void 0!==I?I:null)},error:U=>{"function"==typeof d.callback&&d.callback(),console.error(U)},loading:d.loading})}function P(d){var x,M;d.params=d.params||{},(0,v.cd)({url:"api/Media/Detail",params:{getby:null!==(x=d.params.userid)&&void 0!==x?x:null,media_id:null!==(M=d.params.media_id)&&void 0!==M?M:null},success:A=>{var T;"function"==typeof d.callback&&d.callback(null!==(T=A.data)&&void 0!==T?T:null)},error:A=>{"function"==typeof d.callback&&d.callback(),console.error(A)},loading:d.loading})}function Z(d){var x,M,A,T,r,m,t,O,D,n,k,U,I,R,z,Q,K;d.params=d.params||{},(0,v.T1)({url:"api/Media/AddUpdate",params:{media_id:null!==(x=d.params.media_id)&&void 0!==x?x:null,media_title:null!==(M=d.params.media_title)&&void 0!==M?M:null,media_description:null!==(A=d.params.media_description)&&void 0!==A?A:null,media_content:null!==(T=d.params.media_content)&&void 0!==T?T:null,filepath:null!==(r=d.params.filepath)&&void 0!==r?r:null,filepath_extract:null!==(m=d.params.filepath_extract)&&void 0!==m?m:null,link_file:null!==(t=d.params.link_file)&&void 0!==t?t:null,link_share:null!==(O=d.params.link_share)&&void 0!==O?O:null,cover:null!==(D=d.params.cover)&&void 0!==D?D:null,v_mediatype:null!==(n=d.params.v_mediatype)&&void 0!==n?n:null,v_osstype:null!==(k=d.params.v_osstype)&&void 0!==k?k:null,v_sharingmode:null!==(U=d.params.v_sharingmode)&&void 0!==U?U:null,topic_id:null!==(I=d.params.topic_id)&&void 0!==I?I:null,category_id:null!==(R=d.params.category_id)&&void 0!==R?R:null,tags:null!==(z=d.params.tags)&&void 0!==z?z:null,createdby:null!==(Q=d.params.userid)&&void 0!==Q?Q:null,modifiedby:null!==(K=d.params.userid)&&void 0!==K?K:null},success:J=>{var L;"function"==typeof d.callback&&d.callback(null!==(L=J.data)&&void 0!==L?L:null)},error:J=>{"function"==typeof d.callback&&d.callback(),console.error(J)},loading:d.loading})}function e(d){var x,M,A;d.params=d.params||{},(0,v.tD)({url:"api/Media/Delete",params:{deletedby:null!==(x=d.params.userid)&&void 0!==x?x:null,media_id:null!==(M=d.params.media_id)&&void 0!==M?M:null,createdby:null!==(A=d.params.userid)&&void 0!==A?A:null},success:T=>{var r;"function"==typeof d.callback&&d.callback(null!==(r=T.data)&&void 0!==r?r:null)},error:T=>{"function"==typeof d.callback&&d.callback(),console.error(T)},loading:d.loading})}},3938:(G,B,u)=>{"use strict";u.d(B,{GX:()=>w,IX:()=>Z,hh:()=>P});var v=u(4459);function w(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,v.cd)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:d=>{"function"==typeof e.callback&&e.callback(d.data||null)},error:d=>{"function"==typeof e.callback&&e.callback(null),console.error(d)}})}function P(e){e.params=e.params||{},(0,v.T1)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:d=>{"function"==typeof e.callback&&e.callback(d.data||null)},error:d=>{"function"==typeof e.callback&&e.callback(null),console.error(d)}})}function Z(e){e.params=e.params||{},(0,v.tD)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:d=>{"function"==typeof e.callback&&e.callback(d.data||null)},error:d=>{"function"==typeof e.callback&&e.callback(null),console.error(d)}})}},1529:(G,B,u)=>{"use strict";u.d(B,{G4:()=>e,NP:()=>M,r7:()=>Z,u4:()=>d,zS:()=>x});var v=u(4459),w=u(3589),P=u(1862);function Z(r){r.params=r.params||{},(0,v.OL)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/download-image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{url:r.params.url||null},success:m=>{var t;"function"==typeof r.callback&&(null!=m&&null!==(t=m.data)&&void 0!==t&&t.StatusCode?r.callback():r.callback(URL.createObjectURL(null==m?void 0:m.data)))},error:m=>{"function"==typeof r.callback&&r.callback(),console.error(m)},loading:r.loading})}function e(r){var m,t,O;r.params=r.params||{};let D=null!==(m=r.callback)&&void 0!==m?m:U=>{console.log(U)},n=null===(t=r.params.url)||void 0===t?void 0:t.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""),k=(null==n||null===(O=n.split("/"))||void 0===O||null===(O=O.pop())||void 0===O?void 0:O.toLocaleLowerCase())||"image.png";Z({params:{url:n},callback:U=>{U?(0,P.d4)(U,k,"image/x-png",I=>{I?(0,w.z)({params:{file:I,subFolder:"material/aitool",fileType:"image"},callback:R=>{0==(null==R?void 0:R.ReturnCode)?D(R):D()}}):D()}):D()},loading:r.loading})}function d(r){if(r.params=r.params||{},"2.0"==r.params.version)return function A(r){if(r.params=r.params||{},r.params.size){let m=r.params.size.split("x");r.params.width=parseInt(m[0]),r.params.height=parseInt(m[1])}(0,v.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{prompt:r.params.prompt||"Superheroes flying in the sky with chibi style",width:r.params.width||512,height:r.params.height||512,steps:20},success:m=>{"function"==typeof r.callback&&r.callback(m.data||null)},error:m=>{"function"==typeof r.callback&&r.callback(),console.error(m)},loading:r.loading})}(r);(0,v.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-text2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:{Prompt:r.params.prompt||"Superheroes flying in the sky with chibi style",Size:r.params.size||"256x256"},success:m=>{"function"==typeof r.callback&&r.callback(m.data||null)},error:m=>{"function"==typeof r.callback&&r.callback(),console.error(m)},loading:r.loading})}function x(r){if(r.params=r.params||{},"2.0"==r.params.version)return function T(r){r.params=r.params||{};const m=new FormData;if(m.append("prompt",r.params.prompt||null),m.append("file",r.params.file||null),r.params.size){let t=r.params.size.split("x");m.append("width",t[0]||512),m.append("height",t[1]||512)}(0,v.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v2.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof r.callback&&r.callback(t.data||null)},error:t=>{"function"==typeof r.callback&&r.callback(),console.error(t)},loading:r.loading})}(r);const m=new FormData;m.append("file",r.params.file||null),m.append("size",r.params.size||"256x256"),(0,v.tm)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/generate-image2image",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof r.callback&&r.callback(t.data||null)},error:t=>{"function"==typeof r.callback&&r.callback(),console.error(t)},loading:r.loading})}function M(r){r.params=r.params||{};const m=new FormData;m.append("prompt",r.params.prompt||null),m.append("sourceText",r.params.sourceText||null),m.append("temperature","1.0"),(0,v.T1)({authorization:!1,api_url:"https://api.trogiupluat.vn/",path:"api/OpenAI/v1.0/get-gpt-action",headers:{api_key:"YjMxZTQwMWENRlYzENTkwNmYZjFlZTFkMRiOTMzNzkzZjgMjUNjJjNDJiMUNTJhYjYYzllYmUZg"},params:m,success:t=>{"function"==typeof r.callback&&r.callback(t.data||null)},error:t=>{"function"==typeof r.callback&&r.callback(),console.error(t)},loading:r.loading})}},865:(G,B,u)=>{"use strict";u.d(B,{s:()=>Y});var v=u(5861),w=u(8107),P=u.n(w),Z=u(6676),e=u.n(Z),d=u(4459),x=u(6240),M=u(1529),A=u(3377),T=u(1862),r=u(8186),m=u(422),t=u(9468),O=u(3536),D=u(6814),n=u(95);function k(g,a){if(1&g&&t.GkF(0,19),2&g){t.oxw();const i=t.MAs(32);t.Q6J("ngTemplateOutlet",i)}}function U(g,a){if(1&g&&t.GkF(0,19),2&g){t.oxw();const i=t.MAs(34);t.Q6J("ngTemplateOutlet",i)}}function I(g,a){1&g&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",21),t.qZA())}function R(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(i);const c=t.oxw(2);return t.KtG(c.download())}),t._UZ(2,"ion-icon",26),t.qZA()()}}function z(g,a){if(1&g&&(t.TgZ(0,"div",20),t._UZ(1,"ion-img",22),t.YNc(2,R,3,0,"div",23),t.qZA()),2&g){const i=t.oxw();let l;t.xp6(1),t.Tol(null!=i.response&&i.response.Data?"img-response":"img-default"),t.Q6J("src",null!==(l=null==i.response?null:i.response.Data)&&void 0!==l?l:"assets/image/no-image.svg"),t.xp6(1),t.Q6J("ngIf",null==i.response?null:i.response.Data)}}function Q(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function K(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function J(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const c=t.oxw(2);return t.KtG(c.submitText2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function L(g,a){1&g&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function j(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1ee3i \xfd "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32)(9,"div",33)(10,"textarea",34),t.NdJ("change",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changePrompt(c))}),t.qZA()()()()(),t.TgZ(11,"div",29)(12,"div",35)(13,"div",36)(14,"label",37),t._uU(15,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(16,"select",38),t.NdJ("ngModelChange",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changeSize(c))}),t.YNc(17,Q,2,2,"option",39),t.qZA()()(),t.TgZ(18,"div",29)(19,"div",35)(20,"div",36)(21,"label",37),t._uU(22,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(23,"select",38),t.NdJ("ngModelChange",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changeVersion(c))}),t.YNc(24,K,2,2,"option",39),t.qZA()()()(),t.TgZ(25,"div")(26,"div",40),t.YNc(27,J,5,0,"div",41),t.YNc(28,L,2,0,"div",41),t.qZA()()()}if(2&g){const i=t.oxw();let l;t.xp6(10),t.Q6J("ngModel",null!==(l=i.dataForm.prompt)&&void 0!==l?l:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}function H(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function $(g,a){if(1&g&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&g){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function S(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div")(1,"button",43),t.NdJ("click",function(){t.CHM(i);const c=t.oxw(2);return t.KtG(c.submitImage2Image())}),t._UZ(2,"ion-icon",44),t.TgZ(3,"span"),t._uU(4,"V\u1ebd \u1ea3nh"),t.qZA()()()}}function W(g,a){1&g&&(t.TgZ(0,"div"),t._UZ(1,"ion-spinner",45),t.qZA())}function F(g,a){if(1&g){const i=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"label"),t._uU(4,"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i "),t.TgZ(5,"span",30),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"div",46)(8,"div",47)(9,"div",32)(10,"div",33),t._UZ(11,"img",3),t.TgZ(12,"div",48)(13,"div",49)(14,"div")(15,"div",50),t._UZ(16,"ion-icon",51),t.qZA(),t.TgZ(17,"div",52)(18,"i"),t._uU(19,"C\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"),t.qZA()()()()()()()()()(),t.TgZ(20,"div",53)(21,"div",35)(22,"div",36)(23,"label",37),t._uU(24,"\u1ea2nh g\u1ed1c"),t.TgZ(25,"span",30),t._uU(26,"*"),t.qZA()()(),t.TgZ(27,"div",54)(28,"input",55),t.NdJ("change",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changeFile(c))}),t.qZA(),t.TgZ(29,"label",56),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",29)(32,"label"),t._uU(33,"G\u1ee3i \xfd"),t.qZA(),t.TgZ(34,"div",31)(35,"textarea",57),t.NdJ("change",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changePrompt(c))}),t.qZA()()(),t.TgZ(36,"div",29)(37,"div",35)(38,"div",36)(39,"label",37),t._uU(40,"K\xedch th\u01b0\u1edbc \u1ea3nh"),t.qZA()(),t.TgZ(41,"select",38),t.NdJ("ngModelChange",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changeSize(c))}),t.YNc(42,H,2,2,"option",39),t.qZA()()(),t.TgZ(43,"div",29)(44,"div",35)(45,"div",36)(46,"label",37),t._uU(47,"Phi\xean b\u1ea3n AI"),t.qZA()(),t.TgZ(48,"select",38),t.NdJ("ngModelChange",function(c){t.CHM(i);const b=t.oxw();return t.KtG(b.changeVersion(c))}),t.YNc(49,$,2,2,"option",39),t.qZA()()()(),t.TgZ(50,"div")(51,"div",40),t.YNc(52,S,5,0,"div",41),t.YNc(53,W,2,0,"div",41),t.qZA()()()}if(2&g){const i=t.oxw();let l,c;t.xp6(11),t.Q6J("src",null!==(l=i.dataForm.fileUrlViewer)&&void 0!==l?l:"",t.LSH),t.xp6(19),t.Oqu(null==i.dataForm.file?null:i.dataForm.file.name),t.xp6(5),t.Q6J("ngModel",null!==(c=i.dataForm.prompt)&&void 0!==c?c:""),t.xp6(6),t.Q6J("ngModel",i.dataForm.size),t.xp6(1),t.Q6J("ngForOf",i.sizes),t.xp6(6),t.Q6J("ngModel",i.dataForm.version),t.xp6(1),t.Q6J("ngForOf",i.versions),t.xp6(3),t.Q6J("ngIf",!i.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",i.dataForm.isloading)}}let Y=(()=>{var g;class a{constructor(l,c,b){this.modalController=l,this.toastController=c,this.loadingController=b,this.versions=["1.0","2.0"],this.sizes=["256x256","512x512","1024x1024","1024x1792","1792x1024"],this.dataForm={version:"2.0",size:"512x512"},this.response={},this.appsettings={}}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,v.Z)(function*(){l.appsettings=yield(0,d.H0)(),l.appsettings.madonvi&&(l.user=yield(0,A.iA)())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeIsFile(l){this.dataForm.isloading||(this.isFile=l)}download(){var l=this;return(0,v.Z)(function*(){var c,b;null!==(c=l.response)&&void 0!==c&&c.Data&&(0,M.r7)({params:{url:null===(b=l.response)||void 0===b?void 0:b.Data},callback:E=>{if(E){var y;let s=(null===(y=l.response)||void 0===y||null===(y=y.Data)||void 0===y||null===(y=y.replace(/(\?|\#)(\w|\_|\-|\*|.)+$/gm,""))||void 0===y||null===(y=y.split("/"))||void 0===y||null===(y=y.pop())||void 0===y?void 0:y.toLocaleLowerCase())||"image.png";(0,T.d4)(E,s,"image/x-png",h=>{h?P()(h,s,"image/x-png"):(0,r.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(_=>{_.present()})})}else(0,r.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i xu\u1ed1ng t\u1eadp tin!"}).then(s=>{s.present()})}})})()}save(){var l=this;return(0,v.Z)(function*(){var c,b;if(l.dataForm.isloading)return(0,r.B)(l.toastController,{message:"H\xe3y \u0111\u1ee3i h\u1ec7 th\u1ed1ng ho\xe0n t\u1ea5t qu\xe1 tr\xecnh t\u1ea1o d\u1eef li\u1ec7u!"}).then(y=>{y.present()});if(null===(c=l.response)||void 0===c||!c.Data)return(0,r.B)(l.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u kh\u1edfi t\u1ea1o!"}).then(y=>{y.present()});const E=yield l.loadingController.create({message:"\u0110ang t\u1ea3i..."});(0,M.G4)({loading:y=>{y?E.present():E.dismiss()},params:{url:null===(b=l.response)||void 0===b?void 0:b.Data},callback:y=>{if(y){var s,h,_;let o={};return o.filepath=y.path+"/"+(null===(s=y.file)||void 0===s?void 0:s.name),o.link_file=l.appsettings.readfileuploadurl+y.path+"/"+(null===(h=y.file)||void 0===h?void 0:h.name),o.media_title=`AI-${e()(new Date).format("YYYYMMDDHHmm(SSS)")}`,o.media_description=l.dataForm.size,o.media_content=l.isFile?void 0:l.dataForm.prompt,o.v_mediatype=m.t.IMAGE,void(0,x.o5)({loading:p=>{p?E.present():E.dismiss()},params:Object.assign(o,{userid:null===(_=l.user)||void 0===_?void 0:_.userid}),callback:p=>{(0,r.B)(l.toastController,{},p).then(f=>{f.present()}),0==(null==p?void 0:p.returncode)&&l.modalController.dismiss(null==p?void 0:p.id,"confirm")}})}(0,r.B)(l.toastController,{message:"Kh\xf4ng th\u1ec3 t\u1ea3i l\xean t\u1eadp tin!"}).then(o=>{o.present()})}})})()}changeSize(l){this.dataForm.size=l}changeVersion(l){this.dataForm.version=l}changePrompt(l){var c;this.dataForm.prompt=null==l||null===(c=l.target)||void 0===c||null===(c=c.value)||void 0===c?void 0:c.trim().replace(/\s+/g," ")}changeFile(l){this.dataForm.file=void 0,l.target.files.length&&(this.dataForm.file=l.target.files[0]),this.dataForm.fileUrlViewer=this.dataForm.file?URL.createObjectURL(this.dataForm.file):void 0}submitText2Image(){var l=this;return(0,v.Z)(function*(){if(!l.dataForm.prompt)return(0,r.B)(l.toastController,{message:"H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(c=>{c.present()});(0,M.u4)({loading:c=>{l.dataForm.isloading=c},params:l.dataForm,callback:c=>{l.response=c}})})()}submitImage2Image(){var l=this;return(0,v.Z)(function*(){if(!l.dataForm.file)return(0,r.B)(l.toastController,{message:"G\u1eedi \u1ea3nh cho ch\xfang t\xf4i, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!"}).then(c=>{c.present()});(0,M.zS)({loading:c=>{l.dataForm.isloading=c},params:l.dataForm,callback:c=>{l.response=c}})})()}}return(g=a).\u0275fac=function(l){return new(l||g)(t.Y36(O.IN),t.Y36(O.yF),t.Y36(O.HT))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-modal-ai-image"]],decls:35,vars:9,consts:[["slot","end","mode","ios","color","light","fill","outline",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"d-flex","h-100","align-stretch","user-select-none"],[1,"col-12","col-lg-5","p-3","pr-lg-0"],[1,"prompt"],[1,"d-flex","h-100","flex-column"],[1,"nav","nav-tabs","nav-fill"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"flex-grow-1","overflow-auto"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col-12","col-lg-7","p-3"],["class","response",4,"ngIf"],["typelink",""],["typefile",""],[3,"ngTemplateOutlet"],[1,"response"],["src","../../../../assets/image/gif/ai-loading.gif",1,"w-100","h-100","no-fit"],[1,"w-100","h-100",3,"src"],["class","download-box",4,"ngIf"],[1,"download-box"],["type","button",3,"click"],["src","../../../../assets/icon/16x16/download.svg"],[1,"d-flex","h-100","flex-column","justify-content-between"],[1,"px-3","mt-2"],[1,"form-group"],[1,"ml-1","text-danger"],[1,"prompt-box"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item"],["placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","text-center"],[4,"ngIf"],[3,"value"],[1,"btn",3,"click"],["src","../../../../assets/icon/16x16/magic.svg"],["name","dots","color","dark",1,"align-middle"],[1,"ondrop-image"],["onclick","document.getElementById('inputFileAiImage').click()",1,"media-box"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-icon"],["src","../../../../assets/image-svg/uploadImage2.svg"],[1,"placeholder-text"],[1,"form-group","hide"],[1,"custom-file"],["type","file","id","inputFileAiImage","multiple","",1,"custom-file-input",3,"change"],["for","inputFileAiImage",1,"custom-file-label"],["rows","3","placeholder","H\xe3y vi\u1ebft m\xf4 t\u1ea3 c\u1ee7a b\u1ea1n, c\xf4ng ngh\u1ec7 AI s\u1ebd gi\xfap b\u1ea1n ho\xe0n thi\u1ec7n \xfd t\u01b0\u1edfng!",1,"form-control","h-100","overflow-auto",3,"ngModel","change"]],template:function(l,c){1&l&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"T\u1ea1o \u1ea3nh b\u1eb1ng c\xf4ng ngh\u1ec7 AI"),t.qZA(),t.TgZ(4,"ion-button",0),t.NdJ("click",function(){return c.save()}),t.TgZ(5,"ion-label"),t._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),t.qZA()(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t.NdJ("click",function(){return c.toggleFullScreen()}),t._UZ(9,"ion-icon",3),t.qZA(),t.TgZ(10,"ion-button",4),t.NdJ("click",function(){return c.close()}),t._UZ(11,"ion-icon",5),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),t.NdJ("click",function(){return c.changeIsFile(!1)}),t._uU(21,"V\u1ebd \u1ea3nh AI"),t.qZA()(),t.TgZ(22,"li",11)(23,"a",12),t.NdJ("click",function(){return c.changeIsFile(!0)}),t._uU(24,"AI - T\u1ea1o \u1ea3nh t\u01b0\u01a1ng \u0111\u1ed3ng"),t.qZA()()()(),t.TgZ(25,"div",13),t.YNc(26,k,1,1,"ng-container",14),t.YNc(27,U,1,1,"ng-container",14),t.qZA()()()(),t.TgZ(28,"div",15),t.YNc(29,I,2,0,"div",16),t.YNc(30,z,3,4,"div",16),t.qZA()()(),t.YNc(31,j,29,7,"ng-template",null,17,t.W1O),t.YNc(33,F,54,9,"ng-template",null,18,t.W1O)),2&l&&(t.xp6(9),t.Q6J("src",c.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.xp6(11),t.Tol(c.isFile?"":"active"),t.xp6(3),t.Tol(c.isFile?"active":""),t.xp6(3),t.Q6J("ngIf",!c.isFile),t.xp6(1),t.Q6J("ngIf",c.isFile),t.xp6(2),t.Q6J("ngIf",c.dataForm.isloading),t.xp6(1),t.Q6J("ngIf",!c.dataForm.isloading))},dependencies:[D.sg,D.O5,D.tP,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.On,O.YG,O.Sm,O.W2,O.Gu,O.gu,O.Xz,O.Q$,O.PQ,O.wd,O.sr],styles:['button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.hide[_ngcontent-%COMP%]{display:none!important}.ondrop-image[_ngcontent-%COMP%]{--color: #eee}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]{border-radius:4px;border:1px dashed rgba(51,53,74,.2);background:#FFF}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:60px}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{color:#33333380}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]), .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%]{display:none}.ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not([src]) + .placeholder[_ngcontent-%COMP%], .ondrop-image[_ngcontent-%COMP%]   .media-box[_ngcontent-%COMP%]   img[src=""][_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{display:block}.prompt[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;color:#333;box-shadow:0 0 12px #0000001a}.prompt[_ngcontent-%COMP%]   .prompt-box[_ngcontent-%COMP%]{border:1px solid transparent}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]{min-width:33%}.prompt[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;background:transparent;padding-left:0}.prompt[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#eee}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{color:var(--ion-color-primary-shade, #000)}.prompt[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:160px;height:3rem;padding:0;border-radius:1.5rem;vertical-align:middle;text-align:center;font-size:14px;font-weight:400;text-transform:initial;background:#FF6A61;color:#fff}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}.prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle;display:inline-block}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{cursor:pointer}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:0;color:inherit}.prompt[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:not(.active){background-color:#e9e8e9}.response[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:100%;border-radius:15px;background:#FFF;box-shadow:0 0 12px #0000001a;line-height:0}.response[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.response[_ngcontent-%COMP%]   ion-img.no-fit[_ngcontent-%COMP%]{object-fit:none}.response[_ngcontent-%COMP%]   ion-img.img-default[_ngcontent-%COMP%]{object-fit:cover}.response[_ngcontent-%COMP%]   ion-img.img-response[_ngcontent-%COMP%]{object-fit:contain}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:1rem;width:3rem;height:3rem;margin-left:-1.5rem;line-height:0;border-radius:50%;box-shadow:0 4px 4px #00000026}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:inherit}.response[_ngcontent-%COMP%]   .download-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;font-size:26px}']}),a})()},6115:(G,B,u)=>{"use strict";u.d(B,{b:()=>W});var v=u(5861),w=u(4459),P=u(8247),Z=u(6240),e=u(3589),d=u(3377),x=u(1862),M=u(422),A=u(3130),T=u(8186),r=u(9403),m=u(5938),t=u(203),O=u(6034),D=u(4260),n=u(9468),k=u(3536),U=u(6814),I=u(95);function R(F,Y){if(1&F){const g=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){n.CHM(g);const i=n.oxw();return n.KtG(i.switchModal("ai-image"))}),n._uU(1,"T\u1ea1o b\u1eb1ng AI"),n.qZA()}2&F&&n.Tol("btn-light")}function z(F,Y){if(1&F&&n.GkF(0,34),2&F){n.oxw();const g=n.MAs(74);n.Q6J("ngTemplateOutlet",g)}}function Q(F,Y){if(1&F&&n.GkF(0,34),2&F){n.oxw();const g=n.MAs(76);n.Q6J("ngTemplateOutlet",g)}}function K(F,Y){if(1&F){const g=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.clearTopic(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function J(F,Y){if(1&F){const g=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.clearCategory(i))}),n._UZ(1,"ion-icon",35),n.qZA()}}function L(F,Y){if(1&F&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&F){const g=Y.$implicit;n.Q6J("value",g.lookup_value),n.xp6(1),n.Oqu(g.lookup_title)}}function j(F,Y){if(1&F&&(n.ynx(0),n.TgZ(1,"option",41),n._uU(2,"Ch\u1ecdn lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA(),n.YNc(3,L,2,2,"option",42),n.BQk()),2&F){const g=n.oxw(2);n.xp6(3),n.Q6J("ngForOf",g.v_mediatypes)}}function H(F,Y){if(1&F){const g=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"T\u1eadp tin"),n.qZA()(),n.TgZ(5,"div",26)(6,"input",36),n.NdJ("change",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeMediaFile(i))}),n.qZA(),n.TgZ(7,"label",37),n._uU(8),n.qZA()()()(),n.TgZ(9,"div",9)(10,"div",15)(11,"div",16)(12,"label",17),n._uU(13,"Lo\u1ea1i t\xe0i li\u1ec7u"),n.qZA()(),n.TgZ(14,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeMediaType(i))}),n.YNc(15,j,4,1,"ng-container",39),n.ynx(16),n.TgZ(17,"option",40),n._uU(18,"T\u1ef1 \u0111\u1ed9ng ch\u1ecdn theo lo\u1ea1i t\u1eadp tin"),n.qZA(),n.BQk(),n.qZA()()()}if(2&F){const g=n.oxw();let a,i;n.xp6(8),n.Oqu(g.mediaFiles.length?"\u0110\xe3 ch\u1ecdn "+g.mediaFiles.length+" t\u1eadp tin":(null!==(a=g.media.filepath)&&void 0!==a?a:"").split("/").pop()),n.xp6(6),n.Q6J("ngModel",null!==(i=g.media.v_mediatype)&&void 0!==i?i:0),n.xp6(1),n.Q6J("ngIf",g.mediaFiles.length<=1)}}function $(F,Y){if(1&F&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&F){const g=Y.$implicit;n.Q6J("value",g.lookup_value),n.xp6(1),n.Oqu(g.lookup_title)}}function S(F,Y){if(1&F){const g=n.EpF();n.TgZ(0,"div",9)(1,"div",15)(2,"div",16)(3,"label",17),n._uU(4,"\u0110\u01b0\u1eddng d\u1eabn"),n.qZA()(),n.TgZ(5,"input",44),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeLinkShare(i))}),n.qZA()()(),n.TgZ(6,"div",9)(7,"div",15)(8,"div",16)(9,"label",17),n._uU(10,"Lo\u1ea1i li\xean k\u1ebft"),n.qZA()(),n.TgZ(11,"select",38),n.NdJ("ngModelChange",function(i){n.CHM(g);const l=n.oxw();return n.KtG(l.changeOssType(i))}),n.TgZ(12,"option",41),n._uU(13,"Ch\u1ecdn lo\u1ea1i li\xean k\u1ebft"),n.qZA(),n.YNc(14,$,2,2,"option",42),n.qZA()()()}if(2&F){const g=n.oxw();let a;n.xp6(5),n.Q6J("ngModel",g.media.link_share),n.xp6(6),n.Q6J("ngModel",null!==(a=g.media.v_osstype)&&void 0!==a?a:0),n.xp6(3),n.Q6J("ngForOf",g.v_osstypes)}}let W=(()=>{var F;class Y{constructor(a,i,l,c){this.modalController=a,this.toastController=i,this.loadingController=l,this.popoverController=c,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[],this.membership={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,v.Z)(function*(){a.appsettings=yield(0,w.H0)(),a.appsettings.madonvi&&(a.user=yield(0,d.iA)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,P.D)({params:{lookup_key:"v_mediatype"},callback:i=>{this.v_mediatypes=i||[]}}),(0,P.D)({params:{lookup_key:"v_osstype"},callback:i=>{this.v_osstypes=i||[]}}),(0,t.ef)({params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,v_functionlimit:O.z.GenAITaoHinhAnh},callback:i=>{var l;this.membership.GenAITaoHinhAnh=(0,D.f)(null==i||null===(l=i.contents)||void 0===l?void 0:l.find(c=>c.v_functionlimit==O.z.GenAITaoHinhAnh))}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(a){return this.modalController.dismiss({modalName:a},"switch")}save(){var a=this;return(0,v.Z)(function*(){let i=[];if(a.mediaCover&&i.push(new Promise((c,b)=>{(0,e.z)({params:{file:a.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:E=>{var y;0==(null==E?void 0:E.ReturnCode)&&(a.media.cover=E.path+"/"+(null===(y=E.file)||void 0===y?void 0:y.name)),c(!0)}})})),a.isLink){if(a.media.v_mediatype=M.t.LINK,!a.media.link_share)return void(0,T.B)(a.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(c=>{c.present()})}else if(!a.media.link_file){if(a.mediaFiles.length>=2){const c=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});return c.present(),void a.recursiveUpload(b=>{b||c.dismiss()})}if(1!=a.mediaFiles.length)return void(0,T.B)(a.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(c=>{c.present()});i.push(new Promise((c,b)=>{let E=a.mediaFiles.pop();(0,e.z)({params:{file:E,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:y=>{var s,h;0==(null==y?void 0:y.ReturnCode)&&(a.media.filepath=y.path+"/"+(null===(s=y.file)||void 0===s?void 0:s.name),a.media.link_file=a.readfileuploadurl+y.path+"/"+(null===(h=y.file)||void 0===h?void 0:h.name),a.media.media_title||(a.media.media_title=y.name.replace(/.[a-zA-Z0-9]+$/,"")),a.media.v_mediatype||a.v_mediatypes.every(_=>{var o,p;return null===(o=_.lookup_note)||void 0===o||null===(o=o.replace(/\s+/g,""))||void 0===o||!o.split(",").includes(null===(p=y.file)||void 0===p?void 0:p.extension)||(a.media.v_mediatype=_.lookup_value,!1)})),c(!0)}})}))}const l=yield a.loadingController.create({message:"\u0110ang t\u1ea3i..."});l.present(),Promise.all(i).then(c=>{var b;(0,Z.o5)({params:Object.assign({},a.media,{userid:null===(b=a.user)||void 0===b?void 0:b.userid}),callback:E=>{(0,T.B)(a.toastController,{},E).then(y=>{y.present()}),0==(null==E?void 0:E.returncode)&&a.modalController.dismiss(null==E?void 0:E.id,"confirm")},loading:E=>{E||l.dismiss()}})})})()}recursiveUpload(a){if(this.mediaFiles.length){let i={topic_id:this.media.topic_id,category_id:this.media.category_id},l=this.mediaFiles.pop();(0,e.z)({params:{file:l,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:c=>{var b,E,y;0==(null==c?void 0:c.ReturnCode)?(i.filepath=c.path+"/"+(null===(b=c.file)||void 0===b?void 0:b.name),i.link_file=this.readfileuploadurl+c.path+"/"+(null===(E=c.file)||void 0===E?void 0:E.name),i.media_title=c.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(s=>{var h,_;return null===(h=s.lookup_note)||void 0===h||null===(h=h.replace(/\s+/g,""))||void 0===h||!h.split(",").includes(null===(_=c.file)||void 0===_?void 0:_.extension)||(i.v_mediatype=s.lookup_value,!1)}),(0,Z.o5)({params:Object.assign(i,{userid:null===(y=this.user)||void 0===y?void 0:y.userid}),callback:s=>{this.recursiveUpload(a)}})):this.recursiveUpload(a)}})}else a(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(a){var i=this;return(0,v.Z)(function*(){const l=yield i.popoverController.create({component:m.a,componentProps:{selectedId:i.media.topic_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(c=>{var b,E;"confirm"==c.role&&Object.assign(i.media,{topic_id:null===(b=c.data)||void 0===b?void 0:b.topic_id,topic_title:null===(E=c.data)||void 0===E?void 0:E.topic_title})}),l.present()})()}clearTopic(a){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(a){var i;this.media.topic_id=null!==(i=parseInt(a))&&void 0!==i?i:0}presentPopoverCategory(a){var i=this;return(0,v.Z)(function*(){const l=yield i.popoverController.create({component:r.l,componentProps:{selectedId:i.media.category_id,filterFor:"media"},event:a,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(c=>{var b,E;"confirm"==c.role&&Object.assign(i.media,{category_id:null===(b=c.data)||void 0===b?void 0:b.category_id,category_title:null===(E=c.data)||void 0===E?void 0:E.category_title})}),l.present()})()}clearCategory(a){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(a){var i;this.media.category_id=null!==(i=parseInt(a))&&void 0!==i?i:0}changeMediaTitle(a){var i;this.media.media_title=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaDescription(a){var i;this.media.media_description=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaContent(a){var i;this.media.media_content=null==a||null===(i=a.target)||void 0===i?void 0:i.value}changeMediaType(a){this.media.v_mediatype=a?parseInt(a):0}changeOssType(a){this.media.v_osstype=a?parseInt(a):0}changeLinkShare(a){this.media.link_share=a,(0,x.II)(a)?this.media.v_osstype=A.e.YOUTUBE:(0,x.VJ)(a)&&(this.media.v_osstype=A.e.PHET)}changeMediaFile(a){this.mediaFiles.length=0;for(let l=0,c=null===(i=a.target)||void 0===i?void 0:i.files.length;l<c;l++){var i;this.mediaFiles.push(a.target.files[l])}if(1==this.mediaFiles.length){let{fileName:l,fileExtension:c}=(0,x.yB)(this.mediaFiles[0].name);this.media.media_title=l,this.media.v_mediatype=void 0,this.v_mediatypes.every(b=>{var E;return null===(E=b.lookup_note)||void 0===E||null===(E=E.replace(/\s+/g,""))||void 0===E||!E.split(",").includes(c)||(this.media.v_mediatype=b.lookup_value,!1)}),!this.mediaCover&&this.media.v_mediatype==M.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaFiles[0]))}}changeMediaCover(a){var i;if(this.mediaCover=void 0,a.target.files.length&&(this.mediaCover=a.target.files[0]),!this.mediaCover)return;let b,{fileExtension:c}=(0,x.yB)(null===(i=this.mediaCover)||void 0===i?void 0:i.name);c&&(this.v_mediatypes.every(E=>{var y;return null===(y=E.lookup_note)||void 0===y||null===(y=y.replace(/\s+/g,""))||void 0===y||!y.split(",").includes(c)||(b=E.lookup_value,!1)}),this.mediaCover&&b==M.t.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(a){this.isLink=a}}return(F=Y).\u0275fac=function(a){return new(a||F)(n.Y36(k.IN),n.Y36(k.yF),n.Y36(k.HT),n.Y36(k.Dh))},F.\u0275cmp=n.Xpm({type:F,selectors:[["app-modal-media-add"]],inputs:{filter:"filter"},decls:77,vars:16,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button","class","btn",3,"class","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"ngModel","change"],["rows","6",1,"form-control",3,"ngModel","change"],[1,"col-auto"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"w-100","h-100",3,"src"],["typefile",""],["typelink",""],[3,"ngTemplateOutlet"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModel","ngModelChange"]],template:function(a,i){if(1&a&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Th\xeam h\u1ecdc li\u1ec7u"),n.qZA(),n.TgZ(4,"ion-button",0),n.NdJ("click",function(){return i.save()}),n.TgZ(5,"ion-label"),n._uU(6,"Th\xeam v\xe0o kho h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(7,"ion-buttons",1)(8,"ion-button",2),n.NdJ("click",function(){return i.toggleFullScreen()}),n._UZ(9,"ion-icon",3),n.qZA(),n.TgZ(10,"ion-button",4),n.NdJ("click",function(){return i.close()}),n._UZ(11,"ion-icon",5),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"button",11),n.NdJ("click",function(){return i.changeIsLink(!1)}),n._uU(19,"T\u1eadp tin"),n.qZA(),n.TgZ(20,"button",11),n.NdJ("click",function(){return i.changeIsLink(!0)}),n._uU(21,"Li\xean k\u1ebft"),n.qZA(),n.YNc(22,R,2,2,"button",12),n.qZA()(),n.YNc(23,z,1,1,"ng-container",13),n.YNc(24,Q,1,1,"ng-container",13),n.qZA()(),n.TgZ(25,"div",7)(26,"div",14)(27,"div",9)(28,"div",15)(29,"div",16)(30,"label",17),n._uU(31,"C\u1ea5p l\u1edbp"),n.qZA()(),n._UZ(32,"input",18),n.TgZ(33,"div",19),n.YNc(34,K,2,0,"button",20),n.TgZ(35,"button",21),n.NdJ("click",function(c){return i.presentPopoverTopic(c)}),n._UZ(36,"ion-icon",22),n.qZA()()()(),n.TgZ(37,"div",9)(38,"div",15)(39,"div",16)(40,"label",17),n._uU(41,"M\xf4n h\u1ecdc"),n.qZA()(),n._UZ(42,"input",18),n.TgZ(43,"div",19),n.YNc(44,J,2,0,"button",20),n.TgZ(45,"button",21),n.NdJ("click",function(c){return i.presentPopoverCategory(c)}),n._UZ(46,"ion-icon",22),n.qZA()()()(),n.TgZ(47,"div",9)(48,"div",15)(49,"div",16)(50,"label",17),n._uU(51,"T\xean h\u1ecdc li\u1ec7u"),n.qZA()(),n.TgZ(52,"input",23),n.NdJ("change",function(c){return i.changeMediaTitle(c)}),n.qZA()()(),n.TgZ(53,"div",9)(54,"div",15)(55,"div",16)(56,"label",17),n._uU(57,"M\xf4 t\u1ea3"),n.qZA()(),n.TgZ(58,"textarea",24),n.NdJ("change",function(c){return i.changeMediaDescription(c)}),n.qZA()()()(),n.TgZ(59,"div",25)(60,"div",9)(61,"div",15)(62,"div",16)(63,"label",17),n._uU(64,"\u1ea2nh b\xeca"),n.qZA()(),n.TgZ(65,"div",26)(66,"input",27),n.NdJ("change",function(c){return i.changeMediaCover(c)}),n.qZA(),n.TgZ(67,"label",28),n._uU(68),n.qZA()()()(),n.TgZ(69,"div",9)(70,"div",29)(71,"div",30),n._UZ(72,"ion-img",31),n.qZA()()()()()()(),n.YNc(73,H,19,3,"ng-template",null,32,n.W1O),n.YNc(75,S,15,3,"ng-template",null,33,n.W1O)),2&a){let l,c;n.xp6(9),n.Q6J("src",i.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.xp6(9),n.Tol(i.isLink?"btn-light":"btn-primary"),n.xp6(2),n.Tol(i.isLink?"btn-primary":"btn-light"),n.xp6(2),n.Q6J("ngIf",null==i.membership?null:i.membership.GenAITaoHinhAnh),n.xp6(1),n.Q6J("ngIf",!i.isLink),n.xp6(1),n.Q6J("ngIf",i.isLink),n.xp6(8),n.Q6J("value",null!==(l=i.media.topic_title)&&void 0!==l?l:""),n.xp6(2),n.Q6J("ngIf",i.media.topic_id),n.xp6(8),n.Q6J("value",null!==(c=i.media.category_title)&&void 0!==c?c:""),n.xp6(2),n.Q6J("ngIf",i.media.category_id),n.xp6(8),n.Q6J("ngModel",i.media.media_title),n.xp6(6),n.Q6J("ngModel",i.media.media_description),n.xp6(10),n.Oqu(null==i.mediaCover?null:i.mediaCover.name),n.xp6(4),n.Q6J("src",i.fileurl||"assets/image-png/media-default.jpg")}},dependencies:[U.sg,U.O5,U.tP,I.YN,I.Kr,I.Fj,I.EJ,I.JJ,I.On,k.YG,k.Sm,k.W2,k.Gu,k.gu,k.Xz,k.Q$,k.wd,k.sr],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}"]}),Y})()},5630:(G,B,u)=>{"use strict";u.d(B,{M:()=>y});var v=u(1461),w=u(8247),P=u(3938),Z=u(4041),e=u(9468),d=u(3536),x=u(6814);function M(s,h){if(1&s&&e.GkF(0,23),2&s){e.oxw();const _=e.MAs(23);e.Q6J("ngTemplateOutlet",_)}}function A(s,h){if(1&s&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Lo\u1ea1i t\u1eadp tin"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(25);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function T(s,h){if(1&s&&(e.TgZ(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"Th\u1ebb"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(27);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function r(s,h){if(1&s&&(e.TgZ(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"C\u1ea5p l\u1edbp"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(29);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function m(s,h){if(1&s&&(e.TgZ(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e._uU(3,"M\xf4n h\u1ecdc"),e.qZA()(),e.TgZ(4,"div",26),e.GkF(5,23),e.qZA()()),2&s){e.oxw();const _=e.MAs(33);e.xp6(5),e.Q6J("ngTemplateOutlet",_)}}function t(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",37),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.clearFilterTopic(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.topic_title)&&void 0!==o?o:"C\u1ea5p l\u1edbp")}}function O(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",40),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.clearFilterCategory(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.category_title)&&void 0!==o?o:"M\xf4n h\u1ecdc")}}function D(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",41),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.clearFilterTags(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.tags_key)&&void 0!==o?o:"Th\u1ebb")}}function n(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.clearFilterMediaType(p,f.filter.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);let o;e.xp6(4),e.Oqu(null!==(o=_.filter.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function k(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",42),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){const C=e.CHM(_).$implicit,N=e.oxw(2);return e.KtG(N.clearFilterMediaType(p,C.v_mediatype))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=h.$implicit;let o;e.xp6(4),e.Oqu(null!==(o=_.v_mediatype_title)&&void 0!==o?o:"Lo\u1ea1i t\u1eadp tin")}}function U(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"div",35)(1,"div",36),e._UZ(2,"ion-icon",43),e.TgZ(3,"ion-label"),e._uU(4),e.qZA(),e.TgZ(5,"button",38),e.NdJ("click",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.clearSearch(p))}),e._UZ(6,"ion-icon",39),e.qZA()()()}if(2&s){const _=e.oxw(2);e.xp6(4),e.Oqu(_.filter.search)}}const I=function(){return[]};function R(s,h){if(1&s&&(e.TgZ(0,"div",30)(1,"div",31)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,t,7,1,"div",33),e.YNc(6,O,7,1,"div",33),e.YNc(7,D,7,1,"div",33),e.YNc(8,n,7,1,"div",33),e.YNc(9,k,7,1,"div",34),e.YNc(10,U,7,1,"div",33),e.qZA()(),e._UZ(11,"hr")),2&s){const _=e.oxw();let o;e.xp6(3),e.hij("B\u1ed9 l\u1ecdc \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng (",_.counter(),")"),e.xp6(2),e.Q6J("ngIf",_.filter.topic_id),e.xp6(1),e.Q6J("ngIf",_.filter.category_id),e.xp6(1),e.Q6J("ngIf",_.filter.tags_id),e.xp6(1),e.Q6J("ngIf",_.filter.v_mediatype),e.xp6(1),e.Q6J("ngForOf",null!==(o=_.filter.v_mediatypes)&&void 0!==o?o:e.DdM(7,I)),e.xp6(1),e.Q6J("ngIf",_.filter.search)}}function z(s,h){if(1&s){const _=e.EpF();e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-checkbox",47),e.NdJ("ionChange",function(p){e.CHM(_);const f=e.oxw(2);return e.KtG(f.changeMediaType(p))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.BQk()}if(2&s){const _=h.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("value",_.lookup_value)("checked",o.checkedMediaType(_.lookup_value)),e.xp6(2),e.Oqu(_.lookup_title)}}function Q(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.NdJ("ionChange",function(p){e.CHM(_);const f=e.oxw();return e.KtG(f.changeMediaType(p))}),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"T\u1ea5t c\u1ea3"),e.qZA()(),e.YNc(5,z,5,3,"ng-container",46),e.qZA()}if(2&s){const _=e.oxw();e.xp6(2),e.Q6J("value",0),e.xp6(3),e.Q6J("ngForOf",_.v_mediatypes)}}function K(s,h){if(1&s){const _=e.EpF();e.ynx(0),e.TgZ(1,"button",49),e.NdJ("click",function(){const f=e.CHM(_).$implicit,C=e.oxw(2);return e.KtG(C.applyFilterTags({tags_id:f.tags_id,tags_key:f.tags_key}))}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const _=h.$implicit,o=e.oxw(2);e.xp6(1),e.Tol(_.tags_id==o.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.uIk("data-id",_.tags_id),e.xp6(1),e.Oqu(_.tags_key)}}function J(s,h){if(1&s&&(e.TgZ(0,"div",48),e.YNc(1,K,3,4,"ng-container",46),e.qZA()),2&s){const _=e.oxw();e.xp6(1),e.Q6J("ngForOf",_.filterTags(_.tagss))}}const L=function(s){return{$implicit:s}};function j(s,h){if(1&s&&e.GkF(0,52),2&s){const _=h.$implicit;e.oxw(2);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,L,_))}}function H(s,h){if(1&s&&(e.TgZ(0,"div",50)(1,"ion-list",44)(2,"ul"),e.YNc(3,j,1,4,"ng-container",51),e.qZA()()()),2&s){const _=e.oxw();e.xp6(3),e.Q6J("ngForOf",_.filterTopic(_.topics))}}function $(s,h){1&s&&e._UZ(0,"ion-icon",59)}function S(s,h){1&s&&e._UZ(0,"ion-icon",60)}function W(s,h){if(1&s&&e.GkF(0,52),2&s){const _=h.$implicit;e.oxw(3);const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,L,_))}}function F(s,h){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,W,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const _=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterTopic(o.topics,_.topic_id))}}function Y(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const f=e.CHM(_).$implicit,C=e.oxw();return e.KtG(C.applyFilterTopic({topic_id:f.topic_id,topic_title:f.topic_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(p){const C=e.CHM(_).$implicit,N=e.oxw();return e.KtG(N.expandTopic(p,C.topic_id,C.isexpanded))}),e.YNc(3,$,1,0,"ion-icon",55),e.YNc(4,S,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,F,3,1,"ng-container",58),e.qZA()}if(2&s){const _=h.$implicit,o=e.oxw();e.xp6(1),e.Tol(_.topic_id==o.filter.topic_id?"actived":""),e.xp6(1),e.uIk("style",_.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!_.isexpanded),e.xp6(1),e.Q6J("ngIf",_.isexpanded),e.xp6(1),e.Q6J("title",_.topic_title),e.xp6(1),e.Oqu(_.topic_title),e.xp6(1),e.Q6J("ngIf",_.isexpanded)}}function g(s,h){if(1&s&&e.GkF(0,52),2&s){const _=h.$implicit;e.oxw(2);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,L,_))}}function a(s,h){if(1&s&&(e.TgZ(0,"div",61)(1,"ion-list",44)(2,"ul"),e.YNc(3,g,1,4,"ng-container",51),e.qZA()()()),2&s){const _=e.oxw();e.xp6(3),e.Q6J("ngForOf",_.filterCategory(_.categorys))}}function i(s,h){1&s&&e._UZ(0,"ion-icon",59)}function l(s,h){1&s&&e._UZ(0,"ion-icon",60)}function c(s,h){if(1&s&&e.GkF(0,52),2&s){const _=h.$implicit;e.oxw(3);const o=e.MAs(35);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,L,_))}}function b(s,h){if(1&s&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,c,1,4,"ng-container",51),e.qZA(),e.BQk()),2&s){const _=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.filterCategory(o.categorys,_.category_id))}}function E(s,h){if(1&s){const _=e.EpF();e.TgZ(0,"li")(1,"ion-item",53),e.NdJ("click",function(){const f=e.CHM(_).$implicit,C=e.oxw();return e.KtG(C.applyFilterCategory({category_id:f.category_id,category_title:f.category_title}))}),e.TgZ(2,"ion-button",54),e.NdJ("click",function(p){const C=e.CHM(_).$implicit,N=e.oxw();return e.KtG(N.expandCategory(p,C.category_id,C.isexpanded))}),e.YNc(3,i,1,0,"ion-icon",55),e.YNc(4,l,1,0,"ion-icon",56),e.qZA(),e.TgZ(5,"ion-label",57),e._uU(6),e.qZA()(),e.YNc(7,b,3,1,"ng-container",58),e.qZA()}if(2&s){const _=h.$implicit,o=e.oxw();e.xp6(1),e.Tol(_.category_id==o.filter.category_id?"actived":""),e.xp6(1),e.uIk("style",_.ishaschild?"visibility:unset":"visibility:hidden",e.Ckj),e.xp6(1),e.Q6J("ngIf",!_.isexpanded),e.xp6(1),e.Q6J("ngIf",_.isexpanded),e.xp6(1),e.Q6J("title",_.category_title),e.xp6(1),e.Oqu(_.category_title),e.xp6(1),e.Q6J("ngIf",_.isexpanded)}}let y=(()=>{var s;class h{constructor(o){this.modalController=o,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var o;null!==(o=this.filter.v_mediatypes)&&void 0!==o&&o.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,w.D)({params:{lookup_key:"v_mediatype"},callback:p=>{this.v_mediatypes=p||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let o=0;return this.filter.search&&(o+=1),this.filter.topic_id&&(o+=1),this.filter.category_id&&(o+=1),this.filter.tags_id&&(o+=1),this.filter.v_mediatypes&&(o+=this.filter.v_mediatypes.length),o}changeMediaType(o){let{value:p,checked:f}=o.detail;if(0==p)return void(this.filter.v_mediatypes=f?this.v_mediatypes.map(q=>({v_mediatype:q.lookup_value,v_mediatype_title:q.lookup_title})):[]);let C=this.v_mediatypes.find(q=>q.lookup_value==p);var N;f?this.filter.v_mediatypes?this.filter.v_mediatypes.find(q=>q.v_mediatype==p)||this.filter.v_mediatypes.push({v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}]:this.filter.v_mediatypes=null===(N=this.filter.v_mediatypes)||void 0===N?void 0:N.filter(q=>q.v_mediatype!=p)}checkedMediaType(o){var p;return!(null===(p=this.filter.v_mediatypes)||void 0===p||!p.find(f=>f.v_mediatype==o))}clearSearch(o){Object.assign(this.filter,{search:null})}clearFilterMediaType(o,p){this.changeMediaType({detail:{value:p,checked:!1}})}refreshDataTags(o){this.loadTags(void 0,o,!0)}loadTags(o,p,f){var C;(0,P.GX)({params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,tags_pid:o,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:N=>{var q,V;this.tagss=f?null!==(q=null==N?void 0:N.tags)&&void 0!==q?q:[]:this.tagss.concat(null!==(V=null==N?void 0:N.tags)&&void 0!==V?V:[]),p&&p()}})}filterTags(o,p){return o.filter(p?f=>f.tags_pid==p:f=>null==f.tags_pid||0==f.tags_pid)}expandTags(o,p,f){o.preventDefault(),o.stopPropagation(),this.tagss.filter(C=>C.tags_id==p).forEach(C=>{C.isexpanded=!f,C.isloadedchild||(C.isloadedchild=!0,this.loadTags(C.tags_id))})}applyFilterTags(o){Object.assign(this.filter,this.filter.tags_id==o.tags_id?{tags_id:null,tags_key:null}:o)}clearFilterTags(o){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(o){this.loadTopic(void 0,o,!0)}loadTopic(o,p,f){var C;(0,Z.w)({params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,topic_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.topics=f?null!=N?N:[]:this.topics.concat(null!=N?N:[]),p&&p()}})}filterTopic(o,p){return o.filter(p?f=>f.topic_pid==p:f=>null==f.topic_pid||0==f.topic_pid)}expandTopic(o,p,f){o.preventDefault(),o.stopPropagation(),this.topics.filter(C=>C.topic_id==p).forEach(C=>{C.isexpanded=!f,C.isloadedchild||(C.isloadedchild=!0,this.loadTopic(C.topic_id))})}applyFilterTopic(o){Object.assign(this.filter,this.filter.topic_id==o.topic_id?{topic_id:null,topic_title:null}:o)}clearFilterTopic(o){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(o){this.loadCategory(void 0,o,!0)}loadCategory(o,p,f){var C;(0,v.b)({params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,category_pid:o,active:!0,page:1,limit:-1},callback:N=>{this.categorys=f?null!=N?N:[]:this.categorys.concat(null!=N?N:[]),p&&p()}})}filterCategory(o,p){return o.filter(p?f=>f.category_pid==p:f=>null==f.category_pid||0==f.category_pid)}expandCategory(o,p,f){o.preventDefault(),o.stopPropagation(),this.categorys.filter(C=>C.category_id==p).forEach(C=>{C.isexpanded=!f,C.isloadedchild||(C.isloadedchild=!0,this.loadCategory(C.category_id))})}applyFilterCategory(o){Object.assign(this.filter,this.filter.category_id==o.category_id?{category_id:null,category_title:null}:o)}clearFilterCategory(o){Object.assign(this.filter,{category_id:null,category_title:null})}}return(s=h).\u0275fac=function(o){return new(o||s)(e.Y36(d.IN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:36,vars:7,consts:[["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../../assets/icon-svg/arrow-right.svg"],["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../../assets/icon-svg/dashboard/category.svg"],["src","../../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"value","ionChange"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"value","checked","ionChange"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(o,p){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"B\u1ed9 l\u1ecdc"),e.qZA(),e.TgZ(4,"ion-label",1),e.NdJ("click",function(){return p.clean()}),e._uU(5,"X\xf3a t\u1ea5t c\u1ea3"),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"ion-button",3),e.NdJ("click",function(){return p.close()}),e._UZ(8,"ion-icon",4),e.qZA()()()(),e._UZ(9,"hr",5),e.TgZ(10,"ion-content",6),e.YNc(11,M,1,1,"ng-container",7),e.TgZ(12,"ion-accordion-group",8),e.YNc(13,A,6,1,"ion-accordion",9),e.YNc(14,T,6,1,"ion-accordion",10),e.YNc(15,r,6,1,"ion-accordion",11),e.YNc(16,m,6,1,"ion-accordion",12),e.qZA()(),e.TgZ(17,"ion-footer")(18,"ion-item",13),e.NdJ("click",function(){return p.apply()}),e.TgZ(19,"ion-label",14),e._uU(20,"\xc1p d\u1ee5ng"),e.qZA(),e._UZ(21,"ion-icon",15),e.qZA()(),e.YNc(22,R,12,8,"ng-template",null,16,e.W1O),e.YNc(24,Q,6,2,"ng-template",null,17,e.W1O),e.YNc(26,J,2,1,"ng-template",null,18,e.W1O),e.YNc(28,H,4,1,"ng-template",null,19,e.W1O),e.YNc(30,Y,8,8,"ng-template",null,20,e.W1O),e.YNc(32,a,4,1,"ng-template",null,21,e.W1O),e.YNc(34,E,8,8,"ng-template",null,22,e.W1O)),2&o&&(e.xp6(11),e.Q6J("ngIf",p.filter.topic_id||p.filter.category_id||p.filter.tags_id||p.filter.v_mediatype||(null==p.filter.v_mediatypes?null:p.filter.v_mediatypes.length)||p.filter.search),e.xp6(1),e.Q6J("multiple",!0)("value",p.accordionValue),e.xp6(1),e.Q6J("ngIf",p.v_mediatypes.length),e.xp6(1),e.Q6J("ngIf",p.tagss.length),e.xp6(1),e.Q6J("ngIf",p.topics.length),e.xp6(1),e.Q6J("ngIf",p.categorys.length))},dependencies:[x.sg,x.O5,x.tP,d.We,d.eh,d.YG,d.Sm,d.nz,d.W2,d.fr,d.Gu,d.gu,d.Ie,d.Q$,d.q_,d.wd,d.sr,d.w],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),h})()},8262:(G,B,u)=>{"use strict";u.d(B,{W:()=>P});var v=u(9468),w=u(3536);let P=(()=>{var Z;class e{constructor(x){this.popoverController=x}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(Z=e).\u0275fac=function(x){return new(x||Z)(v.Y36(w.Dh))},Z.\u0275cmp=v.Xpm({type:Z,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId"},decls:9,vars:0,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(x,M){1&x&&(v.TgZ(0,"div",0)(1,"div",1)(2,"small"),v._uU(3,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),v.qZA()(),v.TgZ(4,"div",2)(5,"button",3),v.NdJ("click",function(){return M.cancel()}),v._uU(6,"\u0110\xf3ng"),v.qZA(),v.TgZ(7,"button",4),v.NdJ("click",function(){return M.confirm()}),v._uU(8,"X\xf3a"),v.qZA()()())},styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),e})()},5511:(G,B,u)=>{"use strict";u.d(B,{R:()=>d,v:()=>e});var v=u(5861),w=u(3377),P=u(2695),Z=u(4459);const e=function(){var x=(0,v.Z)(function*(){return yield(0,w.iA)()});return function(){return x.apply(this,arguments)}}(),d=function(){var x=(0,v.Z)(function*(M){let A=null!=M?M:yield(0,Z.H0)(),T=yield(0,w.iA)();return(!A.madonvi||!T.userid||A.madonvi!=(null==T?void 0:T.madonvi))&&window.location.replace(P.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),T});return function(A){return x.apply(this,arguments)}}()},3731:(G,B,u)=>{"use strict";u.d(B,{T6:()=>T,ds:()=>M,zq:()=>A});var v=u(8107),w=u.n(v),P=u(4981),Z=u(8530),e=u(3589),d=u(6623);const x=(r,m)=>{var t=document.createElement("input");t.type="file",t.accept=r.accept,t.style.display="none",t.style.visibility="hidden",t.addEventListener("change",O=>{var D;O.preventDefault();let n=(null===(D=O.target)||void 0===D?void 0:D.files)||[];n.length>0&&m(n),document.body.removeChild(t)}),document.body.appendChild(t),t.click()},M=(r,m,t)=>{let O=null!=m?m:D=>console.log(D);x({accept:".lvb"},D=>{(0,e.z)({loading:t,params:{file:D[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:n=>{var k,U;0==(null==n?void 0:n.ReturnCode)?(k=k=>{var U;r.board_id?(0,Z.UK)({loading:t,params:{userid:r.userid,board_id:r.board_id,filepath:n.path+"/"+(null===(U=n.file)||void 0===U?void 0:U.name)},callback:I=>{I&&(I.id=r.board_id),O(I)}}):O(k)},r.board_id?k():(0,Z.Ux)({loading:t,params:{userid:r.userid,board_title:(null===(U=n.name)||void 0===U?void 0:U.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:I=>{0==(null==I?void 0:I.returncode)&&(r.board_id=null==I?void 0:I.id),k(I)}})):O({returncode:null==n?void 0:n.ReturnCode,returnmsg:null==n?void 0:n.ReturnName})}})})},A=(r,m)=>{(0,Z.gK)({params:{userid:r.userid,board_id:r.board_id},callback:(t,O)=>{0==(null==t?void 0:t.returncode)&&w()(`${null==O?void 0:O.readfileuploadurl}${null==t?void 0:t.token}`),m&&m(t)},loading:t=>{}})},T=(r,m)=>{let t=null!=m?m:O=>console.log(O);x({accept:".json, application/json"},O=>{var D=new FileReader;D.onload=()=>{if(D.result){let k,n=JSON.parse(D.result.toString());n&&!n.modules?k=(0,d.w)(n):"icdtV2"==(null==n?void 0:n.modules)&&(k=n),k&&(P.icdt.dataSource=k,P.icdt.data.openSlide())}t()},D.readAsText(O[0])})}},4260:(G,B,u)=>{"use strict";u.d(B,{f:()=>w});const w=(P,Z)=>{switch(null==P?void 0:P.v_datatype){case 800:if(null!=Z&&P.datavalue==Z)return!0;break;case 801:if(null!=Z&&P.datavalue==Z)return!0;if("1"==P.datavalue||"true"==P.datavalue||"TRUE"==P.datavalue||"True"==P.datavalue)return!0;break;case 802:if(null!=Z&&P.datavalue==Z)return!0;if(1==parseInt(P.datavalue))return!0}return!1}},6034:(G,B,u)=>{"use strict";u.d(B,{z:()=>v});const v={XemTatCaBaiGiangDaDuocPheDuyet:10301,SoLuongBaiGiangToiDaTrongDanhMuc:10302,SoLuongHocLieuToiDaTrongDanhMuc:10303,VungLuuTruDuLieu:10304,GenAITaoNoiDungTuDongBangVanBan:10311,GenAITaoHinhAnh:10312,GenAITaoHinhAnhgioiHanSoLuongMoiNgay:10313,GenAITaoBaiKiemTra:10314,NhapXuatDuLieuBaiGiangLVB:10321,XuatDuLieuBaiGiangVoiDinhDangSCORM:10322}},8107:function(G,B){var u,w;void 0!==(w="function"==typeof(u=function(){return function P(Z,e,d){var n,k,x=window,M="application/octet-stream",A=d||M,T=Z,r=!e&&!d&&T,m=document.createElement("a"),t=function(J){return String(J)},O=x.Blob||x.MozBlob||x.WebKitBlob||t,D=e||"download";if(O=O.call?O.bind(x):Blob,"true"===String(this)&&(A=(T=[T,A])[0],T=T[1]),r&&r.length<2048&&(D=r.split("/").pop().split("?")[0],m.href=r,-1!==m.href.indexOf(r))){var U=new XMLHttpRequest;return U.open("GET",r,!0),U.responseType="blob",U.onload=function(J){P(J.target.response,D,M)},setTimeout(function(){U.send()},0),U}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(T)){if(!(T.length>2096103.424&&O!==t))return navigator.msSaveBlob?navigator.msSaveBlob(Q(T),D):K(T);A=(T=Q(T)).type||M}else if(/([\x80-\xff])/.test(T)){for(var I=0,R=new Uint8Array(T.length),z=R.length;I<z;++I)R[I]=T.charCodeAt(I);T=new O([R],{type:A})}function Q(J){for(var L=J.split(/[:;,]/),j=L[1],$=("base64"==L[2]?atob:decodeURIComponent)(L.pop()),S=$.length,W=0,F=new Uint8Array(S);W<S;++W)F[W]=$.charCodeAt(W);return new O([F],{type:j})}function K(J,L){if("download"in m)return m.href=J,m.setAttribute("download",D),m.className="download-js-link",m.innerHTML="downloading...",m.style.display="none",document.body.appendChild(m),setTimeout(function(){m.click(),document.body.removeChild(m),!0===L&&setTimeout(function(){x.URL.revokeObjectURL(m.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(J)&&(J="data:"+J.replace(/^data:([\w\/\-\+]+)/,M)),window.open(J)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=J),!0;var j=document.createElement("iframe");document.body.appendChild(j),!L&&/^data:/.test(J)&&(J="data:"+J.replace(/^data:([\w\/\-\+]+)/,M)),j.src=J,setTimeout(function(){document.body.removeChild(j)},333)}if(n=T instanceof O?T:new O([T],{type:A}),navigator.msSaveBlob)return navigator.msSaveBlob(n,D);if(x.URL)K(x.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===t)try{return K("data:"+A+";base64,"+x.btoa(n))}catch{return K("data:"+A+","+encodeURIComponent(n))}(k=new FileReader).onload=function(J){K(this.result)},k.readAsDataURL(n)}return!0}})?u.apply(B,[]):u)&&(G.exports=w)}}]);